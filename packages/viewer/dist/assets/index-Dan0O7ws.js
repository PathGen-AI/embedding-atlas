(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const _ne=!1;var L3=Array.isArray,ETe=Array.prototype.indexOf,pP=Array.from,gP=Object.defineProperty,kd=Object.getOwnPropertyDescriptor,Sne=Object.getOwnPropertyDescriptors,DTe=Object.prototype,TTe=Array.prototype,mP=Object.getPrototypeOf,kH=Object.isExtensible;function vy(t){return typeof t=="function"}const An=()=>{};function OTe(t){return t()}function ek(t){for(var e=0;e<t.length;e++)t[e]()}function Ane(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function YI(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const xo=2,f8=4,h8=8,ch=16,Hd=32,p1=64,d8=128,hc=512,zs=1024,Ua=2048,fh=4096,Dl=8192,Zp=16384,P3=32768,Pd=65536,EH=1<<17,Cne=1<<18,Vv=1<<19,kne=1<<20,n_=32768,XI=1<<21,yP=1<<22,e0=1<<23,Pf=Symbol("$state"),bP=Symbol("legacy props"),MTe=Symbol(""),Fy=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},p8=3,g1=8;function g8(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ITe(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function RTe(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function FTe(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function NTe(t){throw new Error("https://svelte.dev/e/effect_orphan")}function LTe(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function PTe(){throw new Error("https://svelte.dev/e/hydration_failed")}function BTe(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function $Te(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function UTe(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zTe(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function jTe(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function qTe(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const m8=1,y8=2,Ene=4,VTe=8,WTe=16,HTe=1,GTe=2,YTe=4,XTe=8,KTe=16,QTe=1,JTe=2,ZTe=4,Dne=1,eOe=2,Tne="[",b8="[!",vP="]",Pm={},Ns=Symbol(),tOe="http://www.w3.org/1999/xhtml",nOe="@attach";function B3(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function rOe(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function iOe(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let en=!1;function sc(t){en=t}let Cn;function go(t){if(t===null)throw B3(),Pm;return Cn=t}function g0(){return go(Dc(Cn))}function Z(t){if(en){if(Dc(Cn)!==null)throw B3(),Pm;Cn=t}}function Bm(t=1){if(en){for(var e=t,n=Cn;e--;)n=Dc(n);Cn=n}}function tk(t=!0){for(var e=0,n=Cn;;){if(n.nodeType===g1){var r=n.data;if(r===vP){if(e===0)return n;e-=1}else(r===Tne||r===b8)&&(e+=1)}var i=Dc(n);t&&n.remove(),n=i}}function One(t){if(!t||t.nodeType!==g1)throw B3(),Pm;return t.data}function Mne(t){return t===this.v}function xP(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ine(t){return!xP(t,this.v)}let Wv=!1,sOe=!1;function oOe(){Wv=!0}let Sr=null;function Bb(t){Sr=t}function ot(t,e=!1,n){Sr={p:Sr,i:!1,c:null,e:null,s:t,x:null,l:Wv&&!e?{s:null,u:null,$:[]}:null}}function at(t){var e=Sr,n=e.e;if(n!==null){e.e=null;for(var r of n)Jne(r)}return t!==void 0&&(e.x=t),e.i=!0,Sr=e.p,t??{}}function Hv(){return!Wv||Sr!==null&&Sr.l===null}let Vg=[];function Rne(){var t=Vg;Vg=[],ek(t)}function Gd(t){if(Vg.length===0&&!_w){var e=Vg;queueMicrotask(()=>{e===Vg&&Rne()})}Vg.push(t)}function aOe(){for(;Vg.length>0;)Rne()}function Fne(t){var e=On;if(e===null)return Bn.f|=e0,t;if((e.f&P3)===0){if((e.f&d8)===0)throw t;e.b.error(t)}else $b(t,e)}function $b(t,e){for(;e!==null;){if((e.f&d8)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const sA=new Set;let Yr=null,X6=null,bl=null,hf=[],v8=null,KI=!1,_w=!1,Wg=class QI{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){hf=[],X6=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#u(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(X6=this,Yr=null,DH(n.render_effects),DH(n.effects),X6=null,this.#l?.resolve()),bl=null}#s(e,n){e.f^=zs;for(var r=e.first;r!==null;){var i=r.f,s=(i&(Hd|p1))!==0,o=s&&(i&zs)!==0,a=o||(i&Dl)!==0||this.skipped_effects.has(r);if((r.f&d8)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){s?r.f^=zs:(i&f8)!==0?n.effects.push(r):Kv(r)&&((r.f&ch)!==0&&n.block_effects.push(r),zb(r));var l=r.first;if(l!==null){r=l;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(e){for(const n of e)((n.f&Ua)!==0?this.#a:this.#i).push(n),Hs(n,zs)}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&e0)===0&&(this.current.set(e,e.v),bl?.set(e,e.v))}activate(){Yr=this,this.apply()}deactivate(){Yr=null,bl=null}flush(){if(this.activate(),hf.length>0){if(Lne(),Yr!==null&&Yr!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#c()}#c(){if(sA.size>1){this.previous.clear();var e=bl,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of sA){if(i===this){n=!1;continue}const s=[];for(const[a,l]of this.current){if(i.current.has(a))if(n&&l!==i.current.get(a))i.current.set(a,l);else continue;s.push(a)}if(s.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){const a=new Set,l=new Map;for(const u of s)Pne(u,o,a,l);if(hf.length>0){Yr=i,i.apply();for(const u of hf)i.#s(u,r);hf=[],i.deactivate()}}}Yr=null,bl=e}this.committed=!0,sA.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#a)Hs(e,Ua),$m(e);for(const e of this.#i)Hs(e,fh),$m(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=Ane()).promise}static ensure(){if(Yr===null){const e=Yr=new QI;sA.add(Yr),_w||QI.enqueue(()=>{Yr===e&&e.flush()})}return Yr}static enqueue(e){Gd(e)}apply(){}};function Nne(t){var e=_w;_w=!0;try{for(var n;;){if(aOe(),hf.length===0&&(Yr?.flush(),hf.length===0))return v8=null,n;Lne()}}finally{_w=e}}function Lne(){var t=dm;KI=!0;try{var e=0;for(MH(!0);hf.length>0;){var n=Wg.ensure();if(e++>1e3){var r,i;lOe()}n.process(hf),t0.clear()}}finally{KI=!1,MH(t),v8=null}}function lOe(){try{LTe()}catch(t){$b(t,v8)}}let Kh=null;function DH(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Zp|Dl))===0&&Kv(r)&&(Kh=new Set,zb(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?nre(r):r.fn=null),Kh?.size>0)){t0.clear();for(const i of Kh){if((i.f&(Zp|Dl))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)Kh.has(o)&&(Kh.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(Zp|Dl))===0&&zb(l)}}Kh.clear()}}Kh=null}}function Pne(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&xo)!==0?Pne(i,e,n,r):(s&(yP|ch))!==0&&(s&Ua)===0&&Bne(i,e,r)&&(Hs(i,Ua),$m(i))}}function Bne(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&xo)!==0&&Bne(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function $m(t){for(var e=v8=t;e.parent!==null;){e=e.parent;var n=e.f;if(KI&&e===On&&(n&ch)!==0&&(n&Cne)===0)return;if((n&(p1|Hd))!==0){if((n&zs)===0)return;e.f^=zs}}hf.push(e)}function uOe(t){let e=0,n=Um(0),r;return()=>{x8()&&(k(n),Xv(()=>(e===0&&(r=wo(()=>t(()=>Sw(n)))),e+=1,()=>{Gd(()=>{e-=1,e===0&&(r?.(),r=void 0,Sw(n))})})))}}var cOe=Pd|Vv|d8;function $ne(t,e,n){new fOe(t,e,n)}class fOe{parent;#e=!1;#t;#n=en?Cn:null;#r;#l;#a;#i=null;#s=null;#o=null;#u=null;#c=null;#d=0;#f=0;#p=!1;#h=null;#y=uOe(()=>(this.#h=Um(this.#d),()=>{this.#h=null}));constructor(e,n,r){this.#t=e,this.#r=n,this.#l=r,this.parent=On.b,this.#e=!!this.#r.pending,this.#a=Y0(()=>{if(On.b=this,en){const s=this.#n;g0(),s.nodeType===g1&&s.data===b8?this.#v():this.#b()}else{var i=this.#x();try{this.#i=xa(()=>r(i))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},cOe),en&&(this.#t=Cn)}#b(){try{this.#i=xa(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#v(){const e=this.#r.pending;e&&(this.#s=xa(()=>e(this.#t)),Wg.enqueue(()=>{var n=this.#x();this.#i=this.#g(()=>(Wg.ensure(),xa(()=>this.#l(n)))),this.#f>0?this.#m():(tb(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#x(){var e=this.#t;return this.#e&&(this.#c=Fl(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#g(e){var n=On,r=Bn,i=Sr;Gf(this.#a),Ma(this.#a),Bb(this.#a.ctx);try{return e()}catch(s){return Fne(s),null}finally{Gf(n),Ma(r),Bb(i)}}#m(){const e=this.#r.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),sre(this.#i,this.#u)),this.#s===null&&(this.#s=xa(()=>e(this.#t)))}#w(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(e);return}this.#f+=e,this.#f===0&&(this.#e=!1,this.#s&&tb(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#w(e),this.#d+=e,this.#h&&Ub(this.#h,this.#d)}get_effect_pending(){return this.#y(),k(this.#h)}error(e){var n=this.#r.onerror;let r=this.#r.failed;if(this.#p||!n&&!r)throw e;this.#i&&(Es(this.#i),this.#i=null),this.#s&&(Es(this.#s),this.#s=null),this.#o&&(Es(this.#o),this.#o=null),en&&(go(this.#n),Bm(),go(tk()));var i=!1,s=!1;const o=()=>{if(i){iOe();return}i=!0,s&&qTe(),Wg.ensure(),this.#d=0,this.#o!==null&&tb(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#g(()=>(this.#p=!1,xa(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var a=Bn;try{Ma(null),s=!0,n?.(e,o),s=!1}catch(l){$b(l,this.#a&&this.#a.parent)}finally{Ma(a)}r&&Gd(()=>{this.#o=this.#g(()=>{Wg.ensure(),this.#p=!0;try{return xa(()=>{r(this.#t,()=>e,()=>o)})}catch(l){return $b(l,this.#a.parent),null}finally{this.#p=!1}})})}}function Une(t,e,n,r){const i=Hv()?$3:wP;if(n.length===0&&t.length===0){r(e.map(i));return}var s=Yr,o=On,a=hOe();function l(){Promise.all(n.map(u=>dOe(u))).then(u=>{a();try{r([...e.map(i),...u])}catch(c){(o.f&Zp)===0&&$b(c,o)}s?.deactivate(),nk()}).catch(u=>{$b(u,o)})}t.length>0?Promise.all(t).then(()=>{a();try{return l()}finally{s?.deactivate(),nk()}}):l()}function hOe(){var t=On,e=Bn,n=Sr,r=Yr;return function(s=!0){Gf(t),Ma(e),Bb(n),s&&r?.activate()}}function nk(){Gf(null),Ma(null),Bb(null)}function $3(t){var e=xo|Ua,n=Bn!==null&&(Bn.f&xo)!==0?Bn:null;return On!==null&&(On.f|=Vv),{ctx:Sr,deps:null,effects:null,equals:Mne,f:e,fn:t,reactions:null,rv:0,v:Ns,wv:0,parent:n??On,ac:null}}function dOe(t,e){let n=On;n===null&&ITe();var r=n.b,i=void 0,s=Um(Ns),o=!Bn,a=new Map;return SOe(()=>{var l=Ane();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{u===Yr&&u.committed&&u.deactivate(),nk()})}catch(h){l.reject(h),nk()}var u=Yr;if(o){var c=!r.is_pending();r.update_pending_count(1),u.increment(c),a.get(u)?.reject(Fy),a.delete(u),a.set(u,l)}const f=(h,d=void 0)=>{if(u.activate(),d)d!==Fy&&(s.f|=e0,Ub(s,d));else{(s.f&e0)!==0&&(s.f^=e0),Ub(s,h);for(const[p,m]of a){if(a.delete(p),p===u)break;m.reject(Fy)}}o&&(r.update_pending_count(-1),u.decrement(c))};l.promise.then(f,h=>f(null,h||"unknown"))}),U3(()=>{for(const l of a.values())l.reject(Fy)}),new Promise(l=>{function u(c){function f(){c===i?l(s):u(i)}c.then(f,f)}u(i)})}function J(t){const e=$3(t);return ore(e),e}function wP(t){const e=$3(t);return e.equals=Ine,e}function zne(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Es(e[n])}}function pOe(t){for(var e=t.parent;e!==null;){if((e.f&xo)===0)return e;e=e.parent}return null}function _P(t){var e,n=On;Gf(pOe(t));try{t.f&=~n_,zne(t),e=cre(t)}finally{Gf(n)}return e}function jne(t){var e=_P(t);if(t.equals(e)||(t.v=e,t.wv=lre()),!m1)if(bl!==null)x8()&&bl.set(t,t.v);else{var n=(t.f&hc)===0?fh:zs;Hs(t,n)}}let JI=new Set;const t0=new Map;let qne=!1;function Um(t,e){var n={f:0,v:t,reactions:null,equals:Mne,rv:0,wv:0};return n}function De(t,e){const n=Um(t);return ore(n),n}function eb(t,e=!1,n=!0){const r=Um(t);return e||(r.equals=Ine),Wv&&n&&Sr!==null&&Sr.l!==null&&(Sr.l.s??=[]).push(r),r}function ae(t,e,n=!1){Bn!==null&&(!Af||(Bn.f&EH)!==0)&&Hv()&&(Bn.f&(xo|ch|yP|EH))!==0&&!Ed?.includes(t)&&jTe();let r=n?mu(e):e;return Ub(t,r)}function Ub(t,e){if(!t.equals(e)){var n=t.v;m1?t0.set(t,e):t0.set(t,n),t.v=e;var r=Wg.ensure();r.capture(t,n),(t.f&xo)!==0&&((t.f&Ua)!==0&&_P(t),Hs(t,(t.f&hc)!==0?zs:fh)),t.wv=lre(),Vne(t,Ua),Hv()&&On!==null&&(On.f&zs)!==0&&(On.f&(Hd|p1))===0&&(nu===null?COe([t]):nu.push(t)),!r.is_fork&&JI.size>0&&!qne&&gOe()}return e}function gOe(){qne=!1;const t=Array.from(JI);for(const e of t)(e.f&zs)!==0&&Hs(e,fh),Kv(e)&&zb(e);JI.clear()}function Sw(t){ae(t,t.v+1)}function Vne(t,e){var n=t.reactions;if(n!==null)for(var r=Hv(),i=n.length,s=0;s<i;s++){var o=n[s],a=o.f;if(!(!r&&o===On)){var l=(a&Ua)===0;if(l&&Hs(o,e),(a&xo)!==0){var u=o;bl?.delete(u),(a&n_)===0&&(a&hc&&(o.f|=n_),Vne(u,fh))}else l&&((a&ch)!==0&&Kh!==null&&Kh.add(o),$m(o))}}}function mu(t){if(typeof t!="object"||t===null||Pf in t)return t;const e=mP(t);if(e!==DTe&&e!==TTe)return t;var n=new Map,r=L3(t),i=De(0),s=pm,o=a=>{if(pm===s)return a();var l=Bn,u=pm;Ma(null),RH(s);var c=a();return Ma(l),RH(u),c};return r&&n.set("length",De(t.length)),new Proxy(t,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&UTe();var c=n.get(l);return c===void 0?c=o(()=>{var f=De(u.value);return n.set(l,f),f}):ae(c,u.value,!0),!0},deleteProperty(a,l){var u=n.get(l);if(u===void 0){if(l in a){const c=o(()=>De(Ns));n.set(l,c),Sw(i)}}else ae(u,Ns),Sw(i);return!0},get(a,l,u){if(l===Pf)return t;var c=n.get(l),f=l in a;if(c===void 0&&(!f||kd(a,l)?.writable)&&(c=o(()=>{var d=mu(f?a[l]:Ns),p=De(d);return p}),n.set(l,c)),c!==void 0){var h=k(c);return h===Ns?void 0:h}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var c=n.get(l);c&&(u.value=k(c))}else if(u===void 0){var f=n.get(l),h=f?.v;if(f!==void 0&&h!==Ns)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(a,l){if(l===Pf)return!0;var u=n.get(l),c=u!==void 0&&u.v!==Ns||Reflect.has(a,l);if(u!==void 0||On!==null&&(!c||kd(a,l)?.writable)){u===void 0&&(u=o(()=>{var h=c?mu(a[l]):Ns,d=De(h);return d}),n.set(l,u));var f=k(u);if(f===Ns)return!1}return c},set(a,l,u,c){var f=n.get(l),h=l in a;if(r&&l==="length")for(var d=u;d<f.v;d+=1){var p=n.get(d+"");p!==void 0?ae(p,Ns):d in a&&(p=o(()=>De(Ns)),n.set(d+"",p))}if(f===void 0)(!h||kd(a,l)?.writable)&&(f=o(()=>De(void 0)),ae(f,mu(u)),n.set(l,f));else{h=f.v!==Ns;var m=o(()=>mu(u));ae(f,m)}var y=Reflect.getOwnPropertyDescriptor(a,l);if(y?.set&&y.set.call(c,u),!h){if(r&&typeof l=="string"){var b=n.get("length"),v=Number(l);Number.isInteger(v)&&v>=b.v&&ae(b,v+1)}Sw(i)}return!0},ownKeys(a){k(i);var l=Reflect.ownKeys(a).filter(f=>{var h=n.get(f);return h===void 0||h.v!==Ns});for(var[u,c]of n)c.v!==Ns&&!(u in a)&&l.push(u);return l},setPrototypeOf(){zTe()}})}function TH(t){try{if(t!==null&&typeof t=="object"&&Pf in t)return t[Pf]}catch{}return t}function mOe(t,e){return Object.is(TH(t),TH(e))}var ZI,Wne,Hne,Gne;function eR(){if(ZI===void 0){ZI=window,Wne=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Hne=kd(e,"firstChild").get,Gne=kd(e,"nextSibling").get,kH(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),kH(n)&&(n.__t=void 0)}}function Fl(t=""){return document.createTextNode(t)}function so(t){return Hne.call(t)}function Dc(t){return Gne.call(t)}function ne(t,e){if(!en)return so(t);var n=so(Cn);if(n===null)n=Cn.appendChild(Fl());else if(e&&n.nodeType!==p8){var r=Fl();return n?.before(r),go(r),r}return go(n),n}function Ye(t,e=!1){if(!en){var n=so(t);return n instanceof Comment&&n.data===""?Dc(n):n}if(e&&Cn?.nodeType!==p8){var r=Fl();return Cn?.before(r),go(r),r}return Cn}function pe(t,e=1,n=!1){let r=en?Cn:t;for(var i;e--;)i=r,r=Dc(r);if(!en)return r;if(n&&r?.nodeType!==p8){var s=Fl();return r===null?i?.after(s):r.before(s),go(s),s}return go(r),r}function Yne(t){t.textContent=""}function Xne(){return!1}function yOe(t,e){if(e){const n=document.body;t.autofocus=!0,Gd(()=>{document.activeElement===n&&t.focus()})}}let OH=!1;function Kne(){OH||(OH=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Gv(t){var e=Bn,n=On;Ma(null),Gf(null);try{return t()}finally{Ma(e),Gf(n)}}function bOe(t,e,n,r=n){t.addEventListener(e,()=>Gv(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),Kne()}function Qne(t){On===null&&(Bn===null&&NTe(),FTe()),m1&&RTe()}function vOe(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function hh(t,e,n,r=!0){var i=On;i!==null&&(i.f&Dl)!==0&&(t|=Dl);var s={ctx:Sr,deps:null,nodes_start:null,nodes_end:null,f:t|Ua|hc,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{zb(s),s.f|=P3}catch(l){throw Es(s),l}else e!==null&&$m(s);if(r){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&Vv)===0&&(o=o.first,(t&ch)!==0&&(t&Pd)!==0&&o!==null&&(o.f|=Pd)),o!==null&&(o.parent=i,i!==null&&vOe(o,i),Bn!==null&&(Bn.f&xo)!==0&&(t&p1)===0)){var a=Bn;(a.effects??=[]).push(o)}}return s}function x8(){return Bn!==null&&!Af}function U3(t){const e=hh(h8,null,!1);return Hs(e,zs),e.teardown=t,e}function Tl(t){Qne();var e=On.f,n=!Bn&&(e&Hd)!==0&&(e&P3)===0;if(n){var r=Sr;(r.e??=[]).push(t)}else return Jne(t)}function Jne(t){return hh(f8|kne,t,!1)}function Bt(t){return Qne(),hh(h8|kne,t,!0)}function xOe(t){Wg.ensure();const e=hh(p1|Vv,t,!0);return(n={})=>new Promise(r=>{n.outro?tb(e,()=>{Es(e),r(void 0)}):(Es(e),r(void 0))})}function Yv(t){return hh(f8,t,!1)}function wOe(t,e){var n=Sr,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=Xv(()=>{t(),!r.ran&&(r.ran=!0,wo(e))})}function _Oe(){var t=Sr;Xv(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&zs)!==0&&Hs(n,fh),Kv(n)&&zb(n),e.ran=!1}})}function SOe(t){return hh(yP|Vv,t,!0)}function Xv(t,e=0){return hh(h8|e,t,!0)}function Ne(t,e=[],n=[],r=[],i=!1){Une(r,e,n,s=>{hh(i?f8:h8,()=>t(...s.map(k)),!0)})}function Y0(t,e=0){var n=hh(ch|e,t,!0);return n}function xa(t,e=!0){return hh(Hd|Vv,t,!0,e)}function Zne(t){var e=t.teardown;if(e!==null){const n=m1,r=Bn;IH(!0),Ma(null);try{e.call(null)}finally{IH(n),Ma(r)}}}function ere(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&Gv(()=>{i.abort(Fy)});var r=n.next;(n.f&p1)!==0?n.parent=null:Es(n,e),n=r}}function AOe(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Hd)===0&&Es(e),e=n}}function Es(t,e=!0){var n=!1;(e||(t.f&Cne)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(tre(t.nodes_start,t.nodes_end),n=!0),ere(t,e&&!n),rk(t,0),Hs(t,Zp);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Zne(t);var i=t.parent;i!==null&&i.first!==null&&nre(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function tre(t,e){for(;t!==null;){var n=t===e?null:Dc(t);t.remove(),t=n}}function nre(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function tb(t,e,n=!0){var r=[];SP(t,r,!0),rre(r,()=>{n&&Es(t),e&&e()})}function rre(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function SP(t,e,n){if((t.f&Dl)===0){if(t.f^=Dl,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&Pd)!==0||(r.f&Hd)!==0&&(t.f&ch)!==0;SP(r,e,s?n:!1),r=i}}}function AP(t){ire(t,!0)}function ire(t,e){if((t.f&Dl)!==0){t.f^=Dl,(t.f&zs)===0&&(Hs(t,Ua),$m(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&Pd)!==0||(n.f&Hd)!==0;ire(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function sre(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Dc(n);e.append(n),n=i}}let dm=!1;function MH(t){dm=t}let m1=!1;function IH(t){m1=t}let Bn=null,Af=!1;function Ma(t){Bn=t}let On=null;function Gf(t){On=t}let Ed=null;function ore(t){Bn!==null&&(Ed===null?Ed=[t]:Ed.push(t))}let Fo=null,cl=0,nu=null;function COe(t){nu=t}let are=1,r_=0,pm=r_;function RH(t){pm=t}function lre(){return++are}function Kv(t){var e=t.f;if((e&Ua)!==0)return!0;if(e&xo&&(t.f&=~n_),(e&fh)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Kv(s)&&jne(s),s.wv>t.wv)return!0}(e&hc)!==0&&bl===null&&Hs(t,zs)}return!1}function ure(t,e,n=!0){var r=t.reactions;if(r!==null&&!Ed?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&xo)!==0?ure(s,e,!1):e===s&&(n?Hs(s,Ua):(s.f&zs)!==0&&Hs(s,fh),$m(s))}}function cre(t){var e=Fo,n=cl,r=nu,i=Bn,s=Ed,o=Sr,a=Af,l=pm,u=t.f;Fo=null,cl=0,nu=null,Bn=(u&(Hd|p1))===0?t:null,Ed=null,Bb(t.ctx),Af=!1,pm=++r_,t.ac!==null&&(Gv(()=>{t.ac.abort(Fy)}),t.ac=null);try{t.f|=XI;var c=t.fn,f=c(),h=t.deps;if(Fo!==null){var d;if(rk(t,cl),h!==null&&cl>0)for(h.length=cl+Fo.length,d=0;d<Fo.length;d++)h[cl+d]=Fo[d];else t.deps=h=Fo;if(dm&&x8()&&(t.f&hc)!==0)for(d=cl;d<h.length;d++)(h[d].reactions??=[]).push(t)}else h!==null&&cl<h.length&&(rk(t,cl),h.length=cl);if(Hv()&&nu!==null&&!Af&&h!==null&&(t.f&(xo|fh|Ua))===0)for(d=0;d<nu.length;d++)ure(nu[d],t);return i!==null&&i!==t&&(r_++,nu!==null&&(r===null?r=nu:r.push(...nu))),(t.f&e0)!==0&&(t.f^=e0),f}catch(p){return Fne(p)}finally{t.f^=XI,Fo=e,cl=n,nu=r,Bn=i,Ed=s,Bb(o),Af=a,pm=l}}function kOe(t,e){let n=e.reactions;if(n!==null){var r=ETe.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&xo)!==0&&(Fo===null||!Fo.includes(e))&&(Hs(e,fh),(e.f&hc)!==0&&(e.f^=hc,e.f&=~n_),zne(e),rk(e,0))}function rk(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)kOe(t,n[r])}function zb(t){var e=t.f;if((e&Zp)===0){Hs(t,zs);var n=On,r=dm;On=t,dm=!0;try{(e&ch)!==0?AOe(t):ere(t),Zne(t);var i=cre(t);t.teardown=typeof i=="function"?i:null,t.wv=are;var s;_ne&&sOe&&(t.f&Ua)!==0&&t.deps}finally{dm=r,On=n}}}async function fre(){await Promise.resolve(),Nne()}function k(t){var e=t.f,n=(e&xo)!==0;if(Bn!==null&&!Af){var r=On!==null&&(On.f&Zp)!==0;if(!r&&!Ed?.includes(t)){var i=Bn.deps;if((Bn.f&XI)!==0)t.rv<r_&&(t.rv=r_,Fo===null&&i!==null&&i[cl]===t?cl++:Fo===null?Fo=[t]:Fo.includes(t)||Fo.push(t));else{(Bn.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[Bn]:s.includes(Bn)||s.push(Bn)}}}if(m1){if(t0.has(t))return t0.get(t);if(n){var o=t,a=o.v;return((o.f&zs)===0&&o.reactions!==null||dre(o))&&(a=_P(o)),t0.set(o,a),a}}else if(n){if(o=t,bl?.has(o))return bl.get(o);Kv(o)&&jne(o),dm&&x8()&&(o.f&hc)===0&&hre(o)}else if(bl?.has(t))return bl.get(t);if((t.f&e0)!==0)throw t.v;return t.v}function hre(t){if(t.deps!==null){t.f^=hc;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&xo)!==0&&(e.f&hc)===0&&hre(e)}}function dre(t){if(t.v===Ns)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(t0.has(e)||(e.f&xo)!==0&&dre(e))return!0;return!1}function wo(t){var e=Af;try{return Af=!0,t()}finally{Af=e}}const EOe=-7169;function Hs(t,e){t.f=t.f&EOe|e}function CP(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Pf in t)tR(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Pf in n&&tR(n)}}}function tR(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{tR(t[r],e)}catch{}const n=mP(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Sne(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function DOe(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const TOe=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function OOe(t){return TOe.includes(t)}const MOe={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function IOe(t){return t=t.toLowerCase(),MOe[t]??t}const ROe=["touchstart","touchmove"];function FOe(t){return ROe.includes(t)}const pre=new Set,nR=new Set;function gre(t,e,n,r={}){function i(s){if(r.capture||zx.call(e,s),!s.cancelBubble)return Gv(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Gd(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function nb(t,e,n,r,i){var s={capture:r,passive:i},o=gre(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&U3(()=>{e.removeEventListener(t,o,s)})}function ti(t){for(var e=0;e<t.length;e++)pre.add(t[e]);for(var n of nR)n(t)}let FH=null;function zx(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;FH=t;var o=0,a=FH===t&&t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(s=i[o]||t.target,s!==e){gP(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=Bn,f=On;Ma(null),Gf(null);try{for(var h,d=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];m!=null&&(!s.disabled||t.target===s)&&m.call(s,t)}catch(y){h?d.push(y):h=y}if(t.cancelBubble||p===e||p===null)break;s=p}if(h){for(let y of d)queueMicrotask(()=>{throw y});throw h}}finally{t.__root=e,delete t.currentTarget,Ma(c),Gf(f)}}}function kP(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ol(t,e){var n=On;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function xe(t,e){var n=(e&Dne)!==0,r=(e&eOe)!==0,i,s=!t.startsWith("<!>");return()=>{if(en)return Ol(Cn,null),Cn;i===void 0&&(i=kP(s?t:"<!>"+t),n||(i=so(i)));var o=r||Wne?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=so(o),l=o.lastChild;Ol(a,l)}else Ol(o,o);return o}}function NOe(t,e,n="svg"){var r=!t.startsWith("<!>"),i=(e&Dne)!==0,s=`<${n}>${r?t:"<!>"+t}</${n}>`,o;return()=>{if(en)return Ol(Cn,null),Cn;if(!o){var a=kP(s),l=so(a);if(i)for(o=document.createDocumentFragment();so(l);)o.appendChild(so(l));else o=so(l)}var u=o.cloneNode(!0);if(i){var c=so(u),f=u.lastChild;Ol(c,f)}else Ol(u,u);return u}}function an(t,e){return NOe(t,e,"svg")}function Ca(t=""){if(!en){var e=Fl(t+"");return Ol(e,e),e}var n=Cn;return n.nodeType!==p8&&(n.before(n=Fl()),go(n)),Ol(n,n),n}function kn(){if(en)return Ol(Cn,null),Cn;var t=document.createDocumentFragment(),e=document.createComment(""),n=Fl();return t.append(e,n),Ol(e,n),t}function te(t,e){if(en){var n=On;((n.f&P3)===0||n.nodes_end===null)&&(n.nodes_end=Cn),g0();return}t!==null&&t.before(e)}let rR=!0;function pt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function EP(t,e){return mre(t,e)}function LOe(t,e){eR(),e.intro=e.intro??!1;const n=e.target,r=en,i=Cn;try{for(var s=so(n);s&&(s.nodeType!==g1||s.data!==Tne);)s=Dc(s);if(!s)throw Pm;sc(!0),go(s);const o=mre(t,{...e,anchor:s});return sc(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==Pm&&console.warn("Failed to hydrate: ",o),e.recover===!1&&PTe(),eR(),Yne(n),sc(!1),EP(t,e)}finally{sc(r),go(i)}}const J1=new Map;function mre(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){eR();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var d=f[h];if(!a.has(d)){a.add(d);var p=FOe(d);e.addEventListener(d,zx,{passive:p});var m=J1.get(d);m===void 0?(document.addEventListener(d,zx,{passive:p}),J1.set(d,1)):J1.set(d,m+1)}}};l(pP(pre)),nR.add(l);var u=void 0,c=xOe(()=>{var f=n??e.appendChild(Fl());return $ne(f,{pending:()=>{}},h=>{if(s){ot({});var d=Sr;d.c=s}if(i&&(r.$$events=i),en&&Ol(h,null),rR=o,u=t(h,r)||{},rR=!0,en&&(On.nodes_end=Cn,Cn===null||Cn.nodeType!==g1||Cn.data!==vP))throw B3(),Pm;s&&at()}),()=>{for(var h of a){e.removeEventListener(h,zx);var d=J1.get(h);--d===0?(document.removeEventListener(h,zx),J1.delete(h)):J1.set(h,d)}nR.delete(l),f!==n&&f.parentNode?.removeChild(f)}});return iR.set(u,c),u}let iR=new WeakMap;function POe(t,e){const n=iR.get(t);return n?(iR.delete(t),n(e)):Promise.resolve()}class w8{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(e,n=!0){this.anchor=e,this.#r=n}#l=()=>{var e=Yr;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)AP(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(o);a&&(Es(a.effect),this.#n.delete(o))}for(const[s,o]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var u=document.createDocumentFragment();sre(o,u),u.append(Fl()),this.#n.set(s,{effect:o,fragment:u})}else Es(o);this.#t.delete(s)};this.#r||!r?tb(o,a,!1):a()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#n)n.includes(r)||(Es(i.effect),this.#n.delete(r))};ensure(e,n){var r=Yr,i=Xne();if(n&&!this.#t.has(e)&&!this.#n.has(e))if(i){var s=document.createDocumentFragment(),o=Fl();s.append(o),this.#n.set(e,{effect:xa(()=>n(o)),fragment:s})}else this.#t.set(e,xa(()=>n(this.anchor)));if(this.#e.set(r,e),i){for(const[a,l]of this.#t)a===e?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[a,l]of this.#n)a===e?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#l),r.ondiscard(this.#a)}else en&&(this.anchor=Cn),this.#l()}}function Le(t,e,n=!1){en&&g0();var r=new w8(t),i=n?Pd:0;function s(o,a){if(en){const u=One(t)===b8;if(o===u){var l=tk();go(l),r.anchor=l,sc(!1),r.ensure(o,a),sc(!0);return}}r.ensure(o,a)}Y0(()=>{var o=!1;e((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},i)}function yre(t,e,n){en&&g0();var r=new w8(t),i=!Hv();Y0(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}let K6=null;function Pn(t,e){return e}function BOe(t,e,n){for(var r=t.items,i=[],s=e.length,o=0;o<s;o++)SP(e[o].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;Yne(l),l.append(n),r.clear(),tf(t,e[0].prev,e[s-1].next)}rre(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(r.delete(c.k),tf(t,c.prev,c.next)),Es(c.e,!a)}})}function hn(t,e,n,r,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&Ene)!==0;if(l){var u=t;o=en?go(so(u)):u.appendChild(Fl())}en&&g0();var c=null,f=!1,h=new Map,d=wP(()=>{var b=n();return L3(b)?b:b==null?[]:pP(b)}),p,m;function y(){$Oe(m,p,a,h,o,i,e,r,n),s!==null&&(p.length===0?c?AP(c):c=xa(()=>s(o)):c!==null&&tb(c,()=>{c=null}))}Y0(()=>{m??=On,p=k(d);var b=p.length;if(f&&b===0)return;f=b===0;let v=!1;if(en){var w=One(o)===b8;w!==(b===0)&&(o=tk(),go(o),sc(!1),v=!0)}if(en){for(var _=null,S,A=0;A<b;A++){if(Cn.nodeType===g1&&Cn.data===vP){o=Cn,v=!0,sc(!1);break}var C=p[A],D=r(C,A);S=sR(Cn,a,_,null,C,D,A,i,e,n),a.items.set(D,S),_=S}b>0&&go(tk())}if(en)b===0&&s&&(c=xa(()=>s(o)));else if(Xne()){var T=new Set,M=Yr;for(A=0;A<b;A+=1){C=p[A],D=r(C,A);var I=a.items.get(D)??h.get(D);I?(e&(m8|y8))!==0&&bre(I,C,A,e):(S=sR(null,a,null,null,C,D,A,i,e,n,!0),h.set(D,S)),T.add(D)}for(const[N,P]of a.items)T.has(N)||M.skipped_effects.add(P.e);M.oncommit(y)}else y();v&&sc(!0),k(d)}),en&&(o=Cn)}function $Oe(t,e,n,r,i,s,o,a,l){var u=(o&VTe)!==0,c=(o&(m8|y8))!==0,f=e.length,h=n.items,d=n.first,p=d,m,y=null,b,v=[],w=[],_,S,A,C;if(u)for(C=0;C<f;C+=1)_=e[C],S=a(_,C),A=h.get(S),A!==void 0&&(A.a?.measure(),(b??=new Set).add(A));for(C=0;C<f;C+=1){if(_=e[C],S=a(_,C),A=h.get(S),A===void 0){var D=r.get(S);if(D!==void 0){r.delete(S),h.set(S,D);var T=y?y.next:p;tf(n,y,D),tf(n,D,T),B7(D,T,i),y=D}else{var M=p?p.e.nodes_start:i;y=sR(M,n,y,y===null?n.first:y.next,_,S,C,s,o,l)}h.set(S,y),v=[],w=[],p=y.next;continue}if(c&&bre(A,_,C,o),(A.e.f&Dl)!==0&&(AP(A.e),u&&(A.a?.unfix(),(b??=new Set).delete(A))),A!==p){if(m!==void 0&&m.has(A)){if(v.length<w.length){var I=w[0],N;y=I.prev;var P=v[0],O=v[v.length-1];for(N=0;N<v.length;N+=1)B7(v[N],I,i);for(N=0;N<w.length;N+=1)m.delete(w[N]);tf(n,P.prev,O.next),tf(n,y,P),tf(n,O,I),p=I,y=O,C-=1,v=[],w=[]}else m.delete(A),B7(A,p,i),tf(n,A.prev,A.next),tf(n,A,y===null?n.first:y.next),tf(n,y,A),y=A;continue}for(v=[],w=[];p!==null&&p.k!==S;)(p.e.f&Dl)===0&&(m??=new Set).add(p),w.push(p),p=p.next;if(p===null)continue;A=p}v.push(A),y=A,p=A.next}if(p!==null||m!==void 0){for(var R=m===void 0?[]:pP(m);p!==null;)(p.e.f&Dl)===0&&R.push(p),p=p.next;var L=R.length;if(L>0){var B=(o&Ene)!==0&&f===0?i:null;if(u){for(C=0;C<L;C+=1)R[C].a?.measure();for(C=0;C<L;C+=1)R[C].a?.fix()}BOe(n,R,B)}}u&&Gd(()=>{if(b!==void 0)for(A of b)A.a?.apply()}),t.first=n.first&&n.first.e,t.last=y&&y.e;for(var z of r.values())Es(z.e);r.clear()}function bre(t,e,n,r){(r&m8)!==0&&Ub(t.v,e),(r&y8)!==0?Ub(t.i,n):t.i=n}function sR(t,e,n,r,i,s,o,a,l,u,c){var f=K6,h=(l&m8)!==0,d=(l&WTe)===0,p=h?d?eb(i,!1,!1):Um(i):i,m=(l&y8)===0?o:Um(o),y={i:m,v:p,k:s,a:null,e:null,prev:n,next:r};K6=y;try{if(t===null){var b=document.createDocumentFragment();b.append(t=Fl())}return y.e=xa(()=>a(t,p,m,u),en),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?c||(e.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{K6=f}}function B7(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var o=Dc(s);i.before(s),s=o}}function tf(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function UOe(t,e,n=!1,r=!1,i=!1){var s=t,o="";Ne(()=>{var a=On;if(o===(o=e()??"")){en&&g0();return}if(a.nodes_start!==null&&(tre(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),o!==""){if(en){Cn.data;for(var l=g0(),u=l;l!==null&&(l.nodeType!==g1||l.data!=="");)u=l,l=Dc(l);if(l===null)throw B3(),Pm;Ol(Cn,u),s=go(l);return}var c=o+"";n?c=`<svg>${c}</svg>`:r&&(c=`<math>${c}</math>`);var f=kP(c);if((n||r)&&(f=so(f)),Ol(so(f),f.lastChild),n||r)for(;so(f);)s.before(so(f));else s.before(f)}})}function Bd(t,e,...n){var r=new w8(t);Y0(()=>{const i=e()??null;r.ensure(i,i&&(s=>i(s,...n)))},Pd)}function m0(t,e,n){en&&g0();var r=new w8(t);Y0(()=>{var i=e()??null;r.ensure(i,i&&(s=>n(s,i)))},Pd)}function dl(t,e,n){Yv(()=>{var r=wo(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};Xv(()=>{var o=n();CP(o),i&&xP(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function zOe(t,e){var n=void 0,r;Y0(()=>{n!==(n=e())&&(r&&(Es(r),r=null),n&&(r=xa(()=>{Yv(()=>n(t))})))})}function vre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=vre(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function jOe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=vre(t))&&(r&&(r+=" "),r+=e);return r}function _8(t){return typeof t=="object"?jOe(t):t??""}const NH=[...` 	
\r\fÂ \v\uFEFF`];function qOe(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,o=0;(o=r.indexOf(i,o))>=0;){var a=o+s;(o===0||NH.includes(r[o-1]))&&(a===r.length||NH.includes(r[a]))?r=(o===0?"":r.substring(0,o))+r.substring(a+1):o=a}}return r===""?null:r}function LH(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var s=t[i];s!=null&&s!==""&&(r+=" "+i+": "+s+n)}return r}function $7(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function VOe(t,e){if(e){var n="",r,i;if(Array.isArray(e)?(r=e[0],i=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,l=[];r&&l.push(...Object.keys(r).map($7)),i&&l.push(...Object.keys(i).map($7));var u=0,c=-1;const m=t.length;for(var f=0;f<m;f++){var h=t[f];if(a?h==="/"&&t[f-1]==="*"&&(a=!1):s?s===h&&(s=!1):h==="/"&&t[f+1]==="*"?a=!0:h==='"'||h==="'"?s=h:h==="("?o++:h===")"&&o--,!a&&s===!1&&o===0){if(h===":"&&c===-1)c=f;else if(h===";"||f===m-1){if(c!==-1){var d=$7(t.substring(u,c).trim());if(!l.includes(d)){h!==";"&&f++;var p=t.substring(u,f).trim();n+=" "+p+";"}}u=f+1,c=-1}}}}return r&&(n+=LH(r)),i&&(n+=LH(i,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function wr(t,e,n,r,i,s){var o=t.__className;if(en||o!==n||o===void 0){var a=qOe(n,r,s);(!en||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a)),t.__className=n}else if(s&&i!==s)for(var l in s){var u=!!s[l];(i==null||u!==!!i[l])&&t.classList.toggle(l,u)}return s}function U7(t,e={},n,r){for(var i in n){var s=n[i];e[i]!==s&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,s,r))}}function Nt(t,e,n,r){var i=t.__style;if(en||i!==e){var s=VOe(e,r);(!en||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else r&&(Array.isArray(r)?(U7(t,n?.[0],r[0]),U7(t,n?.[1],r[1],"important")):U7(t,n,r));return r}function jb(t,e,n=!1){if(t.multiple){if(e==null)return;if(!L3(e))return rOe();for(var r of t.options)r.selected=e.includes(PH(r));return}for(r of t.options){var i=PH(r);if(mOe(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ik(t){var e=new MutationObserver(()=>{jb(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),U3(()=>{e.disconnect()})}function PH(t){return"__value"in t?t.__value:t.value}const ux=Symbol("class"),cx=Symbol("style"),xre=Symbol("is custom element"),wre=Symbol("is html");function DP(t){if(en){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;ue(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;ue(t,"checked",null),t.checked=i}}};t.__on_r=n,Gd(n),Kne()}}function WOe(t,e){var n=TP(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function HOe(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function ue(t,e,n,r){var i=TP(t);en&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[MTe]=n),n==null?t.removeAttribute(e):typeof n!="string"&&_re(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function GOe(t,e,n,r,i=!1,s=!1){if(en&&i&&t.tagName==="INPUT"){var o=t,a=o.type==="checkbox"?"defaultChecked":"defaultValue";a in n||DP(o)}var l=TP(t),u=l[xre],c=!l[wre];let f=en&&u;f&&sc(!1);var h=e||{},d=t.tagName==="OPTION";for(var p in e)p in n||(n[p]=null);n.class?n.class=_8(n.class):n[ux]&&(n.class=null),n[cx]&&(n.style??=null);var m=_re(t);for(const A in n){let C=n[A];if(d&&A==="value"&&C==null){t.value=t.__value="",h[A]=C;continue}if(A==="class"){var y=t.namespaceURI==="http://www.w3.org/1999/xhtml";wr(t,y,C,r,e?.[ux],n[ux]),h[A]=C,h[ux]=n[ux];continue}if(A==="style"){Nt(t,C,e?.[cx],n[cx]),h[A]=C,h[cx]=n[cx];continue}var b=h[A];if(!(C===b&&!(C===void 0&&t.hasAttribute(A)))){h[A]=C;var v=A[0]+A[1];if(v!=="$$")if(v==="on"){const D={},T="$$"+A;let M=A.slice(2);var w=OOe(M);if(DOe(M)&&(M=M.slice(0,-7),D.capture=!0),!w&&b){if(C!=null)continue;t.removeEventListener(M,h[T],D),h[T]=null}if(C!=null)if(w)t[`__${M}`]=C,ti([M]);else{let I=function(N){h[A].call(this,N)};h[T]=gre(M,t,I,D)}else w&&(t[`__${M}`]=void 0)}else if(A==="style")ue(t,A,C);else if(A==="autofocus")yOe(t,!!C);else if(!u&&(A==="__value"||A==="value"&&C!=null))t.value=t.__value=C;else if(A==="selected"&&d)HOe(t,C);else{var _=A;c||(_=IOe(_));var S=_==="defaultValue"||_==="defaultChecked";if(C==null&&!u&&!S)if(l[A]=null,_==="value"||_==="checked"){let D=t;const T=e===void 0;if(_==="value"){let M=D.defaultValue;D.removeAttribute(_),D.defaultValue=M,D.value=D.__value=T?M:null}else{let M=D.defaultChecked;D.removeAttribute(_),D.defaultChecked=M,D.checked=T?M:!1}}else t.removeAttribute(A);else S||m.includes(_)&&(u||typeof C!="string")?(t[_]=C,_ in l&&(l[_]=Ns)):typeof C!="function"&&ue(t,_,C)}}}return f&&sc(!0),h}function Ul(t,e,n=[],r=[],i=[],s,o=!1,a=!1){Une(i,n,r,l=>{var u=void 0,c={},f=t.nodeName==="SELECT",h=!1;if(Y0(()=>{var p=e(...l.map(k)),m=GOe(t,u,p,s,o,a);h&&f&&"value"in p&&jb(t,p.value);for(let b of Object.getOwnPropertySymbols(c))p[b]||Es(c[b]);for(let b of Object.getOwnPropertySymbols(p)){var y=p[b];b.description===nOe&&(!u||y!==u[b])&&(c[b]&&Es(c[b]),c[b]=xa(()=>zOe(t,()=>y))),m[b]=y}u=m}),f){var d=t;Yv(()=>{jb(d,u.value,!0),ik(d)})}h=!0})}function TP(t){return t.__attributes??={[xre]:t.nodeName.includes("-"),[wre]:t.namespaceURI===tOe}}var BH=new Map;function _re(t){var e=t.getAttribute("is")||t.nodeName,n=BH.get(e);if(n)return n;BH.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Sne(i);for(var o in r)r[o].set&&n.push(o);i=mP(i)}return n}const YOe=()=>performance.now(),ad={tick:t=>requestAnimationFrame(t),now:()=>YOe(),tasks:new Set};function Sre(){const t=ad.now();ad.tasks.forEach(e=>{e.c(t)||(ad.tasks.delete(e),e.f())}),ad.tasks.size!==0&&ad.tick(Sre)}function XOe(t){let e;return ad.tasks.size===0&&ad.tick(Sre),{promise:new Promise(n=>{ad.tasks.add(e={c:t,f:n})}),abort(){ad.tasks.delete(e)}}}function oA(t,e){Gv(()=>{t.dispatchEvent(new CustomEvent(e))})}function KOe(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function $H(t){const e={},n=t.split(";");for(const r of n){const[i,s]=r.split(":");if(!i||s===void 0)break;const o=KOe(i.trim());e[o]=s.trim()}return e}const QOe=t=>t;function UH(t,e,n){var r=K6,i,s,o,a=null;r.a??={element:t,measure(){i=this.element.getBoundingClientRect()},apply(){if(o?.abort(),s=this.element.getBoundingClientRect(),i.left!==s.left||i.right!==s.right||i.top!==s.top||i.bottom!==s.bottom){const l=e()(this.element,{from:i,to:s},n?.());o=sk(this.element,l,void 0,1,()=>{o?.abort(),o=void 0})}},fix(){if(!t.getAnimations().length){var{position:l,width:u,height:c}=getComputedStyle(t);if(l!=="absolute"&&l!=="fixed"){var f=t.style;a={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=u,f.height=c;var h=t.getBoundingClientRect();if(i.left!==h.left||i.top!==h.top){var d=`translate(${i.left-h.left}px, ${i.top-h.top}px)`;f.transform=f.transform?`${f.transform} ${d}`:d}}}},unfix(){if(a){var l=t.style;l.position=a.position,l.width=a.width,l.height=a.height,l.transform=a.transform}}},r.a.element=t}function jx(t,e,n,r){var i=(t&QTe)!==0,s=(t&JTe)!==0,o=i&&s,a=(t&ZTe)!==0,l=o?"both":i?"in":"out",u,c=e.inert,f=e.style.overflow,h,d;function p(){return Gv(()=>u??=n()(e,r?.()??{},{direction:l}))}var m={is_global:a,in(){if(e.inert=c,!i){d?.abort(),d?.reset?.();return}s||h?.abort(),oA(e,"introstart"),h=sk(e,p(),d,1,()=>{oA(e,"introend"),h?.abort(),h=u=void 0,e.style.overflow=f})},out(w){if(!s){w?.(),u=void 0;return}e.inert=!0,oA(e,"outrostart"),d=sk(e,p(),h,0,()=>{oA(e,"outroend"),w?.()})},stop:()=>{h?.abort(),d?.abort()}},y=On;if((y.transitions??=[]).push(m),i&&rR){var b=a;if(!b){for(var v=y.parent;v&&(v.f&Pd)!==0;)for(;(v=v.parent)&&(v.f&ch)===0;);b=!v||(v.f&P3)!==0}b&&Yv(()=>{wo(()=>m.in())})}}function sk(t,e,n,r,i){var s=r===1;if(vy(e)){var o,a=!1;return Gd(()=>{if(!a){var y=e({direction:s?"in":"out"});o=sk(t,y,n,r,i)}}),{abort:()=>{a=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n?.deactivate(),!e?.duration)return i(),{abort:An,deactivate:An,reset:An,t:()=>r};const{delay:l=0,css:u,tick:c,easing:f=QOe}=e;var h=[];if(s&&n===void 0&&(c&&c(0,1),u)){var d=$H(u(0,1));h.push(d,d)}var p=()=>1-r,m=t.animate(h,{duration:l,fill:"forwards"});return m.onfinish=()=>{m.cancel();var y=n?.t()??1-r;n?.abort();var b=r-y,v=e.duration*Math.abs(b),w=[];if(v>0){var _=!1;if(u)for(var S=Math.ceil(v/16.666666666666668),A=0;A<=S;A+=1){var C=y+b*f(A/S),D=$H(u(C,1-C));w.push(D),_||=D.overflow==="hidden"}_&&(t.style.overflow="hidden"),p=()=>{var T=m.currentTime;return y+b*f(T/v)},c&&XOe(()=>{if(m.playState!=="running")return!1;var T=p();return c(T,1-T),!0})}m=t.animate(w,{duration:v,fill:"forwards"}),m.onfinish=()=>{p=()=>r,c?.(r,1-r),i()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=An)},deactivate:()=>{i=An},reset:()=>{r===0&&c?.(1,0)},t:()=>p()}}function JOe(t,e,n=e){var r=new WeakSet;bOe(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=z7(t)?j7(s):s,n(s),Yr!==null&&r.add(Yr),await fre(),s!==(s=e())){var o=t.selectionStart,a=t.selectionEnd,l=t.value.length;if(t.value=s??"",a!==null){var u=t.value.length;o===a&&a===l&&u>l?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=o,t.selectionEnd=Math.min(a,u))}}}),(en&&t.defaultValue!==t.value||wo(e)==null&&t.value)&&(n(z7(t)?j7(t.value):t.value),Yr!==null&&r.add(Yr)),Xv(()=>{var i=e();if(t===document.activeElement){var s=X6??Yr;if(r.has(s))return}z7(t)&&i===j7(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function z7(t){var e=t.type;return e==="number"||e==="range"}function j7(t){return t===""?null:+t}function ZOe(t,e,n){var r=kd(t,e);r&&r.set&&(t[e]=n,U3(()=>{t[e]=null}))}class OP{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var r=this.#e.get(e)||new Set;return r.add(n),this.#e.set(e,r),this.#r().observe(e,this.#n),()=>{var i=this.#e.get(e);i.delete(n),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){OP.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var e7e=new OP({box:"border-box"});function dc(t,e,n){var r=e7e.observe(t,()=>n(t[e]));Yv(()=>(wo(()=>n(t[e])),r))}function zH(t,e){return t===e||t?.[Pf]===e}function za(t={},e,n,r){return Yv(()=>{var i,s;return Xv(()=>{i=s,s=[],wo(()=>{t!==n(...s)&&(e(t,...s),i&&zH(n(...i),t)&&e(null,...i))})}),()=>{Gd(()=>{s&&zH(n(...s),t)&&e(null,...s)})}}),t}function MP(t=!1){const e=Sr,n=e.l.u;if(!n)return;let r=()=>CP(e.s);if(t){let i=0,s={};const o=$3(()=>{let a=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],a=!0);return a&&i++,i});r=()=>k(o)}n.b.length&&Bt(()=>{jH(e,r),ek(n.b)}),Tl(()=>{const i=wo(()=>n.m.map(OTe));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Tl(()=>{jH(e,r),ek(n.a)})}function jH(t,e){if(t.l.s)for(const n of t.l.s)k(n);e()}function qH(t,e){var n=t.$$events?.[e.type],r=L3(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,e)}function IP(t,e,n){if(t==null)return e(void 0),n&&n(void 0),An;const r=wo(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const Z1=[];function Are(t,e){return{subscribe:gm(t,e).subscribe}}function gm(t,e=An){let n=null;const r=new Set;function i(a){if(xP(t,a)&&(t=a,n)){const l=!Z1.length;for(const u of r)u[1](),Z1.push(u,t);if(l){for(let u=0;u<Z1.length;u+=2)Z1[u][0](Z1[u+1]);Z1.length=0}}}function s(a){i(a(t))}function o(a,l=An){const u=[a,l];return r.add(u),r.size===1&&(n=e(i,s)||An),a(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}function RP(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Are(n,(o,a)=>{let l=!1;const u=[];let c=0,f=An;const h=()=>{if(c)return;f();const p=e(r?u[0]:u,o,a);s?o(p):f=typeof p=="function"?p:An},d=i.map((p,m)=>IP(p,y=>{u[m]=y,c&=~(1<<m),l&&h()},()=>{c|=1<<m}));return l=!0,h(),function(){ek(d),f(),l=!1}})}function t7e(t){let e;return IP(t,n=>e=n)(),e}let aA=!1,oR=Symbol();function Ds(t,e,n){const r=n[e]??={store:null,source:eb(void 0),unsubscribe:An};if(r.store!==t&&!(oR in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=An;else{var i=!0;r.unsubscribe=IP(t,s=>{i?r.source.v=s:ae(r.source,s)}),i=!1}return t&&oR in n?t7e(t):k(r.source)}function VH(t,e){return t.set(e),e}function aa(){const t={};function e(){U3(()=>{for(var n in t)t[n].unsubscribe();gP(t,oR,{enumerable:!1,value:!0})})}return[t,e]}function n7e(t){var e=aA;try{return aA=!1,[t(),aA]}finally{aA=e}}const r7e={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Ts(t,e,n){return new Proxy({props:t,exclude:e},r7e)}const i7e={get(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(vy(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,n){let r=t.props.length;for(;r--;){let i=t.props[r];vy(i)&&(i=i());const s=kd(i,e);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(vy(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const i=kd(r,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(t,e){if(e===Pf||e===bP)return!1;for(let n of t.props)if(vy(n)&&(n=n()),n!=null&&e in n)return!0;return!1},ownKeys(t){const e=[];for(let n of t.props)if(vy(n)&&(n=n()),!!n){for(const r in n)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(n))e.includes(r)||e.push(r)}return e}};function aR(...t){return new Proxy({props:t},i7e)}function gt(t,e,n,r){var i=!Wv||(n&GTe)!==0,s=(n&XTe)!==0,o=(n&KTe)!==0,a=r,l=!0,u=()=>(l&&(l=!1,a=o?wo(r):r),a),c;if(s){var f=Pf in t||bP in t;c=kd(t,e)?.set??(f&&e in t?w=>t[e]=w:void 0)}var h,d=!1;s?[h,d]=n7e(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),c&&(i&&$Te(),c(h)));var p;if(i?p=()=>{var w=t[e];return w===void 0?u():(l=!0,w)}:p=()=>{var w=t[e];return w!==void 0&&(a=void 0),w===void 0?a:w},i&&(n&YTe)===0)return p;if(c){var m=t.$$legacy;return(function(w,_){return arguments.length>0?((!i||!_||m||d)&&c(_?p():w),w):p()})}var y=!1,b=((n&HTe)!==0?$3:wP)(()=>(y=!1,p()));s&&k(b);var v=On;return(function(w,_){if(arguments.length>0){const S=_?k(b):i&&s?mu(w):w;return ae(b,S),y=!0,a!==void 0&&(a=S),w}return m1&&y||(v.f&Zp)!==0?b.v:k(b)})}function s7e(t){return new o7e(t)}class o7e{#e;#t;constructor(e){var n=new Map,r=(s,o)=>{var a=eb(o,!1,!1);return n.set(s,a),a};const i=new Proxy({...e.props||{},$$events:{}},{get(s,o){return k(n.get(o)??r(o,Reflect.get(s,o)))},has(s,o){return o===bP?!0:(k(n.get(o)??r(o,Reflect.get(s,o))),Reflect.has(s,o))},set(s,o,a){return ae(n.get(o)??r(o,a),a),Reflect.set(s,o,a)}});this.#t=(e.hydrate?LOe:EP)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&Nne(),this.#e=i.$$events;for(const s of Object.keys(this.#t))s==="$set"||s==="$destroy"||s==="$on"||gP(this,s,{get(){return this.#t[s]},set(o){this.#t[s]=o},enumerable:!0});this.#t.$set=s=>{Object.assign(i,s)},this.#t.$destroy=()=>{POe(this.#t)}}$set(e){this.#t.$set(e)}$on(e,n){this.#e[e]=this.#e[e]||[];const r=(...i)=>n.call(this,...i);return this.#e[e].push(r),()=>{this.#e[e]=this.#e[e].filter(i=>i!==r)}}$destroy(){this.#t.$destroy()}}function Qv(t){Sr===null&&g8(),Wv&&Sr.l!==null?Cre(Sr).m.push(t):Tl(()=>{const e=wo(t);if(typeof e=="function")return e})}function FP(t){Sr===null&&g8(),Qv(()=>()=>wo(t))}function a7e(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function l7e(){const t=Sr;return t===null&&g8(),(e,n,r)=>{const i=t.s.$$events?.[e];if(i){const s=L3(i)?i.slice():[i],o=a7e(e,n,r);for(const a of s)a.call(t.x,o);return!o.defaultPrevented}return!0}}function u7e(t){Sr===null&&g8(),Sr.l===null&&BTe(),Cre(Sr).a.push(t)}function Cre(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const c7e="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(c7e);oOe();function f7e(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,s,o=[],a="",l=t.split("/");for(l[0]||l.shift();i=l.shift();)n=i[0],n==="*"?(o.push("wild"),a+="/(.*)"):n===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+"/?$","i")}}function WH(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const NP=Are(null,function(e){e(WH());const n=()=>{e(WH())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});RP(NP,t=>t.location);RP(NP,t=>t.querystring);const HH=gm(void 0);function h7e(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function d7e(t,e){ot(e,!1);let n=gt(e,"routes",24,()=>({})),r=gt(e,"prefix",8,""),i=gt(e,"restoreScrollState",8,!1);class s{constructor(A,C){if(!C||typeof C!="function"&&(typeof C!="object"||C._sveltesparouter!==!0))throw Error("Invalid component object");if(!A||typeof A=="string"&&(A.length<1||A.charAt(0)!="/"&&A.charAt(0)!="*")||typeof A=="object"&&!(A instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:D,keys:T}=f7e(A);this.path=A,typeof C=="object"&&C._sveltesparouter===!0?(this.component=C.component,this.conditions=C.conditions||[],this.userData=C.userData,this.props=C.props||{}):(this.component=()=>Promise.resolve(C),this.conditions=[],this.props={}),this._pattern=D,this._keys=T}match(A){if(r()){if(typeof r()=="string")if(A.startsWith(r()))A=A.substr(r().length)||"/";else return null;else if(r()instanceof RegExp){const M=A.match(r());if(M&&M[0])A=A.substr(M[0].length)||"/";else return null}}const C=this._pattern.exec(A);if(C===null)return null;if(this._keys===!1)return C;const D={};let T=0;for(;T<this._keys.length;){try{D[this._keys[T]]=decodeURIComponent(C[T+1]||"")||null}catch{D[this._keys[T]]=null}T++}return D}async checkConditions(A){for(let C=0;C<this.conditions.length;C++)if(!await this.conditions[C](A))return!1;return!0}}const o=[];n()instanceof Map?n().forEach((S,A)=>{o.push(new s(A,S))}):Object.keys(n()).forEach(S=>{o.push(new s(S,n()[S]))});let a=eb(null),l=eb(null),u=eb({});const c=l7e();async function f(S,A){await fre(),c(S,A)}let h=null,d=null;i()&&(d=S=>{S.state&&(S.state.__svelte_spa_router_scrollY||S.state.__svelte_spa_router_scrollX)?h=S.state:h=null},window.addEventListener("popstate",d),u7e(()=>{h7e(h)}));let p=null,m=null;const y=NP.subscribe(async S=>{p=S;let A=0;for(;A<o.length;){const C=o[A].match(S.location);if(!C){A++;continue}const D={route:o[A].path,location:S.location,querystring:S.querystring,userData:o[A].userData,params:C&&typeof C=="object"&&Object.keys(C).length?C:null};if(!await o[A].checkConditions(D)){ae(a,null),m=null,f("conditionsFailed",D);return}f("routeLoading",Object.assign({},D));const T=o[A].component;if(m!=T){T.loading?(ae(a,T.loading),m=T,ae(l,T.loadingParams),ae(u,{}),f("routeLoaded",Object.assign({},D,{component:k(a),name:k(a).name,params:k(l)}))):(ae(a,null),m=null);const M=await T();if(S!=p)return;ae(a,M&&M.default||M),m=T}C&&typeof C=="object"&&Object.keys(C).length?ae(l,C):ae(l,null),ae(u,o[A].props),f("routeLoaded",Object.assign({},D,{component:k(a),name:k(a).name,params:k(l)})).then(()=>{HH.set(k(l))});return}ae(a,null),m=null,HH.set(void 0)});FP(()=>{y(),d&&window.removeEventListener("popstate",d)}),wOe(()=>CP(i()),()=>{history.scrollRestoration=i()?"manual":"auto"}),_Oe(),MP();var b=kn(),v=Ye(b);{var w=S=>{var A=kn(),C=Ye(A);m0(C,()=>k(a),(D,T)=>{T(D,aR({get params(){return k(l)}},()=>k(u),{$$events:{routeEvent(M){qH.call(this,e,M)}}}))}),te(S,A)},_=S=>{var A=kn(),C=Ye(A);m0(C,()=>k(a),(D,T)=>{T(D,aR(()=>k(u),{$$events:{routeEvent(M){qH.call(this,e,M)}}}))}),te(S,A)};Le(v,S=>{k(l)?S(w):S(_,!1)})}te(t,b),at()}const GH={};function kre(t,e=!1){let n,r,i=GH;function s(u){n=t(u)?.catch(()=>{}).finally(()=>{if(r){const{event:c}=r;r=null,s(c)}else n=null})||null}function o(u){r={event:u}}function a(u){n?o(u):s(u)}function l(u){i!==u&&requestAnimationFrame(()=>{const c=i;i=GH,a(c)}),i=u}return e?l:a}function z3(t){return t instanceof y1}class y1{_filterBy;_requestUpdate;_coordinator;_pending;_enabled;_initialized;_request;constructor(e){this._filterBy=e,this._requestUpdate=kre(()=>this.requestQuery(),!0),this._coordinator=null,this._pending=Promise.resolve(),this._enabled=!0,this._initialized=!1,this._request=null}get coordinator(){return this._coordinator}set coordinator(e){this._coordinator=e}get enabled(){return this._enabled}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,e&&(this._initialized?this._request&&this.requestQuery(this._request===!0?void 0:this._request):this.initialize(),this._request=null))}get pending(){return this._pending}get filterBy(){return this._filterBy}get filterStable(){return!0}async prepare(){}query(e){return null}queryPending(){return this}queryResult(e){return this}queryError(e){return this}requestQuery(e){if(this._enabled){const n=e||this.query(this.filterBy?.predicate(this));return this._coordinator.requestQuery(this,n)}else return this._request=e??!0,null}requestUpdate(){this._enabled?this._requestUpdate():this.requestQuery()}initialize(){this._enabled?this._coordinator&&(this._initialized=!0,this._pending=this.prepare().then(()=>this.requestQuery())):this._initialized=!1}destroy(){this._enabled=!1,this.coordinator?.disconnect(this)}update(){return this}}const Ere=Uint8Array.of(65,82,82,79,87,49),S8={V1:0,V4:3,V5:4},ld={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3,Tensor:4,SparseTensor:5},Ie={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},Dre={HALF:0,SINGLE:1,DOUBLE:2},ok={DAY:0,MILLISECOND:1},Ia={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},rb={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},LP={Sparse:0,Dense:1},p7e=Uint8Array,Tre=Uint16Array,g7e=Uint32Array,Ore=BigUint64Array,Mre=Int8Array,m7e=Int16Array,Tc=Int32Array,dh=BigInt64Array,y7e=Float32Array,A8=Float64Array;function b7e(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function v7e(t,e){const n=Math.log2(t)-3;return(e?[Mre,m7e,Tc,dh]:[p7e,Tre,g7e,Ore])[n]}function PP(t,e){let n=0,r=t.length;if(r<=2147483648)do{const i=n+r>>>1;t[i]<=e?n=i+1:r=i}while(n<r);else do{const i=Math.trunc((n+r)/2);t[i]<=e?n=i+1:r=i}while(n<r);return n}function BP(t,e,n){if(e(t))return t;throw new Error(n(t))}function ph(t,e,n){return e=Array.isArray(e)?e:Object.values(e),BP(t,r=>e.includes(r),n??(()=>`${t} must be one of ${e}`))}function Ire(t,e){for(const[n,r]of Object.entries(t))if(r===e)return n;return"<Unknown>"}const $P=t=>`Unsupported data type: "${Ire(Ie,t)}" (id ${t})`,Rre=(t,e,n=!0,r=null)=>({name:t,type:e,nullable:n,metadata:r});function Fre(t){return Object.hasOwn(t,"name")&&Nre(t.type)}function Nre(t){return typeof t?.typeId=="number"}function y0(t,e="",n=!0){return Fre(t)?t:Rre(e,BP(t,Nre,()=>"Data type expected."),n)}const x7e=(t,e,n=!1,r=-1)=>({typeId:Ie.Dictionary,id:r,dictionary:t,indices:e||Pre(),ordered:n}),Lre=(t=32,e=!0)=>({typeId:Ie.Int,bitWidth:ph(t,[8,16,32,64]),signed:e,values:v7e(t,e)}),Pre=()=>Lre(32),w7e=(t=2)=>({typeId:Ie.Float,precision:ph(t,Dre),values:[Tre,y7e,A8][t]}),_7e=()=>({typeId:Ie.Binary,offsets:Tc}),S7e=()=>({typeId:Ie.Utf8,offsets:Tc}),A7e=(t,e,n=128)=>({typeId:Ie.Decimal,precision:t,scale:e,bitWidth:ph(n,[32,64,128,256]),values:n===32?Tc:Ore}),C7e=t=>({typeId:Ie.Date,unit:ph(t,ok),values:t===ok.DAY?Tc:dh}),k7e=(t=Ia.MILLISECOND)=>{t=ph(t,Ia);const e=t===Ia.SECOND||t===Ia.MILLISECOND?32:64;return{typeId:Ie.Time,unit:t,bitWidth:e,values:e===32?Tc:dh}},E7e=(t=Ia.MILLISECOND,e=null)=>({typeId:Ie.Timestamp,unit:ph(t,Ia),timezone:e,values:dh}),D7e=(t=rb.MONTH_DAY_NANO)=>({typeId:Ie.Interval,unit:ph(t,rb),values:t===rb.MONTH_DAY_NANO?void 0:Tc}),T7e=t=>({typeId:Ie.List,children:[y0(t)],offsets:Tc}),O7e=t=>({typeId:Ie.Struct,children:Array.isArray(t)&&Fre(t[0])?t:Object.entries(t).map(([e,n])=>Rre(e,n))}),M7e=(t,e,n,r)=>(n??=e.map((i,s)=>s),{typeId:Ie.Union,mode:ph(t,LP),typeIds:n,typeMap:n.reduce((i,s,o)=>(i[s]=o,i),{}),children:e.map((i,s)=>y0(i,`_${s}`)),typeIdForValue:r,offsets:Tc}),I7e=t=>({typeId:Ie.FixedSizeBinary,stride:t}),R7e=(t,e)=>({typeId:Ie.FixedSizeList,stride:e,children:[y0(t)]}),F7e=(t,e)=>({typeId:Ie.Map,keysSorted:t,children:[e],offsets:Tc}),N7e=(t=Ia.MILLISECOND)=>({typeId:Ie.Duration,unit:ph(t,Ia),values:dh}),L7e=()=>({typeId:Ie.LargeBinary,offsets:dh}),P7e=()=>({typeId:Ie.LargeUtf8,offsets:dh}),B7e=t=>({typeId:Ie.LargeList,children:[y0(t)],offsets:dh}),$7e=(t,e)=>({typeId:Ie.RunEndEncoded,children:[BP(y0(t,"run_ends"),n=>n.type.typeId===Ie.Int,()=>"Run-ends must have an integer type."),y0(e,"values")]}),U7e=t=>({typeId:Ie.ListView,children:[y0(t,"value")],offsets:Tc}),z7e=t=>({typeId:Ie.LargeListView,children:[y0(t,"value")],offsets:dh}),j7e=new A8(2),q7e=j7e.buffer;new dh(q7e);function b0(t){if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${t}`);return Number(t)}function UP(t,e){return Number(t/e)+Number(t%e)/Number(e)}const Ny=t=>BigInt.asUintN(64,t);function V7e(t,e){return BigInt.asIntN(64,t[e])}function W7e(t,e){const n=e<<1;let r;return BigInt.asIntN(64,t[n+1])<0?(r=Ny(~t[n])|Ny(~t[n+1])<<64n,r=-(r+1n)):r=t[n]|t[n+1]<<64n,r}function H7e(t,e){const n=e<<2;let r;return BigInt.asIntN(64,t[n+3])<0?(r=Ny(~t[n])|Ny(~t[n+1])<<64n|Ny(~t[n+2])<<128n|Ny(~t[n+3])<<192n,r=-(r+1n)):r=t[n]|t[n+1]<<64n|t[n+2]<<128n|t[n+3]<<192n,r}const G7e=new TextDecoder("utf-8");new TextEncoder;function C8(t){return G7e.decode(t)}const i_=4;function Bre(t,e){return(t[e>>3]&1<<e%8)!==0}function Yd(t,e){const n=e+gi(t,e),r=n-gi(t,n),i=su(t,r);return(s,o,a=null)=>{if(s<i){const l=su(t,r+s);if(l)return o(t,n+l)}return a}}function Hg(t,e){return e}function s_(t,e){return!!Y7e(t,e)}function Y7e(t,e){return zP(t,e)<<24>>24}function zP(t,e){return t[e]}function su(t,e){return X7e(t,e)<<16>>16}function X7e(t,e){return t[e]|t[e+1]<<8}function gi(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24}function YH(t,e){return gi(t,e)>>>0}function uu(t,e){return b0(BigInt.asIntN(64,BigInt(YH(t,e))+(BigInt(YH(t,e+i_))<<32n)))}function ak(t,e){let n=e+gi(t,e);const r=gi(t,n);return n+=i_,C8(t.subarray(n,n+r))}function n0(t,e,n,r){if(!e)return[];const i=e+gi(t,e);return Array.from({length:gi(t,i)},(s,o)=>r(t,i+i_+o*n))}const q7=Symbol("rowIndex");function lR(t,e){class n{constructor(s){this[q7]=s}toJSON(){return Ure(t,e,this[q7])}}const r=n.prototype;for(let i=0;i<t.length;++i){if(Object.hasOwn(r,t[i]))continue;const s=e[i];Object.defineProperty(r,t[i],{get(){return s.at(this[q7])},enumerable:!0})}return i=>new n(i)}function $re(t,e){return n=>Ure(t,e,n)}function Ure(t,e,n){const r={};for(let i=0;i<t.length;++i)r[t[i]]=e[i].at(n);return r}function K7e(t){return t instanceof qx}class k8{static ArrayType=null;constructor({length:e,nullCount:n,type:r,validity:i,values:s,offsets:o,sizes:a,children:l}){this.length=e,this.nullCount=n,this.type=r,this.validity=i,this.values=s,this.offsets=o,this.sizes=a,this.children=l,(!n||!this.validity)&&(this.at=u=>this.value(u))}get[Symbol.toStringTag](){return"Batch"}at(e){return this.isValid(e)?this.value(e):null}isValid(e){return Bre(this.validity,e)}value(e){return this.values[e]}slice(e,n){const r=n-e,i=Array(r);for(let s=0;s<r;++s)i[s]=this.at(e+s);return i}*[Symbol.iterator](){for(let e=0;e<this.length;++e)yield this.at(e)}}class qx extends k8{constructor(e){super(e);const{length:n,values:r}=this;this.values=r.subarray(0,n)}slice(e,n){return this.nullCount?super.slice(e,n):this.values.subarray(e,n)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}}class E8 extends k8{static ArrayType=A8}class qi extends k8{static ArrayType=Array}class Q7e extends qi{value(e){return null}}class Jv extends E8{value(e){return b0(this.values[e])}}class J7e extends E8{value(e){const n=this.values[e],r=(n&31744)>>10,i=(n&1023)/1024,s=(-1)**((n&32768)>>15);switch(r){case 31:return s*(i?Number.NaN:1/0);case 0:return s*(i?6103515625e-14*i:0)}return s*2**(r-15)*(1+i)}}class Z7e extends qi{value(e){return Bre(this.values,e)}}class e9e extends E8{constructor(e){super(e);const{scale:n}=this.type;this.scale=10**n}value(e){return this.values[e]/this.scale}}class zre extends k8{constructor(e){super(e);const{bitWidth:n,scale:r}=this.type;this.decimal=n===64?V7e:n===128?W7e:H7e,this.scale=10n**BigInt(r)}}class t9e extends zre{static ArrayType=A8;value(e){return UP(this.decimal(this.values,e),this.scale)}}class n9e extends zre{static ArrayType=Array;value(e){return this.decimal(this.values,e)}}class XH extends qi{constructor(e){super(e),this.source=e}value(e){return new Date(this.source.value(e))}}class r9e extends E8{value(e){return 864e5*this.values[e]}}const i9e=Jv;class s9e extends Jv{value(e){return super.value(e)*1e3}}const o9e=Jv;class a9e extends Jv{value(e){return UP(this.values[e],1000n)}}class l9e extends Jv{value(e){return UP(this.values[e],1000000n)}}class u9e extends qi{value(e){return this.values.subarray(e<<1,e+1<<1)}}class c9e extends qi{value(e){const n=this.values,r=e<<4;return Float64Array.of(gi(n,r),gi(n,r+4),uu(n,r+8))}}const jre=({values:t,offsets:e},n)=>t.subarray(e[n],e[n+1]),qre=({values:t,offsets:e},n)=>t.subarray(b0(e[n]),b0(e[n+1]));class f9e extends qi{value(e){return jre(this,e)}}class h9e extends qi{value(e){return qre(this,e)}}class d9e extends qi{value(e){return C8(jre(this,e))}}class p9e extends qi{value(e){return C8(qre(this,e))}}class g9e extends qi{value(e){const n=this.offsets;return this.children[0].slice(n[e],n[e+1])}}class m9e extends qi{value(e){const n=this.offsets;return this.children[0].slice(b0(n[e]),b0(n[e+1]))}}class y9e extends qi{value(e){const n=this.offsets[e],r=n+this.sizes[e];return this.children[0].slice(n,r)}}class b9e extends qi{value(e){const n=this.offsets[e],r=n+this.sizes[e];return this.children[0].slice(b0(n),b0(r))}}class Vre extends qi{constructor(e){super(e),this.stride=this.type.stride}}class v9e extends Vre{value(e){const{stride:n,values:r}=this;return r.subarray(e*n,(e+1)*n)}}class x9e extends Vre{value(e){const{children:n,stride:r}=this;return n[0].slice(e*r,(e+1)*r)}}function Wre({children:t,offsets:e},n){const[r,i]=t[0].children,s=e[n],o=e[n+1],a=[];for(let l=s;l<o;++l)a.push([r.at(l),i.at(l)]);return a}class w9e extends qi{value(e){return Wre(this,e)}}class _9e extends qi{value(e){return new Map(Wre(this,e))}}class Hre extends qi{constructor({typeIds:e,...n}){super(n),this.typeIds=e,this.typeMap=this.type.typeMap}value(e,n=e){const{typeIds:r,children:i,typeMap:s}=this;return i[s[r[e]]].at(n)}}class S9e extends Hre{value(e){return super.value(e,this.offsets[e])}}class Gre extends qi{constructor(e,n=$re){super(e),this.names=this.type.children.map(r=>r.name),this.factory=n(this.names,this.children)}value(e){return this.factory(e)}}class A9e extends Gre{constructor(e){super(e,lR)}}class C9e extends qi{value(e){const[{values:n},r]=this.children;return r.at(PP(n,e))}}let k9e=class extends qi{setDictionary(e){return this.dictionary=e,this.cache=e.cache(),this}value(e){return this.cache[this.key(e)]}key(e){return this.values[e]}};class Yre extends qi{constructor({data:e,...n}){super(n),this.data=e}view(e){const{values:n,data:r}=this,i=e<<4;let s=i+4,o=n;const a=gi(o,i);return a>12&&(s=gi(o,i+12),o=r[gi(o,i+8)]),o.subarray(s,s+a)}}class E9e extends Yre{value(e){return this.view(e)}}class D9e extends Yre{value(e){return C8(this.view(e))}}function KH(t){let e=[];return{add(n){return e.push(n),this},clear:()=>e=[],done:()=>new T9e(e,t)}}class T9e{constructor(e,n=e[0]?.type){this.type=n,this.length=e.reduce((s,o)=>s+o.length,0),this.nullCount=e.reduce((s,o)=>s+o.nullCount,0),this.data=e;const r=e.length,i=new Int32Array(r+1);if(r===1){const[s]=e;i[1]=s.length,this.at=o=>s.at(o)}else for(let s=0,o=0;s<r;++s)i[s+1]=o+=e[s].length;this.offsets=i}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){const e=this.data;return e.length===1?e[0][Symbol.iterator]():O9e(e)}at(e){const{data:n,offsets:r}=this,i=PP(r,e)-1;return n[i]?.at(e-r[i])}get(e){return this.at(e)}toArray(){const{length:e,nullCount:n,data:r}=this,i=!n&&K7e(r[0]),s=r.length;if(i&&s===1)return r[0].values;const o=!s||n>0?Array:r[0].constructor.ArrayType??r[0].values.constructor,a=new o(e);return i?M9e(a,r):I9e(a,r)}cache(){return this._cache??(this._cache=this.toArray())}}function*O9e(t){for(let e=0;e<t.length;++e){const n=t[e][Symbol.iterator]();for(let r=n.next();!r.done;r=n.next())yield r.value}}function M9e(t,e){for(let n=0,r=0;n<e.length;++n){const{values:i}=e[n];t.set(i,r),r+=i.length}return t}function I9e(t,e){let n=-1;for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.length;++s)t[++n]=i.at(s)}return t}let R9e=class Xre{constructor(e,n,r=!1){const i=e.fields.map(o=>o.name);this.schema=e,this.names=i,this.children=n,this.factory=r?lR:$re;const s=[];this.getFactory=o=>s[o]??(s[o]=this.factory(i,n.map(a=>a.data[o])))}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){return this.children[0]?.length??0}getChildAt(e){return this.children[e]}getChild(e){const n=this.names.findIndex(r=>r===e);return n>-1?this.children[n]:void 0}selectAt(e,n=[]){const{children:r,factory:i,schema:s}=this,{fields:o}=s;return new Xre({...s,fields:e.map((a,l)=>F9e(o[a],n[l]))},e.map(a=>r[a]),i===lR)}select(e,n){const r=this.names,i=e.map(s=>r.indexOf(s));return this.selectAt(i,n)}toColumns(){const{children:e,names:n}=this,r={};return n.forEach((i,s)=>r[i]=e[s]?.toArray()??[]),r}toArray(){const{children:e,getFactory:n,numRows:r}=this,i=e[0]?.data??[],s=Array(r);for(let o=0,a=-1;o<i.length;++o){const l=n(o);for(let u=0;u<i[o].length;++u)s[++a]=l(u)}return s}*[Symbol.iterator](){const{children:e,getFactory:n}=this,r=e[0]?.data??[];for(let i=0;i<r.length;++i){const s=n(i);for(let o=0;o<r[i].length;++o)yield s(o)}}at(e){const{children:n,getFactory:r,numRows:i}=this;if(e<0||e>=i)return null;const[{offsets:s}]=n,o=PP(s,e)-1;return r(o)(e-s[o])}get(e){return this.at(e)}};function F9e(t,e){return e!=null&&e!==t.name?{...t,name:e}:t}function N9e(t,e={}){const{typeId:n,bitWidth:r,mode:i,precision:s,unit:o}=t,{useBigInt:a,useDate:l,useDecimalInt:u,useMap:c,useProxy:f}=e;switch(n){case Ie.Null:return Q7e;case Ie.Bool:return Z7e;case Ie.Int:case Ie.Time:case Ie.Duration:return a||r<64?qx:Jv;case Ie.Float:return s?qx:J7e;case Ie.Date:return QH(o===ok.DAY?r9e:i9e,l&&XH);case Ie.Timestamp:return QH(o===Ia.SECOND?s9e:o===Ia.MILLISECOND?o9e:o===Ia.MICROSECOND?a9e:l9e,l&&XH);case Ie.Decimal:return r===32?u?qx:e9e:u?n9e:t9e;case Ie.Interval:return o===rb.DAY_TIME?u9e:o===rb.YEAR_MONTH?qx:c9e;case Ie.FixedSizeBinary:return v9e;case Ie.Utf8:return d9e;case Ie.LargeUtf8:return p9e;case Ie.Binary:return f9e;case Ie.LargeBinary:return h9e;case Ie.BinaryView:return E9e;case Ie.Utf8View:return D9e;case Ie.List:return g9e;case Ie.LargeList:return m9e;case Ie.Map:return c?_9e:w9e;case Ie.ListView:return y9e;case Ie.LargeListView:return b9e;case Ie.FixedSizeList:return x9e;case Ie.Struct:return f?A9e:Gre;case Ie.RunEndEncoded:return C9e;case Ie.Dictionary:return k9e;case Ie.Union:return i?S9e:Hre}throw new Error($P(n))}function QH(t,e){return e?class extends e{constructor(r){super(new t(r))}}:t}function L9e(t,e){return{offset:uu(t,e),metadataLength:gi(t,e+8),bodyLength:uu(t,e+16)}}function JH(t,e){return n0(t,e,24,L9e)}function Kre(t,e,n){const r=Yd(t,e);if(r(10,Hg,0))throw new Error("Record batch compression not implemented");const i=n<S8.V4?8:0;return{length:r(4,uu,0),nodes:n0(t,r(6,Hg),16,(s,o)=>({length:uu(s,o),nullCount:uu(s,o+8)})),regions:n0(t,r(8,Hg),16+i,(s,o)=>({offset:uu(s,o+i),length:uu(s,o+i+8)})),variadic:n0(t,r(12,Hg),8,uu)}}function P9e(t,e,n){const r=Yd(t,e);return{id:r(4,uu,0),data:r(6,(i,s)=>Kre(i,s,n)),isDelta:r(8,s_,!1)}}function Qre(t,e,n,r){ph(n,Ie,$P);const i=Yd(t,e);switch(n){case Ie.Binary:return _7e();case Ie.Utf8:return S7e();case Ie.LargeBinary:return L7e();case Ie.LargeUtf8:return P7e();case Ie.List:return T7e(r[0]);case Ie.ListView:return U7e(r[0]);case Ie.LargeList:return B7e(r[0]);case Ie.LargeListView:return z7e(r[0]);case Ie.Struct:return O7e(r);case Ie.RunEndEncoded:return $7e(r[0],r[1]);case Ie.Int:return Lre(i(4,gi,0),i(6,s_,!1));case Ie.Float:return w7e(i(4,su,Dre.HALF));case Ie.Decimal:return A7e(i(4,gi,0),i(6,gi,0),i(8,gi,128));case Ie.Date:return C7e(i(4,su,ok.MILLISECOND));case Ie.Time:return k7e(i(4,su,Ia.MILLISECOND));case Ie.Timestamp:return E7e(i(4,su,Ia.SECOND),i(6,ak));case Ie.Interval:return D7e(i(4,su,rb.YEAR_MONTH));case Ie.Duration:return N7e(i(4,su,Ia.MILLISECOND));case Ie.FixedSizeBinary:return I7e(i(4,gi,0));case Ie.FixedSizeList:return R7e(r[0],i(4,gi,0));case Ie.Map:return F7e(i(4,s_,!1),r[0]);case Ie.Union:return M7e(i(4,su,LP.Sparse),r,n0(t,i(6,Hg),4,gi))}return{typeId:n}}function jP(t,e){const n=n0(t,e,4,(r,i)=>{const s=Yd(r,i);return[s(4,ak),s(6,ak)]});return n.length?new Map(n):null}function Jre(t,e,n){const r=Yd(t,e);return{version:n,endianness:r(4,su,0),fields:r(6,B9e,[]),metadata:r(8,jP)}}function B9e(t,e){return n0(t,e,4,Zre)}function Zre(t,e){const n=Yd(t,e),r=n(8,zP,Ie.NONE),i=n(10,Hg,0),s=n(12,U9e),o=n(14,(l,u)=>$9e(l,u));let a=Qre(t,i,r,o);return s&&(s.dictionary=a,a=s),{name:n(4,ak),type:a,nullable:n(6,s_,!1),metadata:n(16,jP)}}function $9e(t,e){const n=n0(t,e,4,Zre);return n.length?n:null}function U9e(t,e){if(!e)return null;const n=Yd(t,e);return x7e(null,n(6,z9e,Pre()),n(8,s_,!1),n(4,uu,0))}function z9e(t,e){return Qre(t,e,Ie.Int)}const j9e=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,q9e=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`,V9e=t=>`Unsupported message type: ${t} (${Ire(ld,t)})`;function uR(t,e){let n=gi(t,e)||0;if(e+=i_,n===-1&&(n=gi(t,e)||0,e+=i_),n===0)return null;const r=t.subarray(e,e+=n);if(r.byteLength<n)throw new Error(j9e(n,r.byteLength));const i=Yd(r,0),s=i(4,su,S8.V1),o=i(6,zP,ld.NONE),a=i(8,Hg,0),l=i(10,uu,0);let u;if(a){const c=o===ld.Schema?Jre:o===ld.DictionaryBatch?P9e:o===ld.RecordBatch?Kre:null;if(!c)throw new Error(V9e(o));if(u=c(r,a,s),l>0){const f=t.subarray(e,e+=l);if(f.byteLength<l)throw new Error(q9e(l,f.byteLength));u.body=f}else o!==ld.Schema&&(u.body=new Uint8Array(0))}return{version:s,type:o,index:e,content:u}}function W9e(t){const e=b7e(t)?new Uint8Array(t):t;return e instanceof Uint8Array&&H9e(e)?Y9e(e):G9e(e)}function H9e(t){if(!t||t.length<4)return!1;for(let e=0;e<6;++e)if(Ere[e]!==t[e])return!1;return!0}function G9e(t){const e=[t].flat();let n;const r=[],i=[];for(const s of e){if(!(s instanceof Uint8Array))throw new Error("IPC data batch was not a Uint8Array.");let o=0;for(;;){const a=uR(s,o);if(a===null)break;if(o=a.index,!!a.content)switch(a.type){case ld.Schema:n||(n=a.content);break;case ld.RecordBatch:r.push(a.content);break;case ld.DictionaryBatch:i.push(a.content);break}}}return{schema:n,dictionaries:i,records:r,metadata:null}}function Y9e(t){const e=t.byteLength-(Ere.length+4),n=gi(t,e),r=Yd(t,e-n),i=r(4,su,S8.V1),s=r(8,JH,[]),o=r(10,JH,[]);return{schema:r(6,(a,l)=>Jre(a,l,i)),dictionaries:s.map(({offset:a})=>uR(t,a).content),records:o.map(({offset:a})=>uR(t,a).content),metadata:r(12,jP)}}function X9e(t,e){return K9e(W9e(t),e)}function K9e(t,e={}){const{schema:n={fields:[]},dictionaries:r,records:i}=t,{version:s,fields:o}=n,a=new Map,l=J9e(e,s,a),u=new Map;Q9e(n,h=>{const d=h.type;d.typeId===Ie.Dictionary&&u.set(d.id,d.dictionary)});const c=new Map;for(const h of r){const{id:d,data:p,isDelta:m,body:y}=h,b=u.get(d),v=cR(b,l({...p,body:y}));if(c.has(d)){const w=c.get(d);m||w.clear(),w.add(v)}else{if(m)throw new Error("Delta update can not be first dictionary batch.");c.set(d,KH(b).add(v))}}c.forEach((h,d)=>a.set(d,h.done()));const f=o.map(h=>KH(h.type));for(const h of i){const d=l(h);o.forEach((p,m)=>f[m].add(cR(p.type,d)))}return new R9e(n,f.map(h=>h.done()),e.useProxy)}function Q9e(t,e){t.fields.forEach(function n(r){e(r),r.type.dictionary?.children?.forEach(n),r.type.children?.forEach(n)})}function J9e(t,e,n){const r={version:e,options:t,dictionary:i=>n.get(i)};return i=>{const{length:s,nodes:o,regions:a,variadic:l,body:u}=i;let c=-1,f=-1,h=-1;return{...r,length:s,node:()=>o[++c],buffer:d=>{const{length:p,offset:m}=a[++f];return d?new d(u.buffer,u.byteOffset+m,p/d.BYTES_PER_ELEMENT):u.subarray(m,m+p)},variadic:()=>l[++h],visit(d){return d.map(p=>cR(p.type,this))}}}}function cR(t,e){const{typeId:n}=t,{options:r,node:i,buffer:s,variadic:o,version:a}=e,l=N9e(t,r),u={...i(),type:t};if(n===Ie.Null)return new l({...u,nullCount:u.length});switch(n){case Ie.Bool:case Ie.Int:case Ie.Time:case Ie.Duration:case Ie.Float:case Ie.Decimal:case Ie.Date:case Ie.Timestamp:case Ie.Interval:case Ie.FixedSizeBinary:return new l({...u,validity:s(),values:s(t.values)});case Ie.Utf8:case Ie.LargeUtf8:case Ie.Binary:case Ie.LargeBinary:return new l({...u,validity:s(),offsets:s(t.offsets),values:s()});case Ie.BinaryView:case Ie.Utf8View:return new l({...u,validity:s(),values:s(),data:Array.from({length:o()},()=>s())});case Ie.List:case Ie.LargeList:case Ie.Map:return new l({...u,validity:s(),offsets:s(t.offsets),children:e.visit(t.children)});case Ie.ListView:case Ie.LargeListView:return new l({...u,validity:s(),offsets:s(t.offsets),sizes:s(t.offsets),children:e.visit(t.children)});case Ie.FixedSizeList:case Ie.Struct:return new l({...u,validity:s(),children:e.visit(t.children)});case Ie.RunEndEncoded:return new l({...u,children:e.visit(t.children)});case Ie.Dictionary:{const{id:c,indices:f}=t;return new l({...u,validity:s(),values:s(f.values)}).setDictionary(e.dictionary(c))}case Ie.Union:return a<S8.V5&&s(),new l({...u,typeIds:s(Mre),offsets:t.mode===LP.Sparse?null:s(t.offsets),children:e.visit(t.children)});default:throw new Error($P(n))}}new Uint16Array(new Uint8Array([1,0]).buffer)[0];function lk(t,e={useDate:!0}){return X9e(t,e)}function Z9e(t){return new eie(t)}class eie{_uri;_queue;_connected;_request;_ws;_events;constructor({uri:e="ws://localhost:3000/",ipc:n=void 0}={}){this._uri=e,this._queue=[],this._connected=!1,this._request=null,this._ws=null;const r=this;this._events={open(){r._connected=!0,r.next()},close(){for(r._connected=!1,r._request=null,r._ws=null;r._queue.length;)r._queue.shift().reject("Socket closed")},error(i){if(r._request){const{reject:s}=r._request;r._request=null,r.next(),s(i)}else console.error("WebSocket error: ",i)},message(i){const{data:s}=i;if(r._request){const{query:o,resolve:a,reject:l}=r._request;if(r._request=null,r.next(),typeof s=="string"){const u=JSON.parse(s);u.error?l(u.error):a(u)}else if(o.type==="exec")a();else if(o.type==="arrow")a(lk(s,n));else throw new Error(`Unexpected socket data: ${s}`)}else console.log("WebSocket message: ",s)}}}get connected(){return this._connected}init(){this._ws=new WebSocket(this._uri),this._ws.binaryType="arraybuffer";for(const e in this._events)this._ws.addEventListener(e,this._events[e])}enqueue(e,n,r){this._ws==null&&this.init(),this._queue.push({query:e,resolve:n,reject:r}),this._connected&&!this._request&&this.next()}next(){this._queue.length&&(this._request=this._queue.shift(),this._ws.send(JSON.stringify(this._request.query)))}query(e){return new Promise((n,r)=>this.enqueue(e,n,r))}}function Nl(t){return t instanceof Oc}let tie;function eMe(t){tie=t}class Oc{type;constructor(e){this.type=e}clone(){const e=new this.constructor(this.type);for(const n in this)n!=="type"&&(e[n]=this[n]);return e}toString(e=tie){if(!e)throw new Error("No visitor provided and no default visitor set.");return e.toString(this)}}class fi extends Oc{}function nie(t){return t.split(".")}function Ag(t){return`"${t.replaceAll('"','""')}"`}function V7(t){return t&&tMe(t)?t.slice(1,-1):t}function tMe(t){return t[0]==='"'&&t[t.length-1]==='"'}const D8="COLUMN_REF",T8="COLUMN_PARAM",rie="TABLE_REF",iie="LITERAL",sie="INTERVAL",oie="LIST",qP="UNNEST",VP="ORDER_BY",WP="CAST",HP="CASE",GP="WHEN",aie="COLLATE",YP="UNARY",XP="UNARY_POSTFIX",KP="BINARY",QP="BETWEEN",JP="NOT_BETWEEN",ZP="LOGICAL_OPERATOR",eB="IN",tB="FUNCTION",j3="AGGREGATE",O8="WINDOW",nB="WINDOW_FUNCTION",rB="WINDOW_DEF",iB="WINDOW_FRAME",sB="WINDOW_EXTENT_EXPR",lie="EXPRESSION",M8="FRAGMENT",oB="VERBATIM",I8="PARAM",aB="WITH_CLAUSE",lB="WINDOW_CLAUSE",uB="SELECT_CLAUSE",cB="FROM_CLAUSE",uie="JOIN_CLAUSE",cie="SAMPLE_CLAUSE",fB="SELECT_QUERY",hB="DESCRIBE_QUERY",dB="SET_OPERATION",fie="SCALAR_SUBQUERY";let pB=class extends fi{value;constructor(e){super(iie),this.value=e}};function ZH(t){switch(typeof t){case"number":return Number.isFinite(t)?`${t}`:"NULL";case"string":return`'${t.replaceAll("'","''")}'`;case"boolean":return t?"TRUE":"FALSE";default:if(t==null)return"NULL";if(t instanceof Date){const e=+t;if(Number.isNaN(e))return"NULL";const n=t.getUTCFullYear(),r=t.getUTCMonth(),i=t.getUTCDate();return e===Date.UTC(n,r,i)?`DATE '${n}-${r+1}-${i}'`:`epoch_ms(${e})`}else return t instanceof RegExp?`'${t.source}'`:`${t}`}}class nMe{toString(e){if(!e)throw new Error("Node is null or undefined");if(typeof e.type!="string")throw new Error(`Node type is not a string: ${typeof e.type}, value: ${e.type}`);if(e.type==="CUSTOM")return e.toString(this);const n=this.getVisitMethod(e.type);if(typeof n=="function")return n.call(this,e);throw new Error(`No visitor method for node type: '${e.type}'`)}getVisitMethod(e){switch(e){case j3:return this.visitAggregate;case QP:return this.visitBetween;case KP:return this.visitBinary;case HP:return this.visitCase;case WP:return this.visitCast;case aie:return this.visitCollate;case T8:return this.visitColumnParam;case D8:return this.visitColumnRef;case hB:return this.visitDescribeQuery;case lie:return this.visitExpression;case M8:return this.visitFragment;case cB:return this.visitFromClause;case tB:return this.visitFunction;case eB:return this.visitIn;case sie:return this.visitInterval;case uie:return this.visitJoinClause;case oie:return this.visitList;case iie:return this.visitLiteral;case ZP:return this.visitLogicalOperator;case JP:return this.visitNotBetween;case VP:return this.visitOrderBy;case I8:return this.visitParam;case cie:return this.visitSampleClause;case fie:return this.visitScalarSubquery;case uB:return this.visitSelectClause;case fB:return this.visitSelectQuery;case dB:return this.visitSetOperation;case rie:return this.visitTableRef;case YP:return this.visitUnary;case XP:return this.visitUnaryPostfix;case qP:return this.visitUnnest;case oB:return this.visitVerbatim;case GP:return this.visitWhen;case O8:return this.visitWindow;case lB:return this.visitWindowClause;case rB:return this.visitWindowDef;case sB:return this.visitWindowExtentExpr;case iB:return this.visitWindowFrame;case nB:return this.visitWindowFunction;case aB:return this.visitWithClause;default:throw new Error(`Unknown node type: '${e}'`)}}mapToString(e){return e.map(n=>this.toString(n))}}function v0(t){return typeof t=="string"}function fR(t){return Array.isArray(t)}function q3(t){if(t){const e=t;return typeof e?.addEventListener=="function"&&e.dynamic!==!1&&"value"in e}return!1}let R8=class extends fi{param;constructor(e){super(I8),this.param=e}get value(){return this.param.value}};const rMe="ROWS",iMe="RANGE",sMe="GROUPS",oMe="PRECEDING",aMe="FOLLOWING",hie="CURRENT ROW",die="UNBOUNDED";let F8=class extends Oc{frameType;extent;exclude;constructor(e,n,r){super(iB),this.frameType=e,this.extent=q3(n)?new R8(n):n,this.exclude=r}};class lMe extends nMe{visitAggregate(e){const{name:n,args:r,isDistinct:i,filter:s,order:o}=e,a=[i?"DISTINCT":"",r?.length?this.mapToString(r).join(", "):n.toLowerCase()==="count"?"*":"",o.length?`ORDER BY ${this.mapToString(o).join(", ")}`:""].filter(u=>u).join(" "),l=s?` FILTER (WHERE ${this.toString(s)})`:"";return`${n}(${a})${l}`}visitBetween(e){return eG(this,e,"BETWEEN")}visitBinary(e){const{left:n,right:r,op:i}=e;return`(${this.toString(n)} ${i} ${this.toString(r)})`}visitCase(e){const{expr:n,_when:r,_else:i}=e;return"CASE "+(n?`${this.toString(n)} `:"")+this.mapToString(r).join(" ")+(i?` ELSE ${this.toString(i)}`:"")+" END"}visitCast(e){const{expr:n,cast:r}=e;return`(${this.toString(n)})::${r}`}visitCollate(e){const{expr:n,collation:r}=e;return`${this.toString(n)} COLLATE ${r}`}visitColumnParam(e){return this.visitColumnRef(e)}visitColumnRef(e){const{column:n,table:r}=e,i=r?`${this.toString(r)}.`:"",s=n==="*"?"*":Ag(n);return`${i}${s}`}visitDescribeQuery(e){const{query:n}=e;return`DESC ${this.toString(n)}`}visitExpression(e){throw new Error(`Unexpected EXPRESSION node type. Node: ${JSON.stringify(e)}`)}visitFragment(e){const{spans:n}=e;return n.map(r=>typeof r=="string"?r:this.toString(r)).join("")}visitFromClause(e){const{expr:n,alias:r,sample:i}=e,s=yB(n)?`(${this.toString(n)})`:`${this.toString(n)}`;return`${r&&!(uk(n)&&n.table?.join(".")===r)?`${s} AS ${Ag(r)}`:`${s}`}${i?` TABLESAMPLE ${this.toString(i)}`:""}`}visitFunction(e){const{name:n,args:r}=e;return`${n}(${this.mapToString(r).join(", ")})`}visitIn(e){const{expr:n,values:r}=e;return`(${this.toString(n)} IN (${this.mapToString(r).join(", ")}))`}visitInterval(e){const{steps:n,name:r}=e;return`INTERVAL ${n} ${r}`}visitJoinClause(e){const{left:n,right:r,joinVariant:i,joinType:s,condition:o,using:a,sample:l}=e,u=i==="REGULAR"?"":`${i} `;let c="",f="";i!=="CROSS"&&(c=s!=="INNER"?`${s} `:"",f=o?` ON ${this.toString(o)}`:a?` USING (${this.mapToString(a).join(", ")})`:"");const h=l?` USING SAMPLE ${this.toString(l)}`:"";return`${this.toString(n)} ${u}${c}JOIN ${this.toString(r)}${f}${h}`}visitList(e){const{values:n}=e;return`[${this.mapToString(n).join(", ")}]`}visitLiteral(e){const{value:n}=e;return ZH(n)}visitLogicalOperator(e){const{clauses:n,op:r}=e,i=this.mapToString(n);return i.length===0?"":i.length===1?`${i[0]}`:`(${i.join(` ${r} `)})`}visitNotBetween(e){return eG(this,e,"NOT BETWEEN")}visitOrderBy(e){const{expr:n,desc:r,nullsFirst:i}=e,s=r?" DESC":r===!1?" ASC":"",o=i?" NULLS FIRST":i===!1?" NULLS LAST":"";return`${this.toString(n)}${s}${o}`}visitParam(e){const{param:n}=e;return ZH(n.value)}visitSampleClause(e){const{size:n,perc:r,method:i,seed:s}=e,o=i?`${i} `:"",a=s!=null?` REPEATABLE (${s})`:"";return`${o}(${n}${r?"%":" ROWS"})${a}`}visitScalarSubquery(e){return`(${this.toString(e.subquery)})`}visitSelectClause(e){const{expr:n,alias:r}=e;return!r||uMe(n,r)?this.toString(n):`${this.toString(n)} AS ${Ag(r)}`}visitSelectQuery(e){const{_with:n,_select:r,_distinct:i,_from:s,_sample:o,_where:a,_groupby:l,_having:u,_window:c,_qualify:f,_orderby:h,_limitPerc:d,_limit:p,_offset:m}=e,y=[];if(n.length&&y.push(`WITH ${this.mapToString(n).join(", ")}`),y.push(`SELECT${i?" DISTINCT":""} ${this.mapToString(r).join(", ")}`),s.length&&y.push(`FROM ${this.mapToString(s).join(", ")}`),o&&y.push(`USING SAMPLE ${this.toString(o)}`),a.length){const b=this.mapToString(a).filter(v=>v).join(" AND ");b&&y.push(`WHERE ${b}`)}if(l.length&&y.push(`GROUP BY ${this.mapToString(l).join(", ")}`),u.length){const b=this.mapToString(u).filter(v=>v).join(" AND ");b&&y.push(`HAVING ${b}`)}if(c.length&&y.push(`WINDOW ${this.mapToString(c).join(", ")}`),f.length){const b=this.mapToString(f).filter(v=>v).join(" AND ");b&&y.push(`QUALIFY ${b}`)}return h.length&&y.push(`ORDER BY ${this.mapToString(h).join(", ")}`),p&&y.push(`LIMIT ${this.toString(p)}${d?"%":""}`),m!=null&&y.push(`OFFSET ${this.toString(m)}`),y.join(" ")}visitSetOperation(e){const{op:n,queries:r,_with:i,_orderby:s,_limitPerc:o,_limit:a,_offset:l}=e,u=[];return i.length&&u.push(`WITH ${this.mapToString(i).join(", ")}`),u.push(r.join(` ${n} `)),s.length&&u.push(`ORDER BY ${this.mapToString(s).join(", ")}`),a&&u.push(`LIMIT ${this.toString(a)}${o?"%":""}`),l&&u.push(`OFFSET ${this.toString(l)}`),u.join(" ")}visitTableRef(e){const{table:n}=e;return n.map(r=>Ag(r)).join(".")}visitUnary(e){const{expr:n,op:r}=e;return`(${r} ${this.toString(n)})`}visitUnaryPostfix(e){const{expr:n,op:r}=e;return`(${this.toString(n)} ${r})`}visitUnnest(e){const{expr:n,recursive:r,maxDepth:i}=e,s=[this.toString(n)];return r&&s.push("recursive := true"),i!=null&&i>0&&s.push(`max_depth := ${i}`),`UNNEST(${s.join(", ")})`}visitVerbatim(e){const{value:n}=e;return n}visitWhen(e){const{when:n,then:r}=e;return`WHEN ${this.toString(n)} THEN ${this.toString(r)}`}visitWindow(e){const{func:n,def:r}=e;return`${this.toString(n)} OVER ${this.toString(r)}`}visitWindowClause(e){const{name:n,def:r}=e;return`${Ag(n)} AS ${this.toString(r)}`}visitWindowDef(e){const{name:n,partition:r,order:i,framedef:s}=e,o=n&&Ag(n),a=[o,r?.length&&`PARTITION BY ${this.mapToString(r).join(", ")}`,i?.length&&`ORDER BY ${this.mapToString(i).join(", ")}`,s&&this.toString(s)].filter(l=>l);return o&&a.length<2?o:`(${a.join(" ")})`}visitWindowExtentExpr(e){const{scope:n,expr:r}=e;return n===hie?n:`${Nl(r)?this.toString(r):r??die} ${n}`}visitWindowFrame(e){const{frameType:n,exclude:r,extent:i}=e,[s,o]=Nl(i)?i.value:i,a=tG(this,s,oMe),l=tG(this,o,aMe);return`${n} BETWEEN ${a} AND ${l}${r?` ${r}`:""}`}visitWindowFunction(e){const{name:n,args:r,ignoreNulls:i,order:s}=e,o=[this.mapToString(r).join(", "),s.length?`ORDER BY ${this.mapToString(s).join(", ")}`:"",i?"IGNORE NULLS":""].filter(a=>a).join(" ");return`${n}(${o})`}visitWithClause(e){const{name:n,query:r,materialized:i}=e,s=i===!0?"MATERIALIZED ":i===!1?"NOT MATERIALIZED ":"";return`${Ag(n)} AS ${s}(${this.toString(r)})`}}function uMe(t,e){return t instanceof L8&&t.table==null&&t.column===e}function eG(t,e,n){const{extent:r,expr:i}=e;if(!r)return"";const[s,o]=t.mapToString(r);return`(${t.toString(i)} ${n} ${s} AND ${o})`}function tG(t,e,n){const r=Nl(e)?t.toString(e):e;return Nl(e)&&e.type===sB?r:r!=null&&typeof r!="number"?`${r} ${n}`:r===0?hie:r&&Number.isFinite(r)?`${Math.abs(r)} ${n}`:`${die} ${n}`}const pie=new lMe;eMe(pie);class cMe extends fi{name;args;constructor(e,n=[]){super(tB),this.name=e,this.args=n}}function Ar(t,...e){return new cMe(t,V3(e).map(Mn))}function Fn(t,...e){return new kw(t,V3(e).map(Mn))}function Mc(t,...e){return new Gg(new hMe(t,V3(e).map(Mn)))}function Aw(t,e){return t.flat().filter(n=>n!=null).map(n=>e(n))}function x0(t){return Aw(t,Mn)}function V3(t){const e=t.length;let n=e;for(;n>0&&t[n-1]===void 0;--n);return n<e?t.slice(0,n):t}class fMe extends Oc{name;def;constructor(e,n){super(lB),this.name=e,this.def=n}}class Gg extends fi{func;def;constructor(e,n=new gB){super(O8),this.func=e,this.def=n}over(e){return new Gg(this.func,this.def.over(e))}partitionby(...e){return new Gg(this.func,this.def.partitionby(...e))}orderby(...e){return new Gg(this.func,this.def.orderby(...e))}frame(e){return new Gg(this.func,this.def.frame(e))}}class hMe extends fi{name;args;ignoreNulls;order;constructor(e,n=[],r=!1,i=[]){super(nB),this.name=e,this.args=n,this.ignoreNulls=r,this.order=x0([i])}}class gB extends Oc{name;partition;order;framedef;constructor(e,n,r,i){super(rB),this.name=e,this.partition=n,this.order=r,this.framedef=i}over(e){return lA(this,{name:e})}partitionby(...e){return lA(this,{partition:x0(e)})}orderby(...e){return lA(this,{order:x0(e)})}frame(e){return lA(this,{framedef:e})}}function lA(t,e){return new gB(e.name??t.name,e.partition??t.partition,e.order??t.order,e.framedef??t.framedef)}function N8(t){return t instanceof L8}class L8 extends fi{table;constructor(e,n){super(e),this.table=n}get column(){return""}}class gie extends L8{name;constructor(e,n){super(D8,n),this.name=e}get column(){return this.name}}function dMe(t){return t instanceof mie}class mie extends L8{param;constructor(e,n){super(T8,n),this.param=e}get column(){return`${this.param.value}`}}function _e(t,e){const n=vie(e);return q3(t)?new mie(new R8(t),n):new gie(t,n)}class yie extends fi{value;hint;constructor(e,n){super(oB),this.value=e,this.hint=n}}function Ze(t){return new pB(t)}function pMe(t,e){return new yie(t,e)}function uk(t){return t instanceof bie}class bie extends fi{table;constructor(e){super(rie),this.table=[e].flat()}get name(){return this.table[this.table.length-1]}}function mB(...t){const e=Aw(t,String);return e?.length?new bie(e):void 0}function Mn(t){return v0(t)?mMe(t):W3(t)}function Cw(t){return v0(t)?pMe(t):W3(t)}function W3(t){return t instanceof fi?t:q3(t)?new R8(t):Ze(t)}function vie(t){return xie(t)}function gMe(t){return xie(t)}function xie(t){return v0(t)?yMe(t):fR(t)?mB(t):t}function mMe(t){const e=nie(t);return _e(e.pop(),mB(e))}function yMe(t){return mB(nie(t))}function bMe(){return new gB}class kw extends fi{name;args;isDistinct;filter;order;constructor(e,n,r=!1,i=null,s=[]){super(j3),this.name=e,this.args=n,this.isDistinct=r,this.filter=i,this.order=x0([s])}distinct(e=!0){return new kw(this.name,this.args,e,this.filter,this.order)}where(e){return v0(e)&&(e=Cw(e)),new kw(this.name,this.args,this.isDistinct,e,this.order)}argOrder(e){return new kw(this.name,this.args,this.isDistinct,this.filter,e)}window(){return new Gg(this)}partitionby(...e){return this.window().partitionby(...e)}orderby(...e){return this.window().orderby(...e)}frame(e){return this.window().frame(e)}}const vMe=["any_value","approx_count_distinct","approx_quantile","arbitrary","arg_max","arg_max_null","arg_min","arg_min_null","array_agg","avg","bit_and","bit_or","bit_xor","bitstring_agg","bool_and","bool_or","corr","count","count_star","covar_pop","covar_samp","entropy","favg","first","fsum","geomean","kurtosis_pop","kurtosis","last","mad","max","max_by","median","min","min_by","mode","product","quantile","quantile_cont","quantile_disc","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_sxx","regr_sxy","regr_syy","regr_slope","reservoir_quantile","skewness","stddev","stddev_pop","stddev_samp","string_agg","sum","variance","var_pop","var_samp"];class wie extends fi{expr;extent;constructor(e,n,r){super(e),this.expr=n,this.extent=r}toSQL(e){const{extent:n,expr:r}=this;return n?`(${r} ${e} ${n[0]} AND ${n[1]})`:""}}class _ie extends wie{constructor(e,n){super(QP,e,n)}}class xMe extends wie{constructor(e,n){super(JP,e,n)}}class wMe extends fi{op;left;right;constructor(e,n,r){super(KP),this.op=e,this.left=n,this.right=r}}class o_ extends fi{expr;_when;_else;constructor(e=void 0,n=[],r=void 0){super(HP),this.expr=e,this._when=n,this._else=r}when(e,n){return new o_(this.expr,this._when.concat(new Sie(Mn(e),Mn(n))),this._else)}else(e){return new o_(this.expr,this._when,Mn(e))}}class Sie extends Oc{when;then;constructor(e,n){super(GP),this.when=e,this.then=n}}class _Me extends fi{expr;cast;constructor(e,n){super(WP),this.expr=e,this.cast=n}}class SMe extends fi{spans;constructor(e){super(M8),this.spans=e}}class Aie extends Oc{}class a_ extends Aie{expr;alias;sample;constructor(e,n,r){super(cB),this.expr=e,this.alias=n,this.sample=r}as(e){return new a_(this.expr,e,this.sample)}}class AMe extends fi{expr;values;constructor(e,n){super(eB),this.expr=e,this.values=n}}class CMe extends fi{name;steps;constructor(e,n=1){super(sie),this.name=e,this.steps=n}}class kMe extends fi{values;constructor(e){super(oie),this.values=e}}class Cie extends fi{op;clauses;constructor(e,n){super(ZP),this.op=e,this.clauses=n}}class EMe extends Cie{constructor(e){super("AND",e)}}class DMe extends Cie{constructor(e){super("OR",e)}}class kie extends fi{expr;desc;nullsFirst;constructor(e,n,r){super(VP),this.expr=e,this.desc=n,this.nullsFirst=r}}class TMe extends Oc{size;perc;method;seed;constructor(e,n=!1,r,i){super(cie),this.size=e,this.perc=n,this.method=r,this.seed=i}}class OMe extends Oc{expr;alias;constructor(e,n){super(uB),this.expr=e,this.alias=n}}class hR extends Oc{name;query;materialized;constructor(e,n,r=null){super(aB),this.name=e,this.query=n,this.materialized=r}}function yB(t){return t instanceof Ue}function P8(t){return t instanceof qb}function MMe(t){return t instanceof B8}class Ue extends fi{static with(...e){return new IMe(...e)}static select(...e){return new qb().select(...e)}static from(...e){return new qb().from(...e)}static union(...e){return new nf("UNION",e.flat())}static unionByName(...e){return new nf("UNION BY NAME",e.flat())}static unionAll(...e){return new nf("UNION ALL",e.flat())}static unionAllByName(...e){return new nf("UNION ALL BY NAME",e.flat())}static intersect(...e){return new nf("INTERSECT",e.flat())}static intersectAll(...e){return new nf("INTERSECT ALL",e.flat())}static except(...e){return new nf("EXCEPT",e.flat())}static exceptAll(...e){return new nf("EXCEPT ALL",e.flat())}static describe(e){return new B8(e)}_with=[];_orderby=[];_limitPerc=!1;_limit;_offset;cteFor=null;constructor(e){super(e)}get subqueries(){return[]}clone(){return this}setCteFor(e){this.cteFor=e}with(...e){const n=[],r=(i,s)=>{const o=s.clone();o.setCteFor(this),n.push(new hR(i,o))};return e.flat().forEach(i=>{if(i instanceof hR)n.push(i);else if(i!=null)for(const s in i)r(s,i[s])}),this._with=this._with.concat(n),this}orderby(...e){return this._orderby=this._orderby.concat(x0(e)),this}limitPercent(e){return this._limitPerc=!0,this._limit=Mn(e),this}limit(e){return this._limitPerc=!1,this._limit=Mn(e),this}offset(e){return this._offset=Mn(e),this}}class qb extends Ue{_select=[];_from=[];_where=[];_sample;_groupby=[];_having=[];_window=[];_qualify=[];_distinct=!1;constructor(){super(fB)}get subqueries(){const e=this.cteFor||this,r=(e instanceof qb?e._with:[]).reduce((s,o)=>(s[o.name]=o.query,s),{}),i=[];return this._from.forEach(s=>{if(s instanceof a_){const{expr:o}=s;if(yB(o))i.push(o);else if(uk(o)){const a=r[o.name];a&&i.push(a)}}}),i}clone(){return Object.assign(new qb,this)}select(...e){const n=new Set,r=[],i=(s,o)=>{const a=V7(o);n.add(a),s&&r.push(new OMe(Mn(s),a))};return e.flat().forEach(s=>{if(s!=null)if(v0(s))i(s,s);else if(N8(s))i(s,s.column);else if(fR(s))i(s[1],s[0]);else if(Nl(s))i(s,`${s}`);else for(const o in s)i(s[o],o)}),this._select=this._select.filter(s=>!n.has(s.alias)).concat(r),this}setSelect(...e){return this._select=[],this.select(...e)}distinct(e=!0){return this._distinct=!!e,this}from(...e){const n=[],r=(i,s)=>{n.push(new a_(gMe(i),V7(s)))};return e.flat().forEach(i=>{if(i!=null)if(i instanceof Aie)n.push(i);else if(v0(i))r(i,i);else if(uk(i))r(i,i.name);else if(Nl(i))r(i);else if(fR(i))r(i[1],i[0]);else for(const s in i)r(i[s],s)}),this._from=this._from.concat(n),this}setFrom(...e){return this._from=[],this.from(...e)}sample(e,n,r){let i;if(typeof e=="number"){const s=e>0&&e<1,o=s?e*100:Math.floor(e);i=new TMe(o,s,n,r)}else i=e;return this._sample=i??void 0,this}where(...e){return this._where=this._where.concat(Aw(e,Cw)),this}setWhere(...e){return this._where=[],this.where(...e)}groupby(...e){return this._groupby=this._groupby.concat(x0(e)),this}setGroupby(...e){return this._groupby=[],this.groupby(...e)}having(...e){return this._having=this._having.concat(Aw(e,Cw)),this}window(...e){const n=[];return e.flat().forEach(r=>{if(r!=null)for(const i in r)n.push(new fMe(V7(i),r[i]))}),this._window=this._window.concat(n),this}qualify(...e){return this._qualify=this._qualify.concat(Aw(e,Cw)),this}}class B8 extends Oc{query;constructor(e){super(hB),this.query=e}clone(){return new B8(this.query.clone())}}class nf extends Ue{op;queries;constructor(e,n){super(dB),this.op=e,this.queries=n}setCteFor(e){super.setCteFor(e);const{queries:n,cteFor:r}=this;r&&n.forEach(i=>i.setCteFor(r))}get subqueries(){return this.queries}clone(){const{op:e,queries:n,...r}=this;return Object.assign(new nf(e,n),r)}}class IMe{_with;constructor(...e){this._with=e}select(...e){return Ue.select(...e).with(...this._with)}from(...e){return Ue.from(...e).with(...this._with)}union(...e){return Ue.union(...e).with(...this._with)}unionByName(...e){return Ue.unionByName(...e).with(...this._with)}unionAll(...e){return Ue.unionAll(...e).with(...this._with)}unionAllByName(...e){return Ue.unionAllByName(...e).with(...this._with)}intersect(...e){return Ue.intersect(...e).with(...this._with)}intersectAll(...e){return Ue.intersectAll(...e).with(...this._with)}except(...e){return Ue.except(...e).with(...this._with)}exceptAll(...e){return Ue.exceptAll(...e).with(...this._with)}}class Eie extends fi{op;expr;constructor(e,n,r){super(e),this.op=n,this.expr=r}}class RMe extends Eie{constructor(e,n){super(YP,e,n)}}class FMe extends Eie{constructor(e,n){super(XP,e,n)}}class NMe extends fi{expr;recursive;maxDepth;constructor(e,n=!1,r=0){super(qP),this.expr=e,this.recursive=n,this.maxDepth=r}}function ck(t,e){return Fn("arg_max",t,e)}function fk(t,e){return Fn("arg_min",t,e)}function LMe(t){return Fn("array_agg",t)}function $8(t){return Fn("avg",t)}function PMe(t,e){return Fn("corr",t,e)}function ur(t){return Fn("count",t)}function BMe(t,e){return Fn("covar_samp",t,e)}function $Me(t,e){return Fn("covar_pop",t,e)}function UMe(t){return Fn("entropy",t)}function zMe(t){return Fn("first",t)}function jMe(t){return Fn("geomean",t)}function qMe(t){return Fn("kurtosis",t)}function VMe(t){return Fn("mad",t)}function Eu(t){return Fn("max",t)}function U8(t){return Fn("median",t)}function pc(t){return Fn("min",t)}function WMe(t){return Fn("mode",t)}function HMe(t){return Fn("last",t)}function GMe(t){return Fn("product",t)}function dR(t,e){return Fn("quantile",t,e)}function Die(t,e){return Fn("regr_avgx",t,e)}function YMe(t,e){return Fn("regr_avgy",t,e)}function Tie(t,e){return Fn("regr_count",t,e)}function XMe(t,e){return Fn("regr_intercept",t,e)}function KMe(t,e){return Fn("regr_sxx",t,e)}function QMe(t,e){return Fn("regr_syy",t,e)}function JMe(t,e){return Fn("regr_slope",t,e)}function ZMe(t){return Fn("skewness",t)}function Oie(t){return Fn("stddev",t)}function eIe(t){return Fn("stddev_pop",t)}function tIe(t){return Fn("string_agg",t)}function Qr(t){return Fn("sum",t)}function nIe(t){return Fn("var_samp",t)}function rIe(t){return Fn("var_pop",t)}function wa(t,e,n){return t?new o_(void 0,[new Sie(Mn(t),Mn(e))],Mn(n)):new o_}function yi(t,e){return new _Me(Mn(t),e)}function ls(t){return yi(t,"INTEGER")}function iIe(t){return yi(t,"FLOAT")}function zo(t){return yi(t,"DOUBLE")}function sIe(t,e,n=null){return new hR(t,e,n)}function Ic(t,e){return new CMe(t,e)}function oIe(t){return Ic("YEARS",t)}function aIe(t){return Ic("MONTHS",t)}function lIe(t){return Ic("DAYS",t)}function uIe(t){return Ic("HOURS",t)}function cIe(t){return Ic("MINUTES",t)}function fIe(t){return Ic("SECONDS",t)}function hIe(t){return Ic("MILLISECONDS",t)}function dIe(t){return Ic("MICROSECONDS",t)}function pIe(t){return Ar("epoch_ms",t)}function gIe(t,e,n=1){return Ar("time_bucket",Ic(e,n),t)}function mIe(t){return Ar("make_date",2012,Ar("month",t),1)}function yIe(t){const e=Mn(t);return Ar("make_date",2012,Ar("month",e),Ar("day",e))}function bIe(t){return Ar("make_date",2012,1,Ar("day",t))}function vIe(t){return new kMe(V3(t).map(W3))}function hk(t){return Array.isArray(t)?vIe(t):Mn(t)}function xIe(t,e){return Ar("list_has_all",hk(t),hk(e))}function wIe(t,e){return Ar("list_has_any",hk(t),hk(e))}function r0(t){return Ar("isfinite",t)}function _Ie(...t){return Ar("greatest",...t)}function bB(t){return Ar("exp",t)}function Mie(t){return Ar("log",t)}function ib(t){return Ar("ln",t)}function $d(t){return Ar("sign",t)}function No(t){return Ar("abs",t)}function l_(t){return Ar("sqrt",t)}function SIe(t){return Ar("ceil",t)}function ao(t){return Ar("floor",t)}function u_(t,e){return Ar("round",t,e)}function AIe(t,e){return new RMe(t,Mn(e))}function Iie(t,e){return new FMe(t,Mn(e))}function la(t,e,n){return new wMe(t,Mn(e),Mn(n))}function cs(...t){return new EMe(x0(t))}function lo(...t){return new DMe(x0(t))}function Vb(t){return AIe("NOT",t)}function uc(t){return Iie("IS NULL",t)}function Yf(t){return Iie("IS NOT NULL",t)}function W7(t,e){return la("&",t,e)}function lr(t,e){return la("+",t,e)}function Yt(t,e){return la("-",t,e)}function Xt(t,e){return la("*",t,e)}function Mr(t,e){return la("/",t,e)}function CIe(t,e){return la("%",t,e)}function uo(t,e){return la("**",t,e)}function ml(t,e){return la("=",t,e)}function H3(t,e){return la("<>",t,e)}function Yi(t,e){return la("<",t,e)}function du(t,e){return la(">",t,e)}function Bf(t,e){return la("<=",t,e)}function kIe(t,e){return la(">=",t,e)}function EIe(t,e){return la("IS DISTINCT FROM",t,e)}function vB(t,e){return la("IS NOT DISTINCT FROM",t,e)}function Xo(t,e){return new _ie(Mn(t),e?.map(Mn))}function DIe(t,e){return new xMe(Mn(t),e?.map(Mn))}function w0(t,e){return new AMe(Mn(t),e.map(Mn))}function TIe(t,e){return new kie(Mn(t),!1,e)}function Zv(t,e){return new kie(Mn(t),!0,e)}function Rie(t){return Ar("st_asgeojson",t)}function OIe(t){return Ar("st_x",t)}function MIe(t){return Ar("st_y",t)}function xB(t){return Ar("st_centroid",t)}function IIe(t){return OIe(xB(t))}function RIe(t){return MIe(xB(t))}function mt(t,...e){return new SMe(FIe(t,e))}function FIe(t,e){const n=[t[0]],r=e.length;for(let i=0,s=0;i<r;){const o=e[i];Nl(o)?n[++s]=o:q3(o)?n[++s]=new R8(o):n[s]+=v0(o)?o:`${Ze(o)}`;const a=t[++i];Nl(n[s])?n[++s]=a:n[s]+=a}return n.filter(i=>i).map(i=>v0(i)?new yie(i):i)}function G3(t,e,...n){return Ar(t,e,...V3(n).map(W3))}function NIe(t,e,n){return G3("regexp_matches",t,e,n)}function LIe(t,e){return G3("contains",t,e)}function PIe(t,e){return G3("starts_with",t,e)}function BIe(t,e){return G3("ends_with",t,e)}function $Ie(t){return G3("lower",t)}function UIe(t,e=!1,n=0){return new NMe(Mn(t),e,n)}function Fie(...t){return Ar("coalesce",...t)}function Nie(){return Mc("row_number")}function zIe(){return Mc("rank")}function jIe(){return Mc("dense_rank")}function qIe(){return Mc("percent_rank")}function VIe(){return Mc("cume_dist")}function WIe(t){return Mc("ntile",t)}function HIe(t,e,n){return Mc("lag",t,e,n)}function pR(t,e,n){return Mc("lead",t,e,n)}function GIe(t){return Mc("first_value",t)}function YIe(t){return Mc("last_value",t)}function XIe(t,e){return Mc("nth_value",t,e)}function KIe(t,e){return new F8(rMe,t,e)}function QIe(t,e){return new F8(iMe,t,e)}function JIe(t,e){return new F8(sMe,t,e)}const Lie={[j3]:["args","order","filter"],[QP]:["expr","extent"],[KP]:["left","right"],[HP]:["expr","_when","_else"],[WP]:["expr"],[aie]:["expr"],[T8]:["param","table"],[D8]:["table"],[hB]:["query"],[lie]:["node"],[M8]:["spans"],[cB]:["expr"],[tB]:["args"],[eB]:["expr","values"],[uie]:["left","right","on","using","sample"],[ZP]:["clauses"],[JP]:["expr","extent"],[VP]:["expr"],[I8]:["value"],[fie]:["subquery"],[uB]:["expr"],[fB]:["_with","_select","_from","_where","_sample","_groupby","_having","_window","_qualify","_orderby"],[dB]:["queries","_orderby"],[YP]:["expr"],[XP]:["expr"],[qP]:["expr"],[GP]:["when","then"],[O8]:["func","def"],[lB]:["def"],[rB]:["partition","order","framedef"],[sB]:["expr"],[iB]:["extent"],[nB]:["args"],[aB]:["query"]};function gR(t,e){if(e.has(t))return e.get(t);if(Nl(t)){const n=Lie[t.type],r=n?.length??0;if(r>0){t=t.clone();for(let i=0;i<r;++i){const s=n[i],o=t[s];if(Array.isArray(o)){const a=t[s]=o.slice(),l=o.length;for(let u=0;u<l;++u)a[u]=gR(o[u],e)}else o&&(t[s]=gR(o,e))}}}return t}function zm(t,e){if(!Nl(t))return;const n=e(t);if(n)return n;const r=Lie[t.type],i=r?.length??0;for(let s=0;s<i;++s){const o=t[r[s]];if(Array.isArray(o)){const a=o.length;for(let l=0;l<a;++l)if(o[l]&&Number(zm(o[l],e))<0)return n}else if(o&&Number(zm(o,e))<0)return-1}}const ZIe=new RegExp(`^(${vMe.join("|")})$`),eRe=/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\w+\()/g;function tRe(t){return t.split(eRe).some(e=>e.endsWith("(")&&ZIe.test(e.slice(0,-1)))}function X0(t){let e=0;return zm(t,n=>{switch(n.type){case O8:return-1;case j3:return e|=1,-1;case M8:case oB:{let r=`${n}`.toLowerCase();const i=r.indexOf("(select ");return i>=0&&(r=r.slice(0,i)),r.includes(") over ")?-1:tRe(r)?(e|=2,-1):1}}}),e}function nRe(t){const e=new Set;return zm(t,n=>{n.type===j3&&e.add(n)}),Array.from(e)}function wB(t){const e={};return zm(t,n=>{(n.type===D8||n.type===T8)&&(e[`${n}`]=n)}),Object.values(e)}function rRe(t){const e=new Set;return zm(t,n=>{n.type===I8&&e.add(n.param)}),Array.from(e)}function Y3(t,e,{replace:n=!1,temp:r=!1,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+t+" AS "+e}function iRe(t,{strict:e=!1}={}){return"CREATE SCHEMA "+(e?"":"IF NOT EXISTS ")+t}function Pie(t){return`INSTALL ${t}; LOAD ${t}`}function sRe(t,{columns:e=Object.keys(t?.[0]||{})}={}){let n=[];if(Array.isArray(e)?(n=e,e=n.reduce((i,s)=>(i[s]=s,i),{})):e&&(n=Object.keys(e)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of t){const s=n.map(o=>`${W3(i[o])} AS "${e[o]}"`);r.push(`(SELECT ${s.join(", ")})`)}return r.join(" UNION ALL ")}function z8(t,e,n,r={},i={}){const{select:s=["*"],where:o,view:a,temp:l,replace:u,...c}=r,f=fRe({...i,...c}),h=`${t}('${n}'${f?", "+f:""})`,d=o?` WHERE ${o}`:"",p=`SELECT ${s.join(", ")} FROM ${h}${d}`;return Y3(e,p,{view:a,temp:l,replace:u})}function oRe(t,e,n){return z8("read_csv",t,e,n,{auto_detect:!0,sample_size:-1})}function aRe(t,e,n){return z8("read_json",t,e,n,{auto_detect:!0,format:"auto"})}function lRe(t,e,n){return z8("read_parquet",t,e,n)}function uRe(t,e,n={}){const{options:r,...i}=n;if(r){const s=Array.isArray(r)?r.join(", "):typeof r=="string"?r:Object.entries(r).map(([o,a])=>`${o}=${a}`).join(", ");Object.assign(i,{open_options:s.toUpperCase()})}return z8("st_read",t,e,i)}function cRe(t,e,n={}){const{select:r=["*"],...i}=n,s=sRe(e),o=r.length===1&&r[0]==="*"?s:`SELECT ${r} FROM ${s}`;return Y3(t,o,i)}function fRe(t){return Object.entries(t).map(([e,n])=>`${e}=${mR(n)}`).join(", ")}function mR(t){switch(typeof t){case"boolean":return String(t);case"string":return`'${t}'`;case"undefined":case"object":return t==null?"NULL":Array.isArray(t)?"["+t.map(e=>mR(e)).join(", ")+"]":"{"+Object.entries(t).map(([e,n])=>`'${e}': ${mR(n)}`).join(", ")+"}";default:return`${t}`}}function hRe(t,e,n,r,i=!1){const s=i?Yt(n,zo(t)):Yt(zo(t),e),o=n===e?0:r/(n-e);return o?Xt(s,zo(o)):s}function dRe(t,e,n,r,i,s){return t.select({index:lr(ls(ao(e)),Xt(ls(ao(n)),i)),...r}).groupby("index",s)}function pRe(t,e,n){let{step:r,steps:i=25}=n;const{minstep:s=0,nice:o=!0,base:a}=n;if(o!==!1){const l=e-t,u=a?Math.log(a):Math.LN10;r=r||yR(l,i,s,u);let c=Math.log(r);const f=c>=0?0:~~(-c/u)+1,h=Math.pow(10,-f-1);c=Math.floor(t/r+h)*r,t=t<c?c-r:c,e=Math.ceil(e/r)*r,i=Math.round((e-t)/r)}return{min:t,max:e,steps:i}}function yR(t,e,n=0,r=Math.LN10){let i;const s=Math.ceil(Math.log(e)/r);let o=Math.max(n,Math.pow(10,Math.round(Math.log(t)/r)-s));for(;Math.ceil(t/o)>e;)o*=10;const a=[5,2];for(let l=0,u=a.length;l<u;++l)i=o/a[l],i>=n&&t/i<=e&&(o=i);return o}const Bie="year",nG="month",bR="day",uA="hour",cA="minute",fA="second",gRe="millisecond",mRe="microsecond",Vx=1e3,Wx=Vx*60,Hx=Wx*60,j8=Hx*24,yRe=j8*7,rG=j8*30,$ie=j8*365,fx=[{unit:fA,step:1,dt:Vx},{unit:fA,step:5,dt:Vx*5},{unit:fA,step:15,dt:Vx*15},{unit:fA,step:30,dt:Vx*30},{unit:cA,step:1,dt:Wx},{unit:cA,step:5,dt:Wx*5},{unit:cA,step:15,dt:Wx*15},{unit:cA,step:30,dt:Wx*30},{unit:uA,step:1,dt:Hx},{unit:uA,step:3,dt:Hx*3},{unit:uA,step:6,dt:Hx*6},{unit:uA,step:12,dt:Hx*12},{unit:bR,step:1,dt:j8},{unit:bR,step:7,dt:yRe},{unit:nG,step:1,dt:rG},{unit:nG,step:3,dt:rG*3},{unit:Bie,step:1,dt:$ie}];function bRe(t,e,n){const r=+e-+t;if(r===0)return{unit:bR,step:1};const i=r/n,s=vRe(fx,i,l=>l.dt);let o,a;return s===fx.length?(o=Bie,a=yR(r/$ie,n)):s?{unit:o,step:a}=fx[i/fx[s-1].dt<fx[s].dt/i?s-1:s]:(a=yR(r,n),o=a>=1?gRe:mRe,a=a>=1?a:a*1e3),{unit:o,step:a}}function vRe(t,e,n){const r=(a,l)=>Number(a)-Number(l),i=(a,l)=>r(n(a),l);let s=0,o=t.length;if(s<o){if(r(e,e)!==0)return o;do{const a=s+o>>>1;i(t[a],e)<=0?s=a+1:o=a}while(s<o)}return s}function xRe(t,e,n={}){const{offset:r=0}=n,{unit:i,step:s=1}=n.interval?{unit:n.interval,step:n.step}:bRe(e[0],e[1],n.steps||40),o=gIe(t,i,s);return r?lr(o,Ic(i,r*s)):o}function Ew(t){return t}function iG(){return{apply:Ew,invert:Ew,sqlApply:Mn,sqlInvert:Ew}}function wRe({base:t=null}={}){if(t==null||t===Math.E)return{apply:Math.log,invert:Math.exp,sqlApply:e=>ib(e),sqlInvert:e=>bB(e)};if(t===10)return{apply:Math.log10,invert:e=>Math.pow(10,e),sqlApply:e=>Mie(e),sqlInvert:e=>uo(10,e)};{const e=+t;return{apply:n=>Math.log(n)/Math.log(e),invert:n=>Math.pow(e,n),sqlApply:n=>Mr(ib(n),ib(e)),sqlInvert:n=>uo(e,n)}}}function _Re({constant:t=1}={}){const e=+t;return{apply:n=>Math.sign(n)*Math.log1p(Math.abs(n)),invert:n=>Math.sign(n)*Math.exp(Math.abs(n)-e),sqlApply:n=>(n=Mn(n),Xt($d(n),ib(lr(e,No(n))))),sqlInvert:n=>Xt($d(n),Yt(bB(No(n)),e))}}function SRe(){return{apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*t*t,sqlApply:t=>(t=Mn(t),Xt($d(t),l_(No(t)))),sqlInvert:t=>Xt($d(t),uo(t,2))}}function ARe({exponent:t=1}={}){const e=+t;return{apply:n=>Math.sign(n)*Math.pow(Math.abs(n),e),invert:n=>Math.sign(n)*Math.pow(Math.abs(n),1/e),sqlApply:n=>(n=Mn(n),Xt($d(n),uo(No(n),e))),sqlInvert:n=>Xt($d(n),uo(No(n),Mr(1,e)))}}function sG(){return{apply:t=>Number(t),invert:t=>new Date(t),sqlApply:t=>t instanceof Date?Ze(+t):kRe(t)?Ze(Number(t.value)):pIe(t),sqlInvert:Ew}}const CRe={identity:iG,linear:iG,log:wRe,symlog:_Re,sqrt:SRe,pow:ARe,time:sG,utc:sG};function _B(t){const e=CRe[t.type];if(!e)throw new Error(`Unrecognized scale type: ${t.type}`);return{...t,...e(t)}}function kRe(t){return t instanceof pB&&t.value instanceof Date}function ERe(t,e,n={},r=_B({type:"linear"})){const[i,s]=e,{offset:o=0}=n;if(s===i)return o?lr(o,ao(t)):ao(t);const{apply:a,sqlApply:l,sqlInvert:u}=r,c=pRe(a(i),a(s),n),f=l(t),h=(c.max-c.min)/c.steps||1;let d=c.min===0?f:Yt(f,c.min);return h!==1&&(d=Mr(d,zo(h))),d=o?lr(o,ao(d)):ao(d),h!==1&&(d=Xt(h,d)),c.min!==0&&(d=lr(c.min,d)),u(d)}function DRe(t,e,n=void 0,r=[]){const i=n?(a=>Xt(a,n)):(a=>a),s=ao(e),o=lr(s,1);return Ue.from(Ue.unionAll(t.clone().select({i:ls(s),w:i(Yt(o,e))}),t.clone().select({i:ls(o),w:i(Yt(e,s))}))).select({index:"i",density:Qr("w")},r).groupby("index",r).having(H3("density",0))}function TRe(t,e,n,r,i,s=[]){const o=r?b=>Xt(b,r):Ew,a=(b,v)=>t.clone().select({xp:e,yp:n,i:b,w:v}),l=(b,v)=>lr(b,Xt(v,i)),u=ls(ao(e)),c=ls(ao(n)),f=lr(u,1),h=lr(c,1),d=Yt(e,u),p=Yt(f,e),m=Yt(n,c),y=Yt(h,n);return Ue.from(Ue.unionAll(a(l(u,c),o(Xt(p,y))),a(l(u,h),o(Xt(p,m))),a(l(f,c),o(Xt(d,y))),a(l(f,h),o(Xt(d,m))))).select({index:"i",density:Qr("w")},s).groupby("index",s).having(H3("density",0))}function ORe(t,e,n,r,i,s,o=[],a=!0){t.select({x:ls(ao(e)),y:ls(ao(n))});const l=o.concat(r),u=Ue.from(t).select(l,{x0:"x",y0:"y",dx:Yt(pR("x").over("sw"),"x"),dy:Yt(pR("y").over("sw"),"y")}).window({sw:bMe().partitionby(l).orderby(TIe("x"))}).qualify([lo(Yi("x0",i),Yi(lr("x0","dx"),i)),lo(Yi("y0",s),Yi(lr("y0","dy"),s)),lo(du("x0",0),du(lr("x0","dx"),0)),lo(du("y0",0),du(lr("y0","dy"),0))]),c=Ue.select({x:_Ie(Eu(No("dx")),Eu(No("dy")))}).from("pairs"),f=Ue.select({i:ls(mt`UNNEST(range((${c})))`)}),h=Ue.unionAll(Ue.select(l,{x:lr("x0","i"),y:lr("y0",ls(u_(Mr(Xt("i","dy"),"dx"))))}).from("pairs","indices").where([Bf(No("dy"),No("dx")),Yi("i",No("dx"))]),Ue.select(l,{x:lr("x0",ls(u_(Mr(Xt(Xt($d("dy"),"i"),"dx"),"dy")))),y:lr("y0",Xt($d("dy"),"i"))}).from("pairs","indices").where([du(No("dy"),No("dx")),Yi("i",No("dy"))]),Ue.select(l,{x:"x0",y:"y0"}).from("pairs").where(uc("dx"))),d=Ue.from("raster").select(l,"x","y",a?{w:Mr(1,ur().partitionby(["x"].concat(l)))}:null).where([Bf(0,"x"),Yi("x",i),Bf(0,"y"),Yi("y",s)]);return Ue.with({pairs:u,indices:f,raster:h,points:d}).from("points").select(o,{index:lr("x",Xt("y",ls(i))),density:a?Qr("w"):ur()}).groupby("index",o)}function MRe(t,e,n,r,i=[]){const s=ls(ao(e)),o=yB(t),a=o?"input":t,l=o?Ue.with(sIe(String(a),t,!0)):Ue,u=c=>Ue.from(a).select(c).groupby(s,i);return l.union(u([{[n]:pc(n),[r]:fk(r,n)},...i]),u([{[n]:Eu(n),[r]:ck(r,n)},...i]),u([{[n]:fk(n,r),[r]:pc(r)},...i]),u([{[n]:ck(n,r),[r]:Eu(r)},...i])).orderby(i,n)}function Uie(t){let e=2166136261;for(let n=0,r=t.length;n<r;++n){const i=t.charCodeAt(n),s=i&65280;s&&(e=oG(e^s>>8)),e=oG(e^i&255)}return IRe(e)>>>0}function oG(t){return t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}function IRe(t){return t+=t<<13,t^=t>>>7,t+=t<<3,t^=t>>>17,t+=t<<5,t&4294967295}function RRe(t,e,n){switch(t.name){case"count":case"count_star":return FRe(e,t);case"sum":return jie(e,t);case"avg":return NRe(e,t);case"geomean":return LRe(e,t);case"arg_max":return PRe(e,t);case"arg_min":return BRe(e,t);case"variance":case"var_samp":return hA(e,t,n);case"var_pop":return hA(e,t,n,!1);case"stddev":case"stddev_samp":return l_(hA(e,t,n));case"stddev_pop":return l_(hA(e,t,n,!1));case"covar_samp":return Q6(e,t,n);case"covar_pop":return Q6(e,t,n,!1);case"corr":return aG(e,t,n);case"regr_count":return e2(e,t).expr;case"regr_avgx":return Vie(e,t);case"regr_avgy":return Wie(e,t);case"regr_syy":return xR(e,0,t,n);case"regr_sxx":return xR(e,1,t,n);case"regr_sxy":return Q6(e,t,n,null);case"regr_slope":return Hie(e,t,n);case"regr_intercept":return $Re(e,t,n);case"regr_r2":return uo(aG(e,t,n),2);case"max":case"min":case"bit_and":case"bit_or":case"bit_xor":case"bool_and":case"bool_or":case"product":{const r=zie(t);return e[r]=t,mt`${t.name}("${r}")`}default:return null}}function zie(t){return"pre_"+Uie(`${t}`).toString(16)}function _o(t,e,n){const r=n?.filter;r&&(e=e.filter?e.where(cs(r,e.filter)):e.where(r));const i=zie(e);return t[i]=e,i}function SB(t,e){const n=_o(t,ur(e.args[0]),e);return{expr:Fie(Qr(n),0),name:n}}function FRe(t,e){return Fie(jie(t,e),0)}function jie(t,e){return Qr(_o(t,e))}function NRe(t,e){const n=_o(t,e),{expr:r,name:i}=SB(t,e);return Mr(Qr(Xt(n,i)),r)}function LRe(t,e){const n=e.args[0],r=_o(t,Qr(ib(n)),e),{expr:i}=SB(t,e);return bB(Mr(Qr(r),i))}function PRe(t,e){const n=_o(t,e),r=_o(t,Eu(e.args[1]),e);return ck(n,r)}function BRe(t,e){const n=_o(t,e),r=_o(t,pc(e.args[1]),e);return fk(n,r)}function hA(t,e,n,r=!0){const i=e.args[0],{expr:s}=SB(t,e),o=Yt(i,n(i)),a=_o(t,Qr(uo(o,2)),e),l=_o(t,Qr(o),e),u=r?Yt(s,1):s;return Mr(Yt(Qr(a),Mr(uo(Qr(l),2),s)),u)}function Q6(t,e,n,r=!0){const{expr:i}=e2(t,e),s=qie(t,e,n),o=c_(t,1,e,n),a=c_(t,0,e,n),l=Yt(s,Mr(Xt(o,a),i));return r===null?l:r?Mr(l,Yt(i,1)):Mr(l,i)}function aG(t,e,n){const{expr:r}=e2(t,e),i=qie(t,e,n),s=vR(t,1,e,n),o=vR(t,0,e,n),a=c_(t,1,e,n),l=c_(t,0,e,n),u=Yt(s,Mr(uo(a,2),r)),c=Yt(o,Mr(uo(l,2),r));return Mr(Yt(i,Mr(Xt(a,l),r)),l_(Xt(u,c)))}function e2(t,e){const[n,r]=e.args,i=_o(t,Tie(n,r),e);return{expr:Qr(i),name:i}}function c_(t,e,n,r){const i=n.args,s=i[e],o=i[1-e],a=Qr(Yt(s,r(s))).where(Yf(o));return Qr(_o(t,a,n))}function vR(t,e,n,r){const i=n.args,s=i[e],o=i[1-e],a=Qr(uo(Yt(s,r(s)),2)).where(Yf(o));return Qr(_o(t,a,n))}function qie(t,e,n){const[r,i]=e.args,s=Qr(Xt(Yt(i,n(i)),Yt(r,n(r))));return Qr(_o(t,s,e))}function Vie(t,e){const[n,r]=e.args,{expr:i,name:s}=e2(t,e),o=_o(t,Die(n,r),e);return Mr(Qr(Xt(o,s)),i)}function Wie(t,e){const[n,r]=e.args,{expr:i,name:s}=e2(t,e),o=_o(t,YMe(n,r),e);return Mr(Qr(Xt(o,s)),i)}function xR(t,e,n,r){const{expr:i}=e2(t,n),s=c_(t,e,n,r),o=vR(t,e,n,r);return Yt(o,Mr(uo(s,2),i))}function Hie(t,e,n){const r=Q6(t,e,n,null),i=xR(t,1,e,n);return Mr(r,i)}function $Re(t,e,n){const r=Vie(t,e),i=Wie(t,e),s=Hie(t,e,n);return Yt(i,Xt(s,r))}function URe(t){if(!t.filterStable)return null;const e=t.query();if(!P8(e))return null;const n=dk(e,l=>{const u=l._from[0],c=u instanceof a_&&u.expr;return uk(c)?c.name:c});if(typeof n!="string")return null;const r=new Map,i={},s={},o=[],a=l=>{const u=l.column,c=dk(e,f=>f._select.find(h=>h.alias===u)?.expr);return mt`(SELECT avg(${c??l}) FROM "${n}")`};for(const{alias:l,expr:u}of e._select){if(X0(u)>1)return null;const c=nRe(u);if(c.length===0)o.push(l),i[l]=u;else{for(const f of c){if(f.isDistinct)return null;const h=RRe(f,i,a);if(!h)return null;r.set(f,h)}s[l]=gR(u,r)}}return r.size?{group:o,preagg:i,output:s}:null}function dk(t,e){const n=t.subqueries;if(P8(t)&&n.length===0)return e(t);const r=dk(n[0],e);for(let i=1;i<n.length;++i){const s=dk(n[i],e);if(s!==void 0&&s!==r)return NaN}return r}const zRe={skip:!0,result:null};class jRe{entries;active;mc;_schema;_enabled;constructor(e,{schema:n="mosaic",enabled:r=!0}={}){this.entries=new Map,this.active=null,this.mc=e,this._schema=n,this._enabled=r}set enabled(e){this._enabled!==e&&(e||this.clear(),this._enabled=e)}get enabled(){return this._enabled}set schema(e){this._schema!==e&&(this.clear(),this._schema=e)}get schema(){return this._schema}dropSchema(){return this.clear(),this.mc.exec(`DROP SCHEMA IF EXISTS "${this.schema}" CASCADE`)}clear(){this.entries.clear(),this.active=null}request(e,n,r){if(!this.enabled||r==null)return null;const{entries:i,mc:s,schema:o}=this,{source:a}=r;if(!a||this.active&&(this.active.source!==a&&this.clear(),this.active?.source===null))return null;let{active:l}=this;if(!l&&(r.predicate==null||(this.active=l=qRe(r),l.source===null)))return null;if(i.has(e))return i.get(e);const u=URe(e);let c;if(!u)c=null;else if(n.skip(e,r))c=zRe;else{const f=n.remove(a).predicate(e);c=HRe(e.query(f),l,u,o),c.result=s.exec([`CREATE SCHEMA IF NOT EXISTS ${o}`,Y3(c.table,c.create,{temp:!1})]),c.result.catch(h=>s.logger().error(h))}return i.set(e,c),c}}function qRe(t){const{source:e,meta:n}=t,r=t.predicate,i=wB(r).map(a=>a.column);let s,o;if(!n||!i)return{source:null,columns:o,predicate:s};switch(n.type){case"point":s=a=>a,o=Object.fromEntries(i.map(a=>[`${a}`,Mn(a)]));break;case"interval":{const{scales:a,bin:l,pixelSize:u=1}=n;if(!a)break;const c=a.map(f=>WRe(f,u,l));c.some(f=>!f)||(c.length===1?(s=f=>f?Xo("active0",f.extent?.map(c[0])):[],o={active0:c[0](r.expr)}):(s=f=>f?cs(f.clauses.map((h,d)=>Xo(`active${d}`,h.extent?.map(c[d])))):[],o=Object.fromEntries(r.clauses.map((f,h)=>[`active${h}`,c[h](f.expr)]))))}}return{source:o?e:null,columns:o,predicate:s}}const VRe={ceil:SIe,round:u_};function WRe(t,e,n){const{type:r,domain:i,range:s,apply:o,sqlApply:a}=_B(t);if(!o)return;const l=VRe[`${n}`.toLowerCase()]||ao,u=i.map(m=>Number(m)),c=o(Math.min(...u)),f=o(Math.max(...u)),h=(r==="identity"?1:Math.abs(s[1]-s[0])/(f-c))/e,d=h===1?m=>m:m=>Xt(zo(h),m),p=c===0?m=>m:m=>Yt(m,zo(c));return m=>ls(l(d(p(a(m)))))}function HRe(t,e,n,r){const{group:i,output:s,preagg:o}=n,{columns:a}=e,l=t.setSelect({...o,...a}).groupby(Object.keys(a)),[u]=l.subqueries;if(u){const y=Object.values(a).flatMap(b=>wB(b).map(v=>v.column));GRe(u,y)}const c=l._having,f=l._orderby;l._having=[],l._orderby=[];const h=l.toString(),d=(Uie(h)>>>0).toString(16),p=`${r}.preagg_${d}`,m=Ue.select(i,s).from(p).groupby(i).having(c).orderby(f);return new XRe({table:p,create:h,active:e,select:m})}function GRe(t,e){const n=new Set,r=i=>{if(!n.has(i)){if(n.add(i),P8(i)&&i._from.length&&(i.select(e),YRe(i))){const s=new Set(i._groupby.flatMap(o=>o instanceof gie?[o.name]:[]));i.groupby(e.filter(o=>!s.has(o)))}i.subqueries.forEach(r)}};r(t)}function YRe(t){return t._groupby.length>0||t._select.some(e=>X0(e))}class XRe{table;create;result;active;select;skip;constructor({table:e,create:n,active:r,select:i}){this.table=e,this.create=n,this.result=null,this.active=r,this.select=i,this.skip=!1}query(e){return this.select.clone().where(this.active.predicate(e))}}function wR(){return{debug(){},info(){},log(){},warn(){},error(){},group(){},groupCollapsed(){},groupEnd(){}}}const Yg=Object.freeze({pending:Symbol("pending"),ready:Symbol("ready"),error:Symbol("error"),done:Symbol("done")});class AB extends Promise{_resolve;_reject;_state;_value;constructor(){let e,n;super((r,i)=>{e=r,n=i}),this._resolve=e,this._reject=n,this._state=Yg.pending,this._value=void 0}fulfill(e){if(this._value!==void 0){if(e!==void 0)throw Error("Promise is ready and fulfill has a provided value");this._resolve(this._value)}else{if(e===void 0)throw Error("Promise is neither ready nor has provided value");this._resolve(e)}return this._state=Yg.done,this}ready(e){return this._state=Yg.ready,this._value=e,this}reject(e){return this._state=Yg.error,this._reject(e),this}get state(){return this._state}}AB.prototype.constructor=Promise;function KRe(t){return typeof requestAnimationFrame<"u"?requestAnimationFrame(t):typeof setImmediate<"u"?setImmediate(t):setTimeout(t)}function QRe(t,e){let n=[],r=0;function i(){const s=JRe(n,e);n=[],r=0;for(const o of s)eFe(o,t),rFe(o,e)}return{add(s,o){s.request.type==="arrow"?(r||=KRe(()=>i()),n.push({entry:s,priority:o,index:n.length})):t(s,o)}}}function JRe(t,e){const n=[],r=new Map;for(const i of t){const{entry:{request:s}}=i,o=ZRe(s.query,e);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function ZRe(t,e){const n=`${t}`;if(P8(t)&&!e.get(n)){if(t._where.length||t._qualify.length||t._having.length||t._orderby.length||t._distinct)return n;const r=t.clone().setSelect("*"),i=t._groupby;if(i.length){const s={};t._select.forEach(({alias:o,expr:a})=>s[o]=a),r.setGroupby(i.map(o=>N8(o)&&s[o.column]||o))}else t._select.some(s=>X0(s.expr))&&r.setGroupby("ALL");return`${r}`}else return n}function eFe(t,e){if(tFe(t))e({request:{type:"arrow",cache:!1,query:t.query=nFe(t)},result:t.result=new AB});else for(const{entry:n,priority:r}of t)e(n,r)}function tFe(t){if(t.length>1){const e=`${t[0].entry.request.query}`;for(let n=1;n<t.length;++n)if(e!==`${t[n].entry.request.query}`)return!0}return!1}function nFe(t){const e=t.maps=[],n=new Map;for(const s of t){const o=s.entry.request.query,a=[];e.push(a);for(const{alias:l,expr:u}of o._select){const c=`${u}`;n.has(c)||n.set(c,[`col${n.size}`,u]);const[f]=n.get(c);a.push([f,l])}}const r=t[0].entry.request.query.clone(),i=r._groupby;if(i.length){const s={};t.maps[0].forEach(([o,a])=>s[a]=o),r.setGroupby(i.map(o=>N8(o)&&s[o.column]||o))}return r.setSelect(Array.from(n.values()))}async function rFe(t,e){const{maps:n,query:r,result:i}=t;if(!n)return;let s;try{s=await i}catch(a){for(const{entry:l}of t)l.result.reject(a);return}const o=MMe(r);t.forEach(({entry:a},l)=>{const{request:u,result:c}=a,f=n[l],h=o&&f?sFe(s,f):f?iFe(s,f):s;u.cache&&e.set(String(u.query),h),c.fulfill(h)})}function iFe(t,e){return t.select(e.map(n=>n[0]),e.map(n=>n[1]))}function sFe(t,e){const n=new Map(e),r=[];for(const i of t)n.has(i.column_name)&&r.push({...i,column_name:n.get(i.column_name)});return r}const oFe=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout;function aFe(){return{get:()=>{},set:(t,e)=>e,clear:()=>{}}}function lFe({max:t=1e3,ttl:e=10800*1e3}={}){let n=new Map;function r(){const i=performance.now()-e;let s=null,o=1/0;for(const[a,l]of n){const{last:u}=l;u<o&&(s=a,o=u),i>u&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>t&&oFe(r),s},clear(){n=new Map}}}class uFe{queue;constructor(e){this.queue=Array.from({length:e},()=>({head:null,tail:null}))}isEmpty(){return this.queue.every(e=>!e.head)}insert(e,n){const r=this.queue[n];if(!r)throw new Error(`Invalid queue priority rank: ${n}`);const i={item:e,next:null};r.head===null?r.head=r.tail=i:r.tail=r.tail.next=i}remove(e){for(const n of this.queue){let{head:r,tail:i}=n;for(let s=null,o=r;o;s=o,o=o.next)e(o.item)&&(o===r?r=o.next:s.next=o.next,o===i&&(i=s||r));n.head=r,n.tail=i}}next(){for(const e of this.queue){const{head:n}=e;if(n!==null)return e.head=n.next,e.tail===n&&(e.tail=null),n.item}}}const Ly=Object.freeze({High:0,Normal:1,Low:2});class cFe{queue;db;clientCache;_logger;_logQueries;_consolidate;pendingResults;maxConcurrentRequests;pendingExec;constructor(e=32){this.queue=new uFe(3),this.db=null,this.clientCache=null,this._logger=wR(),this._logQueries=!1,this._consolidate=null,this.pendingResults=[],this.maxConcurrentRequests=e,this.pendingExec=!1}next(){if(this.queue.isEmpty()||this.pendingResults.length>this.maxConcurrentRequests||this.pendingExec)return;const e=this.queue.next();if(!e)return;const{request:n,result:r}=e;this.pendingResults.push(r),n.type==="exec"&&(this.pendingExec=!0),this.submit(n,r).finally(()=>{for(;this.pendingResults.length&&this.pendingResults[0].state!==Yg.pending;){const i=this.pendingResults.shift();i.state===Yg.ready?i.fulfill():i.state===Yg.done&&this._logger.warn("Found resolved query in pending results.")}n.type==="exec"&&(this.pendingExec=!1),this.next()})}enqueue(e,n=Ly.Normal){this.queue.insert(e,n),this.next()}async submit(e,n){try{const{query:r,type:i,cache:s=!1,options:o}=e,a=r?`${r}`:null;if(s){const f=this.clientCache.get(a);if(f){const h=await f;this._logger.debug("Cache"),n.ready(h);return}}const l=performance.now();this._logQueries&&this._logger.debug("Query",{type:i,sql:a,...o});const u=this.db.query({type:i,sql:a,...o});s&&this.clientCache.set(a,u);const c=await u;s&&this.clientCache.set(a,c),this._logger.debug(`Request: ${(performance.now()-l).toFixed(1)}`),n.ready(i==="exec"?null:c)}catch(r){n.reject(r)}}cache(e){return e!==void 0?this.clientCache=e===!0?lFe():e||aFe():this.clientCache}logger(e){return e?this._logger=e:this._logger}logQueries(e){return e!==void 0?this._logQueries=!!e:this._logQueries}connector(e){return e?this.db=e:this.db}consolidate(e){e&&!this._consolidate?this._consolidate=QRe(this.enqueue.bind(this),this.clientCache):!e&&this._consolidate&&(this._consolidate=null)}request(e,n=Ly.Normal){const r=new AB,i={request:e,result:r};return this._consolidate?this._consolidate.add(i,n):this.enqueue(i,n),r}cancel(e){const n=new Set(e);if(n.size){this.queue.remove(({result:r})=>n.has(r)?(r.reject("Canceled"),!0):!1);for(const r of this.pendingResults)n.has(r)&&r.reject("Canceled")}}clear(){this.queue.remove(({result:e})=>(e.reject("Cleared"),!0));for(const e of this.pendingResults)e.reject("Cleared");this.pendingResults=[]}}let dA;function gh(t){return t?dA=t:dA==null&&(dA=new fFe),dA}class fFe{manager;preaggregator;clients=new Set;filterGroups=new Map;_logger=wR();constructor(e=new eie,n={}){const{logger:r=console,manager:i=new cFe,cache:s=!0,consolidate:o=!0,preagg:a={}}=n;this.manager=i,this.manager.cache(s),this.manager.consolidate(o),this.databaseConnector(e),this.logger(r),this.clear(),this.preaggregator=new jRe(this,a)}clear(e={}){const{clients:n=!0,cache:r=!0}=e;this.manager.clear(),n&&(this.filterGroups?.forEach(i=>i.disconnect()),this.filterGroups=new Map,this.clients?.forEach(i=>this.disconnect(i)),this.clients=new Set),r&&this.manager.cache().clear()}databaseConnector(e){return e?this.manager.connector(e):this.manager.connector()}logger(e){return arguments.length&&(this._logger=e||wR(),this.manager.logger(this._logger)),this._logger}cancel(e){this.manager.cancel(e)}exec(e,n={}){const{priority:r=Ly.Normal}=n;return e=Array.isArray(e)?e.filter(i=>i).join(`;
`):e,this.manager.request({type:"exec",query:e},r)}query(e,n={}){const{type:r="arrow",cache:i=!0,priority:s=Ly.Normal,...o}=n;return this.manager.request({type:r,query:e,cache:i,options:o},s)}prefetch(e,n={}){return this.query(e,{...n,cache:!0,priority:Ly.Low})}updateClient(e,n,r=Ly.Normal){return e.queryPending(),e._pending=this.query(n,{priority:r}).then(i=>e.queryResult(i).update(),i=>{this._logger?.error(i),e.queryError(i)}).catch(i=>this._logger?.error(i))}requestQuery(e,n){return this.preaggregator.clear(),n?this.updateClient(e,n):Promise.resolve(e.update())}connect(e){const{clients:n}=this;if(n?.has(e))throw new Error("Client already connected.");n?.add(e),e.coordinator=this,e.initialize(),hFe(this,e.filterBy,e)}disconnect(e){const{clients:n,filterGroups:r}=this;if(!n?.has(e))return;n.delete(e),e.coordinator=null;const i=r?.get(e.filterBy);i&&i.clients.delete(e)}}function hFe(t,e,n){if(!e)return;let r=t.filterGroups?.get(e);if(!r){const i=o=>dFe(t,e,o),s=()=>pFe(t,e);e.addEventListener("activate",i),e.addEventListener("value",s),r={selection:e,clients:new Set,disconnect(){e.removeEventListener("activate",i),e.removeEventListener("value",s)}},t.filterGroups?.set(e,r)}r.clients.add(n)}function dFe(t,e,n){const{preaggregator:r,filterGroups:i}=t,{clients:s}=i.get(e);for(const o of s)o.enabled&&r.request(o,e,n)}function pFe(t,e){const{preaggregator:n,filterGroups:r}=t,{clients:i}=r.get(e),{active:s}=e;return Promise.allSettled(Array.from(i,o=>{if(!o.enabled)return o.requestQuery();const a=n.request(o,e,s),l=a?null:e.predicate(o);if(a?.skip||!a&&!l)return;const u=a?.query(s.predicate)??o.query(l);return t.updateClient(o,u)}))}function mh(t){const{coordinator:e=gh(),...n}=t,r=new gFe(n);return e.connect(r),r}class gFe extends y1{_methods;_filterStable;constructor({selection:e=void 0,enabled:n=!0,filterStable:r=!0,...i}){super(e),this.enabled=n,this._methods=i,this._filterStable=r}get filterStable(){return this._filterStable}async prepare(){await this._methods.prepare?.()}query(e){return this._methods.query?.(e)??null}queryResult(e){return this._methods.queryResult?.(e),this}queryPending(){return this._methods.queryPending?.(),this}queryError(e){return this._methods.queryError?.(e),this}}class mFe{_callbacks;constructor(){this._callbacks=new Map}addEventListener(e,n){this._callbacks.has(e)||this._callbacks.set(e,{callbacks:new Set,pending:null,queue:new yFe}),this._callbacks.get(e).callbacks.add(n)}removeEventListener(e,n){const r=this._callbacks.get(e);r&&r.callbacks.delete(n)}willEmit(e,n){return n}emitQueueFilter(e,n){return null}cancel(e){this._callbacks.get(e)?.queue.clear()}async pending(e){await this._callbacks.get(e)?.pending}emit(e,n){const r=this._callbacks.get(e)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(e,n));else{const i=this.willEmit(e,n),{callbacks:s,queue:o}=r;if(s?.size){const a=Array.from(s,l=>l(i));r.pending=Promise.allSettled(a).then(()=>{r.pending=null,o.isEmpty()||this.emit(e,o.dequeue())})}}}}class yFe{next=null;constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(e,n){const r={value:e};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:e}=this;return this.next=e?.next||null,e?.value}}function Gie(t,e){return t===e?!1:t instanceof Date&&e instanceof Date?+t!=+e:Array.isArray(t)&&Array.isArray(e)?bFe(t,e):!0}function bFe(t,e){if(t.length!==e.length)return!0;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!0;return!1}function Su(t){return t instanceof mm}class mm extends mFe{_value;constructor(e){super(),this._value=e}static value(e){return new mm(e)}static array(e){if(e.some(n=>Su(n))){const n=new mm,r=()=>{n.update(e.map(i=>Su(i)?i.value:i))};return r(),e.forEach(i=>Su(i)?i.addEventListener("value",r):0),n}return new mm(e)}get value(){return this._value}update(e,{force:n}={}){return Gie(this._value,e)||n?this.emit("value",e):this.cancel("value"),this}willEmit(e,n){return e==="value"&&(this._value=n),n}}function Ko(t){return t instanceof Wb}function pA(t,e){return new Wb(new Xie(t),e?[e].flat():void 0)}let Wb=class Yie extends mm{_resolved;_resolver;_relay;static intersect({cross:e=!1,empty:n=!1,include:r=[]}={}){return pA({cross:e,empty:n},r)}static union({cross:e=!1,empty:n=!1,include:r=[]}={}){return pA({cross:e,empty:n,union:!0},r)}static single({cross:e=!1,empty:n=!1,include:r=[]}={}){return pA({cross:e,empty:n,single:!0},r)}static crossfilter({empty:e=!1,include:n=[]}={}){return pA({cross:!0,empty:e},n)}constructor(e=new Xie,n=[]){if(super([]),this._resolved=this._value,this._resolver=e,this._relay=new Set,Array.isArray(n))for(const r of n)r._relay.add(this)}clone(){const e=new Yie(this._resolver);return e._value=e._resolved=this._value,e}remove(e){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:e}),n._value.active={source:e},n}get resolver(){return this._resolver}get single(){return this._resolver.single}get clauses(){return super.value}get active(){return this.clauses.active}get value(){return this.active?.value}valueFor(e){return this.clauses.find(n=>n.source===e)?.value}activate(e){this.emit("activate",e),this._relay.forEach(n=>n.activate(e))}update(e){return this._resolved=this._resolver.resolve(this._resolved,e,!0),this._resolved.active=e,this._relay.forEach(n=>n.update(e)),super.update(this._resolved)}reset(e){return e??=this._resolved,e.forEach(n=>n.source?.reset?.()),this._resolved=this._resolved.filter(n=>!e.includes(n)),this._relay.forEach(n=>n.reset(e)),super.update(this._resolved)}willEmit(e,n){return e==="value"?(this._value=n,this.value):n}emitQueueFilter(e,n){return e==="value"?this._resolver.queueFilter(n):null}skip(e,n){return this._resolver.skip(e,n)}predicate(e=void 0,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,e)}};class Xie{union;cross;single;empty;constructor({union:e,cross:n,single:r,empty:i}={}){this.union=!!e,this.cross=!!n,this.single=!!r,this.empty=!!i}resolve(e,n,r=!1){const{source:i,predicate:s}=n,o=e.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>l.source?.reset?.()),s&&a.push(n),a}skip(e,n){return e==null?!1:!!(this.cross&&n?.clients?.has(e))}predicate(e,n,r){const{empty:i,union:s}=this;if(i&&!e.length)return[Ze(!1)];if(this.skip(r,n))return;const o=e.filter(a=>!this.skip(r,a)).map(a=>a.predicate);return s&&o.length>1?lo(o):o}queueFilter(e){if(this.cross){const n=e.active?.source;return r=>r.active?.source!==n}return null}}function vFe(t){return new xFe(t)}class xFe{_uri;_ipc;constructor({uri:e="http://localhost:3000/",ipc:n=void 0}={}){this._uri=e,this._ipc=n}async query(e){const n=fetch(this._uri,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n;if(!r.ok)throw new Error(`Query failed with HTTP status ${r.status}: ${await r.text()}`);return e.type==="exec"?n:e.type==="arrow"?lk(await r.arrayBuffer(),this._ipc):r.json()}}function qt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function lG(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function on(t){return this instanceof on?(this.v=t,this):new on(t)}function Cf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(d){return function(p){return Promise.resolve(p).then(d,f)}}function a(d,p){r[d]&&(i[d]=function(m){return new Promise(function(y,b){s.push([d,m,y,b])>1||l(d,m)})},p&&(i[d]=p(i[d])))}function l(d,p){try{u(r[d](p))}catch(m){h(s[0][3],m)}}function u(d){d.value instanceof on?Promise.resolve(d.value.v).then(c,f):h(s[0][2],d)}function c(d){l("next",d)}function f(d){l("throw",d)}function h(d,p){d(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function J6(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:on(t[i](o)),done:!1}:s?s(o):o}:s}}function ym(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lG=="function"?lG(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}const wFe=new TextDecoder("utf-8"),_R=t=>wFe.decode(t),_Fe=new TextEncoder,CB=t=>_Fe.encode(t),SFe=t=>typeof t=="number",Kie=t=>typeof t=="boolean",os=t=>typeof t=="function",ja=t=>t!=null&&Object(t)===t,jm=t=>ja(t)&&os(t.then),X3=t=>ja(t)&&os(t[Symbol.iterator]),t2=t=>ja(t)&&os(t[Symbol.asyncIterator]),SR=t=>ja(t)&&ja(t.schema),Qie=t=>ja(t)&&"done"in t&&"value"in t,Jie=t=>ja(t)&&os(t.stat)&&SFe(t.fd),Zie=t=>ja(t)&&kB(t.body),q8=t=>"_getDOMStream"in t&&"_getNodeStream"in t,AFe=t=>ja(t)&&os(t.abort)&&os(t.getWriter)&&!q8(t),kB=t=>ja(t)&&os(t.cancel)&&os(t.getReader)&&!q8(t),CFe=t=>ja(t)&&os(t.end)&&os(t.write)&&Kie(t.writable)&&!q8(t),ese=t=>ja(t)&&os(t.read)&&os(t.pipe)&&Kie(t.readable)&&!q8(t),kFe=t=>ja(t)&&os(t.clear)&&os(t.bytes)&&os(t.position)&&os(t.setPosition)&&os(t.capacity)&&os(t.getBufferIdentifier)&&os(t.createLong),EB=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function EFe(t){const e=t[0]?[t[0]]:[];let n,r,i,s;for(let o,a,l=0,u=0,c=t.length;++l<c;){if(o=e[u],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++u]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(e[++u]=a);continue}e[u]=new Uint8Array(o.buffer,n,r-n+s)}return e}function uG(t,e,n=0,r=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return s.set(o,n),t}function Xf(t,e){const n=EFe(t),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,l=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],s=i.subarray(0,Math.min(i.length,u-a)),u<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?uG(o,s,a):o=s;break}uG(o||(o=new Uint8Array(u)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function yr(t,e){let n=Qie(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=CB(n)),n instanceof ArrayBuffer?new t(n):n instanceof EB?new t(n):kFe(n)?yr(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const hx=t=>yr(Int32Array,t),cG=t=>yr(BigInt64Array,t),Dn=t=>yr(Uint8Array,t),AR=t=>(t.next(),t);function*DFe(t,e){const n=function*(i){yield i},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof EB?n(e):X3(e)?e:n(e);return yield*AR((function*(i){let s=null;do s=i.next(yield yr(t,s));while(!s.done)})(r[Symbol.iterator]())),new t}const TFe=t=>DFe(Uint8Array,t);function tse(t,e){return Cf(this,arguments,function*(){if(jm(e))return yield on(yield on(yield*J6(ym(tse(t,yield on(e))))));const r=function(o){return Cf(this,arguments,function*(){yield yield on(yield on(o))})},i=function(o){return Cf(this,arguments,function*(){yield on(yield*J6(ym(AR((function*(a){let l=null;do l=a.next(yield l?.value);while(!l.done)})(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof EB?r(e):X3(e)?i(e):t2(e)?e:r(e);return yield on(yield*J6(ym(AR((function(o){return Cf(this,arguments,function*(){let a=null;do a=yield on(o.next(yield yield on(yr(t,a))));while(!a.done)})})(s[Symbol.asyncIterator]()))))),yield on(new t)})}const OFe=t=>tse(Uint8Array,t);function nse(t,e,n){if(t!==0){n=n.slice(0,e);for(let r=-1,i=n.length;++r<i;)n[r]+=t}return n.subarray(0,e)}function MFe(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}const ou={fromIterable(t){return gA(IFe(t))},fromAsyncIterable(t){return gA(RFe(t))},fromDOMStream(t){return gA(FFe(t))},fromNodeStream(t){return gA(LFe(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},gA=t=>(t.next(),t);function*IFe(t){let e,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Xf(r,o)[0]:([i,r,a]=Xf(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const u=TFe(t)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(o-a)?u.next():u.next(o-a),!e&&i.byteLength>0&&(r.push(i),a+=i.byteLength),e||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!e)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function RFe(t){return Cf(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?Xf(i,a)[0]:([s,i,l]=Xf(i,a),s)}({cmd:o,size:a}=(yield yield on(null))||{cmd:"read",size:0});const c=OFe(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield on(c.next()):yield on(c.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield on(u()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield on(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield on(c.return(new Uint8Array(0))))}return yield on(null)})}function FFe(t){return Cf(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?Xf(i,a)[0]:([s,i,l]=Xf(i,a),s)}({cmd:o,size:a}=(yield yield on(null))||{cmd:"read",size:0});const c=new NFe(t);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield on(c.read()):yield on(c.read(a-l)),!n&&s.byteLength>0&&(i.push(Dn(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield on(u()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield on(c.cancel(f)))}finally{r===!1?yield on(c.cancel()):t.locked&&c.releaseLock()}return yield on(null)})}class NFe{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return qt(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return qt(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Dn(n)),n})}}const H7=(t,e)=>{const n=i=>r([e,i]);let r;return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};function LFe(t){return Cf(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,u=[],c;function f(){return o==="peek"?Xf(u,a)[0]:([c,u,l]=Xf(u,a),c)}if({cmd:o,size:a}=(yield yield on(null))||{cmd:"read",size:0},t.isTTY)return yield yield on(new Uint8Array(0)),yield on(null);try{n[0]=H7(t,"end"),n[1]=H7(t,"error");do{if(n[2]=H7(t,"readable"),[r,s]=yield on(Promise.race(n.map(d=>d[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(c=Dn(t.read(a-l)),c.byteLength<a-l&&(c=Dn(t.read()))):c=Dn(t.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield on(f()));while(a<l)}while(!i)}finally{yield on(h(n,r==="error"?s:null))}return yield on(null);function h(d,p){return c=u=null,new Promise((m,y)=>{for(const[b,v]of d)t.off(b,v);try{const b=t.destroy;b&&b.call(t,p),p=void 0}catch(b){p=b||p}finally{p!=null?y(p):m()}})}})}var $i;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})($i||($i={}));var So;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(So||(So={}));var mo;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(mo||(mo={}));var Du;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Du||(Du={}));var Ot;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Ot||(Ot={}));var Kf;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Kf||(Kf={}));const G7=2,df=4,ud=4,hr=4,Op=new Int32Array(2),fG=new Float32Array(Op.buffer),hG=new Float64Array(Op.buffer),mA=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var CR;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(CR||(CR={}));let Hb=class rse{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new rse(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return Op[0]=this.readInt32(e),fG[0]}readFloat64(e){return Op[mA?0:1]=this.readInt32(e),Op[mA?1:0]=this.readInt32(e+4),hG[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){fG[0]=n,this.writeInt32(e,Op[0])}writeFloat64(e,n){hG[0]=n,this.writeInt32(e,Op[mA?0:1]),this.writeInt32(e+4,Op[mA?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+df+ud)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<ud;n++)e+=String.fromCharCode(this.readInt8(this.position_+df+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);e+=df;const i=this.bytes_.subarray(e,e+r);return n===CR.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+df}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ud)throw new Error("FlatBuffers: file identifier must be length "+ud);for(let n=0;n<ud;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+df+n))return!1;return!0}createScalarList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s)}return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}},ise=class sse{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=Hb.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const i=this.bb.capacity();this.bb=sse.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Hb.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(df,0),this.writeInt32(this.offset()-e+df)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const i=2;this.addInt16(e-this.object_start);const s=(r+i)*G7;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let u=G7;u<s;u+=G7)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const i=r?hr:0;if(n){const s=n;if(this.prep(this.minalign,df+ud+i),s.length!=ud)throw new TypeError("FlatBuffers: file identifier must be length "+ud);for(let o=ud-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,df+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(df,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;return e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var pk;(function(t){t[t.BUFFER=0]="BUFFER"})(pk||(pk={}));var gk;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(gk||(gk={}));class Mp{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Mp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+hr),(n||new Mp).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):gk.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):pk.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,gk.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,pk.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return Mp.startBodyCompression(e),Mp.addCodec(e,n),Mp.addMethod(e,r),Mp.endBodyCompression(e)}}let ose=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}},ase=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}},Qh=class kR{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new kR).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+hr),(n||new kR).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ase).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ose).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Mp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},xy=class ER{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new ER).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+hr),(n||new ER).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Qh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var Gb;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Gb||(Gb={}));var mk;(function(t){t[t.DenseArray=0]="DenseArray"})(mk||(mk={}));class yl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new yl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+hr),(n||new yl).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return yl.startInt(e),yl.addBitWidth(e,n),yl.addIsSigned(e,r),yl.endInt(e)}}class cd{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new cd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+hr),(n||new cd).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new yl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):mk.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,mk.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class us{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new us).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+hr),(n||new us).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return us.startKeyValue(e),us.addKey(e,n),us.addValue(e,r),us.endKeyValue(e)}}let dG=class Gx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Gx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+hr),(n||new Gx).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Gx.startBinary(e),Gx.endBinary(e)}},pG=class Yx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new Yx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+hr),(n||new Yx).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Yx.startBool(e),Yx.endBool(e)}},Z6=class wy{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new wy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+hr),(n||new wy).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Du.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Du.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return wy.startDate(e),wy.addUnit(e,n),wy.endDate(e)}},_y=class Dp{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new Dp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+hr),(n||new Dp).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,i){return Dp.startDecimal(e),Dp.addPrecision(e,n),Dp.addScale(e,r),Dp.addBitWidth(e,i),Dp.endDecimal(e)}},eC=class Sy{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDuration(e,n){return(n||new Sy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,n){return e.setPosition(e.position()+hr),(n||new Sy).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ot.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Ot.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,n){return Sy.startDuration(e),Sy.addUnit(e,n),Sy.endDuration(e)}},tC=class Ay{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new Ay).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+hr),(n||new Ay).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return Ay.startFixedSizeBinary(e),Ay.addByteWidth(e,n),Ay.endFixedSizeBinary(e)}},nC=class Cy{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new Cy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+hr),(n||new Cy).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return Cy.startFixedSizeList(e),Cy.addListSize(e,n),Cy.endFixedSizeList(e)}};class pf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new pf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+hr),(n||new pf).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):mo.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,mo.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return pf.startFloatingPoint(e),pf.addPrecision(e,n),pf.endFloatingPoint(e)}}class gf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new gf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+hr),(n||new gf).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Kf.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Kf.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return gf.startInterval(e),gf.addUnit(e,n),gf.endInterval(e)}}let gG=class Xx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeBinary(e,n){return(n||new Xx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,n){return e.setPosition(e.position()+hr),(n||new Xx).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return Xx.startLargeBinary(e),Xx.endLargeBinary(e)}},mG=class Kx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeUtf8(e,n){return(n||new Kx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,n){return e.setPosition(e.position()+hr),(n||new Kx).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return Kx.startLargeUtf8(e),Kx.endLargeUtf8(e)}},yG=class Qx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Qx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+hr),(n||new Qx).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Qx.startList(e),Qx.endList(e)}},rC=class ky{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new ky).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+hr),(n||new ky).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return ky.startMap(e),ky.addKeysSorted(e,n),ky.endMap(e)}},bG=class Jx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new Jx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+hr),(n||new Jx).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Jx.startNull(e),Jx.endNull(e)}};class Xg{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Xg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+hr),(n||new Xg).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Xg.startStruct_(e),Xg.endStruct_(e)}}class cu{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new cu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+hr),(n||new cu).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ot.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Ot.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return cu.startTime(e),cu.addUnit(e,n),cu.addBitWidth(e,r),cu.endTime(e)}}class fu{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new fu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+hr),(n||new fu).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ot.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Ot.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return fu.startTimestamp(e),fu.addUnit(e,n),fu.addTimezone(e,r),fu.endTimestamp(e)}}class ka{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new ka).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+hr),(n||new ka).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):So.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,So.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return ka.startUnion(e),ka.addMode(e,n),ka.addTypeIds(e,r),ka.endUnion(e)}}let vG=class Zx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new Zx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+hr),(n||new Zx).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Zx.startUtf8(e),Zx.endUtf8(e)}};var zr;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(zr||(zr={}));let eu=class iC{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new iC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+hr),(n||new iC).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):zr.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new cd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new iC).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new us).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,zr.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},rf=class Hh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Hh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+hr),(n||new Hh).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Gb.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new eu).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new us).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,Gb.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,i,s){return Hh.startSchema(e),Hh.addEndianness(e,n),Hh.addFields(e,r),Hh.addCustomMetadata(e,i),Hh.addFeatures(e,s),Hh.endSchema(e)}};var Gn;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Gn||(Gn={}));var ee;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(ee||(ee={}));var Jh;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(Jh||(Jh={}));const PFe=void 0;function f_(t){if(t===null)return"null";if(t===PFe)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>f_(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}function Ir(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function lse(t,e){return Ir(t/e)+Ir(t%e)/Ir(e)}const BFe=Symbol.for("isArrowBigNum");function Rc(t,...e){return e.length===0?Object.setPrototypeOf(yr(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Rc.prototype[BFe]=!0;Rc.prototype.toJSON=function(){return`"${d_(this)}"`};Rc.prototype.valueOf=function(t){return use(this,t)};Rc.prototype.toString=function(){return d_(this)};Rc.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return use(this);case"string":return d_(this);case"default":return zFe(this)}return d_(this)};function sb(...t){return Rc.apply(this,t)}function ob(...t){return Rc.apply(this,t)}function h_(...t){return Rc.apply(this,t)}Object.setPrototypeOf(sb.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ob.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(h_.prototype,Object.create(Uint32Array.prototype));Object.assign(sb.prototype,Rc.prototype,{constructor:sb,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(ob.prototype,Rc.prototype,{constructor:ob,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(h_.prototype,Rc.prototype,{constructor:h_,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const $Fe=BigInt(4294967296)*BigInt(4294967296),UFe=$Fe-BigInt(1);function use(t,e){const{buffer:n,byteOffset:r,byteLength:i,signed:s}=t,o=new BigUint64Array(n,r,i/8),a=s&&o.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),u=0;if(a){for(const c of o)l|=(c^UFe)*(BigInt(1)<<BigInt(64*u++));l*=BigInt(-1),l-=BigInt(1)}else for(const c of o)l|=c*(BigInt(1)<<BigInt(64*u++));if(typeof e=="number"){const c=BigInt(Math.pow(10,e)),f=l/c,h=l%c;return Ir(f)+Ir(h)/Ir(c)}return Ir(l)}function d_(t){if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return Y7(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return Y7(t);e=e.slice();let r=1;for(let s=0;s<e.length;s++){const o=e[s],a=~o+r;e[s]=a,r&=o===0?1:0}return`-${Y7(e)}`}function zFe(t){return t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:d_(t)}function Y7(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e??"0"}class DB{static new(e,n){switch(n){case!0:return new sb(e);case!1:return new ob(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new sb(e)}return e.byteLength===16?new h_(e):new ob(e)}static signed(e){return new sb(e)}static unsigned(e){return new ob(e)}static decimal(e){return new h_(e)}constructor(e,n){return DB.new(e,n)}}var cse,fse,hse,dse,pse,gse,mse,yse,bse,vse,xse,wse,_se,Sse,Ase,Cse,kse,Ese,Dse,Tse,Ose,Mse;class lt{static isNull(e){return e?.typeId===ee.Null}static isInt(e){return e?.typeId===ee.Int}static isFloat(e){return e?.typeId===ee.Float}static isBinary(e){return e?.typeId===ee.Binary}static isLargeBinary(e){return e?.typeId===ee.LargeBinary}static isUtf8(e){return e?.typeId===ee.Utf8}static isLargeUtf8(e){return e?.typeId===ee.LargeUtf8}static isBool(e){return e?.typeId===ee.Bool}static isDecimal(e){return e?.typeId===ee.Decimal}static isDate(e){return e?.typeId===ee.Date}static isTime(e){return e?.typeId===ee.Time}static isTimestamp(e){return e?.typeId===ee.Timestamp}static isInterval(e){return e?.typeId===ee.Interval}static isDuration(e){return e?.typeId===ee.Duration}static isList(e){return e?.typeId===ee.List}static isStruct(e){return e?.typeId===ee.Struct}static isUnion(e){return e?.typeId===ee.Union}static isFixedSizeBinary(e){return e?.typeId===ee.FixedSizeBinary}static isFixedSizeList(e){return e?.typeId===ee.FixedSizeList}static isMap(e){return e?.typeId===ee.Map}static isDictionary(e){return e?.typeId===ee.Dictionary}static isDenseUnion(e){return lt.isUnion(e)&&e.mode===So.Dense}static isSparseUnion(e){return lt.isUnion(e)&&e.mode===So.Sparse}constructor(e){this.typeId=e}}cse=Symbol.toStringTag;lt[cse]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(lt.prototype);let _0=class extends lt{constructor(){super(ee.Null)}toString(){return"Null"}};fse=Symbol.toStringTag;_0[fse]=(t=>t[Symbol.toStringTag]="Null")(_0.prototype);class qm extends lt{constructor(e,n){super(ee.Int),this.isSigned=e,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}hse=Symbol.toStringTag;qm[hse]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(qm.prototype);class p_ extends qm{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(p_.prototype,"ArrayType",{value:Int32Array});class yk extends lt{constructor(e){super(ee.Float),this.precision=e}get ArrayType(){switch(this.precision){case mo.HALF:return Uint16Array;case mo.SINGLE:return Float32Array;case mo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}dse=Symbol.toStringTag;yk[dse]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(yk.prototype);class bk extends lt{constructor(){super(ee.Binary)}toString(){return"Binary"}}pse=Symbol.toStringTag;bk[pse]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(bk.prototype);class vk extends lt{constructor(){super(ee.LargeBinary)}toString(){return"LargeBinary"}}gse=Symbol.toStringTag;vk[gse]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(vk.prototype);class xk extends lt{constructor(){super(ee.Utf8)}toString(){return"Utf8"}}mse=Symbol.toStringTag;xk[mse]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(xk.prototype);class wk extends lt{constructor(){super(ee.LargeUtf8)}toString(){return"LargeUtf8"}}yse=Symbol.toStringTag;wk[yse]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(wk.prototype);let _k=class extends lt{constructor(){super(ee.Bool)}toString(){return"Bool"}};bse=Symbol.toStringTag;_k[bse]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(_k.prototype);class Sk extends lt{constructor(e,n,r=128){super(ee.Decimal),this.scale=e,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}vse=Symbol.toStringTag;Sk[vse]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Sk.prototype);class Ak extends lt{constructor(e){super(ee.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${Du[this.unit]}>`}get ArrayType(){return this.unit===Du.DAY?Int32Array:BigInt64Array}}xse=Symbol.toStringTag;Ak[xse]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(Ak.prototype);class Ck extends lt{constructor(e,n){super(ee.Time),this.unit=e,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Ot[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}wse=Symbol.toStringTag;Ck[wse]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Ck.prototype);class kk extends lt{constructor(e,n){super(ee.Timestamp),this.unit=e,this.timezone=n}toString(){return`Timestamp<${Ot[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}_se=Symbol.toStringTag;kk[_se]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(kk.prototype);class Ek extends lt{constructor(e){super(ee.Interval),this.unit=e}toString(){return`Interval<${Kf[this.unit]}>`}}Sse=Symbol.toStringTag;Ek[Sse]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Ek.prototype);class Dk extends lt{constructor(e){super(ee.Duration),this.unit=e}toString(){return`Duration<${Ot[this.unit]}>`}}Ase=Symbol.toStringTag;Dk[Ase]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(Dk.prototype);class Tk extends lt{constructor(e){super(ee.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Cse=Symbol.toStringTag;Tk[Cse]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Tk.prototype);class Ho extends lt{constructor(e){super(ee.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}kse=Symbol.toStringTag;Ho[kse]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Ho.prototype);class Ok extends lt{constructor(e,n,r){super(ee.Union),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}Ese=Symbol.toStringTag;Ok[Ese]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Ok.prototype);class Mk extends lt{constructor(e){super(ee.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Dse=Symbol.toStringTag;Mk[Dse]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Mk.prototype);class Ik extends lt{constructor(e,n){super(ee.FixedSizeList),this.listSize=e,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Tse=Symbol.toStringTag;Ik[Tse]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Ik.prototype);class Rk extends lt{constructor(e,n=!1){var r,i,s;if(super(ee.Map),this.children=[e],this.keysSorted=n,e&&(e.name="entries",!((r=e?.type)===null||r===void 0)&&r.children)){const o=(i=e?.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=e?.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Ose=Symbol.toStringTag;Rk[Ose]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Rk.prototype);const jFe=(t=>()=>++t)(-1);class Yb extends lt{constructor(e,n,r,i){super(ee.Dictionary),this.indices=n,this.dictionary=e,this.isOrdered=i||!1,this.id=r==null?jFe():Ir(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Mse=Symbol.toStringTag;Yb[Mse]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Yb.prototype);function Zh(t){const e=t;switch(t.typeId){case ee.Decimal:return t.bitWidth/32;case ee.Interval:return 1+e.unit;case ee.FixedSizeList:return e.listSize;case ee.FixedSizeBinary:return e.byteWidth;default:return 1}}class mn{visitMany(e,...n){return e.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return qFe(this,e,n)}getVisitFnByTypeId(e,n=!0){return Ey(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitLargeUtf8(e,...n){return null}visitBinary(e,...n){return null}visitLargeBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitDuration(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function qFe(t,e,n=!0){return typeof e=="number"?Ey(t,e,n):typeof e=="string"&&e in ee?Ey(t,ee[e],n):e&&e instanceof lt?Ey(t,xG(e),n):e?.type&&e.type instanceof lt?Ey(t,xG(e.type),n):Ey(t,ee.NONE,n)}function Ey(t,e,n=!0){let r=null;switch(e){case ee.Null:r=t.visitNull;break;case ee.Bool:r=t.visitBool;break;case ee.Int:r=t.visitInt;break;case ee.Int8:r=t.visitInt8||t.visitInt;break;case ee.Int16:r=t.visitInt16||t.visitInt;break;case ee.Int32:r=t.visitInt32||t.visitInt;break;case ee.Int64:r=t.visitInt64||t.visitInt;break;case ee.Uint8:r=t.visitUint8||t.visitInt;break;case ee.Uint16:r=t.visitUint16||t.visitInt;break;case ee.Uint32:r=t.visitUint32||t.visitInt;break;case ee.Uint64:r=t.visitUint64||t.visitInt;break;case ee.Float:r=t.visitFloat;break;case ee.Float16:r=t.visitFloat16||t.visitFloat;break;case ee.Float32:r=t.visitFloat32||t.visitFloat;break;case ee.Float64:r=t.visitFloat64||t.visitFloat;break;case ee.Utf8:r=t.visitUtf8;break;case ee.LargeUtf8:r=t.visitLargeUtf8;break;case ee.Binary:r=t.visitBinary;break;case ee.LargeBinary:r=t.visitLargeBinary;break;case ee.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case ee.Date:r=t.visitDate;break;case ee.DateDay:r=t.visitDateDay||t.visitDate;break;case ee.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case ee.Timestamp:r=t.visitTimestamp;break;case ee.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case ee.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case ee.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ee.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case ee.Time:r=t.visitTime;break;case ee.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case ee.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case ee.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case ee.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case ee.Decimal:r=t.visitDecimal;break;case ee.List:r=t.visitList;break;case ee.Struct:r=t.visitStruct;break;case ee.Union:r=t.visitUnion;break;case ee.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case ee.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case ee.Dictionary:r=t.visitDictionary;break;case ee.Interval:r=t.visitInterval;break;case ee.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case ee.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case ee.Duration:r=t.visitDuration;break;case ee.DurationSecond:r=t.visitDurationSecond||t.visitDuration;break;case ee.DurationMillisecond:r=t.visitDurationMillisecond||t.visitDuration;break;case ee.DurationMicrosecond:r=t.visitDurationMicrosecond||t.visitDuration;break;case ee.DurationNanosecond:r=t.visitDurationNanosecond||t.visitDuration;break;case ee.FixedSizeList:r=t.visitFixedSizeList;break;case ee.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ee[e]}'`)}function xG(t){switch(t.typeId){case ee.Null:return ee.Null;case ee.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?ee.Int8:ee.Uint8;case 16:return n?ee.Int16:ee.Uint16;case 32:return n?ee.Int32:ee.Uint32;case 64:return n?ee.Int64:ee.Uint64}return ee.Int}case ee.Float:switch(t.precision){case mo.HALF:return ee.Float16;case mo.SINGLE:return ee.Float32;case mo.DOUBLE:return ee.Float64}return ee.Float;case ee.Binary:return ee.Binary;case ee.LargeBinary:return ee.LargeBinary;case ee.Utf8:return ee.Utf8;case ee.LargeUtf8:return ee.LargeUtf8;case ee.Bool:return ee.Bool;case ee.Decimal:return ee.Decimal;case ee.Time:switch(t.unit){case Ot.SECOND:return ee.TimeSecond;case Ot.MILLISECOND:return ee.TimeMillisecond;case Ot.MICROSECOND:return ee.TimeMicrosecond;case Ot.NANOSECOND:return ee.TimeNanosecond}return ee.Time;case ee.Timestamp:switch(t.unit){case Ot.SECOND:return ee.TimestampSecond;case Ot.MILLISECOND:return ee.TimestampMillisecond;case Ot.MICROSECOND:return ee.TimestampMicrosecond;case Ot.NANOSECOND:return ee.TimestampNanosecond}return ee.Timestamp;case ee.Date:switch(t.unit){case Du.DAY:return ee.DateDay;case Du.MILLISECOND:return ee.DateMillisecond}return ee.Date;case ee.Interval:switch(t.unit){case Kf.DAY_TIME:return ee.IntervalDayTime;case Kf.YEAR_MONTH:return ee.IntervalYearMonth}return ee.Interval;case ee.Duration:switch(t.unit){case Ot.SECOND:return ee.DurationSecond;case Ot.MILLISECOND:return ee.DurationMillisecond;case Ot.MICROSECOND:return ee.DurationMicrosecond;case Ot.NANOSECOND:return ee.DurationNanosecond}return ee.Duration;case ee.Map:return ee.Map;case ee.List:return ee.List;case ee.Struct:return ee.Struct;case ee.Union:switch(t.mode){case So.Dense:return ee.DenseUnion;case So.Sparse:return ee.SparseUnion}return ee.Union;case ee.FixedSizeBinary:return ee.FixedSizeBinary;case ee.FixedSizeList:return ee.FixedSizeList;case ee.Dictionary:return ee.Dictionary}throw new Error(`Unrecognized type '${ee[t.typeId]}'`)}mn.prototype.visitInt8=null;mn.prototype.visitInt16=null;mn.prototype.visitInt32=null;mn.prototype.visitInt64=null;mn.prototype.visitUint8=null;mn.prototype.visitUint16=null;mn.prototype.visitUint32=null;mn.prototype.visitUint64=null;mn.prototype.visitFloat16=null;mn.prototype.visitFloat32=null;mn.prototype.visitFloat64=null;mn.prototype.visitDateDay=null;mn.prototype.visitDateMillisecond=null;mn.prototype.visitTimestampSecond=null;mn.prototype.visitTimestampMillisecond=null;mn.prototype.visitTimestampMicrosecond=null;mn.prototype.visitTimestampNanosecond=null;mn.prototype.visitTimeSecond=null;mn.prototype.visitTimeMillisecond=null;mn.prototype.visitTimeMicrosecond=null;mn.prototype.visitTimeNanosecond=null;mn.prototype.visitDenseUnion=null;mn.prototype.visitSparseUnion=null;mn.prototype.visitIntervalDayTime=null;mn.prototype.visitIntervalYearMonth=null;mn.prototype.visitDuration=null;mn.prototype.visitDurationSecond=null;mn.prototype.visitDurationMillisecond=null;mn.prototype.visitDurationMicrosecond=null;mn.prototype.visitDurationNanosecond=null;const Ise=new Float64Array(1),ey=new Uint32Array(Ise.buffer);function Rse(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}function VFe(t){if(t!==t)return 32256;Ise[0]=t;const e=(ey[1]&2147483648)>>16&65535;let n=ey[1]&2146435072,r=0;return n>=1089470464?ey[0]>0?n=31744:(n=(n&2080374784)>>16,r=(ey[1]&1048575)>>10):n<=1056964608?(r=1048576+(ey[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(ey[1]&1048575)+512>>10),e|n|r&65535}class It extends mn{}function $t(t){return(e,n,r)=>{if(e.setValid(n,r!=null))return t(e,n,r)}}const WFe=(t,e,n)=>{t[e]=Math.floor(n/864e5)},Fse=(t,e,n,r)=>{if(n+1<e.length){const i=Ir(e[n]),s=Ir(e[n+1]);t.set(r.subarray(0,s-i),i)}},HFe=({offset:t,values:e},n,r)=>{const i=t+n;r?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},Xd=({values:t},e,n)=>{t[e]=n},TB=({values:t},e,n)=>{t[e]=n},Nse=({values:t},e,n)=>{t[e]=VFe(n)},GFe=(t,e,n)=>{switch(t.type.precision){case mo.HALF:return Nse(t,e,n);case mo.SINGLE:case mo.DOUBLE:return TB(t,e,n)}},Lse=({values:t},e,n)=>{WFe(t,e,n.valueOf())},Pse=({values:t},e,n)=>{t[e]=BigInt(n)},YFe=({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)},Bse=({values:t,valueOffsets:e},n,r)=>Fse(t,e,n,r),$se=({values:t,valueOffsets:e},n,r)=>Fse(t,e,n,CB(r)),XFe=(t,e,n)=>{t.type.unit===Du.DAY?Lse(t,e,n):Pse(t,e,n)},Use=({values:t},e,n)=>{t[e]=BigInt(n/1e3)},zse=({values:t},e,n)=>{t[e]=BigInt(n)},jse=({values:t},e,n)=>{t[e]=BigInt(n*1e3)},qse=({values:t},e,n)=>{t[e]=BigInt(n*1e6)},KFe=(t,e,n)=>{switch(t.type.unit){case Ot.SECOND:return Use(t,e,n);case Ot.MILLISECOND:return zse(t,e,n);case Ot.MICROSECOND:return jse(t,e,n);case Ot.NANOSECOND:return qse(t,e,n)}},Vse=({values:t},e,n)=>{t[e]=n},Wse=({values:t},e,n)=>{t[e]=n},Hse=({values:t},e,n)=>{t[e]=n},Gse=({values:t},e,n)=>{t[e]=n},QFe=(t,e,n)=>{switch(t.type.unit){case Ot.SECOND:return Vse(t,e,n);case Ot.MILLISECOND:return Wse(t,e,n);case Ot.MICROSECOND:return Hse(t,e,n);case Ot.NANOSECOND:return Gse(t,e,n)}},JFe=({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)},ZFe=(t,e,n)=>{const r=t.children[0],i=t.valueOffsets,s=Tu.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n.get(++o))},eNe=(t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,s=Tu.getVisitFn(r);let{[e]:o,[e+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(s(r,o,u),++o>=a)break},tNe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[s]),nNe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(s)),rNe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(i.name)),iNe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[i.name]),sNe=(t,e,n)=>{const r=t.type.children.map(s=>Tu.getVisitFn(s.type)),i=n instanceof Map?rNe(e,n):n instanceof vi?nNe(e,n):Array.isArray(n)?tNe(e,n):iNe(e,n);t.type.children.forEach((s,o)=>i(r[o],t.children[o],s,o))},oNe=(t,e,n)=>{t.type.mode===So.Dense?Yse(t,e,n):Xse(t,e,n)},Yse=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];Tu.visit(i,t.valueOffsets[e],n)},Xse=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];Tu.visit(i,e,n)},aNe=(t,e,n)=>{var r;(r=t.dictionary)===null||r===void 0||r.set(t.values[e],n)},lNe=(t,e,n)=>{t.type.unit===Kf.DAY_TIME?Kse(t,e,n):Qse(t,e,n)},Kse=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},Qse=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},Jse=({values:t},e,n)=>{t[e]=n},Zse=({values:t},e,n)=>{t[e]=n},eoe=({values:t},e,n)=>{t[e]=n},toe=({values:t},e,n)=>{t[e]=n},uNe=(t,e,n)=>{switch(t.type.unit){case Ot.SECOND:return Jse(t,e,n);case Ot.MILLISECOND:return Zse(t,e,n);case Ot.MICROSECOND:return eoe(t,e,n);case Ot.NANOSECOND:return toe(t,e,n)}},cNe=(t,e,n)=>{const{stride:r}=t,i=t.children[0],s=Tu.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=e*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=e*r;++o<r;)s(i,a+o,n.get(o))};It.prototype.visitBool=$t(HFe);It.prototype.visitInt=$t(Xd);It.prototype.visitInt8=$t(Xd);It.prototype.visitInt16=$t(Xd);It.prototype.visitInt32=$t(Xd);It.prototype.visitInt64=$t(Xd);It.prototype.visitUint8=$t(Xd);It.prototype.visitUint16=$t(Xd);It.prototype.visitUint32=$t(Xd);It.prototype.visitUint64=$t(Xd);It.prototype.visitFloat=$t(GFe);It.prototype.visitFloat16=$t(Nse);It.prototype.visitFloat32=$t(TB);It.prototype.visitFloat64=$t(TB);It.prototype.visitUtf8=$t($se);It.prototype.visitLargeUtf8=$t($se);It.prototype.visitBinary=$t(Bse);It.prototype.visitLargeBinary=$t(Bse);It.prototype.visitFixedSizeBinary=$t(YFe);It.prototype.visitDate=$t(XFe);It.prototype.visitDateDay=$t(Lse);It.prototype.visitDateMillisecond=$t(Pse);It.prototype.visitTimestamp=$t(KFe);It.prototype.visitTimestampSecond=$t(Use);It.prototype.visitTimestampMillisecond=$t(zse);It.prototype.visitTimestampMicrosecond=$t(jse);It.prototype.visitTimestampNanosecond=$t(qse);It.prototype.visitTime=$t(QFe);It.prototype.visitTimeSecond=$t(Vse);It.prototype.visitTimeMillisecond=$t(Wse);It.prototype.visitTimeMicrosecond=$t(Hse);It.prototype.visitTimeNanosecond=$t(Gse);It.prototype.visitDecimal=$t(JFe);It.prototype.visitList=$t(ZFe);It.prototype.visitStruct=$t(sNe);It.prototype.visitUnion=$t(oNe);It.prototype.visitDenseUnion=$t(Yse);It.prototype.visitSparseUnion=$t(Xse);It.prototype.visitDictionary=$t(aNe);It.prototype.visitInterval=$t(lNe);It.prototype.visitIntervalDayTime=$t(Kse);It.prototype.visitIntervalYearMonth=$t(Qse);It.prototype.visitDuration=$t(uNe);It.prototype.visitDurationSecond=$t(Jse);It.prototype.visitDurationMillisecond=$t(Zse);It.prototype.visitDurationMicrosecond=$t(eoe);It.prototype.visitDurationNanosecond=$t(toe);It.prototype.visitFixedSizeList=$t(cNe);It.prototype.visitMap=$t(eNe);const Tu=new It,Qu=Symbol.for("parent"),ab=Symbol.for("rowIndex");class OB{constructor(e,n){return this[Qu]=e,this[ab]=n,new Proxy(this,new hNe)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ab],n=this[Qu],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=qa.visit(n.children[s],e);return i}toString(){return`{${[...this].map(([e,n])=>`${f_(e)}: ${f_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new fNe(this[Qu],this[ab])}}class fNe{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,qa.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(OB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Qu]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ab]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class hNe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Qu].type.children.map(n=>n.name)}has(e,n){return e[Qu].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[Qu].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Qu].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=qa.visit(e[Qu].children[r],e[ab]);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Qu].type.children.findIndex(s=>s.name===n);return i!==-1?(Tu.visit(e[Qu].children[i],e[ab],r),Reflect.set(e,n,r)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,r):!1}}class At extends mn{}function Rt(t){return(e,n)=>e.getValid(n)?t(e,n):null}const dNe=(t,e)=>864e5*t[e],pNe=(t,e)=>null,noe=(t,e,n)=>{if(n+1>=e.length)return null;const r=Ir(e[n]),i=Ir(e[n+1]);return t.subarray(r,i)},gNe=({offset:t,values:e},n)=>{const r=t+n;return(e[r>>3]&1<<r%8)!==0},roe=({values:t},e)=>dNe(t,e),ioe=({values:t},e)=>Ir(t[e]),K0=({stride:t,values:e},n)=>e[t*n],mNe=({stride:t,values:e},n)=>Rse(e[t*n]),soe=({values:t},e)=>t[e],yNe=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),ooe=({values:t,valueOffsets:e},n)=>noe(t,e,n),aoe=({values:t,valueOffsets:e},n)=>{const r=noe(t,e,n);return r!==null?_R(r):null},bNe=({values:t},e)=>t[e],vNe=({type:t,values:e},n)=>t.precision!==mo.HALF?e[n]:Rse(e[n]),xNe=(t,e)=>t.type.unit===Du.DAY?roe(t,e):ioe(t,e),loe=({values:t},e)=>1e3*Ir(t[e]),uoe=({values:t},e)=>Ir(t[e]),coe=({values:t},e)=>lse(t[e],BigInt(1e3)),foe=({values:t},e)=>lse(t[e],BigInt(1e6)),wNe=(t,e)=>{switch(t.type.unit){case Ot.SECOND:return loe(t,e);case Ot.MILLISECOND:return uoe(t,e);case Ot.MICROSECOND:return coe(t,e);case Ot.NANOSECOND:return foe(t,e)}},hoe=({values:t},e)=>t[e],doe=({values:t},e)=>t[e],poe=({values:t},e)=>t[e],goe=({values:t},e)=>t[e],_Ne=(t,e)=>{switch(t.type.unit){case Ot.SECOND:return hoe(t,e);case Ot.MILLISECOND:return doe(t,e);case Ot.MICROSECOND:return poe(t,e);case Ot.NANOSECOND:return goe(t,e)}},SNe=({values:t,stride:e},n)=>DB.decimal(t.subarray(e*n,e*(n+1))),ANe=(t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:s,[e*r+1]:o}=n,l=i[0].slice(s,o-s);return new vi([l])},CNe=(t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:s}=n,o=r[0];return new MB(o.slice(i,s-i))},kNe=(t,e)=>new OB(t,e),ENe=(t,e)=>t.type.mode===So.Dense?moe(t,e):yoe(t,e),moe=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return qa.visit(r,t.valueOffsets[e])},yoe=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return qa.visit(r,e)},DNe=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},TNe=(t,e)=>t.type.unit===Kf.DAY_TIME?boe(t,e):voe(t,e),boe=({values:t},e)=>t.subarray(2*e,2*(e+1)),voe=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},xoe=({values:t},e)=>t[e],woe=({values:t},e)=>t[e],_oe=({values:t},e)=>t[e],Soe=({values:t},e)=>t[e],ONe=(t,e)=>{switch(t.type.unit){case Ot.SECOND:return xoe(t,e);case Ot.MILLISECOND:return woe(t,e);case Ot.MICROSECOND:return _oe(t,e);case Ot.NANOSECOND:return Soe(t,e)}},MNe=(t,e)=>{const{stride:n,children:r}=t,s=r[0].slice(e*n,n);return new vi([s])};At.prototype.visitNull=Rt(pNe);At.prototype.visitBool=Rt(gNe);At.prototype.visitInt=Rt(bNe);At.prototype.visitInt8=Rt(K0);At.prototype.visitInt16=Rt(K0);At.prototype.visitInt32=Rt(K0);At.prototype.visitInt64=Rt(soe);At.prototype.visitUint8=Rt(K0);At.prototype.visitUint16=Rt(K0);At.prototype.visitUint32=Rt(K0);At.prototype.visitUint64=Rt(soe);At.prototype.visitFloat=Rt(vNe);At.prototype.visitFloat16=Rt(mNe);At.prototype.visitFloat32=Rt(K0);At.prototype.visitFloat64=Rt(K0);At.prototype.visitUtf8=Rt(aoe);At.prototype.visitLargeUtf8=Rt(aoe);At.prototype.visitBinary=Rt(ooe);At.prototype.visitLargeBinary=Rt(ooe);At.prototype.visitFixedSizeBinary=Rt(yNe);At.prototype.visitDate=Rt(xNe);At.prototype.visitDateDay=Rt(roe);At.prototype.visitDateMillisecond=Rt(ioe);At.prototype.visitTimestamp=Rt(wNe);At.prototype.visitTimestampSecond=Rt(loe);At.prototype.visitTimestampMillisecond=Rt(uoe);At.prototype.visitTimestampMicrosecond=Rt(coe);At.prototype.visitTimestampNanosecond=Rt(foe);At.prototype.visitTime=Rt(_Ne);At.prototype.visitTimeSecond=Rt(hoe);At.prototype.visitTimeMillisecond=Rt(doe);At.prototype.visitTimeMicrosecond=Rt(poe);At.prototype.visitTimeNanosecond=Rt(goe);At.prototype.visitDecimal=Rt(SNe);At.prototype.visitList=Rt(ANe);At.prototype.visitStruct=Rt(kNe);At.prototype.visitUnion=Rt(ENe);At.prototype.visitDenseUnion=Rt(moe);At.prototype.visitSparseUnion=Rt(yoe);At.prototype.visitDictionary=Rt(DNe);At.prototype.visitInterval=Rt(TNe);At.prototype.visitIntervalDayTime=Rt(boe);At.prototype.visitIntervalYearMonth=Rt(voe);At.prototype.visitDuration=Rt(ONe);At.prototype.visitDurationSecond=Rt(xoe);At.prototype.visitDurationMillisecond=Rt(woe);At.prototype.visitDurationMicrosecond=Rt(_oe);At.prototype.visitDurationNanosecond=Rt(Soe);At.prototype.visitFixedSizeList=Rt(MNe);At.prototype.visitMap=Rt(CNe);const qa=new At,Dy=Symbol.for("keys"),lb=Symbol.for("vals"),Ty=Symbol.for("kKeysAsStrings"),DR=Symbol.for("_kKeysAsStrings");class MB{constructor(e){return this[Dy]=new vi([e.children[0]]).memoize(),this[lb]=e.children[1],new Proxy(this,new RNe)}get[Ty](){return this[DR]||(this[DR]=Array.from(this[Dy].toArray(),String))}[Symbol.iterator](){return new INe(this[Dy],this[lb])}get size(){return this[Dy].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Dy],n=this[lb],r={};for(let i=-1,s=e.length;++i<s;)r[e.get(i)]=qa.visit(n,i);return r}toString(){return`{${[...this].map(([e,n])=>`${f_(e)}: ${f_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class INe{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),qa.visit(this.vals,e)]})}}class RNe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Ty]}has(e,n){return e[Ty].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Ty].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Ty].indexOf(n);if(r!==-1){const i=qa.visit(Reflect.get(e,lb),r);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Ty].indexOf(n);return i!==-1?(Tu.visit(Reflect.get(e,lb),i,r),Reflect.set(e,n,r)):Reflect.has(e,n)?Reflect.set(e,n,r):!1}}Object.defineProperties(MB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Dy]:{writable:!0,enumerable:!1,configurable:!1,value:null},[lb]:{writable:!0,enumerable:!1,configurable:!1,value:null},[DR]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let wG;function Aoe(t,e,n,r){const{length:i=0}=t;let s=typeof e!="number"?0:e,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(wG=s,s=o,o=wG),o>i&&(o=i),r?r(t,s,o):[s,o]}const IB=(t,e)=>t<0?e+t:t,_G=t=>t!==t;function n2(t){if(typeof t!=="object"||t===null)return _G(t)?_G:n=>n===t;if(t instanceof Date){const n=t.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?MFe(t,n):!1:t instanceof Map?NNe(t):Array.isArray(t)?FNe(t):t instanceof vi?LNe(t):PNe(t,!0)}function FNe(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=n2(t[n]);return V8(e)}function NNe(t){let e=-1;const n=[];for(const r of t.values())n[++e]=n2(r);return V8(n)}function LNe(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=n2(t.get(n));return V8(e)}function PNe(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=n2(t[n[i]]);return V8(r,n)}function V8(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return BNe(t,n);case Map:return SG(t,n,n.keys());case MB:case OB:case Object:case void 0:return SG(t,n,e||Object.keys(n))}return n instanceof vi?$Ne(t,n):!1}}function BNe(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}function $Ne(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}function SG(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=s.next(),u=r.next(),c=i.next();for(;o<a&&!u.done&&!c.done&&!l.done&&!(u.value!==c.value||!t[o](l.value));++o,u=r.next(),c=i.next(),l=s.next());return o===a&&u.done&&c.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function Coe(t,e,n,r){return(n&1<<r)!==0}function UNe(t,e,n,r){return(n&1<<r)>>r}function Fk(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):Nk(new RB(n,t,e,null,Coe)).subarray(0,r)),i}return n}function Nk(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),++r===8&&(e[n++]=i,i=r=0);(n===0||r>0)&&(e[n++]=i);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class RB{constructor(e,n,r,i,s){this.bytes=e,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function TR(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new RB(t,e,n-e,t,UNe))s+=o;return s}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return TR(t,e,i)+TR(t,r,n)+zNe(t,i>>3,r-i>>3)}function zNe(t,e,n){let r=0,i=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:i+n;for(;o-i>=4;)r+=X7(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=X7(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=X7(s.getUint8(i)),i+=1;return r}function X7(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const jNe=-1;class gr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return lt.isSparseUnion(e)?this.children.some(n=>n.nullable):lt.isDenseUnion(e)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,e)}get nullCount(){if(lt.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let e=this._nullCount,n;return e<=jNe&&(n=this.nullBitmap)&&(this._nullCount=e=n.length===0?0:this.length-TR(n,this.offset,this.offset+this.length)),e}constructor(e,n,r,i,s,o=[],a){this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof gr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Zh(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(e){const{type:n}=this;if(lt.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[e]]],s=r.mode===So.Dense?this.valueOffsets[e]:e;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+e;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(e,n){let r;const{type:i}=this;if(lt.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[e]]],a=s.mode===So.Dense?this.valueOffsets[e]:e;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+e,u=1<<l%8,c=l>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0?(s.set(Fk(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const f=s[c];r=(f&u)!==0,s[c]=n?f|u:f&~u}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(e=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new gr(e,n,r,i,s,o,this.dictionary)}slice(e,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(e,n,r,i);return this.clone(this.type,this.offset+e,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*e,a*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===ee.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:r}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Fk(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Jh.VALIDITY]=i,this.clone(this.type,0,e,r+(e-n),s)}_sliceBuffers(e,n,r,i){let s;const{buffers:o}=this;return(s=o[Jh.TYPE])&&(o[Jh.TYPE]=s.subarray(e,e+n)),(s=o[Jh.OFFSET])&&(o[Jh.OFFSET]=s.subarray(e,e+n+1))||(s=o[Jh.DATA])&&(o[Jh.DATA]=i===6?s:s.subarray(r*e,r*(e+n))),o}_sliceChildren(e,n,r){return e.map(i=>i.slice(n,r))}}gr.prototype.children=Object.freeze([]);class Dw extends mn{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=e;return new gr(n,r,i,i)}visitBool(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitInt(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitFloat(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.data),s=Dn(e.nullBitmap),o=hx(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[o,i,s])}visitLargeUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.data),s=Dn(e.nullBitmap),o=cG(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[o,i,s])}visitBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.data),s=Dn(e.nullBitmap),o=hx(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[o,i,s])}visitLargeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.data),s=Dn(e.nullBitmap),o=cG(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[o,i,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitDate(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitTimestamp(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitTime(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitDecimal(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitList(e){const{["type"]:n,["offset"]:r=0,["child"]:i}=e,s=Dn(e.nullBitmap),o=hx(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[o,void 0,s],[i])}visitStruct(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Dn(e.nullBitmap),{length:o=i.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=yr(n.ArrayType,e.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=e;if(lt.isSparseUnion(n))return new gr(n,r,o,a,[void 0,void 0,void 0,s],i);const l=hx(e.valueOffsets);return new gr(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.indices.ArrayType,e.data),{["dictionary"]:o=new vi([new Dw().visit({type:n.dictionary})])}=e,{["length"]:a=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[void 0,s,i],[],o)}visitInterval(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitDuration(e){const{["type"]:n,["offset"]:r=0}=e,i=Dn(e.nullBitmap),s=yr(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new Dw().visit({type:n.valueType})}=e,s=Dn(e.nullBitmap),{["length"]:o=i.length/Zh(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new gr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new Dw().visit({type:n.childType})}=e,s=Dn(e.nullBitmap),o=hx(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new gr(n,r,a,l,[o,void 0,s],[i])}}const qNe=new Dw;function yn(t){return qNe.visit(t)}class AG{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function VNe(t){return t.some(e=>e.nullable)}function koe(t){return t.reduce((e,n)=>e+n.nullCount,0)}function Eoe(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}function Doe(t,e,n,r){const i=[];for(let s=-1,o=t.length;++s<o;){const a=t[s],l=e[s],{length:u}=a;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){i.push(a);continue}const c=Math.max(0,n-l),f=Math.min(r-l,u);i.push(a.slice(c,f-c))}return i.length===0&&i.push(t[0].slice(0,0)),i}function FB(t,e,n,r){let i=0,s=0,o=e.length-1;do{if(i>=o-1)return n<e[o]?r(t,i,n-e[i]):null;s=i+Math.trunc((o-i)*.5),n<e[s]?o=s:i=s}while(i<o)}function NB(t,e){return t.getValid(e)}function Lk(t){function e(n,r,i){return t(n[r],i)}return function(n){const r=this.data;return FB(r,this._offsets,n,e)}}function Toe(t){let e;function n(r,i,s){return t(r[i],s,e)}return function(r,i){const s=this.data;e=i;const o=FB(s,this._offsets,r,n);return e=void 0,o}}function Ooe(t){let e;function n(r,i,s){let o=s,a=0,l=0;for(let u=i-1,c=r.length;++u<c;){const f=r[u];if(~(a=t(f,e,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){e=r;const s=this.data,o=typeof i!="number"?n(s,0,0):FB(s,this._offsets,i,n);return e=void 0,o}}class Ct extends mn{}function WNe(t,e){return e===null&&t.length>0?0:-1}function HNe(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new RB(n,t.offset+(e||0),t.length,n,Coe)){if(!i)return r;++r}return-1}function jt(t,e,n){if(e===void 0)return-1;if(e===null)switch(t.typeId){case ee.Union:break;case ee.Dictionary:break;default:return HNe(t,n)}const r=qa.getVisitFn(t),i=n2(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}function Moe(t,e,n){const r=qa.getVisitFn(t),i=n2(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}Ct.prototype.visitNull=WNe;Ct.prototype.visitBool=jt;Ct.prototype.visitInt=jt;Ct.prototype.visitInt8=jt;Ct.prototype.visitInt16=jt;Ct.prototype.visitInt32=jt;Ct.prototype.visitInt64=jt;Ct.prototype.visitUint8=jt;Ct.prototype.visitUint16=jt;Ct.prototype.visitUint32=jt;Ct.prototype.visitUint64=jt;Ct.prototype.visitFloat=jt;Ct.prototype.visitFloat16=jt;Ct.prototype.visitFloat32=jt;Ct.prototype.visitFloat64=jt;Ct.prototype.visitUtf8=jt;Ct.prototype.visitLargeUtf8=jt;Ct.prototype.visitBinary=jt;Ct.prototype.visitLargeBinary=jt;Ct.prototype.visitFixedSizeBinary=jt;Ct.prototype.visitDate=jt;Ct.prototype.visitDateDay=jt;Ct.prototype.visitDateMillisecond=jt;Ct.prototype.visitTimestamp=jt;Ct.prototype.visitTimestampSecond=jt;Ct.prototype.visitTimestampMillisecond=jt;Ct.prototype.visitTimestampMicrosecond=jt;Ct.prototype.visitTimestampNanosecond=jt;Ct.prototype.visitTime=jt;Ct.prototype.visitTimeSecond=jt;Ct.prototype.visitTimeMillisecond=jt;Ct.prototype.visitTimeMicrosecond=jt;Ct.prototype.visitTimeNanosecond=jt;Ct.prototype.visitDecimal=jt;Ct.prototype.visitList=jt;Ct.prototype.visitStruct=jt;Ct.prototype.visitUnion=jt;Ct.prototype.visitDenseUnion=Moe;Ct.prototype.visitSparseUnion=Moe;Ct.prototype.visitDictionary=jt;Ct.prototype.visitInterval=jt;Ct.prototype.visitIntervalDayTime=jt;Ct.prototype.visitIntervalYearMonth=jt;Ct.prototype.visitDuration=jt;Ct.prototype.visitDurationSecond=jt;Ct.prototype.visitDurationMillisecond=jt;Ct.prototype.visitDurationMicrosecond=jt;Ct.prototype.visitDurationNanosecond=jt;Ct.prototype.visitFixedSizeList=jt;Ct.prototype.visitMap=jt;const Pk=new Ct;class kt extends mn{}function Ft(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(lt.isInt(e)&&e.bitWidth!==64||lt.isTime(e)&&e.bitWidth!==64||lt.isFloat(e)&&e.precision!==mo.HALF))return new AG(t.data.length,r=>{const i=t.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new AG(t.data.length,r=>{const s=t.data[r].length,o=t.slice(n,n+s);return n+=s,new GNe(o)})}class GNe{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}kt.prototype.visitNull=Ft;kt.prototype.visitBool=Ft;kt.prototype.visitInt=Ft;kt.prototype.visitInt8=Ft;kt.prototype.visitInt16=Ft;kt.prototype.visitInt32=Ft;kt.prototype.visitInt64=Ft;kt.prototype.visitUint8=Ft;kt.prototype.visitUint16=Ft;kt.prototype.visitUint32=Ft;kt.prototype.visitUint64=Ft;kt.prototype.visitFloat=Ft;kt.prototype.visitFloat16=Ft;kt.prototype.visitFloat32=Ft;kt.prototype.visitFloat64=Ft;kt.prototype.visitUtf8=Ft;kt.prototype.visitLargeUtf8=Ft;kt.prototype.visitBinary=Ft;kt.prototype.visitLargeBinary=Ft;kt.prototype.visitFixedSizeBinary=Ft;kt.prototype.visitDate=Ft;kt.prototype.visitDateDay=Ft;kt.prototype.visitDateMillisecond=Ft;kt.prototype.visitTimestamp=Ft;kt.prototype.visitTimestampSecond=Ft;kt.prototype.visitTimestampMillisecond=Ft;kt.prototype.visitTimestampMicrosecond=Ft;kt.prototype.visitTimestampNanosecond=Ft;kt.prototype.visitTime=Ft;kt.prototype.visitTimeSecond=Ft;kt.prototype.visitTimeMillisecond=Ft;kt.prototype.visitTimeMicrosecond=Ft;kt.prototype.visitTimeNanosecond=Ft;kt.prototype.visitDecimal=Ft;kt.prototype.visitList=Ft;kt.prototype.visitStruct=Ft;kt.prototype.visitUnion=Ft;kt.prototype.visitDenseUnion=Ft;kt.prototype.visitSparseUnion=Ft;kt.prototype.visitDictionary=Ft;kt.prototype.visitInterval=Ft;kt.prototype.visitIntervalDayTime=Ft;kt.prototype.visitIntervalYearMonth=Ft;kt.prototype.visitDuration=Ft;kt.prototype.visitDurationSecond=Ft;kt.prototype.visitDurationMillisecond=Ft;kt.prototype.visitDurationMicrosecond=Ft;kt.prototype.visitDurationNanosecond=Ft;kt.prototype.visitFixedSizeList=Ft;kt.prototype.visitMap=Ft;const LB=new kt;var Ioe;const Roe={},Foe={};let vi=class Ig{constructor(e){var n,r,i;const s=e[0]instanceof Ig?e.flatMap(a=>a.data):e;if(s.length===0||s.some(a=>!(a instanceof gr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:u}=Roe[o.typeId],c=s[0];this.isValid=f=>NB(c,f),this.get=f=>a(c,f),this.set=(f,h)=>l(c,f,h),this.indexOf=f=>u(c,f),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,Foe[o.typeId]),this._offsets=Eoe(s);break}this.data=s,this.type=o,this.stride=Zh(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,n)=>e+n.byteLength,0)}get nullable(){return VNe(this.data)}get nullCount(){return koe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ee[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(IB(e,this.length))}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>-1}[Symbol.iterator](){return LB.visit(this)}concat(...e){return new Ig(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new Ig(Aoe(this,e,n,({data:r,_offsets:i},s,o)=>Doe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:r,stride:i,ArrayType:s}=this;switch(e.typeId){case ee.Int:case ee.Float:case ee.Decimal:case ee.Time:case ee.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Ig(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return lt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(lt.isDictionary(this.type)){const e=new Bk(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new Ig(n)}return new Bk(this)}unmemoize(){if(lt.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new Ig(n)}return this}};Ioe=Symbol.toStringTag;vi[Ioe]=(t=>{t.type=lt.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(ee).map(n=>ee[n]).filter(n=>typeof n=="number"&&n!==ee.NONE);for(const n of e){const r=qa.getVisitFnByTypeId(n),i=Tu.getVisitFnByTypeId(n),s=Pk.getVisitFnByTypeId(n);Roe[n]={get:r,set:i,indexOf:s},Foe[n]=Object.create(t,{isValid:{value:Lk(NB)},get:{value:Lk(qa.getVisitFnByTypeId(n))},set:{value:Toe(Tu.getVisitFnByTypeId(n))},indexOf:{value:Ooe(Pk.getVisitFnByTypeId(n))}})}return"Vector"})(vi.prototype);class Bk extends vi{constructor(e){super(e.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Bk(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new vi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class OR{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,i){return e.prep(8,24),e.writeInt64(BigInt(i??0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(n??0)),e.offset()}}class pl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new pl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+hr),(n||new pl).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):$i.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new rf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new OR).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new OR).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new us).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,$i.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}let mi=class Rg{constructor(e=[],n,r,i=$i.V5){this.fields=e||[],this.metadata=n||new Map,r||(r=MR(this.fields)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(i=>n.has(i.name));return new Rg(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new Rg(n,this.metadata)}assign(...e){const n=e[0]instanceof Rg?e[0]:Array.isArray(e[0])?new Rg(e[0]):new Rg(e),r=[...this.fields],i=yA(yA(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(u=>u.name===a.name);return~l?(r[l]=a.clone({metadata:yA(yA(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=MR(s,new Map);return new Rg([...r,...s],i,new Map([...this.dictionaries,...o]))}};mi.prototype.fields=null;mi.prototype.metadata=null;mi.prototype.dictionaries=null;class ei{static new(...e){let[n,r,i,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),i===void 0&&(i=e[0].nullable),s===void 0&&(s=e[0].metadata)),new ei(`${n}`,r,i,s)}constructor(e,n,r=!1,i){this.name=e,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,i,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=e[0],ei.new(n,r,i,s)}}ei.prototype.type=null;ei.prototype.name=null;ei.prototype.nullable=null;ei.prototype.metadata=null;function yA(t,e){return new Map([...t||new Map,...e||new Map])}function MR(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const s=t[n].type;if(lt.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&MR(s.children,e)}return e}var YNe=ise,XNe=Hb;class g_{static decode(e){e=new XNe(Dn(e));const n=pl.getRootAsFooter(e),r=mi.decode(n.schema(),new Map,n.version());return new KNe(r,n)}static encode(e){const n=new YNe,r=mi.encode(n,e.schema);pl.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())S0.encode(n,o);const i=n.endVector();pl.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())S0.encode(n,o);const s=n.endVector();return pl.startFooter(n),pl.addSchema(n,r),pl.addVersion(n,$i.V5),pl.addRecordBatches(n,i),pl.addDictionaries(n,s),pl.finishFooterBuffer(n,pl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,n=$i.V5,r,i){this.schema=e,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class KNe extends g_{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,n){super(e,n.version()),this._footer=n}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return S0.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return S0.decode(n)}return null}}class S0{static decode(e){return new S0(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return OR.createBlock(e,i,r,s)}constructor(e,n,r){this.metaDataLength=e,this.offset=Ir(r),this.bodyLength=Ir(n)}}const xi=Object.freeze({done:!0,value:void 0});class CG{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class PB{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class QNe extends PB{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return qt(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(xi);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return ou.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return ou.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return qt(this,void 0,void 0,function*(){return yield this.abort(e),xi})}return(e){return qt(this,void 0,void 0,function*(){return yield this.close(),xi})}read(e){return qt(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return qt(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(xi)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class sC extends QNe{write(e){if((e=Dn(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?_R(this.toUint8Array(!0)):this.toUint8Array(!1).then(_R)}toUint8Array(e=!1){return e?Xf(this._values)[0]:qt(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,u=ym(this),c;c=yield u.next(),n=c.done,!n;l=!0){s=c.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}return Xf(o,a)[0]})}}class $k{constructor(e){e&&(this.source=new JNe(ou.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Xb{constructor(e){e instanceof Xb?this.source=e.source:e instanceof sC?this.source=new Cg(ou.fromAsyncIterable(e)):ese(e)?this.source=new Cg(ou.fromNodeStream(e)):kB(e)?this.source=new Cg(ou.fromDOMStream(e)):Zie(e)?this.source=new Cg(ou.fromDOMStream(e.body)):X3(e)?this.source=new Cg(ou.fromIterable(e)):jm(e)?this.source=new Cg(ou.fromAsyncIterable(e)):t2(e)&&(this.source=new Cg(ou.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class JNe{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||xi)}return(e){return Object.create(this.source.return&&this.source.return(e)||xi)}}class Cg{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return qt(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return qt(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return qt(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return qt(this,arguments,void 0,function*(n,r="read"){return yield this.source.next({cmd:r,size:n})})}throw(e){return qt(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||xi;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return qt(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||xi;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class kG extends $k{constructor(e,n){super(),this.position=0,this.buffer=Dn(e),this.size=n===void 0?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),n.subarray(i,this.position)):null}readAt(e,n){const r=this.buffer,i=Math.min(this.size,e+n);return r?r.subarray(e,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Uk extends Xb{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=qt(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return qt(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return qt(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return qt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,e)),u=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<u.byteLength;)({bytesRead:a}=yield n.read(u,o,u.byteLength-o,s));return u}return null})}readAt(e,n){return qt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+n<i){const s=Math.min(i,e+n),o=new Uint8Array(s-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return qt(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return qt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return qt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const ZNe=65536;function Py(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Kb=8,BB=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Noe{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?ZNe:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Py(this.buffer[1])} ${Py(this.buffer[0])}`}}class mr extends Noe{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return mr.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return mr.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,i=new mr(n);for(let s=0;s<r;){const o=Kb<r-s?Kb:r-s,a=new mr(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new mr(new Uint32Array([BB[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)mr.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new mr(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new mr(new Uint32Array(e.buffer)).plus(n)}}class ma extends Noe{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return ma.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return ma.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),i=e.length,s=new ma(n);for(let o=r?1:0;o<i;){const a=Kb<i-o?Kb:i-o,l=new ma(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),u=new ma(new Uint32Array([BB[a],0]));s.times(u),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)ma.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new ma(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ma(new Uint32Array(e.buffer)).plus(n)}}class sf{constructor(e){this.buffer=e}high(){return new ma(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ma(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new mr(new Uint32Array([this.buffer[3],0])),r=new mr(new Uint32Array([this.buffer[2],0])),i=new mr(new Uint32Array([this.buffer[1],0])),s=new mr(new Uint32Array([this.buffer[0],0])),o=new mr(new Uint32Array([e.buffer[3],0])),a=new mr(new Uint32Array([e.buffer[2],0])),l=new mr(new Uint32Array([e.buffer[1],0])),u=new mr(new Uint32Array([e.buffer[0],0]));let c=mr.multiply(s,u);this.buffer[0]=c.low();const f=new mr(new Uint32Array([c.high(),0]));return c=mr.multiply(i,u),f.plus(c),c=mr.multiply(s,l),f.plus(c),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(c)?1:0,this.buffer[2]=f.high(),new mr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(mr.multiply(r,u)).plus(mr.multiply(i,l)).plus(mr.multiply(s,a)),this.buffer[3]+=mr.multiply(n,u).plus(mr.multiply(r,l)).plus(mr.multiply(i,a)).plus(mr.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Py(this.buffer[3])} ${Py(this.buffer[2])} ${Py(this.buffer[1])} ${Py(this.buffer[0])}`}static multiply(e,n){return new sf(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new sf(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return sf.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return sf.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),i=e.length,s=new sf(n);for(let o=r?1:0;o<i;){const a=Kb<i-o?Kb:i-o,l=new sf(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),u=new sf(new Uint32Array([BB[a],0,0,0]));s.times(u),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,i=e.length;++r<i;)sf.from(e[r],new Uint32Array(n.buffer,n.byteOffset+16*r,4));return n}}class Loe extends mn{constructor(e,n,r,i,s=$i.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(e){return super.visit(e instanceof ei?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return yn({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<$i.V5&&this.readNullBitmap(e,r),e.mode===So.Sparse?this.visitSparseUnion(e,{length:n,nullCount:r}):this.visitDenseUnion(e,{length:n,nullCount:r})}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDuration(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return yn({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class eLe extends Loe{constructor(e,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Nk(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return yr(Uint8Array,yr(e.OffsetArrayType,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return yr(Uint8Array,yr(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return lt.isTimestamp(e)||(lt.isInt(e)||lt.isTime(e))&&e.bitWidth===64||lt.isDuration(e)||lt.isDate(e)&&e.unit===Du.MILLISECOND?yr(Uint8Array,ma.convertArray(r[n])):lt.isDecimal(e)?yr(Uint8Array,sf.convertArray(r[n])):lt.isBinary(e)||lt.isLargeBinary(e)||lt.isFixedSizeBinary(e)?tLe(r[n]):lt.isBool(e)?Nk(r[n]):lt.isUtf8(e)||lt.isLargeUtf8(e)?CB(r[n].join("")):yr(Uint8Array,yr(e.ArrayType,r[n].map(i=>+i)))}}function tLe(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}class Et extends mn{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((r,i)=>this.compareFields(r,n[i]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function ua(t,e){return e instanceof t.constructor}function b1(t,e){return t===e||ua(t,e)}function Kd(t,e){return t===e||ua(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function W8(t,e){return t===e||ua(t,e)&&t.precision===e.precision}function nLe(t,e){return t===e||ua(t,e)&&t.byteWidth===e.byteWidth}function $B(t,e){return t===e||ua(t,e)&&t.unit===e.unit}function K3(t,e){return t===e||ua(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Q3(t,e){return t===e||ua(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function rLe(t,e){return t===e||ua(t,e)&&t.children.length===e.children.length&&A0.compareManyFields(t.children,e.children)}function iLe(t,e){return t===e||ua(t,e)&&t.children.length===e.children.length&&A0.compareManyFields(t.children,e.children)}function UB(t,e){return t===e||ua(t,e)&&t.mode===e.mode&&t.typeIds.every((n,r)=>n===e.typeIds[r])&&A0.compareManyFields(t.children,e.children)}function sLe(t,e){return t===e||ua(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&A0.visit(t.indices,e.indices)&&A0.visit(t.dictionary,e.dictionary)}function zB(t,e){return t===e||ua(t,e)&&t.unit===e.unit}function J3(t,e){return t===e||ua(t,e)&&t.unit===e.unit}function oLe(t,e){return t===e||ua(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&A0.compareManyFields(t.children,e.children)}function aLe(t,e){return t===e||ua(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&A0.compareManyFields(t.children,e.children)}Et.prototype.visitNull=b1;Et.prototype.visitBool=b1;Et.prototype.visitInt=Kd;Et.prototype.visitInt8=Kd;Et.prototype.visitInt16=Kd;Et.prototype.visitInt32=Kd;Et.prototype.visitInt64=Kd;Et.prototype.visitUint8=Kd;Et.prototype.visitUint16=Kd;Et.prototype.visitUint32=Kd;Et.prototype.visitUint64=Kd;Et.prototype.visitFloat=W8;Et.prototype.visitFloat16=W8;Et.prototype.visitFloat32=W8;Et.prototype.visitFloat64=W8;Et.prototype.visitUtf8=b1;Et.prototype.visitLargeUtf8=b1;Et.prototype.visitBinary=b1;Et.prototype.visitLargeBinary=b1;Et.prototype.visitFixedSizeBinary=nLe;Et.prototype.visitDate=$B;Et.prototype.visitDateDay=$B;Et.prototype.visitDateMillisecond=$B;Et.prototype.visitTimestamp=K3;Et.prototype.visitTimestampSecond=K3;Et.prototype.visitTimestampMillisecond=K3;Et.prototype.visitTimestampMicrosecond=K3;Et.prototype.visitTimestampNanosecond=K3;Et.prototype.visitTime=Q3;Et.prototype.visitTimeSecond=Q3;Et.prototype.visitTimeMillisecond=Q3;Et.prototype.visitTimeMicrosecond=Q3;Et.prototype.visitTimeNanosecond=Q3;Et.prototype.visitDecimal=b1;Et.prototype.visitList=rLe;Et.prototype.visitStruct=iLe;Et.prototype.visitUnion=UB;Et.prototype.visitDenseUnion=UB;Et.prototype.visitSparseUnion=UB;Et.prototype.visitDictionary=sLe;Et.prototype.visitInterval=zB;Et.prototype.visitIntervalDayTime=zB;Et.prototype.visitIntervalYearMonth=zB;Et.prototype.visitDuration=J3;Et.prototype.visitDurationSecond=J3;Et.prototype.visitDurationMillisecond=J3;Et.prototype.visitDurationMicrosecond=J3;Et.prototype.visitDurationNanosecond=J3;Et.prototype.visitFixedSizeList=oLe;Et.prototype.visitMap=aLe;const A0=new Et;function IR(t,e){return A0.compareSchemas(t,e)}function K7(t,e){return lLe(t,e.map(n=>n.data.concat()))}function lLe(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce((f,h)=>Math.max(f,h.length),0)};let s=0,o=0,a=-1;const l=e.length;let u,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)c[a]=u=e[a].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(c=uLe(n,o,c,e,i),o>0&&(r[s++]=yn({type:new Ho(n),length:o,nullCount:0,children:c.slice()})))}return[t=t.assign(n),r.map(f=>new Ea(t,f))]}function uLe(t,e,n,r,i){var s;const o=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const u=n[a],c=u?.length;if(c>=e)c===e?n[a]=u:(n[a]=u.slice(0,e),i.numBatches=Math.max(i.numBatches,r[a].unshift(u.slice(e,c-e))));else{const f=t[a];t[a]=f.clone({nullable:!0}),n[a]=(s=u?._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:yn({type:f.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var Poe;let C0=class Fg{constructor(...e){var n,r;if(e.length===0)return this.batches=[],this.schema=new mi([]),this._offsets=[0],this;let i,s;e[0]instanceof mi&&(i=e.shift()),e.at(-1)instanceof Uint32Array&&(s=e.pop());const o=l=>{if(l){if(l instanceof Ea)return[l];if(l instanceof Fg)return l.batches;if(l instanceof gr){if(l.type instanceof Ho)return[new Ea(new mi(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>o(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>o(u));if(typeof l=="object"){const u=Object.keys(l),c=u.map(d=>new vi([l[d]])),f=i??new mi(u.map((d,p)=>new ei(String(d),c[p].type,c[p].nullable))),[,h]=K7(f,c);return h.length===0?[new Ea(l)]:h}}}return[]},a=e.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new mi([]),!(i instanceof mi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Ea))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!IR(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??Eoe(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=koe(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(IB(e,this.numRows))}set(e,n){}indexOf(e,n){return-1}[Symbol.iterator](){return this.batches.length>0?LB.visit(new vi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,r=this.data.concat(e.flatMap(({data:i})=>i));return new Fg(n,r.map(i=>new Ea(n,i)))}slice(e,n){const r=this.schema;[e,n]=Aoe({length:this.numRows},e,n);const i=Doe(this.data,this._offsets,e,n);return new Fg(r,i.map(s=>new Ea(r,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(r=>r.children[e]);if(n.length===0){const{type:r}=this.schema.fields[e],i=yn({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new vi(n)}return null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new vi([yn({type:new _0,length:this.numRows})]));const s=r.fields.slice(),o=s[e].clone({type:n.type}),a=this.schema.fields.map((l,u)=>this.getChildAt(u));[s[e],a[e]]=[o,n],[r,i]=K7(r,a)}return new Fg(r,i)}select(e){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(e.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(e){const n=this.schema.selectAt(e),r=this.batches.map(i=>i.selectAt(e));return new Fg(n,r)}assign(e){const n=this.schema.fields,[r,i]=e.schema.fields.reduce((a,l,u)=>{const[c,f]=a,h=n.findIndex(d=>d.name===l.name);return~h?f[h]=u:c.push(u),a},[[],[]]),s=this.schema.assign(e.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):e.getChildAt(l)),...r.map(a=>e.getChildAt(a))].filter(Boolean);return new Fg(...K7(s,o))}};Poe=Symbol.toStringTag;C0[Poe]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Lk(NB),t.get=Lk(qa.getVisitFn(ee.Struct)),t.set=Toe(Tu.getVisitFn(ee.Struct)),t.indexOf=Ooe(Pk.getVisitFn(ee.Struct)),"Table"))(C0.prototype);var Boe;let Ea=class ew{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=yn({nullCount:0,type:new Ho(this.schema.fields),children:this.schema.fields.map(n=>yn({type:n.type,nullCount:0}))})]=e,!(this.data instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=EG(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,u,c)=>(l.children[c]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[c]=ei.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new mi(r),a=yn({type:new Ho(r),length:s,children:i,nullCount:0});[this.schema,this.data]=EG(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=$oe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return qa.visit(this.data,e)}at(e){return this.get(IB(e,this.numRows))}set(e,n){return Tu.visit(this.data,e,n)}indexOf(e,n){return Pk.visit(this.data,e,n)}[Symbol.iterator](){return LB.visit(new vi([this.data]))}toArray(){return[...this]}concat(...e){return new C0(this.schema,[this,...e])}slice(e,n){const[r]=new vi([this.data]).slice(e,n).data;return new ew(this.schema,r)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new vi([this.data.children[e]]):null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=this.data;if(e>-1&&e<this.numCols){n||(n=new vi([yn({type:new _0,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[e].clone({type:n.type});[s[e],o[e]]=[a,n.data[0]],r=new mi(s,new Map(this.schema.metadata)),i=yn({type:new Ho(s),children:o})}return new ew(r,i)}select(e){const n=this.schema.select(e),r=new Ho(n.fields),i=[];for(const s of e){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new ew(n,yn({type:r,length:this.numRows,children:i}))}selectAt(e){const n=this.schema.selectAt(e),r=e.map(s=>this.data.children[s]).filter(Boolean),i=yn({type:new Ho(n.fields),length:this.numRows,children:r});return new ew(n,i)}};Boe=Symbol.toStringTag;Ea[Boe]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ea.prototype);function EG(t,e,n=e.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const u=e[a];(!u||u.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=u?._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:yn({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(i),yn({type:new Ho(i),length:n,children:s})]}function $oe(t,e,n=new Map){var r,i;if(((r=t?.length)!==null&&r!==void 0?r:0)>0&&t?.length===e?.length)for(let s=-1,o=t.length;++s<o;){const{type:a}=t[s],l=e[s];for(const u of[l,...((i=l?.dictionary)===null||i===void 0?void 0:i.data)||[]])$oe(a.children,u?.children,n);if(lt.isDictionary(a)){const{id:u}=a;if(!n.has(u))l?.dictionary&&n.set(u,l.dictionary);else if(n.get(u)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class jB extends Ea{constructor(e){const n=e.fields.map(i=>yn({type:i.type})),r=yn({type:new Ho(e.fields),nullCount:0,children:n});super(e,r)}}let Cp=class Kc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Kc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+hr),(n||new Kc).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):$i.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Gn.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new us).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,$i.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Gn.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i,s,o){return Kc.startMessage(e),Kc.addVersion(e,n),Kc.addHeaderType(e,r),Kc.addHeader(e,i),Kc.addBodyLength(e,s),Kc.addCustomMetadata(e,o),Kc.endMessage(e)}};class cLe extends mn{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return bG.startNull(n),bG.endNull(n)}visitInt(e,n){return yl.startInt(n),yl.addBitWidth(n,e.bitWidth),yl.addIsSigned(n,e.isSigned),yl.endInt(n)}visitFloat(e,n){return pf.startFloatingPoint(n),pf.addPrecision(n,e.precision),pf.endFloatingPoint(n)}visitBinary(e,n){return dG.startBinary(n),dG.endBinary(n)}visitLargeBinary(e,n){return gG.startLargeBinary(n),gG.endLargeBinary(n)}visitBool(e,n){return pG.startBool(n),pG.endBool(n)}visitUtf8(e,n){return vG.startUtf8(n),vG.endUtf8(n)}visitLargeUtf8(e,n){return mG.startLargeUtf8(n),mG.endLargeUtf8(n)}visitDecimal(e,n){return _y.startDecimal(n),_y.addScale(n,e.scale),_y.addPrecision(n,e.precision),_y.addBitWidth(n,e.bitWidth),_y.endDecimal(n)}visitDate(e,n){return Z6.startDate(n),Z6.addUnit(n,e.unit),Z6.endDate(n)}visitTime(e,n){return cu.startTime(n),cu.addUnit(n,e.unit),cu.addBitWidth(n,e.bitWidth),cu.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return fu.startTimestamp(n),fu.addUnit(n,e.unit),r!==void 0&&fu.addTimezone(n,r),fu.endTimestamp(n)}visitInterval(e,n){return gf.startInterval(n),gf.addUnit(n,e.unit),gf.endInterval(n)}visitDuration(e,n){return eC.startDuration(n),eC.addUnit(n,e.unit),eC.endDuration(n)}visitList(e,n){return yG.startList(n),yG.endList(n)}visitStruct(e,n){return Xg.startStruct_(n),Xg.endStruct_(n)}visitUnion(e,n){ka.startTypeIdsVector(n,e.typeIds.length);const r=ka.createTypeIdsVector(n,e.typeIds);return ka.startUnion(n),ka.addMode(n,e.mode),ka.addTypeIds(n,r),ka.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return cd.startDictionaryEncoding(n),cd.addId(n,BigInt(e.id)),cd.addIsOrdered(n,e.isOrdered),r!==void 0&&cd.addIndexType(n,r),cd.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return tC.startFixedSizeBinary(n),tC.addByteWidth(n,e.byteWidth),tC.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return nC.startFixedSizeList(n),nC.addListSize(n,e.listSize),nC.endFixedSizeList(n)}visitMap(e,n){return rC.startMap(n),rC.addKeysSorted(n,e.keysSorted),rC.endMap(n)}}const Q7=new cLe;function fLe(t,e=new Map){return new mi(dLe(t,e),oC(t.metadata),e)}function Uoe(t){return new Ll(t.count,zoe(t.columns),joe(t.columns))}function hLe(t){return new Qf(Uoe(t.data),t.id,t.isDelta)}function dLe(t,e){return(t.fields||[]).filter(Boolean).map(n=>ei.fromJSON(n,e))}function DG(t,e){return(t.children||[]).filter(Boolean).map(n=>ei.fromJSON(n,e))}function zoe(t){return(t||[]).reduce((e,n)=>[...e,new k0(n.count,pLe(n.VALIDITY)),...zoe(n.children)],[])}function joe(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const i=t[n];i.VALIDITY&&e.push(new kf(e.length,i.VALIDITY.length)),i.TYPE_ID&&e.push(new kf(e.length,i.TYPE_ID.length)),i.OFFSET&&e.push(new kf(e.length,i.OFFSET.length)),i.DATA&&e.push(new kf(e.length,i.DATA.length)),e=joe(i.children,e)}return e}function pLe(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function gLe(t,e){let n,r,i,s,o,a;return!e||!(s=t.dictionary)?(o=OG(t,DG(t,e)),i=new ei(t.name,o,t.nullable,oC(t.metadata))):e.has(n=s.id)?(r=(r=s.indexType)?TG(r):new p_,a=new Yb(e.get(n),r,n,s.isOrdered),i=new ei(t.name,a,t.nullable,oC(t.metadata))):(r=(r=s.indexType)?TG(r):new p_,e.set(n,o=OG(t,DG(t,e))),a=new Yb(o,r,n,s.isOrdered),i=new ei(t.name,a,t.nullable,oC(t.metadata))),i||null}function oC(t=[]){return new Map(t.map(({key:e,value:n})=>[e,n]))}function TG(t){return new qm(t.isSigned,t.bitWidth)}function OG(t,e){const n=t.type.name;switch(n){case"NONE":return new _0;case"null":return new _0;case"binary":return new bk;case"largebinary":return new vk;case"utf8":return new xk;case"largeutf8":return new wk;case"bool":return new _k;case"list":return new Tk((e||[])[0]);case"struct":return new Ho(e||[]);case"struct_":return new Ho(e||[])}switch(n){case"int":{const r=t.type;return new qm(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=t.type;return new yk(mo[r.precision])}case"decimal":{const r=t.type;return new Sk(r.scale,r.precision,r.bitWidth)}case"date":{const r=t.type;return new Ak(Du[r.unit])}case"time":{const r=t.type;return new Ck(Ot[r.unit],r.bitWidth)}case"timestamp":{const r=t.type;return new kk(Ot[r.unit],r.timezone)}case"interval":{const r=t.type;return new Ek(Kf[r.unit])}case"duration":{const r=t.type;return new Dk(Ot[r.unit])}case"union":{const r=t.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new Ok(So[o],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=t.type;return new Mk(r.byteWidth)}case"fixedsizelist":{const r=t.type;return new Ik(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new Rk((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var mLe=ise,yLe=Hb;class Go{static fromJSON(e,n){const r=new Go(0,$i.V5,n);return r._createHeader=bLe(e,n),r}static decode(e){e=new yLe(Dn(e));const n=Cp.getRootAsMessage(e),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Go(r,i,s);return o._createHeader=vLe(n,s),o}static encode(e){const n=new mLe;let r=-1;return e.isSchema()?r=mi.encode(n,e.header()):e.isRecordBatch()?r=Ll.encode(n,e.header()):e.isDictionaryBatch()&&(r=Qf.encode(n,e.header())),Cp.startMessage(n),Cp.addVersion(n,$i.V5),Cp.addHeader(n,r),Cp.addHeaderType(n,e.headerType),Cp.addBodyLength(n,BigInt(e.bodyLength)),Cp.finishMessageBuffer(n,Cp.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof mi)return new Go(0,$i.V5,Gn.Schema,e);if(e instanceof Ll)return new Go(n,$i.V5,Gn.RecordBatch,e);if(e instanceof Qf)return new Go(n,$i.V5,Gn.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Gn.Schema}isRecordBatch(){return this.headerType===Gn.RecordBatch}isDictionaryBatch(){return this.headerType===Gn.DictionaryBatch}constructor(e,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Ir(e)}}class Ll{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,n,r){this._nodes=n,this._buffers=r,this._length=Ir(e)}}class Qf{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,n,r=!1){this._data=e,this._isDelta=r,this._id=Ir(n)}}class kf{constructor(e,n){this.offset=Ir(e),this.length=Ir(n)}}class k0{constructor(e,n){this.length=Ir(e),this.nullCount=Ir(n)}}function bLe(t,e){return(()=>{switch(e){case Gn.Schema:return mi.fromJSON(t);case Gn.RecordBatch:return Ll.fromJSON(t);case Gn.DictionaryBatch:return Qf.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Gn[e]}, type: ${e} }`)})}function vLe(t,e){return(()=>{switch(e){case Gn.Schema:return mi.decode(t.header(new rf),new Map,t.version());case Gn.RecordBatch:return Ll.decode(t.header(new Qh),t.version());case Gn.DictionaryBatch:return Qf.decode(t.header(new xy),t.version())}throw new Error(`Unrecognized Message type: { name: ${Gn[e]}, type: ${e} }`)})}ei.encode=OLe;ei.decode=DLe;ei.fromJSON=gLe;mi.encode=TLe;mi.decode=xLe;mi.fromJSON=fLe;Ll.encode=MLe;Ll.decode=wLe;Ll.fromJSON=Uoe;Qf.encode=ILe;Qf.decode=_Le;Qf.fromJSON=hLe;k0.encode=RLe;k0.decode=ALe;kf.encode=FLe;kf.decode=SLe;function xLe(t,e=new Map,n=$i.V5){const r=ELe(t,e);return new mi(r,aC(t),e,n)}function wLe(t,e=$i.V5){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new Ll(t.length(),CLe(t),kLe(t,e))}function _Le(t,e=$i.V5){return new Qf(Ll.decode(t.data(),e),t.id(),t.isDelta())}function SLe(t){return new kf(t.offset(),t.length())}function ALe(t){return new k0(t.length(),t.nullCount())}function CLe(t){const e=[];for(let n,r=-1,i=-1,s=t.nodesLength();++r<s;)(n=t.nodes(r))&&(e[++i]=k0.decode(n));return e}function kLe(t,e){const n=[];for(let r,i=-1,s=-1,o=t.buffersLength();++i<o;)(r=t.buffers(i))&&(e<$i.V4&&(r.bb_pos+=8*(i+1)),n[++s]=kf.decode(r));return n}function ELe(t,e){const n=[];for(let r,i=-1,s=-1,o=t.fieldsLength();++i<o;)(r=t.fields(i))&&(n[++s]=ei.decode(r,e));return n}function MG(t,e){const n=[];for(let r,i=-1,s=-1,o=t.childrenLength();++i<o;)(r=t.children(i))&&(n[++s]=ei.decode(r,e));return n}function DLe(t,e){let n,r,i,s,o,a;return!e||!(a=t.dictionary())?(i=RG(t,MG(t,e)),r=new ei(t.name(),i,t.nullable(),aC(t))):e.has(n=Ir(a.id()))?(s=(s=a.indexType())?IG(s):new p_,o=new Yb(e.get(n),s,n,a.isOrdered()),r=new ei(t.name(),o,t.nullable(),aC(t))):(s=(s=a.indexType())?IG(s):new p_,e.set(n,i=RG(t,MG(t,e))),o=new Yb(i,s,n,a.isOrdered()),r=new ei(t.name(),o,t.nullable(),aC(t))),r||null}function aC(t){const e=new Map;if(t)for(let n,r,i=-1,s=Math.trunc(t.customMetadataLength());++i<s;)(n=t.customMetadata(i))&&(r=n.key())!=null&&e.set(r,n.value());return e}function IG(t){return new qm(t.isSigned(),t.bitWidth())}function RG(t,e){const n=t.typeType();switch(n){case zr.NONE:return new _0;case zr.Null:return new _0;case zr.Binary:return new bk;case zr.LargeBinary:return new vk;case zr.Utf8:return new xk;case zr.LargeUtf8:return new wk;case zr.Bool:return new _k;case zr.List:return new Tk((e||[])[0]);case zr.Struct_:return new Ho(e||[])}switch(n){case zr.Int:{const r=t.type(new yl);return new qm(r.isSigned(),r.bitWidth())}case zr.FloatingPoint:{const r=t.type(new pf);return new yk(r.precision())}case zr.Decimal:{const r=t.type(new _y);return new Sk(r.scale(),r.precision(),r.bitWidth())}case zr.Date:{const r=t.type(new Z6);return new Ak(r.unit())}case zr.Time:{const r=t.type(new cu);return new Ck(r.unit(),r.bitWidth())}case zr.Timestamp:{const r=t.type(new fu);return new kk(r.unit(),r.timezone())}case zr.Interval:{const r=t.type(new gf);return new Ek(r.unit())}case zr.Duration:{const r=t.type(new eC);return new Dk(r.unit())}case zr.Union:{const r=t.type(new ka);return new Ok(r.mode(),r.typeIdsArray()||[],e||[])}case zr.FixedSizeBinary:{const r=t.type(new tC);return new Mk(r.byteWidth())}case zr.FixedSizeList:{const r=t.type(new nC);return new Ik(r.listSize(),(e||[])[0])}case zr.Map:{const r=t.type(new rC);return new Rk((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${zr[n]}" (${n})`)}function TLe(t,e){const n=e.fields.map(s=>ei.encode(t,s));rf.startFieldsVector(t,n.length);const r=rf.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?rf.createCustomMetadataVector(t,[...e.metadata].map(([s,o])=>{const a=t.createString(`${s}`),l=t.createString(`${o}`);return us.startKeyValue(t),us.addKey(t,a),us.addValue(t,l),us.endKeyValue(t)})):-1;return rf.startSchema(t),rf.addFields(t,r),rf.addEndianness(t,NLe?Gb.Little:Gb.Big),i!==-1&&rf.addCustomMetadata(t,i),rf.endSchema(t)}function OLe(t,e){let n=-1,r=-1,i=-1;const s=e.type;let o=e.typeId;lt.isDictionary(s)?(o=s.dictionary.typeId,i=Q7.visit(s,t),r=Q7.visit(s.dictionary,t)):r=Q7.visit(s,t);const a=(s.children||[]).map(c=>ei.encode(t,c)),l=eu.createChildrenVector(t,a),u=e.metadata&&e.metadata.size>0?eu.createCustomMetadataVector(t,[...e.metadata].map(([c,f])=>{const h=t.createString(`${c}`),d=t.createString(`${f}`);return us.startKeyValue(t),us.addKey(t,h),us.addValue(t,d),us.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),eu.startField(t),eu.addType(t,r),eu.addTypeType(t,o),eu.addChildren(t,l),eu.addNullable(t,!!e.nullable),n!==-1&&eu.addName(t,n),i!==-1&&eu.addDictionary(t,i),u!==-1&&eu.addCustomMetadata(t,u),eu.endField(t)}function MLe(t,e){const n=e.nodes||[],r=e.buffers||[];Qh.startNodesVector(t,n.length);for(const o of n.slice().reverse())k0.encode(t,o);const i=t.endVector();Qh.startBuffersVector(t,r.length);for(const o of r.slice().reverse())kf.encode(t,o);const s=t.endVector();return Qh.startRecordBatch(t),Qh.addLength(t,BigInt(e.length)),Qh.addNodes(t,i),Qh.addBuffers(t,s),Qh.endRecordBatch(t)}function ILe(t,e){const n=Ll.encode(t,e.data);return xy.startDictionaryBatch(t),xy.addId(t,BigInt(e.id)),xy.addIsDelta(t,e.isDelta),xy.addData(t,n),xy.endDictionaryBatch(t)}function RLe(t,e){return ase.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))}function FLe(t,e){return ose.createBuffer(t,BigInt(e.offset),BigInt(e.length))}const NLe=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),qB=t=>`Expected ${Gn[t]} Message in stream, but was null or length 0.`,VB=t=>`Header pointer of flatbuffer-encoded ${Gn[t]} Message is null or length 0.`,qoe=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Voe=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Woe{constructor(e){this.source=e instanceof $k?e:new $k(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?xi:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(qB(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Dn(this.source.read(e));if(n.byteLength<e)throw new Error(Voe(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=Gn.Schema,r=this.readMessage(n),i=r?.header();if(e&&!i)throw new Error(VB(n));return i}readMetadataLength(){const e=this.source.read(H8),n=e&&new Hb(e),r=n?.readInt32(0)||0;return{done:r===0,value:r}}readMetadata(e){const n=this.source.read(e);if(!n)return xi;if(n.byteLength<e)throw new Error(qoe(e,n.byteLength));return{done:!1,value:Go.decode(n)}}}class LLe{constructor(e,n){this.source=e instanceof Xb?e:Jie(e)?new Uk(e,n):new Xb(e)}[Symbol.asyncIterator](){return this}next(){return qt(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?xi:e})}throw(e){return qt(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return qt(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return qt(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(qB(e));return n.value})}readMessageBody(e){return qt(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Dn(yield this.source.read(e));if(n.byteLength<e)throw new Error(Voe(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return qt(this,arguments,void 0,function*(e=!1){const n=Gn.Schema,r=yield this.readMessage(n),i=r?.header();if(e&&!i)throw new Error(VB(n));return i})}readMetadataLength(){return qt(this,void 0,void 0,function*(){const e=yield this.source.read(H8),n=e&&new Hb(e),r=n?.readInt32(0)||0;return{done:r===0,value:r}})}readMetadata(e){return qt(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return xi;if(n.byteLength<e)throw new Error(qoe(e,n.byteLength));return{done:!1,value:Go.decode(n)}})}}class PLe extends Woe{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof CG?e:new CG(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Go.fromJSON(e.schema,Gn.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Go.fromJSON(n,Gn.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Go.fromJSON(n,Gn.RecordBatch)}}return this._body=[],xi}readMessageBody(e){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(qB(e));return n.value}readSchema(){const e=Gn.Schema,n=this.readMessage(e),r=n?.header();if(!n||!r)throw new Error(VB(e));return r}}const H8=4,RR="ARROW1",m_=new Uint8Array(RR.length);for(let t=0;t<RR.length;t+=1)m_[t]=RR.codePointAt(t);function WB(t,e=0){for(let n=-1,r=m_.length;++n<r;)if(m_[n]!==t[e+n])return!1;return!0}const Z3=m_.length,Hoe=Z3+H8,BLe=Z3*2+H8;class Au extends PB{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return jm(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ou.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ou.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Au?e:SR(e)?jLe(e):Jie(e)?WLe(e):jm(e)?qt(this,void 0,void 0,function*(){return yield Au.from(yield e)}):Zie(e)||kB(e)||ese(e)||t2(e)?VLe(new Xb(e)):qLe(new $k(e))}static readAll(e){return e instanceof Au?e.isSync()?FG(e):NG(e):SR(e)||ArrayBuffer.isView(e)||X3(e)||Qie(e)?FG(e):NG(e)}}class zk extends Au{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Cf(this,arguments,function*(){yield on(yield*J6(ym(this[Symbol.iterator]())))})}}class jk extends Au{constructor(e){super(e),this._impl=e}readAll(){return qt(this,void 0,void 0,function*(){var e,n,r,i;const s=new Array;try{for(var o=!0,a=ym(this),l;l=yield a.next(),e=l.done,!e;o=!0){i=l.value,o=!1;const u=i;s.push(u)}}catch(u){n={error:u}}finally{try{!o&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Goe extends zk{constructor(e){super(e),this._impl=e}}class $Le extends jk{constructor(e){super(e),this._impl=e}}class Yoe{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),i=yn({type:new Ho(this.schema.fields),length:e.length,children:r});return new Ea(this.schema,i)}_loadDictionaryBatch(e,n){const{id:r,isDelta:i}=e,{dictionaries:s,schema:o}=this,a=s.get(r),l=o.dictionaries.get(r),u=this._loadVectors(e.data,n,[l]);return(a&&i?a.concat(new vi(u)):new vi(u)).memoize()}_loadVectors(e,n,r){return new Loe(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class qk extends Yoe{constructor(e,n){super(n),this._reader=SR(e)?new PLe(this._handle=e):new Woe(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Koe(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):xi}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):xi}next(){if(this.closed)return xi;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new jB(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Vk extends Yoe{constructor(e,n){super(n),this._reader=new LLe(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return qt(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return qt(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Koe(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return qt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):xi})}return(e){return qt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):xi})}next(){return qt(this,void 0,void 0,function*(){if(this.closed)return xi;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new jB(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return qt(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class Xoe extends qk{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,n){super(e instanceof kG?e:new kG(e),n)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Gn.RecordBatch);if(i?.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Gn.DictionaryBatch);if(i?.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-Hoe,r=e.readInt32(n),i=e.readAt(n-r,r);return g_.decode(i)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class ULe extends Vk{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(e instanceof Uk?e:new Uk(e,r),i)}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return qt(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){return qt(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Gn.RecordBatch);if(i?.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){return qt(this,void 0,void 0,function*(){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Gn.DictionaryBatch);if(i?.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return qt(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-Hoe,r=yield e.readInt32(n),i=yield e.readAt(n-r,r);return g_.decode(i)})}_readNextMessageAndValidate(e){return qt(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class zLe extends qk{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new eLe(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function Koe(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*FG(t){const e=Au.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function NG(t){return Cf(this,arguments,function*(){const n=yield on(Au.from(t));try{if(!(yield on(n.open({autoDestroy:!1}))).closed)do yield yield on(n);while(!(yield on(n.reset().open())).closed)}finally{yield on(n.cancel())}})}function jLe(t){return new zk(new zLe(t))}function qLe(t){const e=t.peek(Z3+7&-8);return e&&e.byteLength>=4?WB(e)?new Goe(new Xoe(t.read())):new zk(new qk(t)):new zk(new qk((function*(){})()))}function VLe(t){return qt(this,void 0,void 0,function*(){const e=yield t.peek(Z3+7&-8);return e&&e.byteLength>=4?WB(e)?new Goe(new Xoe(yield t.read())):new jk(new Vk(t)):new jk(new Vk((function(){return Cf(this,arguments,function*(){})})()))})}function WLe(t){return qt(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Uk(t,e);return e>=BLe&&WB(yield n.readAt(0,Z3+7&-8))?new $Le(new ULe(n)):new jk(new Vk(n))})}class Ai extends mn{static assemble(...e){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Ea?s.data.children:s.data),r=new Ai;return r.visitMany(n(e)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof vi)return this.visitMany(e.data),this;const{type:n}=e;if(!lt.isDictionary(n)){const{length:r}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(lt.isUnion(n))this.nodes.push(new k0(r,0));else{const{nullCount:i}=e;lt.isNull(n)||cc.call(this,i<=0?new Uint8Array(0):Fk(e.offset,r,e.nullBitmap)),this.nodes.push(new k0(r,i))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function cc(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new kf(this._byteLength,e)),this._byteLength+=e,this}function HLe(t){var e;const{type:n,length:r,typeIds:i,valueOffsets:s}=t;if(cc.call(this,i),n.mode===So.Sparse)return FR.call(this,t);if(n.mode===So.Dense){if(t.offset<=0)return cc.call(this,s),FR.call(this,t);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let u,c,f=-1;++f<r;)(u=i[f])!==void 0&&((c=a[u])===void 0&&(c=a[u]=s[f]),o[f]=s[f]-c,l[u]=((e=l[u])!==null&&e!==void 0?e:0)+1);cc.call(this,o),this.visitMany(t.children.map((u,c)=>{const f=n.typeIds[c],h=a[f],d=l[f];return u.slice(h,Math.min(r,d))}))}}return this}function GLe(t){let e;return t.nullCount>=t.length?cc.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?cc.call(this,Fk(t.offset,t.length,e)):cc.call(this,Nk(t.values))}function Qd(t){return cc.call(this,t.values.subarray(0,t.length*t.stride))}function G8(t){const{length:e,values:n,valueOffsets:r}=t,i=Ir(r[0]),s=Ir(r[e]),o=Math.min(s-i,n.byteLength-i);return cc.call(this,nse(-i,e+1,r)),cc.call(this,n.subarray(i,i+o)),this}function HB(t){const{length:e,valueOffsets:n}=t;if(n){const{[0]:r,[e]:i}=n;return cc.call(this,nse(-r,e+1,n)),this.visit(t.children[0].slice(r,i-r))}return this.visit(t.children[0])}function FR(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}Ai.prototype.visitBool=GLe;Ai.prototype.visitInt=Qd;Ai.prototype.visitFloat=Qd;Ai.prototype.visitUtf8=G8;Ai.prototype.visitLargeUtf8=G8;Ai.prototype.visitBinary=G8;Ai.prototype.visitLargeBinary=G8;Ai.prototype.visitFixedSizeBinary=Qd;Ai.prototype.visitDate=Qd;Ai.prototype.visitTimestamp=Qd;Ai.prototype.visitTime=Qd;Ai.prototype.visitDecimal=Qd;Ai.prototype.visitList=HB;Ai.prototype.visitStruct=FR;Ai.prototype.visitUnion=HLe;Ai.prototype.visitInterval=Qd;Ai.prototype.visitDuration=Qd;Ai.prototype.visitFixedSizeList=HB;Ai.prototype.visitMap=HB;class Qoe extends PB{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new sC,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,ja(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return jm(e)?e.then(n=>this.writeAll(n)):t2(e)?KB(this,e):XB(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof sC?this._sink=e:(this._sink=new sC,e&&AFe(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&CFe(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!IR(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof C0&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof Ea&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!IR(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof Ea?e instanceof jB||this._writeRecordBatch(e):e instanceof C0?this.writeAll(e.batches):X3(e)&&this.writeAll(e)}_writeMessage(e,n=8){const r=n-1,i=Go.encode(e),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return e.headerType===Gn.RecordBatch?this._recordBatchBlocks.push(new S0(a,e.bodyLength,this._position)):e.headerType===Gn.DictionaryBatch&&this._dictionaryBlocks.push(new S0(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(e){if(this._started){const n=Dn(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(Go.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(m_)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ai.assemble(e),o=new Ll(e.numRows,r,i),a=Go.from(o,n);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,r=!1){const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ai.assemble(new vi([e])),l=new Ll(e.length,s,o),u=new Qf(l,n,r),c=Go.from(u,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(e){let n,r,i;for(let s=-1,o=e.length;++s<o;)(n=e[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(e){var n,r;for(const[i,s]of e.dictionaries){const o=(n=s?.data)!==null&&n!==void 0?n:[],a=this._seenDictionaries.get(i),l=(r=this._dictionaryDeltaOffsets.get(i))!==null&&r!==void 0?r:0;if(!a||a.data[0]!==o[0])for(const[u,c]of o.entries())this._writeDictionaryBatch(c,i,u>0);else if(l<o.length)for(const u of o.slice(l))this._writeDictionaryBatch(u,i,!0);this._seenDictionaries.set(i,s),this._dictionaryDeltaOffsets.set(i,o.length)}return this}}class GB extends Qoe{static writeAll(e,n){const r=new GB(n);return jm(e)?e.then(i=>r.writeAll(i)):t2(e)?KB(r,e):XB(r,e)}}class YB extends Qoe{static writeAll(e){const n=new YB;return jm(e)?e.then(r=>n.writeAll(r)):t2(e)?KB(n,e):XB(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,n,r=!1){if(!r&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,n,r)}_writeFooter(e){const n=g_.encode(new g_(e,$i.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function XB(t,e){let n=e;e instanceof C0&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function KB(t,e){return qt(this,void 0,void 0,function*(){var n,r,i,s,o,a,l;try{for(n=!0,r=ym(e);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const u=l;t.write(u)}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return t.finish()})}function YLe(t,e="stream"){return(e==="stream"?GB:YB).writeAll(t).toUint8Array(!0)}var XLe=Object.create,Joe=Object.defineProperty,KLe=Object.getOwnPropertyDescriptor,QLe=Object.getOwnPropertyNames,JLe=Object.getPrototypeOf,ZLe=Object.prototype.hasOwnProperty,ePe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),tPe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of QLe(e))!ZLe.call(t,i)&&i!==n&&Joe(t,i,{get:()=>e[i],enumerable:!(r=KLe(e,i))||r.enumerable});return t},nPe=(t,e,n)=>(n=t!=null?XLe(JLe(t)):{},tPe(!t||!t.__esModule?Joe(n,"default",{value:t,enumerable:!0}):n,t)),rPe=ePe((t,e)=>{e.exports=Worker}),iPe=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(iPe||{}),sPe=(t=>(t[t.IDENTIFIER=0]="IDENTIFIER",t[t.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",t[t.STRING_CONSTANT=2]="STRING_CONSTANT",t[t.OPERATOR=3]="OPERATOR",t[t.KEYWORD=4]="KEYWORD",t[t.COMMENT=5]="COMMENT",t))(sPe||{}),oPe=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(oPe||{}),aPe=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(aPe||{}),lPe=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(lPe||{}),uPe=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(uPe||{}),Zoe=class{log(e){}},eae=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},cPe=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",t[t.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",t))(cPe||{}),fPe=class{constructor(e,n){this._bindings=e,this._conn=n}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let n=await this._bindings.runQuery(this._conn,e),r=Au.from(n);return console.assert(r.isSync(),"Reader is not sync"),console.assert(r.isFile(),"Reader is not file"),new C0(r)}async send(e,n=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let r=await this._bindings.startPendingQuery(this._conn,e,n);for(;r==null;)r=await this._bindings.pollPendingQuery(this._conn);let i=new tae(this._bindings,this._conn,r),s=await Au.from(i);return console.assert(s.isAsync()),console.assert(s.isStream()),s}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let n=await this._bindings.createPrepared(this._conn,e);return new hPe(this._bindings,this._conn,n)}async insertArrowTable(e,n){let r=YLe(e,"stream");await this.insertArrowFromIPCStream(r,n)}async insertArrowFromIPCStream(e,n){await this._bindings.insertArrowFromIPCStream(this._conn,e,n)}async insertCSVFromPath(e,n){await this._bindings.insertCSVFromPath(this._conn,e,n)}async insertJSONFromPath(e,n){await this._bindings.insertJSONFromPath(this._conn,e,n)}},tae=class{constructor(e,n,r){this.db=e,this.conn=n,this.header=r,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(this._inFlight!=null&&(e=await this._inFlight,this._inFlight=null);e==null;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},hPe=class{constructor(e,n,r){this.bindings=e,this.connectionId=n,this.statementId=r}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let n=await this.bindings.runPrepared(this.connectionId,this.statementId,e),r=Au.from(n);return console.assert(r.isSync()),console.assert(r.isFile()),new C0(r)}async send(...e){let n=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),r=new tae(this.bindings,this.connectionId,n),i=await Au.from(r);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},dPe=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(dPe||{}),pPe=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.PROGRESS_UPDATE="PROGRESS_UPDATE",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(pPe||{}),Rn=class{constructor(e,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=n,this.promise=new Promise((r,i)=>{this.promiseResolver=r,this.promiseRejecter=i})}};function lC(t){switch(t.typeId){case ee.Binary:return{sqlType:"binary"};case ee.Bool:return{sqlType:"bool"};case ee.Date:return{sqlType:"date"};case ee.DateDay:return{sqlType:"date32[d]"};case ee.DateMillisecond:return{sqlType:"date64[ms]"};case ee.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case ee.Float:return{sqlType:"float"};case ee.Float16:return{sqlType:"float16"};case ee.Float32:return{sqlType:"float32"};case ee.Float64:return{sqlType:"float64"};case ee.Int:return{sqlType:"int32"};case ee.Int16:return{sqlType:"int16"};case ee.Int32:return{sqlType:"int32"};case ee.Int64:return{sqlType:"int64"};case ee.Uint16:return{sqlType:"uint16"};case ee.Uint32:return{sqlType:"uint32"};case ee.Uint64:return{sqlType:"uint64"};case ee.Uint8:return{sqlType:"uint8"};case ee.IntervalDayTime:return{sqlType:"interval[dt]"};case ee.IntervalYearMonth:return{sqlType:"interval[m]"};case ee.List:return{sqlType:"list",valueType:lC(t.valueType)};case ee.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case ee.Null:return{sqlType:"null"};case ee.Utf8:return{sqlType:"utf8"};case ee.Struct:return{sqlType:"struct",fields:t.children.map(e=>NR(e.name,e.type))};case ee.Map:{let e=t;return{sqlType:"map",keyType:lC(e.keyType),valueType:lC(e.valueType)}}case ee.Time:return{sqlType:"time[s]"};case ee.TimeMicrosecond:return{sqlType:"time[us]"};case ee.TimeMillisecond:return{sqlType:"time[ms]"};case ee.TimeNanosecond:return{sqlType:"time[ns]"};case ee.TimeSecond:return{sqlType:"time[s]"};case ee.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case ee.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case ee.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case ee.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case ee.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(t.toString()))}function NR(t,e){let n=lC(e);return n.name=t,n}var gPe=new TextEncoder,nae=class{constructor(e,n=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),n!=null&&this.attach(n)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((n,r)=>{this._workerShutdownResolver=n})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,n=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let r=this._nextMessageId++;return this._pendingRequests.set(r,e),this._worker.postMessage({messageId:r,type:e.type,data:e.data},n),await e.promise}onMessage(e){var n;let r=e.data;switch(r.type){case"PROGRESS_UPDATE":{for(let s of this._onExecutionProgress)s(r.data);return}case"LOG":{this._logger.log(r.data);return}case"INSTANTIATE_PROGRESS":{for(let s of this._onInstantiationProgress)s(r.data);return}}let i=this._pendingRequests.get(r.requestId);if(!i){console.warn("unassociated response: [".concat(r.requestId,", ").concat(r.type.toString(),"]"));return}if(this._pendingRequests.delete(r.requestId),r.type=="ERROR"){let s=new Error(r.data.message);s.name=r.data.name,(n=Object.getOwnPropertyDescriptor(s,"stack"))!=null&&n.writable&&(s.stack=r.data.stack),i.promiseRejecter(s);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(r.type=="OK"){i.promiseResolver(r.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],r.type=="OK"){i.promiseResolver(r.data);return}break;case"GLOB_FILE_INFOS":if(r.type=="FILE_INFOS"){i.promiseResolver(r.data);return}break;case"GET_VERSION":if(r.type=="VERSION_STRING"){i.promiseResolver(r.data);return}break;case"GET_FEATURE_FLAGS":if(r.type=="FEATURE_FLAGS"){i.promiseResolver(r.data);return}break;case"GET_TABLE_NAMES":if(r.type=="TABLE_NAMES"){i.promiseResolver(r.data);return}break;case"TOKENIZE":if(r.type=="SCRIPT_TOKENS"){i.promiseResolver(r.data);return}break;case"COPY_FILE_TO_BUFFER":if(r.type=="FILE_BUFFER"){i.promiseResolver(r.data);return}break;case"EXPORT_FILE_STATISTICS":if(r.type=="FILE_STATISTICS"){i.promiseResolver(r.data);return}break;case"CONNECT":if(r.type=="CONNECTION_INFO"){i.promiseResolver(r.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(r.type=="QUERY_RESULT"){i.promiseResolver(r.data);return}break;case"SEND_PREPARED":if(r.type=="QUERY_RESULT_HEADER"){i.promiseResolver(r.data);return}break;case"START_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(r.data);return}break;case"POLL_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(r.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],r.type=="SUCCESS"){i.promiseResolver(r.data);return}break;case"FETCH_QUERY_RESULTS":if(r.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(r.data);return}break;case"CREATE_PREPARED":if(r.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(r.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(r.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new Rn("RESET",null);return await this.postTask(e)}async ping(){let e=new Rn("PING",null);await this.postTask(e)}async dropFile(e){let n=new Rn("DROP_FILE",e);return await this.postTask(n)}async dropFiles(){let e=new Rn("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Rn("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,n=null,r=i=>{}){this._onInstantiationProgress.push(r);let i=new Rn("INSTANTIATE",[e,n]);return await this.postTask(i)}async getVersion(){let e=new Rn("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Rn("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let n=new Rn("OPEN",e);await this.postTask(n)}async tokenize(e){let n=new Rn("TOKENIZE",e);return await this.postTask(n)}async connectInternal(){let e=new Rn("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new fPe(this,e)}async disconnect(e){let n=new Rn("DISCONNECT",e);await this.postTask(n)}async runQuery(e,n){let r=new Rn("RUN_QUERY",[e,n]);return await this.postTask(r)}async startPendingQuery(e,n,r=!1){let i=new Rn("START_PENDING_QUERY",[e,n,r]);return await this.postTask(i)}async pollPendingQuery(e){let n=new Rn("POLL_PENDING_QUERY",e);return await this.postTask(n)}async cancelPendingQuery(e){let n=new Rn("CANCEL_PENDING_QUERY",e);return await this.postTask(n)}async fetchQueryResults(e){let n=new Rn("FETCH_QUERY_RESULTS",e);return await this.postTask(n)}async getTableNames(e,n){let r=new Rn("GET_TABLE_NAMES",[e,n]);return await this.postTask(r)}async createPrepared(e,n){let r=new Rn("CREATE_PREPARED",[e,n]);return await this.postTask(r)}async closePrepared(e,n){let r=new Rn("CLOSE_PREPARED",[e,n]);await this.postTask(r)}async runPrepared(e,n,r){let i=new Rn("RUN_PREPARED",[e,n,r]);return await this.postTask(i)}async sendPrepared(e,n,r){let i=new Rn("SEND_PREPARED",[e,n,r]);return await this.postTask(i)}async globFiles(e){let n=new Rn("GLOB_FILE_INFOS",e);return await this.postTask(n)}async registerFileText(e,n){let r=gPe.encode(n);await this.registerFileBuffer(e,r)}async registerFileURL(e,n,r,i){n===void 0&&(n=e);let s=new Rn("REGISTER_FILE_URL",[e,n,r,i]);await this.postTask(s)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,n){let r=new Rn("REGISTER_FILE_BUFFER",[e,n]);await this.postTask(r,[n.buffer])}async registerFileHandle(e,n,r,i){let s=new Rn("REGISTER_FILE_HANDLE",[e,n,r,i]);await this.postTask(s,[])}async registerOPFSFileName(e){let n=new Rn("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(n,[])}async collectFileStatistics(e,n){let r=new Rn("COLLECT_FILE_STATISTICS",[e,n]);await this.postTask(r,[])}async exportFileStatistics(e){let n=new Rn("EXPORT_FILE_STATISTICS",e);return await this.postTask(n,[])}async copyFileToBuffer(e){let n=new Rn("COPY_FILE_TO_BUFFER",e);return await this.postTask(n)}async copyFileToPath(e,n){let r=new Rn("COPY_FILE_TO_PATH",[e,n]);await this.postTask(r)}async insertArrowFromIPCStream(e,n,r){if(n.length==0)return;let i=new Rn("INSERT_ARROW_FROM_IPC_STREAM",[e,n,r]);await this.postTask(i,[n.buffer])}async insertCSVFromPath(e,n,r){if(r.columns!==void 0){let s=[];for(let o in r.columns){let a=r.columns[o];s.push(NR(o,a))}r.columnsFlat=s,delete r.columns}let i=new Rn("IMPORT_CSV_FROM_PATH",[e,n,r]);await this.postTask(i)}async insertJSONFromPath(e,n,r){if(r.columns!==void 0){let s=[];for(let o in r.columns){let a=r.columns[o];s.push(NR(o,a))}r.columnsFlat=s,delete r.columns}let i=new Rn("IMPORT_JSON_FROM_PATH",[e,n,r]);await this.postTask(i)}};function mPe(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}mPe();var yPe=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(yPe||{}),bPe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),vPe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),xPe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),wPe=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),QB={name:"@duckdb/duckdb-wasm",version:"1.30.0"},_Pe=QB.name,SPe=QB.version,JB=QB.version.split(".");JB[0];JB[1];JB[2];var APe=()=>typeof navigator>"u";function CPe(){let t="https://cdn.jsdelivr.net/npm/".concat(_Pe,"@").concat(SPe,"/dist/");return{mvp:{mainModule:"".concat(t,"duckdb-mvp.wasm"),mainWorker:"".concat(t,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(t,"duckdb-eh.wasm"),mainWorker:"".concat(t,"duckdb-browser-eh.worker.js")}}}var J7=null,Z7=null,e9=null,t9=null,n9=null;async function kPe(){return J7==null&&(J7=typeof BigInt64Array<"u"),Z7==null&&(Z7=await vPe()),e9==null&&(e9=await wPe()),t9==null&&(t9=await xPe()),n9==null&&(n9=await bPe()),{bigInt64Array:J7,crossOriginIsolated:APe()||globalThis.crossOriginIsolated||!1,wasmExceptions:Z7,wasmSIMD:t9,wasmThreads:e9,wasmBulkMemory:n9}}async function rae(t){let e=await kPe();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}nPe(rPe());function EPe(t={}){return new DPe(t)}class DPe{_ipc;_options;_db;_con;_config;_loadPromise;constructor(e={}){const{ipc:n,duckdb:r,connection:i,config:s,...o}=e;this._ipc=n,this._options=o,this._db=r,this._con=i,this._config=s}async getDuckDB(){return this._db||await LG(this),this._db}async getConnection(){return this._con||await LG(this),this._con}async query(e){const{type:n,sql:r}=e,i=await this.getConnection(),s=await TPe(i,r);return n==="exec"?void 0:n==="arrow"?lk(s,this._ipc):lk(s).toArray()}}function TPe(t,e){return new Promise((n,r)=>{t.useUnsafe(async(i,s)=>{try{const o=await i.runQuery(s,e);n(o)}catch(o){r(o)}})})}function LG(t){return t._loadPromise||(t._loadPromise=(t._db?Promise.resolve(t._db):OPe(t._options).then(e=>t._db=e)).then(e=>t._config!=null?e.open(t._config).then(()=>e):e).then(e=>e.connect()).then(e=>t._con=e)),t._loadPromise}async function OPe({log:t=!1}={}){const e=CPe(),n=await rae(e),r=URL.createObjectURL(new Blob([`importScripts("${n.mainWorker}");`],{type:"text/javascript"})),i=new Worker(r),s=t?new eae:new Zoe,o=new nae(s,i);return await o.instantiate(n.mainModule,n.pthreadWorker),URL.revokeObjectURL(r),o}function Wk(t,e,{source:n,clients:r=z3(n)?new Set([n]):void 0}){const i=e!==void 0?w0(t,[Ze(e)]):null;return{meta:{type:"point"},source:n,clients:r,value:e,predicate:i}}function Y8(t,e,{source:n,clients:r=z3(n)?new Set([n]):void 0}){let i=null;if(e?.length){const s=e.length&&t.length===1?[w0(t[0],e.map(o=>Ze(o[0])))]:e.map(o=>cs(o.map((a,l)=>vB(t[l],Ze(a)))));i=e.length===0?Ze(!1):s.length>1?lo(s):s[0]}return{meta:{type:"point"},source:n,clients:r,value:e,predicate:i}}function ZB(t,e,{source:n,clients:r=z3(n)?new Set([n]):void 0,bin:i,scale:s,pixelSize:o=1}){const a=e!=null?Xo(t,e):null;return{meta:{type:"interval",scales:s&&[s],bin:i,pixelSize:o},source:n,clients:r,value:e,predicate:a}}function MPe(t,e,{source:n,clients:r=z3(n)?new Set([n]):void 0,bin:i,scales:s=[],pixelSize:o=1}){const a=e!=null?cs(t.map((u,c)=>Xo(u,e[c]))):null;return{meta:{type:"interval",scales:s,bin:i,pixelSize:o},source:n,clients:r,value:e,predicate:a}}const IPe=t=>t,RPe={contains:LIe,prefix:PIe,suffix:BIe,regexp:NIe};function FPe(t,e,{source:n,clients:r=void 0,method:i="contains",caseSensitive:s=!1}){const o=RPe[i],a=s?IPe:$Ie,l=e?o(a(t),a(Ze(e))):null;return{meta:{type:"match",method:i},source:n,clients:r,value:e,predicate:l}}function NPe(t,e,{source:n,clients:r=z3(n)?new Set([n]):void 0,listMatch:i="any"}){const o=e!==void 0?(i==="all"?xIe:wIe)(t,Ze(e)):null;return{source:n,clients:r,value:e,predicate:o}}function LPe(t){return typeof t?.getChild=="function"}class PPe{_set;_done;_promise;constructor(){this._set=new Set,this._done=()=>{},this._promise=new Promise(e=>this._done=e)}pending(e){this._set.add(e)}ready(e){return this._set.delete(e),this._set.size===0}resolve(){this._promise=new Promise(e=>{this._done(),this._done=e})}get promise(){return this._promise}}function Vm(t){if(LPe(t))return BPe(t);if(Array.isArray(t))return $Pe(t);throw new Error("Unrecognized data format.")}function BPe(t){const{numRows:e}=t;return{numRows:e,columns:t.toColumns()}}function $Pe(t){const e=t.length;if(typeof t[0]=="object"){const n=e?Object.keys(t[0]):[],r={};return n.length>0&&n.forEach(i=>{r[i]=t.map(s=>s[i])}),{numRows:e,columns:r}}else return{numRows:e,values:t}}function iae(t){switch(t){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIMESTAMP WITH TIME ZONE":case"TIME":case"TIMESTAMP_NS":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":case"JSON":return"string";case"ARRAY":case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":case"GEOMETRY":return"object";default:if(t.startsWith("ENUM"))return"string";if(t.startsWith("DECIMAL"))return"number";if(t.startsWith("STRUCT")||t.startsWith("MAP"))return"object";if(t.endsWith("]"))return"array";throw new Error(`Unsupported type: ${t}`)}}const UPe="count",zPe="nulls",jPe="max",qPe="min",VPe="distinct",WPe={[UPe]:ur,[VPe]:t=>ur(t).distinct(),[jPe]:Eu,[qPe]:pc,[zPe]:t=>ur().where(uc(t))};function HPe({table:t,column:e,stats:n}){return Ue.from(t).select(Array.from(n,r=>({[r]:WPe[r](e)})))}async function e$(t,e){return e.length===1&&e[0].column==="*"?YPe(t,e[0].table):(await Promise.all(e.map(n=>GPe(t,n)))).filter(n=>n!==void 0)}async function GPe(t,{table:e,column:n,stats:r}){const i=Ue.from({source:e}).select({column:n}).groupby(Nl(n)&&X0(n)?mt`ALL`:[]),[s]=Array.from(await t.query(Ue.describe(i))),o={table:e,column:`${n}`,sqlType:s.column_type,type:iae(s.column_type),nullable:s.null==="YES"};if(!r?.length)return o;const[a]=await t.query(HPe({table:e,column:n,stats:r}),{persist:!0});return Object.assign(o,a)}async function YPe(t,e){return Array.from(await t.query(`DESC ${vie(e)}`)).map(r=>({table:e,column:r.column_name,sqlType:r.column_type,type:iae(r.column_type),nullable:r.null==="YES"}))}async function XPe(t,e="gzip"){let n=new CompressionStream(e),i=new Blob([t]).stream().pipeThrough(n),o=await(await new Response(i).blob()).arrayBuffer();return new Uint8Array(o)}async function KPe(t,e="gzip"){let n=new DecompressionStream(e),i=new Blob([t]).stream().pipeThrough(n),o=await(await new Response(i).blob()).arrayBuffer();return new Uint8Array(o)}function QPe(t){let n="";for(let r=0;r<t.length;r+=32768)n+=String.fromCharCode(...t.subarray(r,r+32768));return btoa(n)}function JPe(t){let e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function sae(t,e=1e3){let n;return(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function t$(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object"||Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(e.hasOwnProperty(n)){if(!t$(t[n],e[n]))return!1}else return!1;return!0}function PG(t){let e;return(...n)=>{let r=t(...n);return e!==void 0&&t$(r,e)?e:(e=r,r)}}function kp(t,e,...n){try{if(n.every(r=>r!==void 0)){const r=t[e];if(typeof r=="function")return r(...n)}}catch(r){console.error(r)}}const ZPe=2;function bA(t){return{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,modifiers:{shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey,meta:t.metaKey}}}function Hi(t,e){let n=e,r,i=!1,s=!1;const o=u=>{let c=bA(u);u.preventDefault(),u.stopPropagation(),eBe(),i=!0,r&&(kp(r,"up"),r=void 0);let f=d=>{let p=bA(d);n.drag&&!r?Math.hypot(c.clientX-p.clientX,c.clientY-p.clientY)>ZPe&&(r=kp(n,"drag",c),r&&kp(r,"move",p)):r&&kp(r,"move",p)},h=d=>{let p=bA(d);i=!1,window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",h),r?(kp(r,"up",d),r=void 0):n.click&&kp(n,"click",p)};window.addEventListener("mousemove",f,{passive:!0}),window.addEventListener("mouseup",h,{passive:!0})},a=u=>{if(!i){n.hover&&(kp(n,"hover",bA(u)),s=!0);return}},l=u=>{s&&n.hover&&(kp(n,"hover",null),s=!1)};return t.addEventListener("mousedown",o,{passive:!1}),t.addEventListener("mousemove",a,{passive:!0}),t.addEventListener("mouseleave",l,{passive:!0}),{update:u=>{n=u},destroy:()=>{t.removeEventListener("mousedown",o),t.removeEventListener("mousemove",a),t.removeEventListener("mouseleave",l)}}}function eBe(){try{document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur?.()}catch{}}function n$(t,e){if(BG(t)&&BG(e)){let n;for(let r in e)if(e[r]!==t[r])if(e[r]===void 0)n===void 0&&(n={...t}),delete n[r];else{let i=n$(t[r],e[r]);i!==void 0&&(n===void 0&&(n={...t}),n[r]=i)}return n}else return t$(t,e)?void 0:e}function Qb(t,e,n,r){switch(n){case"merge":{let i=n$(t,e);return i!==void 0?r(i):void 0}case"replace":return t!==e?r(e):void 0}}function uC(t,e,n,r,i){switch(r){case"merge":{let s=n$(t,{[e]:n});return s!==void 0?i(s):void 0}case"replace":if(t[e]!==n){let s={...t};return s[e]=n,i(s)}else return}}function BG(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}var tBe=xe('<div class="bg-white dark:bg-black rounded-md flex flex-col overflow-hidden"><div class="p-2 bg-slate-100"> </div> <!></div>'),nBe=xe('<div class="w-full h-full flex flex-row flex-wrap gap-2 overflow-y-scroll"></div>');function rBe(t,e){ot(e,!0);let n=De(100),r=De(100),i=J(()=>Object.keys(e.charts)),s=J(()=>k(n)/3-10),o=300;var a=nBe();hn(a,20,()=>k(i),l=>l,(l,u)=>{var c=tBe();let f;var h=ne(c),d=ne(h,!0);Z(h);var p=pe(h,2);Bd(p,()=>e.chartView,()=>({id:u,width:k(s),height:o})),Z(c),Ne(()=>{f=Nt(c,"",f,{width:`${k(s)??""}px`}),pt(d,e.charts[u].title)}),te(l,c)}),Z(a),dc(a,"clientWidth",l=>ae(n,l)),dc(a,"clientHeight",l=>ae(r,l)),te(t,a),at()}function oae(t){const e=t-1;return e*e*e+1}function $G(t,{from:e,to:n},r={}){var{delay:i=0,duration:s=A=>Math.sqrt(A)*120,easing:o=oae}=r,a=getComputedStyle(t),l=a.transform==="none"?"":a.transform,[u,c]=a.transformOrigin.split(" ").map(parseFloat);u/=t.clientWidth,c/=t.clientHeight;var f=iBe(t),h=t.clientWidth/n.width/f,d=t.clientHeight/n.height/f,p=e.left+e.width*u,m=e.top+e.height*c,y=n.left+n.width*u,b=n.top+n.height*c,v=(p-y)*h,w=(m-b)*d,_=e.width/n.width,S=e.height/n.height;return{delay:i,duration:typeof s=="function"?s(Math.sqrt(v*v+w*w)):s,easing:o,css:(A,C)=>{var D=C*v,T=C*w,M=A+C*_,I=A+C*S;return`transform: ${l} translate(${D}px, ${T}px) scale(${M}, ${I});`}}}function iBe(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,n=1;e!==null;)n*=+getComputedStyle(e).zoom,e=e.parentElement;return n}function sBe(t){const e=t-1;return e*e*e+1}function tw(t,{delay:e=0,duration:n=400,easing:r=sBe,axis:i="y"}={}){const s=getComputedStyle(t),o=+s.opacity,a=i==="y"?"height":"width",l=parseFloat(s[a]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),f=parseFloat(s[`padding${c[0]}`]),h=parseFloat(s[`padding${c[1]}`]),d=parseFloat(s[`margin${c[0]}`]),p=parseFloat(s[`margin${c[1]}`]),m=parseFloat(s[`border${c[0]}Width`]),y=parseFloat(s[`border${c[1]}Width`]);return{delay:e,duration:n,easing:r,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*o};${a}: ${b*l}px;padding-${u[0]}: ${b*f}px;padding-${u[1]}: ${b*h}px;margin-${u[0]}: ${b*d}px;margin-${u[1]}: ${b*p}px;border-${u[0]}-width: ${b*m}px;border-${u[1]}-width: ${b*y}px;min-${a}: 0`}}var oBe=xe("<div></div>");function UG(t,e){ot(e,!0);let n=Ts(e,["$$slots","$$events","$$legacy"]);function r(s,o){s.preventDefault();let a=s.pageX,l=s.pageY,u=f=>{f.preventDefault();let h=f.pageX-a,d=f.pageY-l;o(h,d)},c=()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",c)};window.addEventListener("mousemove",u),window.addEventListener("mouseup",c)}var i=oBe();i.__mousedown=s=>{let o=e.value;r(s,(a,l)=>{let u=o+(e.axis=="x"?a:l)*e.scaler;u<e.min&&(u=n.min),u>e.max&&(u=n.max),e.onChange(u)})},Ne(()=>wr(i,1,`${e.class??""} ${e.axis=="x"?"cursor-col-resize":"cursor-row-resize"}`)),te(t,i),at()}ti(["mousedown"]);function aBe(t,e=""){let n=1,r;do r=e+n,n++;while(r in t);return r}let LR=[],aae=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?aae:LR).push(n=n+t[e])})();function lBe(t){if(t<768)return!1;for(let e=0,n=LR.length;;){let r=e+n>>1;if(t<LR[r])n=r;else if(t>=aae[r])e=r+1;else return!0;if(e==n)return!1}}function zG(t){return t>=127462&&t<=127487}const jG=8205;function uBe(t,e,n=!0,r=!0){return(n?lae:cBe)(t,e,r)}function lae(t,e,n){if(e==t.length)return e;e&&uae(t.charCodeAt(e))&&cae(t.charCodeAt(e-1))&&e--;let r=r9(t,e);for(e+=qG(r);e<t.length;){let i=r9(t,e);if(r==jG||i==jG||n&&lBe(i))e+=qG(i),r=i;else if(zG(i)){let s=0,o=e-2;for(;o>=0&&zG(r9(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function cBe(t,e,n){for(;e>0;){let r=lae(t,e-2,n);if(r<e)return r;e--}return 0}function r9(t,e){let n=t.charCodeAt(e);if(!cae(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return uae(r)?(n-55296<<10)+(r-56320)+65536:n}function uae(t){return t>=56320&&t<57344}function cae(t){return t>=55296&&t<56320}function qG(t){return t<65536?1:2}let Yn=class fae{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Jb(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),mf.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Jb(this,e,n);let r=[];return this.decompose(e,n,r,0),mf.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Tw(this),s=new Tw(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Tw(this,e)}iterRange(e,n=this.length){return new hae(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new dae(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?fae.empty:e.length<=32?new Bi(e):mf.from(Bi.split(e,[]))}};class Bi extends Yn{constructor(e,n=fBe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new hBe(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Bi(VG(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=cC(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Bi(a,o.length+s.length));else{let l=a.length>>1;r.push(new Bi(a.slice(0,l)),new Bi(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Bi))return super.replace(e,n,r);[e,n]=Jb(this,e,n);let i=cC(this.text,cC(r.text,VG(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Bi(i,s):mf.from(Bi.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=Jb(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Bi(r,i)),r=[],i=-1);return i>-1&&n.push(new Bi(r,i)),n}}class mf extends Yn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?r.push(a):a.decompose(e-o,n-o,r,u)}o=l+1}}replace(e,n,r){if([e,n]=Jb(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new mf(c,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Jb(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof mf))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new Bi(d,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function f(d){let p;if(d.lines>s&&d instanceof mf)for(let m of d.children)f(m);else d.lines>o&&(l>o||!l)?(h(),a.push(d)):d instanceof Bi&&l&&(p=c[c.length-1])instanceof Bi&&d.lines+p.lines<=32?(l+=d.lines,u+=d.length+1,c[c.length-1]=new Bi(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&h(),l+=d.lines,u+=d.length+1,c.push(d))}function h(){l!=0&&(a.push(c.length==1?c[0]:mf.from(c,u)),u=-1,l=c.length=0)}for(let d of e)f(d);return h(),a.length==1?a[0]:new mf(a,n)}}Yn.empty=new Bi([""],0);function fBe(t){let e=-1;for(let n of t)e+=n.length+1;return e}function cC(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function VG(t,e,n){return cC(t,[""],e,n)}class Tw{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Bi?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Bi?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Bi){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Bi?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class hae{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Tw(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class dae{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Yn.prototype[Symbol.iterator]=function(){return this.iter()},Tw.prototype[Symbol.iterator]=hae.prototype[Symbol.iterator]=dae.prototype[Symbol.iterator]=function(){return this});let hBe=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function Jb(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function js(t,e,n=!0,r=!0){return uBe(t,e,n,r)}function dBe(t){return t>=56320&&t<57344}function pBe(t){return t>=55296&&t<56320}function Da(t,e){let n=t.charCodeAt(e);if(!pBe(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dBe(r)?(n-55296<<10)+(r-56320)+65536:n}function r$(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function yf(t){return t<65536?1:2}const PR=/\r\n?|\n/;var $s=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})($s||($s={}));class $f{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){BR(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new $f(e)}composeDesc(e){return this.empty?e:e.empty?this:pae(this,e)}mapDesc(e,n=!1){return e.empty?this:$R(this,e,n)}mapPos(e,n=-1,r=$s.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=$s.Simple&&u>=e&&(r==$s.TrackDel&&i<e&&u>e||r==$s.TrackBefore&&i<e||r==$s.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new $f(e)}static create(e){return new $f(e)}}class as extends $f{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return BR(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return $R(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Yn.empty);r.push(o?e.slice(s,s+o):Yn.empty)}s+=o}return new as(n,r)}compose(e){return this.empty?e:e.empty?this:pae(this,e,!0)}map(e,n=!1){return e.empty?this:$R(this,e,n,!0)}iterChanges(e,n=!1){BR(this,e,n)}get desc(){return $f.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new y_(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);no(i,c,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;no(n,c,f),f>0&&jp(r,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);no(n,c,-1),no(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new as(n,r),filtered:$f.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<n&&no(i,n-o,-1);let f=new as(i,s);a=a?a.compose(f.map(a)):f,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof as){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>n)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);let p=d?typeof d=="string"?Yn.of(d.split(r||PR)):d:Yn.empty,m=p.length;if(f==h&&m==0)return;f<o&&l(),f>o&&no(i,f-o,-1),no(i,h-f,m),jp(s,i,p),o=h}}return u(e),l(!a),a}static empty(e){return new as(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Yn.empty);r[i]=Yn.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new as(n,r)}static createSet(e,n){return new as(e,n)}}function no(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function jp(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Yn.empty);t.push(n)}}function BR(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,f=Yn.empty;for(;u+=a,c+=l,l&&r&&(f=f.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,u,s,c,f),i=u,s=c}}}function $R(t,e,n,r=!1){let i=[],s=r?[]:null,o=new y_(t),a=new y_(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);no(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(no(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(no(i,0,o.ins),s&&jp(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let f=Math.min(c,a.len);u+=f,c-=f,a.forward(f)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;no(i,u,l<o.i?o.ins:0),s&&l<o.i&&jp(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?as.createSet(i,s):$f.create(i);throw new Error("Mismatched change set lengths")}}}function pae(t,e,n=!1){let r=[],i=n?[]:null,s=new y_(t),o=new y_(e);for(let a=!1;;){if(s.done&&o.done)return i?as.createSet(r,i):$f.create(r);if(s.ins==0)no(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)no(r,0,o.ins,a),i&&jp(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;no(r,l,c,a),i&&c&&jp(i,r,o.text)}else o.ins==-1?(no(r,s.off?0:s.len,l,a),i&&jp(i,r,s.textBit(l))):(no(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&jp(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class y_{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Yn.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Yn.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Kg{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Kg(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Se.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Se.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Se.range(e.anchor,e.head)}static create(e,n,r){return new Kg(e,n,r)}}class Se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Se.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Se([this.main],0)}addRange(e,n=!0){return Se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Se.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Se(e.ranges.map(n=>Kg.fromJSON(n)),e.main)}static single(e,n=e){return new Se([Se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Se.normalized(e.slice(),n);r=s.to}return new Se(e,n)}static cursor(e,n=0,r,i){return Kg.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Kg.create(n,e,48|s):Kg.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?Se.range(l,a):Se.range(a,l))}}return new Se(e,n)}}function gae(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let i$=0;class Qe{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=i$++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Qe(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:s$),!!e.static,e.enables)}of(e){return new fC([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new fC(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new fC(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function s$(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class fC{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=i$++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:(((n=e[f.id])!==null&&n!==void 0?n:1)&1)==0&&c.push(e[f.id]);return{create(f){return f.values[o]=r(f),1},update(f,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||UR(f,c)){let d=r(f);if(a?!WG(d,f.values[o],i):!i(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[s];if(p!=null){let m=Gk(h,p);if(this.dependencies.every(y=>y instanceof Qe?h.facet(y)===f.facet(y):y instanceof Os?h.field(y,!1)==f.field(y,!1):!0)||(a?WG(d=r(f),m,i):i(d=r(f),m)))return f.values[o]=m,0}else d=r(f);return f.values[o]=d,1}}}}function WG(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function UR(t,e){let n=!1;for(let r of e)Ow(t,r)&1&&(n=!0);return n}function gBe(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let f=Gk(l,r[c]);if(i[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)Ow(l,u);return l.values[o]=a(l),1},update(l,u){if(!UR(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=UR(l,r),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&s$(n,f))return l.values[o]=h,0;let d=a(l);return e.compare(d,h)?(l.values[o]=h,0):(l.values[o]=d,1)}}}const vA=Qe.define({static:!0});class Os{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Os(i$++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(vA).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(vA),o=i.facet(vA),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,vA.of({field:this,create:e})]}get extension(){return this}}const Ug={lowest:4,low:3,default:2,high:1,highest:0};function dx(t){return e=>new mae(e,t)}const Q0={highest:dx(Ug.highest),high:dx(Ug.high),default:dx(Ug.default),low:dx(Ug.low),lowest:dx(Ug.lowest)};class mae{constructor(e,n){this.inner=e,this.prec=n}}class X8{of(e){return new zR(this,e)}reconfigure(e){return X8.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class zR{constructor(e,n){this.compartment=e,this.inner=n}}class Hk{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let h of mBe(e,n,o))h instanceof Os?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of i)a[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=r?.config.facets;for(let h in s){let d=s[h],p=d[0].facet,m=c&&c[h]||[];if(d.every(y=>y.type==0))if(a[p.id]=l.length<<1|1,s$(m,d))l.push(r.facet(p));else{let y=p.combine(d.map(b=>b.value));l.push(r&&p.compare(y,r.facet(p))?r.facet(p):y)}else{for(let y of d)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=u.length<<1,u.push(b=>y.dynamicSlot(b)));a[p.id]=u.length<<1,u.push(y=>gBe(y,p,d))}}let f=u.map(h=>h(a));return new Hk(e,o,f,a,l,s)}}function mBe(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof zR&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof zR){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof mae)s(o.inner,o.prec);else if(o instanceof Os)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof fC)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Ug.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Ug.default),r.reduce((o,a)=>o.concat(a))}function Ow(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Gk(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const yae=Qe.define(),jR=Qe.define({combine:t=>t.some(e=>e),static:!0}),bae=Qe.define({combine:t=>t.length?t[0]:void 0,static:!0}),vae=Qe.define(),xae=Qe.define(),wae=Qe.define(),_ae=Qe.define({combine:t=>t.length?t[0]:!1});class Jd{constructor(e,n){this.type=e,this.value=n}static define(){return new yBe}}class yBe{of(e){return new Jd(this,e)}}class bBe{constructor(e){this.map=e}of(e){return new tn(this,e)}}class tn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new tn(this.type,n)}is(e){return this.type==e}static define(e={}){return new bBe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}tn.reconfigure=tn.define();tn.appendConfig=tn.define();class Ki{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&gae(r,n.newLength),s.some(a=>a.type==Ki.time)||(this.annotations=s.concat(Ki.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Ki(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ki.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ki.time=Jd.define();Ki.userEvent=Jd.define();Ki.addToHistory=Jd.define();Ki.remote=Jd.define();function vBe(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Sae(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=as.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:tn.mapEffects(t.effects,i).concat(tn.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function qR(t,e,n){let r=e.selection,i=ub(e.annotations);return e.userEvent&&(i=i.concat(Ki.userEvent.of(e.userEvent))),{changes:e.changes instanceof as?e.changes:as.of(e.changes||[],n,t.facet(bae)),selection:r&&(r instanceof Se?r:Se.single(r.anchor,r.head)),effects:ub(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Aae(t,e,n){let r=qR(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=Sae(r,qR(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Ki.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return wBe(n?xBe(i):i)}function xBe(t){let e=t.startState,n=!0;for(let i of e.facet(vae)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:vBe(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=as.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Ki.create(e,i,t.selection&&t.selection.map(s),tn.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(xae);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Ki?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ki?t=s[0]:t=Aae(e,ub(s),!1)}return t}function wBe(t){let e=t.startState,n=e.facet(wae),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=Sae(r,qR(e,s,t.changes.newLength),!0))}return r==t?t:Ki.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const _Be=[];function ub(t){return t==null?_Be:Array.isArray(t)?t:[t]}var li=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(li||(li={}));const SBe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let VR;try{VR=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ABe(t){if(VR)return VR.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"Â"&&(n.toUpperCase()!=n.toLowerCase()||SBe.test(n)))return!0}return!1}function CBe(t){return e=>{if(!/\S/.test(e))return li.Space;if(ABe(e))return li.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return li.Word;return li.Other}}class Wn{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ow(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Ow(this,r),Gk(this,r)}update(...e){return Aae(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(X8.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,u)=>i.set(u,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(tn.reconfigure)?(n=null,r=a.value):a.is(tn.appendConfig)&&(n=null,r=ub(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=Hk.resolve(r,i,this),s=new Wn(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(jR)?e.newSelection:e.newSelection.asSingle();new Wn(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=ub(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let h=0;h<a;h++)s[h]=s[h].map(c);let f=i.mapDesc(u,!0);s.push(l.range.map(f)),i=i.compose(c),o=tn.mapEffects(o,c).concat(tn.mapEffects(ub(l.effects),f))}return{changes:i,selection:Se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof as?e:as.of(e,this.doc.length,this.facet(Wn.lineSeparator))}toText(e){return Yn.of(e.split(this.facet(Wn.lineSeparator)||PR))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ow(this,n),Gk(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Os&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Wn.create({doc:e.doc,selection:Se.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Hk.resolve(e.extensions||[],new Map),r=e.doc instanceof Yn?e.doc:Yn.of((e.doc||"").split(n.staticFacet(Wn.lineSeparator)||PR)),i=e.selection?e.selection instanceof Se?e.selection:Se.single(e.selection.anchor,e.selection.head):Se.single(0);return gae(i,r.length),n.staticFacet(jR)||(i=i.asSingle()),new Wn(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Wn.tabSize)}get lineBreak(){return this.facet(Wn.lineSeparator)||`
`}get readOnly(){return this.facet(_ae)}phrase(e,...n){for(let r of this.facet(Wn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(yae))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return CBe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=js(n,o,!1);if(s(n.slice(l,o))!=li.Word)break;o=l}for(;a<i;){let l=js(n,a);if(s(n.slice(a,l))!=li.Word)break;a=l}return o==a?null:Se.range(o+r,a+r)}}Wn.allowMultipleSelections=jR;Wn.tabSize=Qe.define({combine:t=>t.length?t[0]:4});Wn.lineSeparator=bae;Wn.readOnly=_ae;Wn.phrases=Qe.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Wn.languageData=yae;Wn.changeFilter=vae;Wn.transactionFilter=xae;Wn.transactionExtender=wae;X8.reconfigure=tn.define();function Zd(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Wm{eq(e){return this==e}range(e,n=e){return WR.create(e,n,this)}}Wm.prototype.startSide=Wm.prototype.endSide=0;Wm.prototype.point=!1;Wm.prototype.mapMode=$s.TrackDel;let WR=class Cae{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Cae(e,n,r)}};function HR(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class o${constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,h,d;if(c==f){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=d=p,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<h)))continue}else if(h=n.mapPos(c,u.startSide),d=n.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,d-h)),r.push(u),i.push(h-o),s.push(d-o))}return{mapped:r.length?new o$(i,s,r,a):null,pos:o}}}class nr{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new nr(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(HR)),this.isEmpty)return n.length?nr.of(n):this;let a=new kae(this,null,-1).goto(0),l=0,u=[],c=new E0;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let f=n[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(WR.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?nr.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:f}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(f))}}let s=this.nextLayer.map(e);return n.length==0?s:new nr(r,n,s||nr.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return b_.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return b_.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=HG(o,a,r),u=new px(o,l,s),c=new px(a,l,s);r.iterGaps((f,h,d)=>GG(u,f,c,h,d,i)),r.empty&&r.length==0&&GG(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=HG(s,o),l=new px(s,a,0).goto(r),u=new px(o,a,0).goto(r);for(;;){if(l.to!=u.to||!GR(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,s=-1){let o=new px(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),f=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,o.point,c,f,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new E0;for(let i of e instanceof WR?[e]:n?kBe(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return nr.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=nr.empty;i=i.nextLayer)n=new nr(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}nr.empty=new nr([],[],null,-1);function kBe(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(HR(e,r)>0)return t.slice().sort(HR);e=r}return t}nr.empty.nextLayer=nr.empty;class E0{finishChunk(e){this.chunks.push(new o$(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new E0)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(nr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=nr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function HG(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class kae{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class b_{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new kae(o,n,r,s));return i.length==1?i[0]:new b_(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)i9(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)i9(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),i9(this.heap,0)}}}function i9(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class px{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=b_.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){xA(this.active,e),xA(this.activeTo,e),xA(this.activeRank,e),this.minActive=YG(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;wA(this.active,n,r),wA(this.activeTo,n,i),wA(this.activeRank,n,s),e&&wA(e,n,this.cursor.from),this.minActive=YG(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&xA(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function GG(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=t.to+l-n.to,c=u||t.endSide-n.endSide,f=c<0?t.to+l:n.to,h=Math.min(f,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&GR(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,h,t.point,n.point):h>a&&!GR(t.active,n.active)&&s.compareRange(a,h,t.active,n.active),f>o)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(f),a=f,c<=0&&t.next(),c>=0&&n.next()}}function GR(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function xA(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function wA(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function YG(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function r2(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=js(t,i));return r}function YR(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=js(t,i)}return r===!0?-1:t.length}const XR="Í¼",XG=typeof Symbol>"u"?"__"+XR:Symbol.for(XR),KR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),KG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class D0{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(y=>m.replace(/&/,y))).reduce((m,y)=>m.concat(y)),p,l);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,c,h)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((r&&!f&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=KG[XG]||1;return KG[XG]=e+1,XR+e.toString(36)}static mount(e,n,r){let i=e[KR],s=r&&r.nonce;i?s&&i.setNonce(s):i=new EBe(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let QG=new Map;class EBe{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=QG.get(r);if(s)return e[KR]=s;this.sheet=new i.CSSStyleSheet,QG.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[KR]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var T0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v_={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},DBe=typeof navigator<"u"&&/Mac/.test(navigator.platform),TBe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Bs=0;Bs<10;Bs++)T0[48+Bs]=T0[96+Bs]=String(Bs);for(var Bs=1;Bs<=24;Bs++)T0[Bs+111]="F"+Bs;for(var Bs=65;Bs<=90;Bs++)T0[Bs]=String.fromCharCode(Bs+32),v_[Bs]=String.fromCharCode(Bs);for(var s9 in T0)v_.hasOwnProperty(s9)||(v_[s9]=T0[s9]);function OBe(t){var e=DBe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||TBe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?v_:T0)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Tr(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Eae(t,arguments[e]);return t}function Eae(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Eae(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let $o=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},QR=typeof document<"u"?document:{documentElement:{style:{}}};const JR=/Edge\/(\d+)/.exec($o.userAgent),Dae=/MSIE \d/.test($o.userAgent),ZR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($o.userAgent),K8=!!(Dae||ZR||JR),JG=!K8&&/gecko\/(\d+)/i.test($o.userAgent),o9=!K8&&/Chrome\/(\d+)/.exec($o.userAgent),MBe="webkitFontSmoothing"in QR.documentElement.style,eF=!K8&&/Apple Computer/.test($o.vendor),ZG=eF&&(/Mobile\/\w+/.test($o.userAgent)||$o.maxTouchPoints>2);var He={mac:ZG||/Mac/.test($o.platform),windows:/Win/.test($o.platform),linux:/Linux|X11/.test($o.platform),ie:K8,ie_version:Dae?QR.documentMode||6:ZR?+ZR[1]:JR?+JR[1]:0,gecko:JG,gecko_version:JG?+(/Firefox\/(\d+)/.exec($o.userAgent)||[0,0])[1]:0,chrome:!!o9,chrome_version:o9?+o9[1]:0,ios:ZG,android:/Android\b/.test($o.userAgent),webkit_version:MBe?+(/\bAppleWebKit\/(\d+)/.exec($o.userAgent)||[0,0])[1]:0,safari:eF,safari_version:eF?+(/\bVersion\/(\d+(\.\d+)?)/.exec($o.userAgent)||[0,0])[1]:0,tabSize:QR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function x_(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function tF(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function hC(t,e){if(!e.anchorNode)return!1;try{return tF(t,e.anchorNode)}catch{return!1}}function w_(t){return t.nodeType==3?Gm(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Mw(t,e,n,r){return n?eY(t,e,n,r,-1)||eY(t,e,n,r,1):!1}function Hm(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Yk(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function eY(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Jf(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Hm(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Jf(t):0}else return!1}}function Jf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Q8(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function IBe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Tae(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function RBe(t,e,n,r,i,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==l.body,p=1,m=1;if(d)h=IBe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();({scaleX:p,scaleY:m}=Tae(c,v)),h={left:v.left,right:v.left+c.clientWidth*p,top:v.top,bottom:v.top+c.clientHeight*m}}let y=0,b=0;if(i=="nearest")e.top<h.top?(b=e.top-(h.top+o),n>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+o,n<0&&e.top-b<h.top&&(b=e.top-(h.top+o)));else{let v=e.bottom-e.top,w=h.bottom-h.top;b=(i=="center"&&v<=w?e.top+v/2-w/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(r=="nearest"?e.left<h.left?(y=e.left-(h.left+s),n>0&&e.right>h.right+y&&(y=e.right-h.right+s)):e.right>h.right&&(y=e.right-h.right+s,n<0&&e.left<h.left+y&&(y=e.left-(h.left+s))):y=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,y||b)if(d)u.scrollBy(y,b);else{let v=0,w=0;if(b){let _=c.scrollTop;c.scrollTop+=b/m,w=(c.scrollTop-_)*m}if(y){let _=c.scrollLeft;c.scrollLeft+=y/p,v=(c.scrollLeft-_)*p}e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w},v&&Math.abs(v-y)<1&&(r="nearest"),w&&Math.abs(w-b)<1&&(i="nearest")}if(d)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function FBe(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class NBe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Jf(n):0),r,Math.min(e.focusOffset,r?Jf(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Ng=null;He.safari&&He.safari_version>=26&&(Ng=!1);function Oae(t){if(t.setActive)return t.setActive();if(Ng)return t.focus(Ng);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ng==null?{get preventScroll(){return Ng={preventScroll:!0},!0}}:void 0),!Ng){Ng=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let tY;function Gm(t,e,n=e){let r=tY||(tY=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function cb(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function LBe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Mae(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function PBe(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Jf(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Jf(n))}else{if(n==t)return!0;r=Hm(n),n=n.parentNode}}function Iae(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Rae(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Jf(n)}else if(n.parentNode&&!Yk(n))r=Hm(n),n=n.parentNode;else return null}}function Fae(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Yk(n))r=Hm(n)+1,n=n.parentNode;else return null}}class oo{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new oo(e.parentNode,Hm(e),n)}static after(e,n){return new oo(e.parentNode,Hm(e)+1,n)}}const a$=[];class _r{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=_r.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=nY(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=nY(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Jf(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!_r.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],h=u+f.length;if(u<e&&h>n)return f.domBoundsAround(e,n,u);if(h>=e&&i==-1&&(i=l,s=u),u>n&&f.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+f.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=a$){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Nae(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}_r.prototype.breakAfter=0;function nY(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Nae{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Lae(t,e,n,r,i,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,f=s.length?s[s.length-1]:null,h=f?f.breakAfter:o;if(!(e==r&&c&&!o&&!h&&s.length<2&&c.merge(n,i,s.length?f:null,n==0,a,l))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&f?.breakAfter)?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,l)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),s.push(d))):d?.breakAfter&&(f?f.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function Pae(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),f=e-n;for(let h of r)f+=h.length;t.length+=f,Lae(t,u,c,a,l,r,0,i,s)}const BBe=256;class gc extends _r{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof gc)||this.length-(n-e)+r.length>BBe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new gc(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new oo(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return $Be(this.dom,e,n)}}class Ud extends _r{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(Mae(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof Ud&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Pae(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Ud(this.mark,n,o)}domAtPos(e){return Bae(this,e)}coordsAt(e,n){return Uae(this,e,n)}}function $Be(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?He.chrome||He.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Gm(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return He.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Q8(l,o<0):l||null}class qp extends _r{static create(e,n,r){return new qp(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=qp.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof qp)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof qp&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Yn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Yn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?oo.before(this.dom):oo.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Q8(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zb extends _r{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Zb&&e.side==this.side}split(){return new Zb(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?oo.before(this.dom):oo.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Yn.empty}get isHidden(){return!0}}gc.prototype.children=qp.prototype.children=Zb.prototype.children=a$;function Bae(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new oo(n,0)}function $ae(t,e,n){let r,{children:i}=t;n>0&&e instanceof Ud&&i.length&&(r=i[i.length-1])instanceof Ud&&r.mark.eq(e.mark)?$ae(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function Uae(t,e,n){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],p=h+d.length;p>=c&&(d.children.length?a(d,c-h):(!s||s.isHidden&&(n>0||zBe(s,d)))&&(p>c||h==p&&d.getSide()>0)?(s=d,o=c-h):(h<c||h==p&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-h)),h=p}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):UBe(t)}function UBe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=w_(e);return n[n.length-1]||null}function zBe(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function nF(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const rY=Object.create(null);function Xk(t,e,n){if(t==e)return!0;t||(t=rY),e||(e=rY);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function rF(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function jBe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class v1{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Zo=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(Zo||(Zo={}));class Lt extends Wm{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new eS(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new O0(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=zae(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new O0(e,r,i,n,e.widget||null,!0)}static line(e){return new tS(e)}static set(e,n=!1){return nr.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Lt.none=nr.empty;class eS extends Lt{constructor(e){let{start:n,end:r}=zae(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof eS&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Xk(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}eS.prototype.point=!1;class tS extends Lt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof tS&&this.spec.class==e.spec.class&&Xk(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}tS.prototype.mapMode=$s.TrackBefore;tS.prototype.point=!0;class O0 extends Lt{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?$s.TrackBefore:$s.TrackAfter:$s.TrackDel}get type(){return this.startSide!=this.endSide?Zo.WidgetRange:this.startSide<=0?Zo.WidgetBefore:Zo.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof O0&&qBe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}O0.prototype.point=!0;function zae(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function qBe(t,e){return t==e||!!(t&&e&&t.compare(e))}function dC(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Gi extends _r{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof Gi))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Pae(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new Gi;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Xk(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){$ae(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=nF(n,this.attrs||{})),r&&(this.attrs=nF({class:r},this.attrs||{}))}domAtPos(e){return Bae(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Mae(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(rF(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&_r.get(i)instanceof Ud;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=_r.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!He.ios||!this.children.some(s=>s instanceof gc))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof gc)||/[^ -~]/.test(r.text))return null;let i=w_(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=Uae(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Gi&&this.children.length==0&&e.children.length==0&&Xk(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof Gi)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Dd extends _r{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Dd)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?oo.before(this.dom):oo.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Dd(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return a$}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Yn.empty}domBoundsAround(){return null}become(e){return e instanceof Dd&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof iF?null:Q8(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class iF extends v1{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Iw{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Dd&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Gi),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(_A(new Zb(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Dd)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(_A(new gc(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof O0){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof O0)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Dd(r.widget||ev.block,a,r));else{let l=qp.create(r.widget||ev.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(_A(new Zb(1),i),s),s=i.length+Math.max(0,s-i.length)),f.append(_A(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new Iw(e,n,r,s);return o.openEnd=nr.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function _A(t,e){for(let n of e)t=new Ud(n,[t],t.length);return t}class ev extends v1{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ev.inline=new ev("span");ev.block=new ev("div");var Jr=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(Jr||(Jr={}));const Ym=Jr.LTR,l$=Jr.RTL;function jae(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const VBe=jae("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),WBe=jae("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),sF=Object.create(null),Gc=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);sF[e]=n,sF[n]=-e}function qae(t){return t<=247?VBe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?WBe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const HBe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Vp{get dir(){return this.level%2?l$:Ym}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Vae(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Vae(r.inner,i.inner))return!1}return!0}const Or=[];function GBe(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let u=o,c=l,f=l;u<a;u++){let h=qae(t.charCodeAt(u));h==512?h=c:h==8&&f==4&&(h=16),Or[u]=h==4?2:h,h&7&&(f=h),c=h}for(let u=o,c=l,f=l;u<a;u++){let h=Or[u];if(h==128)u<a-1&&c==Or[u+1]&&c&24?h=Or[u]=c:Or[u]=256;else if(h==64){let d=u+1;for(;d<a&&Or[d]==64;)d++;let p=u&&c==8||d<n&&Or[d]==8?f==1?1:8:256;for(let m=u;m<d;m++)Or[m]=p;u=d-1}else h==8&&f==1&&(Or[u]=1);c=h,h&7&&(f=h)}}}function YBe(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,c=o<r.length?r[o].from:n;for(let f=u,h,d,p;f<c;f++)if(d=sF[h=t.charCodeAt(f)])if(d<0){for(let m=a-3;m>=0;m-=3)if(Gc[m+1]==-d){let y=Gc[m+2],b=y&2?i:y&4?y&1?s:i:0;b&&(Or[f]=Or[Gc[m]]=b),a=m;break}}else{if(Gc.length==189)break;Gc[a++]=f,Gc[a++]=h,Gc[a++]=l}else if((p=Or[f])==2||p==1){let m=p==i;l=m?0:1;for(let y=a-3;y>=0;y-=3){let b=Gc[y+2];if(b&2)break;if(m)Gc[y+2]|=2;else{if(b&4)break;Gc[y+2]|=4}}}}}function XBe(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let u=Or[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==n.length)break;c=n[i++].to,a=i<n.length?n[i].from:e}else if(Or[c]==256)c++;else break;let f=s==1,h=(c<e?Or[c]:r)==1,d=f==h?f?1:2:r;for(let p=c,m=i,y=m?n[m-1].to:t;p>l;)p==y&&(p=n[--m].from,y=m?n[m-1].to:t),Or[--p]=d;l=c}else s=u,l++}}}function oF(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<n;){let c=!0,f=!1;if(u==s.length||l<s[u].from){let m=Or[l];m!=a&&(c=!1,f=m==16)}let h=!c&&a==1?[]:null,d=c?r:r+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(f)break e;let m=s[u];if(!c)for(let y=m.to,b=u+1;;){if(y==n)break e;if(b<s.length&&s[b].from==y)y=s[b++].to;else{if(Or[y]==a)break e;break}}if(u++,h)h.push(m);else{m.from>l&&o.push(new Vp(l,m.from,d));let y=m.direction==Ym!=!(d%2);aF(t,y?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(c?Or[p]!=a:Or[p]==a))break;p++}h?oF(t,l,p,r+1,i,h,o):l<p&&o.push(new Vp(l,p,d)),l=p}else for(let l=n,u=s.length;l>e;){let c=!0,f=!1;if(!u||l>s[u-1].to){let m=Or[l-1];m!=a&&(c=!1,f=m==16)}let h=!c&&a==1?[]:null,d=c?r:r+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(f)break e;let m=s[--u];if(!c)for(let y=m.from,b=u;;){if(y==e)break e;if(b&&s[b-1].to==y)y=s[--b].from;else{if(Or[y-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new Vp(m.to,l,d));let y=m.direction==Ym!=!(d%2);aF(t,y?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(c?Or[p-1]!=a:Or[p-1]==a))break;p--}h?oF(t,p,l,r+1,i,h,o):p<l&&o.push(new Vp(p,l,d)),l=p}}function aF(t,e,n,r,i,s,o){let a=e%2?2:1;GBe(t,i,s,r,a),YBe(t,i,s,r,a),XBe(i,s,r,a),oF(t,i,s,e,n,r,o)}function KBe(t,e,n){if(!t)return[new Vp(0,0,e==l$?1:0)];if(e==Ym&&!n.length&&!HBe.test(t))return Wae(t.length);if(n.length)for(;t.length>Or.length;)Or[Or.length]=256;let r=[],i=e==Ym?0:1;return aF(t,i,i,n,0,t.length,r),r}function Wae(t){return[new Vp(0,t,0)]}let Hae="";function QBe(t,e,n,r,i){var s;let o=r.head-t.from,a=Vp.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(i,n);if(o==u){let h=a+=i?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!i,n),u=l.side(i,n)}let c=js(t.text,o,l.forward(i,n));(c<l.from||c>l.to)&&(c=u),Hae=t.text.slice(Math.min(o,c),Math.max(o,c));let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?Se.cursor(f.side(!i,n)+t.from,f.forward(i,n)?1:-1,f.level):Se.cursor(c+t.from,l.forward(i,n)?-1:1,l.level)}function JBe(t,e,n){for(let r=e;r<n;r++){let i=qae(t.charCodeAt(r));if(i==1)return Ym;if(i==2||i==4)return l$}return Ym}const Gae=Qe.define(),Yae=Qe.define(),Xae=Qe.define(),Kae=Qe.define(),lF=Qe.define(),Qae=Qe.define(),Jae=Qe.define(),u$=Qe.define(),c$=Qe.define(),Zae=Qe.define({combine:t=>t.some(e=>e)}),ele=Qe.define({combine:t=>t.some(e=>e)}),tle=Qe.define();class fb{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new fb(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new fb(Se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const SA=tn.define({map:(t,e)=>t.map(e)}),nle=tn.define();function Qo(t,e,n){let r=t.facet(Kae);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const fd=Qe.define({combine:t=>t.length?t[0]:!0});let ZBe=0;const By=Qe.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class Ji{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(By.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(By.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Ji(ZBe++,e,r,i,a=>{let l=[];return o&&l.push(__.of(u=>{let c=u.plugin(a);return c?o(c):Lt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Ji.define((r,i)=>new e(r,i),n)}}class a9{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Qo(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Qo(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Qo(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const rle=Qe.define(),f$=Qe.define(),__=Qe.define(),ile=Qe.define(),nS=Qe.define(),sle=Qe.define();function iY(t,e){let n=t.state.facet(sle);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return nr.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,f=i;for(let h=a.length-1;h>=0;h--,l--){let d=a[h].spec.bidiIsolate,p;if(d==null&&(d=JBe(e.text,u,c)),l>0&&f.length&&(p=f[f.length-1]).to==u&&p.direction==d)p.to=c,f=p.inner;else{let m={from:u,to:c,direction:d,inner:[]};f.push(m),f=m.inner}}}}),i}const ole=Qe.define();function h$(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(ole)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const nw=Qe.define();class Cu{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Cu(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let f=n[s],h=n[s+1],d=Math.max(a,f),p=Math.min(c,h);if(d<=p&&new Cu(d+u,p+u,d,p).addToSet(r),h>c)break;s+=2}if(!l)return r;new Cu(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class Kk{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=as.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Cu(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new Kk(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class sY extends _r{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Lt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Gi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Cu(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!o$e(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?t$e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Cu(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(He.ie||He.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=i$e(o,a,e.changes);return r=Cu.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=He.chrome||He.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Dd&&o.widget instanceof iF&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:f}=a,h,d,p,m;if(r&&r.range.fromB<f&&r.range.toB>c){let _=Iw.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=Iw.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);d=_.breakAtStart,p=_.openStart,m=S.openEnd;let A=this.compositionView(r);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),_.content.length&&A.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),h=_.content.concat(A).concat(S.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:m}=Iw.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:y,off:b}=s.findPos(u,1),{i:v,off:w}=s.findPos(l,-1);Lae(this,v,w,y,b,h,d,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(nle)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new gc(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Ud(i,[n],n.length);let r=new Gi;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=_r.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(fd)||this.dom.tabIndex>-1)&&hC(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(He.gecko&&a.empty&&!this.hasComposition&&e$e(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new oo(f,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Mw(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Mw(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{He.android&&He.chrome&&this.dom.contains(c.focusNode)&&s$e(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=x_(this.view.root);if(f)if(a.empty){if(He.gecko){let h=n$e(l.node,l.offset);if(h&&h!=3){let d=(h==1?Rae:Fae)(l.node,l.offset);d&&(l=new oo(d.node,d.offset))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new oo(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new oo(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Mw(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=x_(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=Gi.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=_r.get(n.childNodes[i]);s instanceof Gi&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=_r.get(n.childNodes[i]);s instanceof Gi&&(r=s.domAtPos(s.length))}return r?new oo(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=_r.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Gi)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof Gi&&!(r instanceof Gi&&n>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof Dd&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Gi))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof gc))return null;let s=js(i.text,r);if(s==r)return null;let o=Gm(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Jr.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>i)break;if(u>=r){let d=f.dom.getBoundingClientRect();if(n.push(d.height),o){let p=f.dom.lastChild,m=p?w_(p):[];if(m.length){let y=m[m.length-1],b=l?y.right-d.left:d.right-y.left;b>a&&(a=b,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Jr.RTL:Jr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Gi){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=w_(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Nae(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Lt.replace({widget:new iF(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Lt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(__).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(ile).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(nr.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(tle))try{if(u(this.view,e.range,e))return!0}catch(c){Qo(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=h$(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;RBe(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Jr.LTR)}}function e$e(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function ale(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Rae(n.focusNode,n.focusOffset),i=Fae(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=_r.get(i.node);if(!a||a instanceof gc&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=_r.get(r.node);!l||l instanceof gc&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function t$e(t,e,n){let r=ale(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new Cu(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=_r.get(f);if(h instanceof Ud)c.push({node:f,deco:h.mark});else{if(h instanceof Gi||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=t.contentDOM)c.push({node:f,deco:new eS({inclusive:!0,attributes:jBe(f),tagName:f.tagName.toLowerCase()})});else return null}}}function n$e(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let r$e=class{constructor(){this.changes=[]}compareRange(e,n){dC(e,n,this.changes)}comparePoint(e,n){dC(e,n,this.changes)}boundChange(e){dC(e,e,this.changes)}};function i$e(t,e,n){let r=new r$e;return nr.compare(t,e,n,r),r.changes}function s$e(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function o$e(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function a$e(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return Se.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=js(i.text,s,!1):a=js(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=js(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=js(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return Se.range(o+i.from,a+i.from)}function l$e(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function u$e(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function l9(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function oY(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function aY(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function uF(t,e,n){let r,i,s,o,a=!1,l,u,c,f;for(let p=t.firstChild;p;p=p.nextSibling){let m=w_(p);for(let y=0;y<m.length;y++){let b=m[y];i&&l9(i,b)&&(b=oY(aY(b,i.bottom),i.top));let v=l$e(e,b),w=u$e(n,b);if(v==0&&w==0)return p.nodeType==3?lY(p,e,n):uF(p,e,n);(!r||o>w||o==w&&s>v)&&(r=p,i=b,s=v,o=w,a=v?e<b.left?y>0:y<m.length-1:!0),v==0?n>b.bottom&&(!c||c.bottom<b.bottom)?(l=p,c=b):n<b.top&&(!f||f.top>b.top)&&(u=p,f=b):c&&l9(c,b)?c=aY(c,b.bottom):f&&l9(f,b)&&(f=oY(f,b.top))}}if(c&&c.bottom>=n?(r=l,i=c):f&&f.top<=n&&(r=u,i=f),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return lY(r,h,n);if(a&&r.contentEditable!="false")return uF(r,h,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function lY(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Gm(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<s){let h=e>=(c.left+c.right)/2,d=h;if((He.chrome||He.gecko)&&Gm(t,a).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:t,offset:a+(d?1:0)};i=a+(d?1:0),s=f}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function lle(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:f}=e,h=f-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,S=!1;l=t.elementAtHeight(h),l.type!=Zo.Text;)for(;h=r>0?l.bottom+_:l.top-_,!(h>=0&&h<=u);){if(S)return n?null:0;S=!0,r=-r}f=a+h;let d=l.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:uY(t,o,l,c,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:uY(t,o,l,c,f);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,y=m.elementFromPoint(c,f);y&&!t.contentDOM.contains(y)&&(y=null),y||(c=Math.max(o.left+1,Math.min(o.right-1,c)),y=m.elementFromPoint(c,f),y&&!t.contentDOM.contains(y)&&(y=null));let b,v=-1;if(y&&((i=t.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(c,f);_&&({offsetNode:b,offset:v}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(c,f);_&&({startContainer:b,startOffset:v}=_)}b&&(!t.contentDOM.contains(b)||He.safari&&c$e(b,v,c)||He.chrome&&f$e(b,v,c))&&(b=void 0),b&&(v=Math.min(Jf(b),v))}if(!b||!t.docView.dom.contains(b)){let _=Gi.find(t.docView,d);if(!_)return h>l.top+l.height/2?l.to:l.from;({node:b,offset:v}=uF(_.dom,c,f))}let w=t.docView.nearest(b);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let _=w.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(b,v)+w.posAtStart}function uY(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+YR(o,s,t.state.tabSize)}function ule(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return Gm(t,r-1,r).getBoundingClientRect().right>n}function c$e(t,e,n){return ule(t,e,n)}function f$e(t,e,n){if(e!=0)return ule(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Gm(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function cF(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Zo.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function h$e(t,e,n,r){let i=cF(t,e.head,e.assoc||-1),s=!r||i.type!=Zo.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==Jr.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return Se.cursor(l,n?-1:1)}return Se.cursor(n?i.to:i.from,n?-1:1)}function cY(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let u=QBe(i,s,o,a,n),c=Hae;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function d$e(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==li.Space&&(i=o),i==o}}function p$e(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return Se.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+c}let f=l.left+o,h=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=a+(h+d)*s,m=lle(t,{x:f,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let y=t.docView.coordsForChar(m),b=!y||p<y.top?-1:1;return Se.cursor(m,b,void 0,o)}}}function Rw(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function cle(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Rw(t,i.from,0);o!=i.from&&(s=Se.cursor(o,-1))}else{let o=Rw(t,i.from,-1),a=Rw(t,i.to,1);(o!=i.from||a!=i.to)&&(s=Se.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?Se.create(n,e.mainIndex):e}function u9(t,e,n){let r=Rw(t.state.facet(nS).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Se.cursor(r,r<n.from?1:-1)}const rw="ï¿¿";class g$e{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Wn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=rw}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=_r.get(i),l=_r.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Yk(i))||Yk(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&!y$e(o,n)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=_r.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(m$e(e,r.node,r.offset)?n:0))}}function m$e(t,e,n){for(;;){if(!e||n<Jf(e))return!1;if(e==t)return!0;n=Hm(e)+1,e=e.parentNode}}function y$e(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=_r.get(t);if(!(r?.isWidget||t.cmIgnore))return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}class fY{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class b$e{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:x$e(e),l=new g$e(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=w$e(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!tF(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!tF(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((He.ios||He.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),h=Math.max(l,u),d=c.from-f,p=c.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=Se.single(u,l)}}}function fle(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||He.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=hle(t.state.doc.sliceString(o,a,rw),e.text,l-o,u);c&&(He.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==rw+rw&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Yn.of(e.text.slice(c.from,c.toB).split(rw))})}else r&&(!t.hasFocus&&t.state.facet(fd)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(He.mac||He.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Se.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Yn.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:He.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Se.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Yn.of([" "])}),n)return d$(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=cle(t.state.facet(nS).map(l=>l(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function d$(t,e,n,r=-1){if(He.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(He.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&cb(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&cb(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&cb(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=v$e(t,e,n));return t.state.facet(Qae).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function v$e(t,e,n){let r,i=t.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let l=e.from<s.from?-1:1,u=l<0?s.from:s.to,c=Rw(i.facet(nS).map(f=>f(t)),u,l);e.from==c&&(o=c)}if(o>-1)r={changes:e,selection:Se.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let l=i.changes(e),u=n&&n.main.to<=l.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),f,h=n&&ale(t,n.main.head);if(h){let m=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-m}}else f=t.state.doc.lineAt(s.head);let d=s.to-e.to,p=s.to-s.from;r=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:l,range:u||m.map(l)};let y=m.to-d,b=y-c.length;if(m.to-m.from!=p||t.state.sliceDoc(b,y)!=c||m.to>=f.from&&m.from<=f.to)return{range:m};let v=i.changes({from:b,to:y,insert:e.insert}),w=m.to-s.to;return{changes:v,range:u?Se.range(Math.max(0,u.anchor+w),Math.max(0,u.head+w)):m.map(v)}})}else r={changes:l,selection:u&&i.selection.replaceRange(u)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:a,scrollIntoView:!0})}function hle(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function x$e(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new fY(n,r)),(i!=n||s!=r)&&e.push(new fY(i,s))),e}function w$e(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Se.single(n+e,r+e):null}class _$e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,He.safari&&e.contentDOM.addEventListener("input",()=>null),He.gecko&&B$e(e.contentDOM.ownerDocument)}handleEvent(e){!O$e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=S$e(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&ple.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),He.android&&He.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return He.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=dle.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||A$e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,cb(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:He.safari&&!He.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function hY(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Qo(n.state,i)}}}function S$e(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(hY(r.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(hY(r.value,l))}}for(let r in mc)n(r).handlers.push(mc[r]);for(let r in Ou)n(r).observers.push(Ou[r]);return e}const dle=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],A$e="dthko",ple=[16,17,18,20,91,92,224,225],AA=6;function CA(t){return Math.max(0,t)*.7+8}function C$e(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class k$e{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=FBe(e.contentDOM),this.atoms=e.state.facet(nS).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Wn.allowMultipleSelections)&&E$e(e,n),this.dragging=T$e(e,n)&&yle(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&C$e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=h$(this.view);e.clientX-l.left<=i+AA?n=-CA(i-e.clientX):e.clientX+l.right>=o-AA&&(n=CA(e.clientX-o)),e.clientY-l.top<=s+AA?r=-CA(s-e.clientY):e.clientY+l.bottom>=a-AA&&(r=CA(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=cle(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function E$e(t,e){let n=t.state.facet(Gae);return n.length?n[0](e):He.mac?e.metaKey:e.ctrlKey}function D$e(t,e){let n=t.state.facet(Yae);return n.length?n[0](e):He.mac?!e.altKey:!e.ctrlKey}function T$e(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=x_(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function O$e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=_r.get(n))&&r.ignoreEvent(e))return!1;return!0}const mc=Object.create(null),Ou=Object.create(null),gle=He.ie&&He.ie_version<15||He.ios&&He.webkit_version<604;function M$e(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),mle(t,n.value)},50)}function J8(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function mle(t,e){e=J8(t.state,u$,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(fF!=null&&n.selection.ranges.every(l=>l.empty)&&fF==s.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:f},range:Se.cursor(u.from+f.length)}})}else o?r=n.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:Se.cursor(l.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ou.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};mc.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ou.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ou.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};mc.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(Xae))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=F$e(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new k$e(t,e,n,r)),r&&t.observer.ignore(()=>{Oae(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function dY(t,e,n,r){if(r==1)return Se.cursor(e,n);if(r==2)return a$e(t.state,e,n);{let i=Gi.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,Se.range(o,a)}}let pY=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function I$e(t,e,n,r){let i=Gi.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&pY(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&pY(n,r,a)?1:o&&o.bottom>=r?-1:1}function gY(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:I$e(t,n,e.clientX,e.clientY)}}const R$e=He.ie&&He.ie_version<=11;let mY=null,yY=0,bY=0;function yle(t){if(!R$e)return t.detail;let e=mY,n=bY;return mY=t,bY=Date.now(),yY=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(yY+1)%3:1}function F$e(t,e){let n=gY(t,e),r=yle(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=gY(t,s),u,c=dY(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let f=dY(t,n.pos,n.bias,r),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?Se.range(h,d):Se.range(d,h)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=N$e(i,l.pos))?u:a?i.addRange(c):Se.create([c])}}}function N$e(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}mc.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=Se.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",J8(t.state,c$,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};mc.dragend=t=>(t.inputState.draggedContent=null,!1);function vY(t,e,n,r){if(n=J8(t.state,u$,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&D$e(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}mc.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&vY(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return vY(t,e,r,!0),!0}return!1};mc.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=gle?null:e.clipboardData;return n?(mle(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(M$e(t),!1)};function L$e(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function P$e(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:J8(t,c$,e.join(t.lineBreak)),ranges:n,linewise:r}}let fF=null;mc.copy=mc.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=P$e(t.state);if(!n&&!i)return!1;fF=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=gle?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(L$e(t,n),!1)};const ble=Jd.define();function vle(t,e){let n=[];for(let r of t.facet(Jae)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:ble.of(!0)}):null}function xle(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=vle(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ou.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),xle(t)};Ou.blur=t=>{t.observer.clearSelectionRange(),xle(t)};Ou.compositionstart=Ou.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ou.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,He.chrome&&He.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ou.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};mc.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return d$(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let i;if(He.chrome&&He.android&&(i=dle.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return He.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),He.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ou.compositionend(t,e),20),!1};const xY=new Set;function B$e(t){xY.has(t)||(xY.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const wY=["pre-wrap","normal","pre-line","break-spaces"];let tv=!1;function _Y(){tv=!1}class $$e{constructor(e){this.lineWrapping=e,this.doc=Yn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wY.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=wY.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class U$e{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class bf{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Zo.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof O0?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new bf(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Xr=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(Xr||(Xr={}));const pC=.001;class ea{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>pC&&(tv=!0),this.height=e)}replace(e,n,r){return ea.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:f}=i[a],h=s.lineAt(l,Xr.ByPosNoHeight,r.setDoc(n),0,0),d=h.to>=u?h:s.lineAt(u,Xr.ByPosNoHeight,r,0,0);for(f+=d.to-u,u=d.to;a>0&&h.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,Xr.ByPosNoHeight,r,0,0));c+=h.from-l,l=h.from;let p=p$.build(r.setDoc(o),e,c,f);s=Qk(s,s.replace(l,u,p))}return s.updateHeight(r,0)}static empty(){return new gl(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new z$e(ea.of(e.slice(0,n)),o,ea.of(e.slice(r)))}}function Qk(t,e){return t==e?t:(t.constructor!=e.constructor&&(tv=!0),e)}ea.prototype.size=1;class wle extends ea{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new bf(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class gl extends wle{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new bf(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof gl||i instanceof Ls&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ls?i=new gl(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):ea.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ls extends ea{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),f=a+c.length*l,h=Math.max(r,e-f/2);return new bf(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:f}=n.doc.line(s+u);return new bf(c,f,r+a*u,a,0)}}lineAt(e,n,r,i,s){if(n==Xr.ByHeight)return this.blockAt(e,r,i,s);if(n==Xr.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new bf(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,f=u.number-o,h=i+a*f+l*(u.from-s-f);return new bf(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,f=i;c<=n;){let h=r.doc.lineAt(c);if(c==e){let p=h.number-a;f+=l*p+u*(e-s-p)}let d=l+u*h.length;o(new bf(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Ls?r[r.length-1]=new Ls(s.length+i):r.push(null,new Ls(i-1))}if(e>0){let s=r[0];s instanceof Ls?r[0]=new Ls(e+s.length):r.unshift(new Ls(e-1),null)}return ea.of(r)}decomposeLeft(e,n){n.push(new Ls(e-1),null)}decomposeRight(e,n){n.push(null,new Ls(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new Ls(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=pC&&(l=-2);let h=new gl(c,f);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Ls(s-a).updateHeight(e,a));let u=ea.of(o);return(l<0||Math.abs(u.height-this.height)>=pC||Math.abs(l-this.heightMetrics(e,n).perLine)>=pC)&&(tv=!0),Qk(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class z$e extends ea{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==Xr.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==Xr.ByPosNoHeight?Xr.ByPosNoHeight:Xr.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let u=this.lineAt(l,Xr.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&SY(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),SY(s,a)}return ea.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?ea.of(this.break?[e,null,n]:[e,n]):(this.left=Qk(this.left,e),this.right=Qk(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function SY(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Ls&&(r=t[e+1])instanceof Ls&&t.splice(e-1,3,new Ls(n.length+1+r.length))}const j$e=5;class p${constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof gl?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new gl(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new wle(o,i,r)):(o||s||i>=j$e)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new gl(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Ls(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof gl)return e;let n=new gl(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof gl)&&!this.isCovered?this.nodes.push(new gl(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof gl&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new p$(r,e);return nr.spans(n,r,i,s,0),s.finish(r)}}function q$e(t,e,n){let r=new V$e;return nr.compare(t,e,n,r,0),r.changes}class V$e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&dC(e,n,this.changes,5)}}function W$e(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(u==t.parentNode?i.innerHeight:l,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function H$e(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function G$e(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class c9{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Lt.replace({widget:new Y$e(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Y$e extends v1{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class AY{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=CY,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Jr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(f$).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new $$e(n),this.stateDeco=e.facet(__).filter(r=>typeof r!="function"),this.heightMap=ea.empty().applyChanges(this.stateDeco,Yn.empty,this.heightOracle.setDoc(e.doc),[new Cu(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Lt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new kA(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?CY:new g$(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(iw(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(__).filter(c=>typeof c!="function");let i=e.changedRanges,s=Cu.extendWithRanges(i,q$e(r,this.stateDeco,e?e.changes:as.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);_Y(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||tv)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ele)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Jr.RTL:Jr.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:_,scaleY:S}=Tae(n,a);(_>.005&&Math.abs(this.scaleX-_)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=_,this.scaleY=S,u|=16,o=l=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Iae(e.scrollDOM);let p=(this.printing?G$e:W$e)(n,this.paddingTop),m=p.top-this.pixelViewport.top,y=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget&&!H$e(e.dom))return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(_)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:A,textHeight:C}=e.docView.measureTextSize();o=S>0&&i.refresh(s,S,A,C,Math.max(5,v/A),_),o&&(e.docView.minWidth=0,u|=16)}m>0&&y>0?c=Math.max(m,y):m<0&&y<0&&(c=Math.min(m,y)),_Y();for(let S of this.viewports){let A=S.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?ea.empty().applyChanges(this.stateDeco,Yn.empty,this.heightOracle,[new Cu(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new U$e(S.from,A))}tv&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new kA(i.lineAt(o-r*1e3,Xr.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Xr.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,Xr.ByPos,s,0,0),h;n.y=="center"?h=(f.top+f.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=f.top:h=f.bottom-c,l=new kA(i.lineAt(h-1e3/2,Xr.ByHeight,s,0,0).from,i.lineAt(h+c+1e3/2,Xr.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new kA(this.heightMap.lineAt(r,Xr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Xr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Xr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Xr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new c9(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Jr.LTR&&!r)return[];let a=[],l=(c,f,h,d)=>{if(f-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let b of m)if(b>c&&b<f){l(c,b-10,h,d),l(b+10,f,h,d);return}let y=K$e(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-c)<s&&Math.abs(b.to-f)<s&&!m.some(v=>b.from<v&&b.to>v));if(!y){if(f<h.to&&n&&r&&n.visibleRanges.some(w=>w.from<=f&&w.to>=f)){let w=n.moveToLineBoundary(Se.cursor(f),!1,!0).head;w>c&&(f=w)}let b=this.gapSize(h,c,f,d),v=r||b<2e6?b:2e6;y=new c9(c,f,b,v)}a.push(y)},u=c=>{if(c.length<o||c.type!=Zo.Text)return;let f=X$e(c.from,c.to,this.stateDeco);if(f.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,b;if(h!=null){let v=DA(f,h),w=((this.visibleBottom-this.visibleTop)/2+m)/c.height;y=v-w,b=v+w}else y=(this.visibleTop-c.top-m)/c.height,b=(this.visibleBottom-c.top+m)/c.height;d=EA(f,y),p=EA(f,b)}else{let m=f.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,b=0;if(m>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=A.size-A.displaySize);let v=this.pixelViewport.left+b,w=this.pixelViewport.right+b,_,S;if(h!=null){let A=DA(f,h),C=((w-v)/2+y)/m;_=A-C,S=A+C}else _=(v-y)/m,S=(w+y)/m;d=EA(f,_),p=EA(f,S)}d>c.from&&l(c.from,d,c,f),p<c.to&&l(p,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,r,i){let s=DA(i,r)-DA(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){c9.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Lt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];nr.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||iw(this.heightMap.lineAt(e,Xr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||iw(this.heightMap.lineAt(this.scaler.fromDOM(e),Xr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return iw(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class kA{constructor(e,n){this.from=e,this.to=n}}function X$e(t,e,n){let r=[],i=t,s=0;return nr.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function EA({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function DA(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function K$e(t,e){for(let n of t)if(e(n))return n}const CY={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class g${constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=n.lineAt(a,Xr.ByPos,e,0,0).top,c=n.lineAt(l,Xr.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof g$?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function iw(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new bf(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>iw(i,e)):t._content)}const TA=Qe.define({combine:t=>t.join(" ")}),hF=Qe.define({combine:t=>t.indexOf(!0)>-1}),dF=D0.newName(),_le=D0.newName(),Sle=D0.newName(),Ale={"&light":"."+_le,"&dark":"."+Sle};function pF(t,e,n){return new D0(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Q$e=pF("."+dF,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ale),J$e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},f9=He.ie&&He.ie_version<=11;class Z$e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new NBe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(He.ie&&He.ie_version<=11||He.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&He.android&&e.constructor.EDIT_CONTEXT!==!1&&!(He.chrome&&He.chrome_version<126)&&(this.editContext=new tUe(e),e.state.facet(fd)&&(e.contentDOM.editContext=this.editContext.editContext)),f9&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(fd)?r.root.activeElement!=this.dom:!hC(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(He.ie&&He.ie_version<=11||He.android&&He.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Mw(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=x_(e.root);if(!n)return!1;let r=He.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&eUe(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=hC(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&PBe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,J$e),f9&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),f9&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&cb(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&hC(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new b$e(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=fle(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=kY(n,e.previousSibling||e.target.previousSibling,-1),i=kY(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(fd)!=e.state.facet(fd)&&(e.view.contentDOM.editContext=e.state.facet(fd)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function kY(t,e,n){for(;e;){let r=_r.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function EY(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Mw(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function eUe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return EY(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?EY(t,n):null}class tUe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let u=l-a>r.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let c=hle(e.state.sliceDoc(a,l),r.text,(u?i.from:i.to)-a,u?"end":null);if(!c){let h=Se.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:c.from+a,to:c.toA+a,insert:Yn.of(r.text.slice(c.from,c.toB).split(`
`))};if((He.mac||He.android)&&f.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:a,to:l,insert:Yn.of([r.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);d$(e,f,Se.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(l<u){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(Lt.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:nle.of(Lt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=x_(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let c=u.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ke{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||LBe(e.parent)||document,this.viewState=new AY(e.state||Wn.create(e)),e.scrollTo&&e.scrollTo.is(SA)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(By).map(i=>new a9(i));for(let i of this.plugins)i.update(this);this.observer=new Z$e(this),this.inputState=new _$e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new sY(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ki?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(ble))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=vle(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Wn.phrases)!=this.state.facet(Wn.phrases))return this.setState(s);i=Kk.create(this,s,e),i.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new fb(d.empty?d:Se.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(SA)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=Jk.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(nw)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(TA)!=i.state.facet(TA)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(lF))try{h(i)}catch(d){Qo(this.state,d,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!fle(this,c)&&u.force&&cb(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new AY(e),this.plugins=e.facet(By).map(r=>new a9(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new sY(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(By),r=e.state.facet(By);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new a9(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Qo(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Iae(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(p){return Qo(this.state,p),DY}}),f=Kk.create(this,this.state,[]),h=!1;f.flags|=l,n?n.flags|=l:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=DY)try{let p=u[d];p.write&&p.write(c[d],this)}catch(p){Qo(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(lF))a(n)}get themeClasses(){return dF+" "+(this.state.facet(hF)?Sle:_le)+" "+this.state.facet(TA)}updateAttrs(){let e=TY(this,rle,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(fd)?"true":"false",class:"cm-content",style:`${He.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),TY(this,f$,n);let r=this.observer.ignore(()=>{let i=rF(this.contentDOM,this.contentAttrs,n),s=rF(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Ke.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(nw);let e=this.state.facet(Ke.cspNonce);D0.mount(this.root,this.styleModules.concat(Q$e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return u9(this,e,cY(this,e,n,r))}moveByGroup(e,n){return u9(this,e,cY(this,e,n,r=>d$e(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return Se.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return h$e(this,e,n,r)}moveVertically(e,n,r){return u9(this,e,p$e(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),lle(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Vp.find(s,e-i.from,-1,n)];return Q8(r,o.dir==Jr.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Zae)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>nUe)return Wae(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Vae(s.isolates,r=iY(this,e))))return s.order;r||(r=iY(this,e));let i=KBe(e.text,n,r);return this.bidiCache.push(new Jk(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||He.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Oae(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return SA.of(new fb(typeof e=="number"?Se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return SA.of(new fb(Se.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ji.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ji.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=D0.newName(),i=[TA.of(r),nw.of(pF(`.${r}`,e))];return n&&n.dark&&i.push(hF.of(!0)),i}static baseTheme(e){return Q0.lowest(nw.of(pF("."+dF,e,Ale)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&_r.get(r)||_r.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}}Ke.styleModule=nw;Ke.inputHandler=Qae;Ke.clipboardInputFilter=u$;Ke.clipboardOutputFilter=c$;Ke.scrollHandler=tle;Ke.focusChangeEffect=Jae;Ke.perLineTextDirection=Zae;Ke.exceptionSink=Kae;Ke.updateListener=lF;Ke.editable=fd;Ke.mouseSelectionStyle=Xae;Ke.dragMovesSelection=Yae;Ke.clickAddsSelectionRange=Gae;Ke.decorations=__;Ke.outerDecorations=ile;Ke.atomicRanges=nS;Ke.bidiIsolatedRanges=sle;Ke.scrollMargins=ole;Ke.darkTheme=hF;Ke.cspNonce=Qe.define({combine:t=>t.length?t[0]:""});Ke.contentAttributes=f$;Ke.editorAttributes=rle;Ke.lineWrapping=Ke.contentAttributes.of({class:"cm-lineWrapping"});Ke.announce=tn.define();const nUe=4096,DY={};class Jk{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Jr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new Jk(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function TY(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&nF(o,n)}return n}const rUe=He.mac?"mac":He.windows?"win":He.linux?"linux":"key";function iUe(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function OA(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const sUe=Q0.default(Ke.domEventHandlers({keydown(t,e){return kle(Cle(e.state),t,e,"editor")}})),Z8=Qe.define({enables:sUe}),OY=new WeakMap;function Cle(t){let e=t.facet(Z8),n=OY.get(e);return n||OY.set(e,n=lUe(e.reduce((r,i)=>r.concat(i),[]))),n}function oUe(t,e,n){return kle(Cle(t.state),e,t,n)}let Pp=null;const aUe=4e3;function lUe(t,e=rUe){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var f,h;let d=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(b=>iUe(b,e));for(let b=1;b<p.length;b++){let v=p.slice(0,b).join(" ");i(v,!0),d[v]||(d[v]={preventDefault:!0,stopPropagation:!1,run:[w=>{let _=Pp={view:w,prefix:v,scope:o};return setTimeout(()=>{Pp==_&&(Pp=null)},aUe),!0}]})}let m=p.join(" ");i(m,!1);let y=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});l&&y.run.push(l),u&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let h in c)c[h].run.push(d=>f(d,gF))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let gF=null;function kle(t,e,n,r){gF=e;let i=OBe(e),s=Da(i,0),o=yf(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;Pp&&Pp.view==n&&Pp.scope==r&&(a=Pp.prefix+" ",ple.indexOf(e.keyCode)<0&&(u=!0,Pp=null));let f=new Set,h=y=>{if(y){for(let b of y.run)if(!f.has(b)&&(f.add(b),b(n)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],p,m;return d&&(h(d[a+OA(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(He.windows&&e.ctrlKey&&e.altKey)&&!(He.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(p=T0[e.keyCode])&&p!=i?(h(d[a+OA(p,e,!0)])||e.shiftKey&&(m=v_[e.keyCode])!=i&&m!=p&&h(d[a+OA(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(d[a+OA(i,e,!0)])&&(l=!0),!l&&h(d._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),gF=null,l}class rS{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=Ele(e);return[new rS(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return uUe(e,n,r)}}function Ele(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Jr.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function MY(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function uUe(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Jr.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=Ele(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),d=cF(t,r,1),p=cF(t,i,-1),m=d.type==Zo.Text?d:null,y=p.type==Zo.Text?p:null;if(m&&(t.lineWrapping||d.widgetLineBreaks)&&(m=MY(t,r,1,m)),y&&(t.lineWrapping||p.widgetLineBreaks)&&(y=MY(t,i,-1,y)),m&&y&&m.from==y.from&&m.to==y.to)return v(w(n.from,n.to,m));{let S=m?w(n.from,null,m):_(d,!1),A=y?w(null,n.to,y):_(p,!0),C=[];return(m||d).to<(y||p).from-(m&&y?1:0)||d.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<A.top?C.push(b(f,S.bottom,h,A.top)):S.bottom<A.top&&t.elementAtHeight((S.bottom+A.top)/2).type==Zo.Text&&(S.bottom=A.top=(S.bottom+A.top)/2),v(S).concat(C).concat(v(A))}function b(S,A,C,D){return new rS(e,S-l.left,A-l.top,C-S,D-A)}function v({top:S,bottom:A,horizontal:C}){let D=[];for(let T=0;T<C.length;T+=2)D.push(b(C[T],S,C[T+1],A));return D}function w(S,A,C){let D=1e9,T=-1e9,M=[];function I(O,R,L,B,z){let U=t.coordsAtPos(O,O==C.to?-2:2),V=t.coordsAtPos(L,L==C.from?2:-2);!U||!V||(D=Math.min(U.top,V.top,D),T=Math.max(U.bottom,V.bottom,T),z==Jr.LTR?M.push(s&&R?f:U.left,s&&B?h:V.right):M.push(!s&&B?f:V.left,!s&&R?h:U.right))}let N=S??C.from,P=A??C.to;for(let O of t.visibleRanges)if(O.to>N&&O.from<P)for(let R=Math.max(O.from,N),L=Math.min(O.to,P);;){let B=t.state.doc.lineAt(R);for(let z of t.bidiSpans(B)){let U=z.from+B.from,V=z.to+B.from;if(U>=L)break;V>R&&I(Math.max(U,R),S==null&&U<=N,Math.min(V,L),A==null&&V>=P,z.dir)}if(R=B.to+1,R>=L)break}return M.length==0&&I(N,S==null,P,A==null,t.textDirection),{top:D,bottom:T,horizontal:M}}function _(S,A){let C=a.top+(A?S.top:S.bottom);return{top:C,bottom:C,horizontal:[]}}}function cUe(t,e){return t.constructor==e.constructor&&t.eq(e)}class fUe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(gC)!=e.state.facet(gC)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(gC);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!cUe(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,He.safari&&He.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const gC=Qe.define();function Dle(t){return[Ji.define(e=>new fUe(e,t)),gC.of(t)]}const S_=Qe.define({combine(t){return Zd(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function hUe(t={}){return[S_.of(t),dUe,pUe,gUe,ele.of(!0)]}function Tle(t){return t.startState.facet(S_)!=t.state.facet(S_)}const dUe=Dle({above:!0,markers(t){let{state:e}=t,n=e.facet(S_),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:Se.cursor(i.head,i.head>i.anchor?-1:1);for(let l of rS.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Tle(t);return n&&IY(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){IY(e.state,t)},class:"cm-cursorLayer"});function IY(t,e){e.style.animationDuration=t.facet(S_).cursorBlinkRate+"ms"}const pUe=Dle({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:rS.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Tle(t)},class:"cm-selectionLayer"}),gUe=Q0.highest(Ke.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Ole=tn.define({map(t,e){return t==null?null:e.mapPos(t)}}),sw=Os.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(Ole)?r.value:n,t)}}),mUe=Ji.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(sw);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(sw)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(sw),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(sw)!=t&&this.view.dispatch({effects:Ole.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function yUe(){return[sw,mUe]}function RY(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function bUe(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class vUe{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let f=r(a,l,u);f&&c(u,u+a[0].length,f)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new E0,r=n.add.bind(n);for(let{from:i,to:s}of bUe(e,this.maxLength))RY(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),f=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){f=a;break}}let h=[],d,p=(m,y,b)=>h.push(b.range(m,y));if(l==u)for(this.regexp.lastIndex=c-l.from;(d=this.regexp.exec(l.text))&&d.index<f-l.from;)this.addMatch(d,e,d.index+l.from,p);else RY(e.state.doc,this.regexp,c,f,(m,y)=>this.addMatch(y,e,m,p));n=n.update({filterFrom:c,filterTo:f,filter:(m,y)=>m<c||y>f,add:h})}}return n}}const mF=/x/.unicode!=null?"gu":"g",xUe=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,mF),wUe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let h9=null;function _Ue(){var t;if(h9==null&&typeof document<"u"&&document.body){let e=document.body.style;h9=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return h9||!1}const mC=Qe.define({combine(t){let e=Zd(t,{render:null,specialChars:xUe,addSpecialChars:null});return(e.replaceTabs=!_Ue())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,mF)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,mF)),e}});function SUe(t={}){return[mC.of(t),AUe()]}let FY=null;function AUe(){return FY||(FY=Ji.fromClass(class{constructor(t){this.view=t,this.decorations=Lt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(mC)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new vUe({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Da(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=r2(o.text,a,r-o.from);return Lt.replace({widget:new DUe((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Lt.replace({widget:new EUe(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(mC);t.startState.facet(mC)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const CUe="â¢";function kUe(t){return t>=32?CUe:t==10?"â¤":String.fromCharCode(9216+t)}class EUe extends v1{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=kUe(this.code),r=e.state.phrase("Control character")+" "+(wUe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class DUe extends v1{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function TUe(){return MUe}const OUe=Lt.line({class:"cm-activeLine"}),MUe=Ji.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(OUe.range(i.from)),e=i.from)}return Lt.set(n)}},{decorations:t=>t.decorations}),yF=2e3;function IUe(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>yF||n.off>yF||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let u=t.doc.line(l);u.length<=a&&s.push(Se.range(u.from+o,u.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let u=t.doc.line(l),c=YR(u.text,o,t.tabSize,!0);if(c<0)s.push(Se.cursor(u.to));else{let f=YR(u.text,a,t.tabSize);s.push(Se.range(u.from+c,u.from+f))}}}return s}function RUe(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function NY(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>yF?-1:i==r.length?RUe(t,e.clientX):r2(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function FUe(t,e){let n=NY(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=NY(t,i);if(!a)return r;let l=IUe(t.state,n,a);return l.length?o?Se.create(l.concat(r.ranges)):Se.create(l):r}}:null}function NUe(t){let e=(n=>n.altKey&&n.button==0);return Ke.mouseSelectionStyle.of((n,r)=>e(r)?FUe(n,r):null)}const LUe={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},PUe={style:"cursor: crosshair"};function BUe(t={}){let[e,n]=LUe[t.key||"Alt"],r=Ji.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,Ke.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?PUe:null})]}const gx="-10000px";class Mle{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==u.create&&(c=f)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let f=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function $Ue(t={}){return yC.of(t)}function UUe(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const yC=Qe.define({combine:t=>{var e,n,r;return{position:He.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||UUe}}}),LY=new WeakMap,m$=Ji.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(yC);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Mle(t,y$,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(yC);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=gx,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(He.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==gx&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=h$(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(yC).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,f=t.pos[a],h=t.size[a];if(!f||l.clip!==!1&&(f.bottom<=Math.max(n.top,r.top)||f.top>=Math.min(n.bottom,r.bottom)||f.right<Math.max(n.left,r.left)-.1||f.left>Math.min(n.right,r.right)+.1)){c.style.top=gx;continue}let d=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=h.right-h.left,y=(e=LY.get(u))!==null&&e!==void 0?e:h.bottom-h.top,b=u.offset||jUe,v=this.view.textDirection==Jr.LTR,w=h.width>r.right-r.left?v?r.left:r.right-h.width:v?Math.max(r.left,Math.min(f.left-(d?14:0)+b.x,r.right-m)):Math.min(Math.max(r.left,f.left-m+(d?14:0)-b.x),r.right-m),_=this.above[a];!l.strictSide&&(_?f.top-y-p-b.y<r.top:f.bottom+y+p+b.y>r.bottom)&&_==r.bottom-f.bottom>f.top-r.top&&(_=this.above[a]=!_);let S=(_?f.top-r.top:r.bottom-f.bottom)-p;if(S<y&&u.resize!==!1){if(S<this.view.defaultLineHeight){c.style.top=gx;continue}LY.set(u,y),c.style.height=(y=S)/s+"px"}else c.style.height&&(c.style.height="");let A=_?f.top-y-p-b.y:f.bottom+p+b.y,C=w+m;if(u.overlap!==!0)for(let D of o)D.left<C&&D.right>w&&D.top<A+y&&D.bottom>A&&(A=_?D.top-y-2-p:D.bottom+p+2);if(this.position=="absolute"?(c.style.top=(A-t.parent.top)/s+"px",PY(c,(w-t.parent.left)/i)):(c.style.top=A/s+"px",PY(c,w/i)),d){let D=f.left+(v?b.x:-b.x)-(w+14-7);d.style.left=D/i+"px"}u.overlap!==!0&&o.push({left:w,top:A,right:C,bottom:A+y}),c.classList.toggle("cm-tooltip-above",_),c.classList.toggle("cm-tooltip-below",!_),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=gx}},{eventObservers:{scroll(){this.maybeMeasure()}}});function PY(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const zUe=Ke.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),jUe={x:0,y:0},y$=Qe.define({enables:[m$,zUe]}),Zk=Qe.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class eD{static create(e){return new eD(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Mle(e,Zk,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const qUe=y$.compute([Zk],t=>{let e=t.facet(Zk);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:eD.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class VUe{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof qp)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==Jr.RTL?-1:1;s=n.x<a.left?-u:u}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Qo(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(m$),n=e?e.manager.tooltips.findIndex(r=>r.create==eD.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!WUe(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!HUe(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const MA=4;function WUe(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-MA&&e.clientX<=r+MA&&e.clientY>=i-MA&&e.clientY<=s+MA}function HUe(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function Ile(t,e={}){let n=tn.define(),r=Os.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,$s.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(GUe)&&(i=[]);return i},provide:i=>Zk.from(i)});return{active:r,extension:[r,Ji.define(i=>new VUe(i,t,r,n,e.hoverTime||300)),qUe]}}function Rle(t,e){let n=t.plugin(m$);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const GUe=tn.define(),BY=Qe.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function A_(t,e){let n=t.plugin(Fle),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Fle=Ji.fromClass(class{constructor(t){this.input=t.state.facet(C_),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(BY);this.top=new IA(t,!0,e.topContainer),this.bottom=new IA(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(BY);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new IA(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new IA(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(C_);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Ke.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class IA{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=$Y(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=$Y(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $Y(t){let e=t.nextSibling;return t.remove(),e}const C_=Qe.define({enables:Fle});class M0 extends Wm{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}M0.prototype.elementClass="";M0.prototype.toDOM=void 0;M0.prototype.mapMode=$s.TrackBefore;M0.prototype.startSide=M0.prototype.endSide=-1;M0.prototype.point=!0;const bC=Qe.define(),YUe=Qe.define(),vC=Qe.define(),UY=Qe.define({combine:t=>t.some(e=>e)});function XUe(t){return[KUe]}const KUe=Ji.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(vC).map(e=>new jY(t,e)),this.fixed=!t.state.facet(UY);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(UY)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=nr.iter(this.view.state.facet(bC),this.view.viewport.from),r=[],i=this.gutters.map(s=>new QUe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Zo.Text&&o){bF(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Zo.Text){bF(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(vC),n=t.state.facet(vC),r=t.docChanged||t.heightChanged||t.viewportChanged||!nr.eq(t.startState.facet(bC),t.state.facet(bC),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new jY(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Ke.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Jr.LTR?{left:r,right:i}:{right:r,left:i}})});function zY(t){return Array.isArray(t)?t:[t]}function bF(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class QUe{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=nr.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new Nle(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];bF(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(YUe)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class jY{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=zY(n.markers(e)),n.initialSpacer&&(this.spacer=new Nle(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=zY(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!nr.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Nle{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),JUe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function JUe(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const ZUe=Qe.define(),eze=Qe.define(),$y=Qe.define({combine(t){return Zd(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class d9 extends M0{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function p9(t,e){return t.state.facet($y).formatNumber(e,t.state)}const tze=vC.compute([$y],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(ZUe)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new d9(p9(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(eze)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet($y)!=e.state.facet($y),initialSpacer(e){return new d9(p9(e,qY(e.state.doc.lines)))},updateSpacer(e,n){let r=p9(n.view,qY(n.view.state.doc.lines));return r==e.number?e:new d9(r)},domEventHandlers:t.facet($y).domEventHandlers,side:"before"}));function nze(t={}){return[$y.of(t),XUe(),tze]}function qY(t){let e=9;for(;e<t;)e=e*10+9;return e}const rze=new class extends M0{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ize=bC.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(rze.range(i)))}return nr.of(e)});function sze(){return ize}const Lle=1024;let oze=0;class g9{constructor(e,n){this.from=e,this.to=n}}class vn{constructor(e={}){this.id=oze++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Va.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}vn.closedBy=new vn({deserialize:t=>t.split(" ")});vn.openedBy=new vn({deserialize:t=>t.split(" ")});vn.group=new vn({deserialize:t=>t.split(" ")});vn.isolate=new vn({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});vn.contextHash=new vn({perNode:!0});vn.lookAhead=new vn({perNode:!0});vn.mounted=new vn({perNode:!0});class eE{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[vn.mounted.id]}}const aze=Object.create(null);class Va{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):aze,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Va(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(vn.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(vn.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Va.none=new Va("",Object.create(null),0,8);class b${constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);if(o){i||(i=Object.assign({},r.props));let a=o[1],l=o[0];l.combine&&l.id in i&&(a=l.combine(i[l.id],a)),i[l.id]=a}}n.push(i?new Va(r.name,i,r.id,r.flags):r)}return new b$(n)}}const RA=new WeakMap,VY=new WeakMap;var _s;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(_s||(_s={}));let qs=class vF{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=eE.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new wF(this.topNode,e)}cursorAt(e,n=0,r=0){let i=RA.get(this)||this.topNode,s=new wF(i);return s.moveTo(e,n),RA.set(this,s._tree),s}get topNode(){return new R0(this,0,0,null)}resolve(e,n=0){let r=k_(RA.get(this)||this.topNode,e,n,!1);return RA.set(this,r),r}resolveInner(e,n=0){let r=k_(VY.get(this)||this.topNode,e,n,!0);return VY.set(this,r),r}resolveStack(e,n=0){return cze(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&_s.IncludeAnonymous)>0;for(let l=this.cursor(o|_s.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:w$(Va.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new vF(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new vF(Va.none,n,r,i)))}static build(e){return fze(e)}};qs.empty=new qs(Va.none,[],[],0);class v${constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new v$(this.buffer,this.index)}}class I0{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Va.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(Ple(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new I0(s,o,this.set)}}function Ple(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function k_(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof R0&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:_s.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof R0&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Ble{cursor(e=0){return new wF(this,e)}getChild(e,n=null,r=null){let i=WY(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return WY(this,e,n,r)}resolve(e,n=0){return k_(this,e,n,!1)}resolveInner(e,n=0){return k_(this,e,n,!0)}matchContext(e){return xF(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}let R0=class xC extends Ble{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],f=l[e]+o.from;if(Ple(i,r,f,f+c.length)){if(c instanceof I0){if(s&_s.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-f,i);if(h>-1)return new Wp(new lze(o,c,e,f),null,h)}else if(s&_s.IncludeAnonymous||!c.type.isAnonymous||x$(c)){let h;if(!(s&_s.IgnoreMounts)&&(h=eE.get(c))&&!h.overlay)return new xC(h.tree,f,e,o);let d=new xC(c,f,e,o);return s&_s.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&_s.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&_s.IgnoreOverlays)&&(i=eE.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new xC(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function WY(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function xF(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class lze{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Wp extends Ble{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Wp(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&_s.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Wp(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wp(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Wp(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new qs(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function $le(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof R0&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new uze(i,n)}class uze{constructor(e,n){this.heads=e,this.node=n}get next(){return $le(this.heads)}}function cze(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof R0?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=eE.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new R0(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(k_(a,e,n,!1))}}return i?$le(i):r}class wF{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof R0)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof R0?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&_s.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_s.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&_s.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&_s.IncludeAnonymous||a instanceof I0||!a.type.isAnonymous||x$(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Wp(this.buffer,n,this.stack[i]);return this.bufferNode=new Wp(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return xF(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return xF(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function x$(t){return t.children.some(e=>e instanceof I0||!e.type.isAnonymous||x$(e))}function fze(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=Lle,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new v$(n,n.length):n,l=r.types,u=0,c=0;function f(S,A,C,D,T,M){let{id:I,start:N,end:P,size:O}=a,R=c,L=u;if(O<0)if(a.next(),O==-1){let W=s[I];C.push(W),D.push(N-S);return}else if(O==-3){u=I;return}else if(O==-4){c=I;return}else throw new RangeError(`Unrecognized record size: ${O}`);let B=l[I],z,U,V=N-S;if(P-N<=i&&(U=y(a.pos-A,T))){let W=new Uint16Array(U.size-U.skip),H=a.pos-U.size,Y=W.length;for(;a.pos>H;)Y=b(U.start,W,Y);z=new I0(W,P-U.start,r),V=U.start-S}else{let W=a.pos-O;a.next();let H=[],Y=[],se=I>=o?I:-1,he=0,be=P;for(;a.pos>W;)se>=0&&a.id==se&&a.size>=0?(a.end<=be-i&&(p(H,Y,N,he,a.end,be,se,R,L),he=H.length,be=a.end),a.next()):M>2500?h(N,W,H,Y):f(N,W,H,Y,se,M+1);if(se>=0&&he>0&&he<H.length&&p(H,Y,N,he,N,be,se,R,L),H.reverse(),Y.reverse(),se>-1&&he>0){let fe=d(B,L);z=w$(B,H,Y,0,H.length,0,P-N,fe,fe)}else z=m(B,H,Y,P-N,R-P,L)}C.push(z),D.push(V)}function h(S,A,C,D){let T=[],M=0,I=-1;for(;a.pos>A;){let{id:N,start:P,end:O,size:R}=a;if(R>4)a.next();else{if(I>-1&&P<I)break;I<0&&(I=O-i),T.push(N,P,O),M++,a.next()}}if(M){let N=new Uint16Array(M*4),P=T[T.length-2];for(let O=T.length-3,R=0;O>=0;O-=3)N[R++]=T[O],N[R++]=T[O+1]-P,N[R++]=T[O+2]-P,N[R++]=R;C.push(new I0(N,T[2]-P,r)),D.push(P-S)}}function d(S,A){return(C,D,T)=>{let M=0,I=C.length-1,N,P;if(I>=0&&(N=C[I])instanceof qs){if(!I&&N.type==S&&N.length==T)return N;(P=N.prop(vn.lookAhead))&&(M=D[I]+N.length+P)}return m(S,C,D,T,M,A)}}function p(S,A,C,D,T,M,I,N,P){let O=[],R=[];for(;S.length>D;)O.push(S.pop()),R.push(A.pop()+C-T);S.push(m(r.types[I],O,R,M-T,N-M,P)),A.push(T-C)}function m(S,A,C,D,T,M,I){if(M){let N=[vn.contextHash,M];I=I?[N].concat(I):[N]}if(T>25){let N=[vn.lookAhead,T];I=I?[N].concat(I):[N]}return new qs(S,A,C,D,I)}function y(S,A){let C=a.fork(),D=0,T=0,M=0,I=C.end-i,N={size:0,start:0,skip:0};e:for(let P=C.pos-S;C.pos>P;){let O=C.size;if(C.id==A&&O>=0){N.size=D,N.start=T,N.skip=M,M+=4,D+=4,C.next();continue}let R=C.pos-O;if(O<0||R<P||C.start<I)break;let L=C.id>=o?4:0,B=C.start;for(C.next();C.pos>R;){if(C.size<0)if(C.size==-3)L+=4;else break e;else C.id>=o&&(L+=4);C.next()}T=B,D+=O,M+=L}return(A<0||D==S)&&(N.size=D,N.start=T,N.skip=M),N.size>4?N:void 0}function b(S,A,C){let{id:D,start:T,end:M,size:I}=a;if(a.next(),I>=0&&D<o){let N=C;if(I>4){let P=a.pos-(I-4);for(;a.pos>P;)C=b(S,A,C)}A[--C]=N,A[--C]=M-S,A[--C]=T-S,A[--C]=D}else I==-3?u=D:I==-4&&(c=D);return C}let v=[],w=[];for(;a.pos>0;)f(t.start||0,t.bufferStart||0,v,w,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:v.length?w[0]+v[0].length:0;return new qs(l[t.topID],v.reverse(),w.reverse(),_)}const HY=new WeakMap;function wC(t,e){if(!t.isAnonymous||e instanceof I0||e.type!=t)return 1;let n=HY.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof qs)){n=1;break}n+=wC(t,r)}HY.set(e,n)}return n}function w$(t,e,n,r,i,s,o,a,l){let u=0;for(let p=r;p<i;p++)u+=wC(t,e[p]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(p,m,y,b,v){for(let w=y;w<b;){let _=w,S=m[w],A=wC(t,p[w]);for(w++;w<b;w++){let C=wC(t,p[w]);if(A+C>=c)break;A+=C}if(w==_+1){if(A>c){let C=p[_];d(C.children,C.positions,0,C.children.length,m[_]+v);continue}f.push(p[_])}else{let C=m[w-1]+p[w-1].length-S;f.push(w$(t,p,m,_,w,S,C,null,l))}h.push(S+v-s)}}return d(e,n,r,i,0),(a||l)(f,h,o)}class bm{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new bm(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;o&&o.from<f;){let h=o;if(l>=h.from||f<=h.to||u){let d=Math.max(h.from,l)-u,p=Math.min(h.to,f)-u;h=d>=p?null:new bm(d,p,h.tree,h.offset+u,a>0,!!c)}if(h&&i.push(h),o.to>f)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let Ule=class{startParse(e,n,r){return typeof e=="string"&&(e=new hze(e)),r=r?r.length?r.map(i=>new g9(i.from,i.to)):[new g9(0,0)]:[new g9(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class hze{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new vn({perNode:!0});let dze=0;class hu{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=dze++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof hu&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new hu(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new tE(e);return r=>r.modified.indexOf(n)>-1?r:tE.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let pze=0;class tE{constructor(e){this.name=e,this.instances=[],this.id=pze++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&gze(n,a.modified));if(r)return r;let i=[],s=new hu(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=mze(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(tE.get(a,l));return s}}function gze(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function mze(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function _$(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new E_(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return zle.add(e)}const zle=new vn({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let s=new E_(i.tags,i.mode,i.context);n?n.next=s:r=s,n=s}return r}});let E_=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};E_.empty=new E_([],2,null);function jle(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function yze(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function bze(t,e,n,r=0,i=t.length){let s=new vze(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class vze{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=i,c=xze(e)||E_.empty,f=yze(s,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(vn.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),m=e.firstChild();for(let y=0,b=a;;y++){let v=y<h.overlay.length?h.overlay[y]:null,w=v?v.from+a:l,_=Math.max(n,b),S=Math.min(r,w);if(_<S&&m)for(;e.from<S&&(this.highlightRange(e,_,S,i,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=w||!e.nextSibling())););if(!v||w>r)break;b=v.to+a,b>n&&(this.highlightRange(d.cursor(),Math.max(n,v.from+a),Math.min(r,b),"",p),this.startSpan(Math.min(r,b),u))}m&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function xze(t){let e=t.type.prop(zle);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ve=hu.define,FA=Ve(),Ip=Ve(),GY=Ve(Ip),YY=Ve(Ip),Rp=Ve(),NA=Ve(Rp),m9=Ve(Rp),Qc=Ve(),kg=Ve(Qc),Yc=Ve(),Xc=Ve(),_F=Ve(),mx=Ve(_F),LA=Ve(),ye={comment:FA,lineComment:Ve(FA),blockComment:Ve(FA),docComment:Ve(FA),name:Ip,variableName:Ve(Ip),typeName:GY,tagName:Ve(GY),propertyName:YY,attributeName:Ve(YY),className:Ve(Ip),labelName:Ve(Ip),namespace:Ve(Ip),macroName:Ve(Ip),literal:Rp,string:NA,docString:Ve(NA),character:Ve(NA),attributeValue:Ve(NA),number:m9,integer:Ve(m9),float:Ve(m9),bool:Ve(Rp),regexp:Ve(Rp),escape:Ve(Rp),color:Ve(Rp),url:Ve(Rp),keyword:Yc,self:Ve(Yc),null:Ve(Yc),atom:Ve(Yc),unit:Ve(Yc),modifier:Ve(Yc),operatorKeyword:Ve(Yc),controlKeyword:Ve(Yc),definitionKeyword:Ve(Yc),moduleKeyword:Ve(Yc),operator:Xc,derefOperator:Ve(Xc),arithmeticOperator:Ve(Xc),logicOperator:Ve(Xc),bitwiseOperator:Ve(Xc),compareOperator:Ve(Xc),updateOperator:Ve(Xc),definitionOperator:Ve(Xc),typeOperator:Ve(Xc),controlOperator:Ve(Xc),punctuation:_F,separator:Ve(_F),bracket:mx,angleBracket:Ve(mx),squareBracket:Ve(mx),paren:Ve(mx),brace:Ve(mx),content:Qc,heading:kg,heading1:Ve(kg),heading2:Ve(kg),heading3:Ve(kg),heading4:Ve(kg),heading5:Ve(kg),heading6:Ve(kg),contentSeparator:Ve(Qc),list:Ve(Qc),quote:Ve(Qc),emphasis:Ve(Qc),strong:Ve(Qc),link:Ve(Qc),monospace:Ve(Qc),strikethrough:Ve(Qc),inserted:Ve(),deleted:Ve(),changed:Ve(),invalid:Ve(),meta:LA,documentMeta:Ve(LA),annotation:Ve(LA),processingInstruction:Ve(LA),definition:hu.defineModifier("definition"),constant:hu.defineModifier("constant"),function:hu.defineModifier("function"),standard:hu.defineModifier("standard"),local:hu.defineModifier("local"),special:hu.defineModifier("special")};for(let t in ye){let e=ye[t];e instanceof hu&&(e.name=t)}jle([{tag:ye.link,class:"tok-link"},{tag:ye.heading,class:"tok-heading"},{tag:ye.emphasis,class:"tok-emphasis"},{tag:ye.strong,class:"tok-strong"},{tag:ye.keyword,class:"tok-keyword"},{tag:ye.atom,class:"tok-atom"},{tag:ye.bool,class:"tok-bool"},{tag:ye.url,class:"tok-url"},{tag:ye.labelName,class:"tok-labelName"},{tag:ye.inserted,class:"tok-inserted"},{tag:ye.deleted,class:"tok-deleted"},{tag:ye.literal,class:"tok-literal"},{tag:ye.string,class:"tok-string"},{tag:ye.number,class:"tok-number"},{tag:[ye.regexp,ye.escape,ye.special(ye.string)],class:"tok-string2"},{tag:ye.variableName,class:"tok-variableName"},{tag:ye.local(ye.variableName),class:"tok-variableName tok-local"},{tag:ye.definition(ye.variableName),class:"tok-variableName tok-definition"},{tag:ye.special(ye.variableName),class:"tok-variableName2"},{tag:ye.definition(ye.propertyName),class:"tok-propertyName tok-definition"},{tag:ye.typeName,class:"tok-typeName"},{tag:ye.namespace,class:"tok-namespace"},{tag:ye.className,class:"tok-className"},{tag:ye.macroName,class:"tok-macroName"},{tag:ye.propertyName,class:"tok-propertyName"},{tag:ye.operator,class:"tok-operator"},{tag:ye.comment,class:"tok-comment"},{tag:ye.meta,class:"tok-meta"},{tag:ye.invalid,class:"tok-invalid"},{tag:ye.punctuation,class:"tok-punctuation"}]);var y9;const Uy=new vn;function wze(t){return Qe.define({combine:t?e=>e.concat(t):void 0})}const _ze=new vn;class oc{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Wn.prototype.hasOwnProperty("tree")||Object.defineProperty(Wn.prototype,"tree",{get(){return fs(this)}}),this.parser=n,this.extension=[rv.of(this),Wn.languageData.of((s,o,a)=>{let l=XY(s,o,a),u=l.type.prop(Uy);if(!u)return[];let c=s.facet(u),f=l.type.prop(_ze);if(f){let h=l.resolve(o-l.from,a);for(let d of f)if(d.test(h,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return XY(e,n,r).type.prop(Uy)==this.data}findRegions(e){let n=e.facet(rv);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Uy)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(vn.mounted);if(a){if(a.tree.prop(Uy)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof qs&&i(u,s.positions[l]+o)}};return i(fs(e),0),r}get allowsNesting(){return!0}}oc.setState=tn.define();function XY(t,e,n){let r=t.facet(rv),i=fs(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,_s.ExcludeBuffers))s.type.isTop&&(i=s);return i}class D_ extends oc{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=wze(e.languageData);return new D_(n,e.parser.configure({props:[Uy.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new D_(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function fs(t){let e=t.field(oc.state,!1);return e?e.tree:qs.empty}class Sze{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let yx=null,Aze=class SF{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new SF(e,n,[],qs.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Sze(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=qs.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(bm.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(bm.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=yx;yx=this;try{return e()}finally{yx=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=KY(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,h)=>l.push({fromA:u,toA:c,fromB:f,toB:h})),r=bm.applyChanges(r,l),i=qs.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&a.push({from:c,to:f})}}}return new SF(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=KY(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Ule{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=yx;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new qs(Va.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return yx}};function KY(t,e,n){return bm.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class nv{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new nv(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Aze.create(e.facet(rv).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new nv(r)}}oc.state=Os.define({create:nv.init,update(t,e){for(let n of e.effects)if(n.is(oc.setState))return n.value;return e.startState.facet(rv)!=e.state.facet(rv)?nv.init(e.state):t.apply(e)}});let qle=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(qle=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const b9=typeof navigator<"u"&&(!((y9=navigator.scheduling)===null||y9===void 0)&&y9.isInputPending)?()=>navigator.scheduling.isInputPending():null,Cze=Ji.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(oc.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(oc.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=qle(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(oc.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!b9?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>b9&&b9()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:oc.setState.of(new nv(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Qo(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),rv=Qe.define({combine(t){return t.length?t[0]:null},enables:t=>[oc.state,Cze,Ke.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Vle{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const kze=Qe.define(),tD=Qe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function nE(t){let e=t.facet(tD);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function T_(t,e){let n="",r=t.tabSize,i=t.facet(tD)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function S$(t,e){t instanceof Wn&&(t=new nD(t));for(let r of t.state.facet(kze)){let i=r(t,e);if(i!==void 0)return i}let n=fs(t.state);return n.length>=e?Eze(t,n,e):null}class nD{constructor(e,n={}){this.state=e,this.options=n,this.unit=nE(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return r2(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const A$=new vn;function Eze(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return Wle(r,t,n)}function Wle(t,e,n){for(let r=t;r;r=r.next){let i=Tze(r.node);if(i)return i(C$.create(e,n,r))}return 0}function Dze(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Tze(t){let e=t.type.prop(A$);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(vn.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Rze(o,!0,1,void 0,s&&!Dze(o)?i.from:void 0)}return t.parent==null?Oze:null}function Oze(){return 0}class C$ extends nD{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new C$(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Mze(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Wle(this.context.next,this.base,this.pos)}}function Mze(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Ize(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function Rze(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=Ize(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function AF({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const Fze=200;function Nze(){return Wn.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+Fze)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let f=S$(o,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=T_(o,f);h!=d&&l.push({from:c.from,to:c.from+h.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Hle=new vn;function Lze(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}class iS{constructor(e,n){this.specs=e;let r;function i(a){let l=D0.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof oc?a=>a.prop(Uy)==o.data:o?a=>a==o:void 0,this.style=jle(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new D0(r):null,this.themeType=n.themeType}static define(e,n){return new iS(e,n||{})}}const CF=Qe.define(),Gle=Qe.define({combine(t){return t.length?[t[0]]:null}});function v9(t){let e=t.facet(CF);return e.length?e:t.facet(Gle)}function Yle(t,e){let n=[Bze],r;return t instanceof iS&&(t.module&&n.push(Ke.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(Gle.of(t)):r?n.push(CF.computeN([Ke.darkTheme],i=>i.facet(Ke.darkTheme)==(r=="dark")?[t]:[])):n.push(CF.of(t)),n}class Pze{constructor(e){this.markCache=Object.create(null),this.tree=fs(e.state),this.decorations=this.buildDeco(e,v9(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=fs(e.state),r=v9(e.state),i=r!=v9(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Lt.none;let r=new E0;for(let{from:i,to:s}of e.visibleRanges)bze(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Lt.mark({class:l})))},i,s);return r.finish()}}const Bze=Q0.high(Ji.fromClass(Pze,{decorations:t=>t.decorations})),$ze=iS.define([{tag:ye.meta,color:"#404740"},{tag:ye.link,textDecoration:"underline"},{tag:ye.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ye.emphasis,fontStyle:"italic"},{tag:ye.strong,fontWeight:"bold"},{tag:ye.strikethrough,textDecoration:"line-through"},{tag:ye.keyword,color:"#708"},{tag:[ye.atom,ye.bool,ye.url,ye.contentSeparator,ye.labelName],color:"#219"},{tag:[ye.literal,ye.inserted],color:"#164"},{tag:[ye.string,ye.deleted],color:"#a11"},{tag:[ye.regexp,ye.escape,ye.special(ye.string)],color:"#e40"},{tag:ye.definition(ye.variableName),color:"#00f"},{tag:ye.local(ye.variableName),color:"#30a"},{tag:[ye.typeName,ye.namespace],color:"#085"},{tag:ye.className,color:"#167"},{tag:[ye.special(ye.variableName),ye.macroName],color:"#256"},{tag:ye.definition(ye.propertyName),color:"#00c"},{tag:ye.comment,color:"#940"},{tag:ye.invalid,color:"#f00"}]),Uze=Ke.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Xle=1e4,Kle="()[]{}",Qle=Qe.define({combine(t){return Zd(t,{afterCursor:!0,brackets:Kle,maxScanDistance:Xle,renderMatch:qze})}}),zze=Lt.mark({class:"cm-matchingBracket"}),jze=Lt.mark({class:"cm-nonmatchingBracket"});function qze(t){let e=[],n=t.matched?zze:jze;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Vze=Os.define({create(){return Lt.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Qle);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Ef(e.state,i.head,-1,r)||i.head>0&&Ef(e.state,i.head-1,1,r)||r.afterCursor&&(Ef(e.state,i.head,1,r)||i.head<e.state.doc.length&&Ef(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Lt.set(n,!0)},provide:t=>Ke.decorations.from(t)}),Wze=[Vze,Uze];function Hze(t={}){return[Qle.of(t),Wze]}const Gze=new vn;function kF(t,e,n){let r=t.prop(e<0?vn.openedBy:vn.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function EF(t){let e=t.type.prop(Gze);return e?e(t.node):t}function Ef(t,e,n,r={}){let i=r.maxScanDistance||Xle,s=r.brackets||Kle,o=fs(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=kF(l.type,n,s);if(u&&l.from<l.to){let c=EF(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Yze(t,e,n,l,c,u,s)}}return Xze(t,e,n,o,a.type,i,s)}function Yze(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a?.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let f=EF(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(kF(c.type,n,o))u++;else if(kF(c.type,-n,o)){if(u==0){let f=EF(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function Xze(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=s;){let d=c.value;n<0&&(h+=d.length);let p=e+h*n;for(let m=n>0?0:d.length-1,y=n>0?d.length:-1;m!=y;m+=n){let b=o.indexOf(d[m]);if(!(b<0||r.resolveInner(p+m,1).type!=i))if(b%2==0==n>0)f++;else{if(f==1)return{start:u,end:{from:p+m,to:p+m+1},matched:b>>1==l>>1};f--}}n>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}const Kze=Object.create(null),QY=[Va.none],JY=[],ZY=Object.create(null),Qze=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Qze[t]=Jze(Kze,e);function x9(t,e){JY.indexOf(t)>-1||(JY.push(t),console.warn(e))}function Jze(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||ye[u];c?typeof c=="function"?l.length?l=l.map(c):x9(u,`Modifier ${u} used at start of tag`):l.length?x9(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:x9(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=ZY[i];if(s)return s.id;let o=ZY[i]=Va.define({id:QY.length,name:r,props:[_$({[r]:n})]});return QY.push(o),o.id}Jr.RTL,Jr.LTR;class Jle{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=fs(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(eue(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function eX(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Zze(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=eX(e)+eX(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Zle(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Zze(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function eje(t,e){return n=>{for(let r=fs(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class tX{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function vm(t){return t.selection.main.from}function eue(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const k$=Jd.define();function tje(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:Se.cursor(a.from+s+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const nX=new WeakMap;function nje(t){if(!Array.isArray(t))return t;let e=nX.get(t);return e||nX.set(t,e=Zle(t)),e}const rE=tn.define(),O_=tn.define();class rje{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Da(e,n),i=yf(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Da(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let v=Da(e,0),w=yf(v),_=w==e.length?0:-100;if(v!=n[0])if(v==r[0])_+=-200;else return null;return this.ret(_,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let v=0,w=Math.min(e.length,200);v<w&&u<l;){let _=Da(e,v);(_==n[u]||_==r[u])&&(i[u++]=v),v+=yf(_)}if(u<l)return null}let c=0,f=0,h=!1,d=0,p=-1,m=-1,y=/[a-z]/.test(e),b=!0;for(let v=0,w=Math.min(e.length,200),_=0;v<w&&f<l;){let S=Da(e,v);a<0&&(c<l&&S==n[c]&&(s[c++]=v),d<l&&(S==n[d]||S==r[d]?(d==0&&(p=v),m=v+1,d++):d=0));let A,C=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(A=r$(S))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!v||C==1&&y||_==0&&C!=0)&&(n[f]==S||r[f]==S&&(h=!0)?o[f++]=v:o.length&&(b=!1)),_=C,v+=yf(S)}return f==l&&o[0]==0&&b?this.result(-100+(h?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[p,m]):f==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?yf(Da(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class ije{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const As=Qe.define({combine(t){return Zd(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:sje,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>rX(e(r),n(r)),optionClass:(e,n)=>r=>rX(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function rX(t,e){return t?e?t+" "+e:t:e}function sje(t,e,n,r,i,s){let o=t.textDirection==Jr.RTL,a=o,l=!1,u="top",c,f,h=e.left-i.left,d=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&h<Math.min(p,d)?a=!1:!a&&d<Math.min(p,h)&&(a=!0),p<=(a?h:d))c=Math.max(i.top,Math.min(n.top,i.bottom-m))-e.top,f=Math.min(400,a?h:d);else{l=!0,f=Math.min(400,(o?e.right:i.right-e.left)-30);let v=i.bottom-e.bottom;v>=m||v>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let y=(e.bottom-e.top)/s.offsetHeight,b=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/y}px; max-width: ${f/b}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function oje(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],f=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(c,f))),h.className="cm-completionMatchedText",l=f}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function w9(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class aje{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(As);this.optionContent=oje(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=w9(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(As).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:O_.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=w9(s.length,o,e.state.facet(As).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=w9(n.options.length,n.selected,this.view.state.facet(As).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Qo(this.view.state,a,"completion info")):(this.addInfoPane(o,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&uje(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(As).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>r.from||r.from==0))if(s=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let f=this.optionClass(a);f&&(c.className=f);for(let h of this.optionContent){let d=h(a,this.view.state,this.view,l);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function lje(t,e){return n=>new aje(n,t,e)}function uje(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function iX(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function cje(t,e){let n=[],r=null,i=null,s=c=>{n.push(c);let{section:f}=c.completion;if(f){r||(r=[]);let h=typeof f=="string"?f:f.name;r.some(d=>d.name==h)||r.push(typeof f=="string"?{name:h}:f)}},o=e.facet(As);for(let c of t)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)s(new tX(h,c.source,f?f(h):[],1e9-n.length));else{let h=e.sliceDoc(c.from,c.to),d,p=o.filterStrict?new ije(h):new rje(h);for(let m of c.result.options)if(d=p.match(m.label)){let y=m.displayLabel?f?f(m,d.matched):[]:d.matched,b=d.score+(m.boost||0);if(s(new tX(m,c.source,y,b)),typeof m.section=="object"&&m.section.rank==="dynamic"){let{name:v}=m.section;i||(i=Object.create(null)),i[v]=Math.max(b,i[v]||-1e9)}}}}if(r){let c=Object.create(null),f=0,h=(d,p)=>(d.rank==="dynamic"&&p.rank==="dynamic"?i[p.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof p.rank=="number"?p.rank:1e9)||(d.name<p.name?-1:1);for(let d of r.sort(h))f-=1e5,c[d.name]=f;for(let d of n){let{section:p}=d.completion;p&&(d.score+=c[typeof p=="string"?p:p.name])}}let a=[],l=null,u=o.compareCompletions;for(let c of n.sort((f,h)=>h.score-f.score||u(f.completion,h.completion))){let f=c.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?a.push(c):iX(c.completion)>iX(l)&&(a[a.length-1]=c),l=c.completion}return a}class zy{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new zy(this.options,sX(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let a=cje(e,n);if(!a.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=n.facet(As).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new zy(a,sX(r,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:mje,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new zy(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new zy(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class iE{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new iE(pje,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(As),s=(r.override||n.languageDataAt("autocomplete",vm(n)).map(nje)).map(l=>(this.active.find(c=>c.source==l)||new yu(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(E$));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!fje(s,this.active)||a?o=zy.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new yu(l.source,0):l));for(let l of e.effects)l.is(nue)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new iE(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?hje:dje}}function fje(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const hje={"aria-autocomplete":"list"},dje={};function sX(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const pje=[];function tue(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(k$);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class yu{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=tue(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new yu(i.source,0)),r&4&&i.state==0&&(i=new yu(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(rE))i=new yu(i.source,1,s.value);else if(s.is(O_))i=new yu(i.source,0);else if(s.is(E$))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(vm(e.state))}}class hb extends yu{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=vm(e.state);if(a>o||!i||n&2&&(vm(e.startState)==this.from||a<this.limit))return new yu(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return gje(i.validFor,e.state,s,o)?new hb(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new Jle(e.state,a,!1)))?new hb(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:vm(e.state)):new yu(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new hb(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new yu(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function gje(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):eue(t,!0).test(i)}const E$=tn.define({map(t,e){return t.map(n=>n.map(e))}}),nue=tn.define(),Ta=Os.define({create(){return iE.start()},update(t,e){return t.update(e)},provide:t=>[y$.from(t,e=>e.tooltip),Ke.contentAttributes.from(t,e=>e.attrs)]});function D$(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Ta).active.find(i=>i.source==e.source);return r instanceof hb?(typeof n=="string"?t.dispatch({...tje(t.state,n,r.from,r.to),annotations:k$.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const mje=lje(Ta,D$);function PA(t,e="option"){return n=>{let r=n.state.field(Ta,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(As).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Rle(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:nue.of(a)}),!0}}const yje=t=>{let e=t.state.field(Ta,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(As).interactionDelay?!1:D$(t,e.open.options[e.open.selected])},_9=t=>t.state.field(Ta,!1)?(t.dispatch({effects:rE.of(!0)}),!0):!1,bje=t=>{let e=t.state.field(Ta,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:O_.of(null)}),!0)};class vje{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const xje=50,wje=1e3,_je=Ji.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Ta).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Ta),n=t.state.facet(As);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Ta)==e)return;let r=t.transactions.some(s=>{let o=tue(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>xje&&Date.now()-o.time>wje){for(let a of o.context.abortListeners)try{a()}catch(l){Qo(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(rE)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Ta);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(As).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=vm(e),r=new Jle(e,n,t.explicit,this.view),i=new vje(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:O_.of(null)}),Qo(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(As).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(As),r=this.view.state.field(Ta);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=vm(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),u=new hb(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let c of s.updates)u=u.update(c,n);if(u.hasResult()){e.push(u);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new yu(s.active.source,0);for(let l of s.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:E$.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Ta,!1);if(e&&e.tooltip&&this.view.state.facet(As).closeOnBlur){let n=e.open&&Rle(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:O_.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:rE.of(!1)}),20),this.composing=0}}}),Sje=typeof navigator=="object"&&/Win/.test(navigator.platform),Aje=Q0.highest(Ke.domEventHandlers({keydown(t,e){let n=e.state.field(Ta,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(Sje&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&D$(e,r),!1}})),rue=Ke.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ'"}},".cm-completionIcon-class":{"&:after":{content:"'â'"}},".cm-completionIcon-interface":{"&:after":{content:"'â'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âª'"}},".cm-completionIcon-property":{"&:after":{content:"'â¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðï¸'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Cje{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class T${constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,$s.TrackDel),r=e.mapPos(this.to,1,$s.TrackDel);return n==null||r==null?null:new T$(this.field,n,r)}}class O${constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let u=o,c=/^\t*/.exec(l)[0].length;for(let f=0;f<c;f++)u+=e.facet(tD);i.push(n+u.length-c),l=u+l.slice(c)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new T$(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",u=-1,c=l.replace(/\\[{}]/g,f=>f[1]);for(let f=0;f<n.length;f++)(a!=null?n[f].seq==a:c&&n[f].name==c)&&(u=f);if(u<0){let f=0;for(;f<n.length&&(a==null||n[f].seq!=null&&n[f].seq<a);)f++;n.splice(f,0,{seq:a,name:c}),u=f;for(let h of i)h.field>=u&&h.field++}for(let f of i)if(f.line==r.length&&f.from>s.index){let h=s[2]?3+(s[1]||"").length:2;f.from-=h,f.to-=h}i.push(new Cje(u,r.length,s.index,s.index+c.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,u)=>{for(let c of i)c.line==r.length&&c.from>u&&(c.from--,c.to--);return l}),r.push(o)}return new O$(r,i)}}let kje=Lt.widget({widget:new class extends v1{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Eje=Lt.mark({class:"cm-snippetField"});class i2{constructor(e,n){this.ranges=e,this.active=n,this.deco=Lt.set(e.map(r=>(r.from==r.to?kje:Eje).range(r.from,r.to)),!0)}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new i2(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const sS=tn.define({map(t,e){return t&&t.map(e)}}),Dje=tn.define(),M_=Os.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(sS))return n.value;if(n.is(Dje)&&t)return new i2(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Ke.decorations.from(t,e=>e?e.deco:Lt.none)});function M$(t,e){return Se.create(t.filter(n=>n.field==e).map(n=>Se.range(n.from,n.to)))}function Tje(t){let e=O$.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),{main:l}=n.state.selection,u={changes:{from:i,to:s==l.from?l.to:s,insert:Yn.of(o)},scrollIntoView:!0,annotations:r?[k$.of(r),Ki.userEvent.of("input.complete")]:void 0};if(a.length&&(u.selection=M$(a,0)),a.some(c=>c.field>0)){let c=new i2(a,0),f=u.effects=[sS.of(c)];n.state.field(M_,!1)===void 0&&f.push(tn.appendConfig.of([M_,Fje,Lje,rue]))}n.dispatch(n.state.update(u))}}function iue(t){return({state:e,dispatch:n})=>{let r=e.field(M_,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:M$(r.ranges,i),effects:sS.of(s?null:new i2(r.ranges,i)),scrollIntoView:!0})),!0}}const Oje=({state:t,dispatch:e})=>t.field(M_,!1)?(e(t.update({effects:sS.of(null)})),!0):!1,Mje=iue(1),Ije=iue(-1),Rje=[{key:"Tab",run:Mje,shift:Ije},{key:"Escape",run:Oje}],oX=Qe.define({combine(t){return t.length?t[0]:Rje}}),Fje=Q0.highest(Z8.compute([oX],t=>t.facet(oX)));function Nje(t,e){return{...e,apply:Tje(t)}}const Lje=Ke.domEventHandlers({mousedown(t,e){let n=e.state.field(M_,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:M$(n.ranges,i.field),effects:sS.of(n.ranges.some(s=>s.field>i.field)?new i2(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),I_={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Qg=tn.define({map(t,e){let n=e.mapPos(t,-1,$s.TrackAfter);return n??void 0}}),I$=new class extends Wm{};I$.startSide=1;I$.endSide=-1;const sue=Os.define({create(){return nr.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Qg)&&(t=t.update({add:[I$.range(n.value,n.value+1)]}));return t}});function Pje(){return[$je,sue]}const S9="()[]{}<>Â«Â»Â»Â«ï¼»ï¼½ï½ï½";function oue(t){for(let e=0;e<S9.length;e+=2)if(S9.charCodeAt(e)==t)return S9.charAt(e+1);return r$(t<128?t:t+1)}function aue(t,e){return t.languageDataAt("closeBrackets",e)[0]||I_}const Bje=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$je=Ke.inputHandler.of((t,e,n,r)=>{if((Bje?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&yf(Da(r,0))==1||e!=i.from||n!=i.to)return!1;let s=jje(t.state,r);return s?(t.dispatch(s),!0):!1}),Uje=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=aue(t,t.selection.main.head).brackets||I_.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=qje(t.doc,o.head);for(let l of r)if(l==a&&rD(t.doc,o.head)==oue(Da(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:Se.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},zje=[{key:"Backspace",run:Uje}];function jje(t,e){let n=aue(t,t.selection.main.head),r=n.brackets||I_.brackets;for(let i of r){let s=oue(Da(i,0));if(e==i)return s==i?Hje(t,i,r.indexOf(i+i+i)>-1,n):Vje(t,i,s,n.before||I_.before);if(e==s&&lue(t,t.selection.main.from))return Wje(t,i,s)}return null}function lue(t,e){let n=!1;return t.field(sue).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function rD(t,e){let n=t.sliceString(e,e+2);return n.slice(0,yf(Da(n,0)))}function qje(t,e){let n=t.sliceString(e-2,e);return yf(Da(n,0))==n.length?n:n.slice(1)}function Vje(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Qg.of(o.to+e.length),range:Se.range(o.anchor+e.length,o.head+e.length)};let a=rD(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Qg.of(o.head+e.length),range:Se.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Wje(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&rD(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:Se.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Hje(t,e,n,r){let i=r.stringPrefixes||I_.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Qg.of(a.to+e.length),range:Se.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=rD(t.doc,l),c;if(u==e){if(aX(t,l))return{changes:{insert:e+e,from:l},effects:Qg.of(l+e.length),range:Se.cursor(l+e.length)};if(lue(t,l)){let h=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:Se.cursor(l+h.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(c=lX(t,l-2*e.length,i))>-1&&aX(t,c))return{changes:{insert:e+e+e+e,from:l},effects:Qg.of(l+e.length),range:Se.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=li.Word&&lX(t,l,i)>-1&&!Gje(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Qg.of(l+e.length),range:Se.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function aX(t,e){let n=fs(t).resolveInner(e+1);return n.parent&&n.from==e}function Gje(t,e,n,r){let i=fs(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>n.length+l;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function lX(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=li.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=li.Word)return s}return-1}function Yje(t={}){return[Aje,Ta,As.of(t),_je,Xje,rue]}const uue=[{key:"Ctrl-Space",run:_9},{mac:"Alt-`",run:_9},{mac:"Alt-i",run:_9},{key:"Escape",run:bje},{key:"ArrowDown",run:PA(!0)},{key:"ArrowUp",run:PA(!1)},{key:"PageDown",run:PA(!0,"page")},{key:"PageUp",run:PA(!1,"page")},{key:"Enter",run:yje}],Xje=Q0.highest(Z8.computeN([As],t=>t.facet(As).defaultKeymap?[uue]:[])),Kje=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=F$(t.state,n.from);return r.line?Qje(t):r.block?Zje(t):!1};function R$(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Qje=R$(nqe,0),Jje=R$(cue,0),Zje=R$((t,e)=>cue(t,e,tqe(e)),0);function F$(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const bx=50;function eqe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-bx,r),o=t.sliceDoc(i,i+bx),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*bx?c=f=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+bx),f=t.sliceDoc(i-bx,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-n.length;return c.slice(h,h+e.length)==e&&f.slice(p,p+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function tqe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function cue(t,e,n=e.selection.ranges){let r=n.map(s=>F$(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>eqe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function nqe(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,u=F$(e,s).line;if(u){for(let c=s;c<=o;){let f=e.doc.lineAt(c);if(f.from>i&&(s==o||o>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<l&&(l=h),r.push({line:f,comment:p,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const DF=Jd.define(),rqe=Jd.define(),iqe=Qe.define(),fue=Qe.define({combine(t){return Zd(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),hue=Os.define({create(){return Df.empty},update(t,e){let n=e.state.facet(fue),r=e.annotation(DF);if(r){let l=Ra.fromTransaction(e,r.selection),u=r.side,c=u==0?t.undone:t.done;return l?c=sE(c,c.length,n.minDepth,l):c=gue(c,e.startState.selection),new Df(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(rqe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Ki.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ra.fromTransaction(e),o=e.annotation(Ki.time),a=e.annotation(Ki.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Df(t.done.map(Ra.fromJSON),t.undone.map(Ra.fromJSON))}});function sqe(t={}){return[hue,fue.of(t),Ke.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?due:e.inputType=="historyRedo"?TF:null;return r?(e.preventDefault(),r(n)):!1}})]}function iD(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(hue,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const due=iD(0,!1),TF=iD(1,!1),oqe=iD(0,!0),aqe=iD(1,!0);class Ra{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Ra(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ra(e.changes&&as.fromJSON(e.changes),[],e.mapped&&$f.fromJSON(e.mapped),e.startSelection&&Se.fromJSON(e.startSelection),e.selectionsAfter.map(Se.fromJSON))}static fromTransaction(e,n){let r=bu;for(let i of e.startState.facet(iqe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Ra(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,bu)}static selection(e){return new Ra(void 0,bu,void 0,void 0,e)}}function sE(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function lqe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(r=!0)}}),r}function uqe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function pue(t,e){return t.length?e.length?t.concat(e):t:e}const bu=[],cqe=200;function gue(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-cqe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),sE(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Ra.selection([e])]}function fqe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function A9(t,e){if(!t.length)return t;let n=t.length,r=bu;for(;n;){let i=hqe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Ra.selection(r)]:bu}function hqe(t,e,n){let r=pue(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):bu,n);if(!t.changes)return Ra.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Ra(i,tn.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const dqe=/^(input\.type|delete)($|\.)/;class Df{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Df(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||dqe.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,lqe(a.changes,e.changes))||r=="input.type.compose")?o=sE(o,o.length-1,i.minDepth,new Ra(e.changes.compose(a.changes),pue(tn.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,bu)):o=sE(o,o.length,i.minDepth,e),new Df(o,bu,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:bu;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&uqe(s[s.length-1],e)?this:new Df(gue(this.done,e),this.undone,n,r)}addMapping(e){return new Df(A9(this.done,e),A9(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:DF.of({side:e,rest:fqe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?bu:i.slice(0,i.length-1);return s.mapped&&(a=A9(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:DF.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Df.empty=new Df(bu,bu);const pqe=[{key:"Mod-z",run:due,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:TF,preventDefault:!0},{linux:"Ctrl-Shift-z",run:TF,preventDefault:!0},{key:"Mod-u",run:oqe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:aqe,preventDefault:!0}];function s2(t,e){return Se.create(t.ranges.map(e),t.mainIndex)}function Fc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Nc({state:t,dispatch:e},n){let r=s2(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Fc(t,r)),!0)}function sD(t,e){return Se.cursor(e?t.to:t.from)}function mue(t,e){return Nc(t,n=>n.empty?t.moveByChar(n,e):sD(n,e))}function Do(t){return t.textDirectionAt(t.state.selection.main.head)==Jr.LTR}const yue=t=>mue(t,!Do(t)),bue=t=>mue(t,Do(t));function vue(t,e){return Nc(t,n=>n.empty?t.moveByGroup(n,e):sD(n,e))}const gqe=t=>vue(t,!Do(t)),mqe=t=>vue(t,Do(t));function yqe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function oD(t,e,n){let r=fs(t).resolveInner(e.head),i=n?vn.closedBy:vn.openedBy;for(let l=e.head;;){let u=n?r.childAfter(l):r.childBefore(l);if(!u)break;yqe(t,u,i)?r=u:l=n?u.to:u.from}let s=r.type.prop(i),o,a;return s&&(o=n?Ef(t,r.from,1):Ef(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,Se.cursor(a,n?-1:1)}const bqe=t=>Nc(t,e=>oD(t.state,e,!Do(t))),vqe=t=>Nc(t,e=>oD(t.state,e,Do(t)));function xue(t,e){return Nc(t,n=>{if(!n.empty)return sD(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const wue=t=>xue(t,!1),_ue=t=>xue(t,!0);function Sue(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Ke.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Aue(t,e){let n=Sue(t),{state:r}=t,i=s2(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):sD(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Ke.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Fc(r,i),{effects:s}),!0}const uX=t=>Aue(t,!1),OF=t=>Aue(t,!0);function J0(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Se.cursor(r.from+s))}return i}const xqe=t=>Nc(t,e=>J0(t,e,!0)),wqe=t=>Nc(t,e=>J0(t,e,!1)),_qe=t=>Nc(t,e=>J0(t,e,!Do(t))),Sqe=t=>Nc(t,e=>J0(t,e,Do(t))),Aqe=t=>Nc(t,e=>Se.cursor(t.lineBlockAt(e.head).from,1)),Cqe=t=>Nc(t,e=>Se.cursor(t.lineBlockAt(e.head).to,-1));function kqe(t,e,n){let r=!1,i=s2(t.selection,s=>{let o=Ef(t,s.head,-1)||Ef(t,s.head,1)||s.head>0&&Ef(t,s.head-1,1)||s.head<t.doc.length&&Ef(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return Se.cursor(a)});return r?(e(Fc(t,i)),!0):!1}const Eqe=({state:t,dispatch:e})=>kqe(t,e);function Nu(t,e){let n=s2(t.state.selection,r=>{let i=e(r);return Se.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Fc(t.state,n)),!0)}function Cue(t,e){return Nu(t,n=>t.moveByChar(n,e))}const kue=t=>Cue(t,!Do(t)),Eue=t=>Cue(t,Do(t));function Due(t,e){return Nu(t,n=>t.moveByGroup(n,e))}const Dqe=t=>Due(t,!Do(t)),Tqe=t=>Due(t,Do(t)),Oqe=t=>Nu(t,e=>oD(t.state,e,!Do(t))),Mqe=t=>Nu(t,e=>oD(t.state,e,Do(t)));function Tue(t,e){return Nu(t,n=>t.moveVertically(n,e))}const Oue=t=>Tue(t,!1),Mue=t=>Tue(t,!0);function Iue(t,e){return Nu(t,n=>t.moveVertically(n,e,Sue(t).height))}const cX=t=>Iue(t,!1),fX=t=>Iue(t,!0),Iqe=t=>Nu(t,e=>J0(t,e,!0)),Rqe=t=>Nu(t,e=>J0(t,e,!1)),Fqe=t=>Nu(t,e=>J0(t,e,!Do(t))),Nqe=t=>Nu(t,e=>J0(t,e,Do(t))),Lqe=t=>Nu(t,e=>Se.cursor(t.lineBlockAt(e.head).from)),Pqe=t=>Nu(t,e=>Se.cursor(t.lineBlockAt(e.head).to)),hX=({state:t,dispatch:e})=>(e(Fc(t,{anchor:0})),!0),dX=({state:t,dispatch:e})=>(e(Fc(t,{anchor:t.doc.length})),!0),pX=({state:t,dispatch:e})=>(e(Fc(t,{anchor:t.selection.main.anchor,head:0})),!0),gX=({state:t,dispatch:e})=>(e(Fc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Bqe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),$qe=({state:t,dispatch:e})=>{let n=aD(t).map(({from:r,to:i})=>Se.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Se.create(n),userEvent:"select"})),!0},Uqe=({state:t,dispatch:e})=>{let n=s2(t.selection,r=>{let i=fs(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return Se.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(Fc(t,n)),!0)};function Rue(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let o=n.doc.lineAt(s.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=s;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){i.some(u=>u.head==l.head)||i.push(l);break}else{if(l.head==a.head)break;a=l}}}return i.length==r.ranges.length?!1:(t.dispatch(Fc(n,Se.create(i,i.length-1))),!0)}const zqe=t=>Rue(t,!1),jqe=t=>Rue(t,!0),qqe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Se.create([n.main]):n.main.empty||(r=Se.create([Se.cursor(n.main.head)])),r?(e(Fc(t,r)),!0):!1};function oS(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=BA(t,l,!1)):l>o&&(n="delete.forward",l=BA(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=BA(t,o,!1),a=BA(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:Se.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Ke.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function BA(t,e,n){if(t instanceof Ke)for(let r of t.state.facet(Ke.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Fue=(t,e,n)=>oS(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let u=r2(a,s.tabSize),c=u%nE(s)||nE(s);for(let f=0;f<c&&a[a.length-1-f]==" ";f++)i--;l=i}else l=js(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=js(o.text,l-o.from,!1,!1)+o.from);return l}),MF=t=>Fue(t,!1,!0),Nue=t=>Fue(t,!0,!1),Lue=(t,e)=>oS(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=js(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=n.head)&&(a=c),r=l}return r}),Pue=t=>Lue(t,!1),Vqe=t=>Lue(t,!0),Wqe=t=>oS(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Hqe=t=>oS(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),Gqe=t=>oS(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Yqe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Yn.of(["",""])},range:Se.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Xqe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:js(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:js(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:Se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function aD(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Bue(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of aD(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(Se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(Se.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Se.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Kqe=({state:t,dispatch:e})=>Bue(t,e,!1),Qqe=({state:t,dispatch:e})=>Bue(t,e,!0);function $ue(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of aD(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Jqe=({state:t,dispatch:e})=>$ue(t,e,!1),Zqe=({state:t,dispatch:e})=>$ue(t,e,!0),eVe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(aD(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=s2(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function tVe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=fs(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(vn.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const mX=Uue(!1),nVe=Uue(!0);function Uue(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&tVe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new nD(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=S$(u,s);for(c==null&&(c=r2(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let f=["",T_(e,c)];return l&&f.push(T_(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Yn.of(f)},range:Se.cursor(s+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function N$(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:Se.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const rVe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new nD(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=N$(t,(s,o,a)=>{let l=S$(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],c=T_(t,l);(u!=c||a.from<s.from+u.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},zue=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(N$(t,(n,r)=>{r.push({from:n.from,insert:t.facet(tD)})}),{userEvent:"input.indent"})),!0),jue=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(N$(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=r2(i,t.tabSize),o=0,a=T_(t,Math.max(0,s-nE(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),iVe=t=>(t.setTabFocusMode(),!0),sVe=({state:t,dispatch:e})=>t.selection.ranges.some(n=>!n.empty)?zue({state:t,dispatch:e}):(e(t.update(t.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),oVe=[{key:"Ctrl-b",run:yue,shift:kue,preventDefault:!0},{key:"Ctrl-f",run:bue,shift:Eue},{key:"Ctrl-p",run:wue,shift:Oue},{key:"Ctrl-n",run:_ue,shift:Mue},{key:"Ctrl-a",run:Aqe,shift:Lqe},{key:"Ctrl-e",run:Cqe,shift:Pqe},{key:"Ctrl-d",run:Nue},{key:"Ctrl-h",run:MF},{key:"Ctrl-k",run:Wqe},{key:"Ctrl-Alt-h",run:Pue},{key:"Ctrl-o",run:Yqe},{key:"Ctrl-t",run:Xqe},{key:"Ctrl-v",run:OF}],aVe=[{key:"ArrowLeft",run:yue,shift:kue,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:gqe,shift:Dqe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_qe,shift:Fqe,preventDefault:!0},{key:"ArrowRight",run:bue,shift:Eue,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:mqe,shift:Tqe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Sqe,shift:Nqe,preventDefault:!0},{key:"ArrowUp",run:wue,shift:Oue,preventDefault:!0},{mac:"Cmd-ArrowUp",run:hX,shift:pX},{mac:"Ctrl-ArrowUp",run:uX,shift:cX},{key:"ArrowDown",run:_ue,shift:Mue,preventDefault:!0},{mac:"Cmd-ArrowDown",run:dX,shift:gX},{mac:"Ctrl-ArrowDown",run:OF,shift:fX},{key:"PageUp",run:uX,shift:cX},{key:"PageDown",run:OF,shift:fX},{key:"Home",run:wqe,shift:Rqe,preventDefault:!0},{key:"Mod-Home",run:hX,shift:pX},{key:"End",run:xqe,shift:Iqe,preventDefault:!0},{key:"Mod-End",run:dX,shift:gX},{key:"Enter",run:mX,shift:mX},{key:"Mod-a",run:Bqe},{key:"Backspace",run:MF,shift:MF,preventDefault:!0},{key:"Delete",run:Nue,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Pue,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Vqe,preventDefault:!0},{mac:"Mod-Backspace",run:Hqe,preventDefault:!0},{mac:"Mod-Delete",run:Gqe,preventDefault:!0}].concat(oVe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),lVe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:bqe,shift:Oqe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:vqe,shift:Mqe},{key:"Alt-ArrowUp",run:Kqe},{key:"Shift-Alt-ArrowUp",run:Jqe},{key:"Alt-ArrowDown",run:Qqe},{key:"Shift-Alt-ArrowDown",run:Zqe},{key:"Mod-Alt-ArrowUp",run:zqe},{key:"Mod-Alt-ArrowDown",run:jqe},{key:"Escape",run:qqe},{key:"Mod-Enter",run:nVe},{key:"Alt-l",mac:"Ctrl-l",run:$qe},{key:"Mod-i",run:Uqe,preventDefault:!0},{key:"Mod-[",run:jue},{key:"Mod-]",run:zue},{key:"Mod-Alt-\\",run:rVe},{key:"Shift-Mod-k",run:eVe},{key:"Shift-Mod-\\",run:Eqe},{key:"Mod-/",run:Kje},{key:"Alt-A",run:Jje},{key:"Ctrl-m",mac:"Shift-Alt-m",run:iVe}].concat(aVe);var yX={};class oE{constructor(e,n,r,i,s,o,a,l,u,c=0,f){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new oE(e,[],n,r,r,0,[],0,i?new bX(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let f=l?this.stack[l-1]:0,h=this.bufferBase+this.buffer.length-f;if(i<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,u,d,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let d=this.stack[l-3];this.state=s.getGoto(d,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,u)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||n<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new oE(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new uVe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,l)=>l&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,u=this.stack.length-a*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new bX(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class bX{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class uVe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class aE{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new aE(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new aE(this.stack,this.pos,this.index)}}function $A(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class _C{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const vX=new _C;class cVe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=vX,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=vX,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class db{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;hVe(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}db.prototype.contextual=db.prototype.fallback=db.prototype.extend=!1;db.prototype.fallback=db.prototype.extend=!1;class fVe{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function hVe(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;(a&t[o])!=0;){let u=t[o+1];for(let d=o+3;d<u;d+=2)if((t[d+1]&a)>0){let p=t[d];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||dVe(p,e.token.value,i,s))){e.acceptToken(p);break}}let c=e.next,f=0,h=t[o+2];if(e.next<0&&h>f&&t[u+h*3-3]==65535){o=t[u+h*3-1];continue e}for(;f<h;){let d=f+h>>1,p=u+d+(d<<1),m=t[p],y=t[p+1]||65536;if(c<m)h=d;else if(c>=y)f=d+1;else{o=t[p+2],e.advance();continue e}}break}}function xX(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function dVe(t,e,n,r){let i=xX(n,r,e);return i<0||xX(n,r,t)<i}const al=typeof process<"u"&&yX&&/\bparse\b/.test(yX.LOG);let C9=null;function wX(t,e,n){let r=t.cursor(_s.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class pVe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?wX(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?wX(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof qs){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(vn.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class gVe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new _C)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<s.length;u++){if((1<<u&o)==0)continue;let c=s[u],f=this.tokens[u];if(!(r&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=o||f.context!=a)&&(this.updateCachedToken(f,c,e),f.mask=o,f.context=a),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let h=n;if(f.extended>-1&&(n=this.addActions(e,f.extended,f.end,n)),n=this.addActions(e,f.value,f.end,n),!c.extend&&(r=f,n>h))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new _C,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new _C,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(s,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=id(a,u+2);else{i==0&&a[u+1]==2&&(i=this.putAction(id(a,u+2),n,r,i));break}a[u]==n&&(i=this.putAction(id(a,u+1),n,r,i))}return i}}class mVe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new cVe(n,i),this.tokens=new gVe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[oE.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new pVe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&bVe(i);if(o)return al&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw al&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return al&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=al?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!u||(f.prop(vn.contextHash)||0)==c))return e.useNode(f,h),al&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof qs)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof qs&&f.positions[0]==0)f=d;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),al&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],f=l[u++],h=l[u++],d=u==l.length||!r,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(c,f,m?m.start:p.pos,h),al&&console.log(o+this.stackID(p)+` (via ${(c&65536)==0?"shift":`reduce of ${s.getName(c&65535)}`} for ${s.getName(f)} @ ${i}${p==e?"":", split"})`),d)return!0;p.pos>i?n.push(p):r.push(p)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return _X(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=n[o<<1],u=n[(o<<1)+1],c=al?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),al&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let f=a.split(),h=c;for(let d=0;d<10&&f.forceReduce()&&(al&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));d++)al&&(h=this.stackID(f)+" -> ");for(let d of a.recoverByInsert(l))al&&console.log(c+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),al&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),_X(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),qs.build({buffer:aE.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(C9||(C9=new WeakMap)).get(e);return n||C9.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function _X(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class yVe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class R_ extends Ule{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,l,u){i[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=vn[l]);for(let u=1;u<a.length;){let c=a[u++];if(c>=0)s(c,l,a[u++]);else{let f=a[u+-c];for(let h=-c;h>0;h--)s(a[u++],l,f);u++}}}this.nodeSet=new b$(n.map((a,l)=>Va.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Lle;let o=$A(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(SX),this.states=$A(e.states,Uint32Array),this.data=$A(e.stateData),this.goto=$A(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new db(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new mVe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let u=s+(o>>1);s<u;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=id(r,s+2)];else{if(r[s+1]==2)return id(r,s+2);break}if(o==n||o==0)return id(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=id(this.data,s+2);else break;i=n(id(this.data,s+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=id(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(R_.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=SX(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new yVe(e,r,i)}static deserialize(e){return new R_(e)}}function id(t,e){return t[e]|t[e+1]<<16}function bVe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function SX(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const vVe=36,AX=1,xVe=2,ty=3,k9=4,wVe=5,_Ve=6,SVe=7,AVe=8,CVe=9,kVe=10,EVe=11,DVe=12,TVe=13,OVe=14,MVe=15,IVe=16,RVe=17,CX=18,FVe=19,que=20,Vue=21,kX=22,NVe=23,LVe=24;function IF(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function PVe(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function Lg(t,e,n){for(let r=!1;;){if(t.next<0)return;if(t.next==e&&!r){t.advance();return}r=n&&!r&&t.next==92,t.advance()}}function BVe(t,e){e:for(;;){if(t.next<0)return;if(t.next==36){t.advance();for(let n=0;n<e.length;n++){if(t.next!=e.charCodeAt(n))continue e;t.advance()}if(t.next==36){t.advance();return}}else t.advance()}}function $Ve(t,e){let n="[{<(".indexOf(String.fromCharCode(e)),r=n<0?e:"]}>)".charCodeAt(n);for(;;){if(t.next<0)return;if(t.next==r&&t.peek(1)==39){t.advance(2);return}t.advance()}}function RF(t,e){for(;!(t.next!=95&&!IF(t.next));)e!=null&&(e+=String.fromCharCode(t.next)),t.advance();return e}function UVe(t){if(t.next==39||t.next==34||t.next==96){let e=t.next;t.advance(),Lg(t,e,!1)}else RF(t)}function EX(t,e){for(;t.next==48||t.next==49;)t.advance();e&&t.next==e&&t.advance()}function DX(t,e){for(;;){if(t.next==46){if(e)break;e=!0}else if(t.next<48||t.next>57)break;t.advance()}if(t.next==69||t.next==101)for(t.advance(),(t.next==43||t.next==45)&&t.advance();t.next>=48&&t.next<=57;)t.advance()}function TX(t){for(;!(t.next<0||t.next==10);)t.advance()}function Eg(t,e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)==t)return!0;return!1}const E9=` 	\r
`;function Wue(t,e,n){let r=Object.create(null);r.true=r.false=wVe,r.null=r.unknown=_Ve;for(let i of t.split(" "))i&&(r[i]=que);for(let i of e.split(" "))i&&(r[i]=Vue);for(let i of(n||"").split(" "))i&&(r[i]=LVe);return r}const Hue="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",Gue="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",FF={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:Wue(Gue,Hue)};function zVe(t,e,n,r){let i={};for(let s in FF)i[s]=(t.hasOwnProperty(s)?t:FF)[s];return e&&(i.words=Wue(e,n||"",r)),i}function Yue(t){return new fVe(e=>{var n;let{next:r}=e;if(e.advance(),Eg(r,E9)){for(;Eg(e.next,E9);)e.advance();e.acceptToken(vVe)}else if(r==36&&t.doubleDollarQuotedStrings){let i=RF(e,"");e.next==36&&(e.advance(),BVe(e,i),e.acceptToken(ty))}else if(r==39||r==34&&t.doubleQuotedStrings)Lg(e,r,t.backslashEscapes),e.acceptToken(ty);else if(r==35&&t.hashComments||r==47&&e.next==47&&t.slashComments)TX(e),e.acceptToken(AX);else if(r==45&&e.next==45&&(!t.spaceAfterDashes||e.peek(1)==32))TX(e),e.acceptToken(AX);else if(r==47&&e.next==42){e.advance();for(let i=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(i--,e.advance(),!i)break}else s==47&&e.next==42&&(i++,e.advance())}e.acceptToken(xVe)}else if((r==101||r==69)&&e.next==39)e.advance(),Lg(e,39,!0),e.acceptToken(ty);else if((r==110||r==78)&&e.next==39&&t.charSetCasts)e.advance(),Lg(e,39,t.backslashEscapes),e.acceptToken(ty);else if(r==95&&t.charSetCasts)for(let i=0;;i++){if(e.next==39&&i>1){e.advance(),Lg(e,39,t.backslashEscapes),e.acceptToken(ty);break}if(!IF(e.next))break;e.advance()}else if(t.plsqlQuotingMechanism&&(r==113||r==81)&&e.next==39&&e.peek(1)>0&&!Eg(e.peek(1),E9)){let i=e.peek(1);e.advance(2),$Ve(e,i),e.acceptToken(ty)}else if(Eg(r,t.identifierQuotes)){const i=r==91?93:r;Lg(e,i,!1),e.acceptToken(FVe)}else if(r==40)e.acceptToken(SVe);else if(r==41)e.acceptToken(AVe);else if(r==123)e.acceptToken(CVe);else if(r==125)e.acceptToken(kVe);else if(r==91)e.acceptToken(EVe);else if(r==93)e.acceptToken(DVe);else if(r==59)e.acceptToken(TVe);else if(t.unquotedBitLiterals&&r==48&&e.next==98)e.advance(),EX(e),e.acceptToken(kX);else if((r==98||r==66)&&(e.next==39||e.next==34)){const i=e.next;e.advance(),t.treatBitsAsBytes?(Lg(e,i,t.backslashEscapes),e.acceptToken(NVe)):(EX(e,i),e.acceptToken(kX))}else if(r==48&&(e.next==120||e.next==88)||(r==120||r==88)&&e.next==39){let i=e.next==39;for(e.advance();PVe(e.next);)e.advance();i&&e.next==39&&e.advance(),e.acceptToken(k9)}else if(r==46&&e.next>=48&&e.next<=57)DX(e,!0),e.acceptToken(k9);else if(r==46)e.acceptToken(OVe);else if(r>=48&&r<=57)DX(e,!1),e.acceptToken(k9);else if(Eg(r,t.operatorChars)){for(;Eg(e.next,t.operatorChars);)e.advance();e.acceptToken(MVe)}else if(Eg(r,t.specialVar))e.next==r&&e.advance(),UVe(e),e.acceptToken(RVe);else if(r==58||r==44)e.acceptToken(IVe);else if(IF(r)){let i=RF(e,String.fromCharCode(r));e.acceptToken(e.next==46||e.peek(-i.length-1)==46?CX:(n=t.words[i.toLowerCase()])!==null&&n!==void 0?n:CX)}})}const Xue=Yue(FF),jVe=R_.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"â  LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,Xue],topRules:{Script:[0,25]},tokenPrec:0});function NF(t){let e=t.cursor().moveTo(t.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function F_(t,e){let n=t.sliceString(e.from,e.to),r=/^([`'"\[])(.*)([`'"\]])$/.exec(n);return r?r[2]:n}function lE(t){return t&&(t.name=="Identifier"||t.name=="QuotedIdentifier")}function qVe(t,e){if(e.name=="CompositeIdentifier"){let n=[];for(let r=e.firstChild;r;r=r.nextSibling)lE(r)&&n.push(F_(t,r));return n}return[F_(t,e)]}function OX(t,e){for(let n=[];;){if(!e||e.name!=".")return n;let r=NF(e);if(!lE(r))return n;n.unshift(F_(t,r)),e=NF(r)}}function VVe(t,e){let n=fs(t).resolveInner(e,-1),r=HVe(t.doc,n);return n.name=="Identifier"||n.name=="QuotedIdentifier"||n.name=="Keyword"?{from:n.from,quoted:n.name=="QuotedIdentifier"?t.doc.sliceString(n.from,n.from+1):null,parents:OX(t.doc,NF(n)),aliases:r}:n.name=="."?{from:e,quoted:null,parents:OX(t.doc,n),aliases:r}:{from:e,quoted:null,parents:[],empty:!0,aliases:r}}const WVe=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function HVe(t,e){let n;for(let i=e;!n;i=i.parent){if(!i)return null;i.name=="Statement"&&(n=i)}let r=null;for(let i=n.firstChild,s=!1,o=null;i;i=i.nextSibling){let a=i.name=="Keyword"?t.sliceString(i.from,i.to).toLowerCase():null,l=null;if(!s)s=a=="from";else if(a=="as"&&o&&lE(i.nextSibling))l=F_(t,i.nextSibling);else{if(a&&WVe.has(a))break;o&&lE(i)&&(l=F_(t,i))}l&&(r||(r=Object.create(null)),r[l]=qVe(t,o)),o=/Identifier$/.test(i.name)?i:null}return r}function GVe(t,e,n){return n.map(r=>({...r,label:r.label[0]==t?r.label:t+r.label+e,apply:void 0}))}const YVe=/^\w*$/,XVe=/^[`'"\[]?\w*[`'"\]]?$/;function MX(t){return t.self&&typeof t.self.label=="string"}class L${constructor(e,n){this.idQuote=e,this.idCaseInsensitive=n,this.list=[],this.children=void 0}child(e){let n=this.children||(this.children=Object.create(null)),r=n[e];return r||(e&&!this.list.some(i=>i.label==e)&&this.list.push(IX(e,"type",this.idQuote,this.idCaseInsensitive)),n[e]=new L$(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let n=this.list.findIndex(r=>r.label==e.label);n>-1?this.list[n]=e:this.list.push(e)}addCompletions(e){for(let n of e)this.addCompletion(typeof n=="string"?IX(n,"property",this.idQuote,this.idCaseInsensitive):n)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):MX(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let n of Object.keys(e)){let r=e[n],i=null,s=n.replace(/\\?\./g,a=>a=="."?"\0":a).split("\0"),o=this;MX(r)&&(i=r.self,r=r.children);for(let a=0;a<s.length;a++)i&&a==s.length-1&&o.addCompletion(i),o=o.child(s[a].replace(/\\\./g,"."));o.addNamespace(r)}}}function IX(t,e,n,r){return new RegExp("^[a-z_][a-z_\\d]*$",r?"i":"").test(t)?{label:t,type:e}:{label:t,type:e,apply:n+t+Kue(n)}}function Kue(t){return t==="["?"]":t}function KVe(t,e,n,r,i,s){var o;let a=((o=s?.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',l=new L$(a,!!s?.spec.caseInsensitiveIdentifiers),u=i?l.child(i):null;return l.addNamespace(t),e&&(u||l).addCompletions(e),n&&l.addCompletions(n),u&&l.addCompletions(u.list),r&&l.addCompletions((u||l).child(r).list),c=>{let{parents:f,from:h,quoted:d,empty:p,aliases:m}=VVe(c.state,c.pos);if(p&&!c.explicit)return null;m&&f.length==1&&(f=m[f[0]]||f);let y=l;for(let v of f){for(;!y.children||!y.children[v];)if(y==l&&u)y=u;else if(y==u&&r)y=y.child(r);else return null;let w=y.maybeChild(v);if(!w)return null;y=w}let b=y.list;if(y==l&&m&&(b=b.concat(Object.keys(m).map(v=>({label:v,type:"constant"})))),d){let v=d[0],w=Kue(v),_=c.state.sliceDoc(c.pos,c.pos+1)==w;return{from:h,to:_?c.pos+1:void 0,options:GVe(v,w,b),validFor:XVe}}else return{from:h,options:b,validFor:YVe}}}function QVe(t){return t==Vue?"type":t==que?"keyword":"variable"}function JVe(t,e,n){let r=Object.keys(t).map(i=>n(e?i.toUpperCase():i,QVe(t[i])));return eje(["QuotedIdentifier","String","LineComment","BlockComment","."],Zle(r))}let ZVe=jVe.configure({props:[A$.add({Statement:AF()}),Hle.add({Statement(t,e){return{from:Math.min(t.from+100,e.doc.lineAt(t.from).to),to:t.to}},BlockComment(t){return{from:t.from+2,to:t.to-2}}}),_$({Keyword:ye.keyword,Type:ye.typeName,Builtin:ye.standard(ye.name),Bits:ye.number,Bytes:ye.string,Bool:ye.bool,Null:ye.null,Number:ye.number,String:ye.string,Identifier:ye.name,QuotedIdentifier:ye.special(ye.string),SpecialVar:ye.special(ye.name),LineComment:ye.lineComment,BlockComment:ye.blockComment,Operator:ye.operator,"Semi Punctuation":ye.punctuation,"( )":ye.paren,"{ }":ye.brace,"[ ]":ye.squareBracket})]});class N_{constructor(e,n,r){this.dialect=e,this.language=n,this.spec=r}get extension(){return this.language.extension}configureLanguage(e,n){return new N_(this.dialect,this.language.configure(e,n),this.spec)}static define(e){let n=zVe(e,e.keywords,e.types,e.builtin),r=D_.define({name:"sql",parser:ZVe.configure({tokenizers:[{from:Xue,to:Yue(n)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new N_(n,r,e)}}function eWe(t,e){return{label:t,type:e,boost:-1}}function tWe(t,e=!1,n){return JVe(t.dialect.words,e,n||eWe)}function nWe(t){return t.schema?KVe(t.schema,t.tables,t.schemas,t.defaultTable,t.defaultSchema,t.dialect||P$):()=>null}function rWe(t){return t.schema?(t.dialect||P$).language.data.of({autocomplete:nWe(t)}):[]}function iWe(t={}){let e=t.dialect||P$;return new Vle(e.language,[rWe(t),e.language.data.of({autocomplete:tWe(e,t.upperCaseKeywords,t.keywordCompletion)})])}const P$=N_.define({}),sWe=N_.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:Gue+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:Hue+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"});class RX{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class zg{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(Tf).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((d,p)=>d.from-p.from||d.to-p.to),o=new E0,a=[],l=0,u=r.doc.iter(),c=0,f=r.doc.length;for(let d=0;;){let p=d==s.length?null:s[d];if(!p&&!a.length)break;let m,y;if(a.length)m=l,y=a.reduce((w,_)=>Math.min(w,_.to),p&&p.from>m?p.from:1e8);else{if(m=p.from,m>f)break;y=p.to,a.push(p),d++}for(;d<s.length;){let w=s[d];if(w.from==m&&(w.to>w.from||w.to==m))a.push(w),d++,y=Math.min(w.to,y);else{y=Math.min(w.from,y);break}}y=Math.min(y,f);let b=!1;if(a.some(w=>w.from==m&&(w.to==y||y==f))&&(b=m==y,!b&&y-m<10)){let w=m-(c+u.value.length);w>0&&(u.next(w),c=m);for(let _=m;;){if(_>=y){b=!0;break}if(!u.lineBreak&&c+u.value.length>_)break;_=c+u.value.length,c+=u.value.length,u.next()}}let v=xWe(a);if(b)o.add(m,m,Lt.widget({widget:new mWe(v),diagnostics:a.slice()}));else{let w=a.reduce((_,S)=>S.markClass?_+" "+S.markClass:_,"");o.add(m,y,Lt.mark({class:"cm-lintRange cm-lintRange-"+v+w,diagnostics:a.slice(),inclusiveEnd:a.some(_=>_.to>y)}))}if(l=y,l==f)break;for(let w=0;w<a.length;w++)a[w].to<=l&&a.splice(w--,1)}let h=o.finish();return new zg(h,n,iv(h))}}function iv(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new RX(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new RX(r.from,s,r.diagnostic)}}),r}function oWe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(Tf).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(B$))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function Que(t,e){return t.field(Al,!1)?e:e.concat(tn.appendConfig.of(tce))}function aWe(t,e){return{effects:Que(t,[B$.of(e)])}}const B$=tn.define(),$$=tn.define(),Jue=tn.define(),Al=Os.define({create(){return new zg(Lt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=iv(n,t.selected.diagnostic,s)||iv(n,null,s)}!n.size&&i&&e.state.facet(Tf).autoPanel&&(i=null),t=new zg(n,i,r)}for(let n of e.effects)if(n.is(B$)){let r=e.state.facet(Tf).autoPanel?n.value.length?L_.open:null:t.panel;t=zg.init(n.value,r,e.state)}else n.is($$)?t=new zg(t.diagnostics,n.value?L_.open:null,t.selected):n.is(Jue)&&(t=new zg(t.diagnostics,t.panel,n.value));return t},provide:t=>[C_.from(t,e=>e.panel),Ke.decorations.from(t,e=>e.diagnostics)]}),lWe=Lt.mark({class:"cm-lintRange cm-lintRange-active"});function uWe(t,e,n){let{diagnostics:r}=t.state.field(Al),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{if(e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0)))return i=c.diagnostics,s=l,o=u,!1});let a=t.state.facet(Tf).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:cWe(t,i)}}}:null}function cWe(t,e){return Tr("ul",{class:"cm-tooltip-lint"},e.map(n=>ece(t,n,!1)))}const fWe=t=>{let e=t.state.field(Al,!1);(!e||!e.panel)&&t.dispatch({effects:Que(t.state,[$$.of(!0)])});let n=A_(t,L_.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},FX=t=>{let e=t.state.field(Al,!1);return!e||!e.panel?!1:(t.dispatch({effects:$$.of(!1)}),!0)},hWe=t=>{let e=t.state.field(Al,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},dWe=[{key:"Mod-Shift-m",run:fWe,preventDefault:!0},{key:"F8",run:hWe}],pWe=Ji.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Tf);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Tf);n.length&&gWe(n.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(aWe(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{Qo(this.view.state,r)})}}update(t){let e=t.state.facet(Tf);(t.docChanged||e!=t.startState.facet(Tf)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function gWe(t,e,n){let r=[],i=-1;for(let s of t)s.then(o=>{r.push(o),clearTimeout(i),r.length==t.length?e(r):i=setTimeout(()=>e(r),200)},n)}const Tf=Qe.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Zd(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:NX,tooltipFilter:NX,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,s)=>e(r,i,s)||n(r,i,s):e:n,autoPanel:(e,n)=>e||n})}}});function NX(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function LX(t,e={}){return[Tf.of({source:t,config:e}),pWe,tce]}function Zue(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function ece(t,e,n){var r;let i=n?Zue(e.actions):[];return Tr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Tr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let p=iv(t.state.field(Al).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,f=c<0?u:[u.slice(0,c),Tr("u",u.slice(c,c+1)),u.slice(c+1)],h=s.markClass?" "+s.markClass:"";return Tr("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},f)}),e.source&&Tr("div",{class:"cm-diagnosticSource"},e.source))}class mWe extends v1{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Tr("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PX{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=ece(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class L_{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)FX(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Zue(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=iv(this.view.state.field(Al).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Tr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Tr("div",{class:"cm-panel-lint"},this.list,Tr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>FX(this.view)},"Ã")),this.update()}get selectedIndex(){let e=this.view.state.field(Al).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Al),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let f=-1,h;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==c){f=d;break}f<0?(h=new PX(this.view,c),this.items.splice(r,0,h),i=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new PX(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let u=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/u:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Al),r=iv(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Jue.of(r)})}static open(e){return new L_(e)}}function yWe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function UA(t){return yWe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bWe=Ke.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:UA("#d11")},".cm-lintRange-warning":{backgroundImage:UA("orange")},".cm-lintRange-info":{backgroundImage:UA("#999")},".cm-lintRange-hint":{backgroundImage:UA("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function vWe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function xWe(t){let e="hint",n=1;for(let r of t){let i=vWe(r.severity);i>n&&(n=i,e=r.severity)}return e}const tce=[Al,Ke.decorations.compute([Al],t=>{let{selected:e,panel:n}=t.field(Al);return!e||!n||e.from==e.to?Lt.none:Lt.set([lWe.range(e.from,e.to)])}),Ile(uWe,{hideOn:oWe}),bWe],BX=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class sv{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(BX(a)):BX,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Da(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=r$(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=yf(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(sv.prototype[Symbol.iterator]=function(){return this});const nce={from:-1,to:-1,match:/.*/.exec("")},U$="gm"+(/x/.unicode==null?"":"u");class rce{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=nce,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new ice(e,n,r,i,s);this.re=new RegExp(n,U$+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=uE(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=uE(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const D9=new WeakMap;class pb{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=D9.get(e);if(!i||i.from>=r||i.to<=n){let a=new pb(n,e.sliceString(n,r));return D9.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),D9.set(e,new pb(o,s)),new pb(n,s.slice(n-o,r-o))}}class ice{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=nce,this.matchPos=uE(e,i),this.re=new RegExp(n,U$+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=pb.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=uE(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=pb.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(rce.prototype[Symbol.iterator]=ice.prototype[Symbol.iterator]=function(){return this});function wWe(t){try{return new RegExp(t,U$),!0}catch{return!1}}function uE(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function LF(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Tr("input",{class:"cm-textfield",name:"line",value:e}),r=Tr("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Fw.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Tr("label",t.state.phrase("Go to line"),": ",n)," ",Tr("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Tr("button",{name:"close",onclick:()=>{t.dispatch({effects:Fw.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["Ã"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,f]=s,h=c?+c.slice(1):0,d=u?+u:a.number;if(u&&f){let y=d/100;l&&(y=y*(l=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*y)}else u&&l&&(d=d*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=Se.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[Fw.of(!1),Ke.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:r}}const Fw=tn.define(),$X=Os.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Fw)&&(t=n.value);return t},provide:t=>C_.from(t,e=>e?LF:null)}),_We=t=>{let e=A_(t,LF);if(!e){let n=[Fw.of(!0)];t.state.field($X,!1)==null&&n.push(tn.appendConfig.of([$X,SWe])),t.dispatch({effects:n}),e=A_(t,LF)}return e&&e.dom.querySelector("input").select(),!0},SWe=Ke.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),AWe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},CWe=Qe.define({combine(t){return Zd(t,AWe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function kWe(t){return[MWe,OWe]}const EWe=Lt.mark({class:"cm-selectionMatch"}),DWe=Lt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function UX(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=li.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=li.Word)}function TWe(t,e,n,r){return t(e.sliceDoc(n,n+1))==li.Word&&t(e.sliceDoc(r-1,r))==li.Word}const OWe=Ji.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(CWe),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Lt.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Lt.none;let l=n.wordAt(i.head);if(!l)return Lt.none;o=n.charCategorizer(i.head),s=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Lt.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(UX(o,n,i.from,i.to)&&TWe(o,n,i.from,i.to)))return Lt.none}else if(s=n.sliceDoc(i.from,i.to),!s)return Lt.none}let a=[];for(let l of t.visibleRanges){let u=new sv(n.doc,s,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!o||UX(o,n,c,f))&&(i.empty&&c<=i.from&&f>=i.to?a.push(DWe.range(c,f)):(c>=i.to||f<=i.from)&&a.push(EWe.range(c,f)),a.length>e.maxMatches))return Lt.none}}return Lt.set(a)}},{decorations:t=>t.decorations}),MWe=Ke.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),IWe=({state:t,dispatch:e})=>{let{selection:n}=t,r=Se.create(n.ranges.map(i=>t.wordAt(i.head)||Se.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function RWe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new sv(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new sv(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const FWe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return IWe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=RWe(t,r);return i?(e(t.update({selection:t.selection.addRange(Se.range(i.from,i.to),!1),effects:Ke.scrollIntoView(i.to)})),!0):!1},o2=Qe.define({combine(t){return Zd(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new HWe(e),scrollToMatch:e=>Ke.scrollIntoView(e)})}});class sce{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||wWe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new BWe(this):new LWe(this)}getCursor(e,n=0,r){let i=e.doc?e:Wn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?My(this,i,n,r):Oy(this,i,n,r)}}class oce{constructor(e){this.spec=e}}function Oy(t,e,n,r){return new sv(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?NWe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function NWe(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(cE(i,n-s))!=li.Word||e(fE(i,n-s))!=li.Word)&&(e(fE(i,r-s))!=li.Word||e(cE(i,r-s))!=li.Word))}class LWe extends oce{constructor(e){super(e)}nextMatch(e,n,r){let i=Oy(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Oy(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Oy(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Oy(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Oy(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function My(t,e,n,r){return new rce(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?PWe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function cE(t,e){return t.slice(js(t,e,!1),e)}function fE(t,e){return t.slice(e,js(t,e))}function PWe(t){return(e,n,r)=>!r[0].length||(t(cE(r.input,r.index))!=li.Word||t(fE(r.input,r.index))!=li.Word)&&(t(fE(r.input,r.index+r[0].length))!=li.Word||t(cE(r.input,r.index+r[0].length))!=li.Word)}class BWe extends oce{nextMatch(e,n,r){let i=My(this.spec,e,r,e.doc.length).next();return i.done&&(i=My(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=My(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=My(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=My(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const P_=tn.define(),z$=tn.define(),i0=Os.define({create(t){return new T9(PF(t).create(),null)},update(t,e){for(let n of e.effects)n.is(P_)?t=new T9(n.value.create(),t.panel):n.is(z$)&&(t=new T9(t.query,n.value?j$:null));return t},provide:t=>C_.from(t,e=>e.panel)});class T9{constructor(e,n){this.query=e,this.panel=n}}const $We=Lt.mark({class:"cm-searchMatch"}),UWe=Lt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),zWe=Ji.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(i0))}update(t){let e=t.state.field(i0);(e!=t.startState.field(i0)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Lt.none;let{view:n}=this,r=new E0;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-500;)l=s[++i].to;t.highlight(n.state,a,l,(u,c)=>{let f=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);r.add(u,c,f?UWe:$We)})}return r.finish()}},{decorations:t=>t.decorations});function aS(t){return e=>{let n=e.state.field(i0,!1);return n&&n.query.spec.valid?t(e,n):uce(e)}}const hE=aS((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Se.single(r.from,r.to),s=t.state.facet(o2);return t.dispatch({selection:i,effects:[q$(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),lce(t),!0}),dE=aS((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=Se.single(i.from,i.to),o=t.state.facet(o2);return t.dispatch({selection:s,effects:[q$(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),lce(t),!0}),jWe=aS((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Se.create(n.map(r=>Se.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),qWe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new sv(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(Se.range(a.value.from,a.value.to))}return e(t.update({selection:Se.create(s,o),userEvent:"select.search.matches"})),!0},zX=aS((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,u,c=[];o.from==r&&o.to==i&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Ke.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let f=t.state.changes(a);return o&&(l=Se.single(o.from,o.to).map(f),c.push(q$(t,o)),c.push(n.facet(o2).scrollToMatch(l.main,t))),t.dispatch({changes:f,selection:l,effects:c,userEvent:"input.replace"}),!0}),VWe=aS((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Ke.announce.of(r),userEvent:"input.replace.all"}),!0});function j$(t){return t.state.facet(o2).createPanel(t)}function PF(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(o2);return new sce({search:((n=e?.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function ace(t){let e=A_(t,j$);return e&&e.dom.querySelector("[main-field]")}function lce(t){let e=ace(t);e&&e==t.root.activeElement&&e.select()}const uce=t=>{let e=t.state.field(i0,!1);if(e&&e.panel){let n=ace(t);if(n&&n!=t.root.activeElement){let r=PF(t.state,e.query.spec);r.valid&&t.dispatch({effects:P_.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[z$.of(!0),e?P_.of(PF(t.state,e.query.spec)):tn.appendConfig.of(YWe)]});return!0},cce=t=>{let e=t.state.field(i0,!1);if(!e||!e.panel)return!1;let n=A_(t,j$);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:z$.of(!1)}),!0},WWe=[{key:"Mod-f",run:uce,scope:"editor search-panel"},{key:"F3",run:hE,shift:dE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:hE,shift:dE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:cce,scope:"editor search-panel"},{key:"Mod-Shift-l",run:qWe},{key:"Mod-Alt-g",run:_We},{key:"Mod-d",run:FWe,preventDefault:!0}];class HWe{constructor(e){this.view=e;let n=this.query=e.state.field(i0).query.spec;this.commit=this.commit.bind(this),this.searchField=Tr("input",{value:n.search,placeholder:ll(e,"Find"),"aria-label":ll(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Tr("input",{value:n.replace,placeholder:ll(e,"Replace"),"aria-label":ll(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Tr("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Tr("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Tr("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Tr("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Tr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>hE(e),[ll(e,"next")]),r("prev",()=>dE(e),[ll(e,"previous")]),r("select",()=>jWe(e),[ll(e,"all")]),Tr("label",null,[this.caseField,ll(e,"match case")]),Tr("label",null,[this.reField,ll(e,"regexp")]),Tr("label",null,[this.wordField,ll(e,"by word")]),...e.state.readOnly?[]:[Tr("br"),this.replaceField,r("replace",()=>zX(e),[ll(e,"replace")]),r("replaceAll",()=>VWe(e),[ll(e,"replace all")])],Tr("button",{name:"close",onclick:()=>cce(e),"aria-label":ll(e,"close"),type:"button"},["Ã"])])}commit(){let e=new sce({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:P_.of(e)}))}keydown(e){oUe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?dE:hE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),zX(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(P_)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(o2).top}}function ll(t,e){return t.state.phrase(e)}const zA=30,jA=/[\s\.,:;?!]/;function q$(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-zA),o=Math.min(i,n+zA),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<zA;l++)if(!jA.test(a[l+1])&&jA.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-zA;l--)if(!jA.test(a[l-1])&&jA.test(a[l])){a=a.slice(0,l);break}}return Ke.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const GWe=Ke.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),YWe=[i0,Q0.low(zWe),GWe],XWe="#e5c07b",jX="#e06c75",KWe="#56b6c2",QWe="#ffffff",SC="#abb2bf",BF="#7d8799",JWe="#61afef",ZWe="#98c379",qX="#d19a66",eHe="#c678dd",tHe="#21252b",VX="#2c313a",WX="#282c34",O9="#353a42",nHe="#3E4451",HX="#528bff",rHe=Ke.theme({"&":{color:SC,backgroundColor:WX},".cm-content":{caretColor:HX},".cm-cursor, .cm-dropCursor":{borderLeftColor:HX},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:nHe},".cm-panels":{backgroundColor:tHe,color:SC},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:WX,color:BF,border:"none"},".cm-activeLineGutter":{backgroundColor:VX},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:O9},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:O9,borderBottomColor:O9},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:VX,color:SC}}},{dark:!0}),iHe=iS.define([{tag:ye.keyword,color:eHe},{tag:[ye.name,ye.deleted,ye.character,ye.propertyName,ye.macroName],color:jX},{tag:[ye.function(ye.variableName),ye.labelName],color:JWe},{tag:[ye.color,ye.constant(ye.name),ye.standard(ye.name)],color:qX},{tag:[ye.definition(ye.name),ye.separator],color:SC},{tag:[ye.typeName,ye.className,ye.number,ye.changed,ye.annotation,ye.modifier,ye.self,ye.namespace],color:XWe},{tag:[ye.operator,ye.operatorKeyword,ye.url,ye.escape,ye.regexp,ye.link,ye.special(ye.string)],color:KWe},{tag:[ye.meta,ye.comment],color:BF},{tag:ye.strong,fontWeight:"bold"},{tag:ye.emphasis,fontStyle:"italic"},{tag:ye.strikethrough,textDecoration:"line-through"},{tag:ye.link,color:BF,textDecoration:"underline"},{tag:ye.heading,fontWeight:"bold",color:jX},{tag:[ye.atom,ye.bool,ye.special(ye.variableName)],color:qX},{tag:[ye.processingInstruction,ye.string,ye.inserted],color:ZWe},{tag:ye.invalid,color:QWe}]),sHe=[rHe,Yle(iHe)];function Z0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AC={exports:{}},oHe=AC.exports,GX;function aHe(){return GX||(GX=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(oHe,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(m,y){var b=m[y];if(typeof b.bind=="function")return b.bind(m);try{return Function.prototype.bind.call(b,m)}catch{return function(){return Function.prototype.apply.apply(b,[m,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?l:console[m]!==void 0?a(console,m):console.log!==void 0?a(console,"log"):e}function c(){for(var m=this.getLevel(),y=0;y<i.length;y++){var b=i[y];this[b]=y<m?e:this.methodFactory(b,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==n&&(c.call(this),this[m].apply(this,arguments))}}function h(m,y,b){return u(m)||f.apply(this,arguments)}function d(m,y){var b=this,v,w,_,S="loglevel";typeof m=="string"?S+=":"+m:typeof m=="symbol"&&(S=void 0);function A(I){var N=(i[I]||"silent").toUpperCase();if(!(typeof window===n||!S)){try{window.localStorage[S]=N;return}catch{}try{window.document.cookie=encodeURIComponent(S)+"="+N+";"}catch{}}}function C(){var I;if(!(typeof window===n||!S)){try{I=window.localStorage[S]}catch{}if(typeof I===n)try{var N=window.document.cookie,P=encodeURIComponent(S),O=N.indexOf(P+"=");O!==-1&&(I=/^([^;]+)/.exec(N.slice(O+P.length+1))[1])}catch{}return b.levels[I]===void 0&&(I=void 0),I}}function D(){if(!(typeof window===n||!S)){try{window.localStorage.removeItem(S)}catch{}try{window.document.cookie=encodeURIComponent(S)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function T(I){var N=I;if(typeof N=="string"&&b.levels[N.toUpperCase()]!==void 0&&(N=b.levels[N.toUpperCase()]),typeof N=="number"&&N>=0&&N<=b.levels.SILENT)return N;throw new TypeError("log.setLevel() called with invalid level: "+I)}b.name=m,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=y||h,b.getLevel=function(){return _??w??v},b.setLevel=function(I,N){return _=T(I),N!==!1&&A(_),c.call(b)},b.setDefaultLevel=function(I){w=T(I),C()||b.setLevel(I,!1)},b.resetLevel=function(){_=null,D(),c.call(b)},b.enableAll=function(I){b.setLevel(b.levels.TRACE,I)},b.disableAll=function(I){b.setLevel(b.levels.SILENT,I)},b.rebuild=function(){if(o!==b&&(v=T(o.getLevel())),c.call(b),o===b)for(var I in s)s[I].rebuild()},v=T(o?o.getLevel():"WARN");var M=C();M!=null&&(_=T(M)),c.call(b)}o=new d,o.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var b=s[y];return b||(b=s[y]=new d(y,o.methodFactory)),b};var p=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return s},o.default=o,o})})(AC)),AC.exports}var lHe=aHe();const fce=Z0(lHe);fce.setLevel("silent");const di=fce,Zt={STRING:"String",NUMBER:"Number",TRUE:"True",FALSE:"False",NULL:"Null",OBJECT:"Object",ARRAY:"Array",PROPERTY:"Property",PROPERTY_NAME:"PropertyName",PROPERTY_COLON:"PropertyColon",ITEM:"Item",JSON_TEXT:"JsonText",INVALID:"â "},uHe={Pair:Zt.PROPERTY,Key:Zt.PROPERTY_NAME,BlockSequence:Zt.ARRAY,BlockMapping:Zt.OBJECT,FlowSequence:Zt.ARRAY,FlowMapping:Zt.OBJECT,QuotedLiteral:Zt.STRING,Literal:Zt.STRING,Stream:Zt.JSON_TEXT,Document:Zt.OBJECT},cHe={File:Zt.JSON_TEXT},V$=[Zt.STRING,Zt.NUMBER,Zt.TRUE,Zt.FALSE,Zt.NULL],hce=[Zt.OBJECT,Zt.ARRAY,Zt.ITEM],si={JSON5:"json5",JSON:"json4",YAML:"yaml"},Ui=(t,e)=>{var n,r;switch(e){case si.YAML:return(n=uHe[t])!==null&&n!==void 0?n:t;case si.JSON5:return(r=cHe[t])!==null&&r!==void 0?r:t;default:return t}};function dce(t,e,n){const r=[];for(let i=e;i?.parent;i=i.parent)switch(Ui(i.parent.name,n)){case Zt.PROPERTY:{const s=$F(i.parent,Zt.PROPERTY_NAME,n);if(s){let o=Iy(t,s).replace(/[/~]/g,a=>a==="~"?"~0":"~1");r.unshift(o)}break}case Zt.ARRAY:{if(hHe(i,n)){const s=mce(i.parent,i,n);r.unshift(`${s}`)}break}}return r.length===0?"":"/"+r.join("/")}const pce=(t,e,n=-1,r)=>dce(t.doc,fs(t).resolve(e,n),r),W$=(t,e)=>{const n=fs(t),r=new Map;return n.iterate({enter:i=>{var s,o,a,l,u,c,f,h;if([Zt.PROPERTY_NAME,Zt.OBJECT].includes(Ui(i.name,e))){const d=dce(t.doc,i.node,e),{from:p,to:m}=i.node;if(!(!((o=(s=i.node)===null||s===void 0?void 0:s.nextSibling)===null||o===void 0)&&o.node))return r.set(d,{keyFrom:p,keyTo:m}),!0;const y=e===si.JSON?(l=(a=i.node)===null||a===void 0?void 0:a.nextSibling)===null||l===void 0?void 0:l.node:(h=(f=(c=(u=i.node)===null||u===void 0?void 0:u.nextSibling)===null||c===void 0?void 0:c.node)===null||f===void 0?void 0:f.nextSibling)===null||h===void 0?void 0:h.node;if(!y)return r.set(d,{keyFrom:p,keyTo:m}),!0;const{from:b,to:v}=y;return r.set(d,{keyFrom:p,keyTo:m,valueFrom:b,valueTo:v}),!0}}}),r},M9=(t,e,n=-1)=>fs(t).resolveInner(e,n),CC=t=>t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),fHe=t=>t.replace(/^"(.*)"$/,"'$1'"),Iy=(t,e,n=!0,r=!0)=>{const i=e?t.sliceString(e.from,e.to):"";return n?r?CC(i):i.replace(/(^["'])|(["']$)/g,""):i},gce=(t,e)=>{var n,r,i,s;return Ui(t.name,e)===Zt.INVALID&&(Ui((r=(n=t.prevSibling)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",e)===Zt.PROPERTY_NAME||Ui((s=(i=t.prevSibling)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",e)===Zt.PROPERTY_COLON)},kC=(t,e)=>V$.includes(Ui(t.name,e))||gce(t,e),hHe=(t,e)=>[...V$,...hce].includes(Ui(t.name,e))||gce(t,e),qA=(t,e)=>{var n,r,i,s,o,a;return Ui(t.name,e)===Zt.PROPERTY_NAME||Ui(t.name,e)===Zt.INVALID&&(Ui((r=(n=t.prevSibling)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",e)===Zt.PROPERTY||Ui((s=(i=t.prevSibling)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",e)==="{")||e===si.YAML&&Ui((a=(o=t.parent)===null||o===void 0?void 0:o.name)!==null&&a!==void 0?a:"",e)===Zt.OBJECT},lS=t=>{const e=[];let n=t.firstChild;for(;n;)n&&e.push(n),n=n?.nextSibling;return e},dHe=(t,e,n)=>lS(t).filter(r=>Ui(r.name,n)===e),$F=(t,e,n)=>{var r;return(r=lS(t).find(i=>Ui(i.name,n)===e))!==null&&r!==void 0?r:null},YX=(t,e)=>lS(t).find(n=>kC(n,e)),pHe=(t,e)=>lS(t).filter(n=>V$.includes(Ui(n.name,e))||hce.includes(Ui(n.name,e))),mce=(t,e,n)=>pHe(t,n).findIndex(r=>r.from===e.from&&r.to===e.to),XX=(t,e,n,r=1/0)=>{let i=t;for(;i&&r>0;){if(Ui(i.name,n)===e)return i;i=i.parent,r--}return null},gHe=tn.define(),pE=Os.define({create(){},update(t,e){for(const n of e.effects)if(n.is(gHe))return n.value;return t}}),H$=t=>t.field(pE),mHe=t=>[pE.init(()=>t)],yHe={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},bHe=Object.prototype.toString;function jn(t){const e=bHe.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const vHe="object",xHe="array";function wHe(t,e={}){return t.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),i=e[r],s=jn(i);return s===vHe||s===xHe?JSON.stringify(i):i})}function _He(t,e,n=t){var r;const i=(r=yHe[t])!==null&&r!==void 0?r:n;return wHe(i,e)}function SHe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function AHe(t,e){return{type:"error",name:t,code:SHe(t),message:_He(t,e),data:e}}function ft(t){return AHe.bind(null,t)}function B_(t,e=[]){for(let n=0;n<t.length;n+=1){const r=t[n];Array.isArray(r)?B_(r,e):e.push(r)}return e}const a2={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function Nw(t,e,n){const r={...e};return Object.defineProperty(r,"getOneOfOrigin",{enumerable:!1,value:()=>({index:n,schema:t})}),r}function Ao(t){return t?.type==="error"}function CHe(t){return t instanceof Promise}function gE(t){return Ao(t)||CHe(t)}const{DECLARATOR_ONEOF:gb}=a2;function yce(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[gb]){const o=[],a=n[gb],l=e[n[gb]];if(l===void 0)return t.errors.missingOneOfPropertyError({property:a,pointer:r,schema:n,value:e});for(let u=0;u<n.oneOf.length;u+=1){const c=t.resolveRef(n.oneOf[u]),f=t.step(a,c,e,r);if(Ao(f))return f;let h=B_(t.validate(l,f,r));if(h=h.filter(gE),h.length>0)o.push(...h);else return Nw(n,c,u)}return t.errors.oneOfPropertyError({property:a,value:l,pointer:r,schema:n,errors:o})}const i=[],s=[];for(let o=0;o<n.oneOf.length;o+=1){const a=t.resolveRef(n.oneOf[o]);let l=B_(t.validate(e,a,r));l=l.filter(gE),l.length>0?s.push(...l):i.push({index:o,schema:a})}return i.length===1?Nw(n,i[0].schema,i[0].index):i.length>1?t.errors.multipleOneOfError({value:e,pointer:r,schema:n,matches:i}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:n,oneOf:n.oneOf,errors:s})}function kHe(t,e,n,r){if(n==null||e.properties==null)return-1;let i=0;const s=Object.keys(e.properties);for(let o=0;o<s.length;o+=1){const a=s[o];n[a]!=null&&t.isValid(n[a],e.properties[a],r)&&(i+=1)}return i}function G$(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[gb]){const s=[],o=n[gb],a=e[n[gb]];if(a===void 0)return t.errors.missingOneOfPropertyError({property:o,pointer:r,schema:n,value:e});for(let l=0;l<n.oneOf.length;l+=1){const u=t.resolveRef(n.oneOf[l]),c=t.step(o,u,e,r);if(Ao(c))return c;let f=B_(t.validate(a,c,r));if(f=f.filter(gE),f.length>0)s.push(...f);else return Nw(n,u,l)}return t.errors.oneOfPropertyError({property:o,value:a,pointer:r,schema:n,errors:s})}const i=[];for(let s=0;s<n.oneOf.length;s+=1){const o=t.resolveRef(n.oneOf[s]);t.isValid(e,o,r)&&i.push({schema:o,index:s})}if(i.length===1)return Nw(n,i[0].schema,i[0].index);if(jn(e)==="object"){let s,o=-1,a=0;for(let l=0;l<n.oneOf.length;l+=1){const u=t.resolveRef(n.oneOf[l]),c=kHe(t,u,e);a<c&&(a=c,s=n.oneOf[l],o=l)}return s===void 0?t.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:n,oneOf:n.oneOf}):Nw(n,s,o)}return i.length>1?t.errors.multipleOneOfError({matches:i,pointer:r,schema:n,value:e}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:n,oneOf:n.oneOf})}const EHe=(t,e,n,r)=>{if(Array.isArray(e.oneOf)){const i=t.resolveOneOf(n,e,r);if(Ao(i))return i}};var I9,KX;function DHe(){if(KX)return I9;KX=1;var t=function(v){return e(v)&&!n(v)};function e(b){return!!b&&typeof b=="object"}function n(b){var v=Object.prototype.toString.call(b);return v==="[object RegExp]"||v==="[object Date]"||s(b)}var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103;function s(b){return b.$$typeof===i}function o(b){return Array.isArray(b)?[]:{}}function a(b,v){return v.clone!==!1&&v.isMergeableObject(b)?m(o(b),b,v):b}function l(b,v,w){return b.concat(v).map(function(_){return a(_,w)})}function u(b,v){if(!v.customMerge)return m;var w=v.customMerge(b);return typeof w=="function"?w:m}function c(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(v){return Object.propertyIsEnumerable.call(b,v)}):[]}function f(b){return Object.keys(b).concat(c(b))}function h(b,v){try{return v in b}catch{return!1}}function d(b,v){return h(b,v)&&!(Object.hasOwnProperty.call(b,v)&&Object.propertyIsEnumerable.call(b,v))}function p(b,v,w){var _={};return w.isMergeableObject(b)&&f(b).forEach(function(S){_[S]=a(b[S],w)}),f(v).forEach(function(S){d(b,S)||(h(b,S)&&w.isMergeableObject(v[S])?_[S]=u(S,w)(b[S],v[S],w):_[S]=a(v[S],w))}),_}function m(b,v,w){w=w||{},w.arrayMerge=w.arrayMerge||l,w.isMergeableObject=w.isMergeableObject||t,w.cloneUnlessOtherwiseSpecified=a;var _=Array.isArray(v),S=Array.isArray(b),A=_===S;return A?_?w.arrayMerge(b,v,w):p(b,v,w):a(v,w)}m.all=function(v,w){if(!Array.isArray(v))throw new Error("first argument should be an array");return v.reduce(function(_,S){return m(_,S,w)},{})};var y=m;return I9=y,I9}var THe=DHe();const bce=Z0(THe),OHe=(t,e)=>e,Y$=(t,e)=>bce(t,e,{arrayMerge:OHe}),MHe=(t,e)=>{const n=t.concat(e);return n.filter((r,i)=>n.indexOf(r)===i)},IHe=(t,e)=>bce(t,e,{arrayMerge:MHe});function Uo(t,e){const n=jn(t),r=jn(e);if(n!==r)return t;const i=IHe(t,e);return t.getOneOfOrigin?Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),i}function $_(t,...e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),t.getOneOfOrigin&&Object.defineProperty(n,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}),n}var RHe=Function.prototype.toString,R9=Object.create,FHe=Object.prototype.toString,NHe=(function(){function t(){this._keys=[],this._values=[]}return t.prototype.has=function(e){return!!~this._keys.indexOf(e)},t.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},t.prototype.set=function(e,n){this._keys.push(e),this._values.push(n)},t})();function LHe(){return new NHe}function PHe(){return new WeakMap}var BHe=typeof WeakMap<"u"?PHe:LHe;function X$(t){if(!t)return R9(null);var e=t.constructor;if(e===Object)return t===Object.prototype?{}:R9(t);if(e&&~RHe.call(e).indexOf("[native code]"))try{return new e}catch{}return R9(t)}function $He(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function UHe(t){return t.flags}var zHe=/test/g.flags==="g"?UHe:$He;function vce(t){var e=FHe.call(t);return e.substring(8,e.length-1)}function jHe(t){return t[Symbol.toStringTag]||vce(t)}var qHe=typeof Symbol<"u"?jHe:vce,VHe=Object.defineProperty,WHe=Object.getOwnPropertyDescriptor,xce=Object.getOwnPropertyNames,K$=Object.getOwnPropertySymbols,wce=Object.prototype,_ce=wce.hasOwnProperty,HHe=wce.propertyIsEnumerable,Sce=typeof K$=="function";function GHe(t){return xce(t).concat(K$(t))}var YHe=Sce?GHe:xce;function lD(t,e,n){for(var r=YHe(t),i=0,s=r.length,o=void 0,a=void 0;i<s;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(a=WHe(t,o),!a){e[o]=n.copier(t[o],n);continue}!a.get&&!a.set&&(a.value=n.copier(a.value,n));try{VHe(e,o,a)}catch{e[o]=a.value}}return e}function XHe(t,e){var n=new e.Constructor;e.cache.set(t,n);for(var r=0,i=t.length;r<i;++r)n[r]=e.copier(t[r],e);return n}function KHe(t,e){var n=new e.Constructor;return e.cache.set(t,n),lD(t,n,e)}function Ace(t,e){return t.slice(0)}function QHe(t,e){return t.slice(0,t.size,t.type)}function JHe(t,e){return new e.Constructor(Ace(t.buffer))}function ZHe(t,e){return new e.Constructor(t.getTime())}function Cce(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r,i){n.set(i,e.copier(r,e))}),n}function eGe(t,e){return lD(t,Cce(t,e),e)}function tGe(t,e){var n=X$(e.prototype);e.cache.set(t,n);for(var r in t)_ce.call(t,r)&&(n[r]=e.copier(t[r],e));return n}function nGe(t,e){var n=X$(e.prototype);e.cache.set(t,n);for(var r in t)_ce.call(t,r)&&(n[r]=e.copier(t[r],e));for(var i=K$(t),s=0,o=i.length,a=void 0;s<o;++s)a=i[s],HHe.call(t,a)&&(n[a]=e.copier(t[a],e));return n}var rGe=Sce?nGe:tGe;function iGe(t,e){var n=X$(e.prototype);return e.cache.set(t,n),lD(t,n,e)}function F9(t,e){return new e.Constructor(t.valueOf())}function sGe(t,e){var n=new e.Constructor(t.source,zHe(t));return n.lastIndex=t.lastIndex,n}function EC(t,e){return t}function kce(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r){n.add(e.copier(r,e))}),n}function oGe(t,e){return lD(t,kce(t,e),e)}var aGe=Array.isArray,Q$=Object.assign,lGe=Object.getPrototypeOf||(function(t){return t.__proto__}),Ece={array:XHe,arrayBuffer:Ace,blob:QHe,dataView:JHe,date:ZHe,error:EC,map:Cce,object:rGe,regExp:sGe,set:kce},uGe=Q$({},Ece,{array:KHe,map:eGe,object:iGe,set:oGe});function cGe(t){return{Arguments:t.object,Array:t.array,ArrayBuffer:t.arrayBuffer,Blob:t.blob,Boolean:F9,DataView:t.dataView,Date:t.date,Error:t.error,Float32Array:t.arrayBuffer,Float64Array:t.arrayBuffer,Int8Array:t.arrayBuffer,Int16Array:t.arrayBuffer,Int32Array:t.arrayBuffer,Map:t.map,Number:F9,Object:t.object,Promise:EC,RegExp:t.regExp,Set:t.set,String:F9,WeakMap:EC,WeakSet:EC,Uint8Array:t.arrayBuffer,Uint8ClampedArray:t.arrayBuffer,Uint16Array:t.arrayBuffer,Uint32Array:t.arrayBuffer,Uint64Array:t.arrayBuffer}}function Dce(t){var e=Q$({},Ece,t),n=cGe(e),r=n.Array,i=n.Object;function s(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=lGe(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return i(o,a);if(aGe(o))return r(o,a);var l=n[qHe(o)];return l?l(o,a):typeof o.then=="function"?o:i(o,a)}return function(a){return s(a,{Constructor:void 0,cache:BHe(),copier:s,prototype:void 0})}}function fGe(t){return Dce(Q$({},uGe,t))}fGe({});var mE=Dce({});function uD(t,e,n){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const r=t.validate(n,t.resolveRef(e.if));if(r.length===0&&e.then)return t.resolveRef(e.then);if(r.length!==0&&e.else)return t.resolveRef(e.else)}}}const hGe=(t,e,n,r)=>{const i=uD(t,e,n);if(i)return t.validate(n,i,r)};function Tce(t,e,n){var r;const i={...(r=t.resolveRef(e))!==null&&r!==void 0?r:{}},s=uD(t,i,n);return s||$_(i,"if","then","else")}function Oce(t,e,n=t.rootSchema){let r=mE(n);for(let i=0;i<n.allOf.length;i+=1){const s=Tce(t,n.allOf[i],e);r=Uo(r,s)}return delete r.allOf,r}function Mce(t,e){const{allOf:n}=e;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(i=>{r=Uo(r,t.resolveRef(i))}),r}const dGe=(t,e,n,r)=>{const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;const s=[];return e.allOf.forEach(o=>{s.push(...t.validate(n,o,r))}),s};function Ice(t,e){return t==null||t.$ref==null?t:t.getRoot?t.getRoot().getRef(t):e.getRef(t)}function pGe(t){return t.filter((e,n)=>t.indexOf(e)===n)}function s0(t){return jn(t)==="object"}function Rce(t,e,n){const{dependencies:r}=e;if(!s0(r)||!s0(n))return;let i=!1,s={required:[]};if(Object.keys(r).forEach(o=>{var a,l;if(n[o]==null&&!(!((a=e.required)===null||a===void 0)&&a.includes(o)||!((l=s.required)===null||l===void 0)&&l.includes(o)))return;const u=r[o];if(Array.isArray(u)){i=!0,s.required.push(...u);return}if(s0(u)){i=!0,s=Uo(s,t.resolveRef(u));return}}),i)return s.required=pGe(s.required),s}const gGe=(t,e,n,r)=>{if(jn(e.dependencies)!=="object")return;const i=[];return Object.keys(n).forEach(s=>{if(e.dependencies[s]===void 0||e.dependencies[s]===!0)return;if(e.dependencies[s]===!1){i.push(t.errors.missingDependencyError({pointer:r,schema:e,value:n}));return}let o;const a=jn(e.dependencies[s]);if(a==="array")o=e.dependencies[s].filter(l=>n[l]===void 0).map(l=>t.errors.missingDependencyError({missingProperty:l,pointer:r,schema:e,value:n}));else if(a==="object")o=t.validate(n,e.dependencies[s],r);else throw new Error(`Invalid dependency definition for ${r}/${s}. Must be string[] or schema`);i.push(...o)}),i.length>0?i:void 0};function Fce(t,e,n){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let r;return e.anyOf.forEach(i=>{i=t.resolveRef(i),t.isValid(n,i)&&(r=r?Uo(r,i):i)}),r}function Nce(t,e,n=t.rootSchema,r="#"){const{anyOf:i}=n;if(!Array.isArray(i)||i.length===0)return n;const s=Fce(t,n,e);if(s==null)return t.errors.anyOfError({pointer:r,schema:n,value:e,anyOf:JSON.stringify(i)});const o=Uo(n,s);return $_(o,"anyOf")}const mGe=(t,e,n,r)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let i=0;i<e.anyOf.length;i+=1)if(t.isValid(n,e.anyOf[i]))return;return t.errors.anyOfError({pointer:r,schema:e,value:n,anyOf:e.anyOf})}},QX=["allOf","anyOf","oneOf","dependencies","if","then","else"],yGe=["allOf","anyOf","oneOf","dependencies","if"];function bGe(t){const e=Object.keys(t);return yGe.findIndex(n=>e.includes(n))!==-1}function UF(t,e,n,r){let i,s;if(e=t.resolveRef(e),e.oneOf){const c=G$(t,n,e,r);Ao(c)?s=c:c&&(i=Uo(i??{},c))}if(Array.isArray(e.allOf)){const c=e.allOf.map(f=>{if(bGe(f)){let h=UF(t,f,n,r);return h?(h=Uo(f,h),$_(h,...QX)):void 0}return f});if(c.length>0){const f=Mce(t,{allOf:c});i=Uo(i??{},f)}}const o=Fce(t,e,n);o&&(i=Uo(i??{},o));const a=Rce(t,e,n);a&&(i=Uo(i??{},a));const l=uD(t,e,n);if(l&&(i=Uo(i??{},l)),i==null)return s;const u=UF(t,i,n,r);return u&&(i=Uo(i,u)),$_(i,...QX)}const vGe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function JX(t,e,n,r){let i=UF(t,e,n,r);return i?(i=Uo(e,i),$_(i,...vGe)):e}class Lce{constructor(e,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=mE(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,n){this.config.addRemoteSchema(this,e,n)}compileSchema(e){var n;return this.config.compileSchema(this,e,(n=this.rootSchema)!==null&&n!==void 0?n:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,n,r,i){return this.config.each(this,e,n,r,i)}eachSchema(e,n=this.rootSchema){return this.config.eachSchema(n,e)}getChildSchemaSelection(e,n){return this.config.getChildSchemaSelection(this,e,n)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,n,r)}isValid(e,n,r){return this.config.isValid(this,e,n,r)}resolveAnyOf(e,n,r){return this.config.resolveAnyOf(this,e,n,r)}resolveAllOf(e,n){return this.config.resolveAllOf(this,e,n)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,n,r){return this.config.resolveOneOf(this,e,n,r)}setSchema(e){this.rootSchema=e}step(e,n,r,i){return this.config.step(this,e,n,r,i)}validate(e,n,r){return this.config.validate(this,e,n,r)}}function Pce(t,e,n){n.id=n.id||e,t.remotes[e]=t.compileSchema(n)}var DC={exports:{}},xGe=DC.exports,ZX;function wGe(){return ZX||(ZX=1,(function(t,e){(function(n,r){t.exports=r()})(typeof self<"u"?self:xGe,(()=>(()=>{var n={d:(P,O)=>{for(var R in O)n.o(O,R)&&!n.o(P,R)&&Object.defineProperty(P,R,{enumerable:!0,get:O[R]})},o:(P,O)=>Object.prototype.hasOwnProperty.call(P,O),r:P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})}},r={};function i(P){return P==="#"||P===""||Array.isArray(P)&&P.length===0||!1}n.r(r),n.d(r,{default:()=>N,get:()=>h,isRoot:()=>i,join:()=>M,remove:()=>S,removeUndefinedItems:()=>_,set:()=>b,split:()=>f,splitLast:()=>I});const s=/~1/g,o=/~0/g,a=/\/+/g,l=/(^[#/]*|\/+$)/g;function u(P){return P.replace(s,"/").replace(o,"~")}function c(P){return u(decodeURIComponent(P))}function f(P){if(P==null||typeof P!="string"||i(P))return Array.isArray(P)?P:[];const O=P.indexOf("#")>=0?c:u,R=(P=(P=P.replace(a,"/")).replace(l,"")).split("/");for(let L=0,B=R.length;L<B;L+=1)R[L]=O(R[L]);return R}function h(P,O,R=void 0){if(O==null||P==null)return R;if(i(O))return P;const L=d(P,f(O));return L===void 0?R:L}function d(P,O){const R=O.shift();if(P!==void 0)return R!==void 0?d(P[R],O):P}const p=/^\[.*\]$/,m=/^\[(.+)\]$/;function y(P,O){return P==="__proto__"||P=="constructor"&&O.length>0&&O[0]=="prototype"}function b(P,O,R){if(O==null)return P;const L=f(O);if(L.length===0)return P;P==null&&(P=p.test(L[0])?[]:{});let B,z,U=P;for(;L.length>1;)B=L.shift(),z=p.test(L[0]),y(B,L)||(U=w(U,B,z));return B=L.pop(),v(U,B,R),P}function v(P,O,R){let L;const B=O.match(m);O==="[]"&&Array.isArray(P)?P.push(R):B?(L=B.pop(),P[L]=R):P[O]=R}function w(P,O,R){if(P[O]!=null)return P[O];const L=R?[]:{};return v(P,O,L),L}function _(P){let O=0,R=0;for(;O+R<P.length;)P[O+R]===void 0&&(R+=1),P[O]=P[O+R],O+=1;return P.length=P.length-R,P}function S(P,O,R){const L=f(O),B=L.pop(),z=h(P,L);return z&&delete z[B],Array.isArray(z)&&R!==!0&&_(z),P}const A=/\/+/g,C=/~/g,D=/\//g;function T(P,O){if(P.length===0)return O?"#":"";for(let R=0,L=P.length;R<L;R+=1)P[R]=P[R].replace(C,"~0").replace(D,"~1"),O&&(P[R]=encodeURIComponent(P[R]));return((O?"#/":"/")+P.join("/")).replace(A,"/")}function M(P,...O){const R=[];if(Array.isArray(P))return T(P,arguments[1]===!0);const L=arguments[arguments.length-1],B=typeof L=="boolean"?L:P&&P[0]==="#";for(let U=0,V=arguments.length;U<V;U+=1)R.push.apply(R,f(arguments[U]));const z=[];for(let U=0,V=R.length;U<V;U+=1)if(R[U]===".."){if(z.length===0)return B?"#":"";z.pop()}else z.push(R[U]);return T(z,B)}function I(P){const O=f(P);if(O.length===0)return typeof P=="string"&&P[0]==="#"?["#",O[0]]:["",void 0];if(O.length===1)return P[0]==="#"?["#",O[0]]:["",O[0]];const R=O.pop();return[M(O,P[0]==="#"),R]}const N={get:h,set:b,remove:S,join:M,split:f,splitLast:I,isRoot:i,removeUndefinedItems:_};return r})()))})(DC)),DC.exports}var Jg=wGe();const U_=Z0(Jg);var VA={},pa={},vx={},eK;function _Ge(){if(eK)return vx;eK=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.TokenError=void 0;let t=class extends Error{constructor(n,r){if(super(n),this.message=n,this.token=r,r&&r.errors)r.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}};return vx.TokenError=t,vx}var tK;function SGe(){if(tK)return pa;tK=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.Parser=pa.findRuleByName=pa.parseRuleName=pa.escapeRegExp=pa.readToken=void 0;const t=/^[A-Z0-9_]+$/,e=/(\?|\+|\*)$/,n=/^(@|&|!)/,r="WS",i=_Ge();function s(m,y){let b=y.exec(m);return b&&b.index==0?b[0].length==0&&y.source.length>0?null:{type:null,text:b[0],rest:m.substr(b[0].length),start:0,end:b[0].length-1,fullText:b[0],errors:[],children:[],parent:null}:null}pa.readToken=s;function o(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}pa.escapeRegExp=o;function a(m){m.rest="",m.children&&m.children.forEach(y=>a(y))}function l(m,y){m.start+=y,m.end+=y,m.children&&m.children.forEach(b=>l(b,m.start))}function u(m,y){y.errors&&y.errors.length&&y.errors.forEach(b=>m.push(b)),y.children&&y.children.forEach(b=>u(m,b))}function c(m){let y=e.exec(m),b=n.exec(m),v=y&&y[0]||"",w=b&&b[0]||"",_={raw:m,name:m.replace(e,"").replace(n,""),isOptional:v=="?"||v=="*",allowRepetition:v=="+"||v=="*",atLeastOne:v=="+",lookupPositive:w=="&",lookupNegative:w=="!",pinned:w=="@",lookup:!1,isLiteral:!1};return _.isLiteral=_.name[0]=="'"||_.name[0]=='"',_.lookup=_.lookupNegative||_.lookupPositive,_}pa.parseRuleName=c;function f(m,y){let b=c(m);return y.cachedRules[b.name]||null}pa.findRuleByName=f;function h(m,y){if(m.children){let b=m.children.filter(v=>v.type&&y.test(v.type));for(let v=0;v<b.length;v++){let w=m.children.indexOf(b[v]);w!=-1&&m.children.splice(w,1)}m.children.forEach(v=>h(v,y))}}const d=["EOF"];class p{constructor(y,b){this.grammarRules=y,this.options=b,this.cachedRules={},this.debug=b?b.debug===!0:!1;let v=[],w=[];if(y.forEach(_=>{let S=c(_.name);if(S.name in this.cachedRules){v.push("Duplicated rule "+S.name);return}else this.cachedRules[S.name]=_;if(!_.bnf||!_.bnf.length){let A="Missing rule content, rule: "+_.name;v.indexOf(A)==-1&&v.push(A)}else _.bnf.forEach(A=>{if(typeof A[0]=="string"&&c(A[0]).name==_.name){let D="Left recursion is not allowed, rule: "+_.name;v.indexOf(D)==-1&&v.push(D)}A.forEach(C=>{if(typeof C=="string"){let D=c(C);!D.isLiteral&&w.indexOf(D.name)==-1&&d.indexOf(D.name)==-1&&w.push(D.name)}})});r==_.name&&(_.implicitWs=!1),_.implicitWs&&w.indexOf(r)==-1&&w.push(r),_.recover&&w.indexOf(_.recover)==-1&&w.push(_.recover)}),w.forEach(_=>{_ in this.cachedRules||v.push("Missing rule "+_)}),v.length)throw new Error(v.join(`
`))}getAST(y,b){b||(b=this.grammarRules.filter(w=>!w.fragment&&w.name.indexOf("%")!=0)[0].name);let v=this.parse(y,b);if(v){u(v.errors,v),l(v,0),h(v,/^%/),(!this.options||!this.options.keepUpperRules)&&h(v,t);let w=v.rest;w&&new i.TokenError(`Unexpected end of input: 
`+w,v),a(v),v.rest=w}return v}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(y,b,v=0){let w=null,_=c(b),S,A=this.debug&&!t.test(_.name);A&&console.log(new Array(v).join("â  ")+"Trying to get "+b+" from "+JSON.stringify(y.split(`
`)[0]));let C=_.name,D=f(_.name,this);if(_.name=="EOF"){if(y.length)return null;if(y.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!D&&_.isLiteral){let T=_.name.trim();if(T.startsWith('"')?T=JSON.parse(T):T.startsWith("'")&&(T=T.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),T==="")return{type:"%%EMPTY%%",text:"",rest:y,start:0,end:0,fullText:"",errors:[],children:[],parent:null};S=new RegExp(o(T)),C=null}}catch(T){return T instanceof ReferenceError&&console.error(T),null}if(S){let T=s(y,S);if(T)return T.type=C,T}else{let T=D.bnf;T instanceof Array&&T.forEach(M=>{if(w)return;let I=null,N={type:_.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:y};D.fragment&&(N.fragment=!0);let P=y,O=0,R=M.length>0,L=!1;for(let B=0;B<M.length;B++)if(typeof M[B]=="string"){let z=c(M[B]);R=R&&z.isOptional;let U,V=!1;do{if(U=null,D.implicitWs&&(U=this.parse(P,z.name,v+1),!U)){let W;do if(W=this.parse(P,r,v+1),W)N.text=N.text+W.text,N.end=N.text.length,W.parent=N,N.children.push(W),P=P.substr(W.text.length),O+=W.text.length;else break;while(W&&W.text.length)}if(U=U||this.parse(P,z.name,v+1),z.lookupNegative){if(U)return;break}if(z.lookupPositive&&!U)return;if(!U&&(z.isOptional||z.atLeastOne&&V))break;if(U&&D.pinned==B+1&&(I=U,A&&console.log(new Array(v+1).join("â  ")+"ââ "+U.type+" PINNED")),U||(U=this.parseRecovery(D,P,v+1)),!U)if(I)w=N,U={type:"SyntaxError",text:P,children:[],end:P.length,errors:[],fullText:"",parent:null,start:0,rest:""},P.length?new i.TokenError(`Unexpected end of input. Expecting ${z.name} Got: ${P}`,U):new i.TokenError(`Unexpected end of input. Missing ${z.name}`,U),A&&console.log(new Array(v+1).join("â  ")+"ââ "+U.type+" "+JSON.stringify(U.text));else return;if(V=!0,L=!0,U.type=="%%EMPTY%%")break;U.start+=O,U.end+=O,!z.lookupPositive&&U.type&&(U.fragment?U.children&&U.children.forEach(W=>{W.start+=O,W.end+=O,W.parent=N,N.children.push(W)}):(U.parent=N,N.children.push(U))),z.lookup&&(U.lookup=!0),A&&console.log(new Array(v+1).join("â  ")+"ââ "+U.type+" "+JSON.stringify(U.text)),!z.lookup&&!U.lookup&&(N.text=N.text+U.text,N.end=N.text.length,P=P.substr(U.text.length),O+=U.text.length),N.rest=P}while(U&&z.allowRepetition&&P.length&&!U.lookup)}else{let z=s(P,M[B]);if(!z)return;A&&console.log(new Array(v+1).join("â  ")+"â> "+JSON.stringify(z.text)+M[B].source),L=!0,z.start+=O,z.end+=O,N.text=N.text+z.text,N.end=N.text.length,P=P.substr(z.text.length),O+=z.text.length,N.rest=P}L&&(w=N,A&&console.log(new Array(v).join("â  ")+"â<ââ´< PUSHING "+w.type+" "+JSON.stringify(w.text)))}),w&&D.simplifyWhenOneChildren&&w.children.length==1&&(w=w.children[0])}return w||A&&console.log(b+" NOT RESOLVED FROM "+y),w}parseRecovery(y,b,v){if(y.recover&&b.length){let w=this.debug;w&&console.log(new Array(v+1).join("â  ")+"Trying to recover until token "+y.recover+" from "+JSON.stringify(b.split(`
`)[0]+b.split(`
`)[1]));let _={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},S;do if(S=this.parse(b,y.recover,v+1),S){new i.TokenError('Unexpected input: "'+_.text+`" Expecting: ${y.name}`,_);break}else _.text=_.text+b[0],_.end=_.text.length,b=b.substr(1);while(!S&&b.length>0);if(_.text.length>0&&S)return w&&console.log(new Array(v+1).join("â  ")+"Recovered text: "+JSON.stringify(_.text)),_}return null}}return pa.Parser=p,pa.default=p,pa}var nK;function AGe(){if(nK)return VA;nK=1,Object.defineProperty(VA,"__esModule",{value:!0});const t=SGe();var e;return(function(n){n.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],n.defaultParser=new t.Parser(n.RULES,{debug:!1});const r=/^(!|&)/,i=/(\?|\+|\*)$/,s=/^%/;function o(w,_){if(typeof w=="string"){if(r.test(w))return"";if(s.test(w)){let A=i.exec(w),C=A?A[0]+" ":"";return a(w,_)?u(w,_)+C:"("+u(w,_)+")"+C}return w}else return w.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function a(w,_){let S=t.findRuleByName(w,_);return S&&S.bnf.length==1&&S.bnf[0].length==1&&(S.bnf[0][0]instanceof RegExp||S.bnf[0][0][0]=='"'||S.bnf[0][0][0]=="'")}function l(w,_){return w.map(S=>o(S,_)).join(" ")}function u(w,_){let S=t.findRuleByName(w,_);return S?S.bnf.map(A=>l(A,_)).join(" | "):"RULE_NOT_FOUND {"+w+"}"}function c(w){let _=[];return w.grammarRules.forEach(S=>{if(!/^%/.test(S.name)){let A=S.recover?" /* { recoverUntil="+S.recover+" } */":"";_.push(S.name+" ::= "+u(S.name,w)+A)}}),_.join(`
`)}n.emit=c;let f=0;function h(w,_){throw console.log("reberia restar "+_+" a "+w),new Error("Difference not supported yet")}function d(w){return new RegExp(w.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function p(w,_,S){let A=null,C=[];return _.children.forEach((D,T)=>{D.type=="Minus"&&h(A,D);let M=_.children[T+1];M=M&&M.type=="PrimaryDecoration"&&M.text||"";let I="";switch(D.type){case"SubItem":let N="%"+(S+f++);m(w,D,N),C.push(I+N+M);break;case"NCName":case"StringLiteral":C.push(I+D.text+M);break;case"CharCode":case"CharClass":if(M||I){let P={name:"%"+(S+f++),bnf:[[d(D.text)]]};w.push(P),C.push(I+P.name+M)}else C.push(d(D.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+D.type+" -> "+JSON.stringify(D.text))}A=D}),C}function m(w,_,S){let A=_.children.filter(T=>T.type=="SequenceOrDifference").map(T=>p(w,T,S)),C={name:S,bnf:A},D=null;A.forEach(T=>{D=D||T.recover,delete T.recover}),S.indexOf("%")==0&&(C.fragment=!0),D&&(C.recover=D),w.push(C)}function y(w,_=n.defaultParser){let S=_.getAST(w);if(!S)throw new Error("Could not parse "+w);if(S.errors&&S.errors.length)throw S.errors[0];let A=[];return S.children.filter(C=>C.type=="Production").map(C=>{let D=C.children.filter(T=>T.type=="NCName")[0].text;m(A,C,D)}),A}n.getRules=y;function b(w,_=n.defaultParser){return y(w.join(""),_)}n.Transform=b;class v extends t.Parser{constructor(_,S){const A=S&&S.debugRulesParser===!0?new t.Parser(n.RULES,{debug:!0}):n.defaultParser;super(y(_,A),S)}emitSource(){return c(this)}}n.Parser=v})(e||(e={})),VA.default=e,VA}var CGe=AGe();const kGe=Z0(CGe),EGe="[^?/{}*,()#]+",DGe=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${EGe}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,TGe=new kGe.Parser(DGe),OGe=t=>TGe.getAST(t),_a=0,ov=3,yE=(t,e)=>`${t}/${e}`,Bce=Object.prototype.toString,MGe=/Object|Array/,zF=t=>MGe.test(Bce.call(t)),IGe=t=>Bce.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();function $ce(t){return new RegExp(t.text.replace(/(^{|}$)/g,""))}function RGe(t,e){Array.isArray(t)?t.forEach(e):Object.prototype.toString.call(t)==="[object Object]"&&Object.keys(t).forEach(function(n){e(t[n],n,t)})}function rK(t){return Array.isArray(t)?t.map(function(e,n){return`${n}`}):Object.prototype.toString.call(t)==="[object Object]"?Object.keys(t):[]}const o0={mem:[],get(t,e){const n=t[_a][e];if(!o0.mem.includes(n))return zF(n)&&o0.mem.push(n),[n,e,t[_a],yE(t[ov],e)]},reset(){o0.mem.length=0}},jF={any(t,e){const n=e[_a];return rK(n).map(r=>[n[r],r,n,yE(e[ov],r)])},all(t,e){const n=[e];return RGe(e[_a],(r,i)=>{const s=o0.get(e,i);s&&n.push(...jF.all(t,s))}),n},regex(t,e){const n=$ce(t),r=e[_a];return rK(r).filter(i=>n.test(i)).map(i=>[r[i],i,r,yE(e[ov],i)])}},bE={escaped:(t,e)=>bE.property(t,e),property:(t,e)=>{const n=t.text;if(e[_a]&&e[_a][n]!==void 0)return[e[_a][n],n,e[_a],yE(e[ov],n)]},typecheck:(t,e)=>{const n=t.text.replace(/^\?:/,"");if(n==="value")return zF(e[_a])?void 0:e;if(IGe(e[_a])===n)return e},lookahead:(t,e)=>{let n=!0,r=!1;return t.children.forEach(i=>{if(i.type==="expression"){const s=bE.expression(i,e)!==void 0;n=r===!0?n||s:n&&s}else r=i.type==="orExpr"}),n?e:void 0},expression:(t,e)=>{const n=t.children[0].text,r=t.children[1],i=t.children[2],s=e[_a];if(zF(s)!==!1)return FGe(s[n],r,i)?e:void 0}};function FGe(t,e,n){if(e===void 0)return t!==void 0;let r;const i=`${t}`;return n.type==="regex"?r=$ce(n).test(i):r=i===n.text,e.type==="isnot"&&(r=r===!1&&t!==void 0),r}function NGe(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s+=1)i.push(...t(n,e[s],n,r));return i}function LGe(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s+=1){const a=t(n,e[s],r);a&&i.push(a)}return i}function PGe(t,e,n){let r=t;return e.children.forEach(i=>{if(jF[i.type])r=NGe(jF[i.type],r,i,n);else if(bE[i.type])r=LGe(bE[i.type],r,i,n);else throw new Error(`Unknown filter ${i.type}`)}),r}function BGe(t,e,n){const r=[];let i=t;return e.children.forEach(s=>{if(s.type==="orPattern"){r.push(...i),i=t;return}i=J$(i,s,n)}),r.push(...i),r}function $Ge(t){if(t==null)return 1;if(t==="*"||t==="+")return 1/0;const e=parseInt(t);return isNaN(e)?1:e}function UGe(t,e,n){const r=[],i=e.children.find(l=>l.type==="quantifier"),s=$Ge(i&&i.text);let o=t;i&&i.text==="*"&&r.push(...o);let a=0;for(;o.length>0&&a<s;)o=BGe(o,e,n),r.push(...o),a+=1;return r}function zGe(t,e,n){let r=t;return e.children.forEach(i=>r=J$(r,i,n)),r}function J$(t,e,n){let r;return e.type==="query"?r=PGe(t,e,n):e.type==="pattern"?r=UGe(t,e,n):r=zGe(t,e,n),o0.reset(),o0.mem.push(t),r}function jGe(t,e){return o0.reset(),o0.mem.push(t),J$([[t,null,null,"#"]],e)}const iK={value:t=>t.map(e=>e[_a]),pointer:t=>t.map(e=>e[ov]),all:t=>t,map:t=>{const e={};return t.forEach(n=>e[n[ov]]=n[_a]),e}};var Xm;(function(t){t.POINTER="pointer",t.VALUE="value",t.ALL="all",t.MAP="map"})(Xm||(Xm={}));uS.POINTER=Xm.POINTER;uS.VALUE=Xm.VALUE;uS.ALL=Xm.ALL;uS.MAP=Xm.MAP;function uS(t,e,n=Xm.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const r=OGe(e);if(r==null)throw new Error(`empty ast for '${e}'`);if(r.rest!=="")throw new Error(`Failed parsing queryString from: '${r.rest}'`);const i=jGe(t,r);return typeof n=="function"?i.map(s=>n(...s)):iK[n]?iK[n](i):i}var vE;(function(t){t.REPLACE_ITEMS="replace",t.INSERT_ITEMS="insert"})(vE||(vE={}));vE.REPLACE_ITEMS;vE.INSERT_ITEMS;const hd={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},qGe=Object.keys(hd).filter(t=>hd[t].type===!1),sK=Object.prototype.hasOwnProperty;function oK(t){if(s0(t)===!1)return;if(t.enum)return"enum";const e=t.type;if(Array.isArray(e)||hd[e])return e;const n=qGe.filter(r=>t[r]);if(n.length===1)return n[0];if(n.length===0){for(let r=0,i=hd.object.keywords.length;r<i;r+=1){const s=hd.object.keywords[r];if(sK.call(t,s))return"object"}for(let r=0,i=hd.array.keywords.length;r<i;r+=1){const s=hd.array.keywords[r];if(sK.call(t,s))return"array"}return}throw new Error(`Mutiple typeIds [${n.join(", ")}] matched in ${JSON.stringify(t)}`)}function VGe(t){const e=[],n=oK(t);if(n==null)return e;let r;if(Array.isArray(n)){r={};for(let i=0,s=n.length;i<s;i+=1)Object.assign(r,hd[n[i]])}else r=hd[n];return r.definitions==null||r.definitions.forEach(i=>{uS(t,i,(s,o,a,l)=>{s0(s)&&oK(s)&&e.push({pointer:U_.join(U_.split(l),!1),def:s})})}),e}function WGe(t,e){if(this.callback(t,e)===!0)return;VGe(t).forEach(r=>this.nextTypeDefs(r.def,U_.join(e,r.pointer,!1)))}function WA(t,e,n,r="definitions"){const i=e[r];Object.keys(i).forEach(s=>{if(i[s]===!1||s0(i[s])){t.nextTypeDefs(i[s],U_.join(n,r,s,!1));return}})}function cD(t,e,n="#"){const r={callback:e,nextTypeDefs:WGe};r.nextTypeDefs(t,n),t.definitions!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&WA(r,i,s)},WA(r,t,n)),t.$defs!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&WA(r,i,s)},WA(r,t,n,"$defs"))}const HGe=/(#|\/)+$/,HA=/#$/,GGe=/^[^:]+:\/\/[^/]+\//,YGe=/\/[^/]*$/,XGe=/#.*$/;function xE(t,e){return t==null&&e==null?"#":e==null?t.replace(HA,""):t==null?e.replace(HA,""):e[0]==="#"?`${t.replace(XGe,"")}${e.replace(HGe,"")}`:GGe.test(e)?e.replace(HA,""):`${t.replace(YGe,"")}/${e.replace(HA,"")}`}const xx=/(#|\/)+$/g,KGe=["",null,"#"];function QGe(t){if(KGe.includes(t))return[];if(t=t.replace(xx,""),t.indexOf("#")===-1)return[t.replace(xx,"")];if(t.indexOf("#")===0)return[t.replace(xx,"")];const e=t.split("#");return e[0]=e[0].replace(xx,""),e[1]=`#${e[1].replace(xx,"")}`,e}const JGe=/(#|\/)+$/g,ZGe=t=>jn(t)==="object";function ed(t,e,n){if(ZGe(n)&&(n=n.__ref||n.$ref),n==null)return e;let r;const i=n.replace(JGe,"");if(t.remotes[i])return r=t.remotes[i],r&&r.$ref?ed(t,e,r.$ref):r;if(t.ids[n])return r=Jg.get(e,t.ids[n]),r&&r.$ref?ed(t,e,r.$ref):r;const s=QGe(n);if(s.length===0)return e;if(s.length===1){if(n=s[0],t.remotes[n])return r=t.remotes[n],ed(t,e,r.$ref);if(t.ids[n])return r=Jg.get(e,t.ids[n]),r&&r.$ref?ed(t,e,r.$ref):r}if(s.length===2){const o=s[0];if(n=s[1],t.remotes[o])return t.remotes[o].getRef?t.remotes[o].getRef(n):ed(t,t.remotes[o],n);if(t.ids[o])return ed(t,Jg.get(e,t.ids[o]),n)}return r=Jg.get(e,t.ids[n]||n),r&&r.$ref?ed(t,e,r.$ref):r}const aK="__compiled",lK="__ref",eYe="getRef",tYe="getRoot",nYe=/(#|\/)+$/g;function rYe(t,e,n=e,r=!1){if(!e||e[aK]!==void 0)return e;const i={ids:{},remotes:t.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,aK,{enumerable:!1,value:!0}),Object.defineProperty(o,eYe,{enumerable:!1,value:ed.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;e!==n&&Object.defineProperty(o,"definitions",{enumerable:!1,value:Object.assign({},n.definitions,n.$defs,e.definitions,e.$defs)});const a={},l=()=>o;return cD(o,(u,c)=>{var f;if(u.id){if(u.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const y=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),b=Jg.get(o,y);u.id=(f=b.id)!==null&&f!==void 0?f:u.id}i.ids[u.id.replace(nYe,"")]=c}c=`#${c}`.replace(/##+/,"#");const h=c.replace(/\/[^/]+$/,""),d=c.replace(/\/[^/]+\/[^/]+$/,""),p=a[h]||a[d],m=xE(p,u.id);a[c]=m,i.ids[m]==null&&(i.ids[m]=c),u.$ref&&!u[lK]&&(Object.defineProperty(u,lK,{enumerable:!1,value:xE(m,u.$ref)}),Object.defineProperty(u,tYe,{enumerable:!1,value:l}))}),o}function Uce(t,e,n,r=t.rootSchema,i="#"){r=t.resolveRef(r),n(r,e,i);const s=jn(e);s==="object"?Object.keys(e).forEach(o=>{const a=t.step(o,r,e,i),l=e[o];t.each(l,n,a,`${i}/${o}`)}):s==="array"&&e.forEach((o,a)=>{const l=t.step(a,r,e,i);t.each(o,n,l,`${i}/${a}`)})}const zce={additionalItemsError:ft("AdditionalItemsError"),additionalPropertiesError:ft("AdditionalPropertiesError"),anyOfError:ft("AnyOfError"),allOfError:ft("AllOfError"),constError:ft("ConstError"),containsError:ft("ContainsError"),containsArrayError:ft("ContainsArrayError"),containsAnyError:ft("ContainsAnyError"),enumError:ft("EnumError"),forbiddenPropertyError:ft("ForbiddenPropertyError"),formatURLError:ft("FormatURLError"),formatURIError:ft("FormatURIError"),formatURIReferenceError:ft("FormatURIReferenceError"),formatURITemplateError:ft("FormatURITemplateError"),formatDateError:ft("FormatDateError"),formatDateTimeError:ft("FormatDateTimeError"),formatEmailError:ft("FormatEmailError"),formatHostnameError:ft("FormatHostnameError"),formatIPV4Error:ft("FormatIPV4Error"),formatIPV4LeadingZeroError:ft("FormatIPV4LeadingZeroError"),formatIPV6Error:ft("FormatIPV6Error"),formatIPV6LeadingZeroError:ft("FormatIPV6LeadingZeroError"),formatJsonPointerError:ft("FormatJsonPointerError"),formatRegExError:ft("FormatRegExError"),formatTimeError:ft("FormatTimeError"),invalidSchemaError:ft("InvalidSchemaError"),invalidDataError:ft("InvalidDataError"),invalidTypeError:ft("InvalidTypeError"),invalidPropertyNameError:ft("InvalidPropertyNameError"),maximumError:ft("MaximumError"),maxItemsError:ft("MaxItemsError"),maxLengthError:ft("MaxLengthError"),maxPropertiesError:ft("MaxPropertiesError"),minimumError:ft("MinimumError"),minItemsError:ft("MinItemsError"),minItemsOneError:ft("MinItemsOneError"),minLengthError:ft("MinLengthError"),minLengthOneError:ft("MinLengthOneError"),minPropertiesError:ft("MinPropertiesError"),missingDependencyError:ft("MissingDependencyError"),missingOneOfPropertyError:ft("MissingOneOfPropertyError"),multipleOfError:ft("MultipleOfError"),multipleOneOfError:ft("MultipleOneOfError"),noAdditionalPropertiesError:ft("NoAdditionalPropertiesError"),notError:ft("NotError"),oneOfError:ft("OneOfError"),oneOfPropertyError:ft("OneOfPropertyError"),patternError:ft("PatternError"),patternPropertiesError:ft("PatternPropertiesError"),requiredPropertyError:ft("RequiredPropertyError"),schemaWarning:ft("SchemaWarning"),typeError:ft("TypeError"),undefinedValueError:ft("UndefinedValueError"),uniqueItemsError:ft("UniqueItemsError"),unknownPropertyError:ft("UnknownPropertyError"),valueNotEmptyError:ft("ValueNotEmptyError")};var N9={exports:{}},uK;function iYe(){return uK||(uK=1,(function(t){(function(e){e.exports.is_uri=r,e.exports.is_http_uri=i,e.exports.is_https_uri=s,e.exports.is_web_uri=o,e.exports.isUri=r,e.exports.isHttpUri=i,e.exports.isHttpsUri=s,e.exports.isWebUri=o;var n=function(a){var l=a.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return l};function r(a){if(a&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a)&&!/%[^0-9a-f]/i.test(a)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a)){var l=[],u="",c="",f="",h="",d="",p="";if(l=n(a),u=l[1],c=l[2],f=l[3],h=l[4],d=l[5],!!(u&&u.length&&f.length>=0)){if(c&&c.length){if(!(f.length===0||/^\//.test(f)))return}else if(/^\/\//.test(f))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(u.toLowerCase()))return p+=u+":",c&&c.length&&(p+="//"+c),p+=f,h&&h.length&&(p+="?"+h),d&&d.length&&(p+="#"+d),p}}}function i(a,l){if(r(a)){var u=[],c="",f="",h="",d="",p="",m="",y="";if(u=n(a),c=u[1],f=u[2],h=u[3],p=u[4],m=u[5],!!c){if(l){if(c.toLowerCase()!="https")return}else if(c.toLowerCase()!="http")return;if(f)return/:(\d+)$/.test(f)&&(d=f.match(/:(\d+)$/)[0],f=f.replace(/:\d+$/,"")),y+=c+":",y+="//"+f,d&&(y+=d),y+=h,p&&p.length&&(y+="?"+p),m&&m.length&&(y+="#"+m),y}}}function s(a){return i(a,!0)}function o(a){return i(a)||s(a)}})(t)})(N9)),N9.exports}var sYe=iYe();const cK=Z0(sYe);var Io={},TC={exports:{}},oYe=TC.exports,fK;function aYe(){return fK||(fK=1,(function(t){(function(e,n){t.exports?t.exports=n():e.nearley=n()})(oYe,function(){function e(u,c,f){return this.id=++e.highestId,this.name=u,this.symbols=c,this.postprocess=f,this}e.highestId=0,e.prototype.toString=function(u){var c=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" â "+this.symbols.slice(u).map(l).join(" ");return this.name+" â "+c};function n(u,c,f,h){this.rule=u,this.dot=c,this.reference=f,this.data=[],this.wantedBy=h,this.isComplete=this.dot===u.symbols.length}n.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},n.prototype.nextState=function(u){var c=new n(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=u,c.isComplete&&(c.data=c.build(),c.right=void 0),c},n.prototype.build=function(){var u=[],c=this;do u.push(c.right.data),c=c.left;while(c.left);return u.reverse(),u},n.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,c){this.grammar=u,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var c=this.states,f=this.wants,h=this.completed,d=0;d<c.length;d++){var p=c[d];if(p.isComplete){if(p.finish(),p.data!==o.fail){for(var m=p.wantedBy,y=m.length;y--;){var b=m[y];this.complete(b,p)}if(p.reference===this.index){var v=p.rule.name;(this.completed[v]=this.completed[v]||[]).push(p)}}}else{var v=p.rule.symbols[p.dot];if(typeof v!="string"){this.scannable.push(p);continue}if(f[v]){if(f[v].push(p),h.hasOwnProperty(v))for(var w=h[v],y=0;y<w.length;y++){var _=w[y];this.complete(p,_)}}else f[v]=[p],this.predict(v)}}},r.prototype.predict=function(u){for(var c=this.grammar.byName[u]||[],f=0;f<c.length;f++){var h=c[f],d=this.wants[u],p=new n(h,0,this.index,d);this.states.push(p)}},r.prototype.complete=function(u,c){var f=u.nextState(c);this.states.push(f)};function i(u,c){this.rules=u,this.start=c||this.rules[0].name;var f=this.byName={};this.rules.forEach(function(h){f.hasOwnProperty(h.name)||(f[h.name]=[]),f[h.name].push(h)})}i.fromCompiled=function(h,c){var f=h.Lexer;h.ParserStart&&(c=h.ParserStart,h=h.ParserRules);var h=h.map(function(p){return new e(p.name,p.symbols,p.postprocess)}),d=new i(h,c);return d.lexer=f,d};function s(){this.reset("")}s.prototype.reset=function(u,c){this.buffer=u,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(u,c){var f=this.buffer;if(typeof f=="string"){var h=f.split(`
`).slice(Math.max(0,this.line-5),this.line),d=f.indexOf(`
`,this.index);d===-1&&(d=f.length);var p=this.index-this.lastLineBreak,m=String(this.line).length;return c+=" at line "+this.line+" col "+p+`:

`,c+=h.map(function(b,v){return y(this.line-h.length+v+1,m)+" "+b},this).join(`
`),c+=`
`+y("",m+p)+`^
`,c}else return c+" at index "+(this.index-1);function y(b,v){var w=String(b);return Array(v-w.length+1).join(" ")+w}};function o(u,c,f){if(u instanceof i)var h=u,f=c;else var h=i.fromCompiled(u,c);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new s};for(var d in f||{})this.options[d]=f[d];this.lexer=this.options.lexer,this.lexerState=void 0;var p=new r(h,0);this.table=[p],p.wants[h.start]=[],p.predict(h.start),p.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var c=this.lexer;c.reset(u,this.lexerState);for(var f;;){try{if(f=c.next(),!f)break}catch(C){var m=new r(this.grammar,this.current+1);this.table.push(m);var h=new Error(this.reportLexerError(C));throw h.offset=this.current,h.token=C.token,h}var d=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var p=this.current+1,m=new r(this.grammar,p);this.table.push(m);for(var y=f.text!==void 0?f.text:f.value,b=c.constructor===s?f.value:f,v=d.scannable,w=v.length;w--;){var _=v[w],S=_.rule.symbols[_.dot];if(S.test?S.test(b):S.type?S.type===f.type:S.literal===y){var A=_.nextState({data:b,token:f,isToken:!0,reference:p-1});m.states.push(A)}}if(m.process(),m.states.length===0){var h=new Error(this.reportError(f));throw h.offset=this.current,h.token=f,h}this.options.keepHistory&&(d.lexerState=c.save()),this.current++}return d&&(this.lexerState=c.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var c,f,h=u.token;return h?(c="input "+JSON.stringify(h.text[0])+" (lexer error)",f=this.lexer.formatError(h,"Syntax error")):(c="input (lexer error)",f=u.message),this.reportErrorCommon(f,c)},o.prototype.reportError=function(u){var c=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),f=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(f,c)},o.prototype.reportErrorCommon=function(u,c){var f=[];f.push(u);var h=this.table.length-2,d=this.table[h],p=d.states.filter(function(y){var b=y.rule.symbols[y.dot];return b&&typeof b!="string"});if(p.length===0)f.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(d.states,f);else{f.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var m=p.map(function(y){return this.buildFirstStateStack(y,[])||[y]},this);m.forEach(function(y){var b=y[0],v=b.rule.symbols[b.dot],w=this.getSymbolDisplay(v);f.push("A "+w+" based on:"),this.displayStateStack(y,f)},this)}return f.push(""),f.join(`
`)},o.prototype.displayStateStack=function(u,c){for(var f,h=0,d=0;d<u.length;d++){var p=u[d],m=p.rule.toString(p.dot);m===f?h++:(h>0&&c.push("    ^ "+h+" more lines identical to this"),h=0,c.push("    "+m)),f=m}},o.prototype.getSymbolDisplay=function(u){return a(u)},o.prototype.buildFirstStateStack=function(u,c){if(c.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var f=u.wantedBy[0],h=[u].concat(c),d=this.buildFirstStateStack(f,h);return d===null?null:[u].concat(d)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var c=u.index;this.current=c,this.table[c]=u,this.table.splice(c+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],c=this.grammar.start,f=this.table[this.table.length-1];return f.states.forEach(function(h){h.rule.name===c&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&u.push(h)}),u.map(function(h){return h.data})};function a(u){var c=typeof u;if(c==="string")return u;if(c==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var c=typeof u;if(c==="string")return u;if(c==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:i,Rule:e}})})(TC)),TC.exports}var GA={},hK;function lYe(){if(hK)return GA;hK=1,Object.defineProperty(GA,"__esModule",{value:!0});function t(i){return i[0]}const e=i=>[].concat(...i.map(s=>Array.isArray(s)?e(s):s));function n(i){return i?Array.isArray(i)?e(i).join(""):i:""}const r={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:i=>i.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(i){return i.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(i){return i.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:t},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:t},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:i=>i[0].concat([i[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:t},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:i=>i[0].concat([i[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:t},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(i){return{DomainName:n(i[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(i){return{AddressLiteral:n(i[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(i){return{localPart:n(i[0]),domainPart:n(i[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(i){return{DotString:n(i[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(i){return{QuotedString:n(i[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:i=>i[0].concat([i[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:i=>i[0].concat([i[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:t},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(i){return i.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:i=>i[0].concat([i[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:t},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:t},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:i=>i.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:t},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:t},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:i=>i.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:t},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:t},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:t},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:t},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:t},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:t},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:t},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:t}],ParserStart:"Reverse_path"};return GA.default=r,GA}var dK;function uYe(){if(dK)return Io;dK=1;var t=Io&&Io.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Io,"__esModule",{value:!0}),Io.canonicalize=Io.canonicalize_quoted_string=Io.normalize=Io.normalize_dot_string=Io.parse=void 0;const e=aYe(),n=t(lYe());n.default.ParserStart="Mailbox";const r=e.Grammar.fromCompiled(n.default);function i(u){const c=new e.Parser(r);if(c.feed(u),c.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return c.results[0]}Io.parse=i;function s(u){return(function(){const h=u.indexOf("+");return h===-1?u:u.substr(0,h)})().replace(/\./g,"").toLowerCase()}Io.normalize_dot_string=s;function o(u){var c,f;const h=i(u),d=(c=h.domainPart.AddressLiteral)!==null&&c!==void 0?c:h.domainPart.DomainName.toLowerCase();return`${(f=h.localPart.QuotedString)!==null&&f!==void 0?f:s(h.localPart.DotString)}@${d}`}Io.normalize=o;function a(u){return`"${u.substr(1).substr(0,u.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}Io.canonicalize_quoted_string=a;function l(u){var c;const f=i(u),h=(c=f.domainPart.AddressLiteral)!==null&&c!==void 0?c:f.domainPart.DomainName.toLowerCase();return`${f.localPart.QuotedString?a(f.localPart.QuotedString):f.localPart.DotString}@${h}`}return Io.canonicalize=l,Io}var cYe=uYe();const fYe=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),hYe=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,dYe=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,pYe=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,gYe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,mYe=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,yYe=[0,31,28,31,30,31,30,31,31,30,31,30,31],bYe=/^(?:\/(?:[^~/]|~0|~1)*)*$/,vYe=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,xYe=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,wYe=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,jce={date:(t,e,n,r)=>{if(typeof n!="string"||n==="")return;const i=n.match(gYe);if(!i)return t.errors.formatDateTimeError({value:n,pointer:r,schema:e});const s=+i[1],o=+i[2],a=+i[3],l=s%4===0&&(s%100!==0||s%400===0);if(!(o>=1&&o<=12&&a>=1&&a<=(o==2&&l?29:yYe[o])))return t.errors.formatDateError({value:n,pointer:r,schema:e})},"date-time":(t,e,n,r)=>{if(!(typeof n!="string"||n===""))return n===""||fYe.test(n)?new Date(n).toString()==="Invalid Date"?t.errors.formatDateTimeError({value:n,pointer:r,schema:e}):void 0:t.errors.formatDateTimeError({value:n,pointer:r,schema:e})},email:(t,e,n,r)=>{if(typeof n!="string"||n==="")return;if(n[0]==='"')return t.errors.formatEmailError({value:n,pointer:r,schema:e});const[i,s,...o]=n.split("@");if(!i||!s||o.length!==0||i.length>64||s.length>253)return t.errors.formatEmailError({value:n,pointer:r,schema:e});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return t.errors.formatEmailError({value:n,pointer:r,schema:e});if(!/^[a-z0-9.-]+$/i.test(s)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return t.errors.formatEmailError({value:n,pointer:r,schema:e});if(!s.split(".").every(a=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(a)))return t.errors.formatEmailError({value:n,pointer:r,schema:e})},"idn-email":(t,e,n,r)=>{if(!(typeof n!="string"||n===""))try{cYe.parse(n);return}catch{return t.errors.formatEmailError({value:n,pointer:r,schema:e})}},hostname:(t,e,n,r)=>{if(typeof n=="string"&&!(n===""||pYe.test(n)))return t.errors.formatHostnameError({value:n,pointer:r,schema:e})},ipv4:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return t.errors.formatIPV4LeadingZeroError({value:n,pointer:r,schema:e});if(!(n.length<=15&&hYe.test(n)))return t.errors.formatIPV4Error({value:n,pointer:r,schema:e})}},ipv6:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return t.errors.formatIPV6LeadingZeroError({value:n,pointer:r,schema:e});if(!(n.length<=45&&dYe.test(n)))return t.errors.formatIPV6Error({value:n,pointer:r,schema:e})}},"json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!bYe.test(n))return t.errors.formatJsonPointerError({value:n,pointer:r,schema:e})},"relative-json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!vYe.test(n))return t.errors.formatJsonPointerError({value:n,pointer:r,schema:e})},regex:(t,e,n,r)=>{if(typeof n=="string"&&/\\Z$/.test(n)===!1){try{new RegExp(n);return}catch{}return t.errors.formatRegExError({value:n,pointer:r,schema:e})}if(!(typeof n=="object"||typeof n=="number"||Array.isArray(n)))return t.errors.formatRegExError({value:n,pointer:r,schema:e})},time:(t,e,n,r)=>typeof n!="string"||n===""||n.match(mYe)?void 0:t.errors.formatDateTimeError({value:n,pointer:r,schema:e}),uri:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!cK.isUri(n))return t.errors.formatURIError({value:n,pointer:r,schema:e})},"uri-reference":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!xYe.test(n))return t.errors.formatURIReferenceError({value:n,pointer:r,schema:e})},"uri-template":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!wYe.test(n))return t.errors.formatURITemplateError({value:n,pointer:r,schema:e})},url:(t,e,n,r)=>{if(!(n===""||cK.isWebUri(n)))return t.errors.formatURLError({value:n,pointer:r,schema:e})}},qce={};function Vce(t,e=qce){const{pointer:n="#",data:r,schema:i=t.rootSchema,withSchemaWarning:s=!1}=e,o=U_.split(n),a=Wce(t,t.resolveRef(i),o,"#",r);if(!(!s&&a?.code==="schema-warning"))return a}function Wce(t,e,n,r,i=qce){if(n.length===0)return t.resolveRef(e);const s=n.shift();return e=t.step(s,e,i,r),Ao(e)?e:(i=i[s],Wce(t,e,n,`${r}/${s}`,i))}function _Ye(t){switch(jn(t)){case"string":case"array":return t?.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(t).length===0;default:return!1}}const pK=a2.templateDefaultOptions;let dd;function L9(t,e){const{$ref:n}=t;return n==null?!0:(dd[e]==null||dd[e][n]==null?0:dd[e][n])<a2.GET_TEMPLATE_RECURSION_LIMIT}function gK(t,e,n){const{$ref:r}=e;return r==null?e:(dd[n]=dd[n]||{},dd[n][r]=dd[n][r]||0,dd[n][r]+=1,t.resolveRef(e))}function SYe(t,e){if(t==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===t)return e}catch{}return null}function Hce(t,e,n,r,i){if(jn(e)!=="object")return Object.assign({pointer:r},e);if(L9(e,r)===!1&&n==null)return!1;let s=mE(gK(t,e,r));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(L9(e.anyOf[0],`${r}/anyOf/0`)){const o=gK(t,e.anyOf[0],`${r}/anyOf/0`);s=Y$(s,o),s.pointer=e.anyOf[0].$ref||s.pointer}delete s.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((a,l)=>L9(a,`${r}/allOf/${l}`)).reduceRight((a,l)=>a&&l,!0)){const a=[];let l=mE(n);for(let c=0;c<e.allOf.length;c+=1)a.push(Tce(t,e.allOf[c],l)),l=Xu(t,l,{type:e.type,...a[c]},`${r}/allOf/${c}`,i);const u=Mce(t,{allOf:a});u&&(s=Uo(s,u))}return s.pointer=s.pointer||e.$ref||r,s}const mK=t=>t&&typeof t=="object";function Xu(t,e,n,r,i){var s;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(r==null)throw new Error("Missing pointer");let o=Hce(t,n,e,r,i);if(!mK(o))return;if(r=o.pointer,o?.const)return o.const;if(Array.isArray(o.oneOf))if(_Ye(e)){const c=o.oneOf[0].type||o.type||o.const&&typeof o.const||jn(e);o={...o.oneOf[0],type:c}}else{const c=G$(t,e,o);if(Ao(c)){if(e!=null&&i.removeInvalidData!==!0)return e;o=o.oneOf[0],e=void 0}else c.type=(s=c.type)!==null&&s!==void 0?s:o.type,o=c}if(!mK(o)||o.type==null)return;if(e instanceof File)return e;const a=Array.isArray(o.type)?AYe(o.type,e,o.default):o.type,l=jn(e);return e!=null&&l!==a&&!(l==="number"&&a==="integer")&&(e=SYe(a,e)),yK[a]==null?i.removeInvalidData?void 0:e:yK[a](t,o,e,r,i)}function AYe(t,e,n){if(e==null){if(n!=null){const i=jn(n);if(t.includes(i))return i}return t[0]}const r=jn(e);return t.includes(r)?r:t[0]}const yK={null:(t,e,n)=>wx(e,n,null),string:(t,e,n)=>wx(e,n,""),number:(t,e,n)=>wx(e,n,0),integer:(t,e,n)=>wx(e,n,0),boolean:(t,e,n)=>wx(e,n,!1),object:(t,e,n,r,i)=>{var s;const o=e.default===void 0?{}:e.default,a={},l=i.extendDefaults===!1&&e.default!==void 0?[]:(s=e.required)!==null&&s!==void 0?s:[];e.properties&&Object.keys(e.properties).forEach(f=>{const h=n==null||n[f]==null?o[f]:n[f],d=l.includes(f);(h!=null||d||i.addOptionalProps)&&(a[f]=Xu(t,h,e.properties[f],`${r}/properties/${f}`,i))});let u=Rce(t,e,a);if(u){u=Uo(e,u),delete u.dependencies;const f=Xu(t,n,u,`${r}/dependencies`,i);Object.assign(a,f)}n&&(i.removeInvalidData===!0&&(e.additionalProperties===!1||jn(e.additionalProperties)==="object")?jn(e.additionalProperties)==="object"&&Object.keys(n).forEach(f=>{a[f]==null&&t.isValid(n[f],e.additionalProperties)&&(a[f]=n[f])}):Object.keys(n).forEach(f=>a[f]==null&&(a[f]=n[f])));const c=uD(t,e,a);if(c){const f=Xu(t,a,{type:"object",...c},r,i);Object.assign(a,f)}return a},array:(t,e,n,r,i)=>{var s,o;if(e.items==null)return n||[];const a=e.default===void 0?[]:e.default,l=n||a,u=i.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let f=0,h=Math.max(u??0,(o=(s=e.items)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0);f<h;f+=1)l[f]=Xu(t,l[f]==null?a[f]:l[f],e.items[f],`${r}/items/${f}`,i);return l}if(jn(e.items)!=="object")return l;const c=Hce(t,e.items,n,r,i);if(c===!1)return l;if(r=c.pointer||r,c.oneOf&&l.length===0){const f=c.oneOf[0];for(let h=0;h<u;h+=1)l[h]=Xu(t,l[h]==null?a[h]:l[h],f,`${r}/oneOf/0`,i);return l}if(c.oneOf&&l.length>0){const f=Math.max(u,l.length);for(let h=0;h<f;h+=1){let d=l[h]==null?a[h]:l[h],p=G$(t,d,c);p==null||Ao(p)?d!=null&&i.removeInvalidData!==!0?l[h]=d:(d=void 0,p=c.oneOf[0],l[h]=Xu(t,d,p,`${r}/oneOf/${h}`,i)):l[h]=Xu(t,d,p,`${r}/oneOf/${h}`,i)}return l}if(c.type){for(let f=0,h=Math.max(u,l.length);f<h;f+=1)l[f]=Xu(t,l[f]==null?a[f]:l[f],c,`${r}/items`,i);return l}return l}};function wx(t,e,n){return e??(t.const?t.const:t.default===void 0&&Array.isArray(t.enum)?t.enum[0]:t.default===void 0?n:t.default)}const Gce=(t,e,n=t.rootSchema,r)=>(dd={},r?Xu(t,e,n,"#",{...pK,...r}):Xu(t,e,n,"#",pK));function Yce(t,e,n=t.rootSchema,r="#"){return t.validate(e,n,r).length===0}function bK(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function vK(t){const e=`${t}`,n=e.indexOf(".");return n===-1?0:e.length-(n+1)}var P9,xK;function CYe(){return xK||(xK=1,P9=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),P9}var kYe=CYe();const Xce=Z0(kYe),EYe=Object.prototype.hasOwnProperty,wK=(t,e)=>!(t[e]===void 0||!EYe.call(t,e)),Kce={additionalProperties:(t,e,n,r)=>{if(e.additionalProperties===!0||e.additionalProperties==null||jn(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const i=[];let s=Object.keys(n).filter(a=>a2.propertyBlacklist.includes(a)===!1);const o=Object.keys(e.properties||{});if(jn(e.patternProperties)==="object"){const a=Object.keys(e.patternProperties).map(l=>new RegExp(l));s=s.filter(l=>{for(let u=0;u<a.length;u+=1)if(a[u].test(l))return!1;return!0})}for(let a=0,l=s.length;a<l;a+=1){const u=s[a];if(o.indexOf(u)===-1){const c=s0(e.additionalProperties);if(c&&Array.isArray(e.additionalProperties.oneOf)){const f=t.resolveOneOf(n[u],e.additionalProperties,`${r}/${u}`);Ao(f)?i.push(t.errors.additionalPropertiesError({pointer:r,schema:e.additionalProperties,value:n,property:s[a],properties:o,errors:f.data.errors})):i.push(...t.validate(n[u],f,r))}else c?i.push(...t.validate(n[u],e.additionalProperties,`${r}/${u}`)):i.push(t.errors.noAdditionalPropertiesError({pointer:r,schema:e,value:n,property:s[a],properties:o}))}}return i},allOf:dGe,anyOf:mGe,dependencies:gGe,enum:(t,e,n,r)=>{const i=jn(n);if(i==="object"||i==="array"){const s=JSON.stringify(n);for(let o=0;o<e.enum.length;o+=1)if(JSON.stringify(e.enum[o])===s)return}else if(e.enum.includes(n))return;return t.errors.enumError({pointer:r,schema:e,value:n,values:e.enum})},format:(t,e,n,r)=>{if(t.validateFormat[e.format])return t.validateFormat[e.format](t,e,n,r)},items:(t,e,n,r)=>{if(e.items===!1)return Array.isArray(n)&&n.length===0?void 0:t.errors.invalidDataError({pointer:r,value:n,schema:e});const i=[];for(let s=0;s<n.length;s+=1){const o=n[s],a=t.step(s,e,n,r);if(Ao(a))return[a];const l=t.validate(o,a,`${r}/${s}`);i.push(...l)}return i},maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,value:n,pointer:r,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r,schema:e,value:n})}},maxItems:(t,e,n,r)=>{if(!isNaN(e.maxItems)&&e.maxItems<n.length)return t.errors.maxItemsError({maximum:e.maxItems,length:n.length,schema:e,value:n,pointer:r})},maxLength:(t,e,n,r)=>{if(isNaN(e.maxLength))return;const i=bK(n).length;if(e.maxLength<i)return t.errors.maxLengthError({maxLength:e.maxLength,length:i,pointer:r,schema:e,value:n})},maxProperties:(t,e,n,r)=>{const i=Object.keys(n).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<i)return t.errors.maxPropertiesError({maxProperties:e.maxProperties,length:i,pointer:r,schema:e,value:n})},minLength:(t,e,n,r)=>{if(isNaN(e.minLength))return;const i=bK(n).length;if(e.minLength>i)return e.minLength===1?t.errors.minLengthOneError({minLength:e.minLength,length:i,pointer:r,schema:e,value:n}):t.errors.minLengthError({minLength:e.minLength,length:i,pointer:r,schema:e,value:n})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)){if(e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r,schema:e,value:n});if(e.exclusiveMinimum===!0&&e.minimum===n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r,schema:e,value:n})}},minItems:(t,e,n,r)=>{if(!isNaN(e.minItems)&&e.minItems>n.length)return e.minItems===1?t.errors.minItemsOneError({minItems:e.minItems,length:n.length,pointer:r,schema:e,value:n}):t.errors.minItemsError({minItems:e.minItems,length:n.length,pointer:r,schema:e,value:n})},minProperties:(t,e,n,r)=>{if(isNaN(e.minProperties))return;const i=Object.keys(n).length;if(e.minProperties>i)return t.errors.minPropertiesError({minProperties:e.minProperties,length:i,pointer:r,schema:e,value:n})},multipleOf:(t,e,n,r)=>{if(isNaN(e.multipleOf)||typeof n!="number")return;const i=vK(n),s=vK(e.multipleOf);if(i>s)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r,schema:e});const o=Math.pow(10,s),a=Math.round(n*o),l=Math.round(e.multipleOf*o);if(a%l/o!==0)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r,schema:e})},not:(t,e,n,r)=>{const i=[];return t.validate(n,e.not,r).length===0&&i.push(t.errors.notError({value:n,not:e.not,pointer:r,schema:e})),i},oneOf:EHe,pattern:(t,e,n,r)=>{if(new RegExp(e.pattern,"u").test(n)===!1)return t.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:n,schema:e,value:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},s=e.patternProperties;if(jn(s)!=="object")return;const o=[],a=Object.keys(n),l=Object.keys(s).map(u=>({regex:new RegExp(u),patternSchema:s[u]}));return a.forEach(u=>{let c=!1;for(let f=0,h=l.length;f<h;f+=1)if(l[f].regex.test(u)){c=!0;const d=t.validate(n[u],l[f].patternSchema,`${r}/${u}`);d&&d.length>0&&o.push(...d)}i[u]||c===!1&&e.additionalProperties===!1&&o.push(t.errors.patternPropertiesError({key:u,pointer:r,schema:e,value:n,patterns:Object.keys(s).join(",")}))}),o},properties:(t,e,n,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const a=s[o];if(wK(n,a)){const l=t.step(a,e,n,r),u=t.validate(n[a],l,`${r}/${a}`);i.push(...u)}}return i},propertiesRequired:(t,e,n,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const a=s[o];if(n[a]===void 0)i.push(t.errors.requiredPropertyError({key:a,pointer:r,schema:e,value:n}));else{const l=t.step(a,e,n,r),u=t.validate(n[a],l,`${r}/${a}`);i.push(...u)}}return i},required:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(!wK(n,i))return t.errors.requiredPropertyError({key:i,pointer:r,schema:e,value:n})})},requiredNotEmpty:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(n[i]==null||n[i]==="")return t.errors.valueNotEmptyError({property:i,pointer:`${r}/${i}`,schema:e,value:n})})},uniqueItems:(t,e,n,r)=>{if((Array.isArray(n)&&e.uniqueItems)===!1)return;const i=[],s=[];return n.forEach((o,a)=>{for(let l=a+1;l<n.length;l+=1)Xce(o,n[l])&&!i.includes(l)&&(s.push(t.errors.uniqueItemsError({pointer:`${r}/${l}`,duplicatePointer:`${r}/${a}`,arrayPointer:r,value:JSON.stringify(o),schema:e})),i.push(l))}),s}};function vf(t){if(t===void 0)return;const e={type:jn(t)};return e.type==="object"&&s0(t)&&(e.properties={},Object.keys(t).forEach(n=>e.properties[n]=vf(t[n]))),e.type==="array"&&Array.isArray(t)&&(t.length===1?e.items=vf(t[0]):e.items=t.map(vf)),e}const DYe={array:(t,e,n,r,i)=>{const s=r?.[e],o=jn(n.items);if(o==="object")return JX(t,n.items,s,`${i}/${e}`)||t.resolveRef(n.items);if(o==="array"){if(n.items[e]===!0)return vf(s);if(n.items[e]===!1)return t.errors.invalidDataError({key:e,value:s,pointer:i,schema:n});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return t.errors.additionalItemsError({key:e,value:s,pointer:i,schema:n});if(n.additionalItems===!0||n.additionalItems===void 0)return vf(s);if(jn(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,2)} for ${JSON.stringify(r,null,2)}`)}return n.additionalItems!==!1&&s?vf(s):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var s;n=JX(t,n,r,i);const o=(s=n?.properties)===null||s===void 0?void 0:s[e];if(o!==void 0){if(o===!1)return t.errors.forbiddenPropertyError({property:e,value:r,pointer:i,schema:n});if(o===!0)return vf(r?.[e]);const u=t.resolveRef(o);if(Ao(u))return u;if(u&&Array.isArray(u.oneOf)){const c=t.resolveOneOf(r[e],u,`${i}/${e}`);for(const f in u)f!=="oneOf"&&c[f]===void 0&&(c[f]=u[f]);return c}if(u)return u}const{patternProperties:a}=n;if(jn(a)==="object"){let u;const c=Object.keys(a);for(let f=0,h=c.length;f<h;f+=1)if(u=new RegExp(c[f]),u.test(e))return a[c[f]]}const{additionalProperties:l}=n;return jn(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?vf(r[e]):t.errors.unknownPropertyError({property:e,value:r,pointer:`${i}`,schema:n})}};function Qce(t,e,n,r,i="#"){var s;const o=jn(r);let a=(s=n.type)!==null&&s!==void 0?s:o;if(Array.isArray(a)){if(!a.includes(o))return t.errors.typeError({value:r,pointer:i,expected:n.type,received:o,schema:n});a=o}const l=DYe[a];if(l){const u=l(t,`${e}`,n,r,i);return u===void 0?t.errors.schemaWarning({pointer:i,value:r,schema:n,key:e}):u}return new Error(`Unsupported schema type ${n.type} for key ${e}`)}function Jce(t,e,n=t.rootSchema){var r;if(n.oneOf)return n.oneOf.map(s=>t.resolveRef(s));if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(s=>t.resolveRef(s));const i=t.step(e,n,{},"#");return Ao(i)?i:[i]}const TYe={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))};function OYe(t,e){const n=jn(t);return n==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(t)||isNaN(t)?"integer":"number":n}function Zce(t,e,n=t.rootSchema,r="#"){if(n=t.resolveRef(n),jn(n)==="boolean")return n?[]:[t.errors.invalidDataError({pointer:r,schema:n,value:e})];if(Ao(n))return[n];if(n.const!==void 0)return Xce(n.const,e)?[]:[t.errors.constError({pointer:r,schema:n,value:e,expected:n.const})];const i=OYe(e,n.type),s=n.type||i;return i!==s&&(!Array.isArray(s)||!s.includes(i))?[t.errors.typeError({pointer:r,schema:n,value:e,received:i,expected:s})]:t.validateType[i]==null?[t.errors.invalidTypeError({pointer:r,schema:n,value:e,receivedType:i})]:B_(t.validateType[i](t,n,e,r)).filter(gE)}const MYe={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:Kce,validateType:TYe,validateFormat:jce,errors:zce,addRemoteSchema:Pce,compileSchema:rYe,createSchemaOf:vf,each:Uce,eachSchema:cD,getChildSchemaSelection:Jce,getSchema:Vce,getTemplate:Gce,isValid:Yce,resolveAllOf:Oce,resolveAnyOf:Nce,resolveOneOf:yce,resolveRef:Ice,step:Qce,validate:Zce,templateDefaultOptions:a2.templateDefaultOptions};class efe extends Lce{constructor(e,n={}){super(Y$(MYe,n),e)}}const _K="__compiled",SK="__ref",IYe="getRef",RYe="getRoot",FYe=/(#|\/)+$/g;function NYe(t,e,n=e,r=!1){if(e===!0||e===!1||e===void 0||e[_K]!==void 0)return e;const i={ids:{},remotes:t.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,_K,{enumerable:!1,value:!0}),Object.defineProperty(o,IYe,{enumerable:!1,value:ed.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;o!==n&&Object.defineProperty(o,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,o.definitions,o.$defs)});const a={},l=()=>o;return cD(o,(u,c)=>{var f;if(u.$id){if(u.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const y=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),b=Jg.get(o,y);u.$id=(f=b.$id)!==null&&f!==void 0?f:u.$id}i.ids[u.$id.replace(FYe,"")]=c}c=`#${c}`.replace(/##+/,"#");const h=c.replace(/\/[^/]+$/,""),d=c.replace(/\/[^/]+\/[^/]+$/,""),p=a[h]||a[d],m=xE(p,u.$id);a[c]=m,i.ids[m]==null&&(i.ids[m]=c),u.$ref&&!u[SK]&&(Object.defineProperty(u,SK,{enumerable:!1,value:xE(m,u.$ref)}),Object.defineProperty(u,RYe,{enumerable:!1,value:l}))}),o}const LYe={...Kce,contains:(t,e,n,r)=>{if(e.contains===!1)return t.errors.containsArrayError({pointer:r,value:n,schema:e});if(e.contains===!0)return Array.isArray(n)&&n.length===0?t.errors.containsAnyError({pointer:r,value:n,schema:e}):void 0;if(jn(e.contains)==="object"){for(let i=0;i<n.length;i+=1)if(t.isValid(n[i],e.contains))return;return t.errors.containsError({pointer:r,schema:e,value:n})}},exclusiveMaximum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=n)return t.errors.maximumError({maximum:e.exclusiveMaximum,length:n,pointer:r,schema:e,value:n})},exclusiveMinimum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=n)return t.errors.minimumError({minimum:e.exclusiveMinimum,length:n,pointer:r,schema:e,value:n})},if:hGe,maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r,schema:e,value:n})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)&&e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r,schema:e,value:n})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},s=e.patternProperties;if(jn(s)!=="object")return;const o=[],a=Object.keys(n),l=Object.keys(s).map(u=>({regex:new RegExp(u),patternSchema:s[u]}));return a.forEach(u=>{let c=!1;for(let f=0,h=l.length;f<h;f+=1)if(l[f].regex.test(u)){if(c=!0,l[f].patternSchema===!1){o.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(s).join(","),schema:e,value:n}));return}const d=t.validate(n[u],l[f].patternSchema,`${r}/${u}`);d&&d.length>0&&o.push(...d)}i[u]||c===!1&&e.additionalProperties===!1&&o.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(s).join(","),schema:e,value:n}))}),o},propertyNames:(t,e,n,r)=>{if(e.propertyNames===!1)return Object.keys(n).length===0?void 0:t.errors.invalidPropertyNameError({property:Object.keys(n),pointer:r,value:n,schema:e});if(e.propertyNames===!0||jn(e.propertyNames)!=="object")return;const i=[],s=Object.keys(n),o={...e.propertyNames,type:"string"};return s.forEach(a=>{const l=t.validate(a,o,`${r}/${a}`);l.length>0&&i.push(t.errors.invalidPropertyNameError({property:a,pointer:r,validationError:l[0],value:n[a],schema:e}))}),i}},PYe={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))},tfe={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:LYe,validateType:PYe,validateFormat:jce,errors:zce,addRemoteSchema:Pce,compileSchema:NYe,createSchemaOf:vf,each:Uce,eachSchema:cD,getChildSchemaSelection:Jce,getSchema:Vce,getTemplate:Gce,isValid:Yce,resolveAllOf:Oce,resolveAnyOf:Nce,resolveOneOf:yce,resolveRef:Ice,step:Qce,validate:Zce,templateDefaultOptions:a2.templateDefaultOptions};class nfe extends Lce{constructor(e,n={}){super(Y$(tfe,n),e)}}({...tfe});function uf(t,e,n=[]){const r=document.createElement(t);return Object.entries(e).forEach(([i,s])=>{if(i==="text"){r.innerText=s;return}if(i==="inner"){r.innerHTML=s;return}r.setAttribute(i,s)}),n.forEach(i=>r.appendChild(i)),r}const BYe="modulepreload",$Ye=function(t,e){return new URL(t,e).href},AK={},B9=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=u(n.map(c=>{if(c=$Ye(c,r),c in AK)return;AK[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(r)for(let p=o.length-1;p>=0;p--){const m=o[p];if(m.href===c&&(!f||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":BYe,f||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),f)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},CK={};function UYe(t){let e=CK[t];if(e)return e;e=CK[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function av(t,e){typeof e!="string"&&(e=av.defaultChars);const n=UYe(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="ï¿½ï¿½":i+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?i+="ï¿½ï¿½ï¿½":i+=String.fromCharCode(c),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16),c=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let f=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;f<65536||f>1114111?i+="ï¿½ï¿½ï¿½ï¿½":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),s+=9;continue}}i+="ï¿½"}return i})}av.defaultChars=";/?:@&=+$,#";av.componentChars="";const kK={};function zYe(t){let e=kK[t];if(e)return e;e=kK[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function cS(t,e,n){typeof e!="string"&&(n=e,e=cS.defaultChars),typeof n>"u"&&(n=!0);const r=zYe(e);let i="";for(let s=0,o=t.length;s<o;s++){const a=t.charCodeAt(s);if(n&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(s+1,s+3))){i+=t.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=t.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(t[s]+t[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[s])}return i}cS.defaultChars=";/?:@&=+$,-_.!~*'()#";cS.componentChars="-_.!~*'()";function Z$(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function wE(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const jYe=/^([a-z0-9.+-]+:)/i,qYe=/:[0-9]*$/,VYe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,WYe=["<",">",'"',"`"," ","\r",`
`,"	"],HYe=["{","}","|","\\","^","`"].concat(WYe),GYe=["'"].concat(HYe),EK=["%","/","?",";","#"].concat(GYe),DK=["/","?","#"],YYe=255,TK=/^[+a-z0-9A-Z_-]{0,63}$/,XYe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,OK={javascript:!0,"javascript:":!0},MK={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function eU(t,e){if(t&&t instanceof wE)return t;const n=new wE;return n.parse(t,e),n}wE.prototype.parse=function(t,e){let n,r,i,s=t;if(s=s.trim(),!e&&t.split("#").length===1){const u=VYe.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=jYe.exec(s);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&OK[o])&&(s=s.substr(2),this.slashes=!0)),!OK[o]&&(i||o&&!MK[o])){let u=-1;for(let p=0;p<DK.length;p++)r=s.indexOf(DK[p]),r!==-1&&(u===-1||r<u)&&(u=r);let c,f;u===-1?f=s.lastIndexOf("@"):f=s.lastIndexOf("@",u),f!==-1&&(c=s.slice(0,f),s=s.slice(f+1),this.auth=c),u=-1;for(let p=0;p<EK.length;p++)r=s.indexOf(EK[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=s.length),s[u-1]===":"&&u--;const h=s.slice(0,u);s=s.slice(u),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let m=0,y=p.length;m<y;m++){const b=p[m];if(b&&!b.match(TK)){let v="";for(let w=0,_=b.length;w<_;w++)b.charCodeAt(w)>127?v+="x":v+=b[w];if(!v.match(TK)){const w=p.slice(0,m),_=p.slice(m+1),S=b.match(XYe);S&&(w.push(S[1]),_.unshift(S[2])),_.length&&(s=_.join(".")+s),this.hostname=w.join(".");break}}}}this.hostname.length>YYe&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),MK[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};wE.prototype.parseHost=function(t){let e=qYe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const KYe=Object.freeze(Object.defineProperty({__proto__:null,decode:av,encode:cS,format:Z$,parse:eU},Symbol.toStringTag,{value:"Module"})),rfe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ife=/[\0-\x1F\x7F-\x9F]/,QYe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,tU=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,sfe=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,ofe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,JYe=Object.freeze(Object.defineProperty({__proto__:null,Any:rfe,Cc:ife,Cf:QYe,P:tU,S:sfe,Z:ofe},Symbol.toStringTag,{value:"Module"})),ZYe=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(t=>t.charCodeAt(0))),eXe=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(t=>t.charCodeAt(0)));var $9;const tXe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),nXe=($9=String.fromCodePoint)!==null&&$9!==void 0?$9:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function rXe(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=tXe.get(t))!==null&&e!==void 0?e:t}var Cs;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Cs||(Cs={}));const iXe=32;var Hp;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Hp||(Hp={}));function qF(t){return t>=Cs.ZERO&&t<=Cs.NINE}function sXe(t){return t>=Cs.UPPER_A&&t<=Cs.UPPER_F||t>=Cs.LOWER_A&&t<=Cs.LOWER_F}function oXe(t){return t>=Cs.UPPER_A&&t<=Cs.UPPER_Z||t>=Cs.LOWER_A&&t<=Cs.LOWER_Z||qF(t)}function aXe(t){return t===Cs.EQUALS||oXe(t)}var bs;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(bs||(bs={}));var Bp;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Bp||(Bp={}));class lXe{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=bs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bp.Strict}startEntity(e){this.decodeMode=e,this.state=bs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case bs.EntityStart:return e.charCodeAt(n)===Cs.NUM?(this.state=bs.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=bs.NamedEntity,this.stateNamedEntity(e,n));case bs.NumericStart:return this.stateNumericStart(e,n);case bs.NumericDecimal:return this.stateNumericDecimal(e,n);case bs.NumericHex:return this.stateNumericHex(e,n);case bs.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|iXe)===Cs.LOWER_X?(this.state=bs.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=bs.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(qF(i)||sXe(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(qF(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Cs.SEMI)this.consumed+=1;else if(this.decodeMode===Bp.Strict)return 0;return this.emitCodePoint(rXe(this.result),this.consumed),this.errors&&(e!==Cs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Hp.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=uXe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Bp.Attribute&&(s===0||aXe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Hp.VALUE_LENGTH)>>14,s!==0){if(o===Cs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Bp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Hp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Hp.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case bs.NamedEntity:return this.result!==0&&(this.decodeMode!==Bp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case bs.NumericDecimal:return this.emitNumericEntity(0,2);case bs.NumericHex:return this.emitNumericEntity(0,3);case bs.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case bs.EntityStart:return 0}}}function afe(t){let e="";const n=new lXe(t,r=>e+=nXe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=e+i.slice(o);return e="",l}}function uXe(t,e,n,r){const i=(e&Hp.BRANCH_LENGTH)>>7,s=e&Hp.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=t[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return t[l+i]}return-1}const cXe=afe(ZYe);afe(eXe);function lfe(t,e=Bp.Legacy){return cXe(t,e)}function fXe(t){return Object.prototype.toString.call(t)}function nU(t){return fXe(t)==="[object String]"}const hXe=Object.prototype.hasOwnProperty;function dXe(t,e){return hXe.call(t,e)}function fD(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function ufe(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function rU(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function _E(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const cfe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,pXe=/&([a-z#][a-z0-9]{1,31});/gi,gXe=new RegExp(cfe.source+"|"+pXe.source,"gi"),mXe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function yXe(t,e){if(e.charCodeAt(0)===35&&mXe.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return rU(r)?_E(r):t}const n=lfe(t);return n!==t?n:t}function bXe(t){return t.indexOf("\\")<0?t:t.replace(cfe,"$1")}function lv(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(gXe,function(e,n,r){return n||yXe(e,r)})}const vXe=/[&<>"]/,xXe=/[&<>"]/g,wXe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function _Xe(t){return wXe[t]}function F0(t){return vXe.test(t)?t.replace(xXe,_Xe):t}const SXe=/[.?*+^$[\]\\(){}|-]/g;function AXe(t){return t.replace(SXe,"\\$&")}function Vr(t){switch(t){case 9:case 32:return!0}return!1}function z_(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function j_(t){return tU.test(t)||sfe.test(t)}function q_(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function hD(t){return t=t.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(t=t.replace(/áº/g,"Ã")),t.toLowerCase().toUpperCase()}const CXe={mdurl:KYe,ucmicro:JYe},kXe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:ufe,assign:fD,escapeHtml:F0,escapeRE:AXe,fromCodePoint:_E,has:dXe,isMdAsciiPunct:q_,isPunctChar:j_,isSpace:Vr,isString:nU,isValidEntityCode:rU,isWhiteSpace:z_,lib:CXe,normalizeReference:hD,unescapeAll:lv,unescapeMd:bXe},Symbol.toStringTag,{value:"Module"}));function EXe(t,e,n){let r,i,s,o;const a=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(s=t.src.charCodeAt(t.pos),s===93&&(r--,r===0)){i=!0;break}if(o=t.pos,t.md.inline.skipToken(t),s===91){if(o===t.pos-1)r++;else if(n)return t.pos=l,-1}}let u=-1;return i&&(u=t.pos),t.pos=l,u}function DXe(t,e,n){let r,i=e;const s={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=lv(t.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let o=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(s.str=lv(t.slice(e,i)),s.pos=i,s.ok=!0),s}function TXe(t,e,n,r){let i,s=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=n)return o;let a=t.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;e++,s++,a===40&&(a=41),o.marker=a}for(;s<n;){if(i=t.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=lv(t.slice(e,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<n&&s++,s++}return o.can_continue=!0,o.str+=lv(t.slice(e,s)),o}const OXe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:DXe,parseLinkLabel:EXe,parseLinkTitle:TXe},Symbol.toStringTag,{value:"Module"})),yh={};yh.code_inline=function(t,e,n,r,i){const s=t[e];return"<code"+i.renderAttrs(s)+">"+F0(s.content)+"</code>"};yh.code_block=function(t,e,n,r,i){const s=t[e];return"<pre"+i.renderAttrs(s)+"><code>"+F0(t[e].content)+`</code></pre>
`};yh.fence=function(t,e,n,r,i){const s=t[e],o=s.info?lv(s.info).trim():"";let a="",l="";if(o){const c=o.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(n.highlight?u=n.highlight(s.content,a,l)||F0(s.content):u=F0(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const c=s.attrIndex("class"),f=s.attrs?s.attrs.slice():[];c<0?f.push(["class",n.langPrefix+a]):(f[c]=f[c].slice(),f[c][1]+=" "+n.langPrefix+a);const h={attrs:f};return`<pre><code${i.renderAttrs(h)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${u}</code></pre>
`};yh.image=function(t,e,n,r,i){const s=t[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(t,e,n)};yh.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};yh.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};yh.text=function(t,e){return F0(t[e].content)};yh.html_block=function(t,e){return t[e].content};yh.html_inline=function(t,e){return t[e].content};function l2(){this.rules=fD({},yh)}l2.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+F0(e.attrs[n][0])+'="'+F0(e.attrs[n][1])+'"';return i};l2.prototype.renderToken=function(e,n,r){const i=e[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<e.length)){const a=e[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};l2.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let s=0,o=t.length;s<o;s++){const a=t[s].type;typeof i[a]<"u"?r+=i[a](t,s,e,n,this):r+=this.renderToken(t,s,e)}return r};l2.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,s=t.length;i<s;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};l2.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let s=0,o=t.length;s<o;s++){const a=t[s].type;a==="inline"?r+=this.renderInline(t[s].children,e,n):typeof i[a]<"u"?r+=i[a](t,s,e,n,this):r+=this.renderToken(t,s,e,n)}return r};function Wa(){this.__rules__=[],this.__cache__=null}Wa.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Wa.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Wa.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Wa.prototype.before=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Wa.prototype.after=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Wa.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Wa.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Wa.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Wa.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Wa.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Lc(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Lc.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};Lc.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Lc.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};Lc.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Lc.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function ffe(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}ffe.prototype.Token=Lc;const MXe=/\r\n?|\n/g,IXe=/\0/g;function RXe(t){let e;e=t.src.replace(MXe,`
`),e=e.replace(IXe,"ï¿½"),t.src=e}function FXe(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function NXe(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function LXe(t){return/^<a[>\s]/i.test(t)}function PXe(t){return/^<\/a\s*>/i.test(t)}function BXe(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(LXe(a.content)&&s>0&&s--,PXe(a.content)&&s++),!(s>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const l=a.content;let u=t.md.linkify.match(l);const c=[];let f=a.level,h=0;u.length>0&&u[0].index===0&&o>0&&i[o-1].type==="text_special"&&(u=u.slice(1));for(let d=0;d<u.length;d++){const p=u[d].url,m=t.md.normalizeLink(p);if(!t.md.validateLink(m))continue;let y=u[d].text;u[d].schema?u[d].schema==="mailto:"&&!/^mailto:/i.test(y)?y=t.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=t.md.normalizeLinkText(y):y=t.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,"");const b=u[d].index;if(b>h){const S=new t.Token("text","",0);S.content=l.slice(h,b),S.level=f,c.push(S)}const v=new t.Token("link_open","a",1);v.attrs=[["href",m]],v.level=f++,v.markup="linkify",v.info="auto",c.push(v);const w=new t.Token("text","",0);w.content=y,w.level=f,c.push(w);const _=new t.Token("link_close","a",-1);_.level=--f,_.markup="linkify",_.info="auto",c.push(_),h=u[d].lastIndex}if(h<l.length){const d=new t.Token("text","",0);d.content=l.slice(h),d.level=f,c.push(d)}e[n].children=i=ufe(i,o,c)}}}}const hfe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,$Xe=/\((c|tm|r)\)/i,UXe=/\((c|tm|r)\)/ig,zXe={c:"Â©",r:"Â®",tm:"â¢"};function jXe(t,e){return zXe[e.toLowerCase()]}function qXe(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(UXe,jXe)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function VXe(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&hfe.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function WXe(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&($Xe.test(t.tokens[e].content)&&qXe(t.tokens[e].children),hfe.test(t.tokens[e].content)&&VXe(t.tokens[e].children))}const HXe=/['"]/,IK=/['"]/g,RK="â";function YA(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function GXe(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const s=t[i],o=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){IK.lastIndex=l;const c=IK.exec(a);if(!c)break;let f=!0,h=!0;l=c.index+1;const d=c[0]==="'";let p=32;if(c.index-1>=0)p=a.charCodeAt(c.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){p=t[n].content.charCodeAt(t[n].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){m=t[n].content.charCodeAt(0);break}const y=q_(p)||j_(String.fromCharCode(p)),b=q_(m)||j_(String.fromCharCode(m)),v=z_(p),w=z_(m);if(w?f=!1:b&&(v||y||(f=!1)),v?h=!1:y&&(w||b||(h=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=y,h=b),!f&&!h){d&&(s.content=YA(s.content,c.index,RK));continue}if(h)for(n=r.length-1;n>=0;n--){let _=r[n];if(r[n].level<o)break;if(_.single===d&&r[n].level===o){_=r[n];let S,A;d?(S=e.md.options.quotes[2],A=e.md.options.quotes[3]):(S=e.md.options.quotes[0],A=e.md.options.quotes[1]),s.content=YA(s.content,c.index,A),t[_.token].content=YA(t[_.token].content,_.pos,S),l+=A.length-1,_.token===i&&(l+=S.length-1),a=s.content,u=a.length,r.length=n;continue e}}f?r.push({token:i,pos:c.index,single:d,level:o}):h&&d&&(s.content=YA(s.content,c.index,RK))}}}function YXe(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!HXe.test(t.tokens[e].content)||GXe(t.tokens[e].children,t)}function XXe(t){let e,n;const r=t.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=n=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}}const U9=[["normalize",RXe],["block",FXe],["inline",NXe],["linkify",BXe],["replacements",WXe],["smartquotes",YXe],["text_join",XXe]];function iU(){this.ruler=new Wa;for(let t=0;t<U9.length;t++)this.ruler.push(U9[t][0],U9[t][1])}iU.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};iU.prototype.State=ffe;function bh(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,u=i.length,c=!1;o<u;o++){const f=i.charCodeAt(o);if(!c)if(Vr(f)){a++,f===9?l+=4-l%4:l++;continue}else c=!0;(f===10||o===u-1)&&(f!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}bh.prototype.push=function(t,e,n){const r=new Lc(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};bh.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};bh.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};bh.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!Vr(r))break}return e};bh.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!Vr(this.src.charCodeAt(--e)))return e+1;return e};bh.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};bh.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};bh.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const s=new Array(n-e);for(let o=0,a=e;a<n;a++,o++){let l=0;const u=this.bMarks[a];let c=u,f;for(a+1<n||i?f=this.eMarks[a]+1:f=this.eMarks[a];c<f&&l<r;){const h=this.src.charCodeAt(c);if(Vr(h))h===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(c,f):s[o]=this.src.slice(c,f)}return s.join("")};bh.prototype.Token=Lc;const KXe=65536;function z9(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function FK(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),s=!1,o=0,a="";for(;r<n;)i===124&&(s?(a+=t.substring(o,r-1),o=r):(e.push(a+t.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(o)),e}function QXe(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let s=t.bMarks[i]+t.tShift[i];if(s>=t.eMarks[i])return!1;const o=t.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=t.eMarks[i])return!1;const a=t.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Vr(a)||o===45&&Vr(a))return!1;for(;s<t.eMarks[i];){const _=t.src.charCodeAt(s);if(_!==124&&_!==45&&_!==58&&!Vr(_))return!1;s++}let l=z9(t,e+1),u=l.split("|");const c=[];for(let _=0;_<u.length;_++){const S=u[_].trim();if(!S){if(_===0||_===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?c.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=z9(t,e).trim(),l.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=FK(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const f=u.length;if(f===0||f!==c.length)return!1;if(r)return!0;const h=t.parentType;t.parentType="table";const d=t.md.block.ruler.getRules("blockquote"),p=t.push("table_open","table",1),m=[e,0];p.map=m;const y=t.push("thead_open","thead",1);y.map=[e,e+1];const b=t.push("tr_open","tr",1);b.map=[e,e+1];for(let _=0;_<u.length;_++){const S=t.push("th_open","th",1);c[_]&&(S.attrs=[["style","text-align:"+c[_]]]);const A=t.push("inline","",0);A.content=u[_].trim(),A.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let v,w=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let _=!1;for(let A=0,C=d.length;A<C;A++)if(d[A](t,i,n,!0)){_=!0;break}if(_||(l=z9(t,i).trim(),!l)||t.sCount[i]-t.blkIndent>=4||(u=FK(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=f-u.length,w>KXe))break;if(i===e+2){const A=t.push("tbody_open","tbody",1);A.map=v=[e+2,0]}const S=t.push("tr_open","tr",1);S.map=[i,i+1];for(let A=0;A<f;A++){const C=t.push("td_open","td",1);c[A]&&(C.attrs=[["style","text-align:"+c[A]]]);const D=t.push("inline","",0);D.content=u[A]?u[A].trim():"",D.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return v&&(t.push("tbody_close","tbody",-1),v[1]=i),t.push("table_close","table",-1),m[1]=i,t.parentType=h,t.line=i,!0}function JXe(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const s=t.push("code_block","code",0);return s.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,s.map=[e,t.line],!0}function ZXe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>s)return!1;const o=t.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=t.skipChars(i,o);let l=i-a;if(l<3)return!1;const u=t.src.slice(a,i),c=t.src.slice(i,s);if(o===96&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let f=e,h=!1;for(;f++,!(f>=n||(i=a=t.bMarks[f]+t.tShift[f],s=t.eMarks[f],i<s&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(i)===o&&!(t.sCount[f]-t.blkIndent>=4)&&(i=t.skipChars(i,o),!(i-a<l)&&(i=t.skipSpaces(i),!(i<s)))){h=!0;break}l=t.sCount[e],t.line=f+(h?1:0);const d=t.push("fence","code",0);return d.info=c,d.content=t.getLines(e+1,f,l,!0),d.markup=u,d.map=[e,t.line],!0}function eKe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];const o=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],c=[],f=t.md.block.ruler.getRules("blockquote"),h=t.parentType;t.parentType="blockquote";let d=!1,p;for(p=e;p<n;p++){const w=t.sCount[p]<t.blkIndent;if(i=t.bMarks[p]+t.tShift[p],s=t.eMarks[p],i>=s)break;if(t.src.charCodeAt(i++)===62&&!w){let S=t.sCount[p]+1,A,C;t.src.charCodeAt(i)===32?(i++,S++,C=!1,A=!0):t.src.charCodeAt(i)===9?(A=!0,(t.bsCount[p]+S)%4===3?(i++,S++,C=!1):C=!0):A=!1;let D=S;for(a.push(t.bMarks[p]),t.bMarks[p]=i;i<s;){const T=t.src.charCodeAt(i);if(Vr(T))T===9?D+=4-(D+t.bsCount[p]+(C?1:0))%4:D++;else break;i++}d=i>=s,l.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(A?1:0),u.push(t.sCount[p]),t.sCount[p]=D-S,c.push(t.tShift[p]),t.tShift[p]=i-t.bMarks[p];continue}if(d)break;let _=!1;for(let S=0,A=f.length;S<A;S++)if(f[S](t,p,n,!0)){_=!0;break}if(_){t.lineMax=p,t.blkIndent!==0&&(a.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}a.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]=-1}const m=t.blkIndent;t.blkIndent=0;const y=t.push("blockquote_open","blockquote",1);y.markup=">";const b=[e,0];y.map=b,t.md.block.tokenize(t,e,p);const v=t.push("blockquote_close","blockquote",-1);v.markup=">",t.lineMax=o,t.parentType=h,b[1]=t.line;for(let w=0;w<c.length;w++)t.bMarks[w+e]=a[w],t.tShift[w+e]=c[w],t.sCount[w+e]=u[w],t.bsCount[w+e]=l[w];return t.blkIndent=m,!0}function tKe(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.bMarks[e]+t.tShift[e];const o=t.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const u=t.src.charCodeAt(s++);if(u!==o&&!Vr(u))return!1;u===o&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const l=t.push("hr","hr",0);return l.map=[e,t.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function NK(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=t.src.charCodeAt(r);if(!Vr(s))return-1}return r}function LK(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let s=t.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=t.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=t.src.charCodeAt(i),!Vr(s))?-1:i}function nKe(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function rKe(t,e,n,r){let i,s,o,a,l=e,u=!0;if(t.sCount[l]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[l]-t.listIndent>=4&&t.sCount[l]<t.blkIndent)return!1;let c=!1;r&&t.parentType==="paragraph"&&t.sCount[l]>=t.blkIndent&&(c=!0);let f,h,d;if((d=LK(t,l))>=0){if(f=!0,o=t.bMarks[l]+t.tShift[l],h=Number(t.src.slice(o,d-1)),c&&h!==1)return!1}else if((d=NK(t,l))>=0)f=!1;else return!1;if(c&&t.skipSpaces(d)>=t.eMarks[l])return!1;if(r)return!0;const p=t.src.charCodeAt(d-1),m=t.tokens.length;f?(a=t.push("ordered_list_open","ol",1),h!==1&&(a.attrs=[["start",h]])):a=t.push("bullet_list_open","ul",1);const y=[l,0];a.map=y,a.markup=String.fromCharCode(p);let b=!1;const v=t.md.block.ruler.getRules("list"),w=t.parentType;for(t.parentType="list";l<n;){s=d,i=t.eMarks[l];const _=t.sCount[l]+d-(t.bMarks[l]+t.tShift[l]);let S=_;for(;s<i;){const R=t.src.charCodeAt(s);if(R===9)S+=4-(S+t.bsCount[l])%4;else if(R===32)S++;else break;s++}const A=s;let C;A>=i?C=1:C=S-_,C>4&&(C=1);const D=_+C;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const T=[l,0];a.map=T,f&&(a.info=t.src.slice(o,d-1));const M=t.tight,I=t.tShift[l],N=t.sCount[l],P=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=D,t.tight=!0,t.tShift[l]=A-t.bMarks[l],t.sCount[l]=S,A>=i&&t.isEmpty(l+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,l,n,!0),(!t.tight||b)&&(u=!1),b=t.line-l>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=P,t.tShift[l]=I,t.sCount[l]=N,t.tight=M,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=t.line,T[1]=l,l>=n||t.sCount[l]<t.blkIndent||t.sCount[l]-t.blkIndent>=4)break;let O=!1;for(let R=0,L=v.length;R<L;R++)if(v[R](t,l,n,!0)){O=!0;break}if(O)break;if(f){if(d=LK(t,l),d<0)break;o=t.bMarks[l]+t.tShift[l]}else if(d=NK(t,l),d<0)break;if(p!==t.src.charCodeAt(d-1))break}return f?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),y[1]=l,t.line=l,t.parentType=w,u&&nKe(t,m),!0}function iKe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],o=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function a(v){const w=t.lineMax;if(v>=w||t.isEmpty(v))return null;let _=!1;if(t.sCount[v]-t.blkIndent>3&&(_=!0),t.sCount[v]<0&&(_=!0),!_){const C=t.md.block.ruler.getRules("reference"),D=t.parentType;t.parentType="reference";let T=!1;for(let M=0,I=C.length;M<I;M++)if(C[M](t,v,w,!0)){T=!0;break}if(t.parentType=D,T)return null}const S=t.bMarks[v]+t.tShift[v],A=t.eMarks[v];return t.src.slice(S,A+1)}let l=t.src.slice(i,s+1);s=l.length;let u=-1;for(i=1;i<s;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(v===92&&(i++,i<s&&l.charCodeAt(i)===10)){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<s;i++){const v=l.charCodeAt(i);if(v===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Vr(v))break}const c=t.md.helpers.parseLinkDestination(l,i,s);if(!c.ok)return!1;const f=t.md.normalizeLink(c.str);if(!t.md.validateLink(f))return!1;i=c.pos;const h=i,d=o,p=i;for(;i<s;i++){const v=l.charCodeAt(i);if(v===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Vr(v))break}let m=t.md.helpers.parseLinkTitle(l,i,s);for(;m.can_continue;){const v=a(o);if(v===null)break;l+=v,i=s,s=l.length,o++,m=t.md.helpers.parseLinkTitle(l,i,s,m)}let y;for(i<s&&p!==i&&m.ok?(y=m.str,i=m.pos):(y="",i=h,o=d);i<s;){const v=l.charCodeAt(i);if(!Vr(v))break;i++}if(i<s&&l.charCodeAt(i)!==10&&y)for(y="",i=h,o=d;i<s;){const v=l.charCodeAt(i);if(!Vr(v))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const b=hD(l.slice(1,u));return b?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[b]>"u"&&(t.env.references[b]={title:y,href:f}),t.line=o),!0):!1}const sKe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],oKe="[a-zA-Z_:][a-zA-Z0-9:._-]*",aKe="[^\"'=<>`\\x00-\\x20]+",lKe="'[^']*'",uKe='"[^"]*"',cKe="(?:"+aKe+"|"+lKe+"|"+uKe+")",fKe="(?:\\s+"+oKe+"(?:\\s*=\\s*"+cKe+")?)",dfe="<[A-Za-z][A-Za-z0-9\\-]*"+fKe+"*\\s*\\/?>",pfe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",hKe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",dKe="<[?][\\s\\S]*?[?]>",pKe="<![A-Za-z][^>]*>",gKe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",mKe=new RegExp("^(?:"+dfe+"|"+pfe+"|"+hKe+"|"+dKe+"|"+pKe+"|"+gKe+")"),yKe=new RegExp("^(?:"+dfe+"|"+pfe+")"),ny=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+sKe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yKe.source+"\\s*$"),/^$/,!1]];function bKe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let o=t.src.slice(i,s),a=0;for(;a<ny.length&&!ny[a][0].test(o);a++);if(a===ny.length)return!1;if(r)return ny[a][2];let l=e+1;if(!ny[a][1].test(o)){for(;l<n&&!(t.sCount[l]<t.blkIndent);l++)if(i=t.bMarks[l]+t.tShift[l],s=t.eMarks[l],o=t.src.slice(i,s),ny[a][1].test(o)){o.length!==0&&l++;break}}t.line=l;const u=t.push("html_block","",0);return u.map=[e,l],u.content=t.getLines(e,l,t.blkIndent,!0),!0}function vKe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=t.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=t.src.charCodeAt(++i);if(a>6||i<s&&!Vr(o))return!1;if(r)return!0;s=t.skipSpacesBack(s,i);const l=t.skipCharsBack(s,35,i);l>i&&Vr(t.src.charCodeAt(l-1))&&(s=l),t.line=e+1;const u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];const c=t.push("inline","",0);c.content=t.src.slice(i,s).trim(),c.map=[e,t.line],c.children=[];const f=t.push("heading_close","h"+String(a),-1);return f.markup="########".slice(0,a),!0}function xKe(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let s=0,o,a=e+1;for(;a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let d=t.bMarks[a]+t.tShift[a];const p=t.eMarks[a];if(d<p&&(o=t.src.charCodeAt(d),(o===45||o===61)&&(d=t.skipChars(d,o),d=t.skipSpaces(d),d>=p))){s=o===61?1:2;break}}if(t.sCount[a]<0)continue;let h=!1;for(let d=0,p=r.length;d<p;d++)if(r[d](t,a,n,!0)){h=!0;break}if(h)break}if(!s)return!1;const l=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const u=t.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[e,t.line];const c=t.push("inline","",0);c.content=l,c.map=[e,t.line-1],c.children=[];const f=t.push("heading_close","h"+String(s),-1);return f.markup=String.fromCharCode(o),t.parentType=i,!0}function wKe(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let s=e+1;for(t.parentType="paragraph";s<n&&!t.isEmpty(s);s++){if(t.sCount[s]-t.blkIndent>3||t.sCount[s]<0)continue;let u=!1;for(let c=0,f=r.length;c<f;c++)if(r[c](t,s,n,!0)){u=!0;break}if(u)break}const o=t.getLines(e,s,t.blkIndent,!1).trim();t.line=s;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const l=t.push("inline","",0);return l.content=o,l.map=[e,t.line],l.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const XA=[["table",QXe,["paragraph","reference"]],["code",JXe],["fence",ZXe,["paragraph","reference","blockquote","list"]],["blockquote",eKe,["paragraph","reference","blockquote","list"]],["hr",tKe,["paragraph","reference","blockquote","list"]],["list",rKe,["paragraph","reference","blockquote"]],["reference",iKe],["html_block",bKe,["paragraph","reference","blockquote"]],["heading",vKe,["paragraph","reference","blockquote"]],["lheading",xKe],["paragraph",wKe]];function dD(){this.ruler=new Wa;for(let t=0;t<XA.length;t++)this.ruler.push(XA[t][0],XA[t][1],{alt:(XA[t][2]||[]).slice()})}dD.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,s=t.md.options.maxNesting;let o=e,a=!1;for(;o<n&&(t.line=o=t.skipEmptyLines(o),!(o>=n||t.sCount[o]<t.blkIndent));){if(t.level>=s){t.line=n;break}const l=t.line;let u=!1;for(let c=0;c<i;c++)if(u=r[c](t,o,n,!1),u){if(l>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),o=t.line,o<n&&t.isEmpty(o)&&(a=!0,o++,t.line=o)}};dD.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};dD.prototype.State=bh;function fS(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}fS.prototype.pushPending=function(){const t=new Lc("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};fS.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new Lc(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};fS.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let s=t;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const o=s-t,a=s<n?this.src.charCodeAt(s):32,l=q_(i)||j_(String.fromCharCode(i)),u=q_(a)||j_(String.fromCharCode(a)),c=z_(i),f=z_(a),h=!f&&(!u||c||l),d=!c&&(!l||f||u);return{can_open:h&&(e||!d||l),can_close:d&&(e||!h||u),length:o}};fS.prototype.Token=Lc;function _Ke(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function SKe(t,e){let n=t.pos;for(;n<t.posMax&&!_Ke(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const AKe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function CKe(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(AKe);if(!i)return!1;const s=i[1],o=t.md.linkify.matchAtStart(t.src.slice(n-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=t.md.normalizeLink(a);if(!t.md.validateLink(l))return!1;if(!e){t.pending=t.pending.slice(0,-s.length);const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(a);const f=t.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return t.pos+=a.length-s.length,!0}function kKe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&t.pending.charCodeAt(s-1)===32;)s--;t.pending=t.pending.slice(0,s),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&Vr(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const sU=[];for(let t=0;t<256;t++)sU.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){sU[t.charCodeAt(0)]=1});function EKe(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!Vr(i));)n++;return t.pos=n,!0}let s=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=t.src.charCodeAt(n+1);a>=56320&&a<=57343&&(s+=t.src[n+1],n++)}const o="\\"+s;if(!e){const a=t.push("text_special","",0);i<256&&sU[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return t.pos=n+1,!0}function DKe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=t.posMax;for(;n<s&&t.src.charCodeAt(n)===96;)n++;const o=t.src.slice(i,n),a=o.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=o),t.pos+=a,!0;let l=n,u;for(;(u=t.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&t.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!e){const f=t.push("code_inline","code",0);f.markup=o,f.content=t.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=l,!0}t.backticks[c]=u}return t.backticksScanned=!0,e||(t.pending+=o),t.pos+=a,!0}function TKe(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=t.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=t.push("text","",0),a.content=o+o,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function PK(t,e){let n;const r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];n=t.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<t.tokens.length&&t.tokens[o].type==="s_close";)o++;o--,s!==o&&(n=t.tokens[o],t.tokens[o]=t.tokens[s],t.tokens[s]=n)}}function OKe(t){const e=t.tokens_meta,n=t.tokens_meta.length;PK(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&PK(t,e[r].delimiters)}const gfe={tokenize:TKe,postProcess:OKe};function MKe(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let s=0;s<i.length;s++){const o=t.push("text","",0);o.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function BK(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=t.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=t.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function IKe(t){const e=t.tokens_meta,n=t.tokens_meta.length;BK(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&BK(t,e[r].delimiters)}const mfe={tokenize:MKe,postProcess:IKe};function RKe(t,e){let n,r,i,s,o="",a="",l=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const c=t.pos,f=t.posMax,h=t.pos+1,d=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&t.src.charCodeAt(p)===40){for(u=!1,p++;p<f&&(n=t.src.charCodeAt(p),!(!Vr(n)&&n!==10));p++);if(p>=f)return!1;if(l=p,i=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),i.ok){for(o=t.md.normalizeLink(i.str),t.md.validateLink(o)?p=i.pos:o="",l=p;p<f&&(n=t.src.charCodeAt(p),!(!Vr(n)&&n!==10));p++);if(i=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<f&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<f&&(n=t.src.charCodeAt(p),!(!Vr(n)&&n!==10));p++);}(p>=f||t.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof t.env.references>"u")return!1;if(p<f&&t.src.charCodeAt(p)===91?(l=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(l,p++):p=d+1):p=d+1,r||(r=t.src.slice(h,d)),s=t.env.references[hD(r)],!s)return t.pos=c,!1;o=s.href,a=s.title}if(!e){t.pos=h,t.posMax=d;const m=t.push("link_open","a",1),y=[["href",o]];m.attrs=y,a&&y.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=f,!0}function FKe(t,e){let n,r,i,s,o,a,l,u,c="";const f=t.pos,h=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const d=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(s=p+1,s<h&&t.src.charCodeAt(s)===40){for(s++;s<h&&(n=t.src.charCodeAt(s),!(!Vr(n)&&n!==10));s++);if(s>=h)return!1;for(u=s,a=t.md.helpers.parseLinkDestination(t.src,s,t.posMax),a.ok&&(c=t.md.normalizeLink(a.str),t.md.validateLink(c)?s=a.pos:c=""),u=s;s<h&&(n=t.src.charCodeAt(s),!(!Vr(n)&&n!==10));s++);if(a=t.md.helpers.parseLinkTitle(t.src,s,t.posMax),s<h&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<h&&(n=t.src.charCodeAt(s),!(!Vr(n)&&n!==10));s++);else l="";if(s>=h||t.src.charCodeAt(s)!==41)return t.pos=f,!1;s++}else{if(typeof t.env.references>"u")return!1;if(s<h&&t.src.charCodeAt(s)===91?(u=s+1,s=t.md.helpers.parseLinkLabel(t,s),s>=0?i=t.src.slice(u,s++):s=p+1):s=p+1,i||(i=t.src.slice(d,p)),o=t.env.references[hD(i)],!o)return t.pos=f,!1;c=o.href,l=o.title}if(!e){r=t.src.slice(d,p);const m=[];t.md.inline.parse(r,t.md,t.env,m);const y=t.push("image","img",0),b=[["src",c],["alt",""]];y.attrs=b,y.children=m,y.content=r,l&&b.push(["title",l])}return t.pos=s,t.posMax=h,!0}const NKe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,LKe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function PKe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const o=t.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const s=t.src.slice(r+1,n);if(LKe.test(s)){const o=t.md.normalizeLink(s);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(s);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=s.length+2,!0}if(NKe.test(s)){const o=t.md.normalizeLink("mailto:"+s);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(s);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=s.length+2,!0}return!1}function BKe(t){return/^<a[>\s]/i.test(t)}function $Ke(t){return/^<\/a\s*>/i.test(t)}function UKe(t){const e=t|32;return e>=97&&e<=122}function zKe(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!UKe(i))return!1;const s=t.src.slice(r).match(mKe);if(!s)return!1;if(!e){const o=t.push("html_inline","",0);o.content=s[0],BKe(o.content)&&t.linkLevel++,$Ke(o.content)&&t.linkLevel--}return t.pos+=s[0].length,!0}const jKe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,qKe=/^&([a-z][a-z0-9]{1,31});/i;function VKe(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const s=t.src.slice(n).match(jKe);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=t.push("text_special","",0);a.content=rU(o)?_E(o):_E(65533),a.markup=s[0],a.info="entity"}return t.pos+=s[0].length,!0}}else{const s=t.src.slice(n).match(qKe);if(s){const o=lfe(s[0]);if(o!==s[0]){if(!e){const a=t.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return t.pos+=s[0].length,!0}}}return!1}function $K(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const s=[];for(let o=0;o<n;o++){const a=t[o];if(s.push(0),(t[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=r-s[r]-1,c=u;for(;u>l;u-=s[u]+1){const f=t[u];if(f.marker===a.marker&&f.open&&f.end<0){let h=!1;if((f.close||a.open)&&(f.length+a.length)%3===0&&(f.length%3!==0||a.length%3!==0)&&(h=!0),!h){const d=u>0&&!t[u-1].open?s[u-1]+1:0;s[o]=o-u+d,s[u]=d,a.open=!1,f.end=o,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function WKe(t){const e=t.tokens_meta,n=t.tokens_meta.length;$K(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&$K(e[r].delimiters)}function HKe(t){let e,n,r=0;const i=t.tokens,s=t.tokens.length;for(e=n=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const j9=[["text",SKe],["linkify",CKe],["newline",kKe],["escape",EKe],["backticks",DKe],["strikethrough",gfe.tokenize],["emphasis",mfe.tokenize],["link",RKe],["image",FKe],["autolink",PKe],["html_inline",zKe],["entity",VKe]],q9=[["balance_pairs",WKe],["strikethrough",gfe.postProcess],["emphasis",mfe.postProcess],["fragments_join",HKe]];function hS(){this.ruler=new Wa;for(let t=0;t<j9.length;t++)this.ruler.push(j9[t][0],j9[t][1]);this.ruler2=new Wa;for(let t=0;t<q9.length;t++)this.ruler2.push(q9[t][0],q9[t][1])}hS.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,s=t.cache;if(typeof s[e]<"u"){t.pos=s[e];return}let o=!1;if(t.level<i){for(let a=0;a<r;a++)if(t.level++,o=n[a](t,!0),t.level--,o){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;o||t.pos++,s[e]=t.pos};hS.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const s=t.pos;let o=!1;if(t.level<i){for(let a=0;a<n;a++)if(o=e[a](t,!1),o){if(s>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};hS.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};hS.prototype.State=fS;function GKe(t){const e={};t=t||{},e.src_Any=rfe.source,e.src_Cc=ife.source,e.src_Z=ofe.source,e.src_P=tU.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><ï½]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+e.src_ZPCc+"))((?![$+<=>^`|ï½])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+e.src_ZPCc+"))((?![$+<=>^`|ï½])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function VF(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function pD(t){return Object.prototype.toString.call(t)}function YKe(t){return pD(t)==="[object String]"}function XKe(t){return pD(t)==="[object Object]"}function KKe(t){return pD(t)==="[object RegExp]"}function UK(t){return pD(t)==="[object Function]"}function QKe(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const yfe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function JKe(t){return Object.keys(t||{}).reduce(function(e,n){return e||yfe.hasOwnProperty(n)},!1)}const ZKe={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},eQe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tQe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function nQe(t){t.__index__=-1,t.__text_cache__=""}function rQe(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function zK(){return function(t,e){e.normalize(t)}}function SE(t){const e=t.re=GKe(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(eQe),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){const l=t.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(t.__compiled__[a]=u,XKe(l)){KKe(l.validate)?u.validate=rQe(l.validate):UK(l.validate)?u.validate=l.validate:s(a,l),UK(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=zK();return}if(YKe(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:zK()};const o=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(QKe).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+e.src_ZPCc+"))("+o+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+e.src_ZPCc+"))("+o+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),nQe(t)}function iQe(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function WF(t,e){const n=new iQe(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Pl(t,e){if(!(this instanceof Pl))return new Pl(t,e);e||JKe(t)&&(e=t,t={}),this.__opts__=VF({},yfe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=VF({},ZKe,t),this.__compiled__={},this.__tlds__=tQe,this.__tlds_replaced__=!1,this.re={},SE(this)}Pl.prototype.add=function(e,n){return this.__schemas__[e]=n,SE(this),this};Pl.prototype.set=function(e){return this.__opts__=VF(this.__opts__,e),this};Pl.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,s,o,a,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(s=this.testSchemaAt(e,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};Pl.prototype.pretest=function(e){return this.re.pretest.test(e)};Pl.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};Pl.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(WF(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(WF(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Pl.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,WF(this,0)):null};Pl.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),SE(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,SE(this),this)};Pl.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Pl.prototype.onCompile=function(){};const mb=2147483647,Of=36,oU=1,V_=26,sQe=38,oQe=700,bfe=72,vfe=128,xfe="-",aQe=/^xn--/,lQe=/[^\0-\x7F]/,uQe=/[\x2E\u3002\uFF0E\uFF61]/g,cQe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V9=Of-oU,Mf=Math.floor,W9=String.fromCharCode;function Fp(t){throw new RangeError(cQe[t])}function fQe(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function wfe(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(uQe,".");const i=t.split("."),s=fQe(i,e).join(".");return r+s}function _fe(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const hQe=t=>String.fromCodePoint(...t),dQe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Of},jK=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},Sfe=function(t,e,n){let r=0;for(t=n?Mf(t/oQe):t>>1,t+=Mf(t/e);t>V9*V_>>1;r+=Of)t=Mf(t/V9);return Mf(r+(V9+1)*t/(t+sQe))},Afe=function(t){const e=[],n=t.length;let r=0,i=vfe,s=bfe,o=t.lastIndexOf(xfe);o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&Fp("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const l=r;for(let c=1,f=Of;;f+=Of){a>=n&&Fp("invalid-input");const h=dQe(t.charCodeAt(a++));h>=Of&&Fp("invalid-input"),h>Mf((mb-r)/c)&&Fp("overflow"),r+=h*c;const d=f<=s?oU:f>=s+V_?V_:f-s;if(h<d)break;const p=Of-d;c>Mf(mb/p)&&Fp("overflow"),c*=p}const u=e.length+1;s=Sfe(r-l,u,l==0),Mf(r/u)>mb-i&&Fp("overflow"),i+=Mf(r/u),r%=u,e.splice(r++,0,i)}return String.fromCodePoint(...e)},Cfe=function(t){const e=[];t=_fe(t);const n=t.length;let r=vfe,i=0,s=bfe;for(const l of t)l<128&&e.push(W9(l));const o=e.length;let a=o;for(o&&e.push(xfe);a<n;){let l=mb;for(const c of t)c>=r&&c<l&&(l=c);const u=a+1;l-r>Mf((mb-i)/u)&&Fp("overflow"),i+=(l-r)*u,r=l;for(const c of t)if(c<r&&++i>mb&&Fp("overflow"),c===r){let f=i;for(let h=Of;;h+=Of){const d=h<=s?oU:h>=s+V_?V_:h-s;if(f<d)break;const p=f-d,m=Of-d;e.push(W9(jK(d+p%m,0))),f=Mf(p/m)}e.push(W9(jK(f,0))),s=Sfe(i,u,a===o),i=0,++a}++i,++r}return e.join("")},pQe=function(t){return wfe(t,function(e){return aQe.test(e)?Afe(e.slice(4).toLowerCase()):e})},gQe=function(t){return wfe(t,function(e){return lQe.test(e)?"xn--"+Cfe(e):e})},kfe={version:"2.3.1",ucs2:{decode:_fe,encode:hQe},decode:Afe,encode:Cfe,toASCII:gQe,toUnicode:pQe},mQe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},yQe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},bQe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},vQe={default:mQe,zero:yQe,commonmark:bQe},xQe=/^(vbscript|javascript|file|data):/,wQe=/^data:image\/(gif|png|jpeg|webp);/;function _Qe(t){const e=t.trim().toLowerCase();return xQe.test(e)?wQe.test(e):!0}const Efe=["http:","https:","mailto:"];function SQe(t){const e=eU(t,!0);if(e.hostname&&(!e.protocol||Efe.indexOf(e.protocol)>=0))try{e.hostname=kfe.toASCII(e.hostname)}catch{}return cS(Z$(e))}function AQe(t){const e=eU(t,!0);if(e.hostname&&(!e.protocol||Efe.indexOf(e.protocol)>=0))try{e.hostname=kfe.toUnicode(e.hostname)}catch{}return av(Z$(e),av.defaultChars+"%")}function Mu(t,e){if(!(this instanceof Mu))return new Mu(t,e);e||nU(t)||(e=t||{},t="default"),this.inline=new hS,this.block=new dD,this.core=new iU,this.renderer=new l2,this.linkify=new Pl,this.validateLink=_Qe,this.normalizeLink=SQe,this.normalizeLinkText=AQe,this.utils=kXe,this.helpers=fD({},OXe),this.options={},this.configure(t),e&&this.set(e)}Mu.prototype.set=function(t){return fD(this.options,t),this};Mu.prototype.configure=function(t){const e=this;if(nU(t)){const n=t;if(t=vQe[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Mu.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Mu.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Mu.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Mu.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};Mu.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Mu.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};Mu.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};function CQe(t,e,n){const{parseMetaString:r,trimEndingNewline:i=!0,defaultLanguage:s="text",fallbackLanguage:o}=n,a=e.getLoadedLanguages();t.options.highlight=(l,u="text",c)=>{u===""&&(u=s),o&&!a.includes(u)&&(u=o);const f=r?.(c,l,u)||{},h={...n,lang:u,meta:{...n.meta,...f,__raw:c}},d=[];return d.push({name:"@shikijs/markdown-it:block-class",code(p){p.properties.class=`language-${u}`}}),i&&l.endsWith(`
`)&&(l=l.slice(0,-1)),e.codeToHtml(l,{...h,transformers:[...d,...h.transformers||[]]})}}function kQe(t,e){return function(n){CQe(n,t,e)}}let xm=class extends Error{constructor(e){super(e),this.name="ShikiError"}},aU=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function EQe(){return 2147483648}function DQe(){return typeof performance<"u"?performance.now():Date.now()}const TQe=(t,e)=>t+(e-t%e)%e;async function OQe(t){let e,n;const r={};function i(d){n=d,r.HEAPU8=new Uint8Array(d),r.HEAPU32=new Uint32Array(d)}function s(d,p,m){r.HEAPU8.copyWithin(d,p,p+m)}function o(d){try{return e.grow(d-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(d){const p=r.HEAPU8.length;d=d>>>0;const m=EQe();if(d>m)return!1;for(let y=1;y<=4;y*=2){let b=p*(1+.2/y);b=Math.min(b,d+100663296);const v=Math.min(m,TQe(Math.max(d,b),65536));if(o(v))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function u(d,p,m=1024){const y=p+m;let b=p;for(;d[b]&&!(b>=y);)++b;if(b-p>16&&d.buffer&&l)return l.decode(d.subarray(p,b));let v="";for(;p<b;){let w=d[p++];if(!(w&128)){v+=String.fromCharCode(w);continue}const _=d[p++]&63;if((w&224)===192){v+=String.fromCharCode((w&31)<<6|_);continue}const S=d[p++]&63;if((w&240)===224?w=(w&15)<<12|_<<6|S:w=(w&7)<<18|_<<12|S<<6|d[p++]&63,w<65536)v+=String.fromCharCode(w);else{const A=w-65536;v+=String.fromCharCode(55296|A>>10,56320|A&1023)}}return v}function c(d,p){return d?u(r.HEAPU8,d,p):""}const f={emscripten_get_now:DQe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const p=await t({env:f,wasi_snapshot_preview1:f});e=p.memory,i(e.buffer),Object.assign(r,p),r.UTF8ToString=c}return await h(),r}var MQe=Object.defineProperty,IQe=(t,e,n)=>e in t?MQe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ss=(t,e,n)=>(IQe(t,typeof e!="symbol"?e+"":e,n),n);let vs=null;function RQe(t){throw new aU(t.UTF8ToString(t.getLastOnigError()))}class gD{constructor(e){ss(this,"utf16Length"),ss(this,"utf8Length"),ss(this,"utf16Value"),ss(this,"utf8Value"),ss(this,"utf16OffsetToUtf8"),ss(this,"utf8OffsetToUtf16");const n=e.length,r=gD._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let u=0;u<n;u++){const c=e.charCodeAt(u);let f=c,h=!1;if(c>=55296&&c<=56319&&u+1<n){const d=e.charCodeAt(u+1);d>=56320&&d<=57343&&(f=(c-55296<<10)+65536|d-56320,h=!0)}i&&(s[u]=l,h&&(s[u+1]=l),f<=127?o[l+0]=u:f<=2047?(o[l+0]=u,o[l+1]=u):f<=65535?(o[l+0]=u,o[l+1]=u,o[l+2]=u):(o[l+0]=u,o[l+1]=u,o[l+2]=u,o[l+3]=u)),f<=127?a[l++]=f:f<=2047?(a[l++]=192|(f&1984)>>>6,a[l++]=128|(f&63)>>>0):f<=65535?(a[l++]=224|(f&61440)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0):(a[l++]=240|(f&1835008)>>>18,a[l++]=128|(f&258048)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0),h&&u++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const Jc=class{constructor(t){if(ss(this,"id",++Jc.LAST_ID),ss(this,"_onigBinding"),ss(this,"content"),ss(this,"utf16Length"),ss(this,"utf8Length"),ss(this,"utf16OffsetToUtf8"),ss(this,"utf8OffsetToUtf16"),ss(this,"ptr"),!vs)throw new aU("Must invoke loadWasm first.");this._onigBinding=vs,this.content=t;const e=new gD(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!Jc._sharedPtrInUse?(Jc._sharedPtr||(Jc._sharedPtr=vs.omalloc(1e4)),Jc._sharedPtrInUse=!0,vs.HEAPU8.set(e.utf8Value,Jc._sharedPtr),this.ptr=Jc._sharedPtr):this.ptr=e.createString(vs)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Jc._sharedPtr?Jc._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let dS=Jc;ss(dS,"LAST_ID",0);ss(dS,"_sharedPtr",0);ss(dS,"_sharedPtrInUse",!1);class FQe{constructor(e){if(ss(this,"_onigBinding"),ss(this,"_ptr"),!vs)throw new aU("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const u=new gD(e[a]);n[a]=u.createString(vs),r[a]=u.utf8Length}const i=vs.omalloc(4*e.length);vs.HEAPU32.set(n,i/4);const s=vs.omalloc(4*e.length);vs.HEAPU32.set(r,s/4);const o=vs.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)vs.ofree(n[a]);vs.ofree(s),vs.ofree(i),o===0&&RQe(vs),this._onigBinding=vs,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new dS(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const u=a[l++],c=a[l++],f=[];for(let h=0;h<c;h++){const d=e.convertUtf8OffsetToUtf16(a[l++]),p=e.convertUtf8OffsetToUtf16(a[l++]);f[h]={start:d,end:p,length:p-d}}return{index:u,captureIndices:f}}}function NQe(t){return typeof t.instantiator=="function"}function LQe(t){return typeof t.default=="function"}function PQe(t){return typeof t.data<"u"}function BQe(t){return typeof Response<"u"&&t instanceof Response}function $Qe(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let KA;function UQe(t){if(KA)return KA;async function e(){vs=await OQe(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),NQe(r)?r=await r.instantiator(n):LQe(r)?r=await r.default(n):(PQe(r)&&(r=r.data),BQe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await zQe(r)(n):r=await jQe(r)(n):$Qe(r)?r=await H9(r)(n):r instanceof WebAssembly.Module?r=await H9(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await H9(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return KA=e(),KA}function H9(t){return e=>WebAssembly.instantiate(t,e)}function zQe(t){return e=>WebAssembly.instantiateStreaming(t,e)}function jQe(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let qQe;function VQe(){return qQe}async function WQe(t){return t&&await UQe(t),{createScanner(e){return new FQe(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new dS(e)}}}function HQe(t){return lU(t)}function lU(t){return Array.isArray(t)?GQe(t):t instanceof RegExp?t:typeof t=="object"?YQe(t):t}function GQe(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=lU(t[n]);return e}function YQe(t){let e={};for(let n in t)e[n]=lU(t[n]);return e}function Dfe(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Tfe(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Tfe(t.substring(0,t.length-1)):t.substr(~e+1)}var G9=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,QA=class{static hasCaptures(t){return t===null?!1:(G9.lastIndex=0,G9.test(t))}static replaceCaptures(t,e,n){return t.replace(G9,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Ofe(t,e){return t<e?-1:t>e?1:0}function Mfe(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=Ofe(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function qK(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Ife(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Rfe=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},AE=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(QQe(t),e)}static createFromParsedTheme(t,e){return ZQe(t,e)}_cachedMatchRoot=new Rfe(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>XQe(t.parent,i.parentScopes));return r?new Ffe(r.fontStyle,r.foreground,r.background):null}},Y9=class OC{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new OC(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new OC(n,e[r]);return n}push(e){return new OC(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function XQe(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!KQe(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function KQe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Ffe=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function QQe(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let f=o.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let f=o.settings.fontStyle.split(" ");for(let h=0,d=f.length;h<d;h++)switch(f[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let u=null;typeof o.settings.foreground=="string"&&qK(o.settings.foreground)&&(u=o.settings.foreground);let c=null;typeof o.settings.background=="string"&&qK(o.settings.background)&&(c=o.settings.background);for(let f=0,h=a.length;f<h;f++){let p=a[f].trim().split(" "),m=p[p.length-1],y=null;p.length>1&&(y=p.slice(0,p.length-1),y.reverse()),n[r++]=new JQe(m,y,i,l,u,c)}}return n}var JQe=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},yd=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(yd||{});function ZQe(t,e){t.sort((l,u)=>{let c=Ofe(l.scope,u.scope);return c!==0||(c=Mfe(l.parentScopes,u.parentScopes),c!==0)?c:l.index-u.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new eJe(e),o=new Ffe(n,s.getId(r),s.getId(i)),a=new nJe(new HF(0,null,-1,0,0),[]);for(let l=0,u=t.length;l<u;l++){let c=t[l];a.insert(0,c.scope,c.parentScopes,c.fontStyle,s.getId(c.foreground),s.getId(c.background))}return new AE(s,o,a)}var eJe=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},tJe=Object.freeze([]),HF=class Nfe{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||tJe,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new Nfe(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},nJe=class GF{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(GF._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,u;a===-1?(l=n,u=""):(l=n.substring(0,a),u=n.substring(a+1));let c;this._children.hasOwnProperty(l)?c=this._children[l]:(c=new GF(this._mainRule.clone(),HF.cloneArr(this._rulesWithParentScopes)),this._children[l]=c),c.insert(e+1,u,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(Mfe(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new HF(e,n,r,i,s))}},uv=class tu{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=tu.getLanguageId(e),r=tu.getTokenType(e),i=tu.getFontStyle(e),s=tu.getForeground(e),o=tu.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let l=tu.getLanguageId(e),u=tu.getTokenType(e),c=tu.containsBalancedBrackets(e)?1:0,f=tu.getFontStyle(e),h=tu.getForeground(e),d=tu.getBackground(e);return n!==0&&(l=n),r!==8&&(u=r),i!==null&&(c=i?1:0),s!==-1&&(f=s),o!==0&&(h=o),a!==0&&(d=a),(l<<0|u<<8|c<<10|f<<11|h<<15|d<<24)>>>0}};function CE(t,e){const n=[],r=rJe(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let u=o();if(n.push({matcher:u,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return u=>!!l&&!l(u)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(VK(i)){const l=[];do l.push(i),i=r.next();while(VK(i));return u=>e(l,u)}return null}function o(){const l=[];let u=s();for(;u;)l.push(u),u=s();return c=>l.every(f=>f(c))}function a(){const l=[];let u=o();for(;u&&(l.push(u),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");u=o()}return c=>l.some(f=>f(c))}}function VK(t){return!!t&&!!t.match(/[\w\.:]+/)}function rJe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Lfe(t){typeof t.dispose=="function"&&t.dispose()}var W_=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},iJe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},sJe=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},oJe=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new W_(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new sJe;for(const n of t)aJe(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof W_){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function aJe(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof W_?MC({baseGrammar:s,selfGrammar:i},r):YF(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new W_(a))}function YF(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];kE([r],e,n)}}function MC(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&kE(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&kE(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function kE(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?Dfe({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&kE(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=Pfe(s);switch(o.kind){case 0:MC({...e,selfGrammar:e.baseGrammar},n);break;case 1:MC(e,n);break;case 2:YF(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?YF(o.ruleName,l,n):MC(l,n)}else o.kind===4?n.add(new iJe(o.scopeName,o.ruleName)):n.add(new W_(o.scopeName));break}}}var lJe=class{kind=0},uJe=class{kind=1},cJe=class{constructor(t){this.ruleName=t}kind=2},fJe=class{constructor(t){this.scopeName=t}kind=3},hJe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Pfe(t){if(t==="$base")return new lJe;if(t==="$self")return new uJe;const e=t.indexOf("#");if(e===-1)return new fJe(t);if(e===0)return new cJe(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new hJe(n,r)}}var dJe=/\\(\d+)/,WK=/\\(\d+)/g,pJe=-1,Bfe=-2;var pS=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=QA.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=QA.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Tfe(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:QA.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:QA.replaceCaptures(this._contentName,t,e)}},gJe=class extends pS{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},mJe=class extends pS{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new H_(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new G_,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},HK=class extends pS{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new G_,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},XF=class extends pS{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,l,u){super(t,e,n,r),this._begin=new H_(i,this.id),this.beginCaptures=s,this._end=new H_(o||"ï¿¿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new G_;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},EE=class extends pS{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r),this._begin=new H_(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new H_(o,Bfe),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new G_;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new G_,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||"ï¿¿"),this._cachedCompiledWhilePatterns}},$fe=class Zs{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new gJe(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new mJe(e.$vscodeTextmateLocation,e.id,e.name,e.match,Zs._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Dfe({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new HK(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Zs._compilePatterns(s,n,r))}return e.while?new EE(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Zs._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Zs._compileCaptures(e.whileCaptures||e.captures,n,r),Zs._compilePatterns(e.patterns,n,r)):new XF(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Zs._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Zs._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Zs._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=Zs.getCompiledRuleId(e[o],n,r)),i[a]=Zs.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const u=Pfe(a.include);switch(u.kind){case 0:case 1:l=Zs.getCompiledRuleId(r[a.include],n,r);break;case 2:let c=r[u.ruleName];c&&(l=Zs.getCompiledRuleId(c,n,r));break;case 3:case 4:const f=u.scopeName,h=u.kind===4?u.ruleName:null,d=n.getExternalGrammar(f,r);if(d)if(h){let p=d.repository[h];p&&(l=Zs.getCompiledRuleId(p,n,d.repository))}else l=Zs.getCompiledRuleId(d.repository.$self,n,d.repository);break}}else l=Zs.getCompiledRuleId(a,n,r);if(l!==-1){const u=n.getRule(l);let c=!1;if((u instanceof HK||u instanceof XF||u instanceof EE)&&u.hasMissingPatterns&&u.patterns.length===0&&(c=!0),c)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},H_=class Ufe{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const u=e.charAt(a+1);u==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(u==="A"||u==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=dJe.test(this.source):this.hasBackReferences=!1}clone(){return new Ufe(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return WK.lastIndex=0,this.source.replace(WK,(i,s)=>Ife(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="ï¿¿",n[s+1]="ï¿¿",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="ï¿¿",n[s+1]="G",r[s+1]="ï¿¿",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},G_=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new GK(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new GK(t,r,this._items.map(i=>i.ruleId))}},GK=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},X9=class{constructor(t,e){this.languageId=t,this.tokenType=e}},yJe=class KF{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new X9(e,8),this._embeddedLanguagesMatcher=new bJe(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?KF._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new X9(0,0);_getBasicScopeAttributes=new Rfe(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new X9(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(KF.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},bJe=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Ife(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},YK=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function zfe(t,e,n,r,i,s,o,a){const l=e.content.length;let u=!1,c=-1;if(o){const d=vJe(t,e,n,r,i,s);i=d.stack,r=d.linePos,n=d.isFirstLine,c=d.anchorPosition}const f=Date.now();for(;!u;){if(a!==0&&Date.now()-f>a)return new YK(i,!0);h()}return new YK(i,!1);function h(){const d=xJe(t,e,n,r,i,c);if(!d){s.produce(i,l),u=!0;return}const p=d.captureIndices,m=d.matchedRuleId,y=p&&p.length>0?p[0].end>r:!1;if(m===pJe){const b=i.getRule(t);s.produce(i,p[0].start),i=i.withContentNameScopesList(i.nameScopesList),ow(t,e,n,i,s,b.endCaptures,p),s.produce(i,p[0].end);const v=i;if(i=i.parent,c=v.getAnchorPos(),!y&&v.getEnterPos()===r){i=v,s.produce(i,l),u=!0;return}}else{const b=t.getRule(m);s.produce(i,p[0].start);const v=i,w=b.getName(e.content,p),_=i.contentNameScopesList.pushAttributed(w,t);if(i=i.push(m,r,c,p[0].end===l,null,_,_),b instanceof XF){const S=b;ow(t,e,n,i,s,S.beginCaptures,p),s.produce(i,p[0].end),c=p[0].end;const A=S.getContentName(e.content,p),C=_.pushAttributed(A,t);if(i=i.withContentNameScopesList(C),S.endHasBackReferences&&(i=i.withEndRule(S.getEndWithResolvedBackReferences(e.content,p))),!y&&v.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),u=!0;return}}else if(b instanceof EE){const S=b;ow(t,e,n,i,s,S.beginCaptures,p),s.produce(i,p[0].end),c=p[0].end;const A=S.getContentName(e.content,p),C=_.pushAttributed(A,t);if(i=i.withContentNameScopesList(C),S.whileHasBackReferences&&(i=i.withEndRule(S.getWhileWithResolvedBackReferences(e.content,p))),!y&&v.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),u=!0;return}}else if(ow(t,e,n,i,s,b.captures,p),s.produce(i,p[0].end),i=i.pop(),!y){i=i.safePop(),s.produce(i,l),u=!0;return}}p[0].end>r&&(r=p[0].end,n=!1)}}function vJe(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const u=l.getRule(t);u instanceof EE&&a.push({rule:u,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:u,findOptions:c}=SJe(l.rule,t,l.stack.endRule,n,r===o),f=u.findNextMatchSync(e,r,c);if(f){if(f.ruleId!==Bfe){i=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(s.produce(l.stack,f.captureIndices[0].start),ow(t,e,n,l.stack,s,l.rule.whileCaptures,f.captureIndices),s.produce(l.stack,f.captureIndices[0].end),o=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function xJe(t,e,n,r,i,s){const o=wJe(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=_Je(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const u=o.captureIndices[0].start,c=l.captureIndices[0].start;return c<u||l.priorityMatch&&c===u?l:o}function wJe(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=jfe(o,t,i.endRule,n,r===s),u=a.findNextMatchSync(e,r,l);return u?{captureIndices:u.captureIndices,matchedRuleId:u.ruleId}:null}function _Je(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,u,c=0;const f=s.contentNameScopesList.getScopeNames();for(let h=0,d=t.length;h<d;h++){const p=t[h];if(!p.matcher(f))continue;const m=e.getRule(p.ruleId),{ruleScanner:y,findOptions:b}=jfe(m,e,null,r,i===o),v=y.findNextMatchSync(n,i,b);if(!v)continue;const w=v.captureIndices[0].start;if(!(w>=a)&&(a=w,l=v.captureIndices,u=v.ruleId,c=p.priority,a===i))break}return l?{priorityMatch:c===-1,captureIndices:l,matchedRuleId:u}:null}function jfe(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function SJe(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function ow(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),u=[],c=o[0].end;for(let f=0;f<l;f++){const h=s[f];if(h===null)continue;const d=o[f];if(d.length===0)continue;if(d.start>c)break;for(;u.length>0&&u[u.length-1].endPos<=d.start;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?i.produceFromScopes(u[u.length-1].scopes,d.start):i.produce(r,d.start),h.retokenizeCapturedWithRuleId){const m=h.getName(a,o),y=r.contentNameScopesList.pushAttributed(m,t),b=h.getContentName(a,o),v=y.pushAttributed(b,t),w=r.push(h.retokenizeCapturedWithRuleId,d.start,-1,!1,null,y,v),_=t.createOnigString(a.substring(0,d.end));zfe(t,_,n&&d.start===0,d.start,w,i,!1,0),Lfe(_);continue}const p=h.getName(a,o);if(p!==null){const y=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(p,t);u.push(new AJe(y,d.end))}}for(;u.length>0;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var AJe=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function CJe(t,e,n,r,i,s,o,a){return new EJe(t,e,n,r,i,s,o,a)}function XK(t,e,n,r,i){const s=CE(e,DE),o=$fe.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function DE(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(kJe(e[i],r))return n=i+1,!0;return!1})}function kJe(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var EJe=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new yJe(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=KK(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const u=CE(l,DE);for(const c of u)this._tokenTypeMatchers.push({matcher:c.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)XK(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&XK(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=KK(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=$fe.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===QF.NULL){i=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),c=this.themeProvider.getDefaults(),f=uv.set(0,u.languageId,u.tokenType,null,c.fontStyle,c.foregroundId,c.backgroundId),h=this.getRule(this._rootId).getName(null,null);let d;h?d=Lw.createRootAndLookUpScopeName(h,f,this):d=Lw.createRoot("unknown",f),e=new QF(null,this._rootId,-1,-1,!1,null,d,d)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new TJe(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=zfe(this,s,i,0,e,a,!0,r);return Lfe(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function KK(t,e){return t=HQe(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Lw=class Zc{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=Y9.push(i,s.scopeNames),r=new Zc(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new Zc(null,new Y9(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new Y9(null,e),o=r.themeProvider.themeMatch(s),a=Zc.mergeAttributes(n,i,o);return new Zc(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Zc.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),uv.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Zc._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=Zc._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=Zc.mergeAttributes(e.tokenAttributes,i,o);return new Zc(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},QF=class Pg{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new Pg(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Pg._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Lw.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Pg._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new Pg(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Pg(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Lw.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Pg(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Lw.fromExtension(r,n.contentNameScopesList))}},DJe=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):CE(n,DE).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>CE(n,DE).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},TJe=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=uv.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=uv.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},OJe=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,CJe(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},MJe=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new OJe(AE.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(AE.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new DJe(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new oJe(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},JF=QF.NULL;const IJe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];let gS=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};gS.prototype.normal={};gS.prototype.property={};gS.prototype.space=void 0;function qfe(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new gS(n,r,e)}function ZF(t){return t.toLowerCase()}class Ja{constructor(e,n){this.attribute=n,this.property=e}}Ja.prototype.attribute="";Ja.prototype.booleanish=!1;Ja.prototype.boolean=!1;Ja.prototype.commaOrSpaceSeparated=!1;Ja.prototype.commaSeparated=!1;Ja.prototype.defined=!1;Ja.prototype.mustUseProperty=!1;Ja.prototype.number=!1;Ja.prototype.overloadedBoolean=!1;Ja.prototype.property="";Ja.prototype.spaceSeparated=!1;Ja.prototype.space=void 0;let RJe=0;const sn=x1(),Vi=x1(),eN=x1(),$e=x1(),jr=x1(),yb=x1(),ul=x1();function x1(){return 2**++RJe}const tN=Object.freeze(Object.defineProperty({__proto__:null,boolean:sn,booleanish:Vi,commaOrSpaceSeparated:ul,commaSeparated:yb,number:$e,overloadedBoolean:eN,spaceSeparated:jr},Symbol.toStringTag,{value:"Module"})),K9=Object.keys(tN);class uU extends Ja{constructor(e,n,r,i){let s=-1;if(super(e,n),QK(this,"space",i),typeof r=="number")for(;++s<K9.length;){const o=K9[s];QK(this,K9[s],(r&tN[o])===tN[o])}}}uU.prototype.defined=!0;function QK(t,e,n){n&&(t[e]=n)}function u2(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new uU(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[ZF(r)]=r,n[ZF(s.attribute)]=r}return new gS(e,n,t.space)}const Vfe=u2({properties:{ariaActiveDescendant:null,ariaAtomic:Vi,ariaAutoComplete:null,ariaBusy:Vi,ariaChecked:Vi,ariaColCount:$e,ariaColIndex:$e,ariaColSpan:$e,ariaControls:jr,ariaCurrent:null,ariaDescribedBy:jr,ariaDetails:null,ariaDisabled:Vi,ariaDropEffect:jr,ariaErrorMessage:null,ariaExpanded:Vi,ariaFlowTo:jr,ariaGrabbed:Vi,ariaHasPopup:null,ariaHidden:Vi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:jr,ariaLevel:$e,ariaLive:null,ariaModal:Vi,ariaMultiLine:Vi,ariaMultiSelectable:Vi,ariaOrientation:null,ariaOwns:jr,ariaPlaceholder:null,ariaPosInSet:$e,ariaPressed:Vi,ariaReadOnly:Vi,ariaRelevant:null,ariaRequired:Vi,ariaRoleDescription:jr,ariaRowCount:$e,ariaRowIndex:$e,ariaRowSpan:$e,ariaSelected:Vi,ariaSetSize:$e,ariaSort:null,ariaValueMax:$e,ariaValueMin:$e,ariaValueNow:$e,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Wfe(t,e){return e in t?t[e]:e}function Hfe(t,e){return Wfe(t,e.toLowerCase())}const FJe=u2({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yb,acceptCharset:jr,accessKey:jr,action:null,allow:null,allowFullScreen:sn,allowPaymentRequest:sn,allowUserMedia:sn,alt:null,as:null,async:sn,autoCapitalize:null,autoComplete:jr,autoFocus:sn,autoPlay:sn,blocking:jr,capture:null,charSet:null,checked:sn,cite:null,className:jr,cols:$e,colSpan:null,content:null,contentEditable:Vi,controls:sn,controlsList:jr,coords:$e|yb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:sn,defer:sn,dir:null,dirName:null,disabled:sn,download:eN,draggable:Vi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:sn,formTarget:null,headers:jr,height:$e,hidden:eN,high:$e,href:null,hrefLang:null,htmlFor:jr,httpEquiv:jr,id:null,imageSizes:null,imageSrcSet:null,inert:sn,inputMode:null,integrity:null,is:null,isMap:sn,itemId:null,itemProp:jr,itemRef:jr,itemScope:sn,itemType:jr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:sn,low:$e,manifest:null,max:null,maxLength:$e,media:null,method:null,min:null,minLength:$e,multiple:sn,muted:sn,name:null,nonce:null,noModule:sn,noValidate:sn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:sn,optimum:$e,pattern:null,ping:jr,placeholder:null,playsInline:sn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:sn,referrerPolicy:null,rel:jr,required:sn,reversed:sn,rows:$e,rowSpan:$e,sandbox:jr,scope:null,scoped:sn,seamless:sn,selected:sn,shadowRootClonable:sn,shadowRootDelegatesFocus:sn,shadowRootMode:null,shape:null,size:$e,sizes:null,slot:null,span:$e,spellCheck:Vi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$e,step:null,style:null,tabIndex:$e,target:null,title:null,translate:null,type:null,typeMustMatch:sn,useMap:null,value:Vi,width:$e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:jr,axis:null,background:null,bgColor:null,border:$e,borderColor:null,bottomMargin:$e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:sn,declare:sn,event:null,face:null,frame:null,frameBorder:null,hSpace:$e,leftMargin:$e,link:null,longDesc:null,lowSrc:null,marginHeight:$e,marginWidth:$e,noResize:sn,noHref:sn,noShade:sn,noWrap:sn,object:null,profile:null,prompt:null,rev:null,rightMargin:$e,rules:null,scheme:null,scrolling:Vi,standby:null,summary:null,text:null,topMargin:$e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:sn,disableRemotePlayback:sn,prefix:null,property:null,results:$e,security:null,unselectable:null},space:"html",transform:Hfe}),NJe=u2({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ul,accentHeight:$e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$e,amplitude:$e,arabicForm:null,ascent:$e,attributeName:null,attributeType:null,azimuth:$e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$e,by:null,calcMode:null,capHeight:$e,className:jr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$e,diffuseConstant:$e,direction:null,display:null,dur:null,divisor:$e,dominantBaseline:null,download:sn,dx:null,dy:null,edgeMode:null,editable:null,elevation:$e,enableBackground:null,end:null,event:null,exponent:$e,externalResourcesRequired:null,fill:null,fillOpacity:$e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yb,g2:yb,glyphName:yb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$e,horizOriginX:$e,horizOriginY:$e,id:null,ideographic:$e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$e,k:$e,k1:$e,k2:$e,k3:$e,k4:$e,kernelMatrix:ul,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$e,overlineThickness:$e,paintOrder:null,panose1:null,path:null,pathLength:$e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:jr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$e,pointsAtY:$e,pointsAtZ:$e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ul,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ul,rev:ul,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ul,requiredFeatures:ul,requiredFonts:ul,requiredFormats:ul,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$e,specularExponent:$e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$e,strikethroughThickness:$e,string:null,stroke:null,strokeDashArray:ul,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$e,strokeOpacity:$e,strokeWidth:null,style:null,surfaceScale:$e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ul,tabIndex:$e,tableValues:null,target:null,targetX:$e,targetY:$e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ul,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$e,underlineThickness:$e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$e,values:null,vAlphabetic:$e,vMathematical:$e,vectorEffect:null,vHanging:$e,vIdeographic:$e,version:null,vertAdvY:$e,vertOriginX:$e,vertOriginY:$e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wfe}),Gfe=u2({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Yfe=u2({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Hfe}),Xfe=u2({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),LJe=/[A-Z]/g,JK=/-[a-z]/g,PJe=/^data[-\w.:]+$/i;function BJe(t,e){const n=ZF(e);let r=e,i=Ja;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&PJe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(JK,UJe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!JK.test(s)){let o=s.replace(LJe,$Je);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=uU}return new i(r,e)}function $Je(t){return"-"+t.toLowerCase()}function UJe(t){return t.charAt(1).toUpperCase()}const zJe=qfe([Vfe,FJe,Gfe,Yfe,Xfe],"html"),Kfe=qfe([Vfe,NJe,Gfe,Yfe,Xfe],"svg"),ZK={}.hasOwnProperty;function jJe(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&ZK.call(i,t)){const l=String(i[t]);o=ZK.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const qJe=/["&'<>`]/g,VJe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,WJe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,HJe=/[|\\{}()[\]^$+*?.]/g,eQ=new WeakMap;function GJe(t,e){if(t=t.replace(e.subset?YJe(e.subset):qJe,r),e.subset||e.escapeOnly)return t;return t.replace(VJe,n).replace(WJe,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function YJe(t){let e=eQ.get(t);return e||(e=XJe(t),eQ.set(t,e)),e}function XJe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(HJe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const KJe=/[\dA-Fa-f]/;function QJe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!KJe.test(String.fromCharCode(e))?r:r+";"}const JJe=/\d/;function ZJe(t,e,n){const r="&#"+String(t);return n&&e&&!JJe.test(String.fromCharCode(e))?r:r+";"}const eZe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Q9={nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",Agrave:"Ã",Aacute:"Ã",Acirc:"Ã",Atilde:"Ã",Auml:"Ã",Aring:"Ã",AElig:"Ã",Ccedil:"Ã",Egrave:"Ã",Eacute:"Ã",Ecirc:"Ã",Euml:"Ã",Igrave:"Ã",Iacute:"Ã",Icirc:"Ã",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã",Ograve:"Ã",Oacute:"Ã",Ocirc:"Ã",Otilde:"Ã",Ouml:"Ã",times:"Ã",Oslash:"Ã",Ugrave:"Ã",Uacute:"Ã",Ucirc:"Ã",Uuml:"Ã",Yacute:"Ã",THORN:"Ã",szlig:"Ã",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",divide:"Ã·",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",fnof:"Æ",Alpha:"Î",Beta:"Î",Gamma:"Î",Delta:"Î",Epsilon:"Î",Zeta:"Î",Eta:"Î",Theta:"Î",Iota:"Î",Kappa:"Î",Lambda:"Î",Mu:"Î",Nu:"Î",Xi:"Î",Omicron:"Î",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï",rho:"Ï",sigmaf:"Ï",sigma:"Ï",tau:"Ï",upsilon:"Ï",phi:"Ï",chi:"Ï",psi:"Ï",omega:"Ï",thetasym:"Ï",upsih:"Ï",piv:"Ï",bull:"â¢",hellip:"â¦",prime:"â²",Prime:"â³",oline:"â¾",frasl:"â",weierp:"â",image:"â",real:"â",trade:"â¢",alefsym:"âµ",larr:"â",uarr:"â",rarr:"â",darr:"â",harr:"â",crarr:"âµ",lArr:"â",uArr:"â",rArr:"â",dArr:"â",hArr:"â",forall:"â",part:"â",exist:"â",empty:"â",nabla:"â",isin:"â",notin:"â",ni:"â",prod:"â",sum:"â",minus:"â",lowast:"â",radic:"â",prop:"â",infin:"â",ang:"â ",and:"â§",or:"â¨",cap:"â©",cup:"âª",int:"â«",there4:"â´",sim:"â¼",cong:"â",asymp:"â",ne:"â ",equiv:"â¡",le:"â¤",ge:"â¥",sub:"â",sup:"â",nsub:"â",sube:"â",supe:"â",oplus:"â",otimes:"â",perp:"â¥",sdot:"â",lceil:"â",rceil:"â",lfloor:"â",rfloor:"â",lang:"â©",rang:"âª",loz:"â",spades:"â ",clubs:"â£",hearts:"â¥",diams:"â¦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Å",oelig:"Å",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",circ:"Ë",tilde:"Ë",ensp:"â",emsp:"â",thinsp:"â",zwnj:"â",zwj:"â",lrm:"â",rlm:"â",ndash:"â",mdash:"â",lsquo:"â",rsquo:"â",sbquo:"â",ldquo:"â",rdquo:"â",bdquo:"â",dagger:"â ",Dagger:"â¡",permil:"â°",lsaquo:"â¹",rsaquo:"âº",euro:"â¬"},tZe=["cent","copy","divide","gt","lt","not","para","times"],Qfe={}.hasOwnProperty,nN={};let JA;for(JA in Q9)Qfe.call(Q9,JA)&&(nN[Q9[JA]]=JA);const nZe=/[^\dA-Za-z]/;function rZe(t,e,n,r){const i=String.fromCharCode(t);if(Qfe.call(nN,i)){const s=nN[i],o="&"+s;return n&&eZe.includes(s)&&!tZe.includes(s)&&(!r||e&&e!==61&&nZe.test(String.fromCharCode(e)))?o:o+";"}return""}function iZe(t,e,n){let r=QJe(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=rZe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=ZJe(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function bb(t,e){return GJe(t,Object.assign({format:iZe},e))}const sZe=/^>|^->|<!--|-->|--!>|<!-$/g,oZe=[">"],aZe=["<",">"];function lZe(t,e,n,r){return r.settings.bogusComments?"<?"+bb(t.value,Object.assign({},r.settings.characterReferences,{subset:oZe}))+">":"<!--"+t.value.replace(sZe,i)+"-->";function i(s){return bb(s,Object.assign({},r.settings.characterReferences,{subset:aZe}))}}function uZe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function tQ(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function cZe(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function fZe(t){return t.join(" ").trim()}const hZe=/[ \t\n\f\r]/g;function cU(t){return typeof t=="object"?t.type==="text"?nQ(t.value):!1:nQ(t)}function nQ(t){return t.replace(hZe,"")===""}const hs=Zfe(1),Jfe=Zfe(-1),dZe=[];function Zfe(t){return e;function e(n,r,i){const s=n?n.children:dZe;let o=(r||0)+t,a=s[o];if(!i)for(;a&&cU(a);)o+=t,a=s[o];return a}}const pZe={}.hasOwnProperty;function ehe(t){return e;function e(n,r,i){return pZe.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const fU=ehe({body:mZe,caption:J9,colgroup:J9,dd:xZe,dt:vZe,head:J9,html:gZe,li:bZe,optgroup:wZe,option:_Ze,p:yZe,rp:rQ,rt:rQ,tbody:AZe,td:iQ,tfoot:CZe,th:iQ,thead:SZe,tr:kZe});function J9(t,e,n){const r=hs(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&cU(r.value.charAt(0)))}function gZe(t,e,n){const r=hs(n,e);return!r||r.type!=="comment"}function mZe(t,e,n){const r=hs(n,e);return!r||r.type!=="comment"}function yZe(t,e,n){const r=hs(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function bZe(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&r.tagName==="li"}function vZe(t,e,n){const r=hs(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function xZe(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function rQ(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function wZe(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function _Ze(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function SZe(t,e,n){const r=hs(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function AZe(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function CZe(t,e,n){return!hs(n,e)}function kZe(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function iQ(t,e,n){const r=hs(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const EZe=ehe({body:OZe,colgroup:MZe,head:TZe,html:DZe,tbody:IZe});function DZe(t){const e=hs(t,-1);return!e||e.type!=="comment"}function TZe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function OZe(t){const e=hs(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&cU(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function MZe(t,e,n){const r=Jfe(n,e),i=hs(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&fU(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function IZe(t,e,n){const r=Jfe(n,e),i=hs(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&fU(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const ZA={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function RZe(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=Kfe);const u=FZe(r,t.properties),c=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,c&&(o=!1),(u||!s||!EZe(t,e,n))&&(a.push("<",t.tagName,u?" "+u:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=u.charAt(u.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(c),!o&&(!s||!fU(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function FZe(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=NZe(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function NZe(t,e,n){const r=BJe(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=bb(r.attribute,Object.assign({},t.settings.characterReferences,{subset:ZA.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?cZe:fZe)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=bb(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:ZA.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&tQ(n,o)>tQ(n,t.alternative)&&(o=t.alternative),a=o+bb(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?ZA.single:ZA.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const LZe=["<","&"];function the(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:bb(t.value,Object.assign({},r.settings.characterReferences,{subset:LZe}))}function PZe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:the(t,e,n,r)}function BZe(t,e,n,r){return r.all(t)}const $Ze=jJe("type",{invalid:UZe,unknown:zZe,handlers:{comment:lZe,doctype:uZe,element:RZe,raw:PZe,root:BZe,text:the}});function UZe(t){throw new Error("Expected node, not `"+t+"`")}function zZe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const jZe={},qZe={},VZe=[];function WZe(t,e){const n=jZe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:HZe,all:GZe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||IJe,characterReferences:n.characterReferences||qZe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Kfe:zJe,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function HZe(t,e,n){return $Ze(t,e,n,this)}function GZe(t){const e=[],n=t&&t.children||VZe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function YZe(t){return Array.isArray(t)?t:[t]}function mD(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function hU(t){return!t||["plaintext","txt","text","plain"].includes(t)}function XZe(t){return t==="ansi"||hU(t)}function dU(t){return t==="none"}function KZe(t){return dU(t)}function nhe(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function QZe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function JZe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?QZe(i,s):i})):t}async function rhe(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function TE(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function Zg(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function ihe(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&yd.Italic&&(e["font-style"]="italic"),t.fontStyle&yd.Bold&&(e["font-weight"]="bold"),t.fontStyle&yd.Underline&&(e["text-decoration"]="underline")),e}function ZZe(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function eet(t){const e=mD(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}class jo extends Error{constructor(e){super(e),this.name="ShikiError"}}const she=new WeakMap;function yD(t,e){she.set(t,e)}function Y_(t){return she.get(t)}class c2{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new c2(Object.fromEntries(YZe(n).map(r=>[r,JF])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return sQ(this._stacks[this.theme])}getScopes(e=this.theme){return sQ(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function sQ(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function tet(t,e){if(!(t instanceof c2))throw new jo("Invalid grammar state");return t.getInternalStack(e)}function net(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new jo(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new jo(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);if(o.character<0||o.character>a.length)throw new jo(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:i.posToIndex(o.line,o.character)}}};const i=eet(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));ret(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return JZe(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(c=>c.type==="element"&&c.tagName==="span");if(i.length!==r.converter.lines.length)throw new jo(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(c,f,h,d){const p=i[c];let m="",y=-1,b=-1;if(f===0&&(y=0),h===0&&(b=0),h===Number.POSITIVE_INFINITY&&(b=p.children.length),y===-1||b===-1)for(let w=0;w<p.children.length;w++)m+=ohe(p.children[w]),y===-1&&m.length===f&&(y=w+1),b===-1&&m.length===h&&(b=w+1);if(y===-1)throw new jo(`Failed to find start index for decoration ${JSON.stringify(d.start)}`);if(b===-1)throw new jo(`Failed to find end index for decoration ${JSON.stringify(d.end)}`);const v=p.children.slice(y,b);if(!d.alwaysWrap&&v.length===p.children.length)a(p,d,"line");else if(!d.alwaysWrap&&v.length===1&&v[0].type==="element")a(v[0],d,"token");else{const w={type:"element",tagName:"span",properties:{},children:v};a(w,d,"wrapper"),p.children.splice(y,v.length,w)}}function o(c,f){i[c]=a(i[c],f,"line")}function a(c,f,h){const d=f.properties||{},p=f.transform||(m=>m);return c.tagName=f.tagName||"span",c.properties={...c.properties,...d,class:c.properties.class},f.properties?.class&&nhe(c,f.properties.class),c=p(c,h)||c,c}const l=[],u=r.decorations.sort((c,f)=>f.start.offset-c.start.offset);for(const c of u){const{start:f,end:h}=c;if(f.line===h.line)s(f.line,f.character,h.character,c);else if(f.line<h.line){s(f.line,f.character,Number.POSITIVE_INFINITY,c);for(let d=f.line+1;d<h.line;d++)l.unshift(()=>o(d,c));s(h.line,0,h.character,c)}}l.forEach(c=>c())}}}function ret(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new jo(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<n.end.offset,a=i.start.offset<n.start.offset&&n.start.offset<i.end.offset,l=i.start.offset<n.end.offset&&n.end.offset<i.end.offset;if(s||o||a||l){if(o&&o||a&&l)continue;throw new jo(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function ohe(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(ohe).join(""):""}const iet=[net()];function OE(t){return[...t.transformers||[],...iet]}var em=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Z9={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function set(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function oQ(t,e){let n=1;const r=t[e+n++];let i;if(r==="2"){const s=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(t[e+n]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[n,i]}function oet(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=Number.parseInt(r);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)Z9[i]&&e.push({type:"setDecoration",value:Z9[i]});else if(i<=29){const s=Z9[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:em[i-30]}});else if(i===38){const[s,o]=oQ(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:em[i-40]}});else if(i===48){const[s,o]=oQ(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:em[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:em[i-100+8]}})}return e}function aet(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=set(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=oet(o.sequence);for(const u of l)u.type==="resetAll"?(t=null,e=null,n.clear()):u.type==="resetForegroundColor"?t=null:u.type==="resetBackgroundColor"?e=null:u.type==="resetDecoration"&&n.delete(u.value);for(const u of l)u.type==="setForegroundColor"?t=u.value:u.type==="setBackgroundColor"?e=u.value:u.type==="setDecoration"&&n.add(u.value)}s=o.position}while(s<r.length);return i}}}var uet={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function cet(t=uet){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let u=0;u<em.length;u++)r.push(e(em[u]));let a=[0,95,135,175,215,255];for(let u=0;u<6;u++)for(let c=0;c<6;c++)for(let f=0;f<6;f++)r.push(n([a[u],a[c],a[f]]));let l=8;for(let u=0;u<24;u++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function fet(t,e,n){const r=TE(t,n),i=mD(e),s=cet(Object.fromEntries(em.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=aet();return i.map(a=>o.parse(a[0]).map(l=>{let u,c;l.decorations.has("reverse")?(u=l.background?s.value(l.background):t.bg,c=l.foreground?s.value(l.foreground):t.fg):(u=l.foreground?s.value(l.foreground):t.fg,c=l.background?s.value(l.background):void 0),u=Zg(u,r),c=Zg(c,r),l.decorations.has("dim")&&(u=het(u));let f=yd.None;return l.decorations.has("bold")&&(f|=yd.Bold),l.decorations.has("italic")&&(f|=yd.Italic),l.decorations.has("underline")&&(f|=yd.Underline),{content:l.value,offset:a[1],color:u,bgColor:c,fontStyle:f}}))}function het(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function pU(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(hU(r)||dU(i))return mD(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return fet(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new xm(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new xm(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return pet(e,a,s,o,n)}function det(...t){if(t.length===2)return Y_(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(hU(i)||dU(s))throw new xm("Plain language does not have grammar state");if(i==="ansi")throw new xm("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new c2(ME(n,l,o,a,r).stateStack,l.name,o.name)}function pet(t,e,n,r,i){const s=ME(t,e,n,r,i),o=new c2(ME(t,e,n,r,i).stateStack,e.name,n.name);return yD(s.tokens,o),s.tokens}function ME(t,e,n,r,i){const s=TE(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=mD(t);let u=i.grammarState?tet(i.grammarState,n.name)??JF:i.grammarContextCode!=null?ME(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:JF,c=[];const f=[];for(let h=0,d=l.length;h<d;h++){const[p,m]=l[h];if(p===""){c=[],f.push([]);continue}if(o>0&&p.length>=o){c=[],f.push([{content:p,offset:m,color:"",fontStyle:0}]);continue}let y,b,v;i.includeExplanation&&(y=e.tokenizeLine(p,u),b=y.tokens,v=0);const w=e.tokenizeLine2(p,u,a),_=w.tokens.length/2;for(let S=0;S<_;S++){const A=w.tokens[2*S],C=S+1<_?w.tokens[2*S+2]:p.length;if(A===C)continue;const D=w.tokens[2*S+1],T=Zg(r[uv.getForeground(D)],s),M=uv.getFontStyle(D),I={content:p.substring(A,C),offset:m+A,color:T,fontStyle:M};if(i.includeExplanation){const N=[];if(i.includeExplanation!=="scopeName")for(const O of n.settings){let R;switch(typeof O.scope){case"string":R=O.scope.split(/,/).map(L=>L.trim());break;case"object":R=O.scope;break;default:continue}N.push({settings:O,selectors:R.map(L=>L.split(/ /))})}I.explanation=[];let P=0;for(;A+P<C;){const O=b[v],R=p.substring(O.startIndex,O.endIndex);P+=R.length,I.explanation.push({content:R,scopes:i.includeExplanation==="scopeName"?get(O.scopes):met(N,O.scopes)}),v+=1}}c.push(I)}f.push(c),c=[],u=w.ruleStack}return{tokens:f,stateStack:u}}function get(t){return t.map(e=>({scopeName:e}))}function met(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:bet(t,s,e.slice(0,r))}}return n}function aQ(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function yet(t,e,n){if(!aQ(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)aQ(t[r],n[i])&&(r-=1),i-=1;return r===-1}function bet(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(yet(o,e,n)){r.push(s);break}return r}function ahe(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=r.map(l=>{const u=pU(t,e,{...n,theme:l.theme}),c=Y_(u),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:u,state:c,theme:f}}),s=vet(...i.map(l=>l.tokens)),o=s[0].map((l,u)=>l.map((c,f)=>{const h={content:c.content,variants:{},offset:c.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=c.explanation),s.forEach((d,p)=>{const{content:m,explanation:y,offset:b,...v}=d[u][f];h.variants[r[p].color]=v}),h})),a=i[0].state?new c2(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&yD(o,a),o}function vet(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,u)=>l.push(s[u]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(u=>u.content.length));for(let u=0;u<n;u++){const c=a[u];c.content.length===l?(s[u].push(c),o[u]+=1,a[u]=i[u][o[u]]):(s[u].push({...c,content:c.content.slice(0,l)}),a[u]={...c,content:c.content.slice(l),offset:c.offset+l})}}}return e}function IE(t,e,n){let r,i,s,o,a,l;if("themes"in n){const{defaultColor:u="light",cssVariablePrefix:c="--shiki-"}=n,f=Object.entries(n.themes).filter(y=>y[1]).map(y=>({color:y[0],theme:y[1]})).sort((y,b)=>y.color===u?-1:b.color===u?1:0);if(f.length===0)throw new xm("`themes` option must not be empty");const h=ahe(t,e,n);if(l=Y_(h),u&&!f.find(y=>y.color===u))throw new xm(`\`themes\` option must contain the defaultColor key \`${u}\``);const d=f.map(y=>t.getTheme(y.theme)),p=f.map(y=>y.color);s=h.map(y=>y.map(b=>xet(b,p,c,u))),l&&yD(s,l);const m=f.map(y=>TE(y.theme,n));i=f.map((y,b)=>(b===0&&u?"":`${c+y.color}:`)+(Zg(d[b].fg,m[b])||"inherit")).join(";"),r=f.map((y,b)=>(b===0&&u?"":`${c+y.color}-bg:`)+(Zg(d[b].bg,m[b])||"inherit")).join(";"),o=`shiki-themes ${d.map(y=>y.name).join(" ")}`,a=u?void 0:[i,r].join(";")}else if("theme"in n){const u=TE(n.theme,n);s=pU(t,e,n);const c=t.getTheme(n.theme);r=Zg(c.bg,u),i=Zg(c.fg,u),o=c.name,l=Y_(s)}else throw new xm("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:l}}function xet(t,e,n,r){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>ihe(t.variants[l])),o=new Set(s.flatMap(l=>Object.keys(l))),a={};return s.forEach((l,u)=>{for(const c of o){const f=l[c]||"inherit";if(u===0&&r)a[c]=f;else{const h=c==="color"?"":c==="background-color"?"-bg":`-${c}`,d=n+e[u]+(c==="color"?"":h);a[d]=f}}}),i.htmlStyle=a,i}function RE(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>RE(t,i,s),codeToTokens:(i,s)=>IE(t,i,s)}){let i=e;for(const d of OE(n))i=d.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:u,grammarState:c}=IE(t,i,n);const{mergeWhitespaces:f=!0}=n;f===!0?s=_et(s):f==="never"&&(s=Aet(s));const h={...r,get source(){return i}};for(const d of OE(n))s=d.tokens?.call(h,s)||s;return wet(s,{...n,fg:o,bg:a,themeName:l,rootStyle:u},h,c)}function wet(t,e,n,r=Y_(t)){const i=OE(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let u={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([p])=>!p.startsWith("_")))},children:[]},c={type:"element",tagName:"code",properties:{},children:s};const f=[],h={...n,structure:a,addClassToHast:nhe,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return u},get code(){return c},get lines(){return f}};if(t.forEach((p,m)=>{m&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let y={type:"element",tagName:"span",properties:{class:"line"},children:[]},b=0;for(const v of p){let w={type:"element",tagName:"span",properties:{...v.htmlAttrs},children:[{type:"text",value:v.content}]};v.htmlStyle;const _=ZZe(v.htmlStyle||ihe(v));_&&(w.properties.style=_);for(const S of i)w=S?.span?.call(h,w,m+1,b,y,v)||w;a==="inline"?o.children.push(w):a==="classic"&&y.children.push(w),b+=v.content.length}if(a==="classic"){for(const v of i)y=v?.line?.call(h,y,m+1)||y;f.push(y),s.push(y)}}),a==="classic"){for(const p of i)c=p?.code?.call(h,c)||c;u.children.push(c);for(const p of i)u=p?.pre?.call(h,u)||u;o.children.push(u)}let d=o;for(const p of i)d=p?.root?.call(h,d)||d;return r&&yD(d,r),d}function _et(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const l=!(s.fontStyle&&s.fontStyle&yd.Underline);l&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function Aet(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function Cet(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>RE(t,s,o),codeToTokens:(s,o)=>IE(t,s,o)};let i=WZe(RE(t,e,n,r));for(const s of OE(n))i=s.postprocess?.call(r,i,n)||i;return i}const lQ={light:"#333333",dark:"#bbbbbb"},uQ={light:"#fffffe",dark:"#1e1e1e"},cQ="__shiki_resolved";function gU(t){if(t?.[cQ])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?lQ.light:lQ.dark),n||(n=e.type==="light"?uQ.light:uQ.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),u=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!u)return a;const c={...a,settings:{...a.settings}};if(l){const f=o(a.settings.foreground);e.colorReplacements[f]=a.settings.foreground,c.settings.foreground=f}if(u){const f=o(a.settings.background);e.colorReplacements[f]=a.settings.background,c.settings.background=f}return c});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,cQ,{enumerable:!1,writable:!1,value:!0}),e}async function lhe(t){return Array.from(new Set((await Promise.all(t.filter(e=>!XZe(e)).map(async e=>await rhe(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function uhe(t){return(await Promise.all(t.map(async n=>KZe(n)?null:gU(await rhe(n))))).filter(n=>!!n)}class ket extends MJe{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=gU(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=AE.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new jo(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(s=>!r.includes(s));throw new jo(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class Eet{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let _x=0;function Det(t){_x+=1,t.warnings!==!1&&_x>=10&&_x%10===0&&console.warn(`[Shiki] ${_x} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new jo("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(gU),i=new Eet(t.engine,n),s=new ket(i,r,n,t.langAlias);let o;function a(v){y();const w=s.getGrammar(typeof v=="string"?v:v.name);if(!w)throw new jo(`Language \`${v}\` not found, you may need to load it first`);return w}function l(v){if(v==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};y();const w=s.getTheme(v);if(!w)throw new jo(`Theme \`${v}\` not found, you may need to load it first`);return w}function u(v){y();const w=l(v);o!==v&&(s.setTheme(w),o=v);const _=s.getColorMap();return{theme:w,colorMap:_}}function c(){return y(),s.getLoadedThemes()}function f(){return y(),s.getLoadedLanguages()}function h(...v){y(),s.loadLanguages(v.flat(1))}async function d(...v){return h(await lhe(v))}function p(...v){y();for(const w of v.flat(1))s.loadTheme(w)}async function m(...v){return y(),p(await uhe(v))}function y(){if(e)throw new jo("Shiki instance has been disposed")}function b(){e||(e=!0,s.dispose(),_x-=1)}return{setTheme:u,getTheme:l,getLanguage:a,getLoadedThemes:c,getLoadedLanguages:f,loadLanguage:d,loadLanguageSync:h,loadTheme:m,loadThemeSync:p,dispose:b,[Symbol.dispose]:b}}async function Tet(t={}){t.loadWasm;const[e,n,r]=await Promise.all([uhe(t.themes||[]),lhe(t.langs||[]),t.engine||WQe(t.loadWasm||VQe())]);return Det({...t,themes:e,langs:n,engine:r})}async function Oet(t={}){const e=await Tet(t);return{getLastGrammarState:(...n)=>det(e,...n),codeToTokensBase:(n,r)=>pU(e,n,r),codeToTokensWithThemes:(n,r)=>ahe(e,n,r),codeToTokens:(n,r)=>IE(e,n,r),codeToHast:(n,r)=>RE(e,n,r),codeToHtml:(n,r)=>Cet(e,n,r),...e,getInternalContext:()=>e}}const rN=Mu({linkify:!0,typographer:!0});(async()=>{const t=await Oet({themes:[B9(()=>import("./vitesse-light-CVO1_9PV.js"),[],import.meta.url),B9(()=>import("./vitesse-dark-D0r3Knsf.js"),[],import.meta.url)],langs:[B9(()=>import("./javascript-ySlJ1b_l.js"),[],import.meta.url)]});rN.use(kQe(t,{themes:{light:"vitesse-light",dark:"vitesse-dark"}}))})();function vb(t,e=!0){return e?rN.renderInline(t):rN.render(t)}const Met=_$({String:ye.string,Number:ye.number,"True False":ye.bool,PropertyName:ye.propertyName,Null:ye.null,", :":ye.separator,"[ ]":ye.squareBracket,"{ }":ye.brace}),Iet=R_.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"â  JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Met],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Ret=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=Fet(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]};function Fet(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}const che=D_.define({name:"json",parser:Iet.configure({props:[A$.add({Object:AF({except:/^\s*\}/}),Array:AF({except:/^\s*\]/})}),Hle.add({"Object Array":Lze})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Net(){return new Vle(che)}var eM={},fQ;function Let(){return fQ||(fQ=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.enableErrorLogging=t.disableErrorLogging=t.setErrorLogger=void 0;let e=console.error;function n(C){e=C}t.setErrorLogger=n;function r(){e=()=>{}}t.disableErrorLogging=r;function i(){e=console.error}t.enableErrorLogging=i;function s(C){if(C!==void 0){if(C===null)return null;if(C==="")return"";C=C.replace(/\\+$/,D=>D.length%2===0?D:D.slice(0,-1));try{return JSON.parse(C)}catch(D){const[T,M]=C.trimLeft()[0]===":"?o(C,D):o(C,D,b);if(s.lastParseReminding=M,s.onExtraToken&&M.length>0){const I=M.trimRight();s.lastParseReminding=I,I.length>0&&s.onExtraToken(C,T,I)}return T}}}t.parse=s,(function(C){C.onExtraToken=(D,T,M)=>{e("parsed json with extra tokens:",{text:D,data:T,reminding:M})}})(s=t.parse||(t.parse={}));function o(C,D,T){const M=l[C[0]]||T;if(!M)throw e(`no parser registered for ${JSON.stringify(C[0])}:`,{s:C}),D;return M(C,D)}function a(C,D,T){return C[0]==='"'?p(C):C[0]==="'"?y(C):b(C,D,T)}const l={};function u(C){return C.trimLeft()}l[" "]=c,l["\r"]=c,l[`
`]=c,l["	"]=c;function c(C,D){return C=u(C),o(C,D)}l["["]=f;function f(C,D){C=C.substr(1);const T=[];for(C=u(C);C.length>0;){if(C[0]==="]"){C=C.substr(1);break}const M=o(C,D,(I,N)=>b(I,N,[",","]"]));T.push(M[0]),C=M[1],C=u(C),C[0]===","&&(C=C.substring(1),C=u(C))}return[T,C]}for(const C of"0123456789.-".slice())l[C]=h;function h(C){for(let D=0;D<C.length;D++){const T=C[D];if(l[T]===h)continue;const M=C.substring(0,D);return C=C.substring(D),[d(M),C]}return[d(C),""]}function d(C){if(C==="-")return-0;const D=+C;return Number.isNaN(D)?C:D}l['"']=p;function p(C){for(let D=1;D<C.length;D++){const T=C[D];if(T==="\\"){D++;continue}if(T==='"'){const M=m(C.substring(0,D+1));return C=C.substring(D+1),[JSON.parse(M),C]}}return[JSON.parse(m(C)+'"'),""]}function m(C){return C.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}l["'"]=y;function y(C){for(let D=1;D<C.length;D++){const T=C[D];if(T==="\\"){D++;continue}if(T==="'"){const M=m(C.substring(0,D+1));return C=C.substring(D+1),[JSON.parse('"'+M.slice(1,-1)+'"'),C]}}return[JSON.parse('"'+m(C.slice(1))+'"'),""]}function b(C,D,T=[" "]){const M=Math.min(...T.map(P=>{const O=C.indexOf(P);return O===-1?C.length:O})),I=C.substring(0,M).trim(),N=C.substring(M);return[I,N]}l["{"]=v;function v(C,D){C=C.substr(1);const T={};for(C=u(C);C.length>0;){if(C[0]==="}"){C=C.substr(1);break}const M=a(C,D,[":","}"]),I=M[0];if(C=M[1],C=u(C),C[0]!==":"){T[I]=void 0;break}if(C=C.substr(1),C=u(C),C.length===0){T[I]=void 0;break}const N=o(C,D);T[I]=N[0],C=N[1],C=u(C),C[0]===","&&(C=C.substr(1),C=u(C))}return[T,C]}l.t=w;function w(C,D){return A(C,"true",!0,D)}l.f=_;function _(C,D){return A(C,"false",!1,D)}l.n=S;function S(C,D){return A(C,"null",null,D)}function A(C,D,T,M){for(let I=D.length;I>=1;I--)if(C.startsWith(D.slice(0,I)))return[T,C.slice(I)];{const I=JSON.stringify(C.slice(0,D.length));throw e(`unknown token starting with ${I}:`,{s:C}),M}}})(eM)),eM}var fhe=Let();function Pet(t){let e=null;try{e=JSON.parse(t.doc.toString())}catch{try{e=fhe.parse(t.doc.toString())}catch{}}const n=W$(t,si.JSON);return{data:e,pointers:n}}var Bet=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,$et=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Uet=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,tM={Space_Separator:Bet,ID_Start:$et,ID_Continue:Uet},Pi={isSpaceSeparator(t){return typeof t=="string"&&tM.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||tM.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="â"||t==="â"||tM.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let iN,Yo,pd,FE,N0,fc,xs,mU,Pw;var zet=function(e,n){iN=String(e),Yo="start",pd=[],FE=0,N0=1,fc=0,xs=void 0,mU=void 0,Pw=void 0;do xs=jet(),Wet[Yo]();while(xs.type!=="eof");return typeof n=="function"?sN({"":Pw},"",n):Pw};function sN(t,e,n){const r=t[e];if(r!=null&&typeof r=="object")if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=String(i),o=sN(r,s,n);o===void 0?delete r[s]:Object.defineProperty(r,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(const i in r){const s=sN(r,i,n);s===void 0?delete r[i]:Object.defineProperty(r,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return n.call(t,e,r)}let fn,Jt,aw,Gh,Sn;function jet(){for(fn="default",Jt="",aw=!1,Gh=1;;){Sn=Td();const t=hhe[fn]();if(t)return t}}function Td(){if(iN[FE])return String.fromCodePoint(iN.codePointAt(FE))}function Te(){const t=Td();return t===`
`?(N0++,fc=0):t?fc+=t.length:fc++,t&&(FE+=t.length),t}const hhe={default(){switch(Sn){case"	":case"\v":case"\f":case" ":case"Â ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Te();return;case"/":Te(),fn="comment";return;case void 0:return Te(),Hr("eof")}if(Pi.isSpaceSeparator(Sn)){Te();return}return hhe[Yo]()},comment(){switch(Sn){case"*":Te(),fn="multiLineComment";return;case"/":Te(),fn="singleLineComment";return}throw Gr(Te())},multiLineComment(){switch(Sn){case"*":Te(),fn="multiLineCommentAsterisk";return;case void 0:throw Gr(Te())}Te()},multiLineCommentAsterisk(){switch(Sn){case"*":Te();return;case"/":Te(),fn="default";return;case void 0:throw Gr(Te())}Te(),fn="multiLineComment"},singleLineComment(){switch(Sn){case`
`:case"\r":case"\u2028":case"\u2029":Te(),fn="default";return;case void 0:return Te(),Hr("eof")}Te()},value(){switch(Sn){case"{":case"[":return Hr("punctuator",Te());case"n":return Te(),Dg("ull"),Hr("null",null);case"t":return Te(),Dg("rue"),Hr("boolean",!0);case"f":return Te(),Dg("alse"),Hr("boolean",!1);case"-":case"+":Te()==="-"&&(Gh=-1),fn="sign";return;case".":Jt=Te(),fn="decimalPointLeading";return;case"0":Jt=Te(),fn="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Jt=Te(),fn="decimalInteger";return;case"I":return Te(),Dg("nfinity"),Hr("numeric",1/0);case"N":return Te(),Dg("aN"),Hr("numeric",NaN);case'"':case"'":aw=Te()==='"',Jt="",fn="string";return}throw Gr(Te())},identifierNameStartEscape(){if(Sn!=="u")throw Gr(Te());Te();const t=oN();switch(t){case"$":case"_":break;default:if(!Pi.isIdStartChar(t))throw hQ();break}Jt+=t,fn="identifierName"},identifierName(){switch(Sn){case"$":case"_":case"â":case"â":Jt+=Te();return;case"\\":Te(),fn="identifierNameEscape";return}if(Pi.isIdContinueChar(Sn)){Jt+=Te();return}return Hr("identifier",Jt)},identifierNameEscape(){if(Sn!=="u")throw Gr(Te());Te();const t=oN();switch(t){case"$":case"_":case"â":case"â":break;default:if(!Pi.isIdContinueChar(t))throw hQ();break}Jt+=t,fn="identifierName"},sign(){switch(Sn){case".":Jt=Te(),fn="decimalPointLeading";return;case"0":Jt=Te(),fn="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Jt=Te(),fn="decimalInteger";return;case"I":return Te(),Dg("nfinity"),Hr("numeric",Gh*(1/0));case"N":return Te(),Dg("aN"),Hr("numeric",NaN)}throw Gr(Te())},zero(){switch(Sn){case".":Jt+=Te(),fn="decimalPoint";return;case"e":case"E":Jt+=Te(),fn="decimalExponent";return;case"x":case"X":Jt+=Te(),fn="hexadecimal";return}return Hr("numeric",Gh*0)},decimalInteger(){switch(Sn){case".":Jt+=Te(),fn="decimalPoint";return;case"e":case"E":Jt+=Te(),fn="decimalExponent";return}if(Pi.isDigit(Sn)){Jt+=Te();return}return Hr("numeric",Gh*Number(Jt))},decimalPointLeading(){if(Pi.isDigit(Sn)){Jt+=Te(),fn="decimalFraction";return}throw Gr(Te())},decimalPoint(){switch(Sn){case"e":case"E":Jt+=Te(),fn="decimalExponent";return}if(Pi.isDigit(Sn)){Jt+=Te(),fn="decimalFraction";return}return Hr("numeric",Gh*Number(Jt))},decimalFraction(){switch(Sn){case"e":case"E":Jt+=Te(),fn="decimalExponent";return}if(Pi.isDigit(Sn)){Jt+=Te();return}return Hr("numeric",Gh*Number(Jt))},decimalExponent(){switch(Sn){case"+":case"-":Jt+=Te(),fn="decimalExponentSign";return}if(Pi.isDigit(Sn)){Jt+=Te(),fn="decimalExponentInteger";return}throw Gr(Te())},decimalExponentSign(){if(Pi.isDigit(Sn)){Jt+=Te(),fn="decimalExponentInteger";return}throw Gr(Te())},decimalExponentInteger(){if(Pi.isDigit(Sn)){Jt+=Te();return}return Hr("numeric",Gh*Number(Jt))},hexadecimal(){if(Pi.isHexDigit(Sn)){Jt+=Te(),fn="hexadecimalInteger";return}throw Gr(Te())},hexadecimalInteger(){if(Pi.isHexDigit(Sn)){Jt+=Te();return}return Hr("numeric",Gh*Number(Jt))},string(){switch(Sn){case"\\":Te(),Jt+=qet();return;case'"':if(aw)return Te(),Hr("string",Jt);Jt+=Te();return;case"'":if(!aw)return Te(),Hr("string",Jt);Jt+=Te();return;case`
`:case"\r":throw Gr(Te());case"\u2028":case"\u2029":Het(Sn);break;case void 0:throw Gr(Te())}Jt+=Te()},start(){switch(Sn){case"{":case"[":return Hr("punctuator",Te())}fn="value"},beforePropertyName(){switch(Sn){case"$":case"_":Jt=Te(),fn="identifierName";return;case"\\":Te(),fn="identifierNameStartEscape";return;case"}":return Hr("punctuator",Te());case'"':case"'":aw=Te()==='"',fn="string";return}if(Pi.isIdStartChar(Sn)){Jt+=Te(),fn="identifierName";return}throw Gr(Te())},afterPropertyName(){if(Sn===":")return Hr("punctuator",Te());throw Gr(Te())},beforePropertyValue(){fn="value"},afterPropertyValue(){switch(Sn){case",":case"}":return Hr("punctuator",Te())}throw Gr(Te())},beforeArrayValue(){if(Sn==="]")return Hr("punctuator",Te());fn="value"},afterArrayValue(){switch(Sn){case",":case"]":return Hr("punctuator",Te())}throw Gr(Te())},end(){throw Gr(Te())}};function Hr(t,e){return{type:t,value:e,line:N0,column:fc}}function Dg(t){for(const e of t){if(Td()!==e)throw Gr(Te());Te()}}function qet(){switch(Td()){case"b":return Te(),"\b";case"f":return Te(),"\f";case"n":return Te(),`
`;case"r":return Te(),"\r";case"t":return Te(),"	";case"v":return Te(),"\v";case"0":if(Te(),Pi.isDigit(Td()))throw Gr(Te());return"\0";case"x":return Te(),Vet();case"u":return Te(),oN();case`
`:case"\u2028":case"\u2029":return Te(),"";case"\r":return Te(),Td()===`
`&&Te(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Gr(Te());case void 0:throw Gr(Te())}return Te()}function Vet(){let t="",e=Td();if(!Pi.isHexDigit(e)||(t+=Te(),e=Td(),!Pi.isHexDigit(e)))throw Gr(Te());return t+=Te(),String.fromCodePoint(parseInt(t,16))}function oN(){let t="",e=4;for(;e-- >0;){const n=Td();if(!Pi.isHexDigit(n))throw Gr(Te());t+=Te()}return String.fromCodePoint(parseInt(t,16))}const Wet={start(){if(xs.type==="eof")throw Tg();nM()},beforePropertyName(){switch(xs.type){case"identifier":case"string":mU=xs.value,Yo="afterPropertyName";return;case"punctuator":e6();return;case"eof":throw Tg()}},afterPropertyName(){if(xs.type==="eof")throw Tg();Yo="beforePropertyValue"},beforePropertyValue(){if(xs.type==="eof")throw Tg();nM()},beforeArrayValue(){if(xs.type==="eof")throw Tg();if(xs.type==="punctuator"&&xs.value==="]"){e6();return}nM()},afterPropertyValue(){if(xs.type==="eof")throw Tg();switch(xs.value){case",":Yo="beforePropertyName";return;case"}":e6()}},afterArrayValue(){if(xs.type==="eof")throw Tg();switch(xs.value){case",":Yo="beforeArrayValue";return;case"]":e6()}},end(){}};function nM(){let t;switch(xs.type){case"punctuator":switch(xs.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=xs.value;break}if(Pw===void 0)Pw=t;else{const e=pd[pd.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,mU,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(t!==null&&typeof t=="object")pd.push(t),Array.isArray(t)?Yo="beforeArrayValue":Yo="beforePropertyName";else{const e=pd[pd.length-1];e==null?Yo="end":Array.isArray(e)?Yo="afterArrayValue":Yo="afterPropertyValue"}}function e6(){pd.pop();const t=pd[pd.length-1];t==null?Yo="end":Array.isArray(t)?Yo="afterArrayValue":Yo="afterPropertyValue"}function Gr(t){return NE(t===void 0?`JSON5: invalid end of input at ${N0}:${fc}`:`JSON5: invalid character '${dhe(t)}' at ${N0}:${fc}`)}function Tg(){return NE(`JSON5: invalid end of input at ${N0}:${fc}`)}function hQ(){return fc-=5,NE(`JSON5: invalid identifier character at ${N0}:${fc}`)}function Het(t){console.warn(`JSON5: '${dhe(t)}' in strings is not valid ECMAScript; consider escaping`)}function dhe(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function NE(t){const e=new SyntaxError(t);return e.lineNumber=N0,e.columnNumber=fc,e}var Get=function(e,n,r){const i=[];let s="",o,a,l="",u;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(r=n.space,u=n.quote,n=n.replacer),typeof n=="function")a=n;else if(Array.isArray(n)){o=[];for(const m of n){let y;typeof m=="string"?y=m:(typeof m=="number"||m instanceof String||m instanceof Number)&&(y=String(m)),y!==void 0&&o.indexOf(y)<0&&o.push(y)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),typeof r=="number"?r>0&&(r=Math.min(10,Math.floor(r)),l="          ".substr(0,r)):typeof r=="string"&&(l=r.substr(0,10)),c("",{"":e});function c(m,y){let b=y[m];switch(b!=null&&(typeof b.toJSON5=="function"?b=b.toJSON5(m):typeof b.toJSON=="function"&&(b=b.toJSON(m))),a&&(b=a.call(y,m,b)),b instanceof Number?b=Number(b):b instanceof String?b=String(b):b instanceof Boolean&&(b=b.valueOf()),b){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof b=="string")return f(b);if(typeof b=="number")return String(b);if(typeof b=="object")return Array.isArray(b)?p(b):h(b)}function f(m){const y={"'":.1,'"':.2},b={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let v="";for(let _=0;_<m.length;_++){const S=m[_];switch(S){case"'":case'"':y[S]++,v+=S;continue;case"\0":if(Pi.isDigit(m[_+1])){v+="\\x00";continue}}if(b[S]){v+=b[S];continue}if(S<" "){let A=S.charCodeAt(0).toString(16);v+="\\x"+("00"+A).substring(A.length);continue}v+=S}const w=u||Object.keys(y).reduce((_,S)=>y[_]<y[S]?_:S);return v=v.replace(new RegExp(w,"g"),b[w]),w+v+w}function h(m){if(i.indexOf(m)>=0)throw TypeError("Converting circular structure to JSON5");i.push(m);let y=s;s=s+l;let b=o||Object.keys(m),v=[];for(const _ of b){const S=c(_,m);if(S!==void 0){let A=d(_)+":";l!==""&&(A+=" "),A+=S,v.push(A)}}let w;if(v.length===0)w="{}";else{let _;if(l==="")_=v.join(","),w="{"+_+"}";else{let S=`,
`+s;_=v.join(S),w=`{
`+s+_+`,
`+y+"}"}}return i.pop(),s=y,w}function d(m){if(m.length===0)return f(m);const y=String.fromCodePoint(m.codePointAt(0));if(!Pi.isIdStartChar(y))return f(m);for(let b=y.length;b<m.length;b++)if(!Pi.isIdContinueChar(String.fromCodePoint(m.codePointAt(b))))return f(m);return m}function p(m){if(i.indexOf(m)>=0)throw TypeError("Converting circular structure to JSON5");i.push(m);let y=s;s=s+l;let b=[];for(let w=0;w<m.length;w++){const _=c(String(w),m);b.push(_!==void 0?_:"null")}let v;if(b.length===0)v="[]";else if(l==="")v="["+b.join(",")+"]";else{let w=`,
`+s,_=b.join(w);v=`[
`+s+_+`,
`+y+"]"}return i.pop(),s=y,v}};const Yet={parse:zet,stringify:Get};var Xet=Yet;function Ket(t){const e=t.doc.toString();let n=null;try{n=Xet.parse(e)}catch{try{n=fhe.parse(e)}catch{}}const r=W$(t,si.JSON5);return{data:n,pointers:r}}const yU=Symbol.for("yaml.alias"),aN=Symbol.for("yaml.document"),a0=Symbol.for("yaml.map"),phe=Symbol.for("yaml.pair"),Zf=Symbol.for("yaml.scalar"),f2=Symbol.for("yaml.seq"),Iu=Symbol.for("yaml.node.type"),eg=t=>!!t&&typeof t=="object"&&t[Iu]===yU,w1=t=>!!t&&typeof t=="object"&&t[Iu]===aN,h2=t=>!!t&&typeof t=="object"&&t[Iu]===a0,ci=t=>!!t&&typeof t=="object"&&t[Iu]===phe,Fr=t=>!!t&&typeof t=="object"&&t[Iu]===Zf,d2=t=>!!t&&typeof t=="object"&&t[Iu]===f2;function bi(t){if(t&&typeof t=="object")switch(t[Iu]){case a0:case f2:return!0}return!1}function _i(t){if(t&&typeof t=="object")switch(t[Iu]){case yU:case a0:case Zf:case f2:return!0}return!1}const ghe=t=>(Fr(t)||bi(t))&&!!t.anchor,Oa=Symbol("break visit"),mhe=Symbol("skip children"),Uf=Symbol("remove node");function _1(t,e){const n=yhe(e);w1(t)?jy(null,t.contents,n,Object.freeze([t]))===Uf&&(t.contents=null):jy(null,t,n,Object.freeze([]))}_1.BREAK=Oa;_1.SKIP=mhe;_1.REMOVE=Uf;function jy(t,e,n,r){const i=bhe(t,e,n,r);if(_i(i)||ci(i))return vhe(t,r,i),jy(t,i,n,r);if(typeof i!="symbol"){if(bi(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=jy(s,e.items[s],n,r);if(typeof o=="number")s=o-1;else{if(o===Oa)return Oa;o===Uf&&(e.items.splice(s,1),s-=1)}}}else if(ci(e)){r=Object.freeze(r.concat(e));const s=jy("key",e.key,n,r);if(s===Oa)return Oa;s===Uf&&(e.key=null);const o=jy("value",e.value,n,r);if(o===Oa)return Oa;o===Uf&&(e.value=null)}}return i}async function bD(t,e){const n=yhe(e);w1(t)?await qy(null,t.contents,n,Object.freeze([t]))===Uf&&(t.contents=null):await qy(null,t,n,Object.freeze([]))}bD.BREAK=Oa;bD.SKIP=mhe;bD.REMOVE=Uf;async function qy(t,e,n,r){const i=await bhe(t,e,n,r);if(_i(i)||ci(i))return vhe(t,r,i),qy(t,i,n,r);if(typeof i!="symbol"){if(bi(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=await qy(s,e.items[s],n,r);if(typeof o=="number")s=o-1;else{if(o===Oa)return Oa;o===Uf&&(e.items.splice(s,1),s-=1)}}}else if(ci(e)){r=Object.freeze(r.concat(e));const s=await qy("key",e.key,n,r);if(s===Oa)return Oa;s===Uf&&(e.key=null);const o=await qy("value",e.value,n,r);if(o===Oa)return Oa;o===Uf&&(e.value=null)}}return i}function yhe(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function bhe(t,e,n,r){if(typeof n=="function")return n(t,e,r);if(h2(e))return n.Map?.(t,e,r);if(d2(e))return n.Seq?.(t,e,r);if(ci(e))return n.Pair?.(t,e,r);if(Fr(e))return n.Scalar?.(t,e,r);if(eg(e))return n.Alias?.(t,e,r)}function vhe(t,e,n){const r=e[e.length-1];if(bi(r))r.items[t]=n;else if(ci(r))t==="key"?r.key=n:r.value=n;else if(w1(r))r.contents=n;else{const i=eg(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const Qet={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Jet=t=>t.replace(/[!,[\]{}]/g,e=>Qet[e]);class Lo{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Lo.defaultYaml,e),this.tags=Object.assign({},Lo.defaultTags,n)}clone(){const e=new Lo(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Lo(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Lo.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Lo.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Lo.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Lo.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[s,o]=r;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[s]=r;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const o=/^\d+\.\d+$/.test(s);return n(6,`Unsupported YAML version ${s}`,o),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,r,i]=e.match(/^(.*!)([^!]*)$/s);i||n(`The ${e} tag has no suffix`);const s=this.tags[r];if(s)try{return s+decodeURIComponent(i)}catch(o){return n(String(o)),null}return r==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,r]of Object.entries(this.tags))if(e.startsWith(r))return n+Jet(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(e&&r.length>0&&_i(e.contents)){const s={};_1(e.contents,(o,a)=>{_i(a)&&a.tag&&(s[a.tag]=!0)}),i=Object.keys(s)}else i=[];for(const[s,o]of r)s==="!!"&&o==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(o)))&&n.push(`%TAG ${s} ${o}`);return n.join(`
`)}}Lo.defaultYaml={explicit:!1,version:"1.2"};Lo.defaultTags={"!!":"tag:yaml.org,2002:"};function xhe(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function whe(t){const e=new Set;return _1(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function _he(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function Zet(t,e){const n=[],r=new Map;let i=null;return{onAnchor:s=>{n.push(s),i??(i=whe(t));const o=_he(e,i);return i.add(o),o},setAnchors:()=>{for(const s of n){const o=r.get(s);if(typeof o=="object"&&o.anchor&&(Fr(o.node)||bi(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:r}}function Vy(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,s=r.length;i<s;++i){const o=r[i],a=Vy(t,r,String(i),o);a===void 0?delete r[i]:a!==o&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const s=r.get(i),o=Vy(t,r,i,s);o===void 0?r.delete(i):o!==s&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const s=Vy(t,r,i,i);s===void 0?r.delete(i):s!==i&&(r.delete(i),r.add(s))}else for(const[i,s]of Object.entries(r)){const o=Vy(t,r,i,s);o===void 0?delete r[i]:o!==s&&(r[i]=o)}return t.call(e,n,r)}function ku(t,e,n){if(Array.isArray(t))return t.map((r,i)=>ku(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!ghe(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=s=>{r.res=s,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!n?.keep?Number(t):t}class bU{constructor(e){Object.defineProperty(this,Iu,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:s}={}){if(!w1(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=ku(this,"",o);if(typeof i=="function")for(const{count:l,res:u}of o.anchors.values())i(u,l);return typeof s=="function"?Vy(s,{"":a},"",a):a}}class vD extends bU{constructor(e){super(yU),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let r;n?.aliasResolveCache?r=n.aliasResolveCache:(r=[],_1(e,{Node:(s,o)=>{(eg(o)||ghe(o))&&r.push(o)}}),n&&(n.aliasResolveCache=r));let i;for(const s of r){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(e,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:s}=n,o=this.resolve(i,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(o);if(a||(ku(o,null,n),a=r.get(o)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=IC(i,o,r)),a.count*a.aliasCount>s)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){const i=`*${this.source}`;if(e){if(xhe(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${i} `}return i}}function IC(t,e,n){if(eg(e)){const r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(bi(e)){let r=0;for(const i of e.items){const s=IC(t,i,n);s>r&&(r=s)}return r}else if(ci(e)){const r=IC(t,e.key,n),i=IC(t,e.value,n);return Math.max(r,i)}return 1}const She=t=>!t||typeof t!="function"&&typeof t!="object";class Kt extends bU{constructor(e){super(Zf),this.value=e}toJSON(e,n){return n?.keep?this.value:ku(this.value,e,n)}toString(){return String(this.value)}}Kt.BLOCK_FOLDED="BLOCK_FOLDED";Kt.BLOCK_LITERAL="BLOCK_LITERAL";Kt.PLAIN="PLAIN";Kt.QUOTE_DOUBLE="QUOTE_DOUBLE";Kt.QUOTE_SINGLE="QUOTE_SINGLE";const ett="tag:yaml.org,2002:";function ttt(t,e,n){if(e){const r=n.filter(s=>s.tag===e),i=r.find(s=>!s.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>r.identify?.(t)&&!r.format)}function X_(t,e,n){if(w1(t)&&(t=t.contents),_i(t))return t;if(ci(t)){const f=n.schema[a0].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:s,schema:o,sourceObjects:a}=n;let l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=i(t)),new vD(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=ett+e.slice(2));let u=ttt(t,e,o.tags);if(!u){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new Kt(t);return l&&(l.node=f),f}u=t instanceof Map?o[a0]:Symbol.iterator in Object(t)?o[f2]:o[a0]}s&&(s(u),delete n.onTagObj);const c=u?.createNode?u.createNode(n.schema,t,n):typeof u?.nodeClass?.from=="function"?u.nodeClass.from(n.schema,t,n):new Kt(t);return e?c.tag=e:u.default||(c.tag=u.tag),l&&(l.node=c),c}function LE(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){const s=e[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return X_(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const lw=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Ahe extends bU{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(r=>_i(r)||ci(r)?r.clone(e):r),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(lw(e))this.add(n);else{const[r,...i]=e,s=this.get(r,!0);if(bi(s))s.addIn(i,n);else if(s===void 0&&this.schema)this.set(r,LE(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[n,...r]=e;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(bi(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(e,n){const[r,...i]=e,s=this.get(r,!0);return i.length===0?!n&&Fr(s)?s.value:s:bi(s)?s.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!ci(n))return!1;const r=n.value;return r==null||e&&Fr(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[n,...r]=e;if(r.length===0)return this.has(n);const i=this.get(n,!0);return bi(i)?i.hasIn(r):!1}setIn(e,n){const[r,...i]=e;if(i.length===0)this.set(r,n);else{const s=this.get(r,!0);if(bi(s))s.setIn(i,n);else if(s===void 0&&this.schema)this.set(r,LE(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const ntt=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function bd(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const tm=(t,e,n)=>t.endsWith(`
`)?bd(n,e):n.includes(`
`)?`
`+bd(n,e):(t.endsWith(" ")?"":" ")+n,Che="flow",lN="block",RC="quoted";function xD(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return t;i<s&&(s=0);const l=Math.max(1+s,1+i-e.length);if(t.length<=l)return t;const u=[],c={};let f=i-e.length;typeof r=="number"&&(r>i-Math.max(2,s)?u.push(0):f=i-r);let h,d,p=!1,m=-1,y=-1,b=-1;n===lN&&(m=dQ(t,m,e.length),m!==-1&&(f=m+l));for(let w;w=t[m+=1];){if(n===RC&&w==="\\"){switch(y=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}b=m}if(w===`
`)n===lN&&(m=dQ(t,m,e.length)),f=m+e.length+l,h=void 0;else{if(w===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){const _=t[m+1];_&&_!==" "&&_!==`
`&&_!=="	"&&(h=m)}if(m>=f)if(h)u.push(h),f=h+l,h=void 0;else if(n===RC){for(;d===" "||d==="	";)d=w,w=t[m+=1],p=!0;const _=m>b+1?m-2:y-1;if(c[_])return t;u.push(_),c[_]=!0,f=_+l,h=void 0}else p=!0}d=w}if(p&&a&&a(),u.length===0)return t;o&&o();let v=t.slice(0,u[0]);for(let w=0;w<u.length;++w){const _=u[w],S=u[w+1]||t.length;_===0?v=`
${e}${t.slice(0,S)}`:(n===RC&&c[_]&&(v+=`${t[_]}\\`),v+=`
${e}${t.slice(_+1,S)}`)}return v}function dQ(t,e,n){let r=e,i=e+1,s=t[i];for(;s===" "||s==="	";)if(e<i+n)s=t[++e];else{do s=t[++e];while(s&&s!==`
`);r=e,i=e+1,s=t[i]}return r}const wD=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),_D=t=>/^(%|---|\.\.\.)/m.test(t);function rtt(t,e,n){if(!e||e<0)return!1;const r=e-n,i=t.length;if(i<=r)return!1;for(let s=0,o=0;s<i;++s)if(t[s]===`
`){if(s-o>r)return!0;if(o=s+1,i-o<=r)return!1}return!0}function Bw(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(_D(t)?"  ":"");let o="",a=0;for(let l=0,u=n[l];u;u=n[++l])if(u===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,u="\\"),u==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const c=n.substr(l+2,4);switch(c){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:c.substr(0,2)==="00"?o+="\\x"+c.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=s,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,r?o:xD(o,s,RC,wD(e,!1))}function uN(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Bw(t,e);const n=e.indent||(_D(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:xD(r,n,Che,wD(e,!1))}function Wy(t,e){const{singleQuote:n}=e.options;let r;if(n===!1)r=Bw;else{const i=t.includes('"'),s=t.includes("'");i&&!s?r=uN:s&&!i?r=Bw:r=n?uN:Bw}return r(t,e)}let cN;try{cN=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{cN=/\n+(?!\n|$)/g}function FC({comment:t,type:e,value:n},r,i,s){const{blockQuote:o,commentString:a,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(n))return Wy(n,r);const u=r.indent||(r.forceBlockIndent||_D(n)?"  ":""),c=o==="literal"?!0:o==="folded"||e===Kt.BLOCK_FOLDED?!1:e===Kt.BLOCK_LITERAL?!0:!rtt(n,l,u.length);if(!n)return c?`|
`:`>
`;let f,h;for(h=n.length;h>0;--h){const S=n[h-1];if(S!==`
`&&S!=="	"&&S!==" ")break}let d=n.substring(h);const p=d.indexOf(`
`);p===-1?f="-":n===d||p!==d.length-1?(f="+",s&&s()):f="",d&&(n=n.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(cN,`$&${u}`));let m=!1,y,b=-1;for(y=0;y<n.length;++y){const S=n[y];if(S===" ")m=!0;else if(S===`
`)b=y;else break}let v=n.substring(0,b<y?b+1:y);v&&(n=n.substring(v.length),v=v.replace(/\n+/g,`$&${u}`));let _=(m?u?"2":"1":"")+f;if(t&&(_+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),!c){const S=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);let A=!1;const C=wD(r,!0);o!=="folded"&&e!==Kt.BLOCK_FOLDED&&(C.onOverflow=()=>{A=!0});const D=xD(`${v}${S}${d}`,u,lN,C);if(!A)return`>${_}
${u}${D}`}return n=n.replace(/\n+/g,`$&${u}`),`|${_}
${u}${v}${n}${d}`}function itt(t,e,n,r){const{type:i,value:s}=t,{actualString:o,implicitKey:a,indent:l,indentStep:u,inFlow:c}=e;if(a&&s.includes(`
`)||c&&/[[\]{},]/.test(s))return Wy(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||c||!s.includes(`
`)?Wy(s,e):FC(t,e,n,r);if(!a&&!c&&i!==Kt.PLAIN&&s.includes(`
`))return FC(t,e,n,r);if(_D(s)){if(l==="")return e.forceBlockIndent=!0,FC(t,e,n,r);if(a&&l===u)return Wy(s,e)}const f=s.replace(/\n+/g,`$&
${l}`);if(o){const h=m=>m.default&&m.tag!=="tag:yaml.org,2002:str"&&m.test?.test(f),{compat:d,tags:p}=e.doc.schema;if(p.some(h)||d?.some(h))return Wy(s,e)}return a?f:xD(f,l,Che,wD(e,!1))}function mS(t,e,n,r){const{implicitKey:i,inFlow:s}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==Kt.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=Kt.QUOTE_DOUBLE);const l=c=>{switch(c){case Kt.BLOCK_FOLDED:case Kt.BLOCK_LITERAL:return i||s?Wy(o.value,e):FC(o,e,n,r);case Kt.QUOTE_DOUBLE:return Bw(o.value,e);case Kt.QUOTE_SINGLE:return uN(o.value,e);case Kt.PLAIN:return itt(o,e,n,r);default:return null}};let u=l(a);if(u===null){const{defaultKeyType:c,defaultStringType:f}=e.options,h=i&&c||f;if(u=l(h),u===null)throw new Error(`Unsupported default string type ${h}`)}return u}function khe(t,e){const n=Object.assign({blockQuote:!0,commentString:ntt,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function stt(t,e){if(e.tag){const i=t.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)??i[0]}let n,r;if(Fr(e)){r=e.value;let i=t.filter(s=>s.identify?.(r));if(i.length>1){const s=i.filter(o=>o.test);s.length>0&&(i=s)}n=i.find(s=>s.format===e.format)??i.find(s=>!s.format)}else r=e,n=t.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!n){const i=r?.constructor?.name??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${i} value`)}return n}function ott(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],s=(Fr(t)||bi(t))&&t.anchor;s&&xhe(s)&&(n.add(s),i.push(`&${s}`));const o=t.tag??(e.default?null:e.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function cv(t,e,n,r){if(ci(t))return t.toString(e,n,r);if(eg(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const s=_i(t)?t:e.doc.createNode(t,{onTagObj:l=>i=l});i??(i=stt(e.doc.schema.tags,s));const o=ott(s,i,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof i.stringify=="function"?i.stringify(s,e,n,r):Fr(s)?mS(s,e,n,r):s.toString(e,n,r);return o?Fr(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function att({key:t,value:e},n,r,i){const{allNullValues:s,doc:o,indent:a,indentStep:l,options:{commentString:u,indentSeq:c,simpleKeys:f}}=n;let h=_i(t)&&t.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(bi(t)||!_i(t)&&typeof t=="object"){const C="With simple keys, collection cannot be used as a key value";throw new Error(C)}}let d=!f&&(!t||h&&e==null&&!n.inFlow||bi(t)||(Fr(t)?t.type===Kt.BLOCK_FOLDED||t.type===Kt.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(f||!s),indent:a+l});let p=!1,m=!1,y=cv(t,n,()=>p=!0,()=>m=!0);if(!d&&!n.inFlow&&y.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(s||e==null)return p&&r&&r(),y===""?"?":d?`? ${y}`:y}else if(s&&!f||e==null&&d)return y=`? ${y}`,h&&!p?y+=tm(y,n.indent,u(h)):m&&i&&i(),y;p&&(h=null),d?(h&&(y+=tm(y,n.indent,u(h))),y=`? ${y}
${a}:`):(y=`${y}:`,h&&(y+=tm(y,n.indent,u(h))));let b,v,w;_i(e)?(b=!!e.spaceBefore,v=e.commentBefore,w=e.comment):(b=!1,v=null,w=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!d&&!h&&Fr(e)&&(n.indentAtStart=y.length+1),m=!1,!c&&l.length>=2&&!n.inFlow&&!d&&d2(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let _=!1;const S=cv(e,n,()=>_=!0,()=>m=!0);let A=" ";if(h||b||v){if(A=b?`
`:"",v){const C=u(v);A+=`
${bd(C,n.indent)}`}S===""&&!n.inFlow?A===`
`&&(A=`

`):A+=`
${n.indent}`}else if(!d&&bi(e)){const C=S[0],D=S.indexOf(`
`),T=D!==-1,M=n.inFlow??e.flow??e.items.length===0;if(T||!M){let I=!1;if(T&&(C==="&"||C==="!")){let N=S.indexOf(" ");C==="&"&&N!==-1&&N<D&&S[N+1]==="!"&&(N=S.indexOf(" ",N+1)),(N===-1||D<N)&&(I=!0)}I||(A=`
${n.indent}`)}}else(S===""||S[0]===`
`)&&(A="");return y+=A+S,n.inFlow?_&&r&&r():w&&!_?y+=tm(y,n.indent,u(w)):m&&i&&i(),y}function Ehe(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const t6="<<",Od={identify:t=>t===t6||typeof t=="symbol"&&t.description===t6,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Kt(Symbol(t6)),{addToJSMap:Dhe}),stringify:()=>t6},ltt=(t,e)=>(Od.identify(e)||Fr(e)&&(!e.type||e.type===Kt.PLAIN)&&Od.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Od.tag&&n.default);function Dhe(t,e,n){if(n=t&&eg(n)?n.resolve(t.doc):n,d2(n))for(const r of n.items)rM(t,e,r);else if(Array.isArray(n))for(const r of n)rM(t,e,r);else rM(t,e,n)}function rM(t,e,n){const r=t&&eg(n)?n.resolve(t.doc):n;if(!h2(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,t,Map);for(const[s,o]of i)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function The(t,e,{key:n,value:r}){if(_i(n)&&n.addToJSMap)n.addToJSMap(t,e,r);else if(ltt(t,n))Dhe(t,e,r);else{const i=ku(n,"",t);if(e instanceof Map)e.set(i,ku(r,i,t));else if(e instanceof Set)e.add(i);else{const s=utt(n,i,t),o=ku(r,s,t);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function utt(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(_i(t)&&n?.doc){const r=khe(n.doc,{});r.anchors=new Set;for(const s of n.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=t.toString(r);if(!n.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),Ehe(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function vU(t,e,n){const r=X_(t,void 0,n),i=X_(e,void 0,n);return new yo(r,i)}class yo{constructor(e,n=null){Object.defineProperty(this,Iu,{value:phe}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return _i(n)&&(n=n.clone(e)),_i(r)&&(r=r.clone(e)),new yo(n,r)}toJSON(e,n){const r=n?.mapAsMap?new Map:{};return The(n,r,this)}toString(e,n,r){return e?.doc?att(this,e,n,r):JSON.stringify(this)}}function Ohe(t,e,n){return(e.inFlow??t.flow?ftt:ctt)(t,e,n)}function ctt({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:s,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:u}}=n,c=Object.assign({},n,{indent:s,type:null});let f=!1;const h=[];for(let p=0;p<e.length;++p){const m=e[p];let y=null;if(_i(m))!f&&m.spaceBefore&&h.push(""),PE(n,h,m.commentBefore,f),m.comment&&(y=m.comment);else if(ci(m)){const v=_i(m.key)?m.key:null;v&&(!f&&v.spaceBefore&&h.push(""),PE(n,h,v.commentBefore,f))}f=!1;let b=cv(m,c,()=>y=null,()=>f=!0);y&&(b+=tm(b,s,u(y))),f&&y&&(f=!1),h.push(r+b)}let d;if(h.length===0)d=i.start+i.end;else{d=h[0];for(let p=1;p<h.length;++p){const m=h[p];d+=m?`
${l}${m}`:`
`}}return t?(d+=`
`+bd(u(t),l),a&&a()):f&&o&&o(),d}function ftt({items:t},e,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=e;r+=s;const l=Object.assign({},e,{indent:r,inFlow:!0,type:null});let u=!1,c=0;const f=[];for(let p=0;p<t.length;++p){const m=t[p];let y=null;if(_i(m))m.spaceBefore&&f.push(""),PE(e,f,m.commentBefore,!1),m.comment&&(y=m.comment);else if(ci(m)){const v=_i(m.key)?m.key:null;v&&(v.spaceBefore&&f.push(""),PE(e,f,v.commentBefore,!1),v.comment&&(u=!0));const w=_i(m.value)?m.value:null;w?(w.comment&&(y=w.comment),w.commentBefore&&(u=!0)):m.value==null&&v?.comment&&(y=v.comment)}y&&(u=!0);let b=cv(m,l,()=>y=null);p<t.length-1&&(b+=","),y&&(b+=tm(b,r,a(y))),!u&&(f.length>c||b.includes(`
`))&&(u=!0),f.push(b),c=f.length}const{start:h,end:d}=n;if(f.length===0)return h+d;if(!u){const p=f.reduce((m,y)=>m+y.length+2,2);u=e.options.lineWidth>0&&p>e.options.lineWidth}if(u){let p=h;for(const m of f)p+=m?`
${s}${i}${m}`:`
`;return`${p}
${i}${d}`}else return`${h}${o}${f.join(" ")}${o}${d}`}function PE({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const s=bd(e(r),t);n.push(s.trimStart())}}function nm(t,e){const n=Fr(e)?e.value:e;for(const r of t)if(ci(r)&&(r.key===e||r.key===n||Fr(r.key)&&r.key.value===n))return r}class vl extends Ahe{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(a0,e),this.items=[]}static from(e,n,r){const{keepUndefined:i,replacer:s}=r,o=new this(e),a=(l,u)=>{if(typeof s=="function")u=s.call(n,l,u);else if(Array.isArray(s)&&!s.includes(l))return;(u!==void 0||i)&&o.items.push(vU(l,u,r))};if(n instanceof Map)for(const[l,u]of n)a(l,u);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let r;ci(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new yo(e,e?.value):r=new yo(e.key,e.value);const i=nm(this.items,r.key),s=this.schema?.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);Fr(i.value)&&She(r.value)?i.value.value=r.value:i.value=r.value}else if(s){const o=this.items.findIndex(a=>s(r,a)<0);o===-1?this.items.push(r):this.items.splice(o,0,r)}else this.items.push(r)}delete(e){const n=nm(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const i=nm(this.items,e)?.value;return(!n&&Fr(i)?i.value:i)??void 0}has(e){return!!nm(this.items,e)}set(e,n){this.add(new yo(e,n),!0)}toJSON(e,n,r){const i=r?new r:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(i);for(const s of this.items)The(n,i,s);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!ci(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Ohe(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}}const p2={collection:"map",default:!0,nodeClass:vl,tag:"tag:yaml.org,2002:map",resolve(t,e){return h2(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>vl.from(t,e,n)};class L0 extends Ahe{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(f2,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=n6(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const r=n6(e);if(typeof r!="number")return;const i=this.items[r];return!n&&Fr(i)?i.value:i}has(e){const n=n6(e);return typeof n=="number"&&n<this.items.length}set(e,n){const r=n6(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];Fr(i)&&She(n)?i.value=n:this.items[r]=n}toJSON(e,n){const r=[];n?.onCreate&&n.onCreate(r);let i=0;for(const s of this.items)r.push(ku(s,String(i++),n));return r}toString(e,n,r){return e?Ohe(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){const{replacer:i}=r,s=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof i=="function"){const l=n instanceof Set?a:String(o++);a=i.call(n,l,a)}s.items.push(X_(a,void 0,r))}}return s}}function n6(t){let e=Fr(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const g2={collection:"seq",default:!0,nodeClass:L0,tag:"tag:yaml.org,2002:seq",resolve(t,e){return d2(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>L0.from(t,e,n)},SD={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),mS(t,e,n,r)}},AD={identify:t=>t==null,createNode:()=>new Kt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Kt(null),stringify:({source:t},e)=>typeof t=="string"&&AD.test.test(t)?t:e.options.nullStr},xU={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Kt(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&xU.test.test(t)){const r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function Pc({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=e-(s.length-o-1);for(;a-- >0;)s+="0"}return s}const Mhe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Pc},Ihe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Pc(t)}},Rhe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Kt(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Pc},CD=t=>typeof t=="bigint"||Number.isInteger(t),wU=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function Fhe(t,e,n){const{value:r}=t;return CD(r)&&r>=0?n+r.toString(e):Pc(t)}const Nhe={identify:t=>CD(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>wU(t,2,8,n),stringify:t=>Fhe(t,8,"0o")},Lhe={identify:CD,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>wU(t,0,10,n),stringify:Pc},Phe={identify:t=>CD(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>wU(t,2,16,n),stringify:t=>Fhe(t,16,"0x")},htt=[p2,g2,SD,AD,xU,Nhe,Lhe,Phe,Mhe,Ihe,Rhe];function pQ(t){return typeof t=="bigint"||Number.isInteger(t)}const r6=({value:t})=>JSON.stringify(t),dtt=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:r6},{identify:t=>t==null,createNode:()=>new Kt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:r6},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:r6},{identify:pQ,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>pQ(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:r6}],ptt={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},gtt=[p2,g2].concat(dtt,ptt),_U={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,s){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=Kt.BLOCK_LITERAL),e!==Kt.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),u=Math.ceil(a.length/l),c=new Array(u);for(let f=0,h=0;f<u;++f,h+=l)c[f]=a.substr(h,l);a=c.join(e===Kt.BLOCK_LITERAL?`
`:" ")}return mS({comment:t,type:e,value:a},r,i,s)}};function Bhe(t,e){if(d2(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!ci(r)){if(h2(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const i=r.items[0]||new yo(new Kt(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const s=i.value??i.key;s.comment=s.comment?`${r.comment}
${s.comment}`:r.comment}r=i}t.items[n]=ci(r)?r:new yo(r)}}else e("Expected a sequence for this tag");return t}function $he(t,e,n){const{replacer:r}=n,i=new L0(t);i.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof r=="function"&&(o=r.call(e,String(s++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const u=Object.keys(o);if(u.length===1)a=u[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else a=o;i.items.push(vU(a,l,n))}return i}const SU={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Bhe,createNode:$he};class xb extends L0{constructor(){super(),this.add=vl.prototype.add.bind(this),this.delete=vl.prototype.delete.bind(this),this.get=vl.prototype.get.bind(this),this.has=vl.prototype.has.bind(this),this.set=vl.prototype.set.bind(this),this.tag=xb.tag}toJSON(e,n){if(!n)return super.toJSON(e);const r=new Map;n?.onCreate&&n.onCreate(r);for(const i of this.items){let s,o;if(ci(i)?(s=ku(i.key,"",n),o=ku(i.value,s,n)):s=ku(i,"",n),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(e,n,r){const i=$he(e,n,r),s=new this;return s.items=i.items,s}}xb.tag="tag:yaml.org,2002:omap";const AU={collection:"seq",identify:t=>t instanceof Map,nodeClass:xb,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=Bhe(t,e),r=[];for(const{key:i}of n.items)Fr(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new xb,n)},createNode:(t,e,n)=>xb.from(t,e,n)};function Uhe({value:t,source:e},n){return e&&(t?zhe:jhe).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const zhe={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Kt(!0),stringify:Uhe},jhe={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Kt(!1),stringify:Uhe},mtt={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Pc},ytt={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Pc(t)}},btt={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Kt(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:Pc},yS=t=>typeof t=="bigint"||Number.isInteger(t);function kD(t,e,n,{intAsBigInt:r}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return i==="-"?BigInt(-1)*o:o}const s=parseInt(t,n);return i==="-"?-1*s:s}function CU(t,e,n){const{value:r}=t;if(yS(r)){const i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return Pc(t)}const vtt={identify:yS,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>kD(t,2,2,n),stringify:t=>CU(t,2,"0b")},xtt={identify:yS,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>kD(t,1,8,n),stringify:t=>CU(t,8,"0")},wtt={identify:yS,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>kD(t,0,10,n),stringify:Pc},_tt={identify:yS,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>kD(t,2,16,n),stringify:t=>CU(t,16,"0x")};class wb extends vl{constructor(e){super(e),this.tag=wb.tag}add(e){let n;ci(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new yo(e.key,null):n=new yo(e,null),nm(this.items,n.key)||this.items.push(n)}get(e,n){const r=nm(this.items,e);return!n&&ci(r)?Fr(r.key)?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=nm(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new yo(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(e,n,r){const{replacer:i}=r,s=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof i=="function"&&(o=i.call(n,o,o)),s.items.push(vU(o,null,r));return s}}wb.tag="tag:yaml.org,2002:set";const kU={collection:"map",identify:t=>t instanceof Set,nodeClass:wb,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>wb.from(t,e,n),resolve(t,e){if(h2(t)){if(t.hasAllNullValues(!0))return Object.assign(new wb,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function EU(t,e){const n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=o=>e?BigInt(o):Number(o),s=r.replace(/_/g,"").split(":").reduce((o,a)=>o*i(60)+i(a),i(0));return n==="-"?i(-1)*s:s}function qhe(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return Pc(t);let r="";e<0&&(r="-",e*=n(-1));const i=n(60),s=[e%i];return e<60?s.unshift(0):(e=(e-s[0])/i,s.unshift(e%i),e>=60&&(e=(e-s[0])/i,s.unshift(e))),r+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const Vhe={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>EU(t,n),stringify:qhe},Whe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>EU(t,!1),stringify:qhe},ED={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(ED.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,s,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let u=Date.UTC(n,r-1,i,s||0,o||0,a||0,l);const c=e[8];if(c&&c!=="Z"){let f=EU(c,!1);Math.abs(f)<30&&(f*=60),u-=6e4*f}return new Date(u)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},gQ=[p2,g2,SD,AD,zhe,jhe,vtt,xtt,wtt,_tt,mtt,ytt,btt,_U,Od,AU,SU,kU,Vhe,Whe,ED],mQ=new Map([["core",htt],["failsafe",[p2,g2,SD]],["json",gtt],["yaml11",gQ],["yaml-1.1",gQ]]),yQ={binary:_U,bool:xU,float:Rhe,floatExp:Ihe,floatNaN:Mhe,floatTime:Whe,int:Lhe,intHex:Phe,intOct:Nhe,intTime:Vhe,map:p2,merge:Od,null:AD,omap:AU,pairs:SU,seq:g2,set:kU,timestamp:ED},Stt={"tag:yaml.org,2002:binary":_U,"tag:yaml.org,2002:merge":Od,"tag:yaml.org,2002:omap":AU,"tag:yaml.org,2002:pairs":SU,"tag:yaml.org,2002:set":kU,"tag:yaml.org,2002:timestamp":ED};function iM(t,e,n){const r=mQ.get(e);if(r&&!t)return n&&!r.includes(Od)?r.concat(Od):r.slice();let i=r;if(!i)if(Array.isArray(t))i=[];else{const s=Array.from(mQ.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(t))for(const s of t)i=i.concat(s);else typeof t=="function"&&(i=t(i.slice()));return n&&(i=i.concat(Od)),i.reduce((s,o)=>{const a=typeof o=="string"?yQ[o]:o;if(!a){const l=JSON.stringify(o),u=Object.keys(yQ).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${u}`)}return s.includes(a)||s.push(a),s},[])}const Att=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class DD{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?iM(e,"compat"):e?iM(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=i?Stt:{},this.tags=iM(n,this.name,r),this.toStringOptions=a??null,Object.defineProperty(this,a0,{value:p2}),Object.defineProperty(this,Zf,{value:SD}),Object.defineProperty(this,f2,{value:g2}),this.sortMapEntries=typeof o=="function"?o:o===!0?Att:null}clone(){const e=Object.create(DD.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Ctt(t,e){const n=[];let r=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const i=khe(t,e),{commentString:s}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=s(t.commentBefore);n.unshift(bd(l,""))}let o=!1,a=null;if(t.contents){if(_i(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const c=s(t.contents.commentBefore);n.push(bd(c,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}const l=a?void 0:()=>o=!0;let u=cv(t.contents,i,()=>a=null,l);a&&(u+=tm(u,"",s(a))),(u[0]==="|"||u[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${u}`:n.push(u)}else n.push(cv(t.contents,i));if(t.directives?.docEnd)if(t.comment){const l=s(t.comment);l.includes(`
`)?(n.push("..."),n.push(bd(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(bd(s(l),"")))}return n.join(`
`)+`
`}class m2{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Iu,{value:aN});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Lo({version:o}),this.setSchema(o,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){const e=Object.create(m2.prototype,{[Iu]:{value:aN}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=_i(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){ry(this.contents)&&this.contents.add(e)}addIn(e,n){ry(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const r=whe(this);e.anchor=!n||r.has(n)?_he(n||"a",r):n}return new vD(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const y=v=>typeof v=="number"||v instanceof String||v instanceof Number,b=n.filter(y).map(String);b.length>0&&(n=n.concat(b)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:u,tag:c}=r??{},{onAnchor:f,setAnchors:h,sourceObjects:d}=Zet(this,o||"a"),p={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:u,replacer:i,schema:this.schema,sourceObjects:d},m=X_(e,c,p);return a&&bi(m)&&(m.flow=!0),h(),m}createPair(e,n,r={}){const i=this.createNode(e,null,r),s=this.createNode(n,null,r);return new yo(i,s)}delete(e){return ry(this.contents)?this.contents.delete(e):!1}deleteIn(e){return lw(e)?this.contents==null?!1:(this.contents=null,!0):ry(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return bi(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return lw(e)?!n&&Fr(this.contents)?this.contents.value:this.contents:bi(this.contents)?this.contents.getIn(e,n):void 0}has(e){return bi(this.contents)?this.contents.has(e):!1}hasIn(e){return lw(e)?this.contents!==void 0:bi(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=LE(this.schema,[e],n):ry(this.contents)&&this.contents.set(e,n)}setIn(e,n){lw(e)?this.contents=n:this.contents==null?this.contents=LE(this.schema,Array.from(e),n):ry(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Lo({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Lo({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new DD(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:s,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=ku(this.contents,n??"",a);if(typeof s=="function")for(const{count:u,res:c}of a.anchors.values())s(c,u);return typeof o=="function"?Vy(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Ctt(this,e)}}function ry(t){if(bi(t))return!0;throw new Error("Expected a YAML collection as document contents")}class DU extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}}class rm extends DU{constructor(e,n,r){super("YAMLParseError",e,n,r)}}class Hhe extends DU{constructor(e,n,r){super("YAMLWarning",e,n,r)}}const BE=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let s=i-1,o=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){const a=Math.min(s-39,o.length-79);o="â¦"+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+"â¦"),r>1&&/^ *$/.test(o.substring(0,s))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`â¦
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-s)));const u=" ".repeat(s)+"^".repeat(a);n.message+=`:

${o}
${u}
`}};function fv(t,{flow:e,indicator:n,next:r,offset:i,onError:s,parentIndent:o,startOnNewline:a}){let l=!1,u=a,c=a,f="",h="",d=!1,p=!1,m=null,y=null,b=null,v=null,w=null,_=null,S=null;for(const D of t)switch(p&&(D.type!=="space"&&D.type!=="newline"&&D.type!=="comma"&&s(D.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),m&&(u&&D.type!=="comment"&&D.type!=="newline"&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),D.type){case"space":!e&&(n!=="doc-start"||r?.type!=="flow-collection")&&D.source.includes("	")&&(m=D),c=!0;break;case"comment":{c||s(D,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const T=D.source.substring(1)||" ";f?f+=h+T:f=T,h="",u=!1;break}case"newline":u?f?f+=D.source:(!_||n!=="seq-item-ind")&&(l=!0):h+=D.source,u=!0,d=!0,(y||b)&&(v=D),c=!0;break;case"anchor":y&&s(D,"MULTIPLE_ANCHORS","A node can have at most one anchor"),D.source.endsWith(":")&&s(D.offset+D.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),y=D,S??(S=D.offset),u=!1,c=!1,p=!0;break;case"tag":{b&&s(D,"MULTIPLE_TAGS","A node can have at most one tag"),b=D,S??(S=D.offset),u=!1,c=!1,p=!0;break}case n:(y||b)&&s(D,"BAD_PROP_ORDER",`Anchors and tags must be after the ${D.source} indicator`),_&&s(D,"UNEXPECTED_TOKEN",`Unexpected ${D.source} in ${e??"collection"}`),_=D,u=n==="seq-item-ind"||n==="explicit-key-ind",c=!1;break;case"comma":if(e){w&&s(D,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),w=D,u=!1,c=!1;break}default:s(D,"UNEXPECTED_TOKEN",`Unexpected ${D.type} token`),u=!1,c=!1}const A=t[t.length-1],C=A?A.offset+A.source.length:i;return p&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(u&&m.indent<=o||r?.type==="block-map"||r?.type==="block-seq")&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:w,found:_,spaceBefore:l,comment:f,hasNewline:d,anchor:y,tag:b,newlineAfterProp:v,end:C,start:S??C}}function K_(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(K_(e.key)||K_(e.value))return!0}return!1;default:return!0}}function fN(t,e,n){if(e?.type==="flow-collection"){const r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&K_(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Ghe(t,e,n){const{uniqueKeys:r}=t.options;if(r===!1)return!1;const i=typeof r=="function"?r:(s,o)=>s===o||Fr(s)&&Fr(o)&&s.value===o.value;return e.some(s=>i(s.key,n))}const bQ="All mapping items must start at the same column";function ktt({composeNode:t,composeEmptyNode:e},n,r,i,s){const o=s?.nodeClass??vl,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,u=null;for(const c of r.items){const{start:f,key:h,sep:d,value:p}=c,m=fv(f,{indicator:"explicit-key-ind",next:h??d?.[0],offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0}),y=!m.found;if(y){if(h&&(h.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==r.indent&&i(l,"BAD_INDENT",bQ)),!m.anchor&&!m.tag&&!d){u=m.end,m.comment&&(a.comment?a.comment+=`
`+m.comment:a.comment=m.comment);continue}(m.newlineAfterProp||K_(h))&&i(h??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else m.found?.indent!==r.indent&&i(l,"BAD_INDENT",bQ);n.atKey=!0;const b=m.end,v=h?t(n,h,m,i):e(n,b,f,null,m,i);n.schema.compat&&fN(r.indent,h,i),n.atKey=!1,Ghe(n,a.items,v)&&i(b,"DUPLICATE_KEY","Map keys must be unique");const w=fv(d??[],{indicator:"map-value-ind",next:p,offset:v.range[2],onError:i,parentIndent:r.indent,startOnNewline:!h||h.type==="block-scalar"});if(l=w.end,w.found){y&&(p?.type==="block-map"&&!w.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&m.start<w.found.offset-1024&&i(v.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const _=p?t(n,p,w,i):e(n,l,d,null,w,i);n.schema.compat&&fN(r.indent,p,i),l=_.range[2];const S=new yo(v,_);n.options.keepSourceTokens&&(S.srcToken=c),a.items.push(S)}else{y&&i(v.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),w.comment&&(v.comment?v.comment+=`
`+w.comment:v.comment=w.comment);const _=new yo(v);n.options.keepSourceTokens&&(_.srcToken=c),a.items.push(_)}}return u&&u<l&&i(u,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,u??l],a}function Ett({composeNode:t,composeEmptyNode:e},n,r,i,s){const o=s?.nodeClass??L0,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=r.offset,u=null;for(const{start:c,value:f}of r.items){const h=fv(c,{indicator:"seq-item-ind",next:f,offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!h.found)if(h.anchor||h.tag||f)f&&f.type==="block-seq"?i(h.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{u=h.end,h.comment&&(a.comment=h.comment);continue}const d=f?t(n,f,h,i):e(n,h.end,c,null,h,i);n.schema.compat&&fN(r.indent,f,i),l=d.range[2],a.items.push(d)}return a.range=[r.offset,l,u??l],a}function bS(t,e,n,r){let i="";if(t){let s=!1,o="";for(const a of t){const{source:l,type:u}=a;switch(u){case"space":s=!0;break;case"comment":{n&&!s&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const c=l.substring(1)||" ";i?i+=o+c:i=c,o="";break}case"newline":i&&(o+=l),s=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}e+=l.length}}return{comment:i,offset:e}}const sM="Block collections are not allowed within flow collections",oM=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Dtt({composeNode:t,composeEmptyNode:e},n,r,i,s){const o=r.start.source==="{",a=o?"flow map":"flow sequence",l=s?.nodeClass??(o?vl:L0),u=new l(n.schema);u.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=r.offset+r.start.source.length;for(let y=0;y<r.items.length;++y){const b=r.items[y],{start:v,key:w,sep:_,value:S}=b,A=fv(v,{flow:a,indicator:"explicit-key-ind",next:w??_?.[0],offset:f,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!A.found){if(!A.anchor&&!A.tag&&!_&&!S){y===0&&A.comma?i(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):y<r.items.length-1&&i(A.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),A.comment&&(u.comment?u.comment+=`
`+A.comment:u.comment=A.comment),f=A.end;continue}!o&&n.options.strict&&K_(w)&&i(w,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(y===0)A.comma&&i(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(A.comma||i(A.start,"MISSING_CHAR",`Missing , between ${a} items`),A.comment){let C="";e:for(const D of v)switch(D.type){case"comma":case"space":break;case"comment":C=D.source.substring(1);break e;default:break e}if(C){let D=u.items[u.items.length-1];ci(D)&&(D=D.value??D.key),D.comment?D.comment+=`
`+C:D.comment=C,A.comment=A.comment.substring(C.length+1)}}if(!o&&!_&&!A.found){const C=S?t(n,S,A,i):e(n,A.end,_,null,A,i);u.items.push(C),f=C.range[2],oM(S)&&i(C.range,"BLOCK_IN_FLOW",sM)}else{n.atKey=!0;const C=A.end,D=w?t(n,w,A,i):e(n,C,v,null,A,i);oM(w)&&i(D.range,"BLOCK_IN_FLOW",sM),n.atKey=!1;const T=fv(_??[],{flow:a,indicator:"map-value-ind",next:S,offset:D.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(T.found){if(!o&&!A.found&&n.options.strict){if(_)for(const N of _){if(N===T.found)break;if(N.type==="newline"){i(N,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}A.start<T.found.offset-1024&&i(T.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else S&&("source"in S&&S.source&&S.source[0]===":"?i(S,"MISSING_CHAR",`Missing space after : in ${a}`):i(T.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const M=S?t(n,S,T,i):T.found?e(n,T.end,_,null,T,i):null;M?oM(S)&&i(M.range,"BLOCK_IN_FLOW",sM):T.comment&&(D.comment?D.comment+=`
`+T.comment:D.comment=T.comment);const I=new yo(D,M);if(n.options.keepSourceTokens&&(I.srcToken=b),o){const N=u;Ghe(n,N.items,D)&&i(C,"DUPLICATE_KEY","Map keys must be unique"),N.items.push(I)}else{const N=new vl(n.schema);N.flow=!0,N.items.push(I);const P=(M??D).range;N.range=[D.range[0],P[1],P[2]],u.items.push(N)}f=M?M.range[2]:T.end}}const h=o?"}":"]",[d,...p]=r.end;let m=f;if(d&&d.source===h)m=d.offset+d.source.length;else{const y=a[0].toUpperCase()+a.substring(1),b=c?`${y} must end with a ${h}`:`${y} in block collection must be sufficiently indented and end with a ${h}`;i(f,c?"MISSING_CHAR":"BAD_INDENT",b),d&&d.source.length!==1&&p.unshift(d)}if(p.length>0){const y=bS(p,m,n.options.strict,i);y.comment&&(u.comment?u.comment+=`
`+y.comment:u.comment=y.comment),u.range=[r.offset,m,y.offset]}else u.range=[r.offset,m,m];return u}function aM(t,e,n,r,i,s){const o=n.type==="block-map"?ktt(t,e,n,r,s):n.type==="block-seq"?Ett(t,e,n,r,s):Dtt(t,e,n,r,s),a=o.constructor;return i==="!"||i===a.tagName?(o.tag=a.tagName,o):(i&&(o.tag=i),o)}function Ttt(t,e,n,r,i){const s=r.tag,o=s?e.directives.tagName(s.source,h=>i(s,"TAG_RESOLVE_FAILED",h)):null;if(n.type==="block-seq"){const{anchor:h,newlineAfterProp:d}=r,p=h&&s?h.offset>s.offset?h:s:h??s;p&&(!d||d.offset<p.offset)&&i(p,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===vl.tagName&&a==="map"||o===L0.tagName&&a==="seq")return aM(t,e,n,i,o);let l=e.schema.tags.find(h=>h.tag===o&&h.collection===a);if(!l){const h=e.schema.knownTags[o];if(h&&h.collection===a)e.schema.tags.push(Object.assign({},h,{default:!1})),l=h;else return h?i(s,"BAD_COLLECTION_TYPE",`${h.tag} used for ${a} collection, but expects ${h.collection??"scalar"}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),aM(t,e,n,i,o)}const u=aM(t,e,n,i,o,l),c=l.resolve?.(u,h=>i(s,"TAG_RESOLVE_FAILED",h),e.options)??u,f=_i(c)?c:new Kt(c);return f.range=u.range,f.tag=o,l?.format&&(f.format=l.format),f}function Yhe(t,e,n){const r=e.offset,i=Ott(e,t.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const s=i.mode===">"?Kt.BLOCK_FOLDED:Kt.BLOCK_LITERAL,o=e.source?Mtt(e.source):[];let a=o.length;for(let m=o.length-1;m>=0;--m){const y=o[m][1];if(y===""||y==="\r")a=m;else break}if(a===0){const m=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let y=r+i.length;return e.source&&(y+=e.source.length),{value:m,type:s,comment:i.comment,range:[r,y,y]}}let l=e.indent+i.indent,u=e.offset+i.length,c=0;for(let m=0;m<a;++m){const[y,b]=o[m];if(b===""||b==="\r")i.indent===0&&y.length>l&&(l=y.length);else{y.length<l&&n(u+y.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=y.length),c=m,l===0&&!t.atRoot&&n(u,"BAD_INDENT","Block scalar values in collections must be indented");break}u+=y.length+b.length+1}for(let m=o.length-1;m>=a;--m)o[m][0].length>l&&(a=m+1);let f="",h="",d=!1;for(let m=0;m<c;++m)f+=o[m][0].slice(l)+`
`;for(let m=c;m<a;++m){let[y,b]=o[m];u+=y.length+b.length+1;const v=b[b.length-1]==="\r";if(v&&(b=b.slice(0,-1)),b&&y.length<l){const _=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(u-b.length-(v?2:1),"BAD_INDENT",_),y=""}s===Kt.BLOCK_LITERAL?(f+=h+y.slice(l)+b,h=`
`):y.length>l||b[0]==="	"?(h===" "?h=`
`:!d&&h===`
`&&(h=`

`),f+=h+y.slice(l)+b,h=`
`,d=!0):b===""?h===`
`?f+=`
`:h=`
`:(f+=h+b,h=" ",d=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<o.length;++m)f+=`
`+o[m][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const p=r+i.length+e.source.length;return{value:f,type:s,comment:i.comment,range:[r,p,p]}}function Ott({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],s=i[0];let o=0,a="",l=-1;for(let h=1;h<i.length;++h){const d=i[h];if(!a&&(d==="-"||d==="+"))a=d;else{const p=Number(d);!o&&p?o=p:l===-1&&(l=t+h)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let u=!1,c="",f=i.length;for(let h=1;h<e.length;++h){const d=e[h];switch(d.type){case"space":u=!0;case"newline":f+=d.source.length;break;case"comment":n&&!u&&r(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=d.source.length,c=d.source.substring(1);break;case"error":r(d,"UNEXPECTED_TOKEN",d.message),f+=d.source.length;break;default:{const p=`Unexpected token in block scalar header: ${d.type}`;r(d,"UNEXPECTED_TOKEN",p);const m=d.source;m&&typeof m=="string"&&(f+=m.length)}}}return{mode:s,indent:o,chomp:a,comment:c,length:f}}function Mtt(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),s=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)s.push([e[o],e[o+1]]);return s}function Xhe(t,e,n){const{offset:r,type:i,source:s,end:o}=t;let a,l;const u=(h,d,p)=>n(r+h,d,p);switch(i){case"scalar":a=Kt.PLAIN,l=Itt(s,u);break;case"single-quoted-scalar":a=Kt.QUOTE_SINGLE,l=Rtt(s,u);break;case"double-quoted-scalar":a=Kt.QUOTE_DOUBLE,l=Ftt(s,u);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}const c=r+s.length,f=bS(o,c,e,n);return{value:l,type:a,comment:f.comment,range:[r,c,f.offset]}}function Itt(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Khe(t)}function Rtt(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Khe(t.slice(1,-1)).replace(/''/g,"'")}function Khe(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],s=" ",o=e.lastIndex;for(n.lastIndex=o;r=n.exec(t);)r[1]===""?s===`
`?i+=s:s=`
`:(i+=s+r[1],s=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,r=a.exec(t),i+s+(r?.[1]??"")}function Ftt(t,e){let n="";for(let r=1;r<t.length-1;++r){const i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){const{fold:s,offset:o}=Ntt(t,r);n+=s,r=o}else if(i==="\\"){let s=t[++r];const o=Ltt[s];if(o)n+=o;else if(s===`
`)for(s=t[r+1];s===" "||s==="	";)s=t[++r+1];else if(s==="\r"&&t[r+1]===`
`)for(s=t[++r+1];s===" "||s==="	";)s=t[++r+1];else if(s==="x"||s==="u"||s==="U"){const a={x:2,u:4,U:8}[s];n+=Ptt(t,r+1,a,e),r+=a}else{const a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){const s=r;let o=t[r+1];for(;o===" "||o==="	";)o=t[++r+1];o!==`
`&&!(o==="\r"&&t[r+2]===`
`)&&(n+=r>s?t.slice(s,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function Ntt(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Ltt={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"Â",_:"Â ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Ptt(t,e,n,r){const i=t.substr(e,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function Qhe(t,e,n,r){const{value:i,type:s,comment:o,range:a}=e.type==="block-scalar"?Yhe(t,e,r):Xhe(e,t.options.strict,r),l=n?t.directives.tagName(n.source,f=>r(n,"TAG_RESOLVE_FAILED",f)):null;let u;t.options.stringKeys&&t.atKey?u=t.schema[Zf]:l?u=Btt(t.schema,i,l,n,r):e.type==="scalar"?u=$tt(t,i,e,r):u=t.schema[Zf];let c;try{const f=u.resolve(i,h=>r(n??e,"TAG_RESOLVE_FAILED",h),t.options);c=Fr(f)?f:new Kt(f)}catch(f){const h=f instanceof Error?f.message:String(f);r(n??e,"TAG_RESOLVE_FAILED",h),c=new Kt(i)}return c.range=a,c.source=i,s&&(c.type=s),l&&(c.tag=l),u.format&&(c.format=u.format),o&&(c.comment=o),c}function Btt(t,e,n,r,i){if(n==="!")return t[Zf];const s=[];for(const a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)s.push(a);else return a;for(const a of s)if(a.test?.test(e))return a;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[Zf])}function $tt({atKey:t,directives:e,schema:n},r,i,s){const o=n.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(r))||n[Zf];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(r))??n[Zf];if(o.tag!==a.tag){const l=e.tagString(o.tag),u=e.tagString(a.tag),c=`Value may be parsed as either ${l} or ${u}`;s(i,"TAG_RESOLVE_FAILED",c,!0)}}return o}function Utt(t,e,n){if(e){n??(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];i?.type==="space";)t+=i.source.length,i=e[++r];break}}return t}const ztt={composeNode:Jhe,composeEmptyNode:TU};function Jhe(t,e,n,r){const i=t.atKey,{spaceBefore:s,comment:o,anchor:a,tag:l}=n;let u,c=!0;switch(e.type){case"alias":u=jtt(t,e,r),(a||l)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":u=Qhe(t,e,l,r),a&&(u.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":u=Ttt(ztt,t,e,n,r),a&&(u.anchor=a.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",f),u=TU(t,e.offset,void 0,null,n,r),c=!1}}return a&&u.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&t.options.stringKeys&&(!Fr(u)||typeof u.value!="string"||u.tag&&u.tag!=="tag:yaml.org,2002:str")&&r(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(u.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?u.comment=o:u.commentBefore=o),t.options.keepSourceTokens&&c&&(u.srcToken=e),u}function TU(t,e,n,r,{spaceBefore:i,comment:s,anchor:o,tag:a,end:l},u){const c={type:"scalar",offset:Utt(e,n,r),indent:-1,source:""},f=Qhe(t,c,a,u);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&u(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(f.spaceBefore=!0),s&&(f.comment=s,f.range[2]=l),f}function jtt({options:t},{offset:e,source:n,end:r},i){const s=new vD(n.substring(1));s.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,a=bS(r,o,t.strict,i);return s.range=[e,o,a.offset],a.comment&&(s.comment=a.comment),s}function qtt(t,e,{offset:n,start:r,value:i,end:s},o){const a=Object.assign({_directives:e},t),l=new m2(void 0,a),u={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},c=fv(r,{indicator:"doc-start",next:i??s?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});c.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?Jhe(u,i,c,o):TU(u,c.end,r,null,c,o);const f=l.contents.range[2],h=bS(s,f,!1,o);return h.comment&&(l.comment=h.comment),l.range=[n,f,h.offset],l}function Sx(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function vQ(t){let e="",n=!1,r=!1;for(let i=0;i<t.length;++i){const s=t[i];switch(s[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(s.substring(1)||" "),n=!0,r=!1;break;case"%":t[i+1]?.[0]!=="#"&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class OU{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,s)=>{const o=Sx(n);s?this.warnings.push(new Hhe(o,r,i)):this.errors.push(new rm(o,r,i))},this.directives=new Lo({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:r,afterEmptyLine:i}=vQ(this.prelude);if(r){const s=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!s)e.commentBefore=r;else if(bi(s)&&!s.flow&&s.items.length>0){let o=s.items[0];ci(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${r}
${a}`:r}else{const o=s.commentBefore;s.commentBefore=o?`${r}
${o}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:vQ(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(const i of e)yield*this.next(i);yield*this.end(n,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{const s=Sx(e);s[0]+=n,this.onError(s,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=qtt(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new rm(Sx(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new rm(Sx(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=bS(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new rm(Sx(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),i=new m2(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function Vtt(t,e=!0,n){if(t){const r=(i,s,o)=>{const a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(a,s,o);else throw new rm([a,a+1],s,o)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Xhe(t,e,r);case"block-scalar":return Yhe({options:{strict:e}},t,r)}}return null}function Wtt(t,e){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:s=-1,type:o="PLAIN"}=e,a=mS({type:o,value:t},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(a[0]){case"|":case">":{const u=a.indexOf(`
`),c=a.substring(0,u),f=a.substring(u+1)+`
`,h=[{type:"block-scalar-header",offset:s,indent:r,source:c}];return Zhe(h,l)||h.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:s,indent:r,props:h,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:r,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:r,source:a,end:l};default:return{type:"scalar",offset:s,indent:r,source:a,end:l}}}function Htt(t,e,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:s=!1,type:o}=n,a="indent"in t?t.indent:null;if(r&&typeof a=="number"&&(a+=2),!o)switch(t.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const u=t.props[0];if(u.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=u.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const l=mS({type:o,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":Gtt(t,l);break;case'"':lM(t,l,"double-quoted-scalar");break;case"'":lM(t,l,"single-quoted-scalar");break;default:lM(t,l,"scalar")}}function Gtt(t,e){const n=e.indexOf(`
`),r=e.substring(0,n),i=e.substring(n+1)+`
`;if(t.type==="block-scalar"){const s=t.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=r,t.source=i}else{const{offset:s}=t,o="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:s,indent:o,source:r}];Zhe(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:o,source:`
`});for(const l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:o,props:a,source:i})}}function Zhe(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function lM(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const r=t.props.slice(1);let i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(const s of r)s.offset+=i;delete t.props,Object.assign(t,{type:n,source:e,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:n,source:e,end:[i]});break}default:{const r="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(const s of Object.keys(t))s!=="type"&&s!=="offset"&&delete t[s];Object.assign(t,{type:n,indent:r,source:e,end:i})}}}const Ytt=t=>"type"in t?$E(t):NC(t);function $E(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=$E(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=NC(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=NC(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=NC(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function NC({start:t,key:e,sep:n,value:r}){let i="";for(const s of t)i+=s.source;if(e&&(i+=$E(e)),n)for(const s of n)i+=s.source;return r&&(i+=$E(r)),i}const hN=Symbol("break visit"),Xtt=Symbol("skip children"),ede=Symbol("remove item");function Km(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),tde(Object.freeze([]),t,e)}Km.BREAK=hN;Km.SKIP=Xtt;Km.REMOVE=ede;Km.itemAtPath=(t,e)=>{let n=t;for(const[r,i]of e){const s=n?.[r];if(s&&"items"in s)n=s.items[i];else return}return n};Km.parentCollection=(t,e)=>{const n=Km.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n?.[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function tde(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(const i of["key","value"]){const s=e[i];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){const a=tde(Object.freeze(t.concat([[i,o]])),s.items[o],n);if(typeof a=="number")o=a-1;else{if(a===hN)return hN;a===ede&&(s.items.splice(o,1),o-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}const TD="\uFEFF",OD="",MD="",Q_="",Ktt=t=>!!t&&"items"in t,Qtt=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function Jtt(t){switch(t){case TD:return"<BOM>";case OD:return"<DOC>";case MD:return"<FLOW_END>";case Q_:return"<SCALAR>";default:return JSON.stringify(t)}}function nde(t){switch(t){case TD:return"byte-order-mark";case OD:return"doc-mode";case MD:return"flow-error-end";case Q_:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const Ztt=Object.freeze(Object.defineProperty({__proto__:null,BOM:TD,DOCUMENT:OD,FLOW_END:MD,SCALAR:Q_,createScalarToken:Wtt,isCollection:Ktt,isScalar:Qtt,prettyToken:Jtt,resolveAsScalar:Vtt,setScalarValue:Htt,stringify:Ytt,tokenType:nde,visit:Km},Symbol.toStringTag,{value:"Module"}));function Hu(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const xQ=new Set("0123456789ABCDEFabcdef"),ent=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),i6=new Set(",[]{}"),tnt=new Set(` ,[]{}
\r	`),uM=t=>!t||tnt.has(t);class rde{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){const i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&Hu(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===TD&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,r=e.indexOf("#");for(;r!==-1;){const s=e[r-1];if(s===" "||s==="	"){n=r-1;break}else r=e.indexOf("#",r+1)}for(;;){const s=e[n-1];if(s===" "||s==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield OD,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Hu(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Hu(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Hu(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(uM),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,r=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&Hu(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield MD,yield*this.parseLineStart();let s=0;for(;i[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),i[s]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(uM),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Hu(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let s=0;for(;this.buffer[n-1-s]==="\\";)s+=1;if(s%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const s=this.continueScalar(i+1);if(s===-1)break;i=r.indexOf(`
`,s)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Hu(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let s=this.pos;r=this.buffer[s];++s)switch(r){case" ":n+=1;break;case`
`:e=s,n=0;break;case"\r":{const o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let i=e+1;for(r=this.buffer[i];r===" ";)r=this.buffer[++i];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++i];e=i-1}else if(!this.blockScalarKeep)do{let s=e-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);const a=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+n>a)e=s;else break}while(!0);return yield Q_,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const s=this.buffer[r+1];if(Hu(s)||e&&i6.has(s))break;n=r}else if(Hu(i)){let s=this.buffer[r+1];if(i==="\r"&&(s===`
`?(r+=1,i=`
`,s=this.buffer[r+1]):n=r),s==="#"||e&&i6.has(s))break;if(i===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(e&&i6.has(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Q_,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(uM))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(Hu(n)||e&&i6.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!Hu(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(ent.has(n))n=this.buffer[++e];else if(n==="%"&&xQ.has(this.buffer[e+1])&&xQ.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class ide{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){const s=n+r>>1;this.lineStarts[s]<e?n=s+1:r=s}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}}function Np(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function wQ(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function sde(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function s6(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function iy(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function _Q(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Np(e.start,"explicit-key-ind")&&!Np(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,sde(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class MU{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new rde,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,n))yield*this.next(r);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=nde(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&_Q(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&wQ(i.start)===-1&&(n.indent===0||i.start.every(s=>s.type!=="comment"||s.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{wQ(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=s6(this.peek(2)),r=iy(n);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const r=!this.onKeyLine&&this.indent===e.indent,i=r&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let s=[];if(i&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):i||n.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Np(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(sde(n.key)&&!Np(n.sep,"newline")){const o=iy(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else s.length>0?n.sep=n.sep.concat(s,this.sourceToken):n.sep.push(this.sourceToken);else if(Np(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=iy(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?e.items.push({start:s,key:null,sep:[this.sourceToken]}):Np(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);i||n.value?(e.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Np(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else r&&e.items.push({start:s});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Np(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const r=this.startBlockValue(e);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=s6(r),s=iy(i);_Q(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=s6(e),r=iy(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=s6(e),r=iy(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function ode(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new ide||null,prettyErrors:e}}function nnt(t,e={}){const{lineCounter:n,prettyErrors:r}=ode(e),i=new MU(n?.addNewLine),s=new OU(e),o=Array.from(s.compose(i.parse(t)));if(r&&n)for(const a of o)a.errors.forEach(BE(t,n)),a.warnings.forEach(BE(t,n));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function ade(t,e={}){const{lineCounter:n,prettyErrors:r}=ode(e),i=new MU(n?.addNewLine),s=new OU(e);let o=null;for(const a of s.compose(i.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new rm(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(o.errors.forEach(BE(t,n)),o.warnings.forEach(BE(t,n))),o}function rnt(t,e,n){let r;typeof e=="function"?r=e:n===void 0&&e&&typeof e=="object"&&(n=e);const i=ade(t,n);if(!i)return null;if(i.warnings.forEach(s=>Ehe(i.options.logLevel,s)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function int(t,e,n){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){const{keepUndefined:i}=n??e??{};if(!i)return}return w1(t)&&!r?t.toString(n):new m2(t,r,n).toString(n)}const snt=Object.freeze(Object.defineProperty({__proto__:null,Alias:vD,CST:Ztt,Composer:OU,Document:m2,Lexer:rde,LineCounter:ide,Pair:yo,Parser:MU,Scalar:Kt,Schema:DD,YAMLError:DU,YAMLMap:vl,YAMLParseError:rm,YAMLSeq:L0,YAMLWarning:Hhe,isAlias:eg,isCollection:bi,isDocument:w1,isMap:h2,isNode:_i,isPair:ci,isScalar:Fr,isSeq:d2,parse:rnt,parseAllDocuments:nnt,parseDocument:ade,stringify:int,visit:_1,visitAsync:bD},Symbol.toStringTag,{value:"Module"}));function ont(t){let e=null;try{e=snt.parse(t.doc.toString())}catch{}const n=W$(t,si.YAML);return{data:e,pointers:n}}const lde=t=>{switch(t){case si.JSON:return Pet;case si.JSON5:return Ket;case si.YAML:return ont}};function ant(t){return Object.entries(t)}function uw(t,e){if(typeof t=="string"||typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map(i=>uw(i,e));if(t instanceof Map){const i=new Map;for(const[s,o]of t){const a=s,l=uw(o,e);i.set(a,l)}return i}if(t instanceof Set){const i=new Set;for(const s of t){const o=uw(s,e);i.add(o)}return i}const n={};function r(i,s,o,a){o===i&&a===s?n[o]=uw(s,e):n[o]=a}for(const[i,s]of ant(t)){const o=e(i,s);if(o.length===2&&typeof o[0]=="string")r(i,s,o[0],o[1]);else for(const[a,l]of o)r(i,s,a,l)}return n}var lnt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class unt{constructor(){this.completions=new Map,this.reservedKeys=new Set}reserve(e){this.reservedKeys.add(e)}add(e){this.reservedKeys.has(e.label)||this.completions.set(e.label,e)}}function $w(t){return!(!t||Ao(t)||t.name==="UnknownPropertyError"||t.type==="undefined")}class cnt{constructor(e){var n,r,i;this.opts=e,this.originalSchema=null,this.schema=null,this.laxSchema=null,this.mode=si.JSON,this.mode=(n=e.mode)!==null&&n!==void 0?n:si.JSON,this.parser=(i=(r=this.opts)===null||r===void 0?void 0:r.jsonParser)!==null&&i!==void 0?i:lde(this.mode)}doComplete(e){var n;const r=H$(e.state);if(this.originalSchema!==r&&(this.schema=(n=Bg(r,r))!==null&&n!==void 0?n:r,this.laxSchema=hnt(this.schema)),!this.schema||!this.laxSchema)return[];di.log("xxx","trying with original schema");const i=this.doCompleteForSchema(e,this.schema);return i.options.length!==0?i:(di.log("xxx","no completions with original schema, trying with lax schema"),this.doCompleteForSchema(e,this.laxSchema))}doCompleteForSchema(e,n){var r,i;const s={from:e.pos,to:e.pos,options:[],filter:!1},o=e.state.doc.sliceString(0);let a=M9(e.state,e.pos),l=e.state.sliceDoc(a.from,e.pos).replace(/^(["'])/,"");if(di.log("xxx","node",a,"prefix",l,"ctx",e),!(kC(a,this.mode)||qA(a,this.mode))&&!e.explicit)return di.log("xxx","no completions for non-word/primitive",a),s;const u=Iy(e.state.doc,a),c=Iy(e.state.doc,a,!1);if(a&&(kC(a,this.mode)||qA(a,this.mode)))s.from=a.from,s.to=a.to;else{const p=e.matchBefore(/[A-Za-z0-9._]*/),m=e.pos-u.length;di.log("xxx","overwriteStart after",m,"ctx.pos",e.pos,"word",p,"currentWord",u,"=>",o[m-1],"..",o[m],"..",o),s.from=a.name===Zt.INVALID?(r=p?.from)!==null&&r!==void 0?r:e.pos:m,s.to=e.pos}const f=new unt;let h=!0;const d=XX(a,Zt.PROPERTY_NAME,this.mode);if(d&&(di.log("xxx","closestPropertyNameNode",d,"node",a),a=d),qA(a,this.mode)){di.log("xxx","isPropertyNameNode",a);const p=a.parent;if(p){const m=YX(p,this.mode);h=!m||m.name===Zt.INVALID&&m.from-m.to===0||(m.parent?lS(m.parent).length<=1:!1),di.log("xxx","addValue",h,YX(p,this.mode),a),a=(i=XX(p,Zt.OBJECT,this.mode))!==null&&i!==void 0?i:null}}if(di.log("xxx",a,u,e,"node at pos",M9(e.state,e.pos)),a&&[Zt.OBJECT,Zt.JSON_TEXT].includes(Ui(a.name,this.mode))&&(qA(M9(e.state,e.pos),this.mode)||d)){if(a.from===e.pos)return di.log("xxx","no completions for just before opening brace"),s;this.getPropertyCompletions(n,e,a,f,h,c)}else{const p={},m=this.getValueCompletions(n,e,p,f);di.log("xxx","getValueCompletions res",m)}return s.options=Array.from(f.completions.values()).filter(p=>CC(p.label).startsWith(l)),di.log("xxx","result",s,"prefix",l,"collector.completions",f.completions,"reservedKeys",f.reservedKeys),s}applySnippetCompletion(e){return Nje(typeof e.apply!="string"?e.label:e.apply,e)}getPropertyCompletions(e,n,r,i,s,o){const a=dHe(r,Zt.PROPERTY,this.mode);di.log("xxx","getPropertyCompletions",r,n,a),a.forEach(u=>{const c=Iy(n.state.doc,$F(u,Zt.PROPERTY_NAME,this.mode));i.reserve(CC(c))});const l=this.getSchemas(e,n);di.log("xxx","propertyCompletion schemas",l),l.forEach(u=>{if(typeof u!="object")return;const c=u.properties;c&&Object.entries(c).forEach(([h,d])=>{var p,m;if(typeof d=="object"){const y=(p=d.description)!==null&&p!==void 0?p:"",b=(m=d.type)!==null&&m!==void 0?m:"",v=Array.isArray(b)?b.toString():b,w={label:h,apply:this.getInsertTextForProperty(h,s,o,e,d),type:"property",detail:v,info:()=>uf("div",{inner:vb(y)})};i.add(this.applySnippetCompletion(w))}});const f=u.propertyNames;if(typeof f=="object"&&(f.enum&&f.enum.forEach(h=>{const d=h?.toString();if(d){const p={label:d,apply:this.getInsertTextForProperty(d,s,o,e),type:"property"};i.add(this.applySnippetCompletion(p))}}),f.const)){const h=f.const.toString(),d={label:h,apply:this.getInsertTextForProperty(h,s,o,e),type:"property"};i.add(this.applySnippetCompletion(d))}})}getInsertTextForProperty(e,n,r,i,s){s=s&&Bg(s,i);let o=this.getInsertTextForPropertyName(e,r);if(!n)return o;o+=": ";let a,l=0;if(typeof s=="object"){if(typeof s.default<"u")a||(a=this.getInsertTextForGuessedValue(s.default,"")),l++;else if(s.enum&&(!a&&s.enum.length===1&&(a=this.getInsertTextForGuessedValue(s.enum[0],"")),l+=s.enum.length),typeof s.const<"u"&&(a||(a=this.getInsertTextForGuessedValue(s.const,"")),l++),Array.isArray(s.examples)&&s.examples.length&&(a||(a=this.getInsertTextForGuessedValue(s.examples[0],"")),l+=s.examples.length),a===void 0&&l===0){let u=Array.isArray(s.type)?s.type[0]:s.type;switch(u||(s.properties?u="object":s.items&&(u="array")),u){case"boolean":a="#{}";break;case"string":a=this.getInsertTextForString("");break;case"object":switch(this.mode){case si.JSON5:a="{#{}}";break;case si.YAML:a="#{}";break;default:a="{#{}}";break}break;case"array":a="[#{}]";break;case"number":case"integer":a="#{0}";break;case"null":a="#{null}";break;default:a="#{}";break}}}return(!a||l>1)&&(di.log("xxx","value",a,"nValueProposals",l,s),a="#{}"),o+a}getInsertTextForPropertyName(e,n){switch(this.mode){case si.JSON5:case si.YAML:return n.startsWith('"')?`"${e}"`:n.startsWith("'")?`'${e}'`:e;default:return`"${e}"`}}getInsertTextForString(e,n="#"){switch(this.mode){case si.JSON5:return`'${n}{${e}}'`;case si.YAML:return`${n}{${e}}`;default:return`"${n}{${e}}"`}}getInsertTextForGuessedValue(e,n=""){switch(typeof e){case"object":return e===null?"${null}"+n:this.getInsertTextForValue(e,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),this.getInsertTextForString(r,"$")+n}case"number":case"boolean":return"${"+JSON.stringify(e)+"}"+n}return this.getInsertTextForValue(e,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,n){const r=JSON.stringify(e,null,"	");return r==="{}"?"{#{}}"+n:r==="[]"?"[#{}]"+n:this.getInsertTextForPlainText(r+n)}getValueCompletions(e,n,r,i){let s=fs(n.state).resolveInner(n.pos,-1),o=null,a;if(di.log("xxx","getValueCompletions",s,n),s&&kC(s,this.mode)&&(o=s,s=s.parent),!s){this.addSchemaValueCompletions(e,r,i);return}if(Ui(s.name,this.mode)===Zt.PROPERTY){const u=$F(s,Zt.PROPERTY_NAME,this.mode);u&&(a=Iy(n.state.doc,u),s=s.parent)}if(di.log("xxx","node",s,"parentKey",a),s&&(a!==void 0||Ui(s.name,this.mode)===Zt.ARRAY)){const u=this.getSchemas(e,n);for(const c of u){if(typeof c!="object")return;if(Ui(s.name,this.mode)===Zt.ARRAY&&c.items){let f=i;if(c.uniqueItems&&(f=Object.assign(Object.assign({},f),{add(h){f.completions.has(h.label)||i.add(h)},reserve(h){i.reserve(h)}})),Array.isArray(c.items)){let h=0;if(o){const p=mce(s,o,this.mode);p>=0&&(h=p)}const d=c.items[h];d&&this.addSchemaValueCompletions(d,r,f)}else this.addSchemaValueCompletions(c.items,r,f)}if((c.type==null||c.type!=="object")&&this.addSchemaValueCompletions(c,r,i),a!==void 0){let f=!1;if(c.properties){const h=c.properties[a];h&&(f=!0,this.addSchemaValueCompletions(h,r,i))}if(c.patternProperties&&!f)for(const h of Object.keys(c.patternProperties)){const d=this.extendedRegExp(h);if(d?.test(a)){f=!0;const p=c.patternProperties[h];p&&this.addSchemaValueCompletions(p,r,i)}}if(c.additionalProperties&&!f){const h=c.additionalProperties;this.addSchemaValueCompletions(h,r,i)}}r.boolean&&(this.addBooleanValueCompletion(!0,i),this.addBooleanValueCompletion(!1,i)),r.null&&this.addNullValueCompletion(i)}}return{valuePrefix:o?Iy(n.state.doc,o,!0,!1):""}}addSchemaValueCompletions(e,n,r){typeof e=="object"&&(this.addEnumValueCompletions(e,r),this.addDefaultValueCompletions(e,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)))}addDefaultValueCompletions(e,n,r=0){let i=!1;if(typeof e.default<"u"){let s=e.type,o=e.default;for(let l=r;l>0;l--)o=[o],s="array";const a=Object.assign(Object.assign({type:s?.toString()},this.getAppliedValue(o)),{detail:"Default value"});n.add(a),i=!0}Array.isArray(e.examples)&&e.examples.forEach(s=>{let o=e.type,a=s;for(let l=r;l>0;l--)a=[a],o="array";n.add(Object.assign({type:o?.toString()},this.getAppliedValue(a))),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,n,r+1)}addEnumValueCompletions(e,n){var r,i;if(typeof e.const<"u"&&n.add(Object.assign(Object.assign({type:(r=e.type)===null||r===void 0?void 0:r.toString()},this.getAppliedValue(e.const)),{info:e.description})),Array.isArray(e.enum))for(let s=0,o=e.enum.length;s<o;s++){const a=e.enum[s];n.add(Object.assign(Object.assign({type:(i=e.type)===null||i===void 0?void 0:i.toString()},this.getAppliedValue(a)),{info:e.description}))}}addBooleanValueCompletion(e,n){n.add({type:"boolean",label:e?"true":"false"})}addNullValueCompletion(e){e.add({type:"null",label:"null"})}collectTypes(e,n){if(Array.isArray(e.enum)||typeof e.const<"u")return;const r=e.type;Array.isArray(r)?r.forEach(i=>n[i]=!0):r&&(n[r]=!0)}getSchemas(e,n){var r,i,s;const{data:o}=this.parser(n.state),a=new nfe(e);let l=pce(n.state,n.pos,-1,this.mode);if(l===""&&(l=void 0),l!=null&&l.endsWith("/")){l=l.substring(0,l.length-1);const p=SQ(e,o,l);if(p!=null)return[p]}let u=l?.replace(/\/[^/]*$/,"");u===""&&(u=void 0);const c=SQ(e,o,u),f=l?.split("/").pop(),h=f==null||f in((r=c?.properties)!==null&&r!==void 0?r:{});let d=a.getSchema({pointer:l,data:o??void 0});return!h&&d?.type==="null"&&this.mode==="yaml"&&(d=void 0),di.log("xxxx","draft.getSchema",d,"data",o,"pointer",l,"pointerPointsToKnownProperty",h),Ao(d)&&(d=(i=d.data)===null||i===void 0?void 0:i.schema),!$w(d)&&c?[c]:($w(d)||(d=a.getSchema({pointer:u}),l=u),di.log("xxx","pointer..",JSON.stringify(l)),!$w(d)&&(!l||l==="/")&&(d=(s=Bg(e,e))!==null&&s!==void 0?s:e),di.log("xxx","subSchema..",d),d?Array.isArray(d.allOf)?[d,...d.allOf.map(p=>Bg(p,e))]:Array.isArray(d.oneOf)?[d,...d.oneOf.map(p=>Bg(p,e))]:Array.isArray(d.anyOf)?[d,...d.anyOf.map(p=>Bg(p,e))]:[d]:[])}getAppliedValue(e){const n=CC(JSON.stringify(e));switch(this.mode){case si.JSON5:return{label:n,apply:fHe(JSON.stringify(e))};case si.YAML:return{label:n,apply:n};default:return{label:n,apply:JSON.stringify(e)}}}getValueFromLabel(e){return JSON.parse(e)}extendedRegExp(e){let n="";e.startsWith("(?i)")&&(e=e.substring(4),n="i");try{return new RegExp(e,n+"u")}catch{try{return new RegExp(e,n)}catch{return}}}}function fnt(t={}){const e=new cnt(t);return function(r){return e.doComplete(r)}}function hnt(t){return uw(t,(e,n)=>e==="additionalProperties"&&n===!1?[]:e==="required"&&Array.isArray(n)?[]:e==="unevaluatedProperties"&&n===!1?[]:e==="unevaluatedItems"&&n===!1?[]:[e,n])}function SQ(t,e,n){const r=new nfe(t),i=r.getSchema({pointer:n,data:e??void 0});if(!$w(i))return;const s=ude(r,i),o={};for(let h of s){let d=pnt(n,h);const p=r.getSchema({pointer:d,data:e??void 0});$w(p)&&Object.assign(o,{[h]:p})}if(s.length===0||Object.keys(o).length===0)return;const a=i,{allOf:l,anyOf:u,oneOf:c}=a,f=lnt(a,["allOf","anyOf","oneOf"]);return Object.assign(Object.assign({},f),{properties:o})}function ude(t,e){if(e=Bg(e,t.rootSchema),typeof e!="object"||e==null)return[];const n=[];function r(i){const s=ude(t,i);n.push(...s)}if(typeof e.properties=="object"&&e.properties!=null&&n.push(...Object.keys(e.properties)),typeof e.then=="object"&&e.then!=null&&r(e.then),Array.isArray(e.allOf))for(const i of e.allOf)r(i);if(Array.isArray(e.anyOf))for(const i of e.anyOf)r(i);if(Array.isArray(e.oneOf))for(const i of e.oneOf)r(i);return n}function Bg(t,e){if(typeof t=="object"&&t.$ref){const n=dnt(e,t.$ref);if(typeof n=="object"){const r=Object.assign(Object.assign({},t),n);return Reflect.deleteProperty(r,"$ref"),r}}return t}function dnt(t,e){const n=e.split("/");let r=t;return n.forEach(i=>{if(i){if(i==="#"){r=t;return}typeof r=="object"&&(r=r[i])}}),r}function pnt(t,e){return t===void 0?`/${e}`:`${t}/${e}`}const J_=(t,e)=>{const n=t.length>2;let r=t.map((i,s)=>{const o="`"+(e?e(i):i)+"`";return s===t.length-1?"or "+o:o});return n?r.join(", "):r.join(" ")},gnt=t=>{var e,n,r;return!((e=t?.data)===null||e===void 0)&&e.pointer&&((n=t?.data)===null||n===void 0?void 0:n.pointer)!=="#"?t.data.pointer.slice(1):!((r=t?.data)===null||r===void 0)&&r.property?`/${t.data.property}`:""},mnt=t=>t.startState.field(pE)!==t.state.field(pE);function ynt(t){const e=new vnt(t);return n=>e.doValidation(n)}const bnt=["NoAdditionalPropertiesError","RequiredPropertyError","InvalidPropertyNameError","ForbiddenPropertyError","UndefinedValueError"];class vnt{constructor(e){var n,r,i,s;this.options=e,this.schema=null,this.mode=si.JSON,this.rewriteError=o=>{var a,l,u,c,f;const h=o?.data,d=h?.errors;return o.code==="one-of-error"&&d?.length?`Expected one of ${J_(d,m=>m.data.expected)}`:o.code==="type-error"?`Expected \`${!((a=o?.data)===null||a===void 0)&&a.expected&&Array.isArray((l=o?.data)===null||l===void 0?void 0:l.expected)?J_((u=o?.data)===null||u===void 0?void 0:u.expected):(c=o?.data)===null||c===void 0?void 0:c.expected}\` but received \`${(f=o?.data)===null||f===void 0?void 0:f.received}\``:o.message.replaceAll("in `#` ","").replaceAll("at `#`","").replaceAll("/",".").replaceAll("#.","")},this.mode=(r=(n=this.options)===null||n===void 0?void 0:n.mode)!==null&&r!==void 0?r:si.JSON,this.parser=(s=(i=this.options)===null||i===void 0?void 0:i.jsonParser)!==null&&s!==void 0?s:lde(this.mode)}get schemaTitle(){var e,n,r;return(r=(n=(e=this.schema)===null||e===void 0?void 0:e.getSchema())===null||n===void 0?void 0:n.title)!==null&&r!==void 0?r:"json-schema"}doValidation(e){const n=H$(e.state);if(!n)return[];if(this.schema=new efe(n),!this.schema)return[];const r=e.state.doc.toString();if(!r?.length)return[];const i=this.parser(e.state);if(i.data==null)return[];let s=[];try{s=this.schema.validate(i.data)}catch{}return di.log("xxx","validation errors",s,i.data),s.length?s.reduce((o,a)=>{const l=()=>{const f=this.rewriteError(a);o.push({from:0,to:0,message:f,severity:"error",source:this.schemaTitle,renderMessage:()=>{const h=uf("div",{});return h.innerHTML=vb(f),h}})},u=gnt(a),c=i.pointers.get(u);if(a.name==="MaxPropertiesError"||a.name==="MinPropertiesError"||u==="")l();else if(c){const f=bnt.includes(a.name),h=this.rewriteError(a),d=f?c.keyFrom:c.valueFrom,p=f?c.keyTo:c.valueTo;p!==void 0&&d!==void 0&&o.push({from:d,to:p,message:h,renderMessage:()=>{const m=uf("div",{});return m.innerHTML=vb(h),m},severity:"error",source:this.schemaTitle})}else l();return o},[]):[]}}function xnt(t){const e=new wnt(t);return async function(r,i,s){return e.doHover(r,i,s)}}function AQ(t){if(t.type)return t.$ref?`${t.$ref} (${t.type})`:t.type;if(t.$ref)return`${t.$ref}`}function cM(t,e,n){return`${e}: ${J_(t[e].map(r=>{try{const{data:i}=n.resolveRef({data:r,pointer:r.$ref});return AQ(i||r)}catch{return r.type}}))}`}class wnt{constructor(e){var n,r;this.opts=e,this.schema=null,this.mode=si.JSON,this.opts=Object.assign({parser:JSON.parse},this.opts),this.mode=(r=(n=this.opts)===null||n===void 0?void 0:n.mode)!==null&&r!==void 0?r:si.JSON}getDataForCursor(e,n,r){const i=H$(e.state);if(!i)return null;this.schema=new efe(i);const s=pce(e.state,n,r,this.mode);let o;try{o=this.opts.parser(e.state.doc.toString())}catch{}if(!s)return null;let a=this.schema.getSchema({pointer:s,data:o,withSchemaWarning:!0});return Ao(a)&&(a?.data.schema.$ref?a=this.schema.resolveRef(a):a=a?.data.schema),{schema:a,pointer:s}}formatMessage(e){const{message:n,typeInfo:r}=e;return n?uf("div",{class:"cm6-json-schema-hover"},[uf("div",{class:"cm6-json-schema-hover--description",inner:vb(n,!1)}),uf("div",{class:"cm6-json-schema-hover--code-wrapper"},[uf("div",{class:"cm6-json-schema-hover--code",inner:vb(r,!1)})])]):uf("div",{class:"cm6-json-schema-hover"},[uf("div",{class:"cm6-json-schema-hover--code-wrapper"},[uf("code",{class:"cm6-json-schema-hover--code",inner:vb(r,!1)})])])}getHoverTexts(e,n){let r="",i=null;const{schema:s}=e;return s.oneOf&&(r=cM(s,"oneOf",n)),s.anyOf&&(r=cM(s,"anyOf",n)),s.allOf&&(r=cM(s,"allOf",n)),s.type&&(r=Array.isArray(s.type)?J_(s.type):s.type),s.$ref&&(r=` Reference: ${s.$ref}`),s.enum&&(r=`\`enum\`: ${J_(s.enum)}`),s.format&&(r+=`\`format\`: ${s.format}`),s.pattern&&(r+=`\`pattern\`: ${s.pattern}`),s.description&&(i=s.description),{message:i,typeInfo:r}}async doHover(e,n,r){var i,s,o,a;const l=n,u=n;try{const c=this.getDataForCursor(e,n,r);if(di.log("cursorData",c),!c?.schema)return null;const h=((s=(i=this.opts)===null||i===void 0?void 0:i.getHoverTexts)!==null&&s!==void 0?s:this.getHoverTexts)(c,this.schema),p=((a=(o=this.opts)===null||o===void 0?void 0:o.formatHover)!==null&&a!==void 0?a:this.formatMessage)(h);return{pos:l,end:u,arrow:!0,above:!0,create:m=>({dom:p})}}catch(c){return di.log(c),null}}}function _nt(t){return[Net(),LX(Ret()),LX(ynt(),{needsRefresh:mnt}),che.data.of({autocomplete:fnt()}),Ile(xnt()),mHe(t)]}function Snt(){return[nze(),sze(),SUe(),sqe(),hUe(),yUe(),Wn.allowMultipleSelections.of(!0),Nze(),Yle($ze,{fallback:!0}),Hze(),Pje(),Yje(),NUe(),BUe(),TUe(),kWe(),Ke.domEventHandlers({keydown(t){t.stopPropagation()}}),Z8.of([...zje,...lVe,...WWe,...pqe,...uue,...dWe,{key:"Tab",preventDefault:!0,run:sVe},{key:"Shift-Tab",preventDefault:!0,run:jue}])]}function Ant(t,e){const n=Ke.theme({"&.cm-editor":{height:"100%"},".cm-scroller":{overflow:"auto"},"&.cm-focused":{outline:"none"},".cm-tooltip":{boxShadow:e.colorScheme=="light"?"0 2px 5px rgba(0,0,0,0.2)":"0 2px 5px rgba(0,0,0,1)"},".cm6-json-schema-hover":{padding:"6px"}}),r=Ke.updateListener.of(o=>{if(o.docChanged&&e.onChange){const a=o.state.doc.toString();e.onChange(a)}}),i=[];if(e.language=="json"&&i.push(_nt(e.json?.schema??{})),e.language=="sql"){let o=e.sql?.table,a=e.sql?.columns;i.push(iWe({dialect:sWe,upperCaseKeywords:!0,schema:o!=null?{[o]:a?.map(l=>({label:l.name,detail:l.type,type:"property"}))??[]}:void 0,defaultTable:o}))}const s=new Ke({doc:e.initialText,parent:t,extensions:[...Snt(),$Ue({parent:t.parentElement}),...i,...e.colorScheme=="dark"?[sHe]:[],n,r]});return{set:o=>{s.dispatch({changes:{from:0,to:s.state.doc.length,insert:o}})},destroy:()=>{s.destroy()}}}var Cnt=xe('<div><div class="rounded-md overflow-hidden border border-slate-200 dark:border-slate-600 w-full h-full"></div></div>');function IU(t,e){ot(e,!0);let n=Ts(e,["$$slots","$$events","$$legacy"]),r;Tl(()=>{let o=wo(()=>e.value)??"",a=Ant(r,{language:e.language??"plain",colorScheme:e.colorScheme??"light",initialText:wo(()=>e.value)??"",json:e.json,sql:e.sql,onChange:l=>{o=l,e.onChange?.(l)}});return Bt(()=>{e.value!=null&&e.value!=o&&(o=n.value,a.set(o))}),()=>{a.destroy()}});var i=Cnt(),s=ne(i);za(s,o=>r=o,()=>r),Z(i),Ne(()=>wr(i,1,_8(e.class??""))),te(t,i),at()}var knt=xe('<div class="w-full h-full flex flex-col gap-2"><!> <div class="flex-none flex gap-2 items-center"><button>Confirm</button> <div class="flex-1 w-0 overflow-hidden text-nowrap text-ellipsis"> </div></div></div>');function Ent(t,e){ot(e,!0);let n=De(void 0),r=J(()=>k(n)?.spec!==void 0);function i(d){try{return{spec:JSON.parse(d)}}catch(p){return{message:p.message?.toString()}}}function s(){k(n)&&k(n).spec!=null&&e.onSpecChange?.(k(n).spec)}var o=knt(),a=ne(o);{let d=J(()=>JSON.stringify(e.spec,null,2));IU(a,{class:"w-full flex-1 min-h-0",get colorScheme(){return e.colorScheme},language:"json",get value(){return k(d)},onChange:p=>{ae(n,i(p),!0)}})}var l=pe(a,2),u=ne(l);let c;u.__click=s;var f=pe(u,2),h=ne(f,!0);Z(f),Z(l),Z(o),Ne(()=>{c=wr(u,1,"flex-none px-2 h-8 w-24 rounded-md text-white text-sm",null,c,{"bg-blue-500":k(r),"bg-gray-300":!k(r),"dark:text-gray-500":!k(r),"dark:bg-gray-700":!k(r)}),u.disabled=!k(r),ue(f,"title",k(n)?.message??""),pt(h,k(n)?.message??"")}),te(t,o),at()}ti(["click"]);var Dnt=xe('<span class="mx-1"> </span>'),Tnt=xe("<button><!> <!></button>");function o6(t,e){ot(e,!0);let n=gt(e,"label",3,null),r=gt(e,"icon",3,null),i=gt(e,"title",3,""),s=gt(e,"order",3,null);var o=Tnt();o.__click=()=>{e.onClick?.()};let a;var l=ne(o);{var u=h=>{const d=J(r);var p=kn(),m=Ye(p);m0(m,()=>k(d),(y,b)=>{b(y,{class:"w-4 h-4"})}),te(h,p)};Le(l,h=>{r()!=null&&h(u)})}var c=pe(l,2);{var f=h=>{var d=Dnt(),p=ne(d,!0);Z(d),Ne(()=>pt(p,n())),te(h,d)};Le(c,h=>{n()!=null&&n()!=""&&h(f)})}Z(o),Ne(()=>{wr(o,1,`rounded-md flex select-none items-center px-1 py-1 text-slate-500 bg-slate-100 dark:text-slate-400 dark:bg-slate-800 focus-visible:outline-2 outline-blue-600 -outline-offset-1 ${e.class??""??""}`),ue(o,"title",i()),a=Nt(o,"",a,{order:s()})}),te(t,o),at()}ti(["click"]);var Ont=an('<svg><path fill="currentColor" d="M3.2 5.74a.75.75 0 0 1 1.06-.04L8 9.227L11.74 5.7a.75.75 0 1 1 1.02 1.1l-4.25 4a.75.75 0 0 1-1.02 0l-4.25-4a.75.75 0 0 1-.04-1.06"></path></svg>');function CQ(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Ont();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Mnt=an('<svg><path fill="currentColor" d="M3.2 10.26a.75.75 0 0 0 1.06.04L8 6.773l3.74 3.527a.75.75 0 1 0 1.02-1.1l-4.25-4a.75.75 0 0 0-1.02 0l-4.25 4a.75.75 0 0 0-.04 1.06"></path></svg>');function kQ(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Mnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Int=an('<svg><path fill="currentColor" d="M2.75 2a.75.75 0 0 1 .75.75v12.5c0 .69.56 1.25 1.25 1.25h12.5a.75.75 0 0 1 0 1.5H4.75A2.75 2.75 0 0 1 2 15.25V2.75A.75.75 0 0 1 2.75 2M10 7.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m4.5.5a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5m.5 4.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0"></path></svg>');function Rnt(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Int();Ul(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Fnt=an('<svg><path fill="currentColor" d="m2.397 2.554l.073-.084a.75.75 0 0 1 .976-.073l.084.073L8 6.939l4.47-4.47a.75.75 0 1 1 1.06 1.061L9.061 8l4.47 4.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L8 9.061l-4.47 4.47a.75.75 0 0 1-1.06-1.061L6.939 8l-4.47-4.47a.75.75 0 0 1-.072-.976l.073-.084z"></path></svg>');function ID(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Fnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Nnt=an('<svg><path fill="currentColor" d="M9 1H6a2 2 0 0 0-2 2v2.205a5.5 5.5 0 0 1 4.666 9.791H12a2 2 0 0 0 2-2V6.001h-3.5A1.5 1.5 0 0 1 9 4.5zm4.997 4h-3.498a.5.5 0 0 1-.5-.5V1h.01zM10 10.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4.854 2.353l.003.003a.5.5 0 0 0 .348.144h.006a.5.5 0 0 0 .35-.146l2-2a.5.5 0 0 0-.707-.708L6 11.293V8.5a.5.5 0 0 0-1 0v2.793l-1.146-1.147a.5.5 0 0 0-.708.708z"></path></svg>');function EQ(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Nnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Lnt=an('<svg><path fill="currentColor" d="M10.529 1.764a2.621 2.621 0 1 1 3.707 3.707l-.779.779L9.75 2.543zM9.043 3.25L2.657 9.636a2.96 2.96 0 0 0-.772 1.354l-.87 3.386a.5.5 0 0 0 .61.608l3.385-.869a2.95 2.95 0 0 0 1.354-.772l6.386-6.386z"></path></svg>');function cde(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Lnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Pnt=an('<svg><path fill="currentColor" d="M2 6a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3zm3-2a2 2 0 0 0-2 2v5h14V6a2 2 0 0 0-2-2z"></path></svg>');function Bnt(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Pnt();Ul(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),te(t,r)}var $nt=an('<svg><path fill="currentColor" d="M15 3a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3zM5 4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h6.5V4z"></path></svg>');function Unt(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=$nt();Ul(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),te(t,r)}var znt=an('<svg><path fill="currentColor" d="M10.823 11.883a5.5 5.5 0 1 1 1.06-1.06l2.897 2.897a.75.75 0 1 1-1.06 1.06zM11.5 7.5a4 4 0 1 0-8 0a4 4 0 0 0 8 0"></path></svg>');function jnt(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=znt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var qnt=an('<svg><path fill="currentColor" d="M2.267 6.153A6 6 0 0 1 3.53 3.98a.36.36 0 0 1 .382-.095l1.36.484a.71.71 0 0 0 .935-.538l.26-1.416a.35.35 0 0 1 .274-.282a6.1 6.1 0 0 1 2.52 0c.14.03.248.141.274.282l.26 1.416a.708.708 0 0 0 .935.538l1.36-.484a.36.36 0 0 1 .382.095a6 6 0 0 1 1.262 2.173a.35.35 0 0 1-.108.378l-1.102.931a.703.703 0 0 0 0 1.076l1.102.931c.11.093.152.242.108.378a6 6 0 0 1-1.262 2.173a.36.36 0 0 1-.382.095l-1.36-.484a.71.71 0 0 0-.935.538l-.26 1.416a.35.35 0 0 1-.275.282a6.1 6.1 0 0 1-2.519 0a.35.35 0 0 1-.275-.282l-.259-1.416a.708.708 0 0 0-.935-.538l-1.36.484a.36.36 0 0 1-.382-.095a6 6 0 0 1-1.262-2.173a.35.35 0 0 1 .108-.378l1.102-.931a.704.704 0 0 0 0-1.076l-1.102-.931a.35.35 0 0 1-.108-.378M6.25 8a1.75 1.75 0 1 0 3.5 0a1.75 1.75 0 0 0-3.5 0"></path></svg>');function fde(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=qnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Vnt=an('<svg><path fill="currentColor" d="M7.456 2a6 6 0 1 1-5.406 8.605a.5.5 0 0 1 .36-.71c1.276-.231 3.278-.937 4.078-3.07c.563-1.5.512-3.015.283-4.23a.5.5 0 0 1 .475-.591Q7.35 2 7.456 2"></path></svg>');function Wnt(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Vnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Hnt=an('<svg><path fill="currentColor" d="M8 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 8 1m0 10a3 3 0 1 0 0-6a3 3 0 0 0 0 6m6.5-2.5a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1zM8 13a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 8 13M2.5 8.5a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1zm.646-5.354a.5.5 0 0 1 .708 0l1 1a.5.5 0 1 1-.708.708l-1-1a.5.5 0 0 1 0-.708m.708 9.708a.5.5 0 1 1-.708-.707l1-1a.5.5 0 0 1 .708.707zm9-9.708a.5.5 0 0 0-.708 0l-1 1a.5.5 0 0 0 .708.708l1-1a.5.5 0 0 0 0-.708m-.708 9.708a.5.5 0 0 0 .708-.707l-1-1a.5.5 0 0 0-.708.707z"></path></svg>');function Gnt(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=Hnt();Ul(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),te(t,r)}var Ynt=xe('<div class="text-sm pr-0.5"><!></div>'),Xnt=xe('<div class="text-sm pr-0.5"><!></div>'),Knt=xe('<div class="h-64"><div class="w-full h-64 p-2"><!></div></div>'),Qnt=xe('<div class="px-2 pt-2 flex items-center"><button class="font-mono font-medium py-0.5 text-left flex flex-1 mr-2 overflow-hidden items-center"><!> <div class="flex-1 whitespace-nowrap overflow-hidden text-ellipsis"> </div></button> <div class="flex-none flex gap-1 sm:opacity-0 group-hover:opacity-100 pr-0.5"><!> <!> <!> <!></div></div> <div><div class="overflow-hidden"><!> <!></div></div>',1);function DQ(t,e){ot(e,!0);let n=De(!1);var r=Qnt(),i=Ye(r),s=ne(i);s.__click=()=>e.onIsVisibleChange?.(!e.isVisible);var o=ne(s);{var a=M=>{var I=Ynt(),N=ne(I);kQ(N,{}),Z(I),te(M,I)},l=M=>{var I=Xnt(),N=ne(I);CQ(N,{}),Z(I),te(M,I)};Le(o,M=>{e.isVisible?M(a):M(l,!1)})}var u=pe(o,2),c=ne(u,!0);Z(u),Z(s);var f=pe(s,2),h=ne(f);{var d=M=>{o6(M,{get icon(){return cde},title:"Edit spec",onClick:()=>ae(n,!k(n))})};Le(h,M=>{e.onSpecChange&&M(d)})}var p=pe(h,2);{var m=M=>{o6(M,{get icon(){return kQ},title:"Move up",get onClick(){return e.onUp}})};Le(p,M=>{e.onUp&&M(m)})}var y=pe(p,2);{var b=M=>{o6(M,{get icon(){return CQ},title:"Move down",get onClick(){return e.onDown}})};Le(y,M=>{e.onDown&&M(b)})}var v=pe(y,2);{var w=M=>{o6(M,{get icon(){return ID},title:"Close",onClick:()=>e.onRemove()})};Le(v,M=>{e.onRemove&&M(w)})}Z(f),Z(i);var _=pe(i,2);let S;var A=ne(_),C=ne(A);Bd(C,()=>e.chartView,()=>({id:e.id,width:"container"}));var D=pe(C,2);{var T=M=>{var I=Knt(),N=ne(I),P=ne(N);Ent(P,{get spec(){return e.spec},get colorScheme(){return e.colorScheme},onSpecChange:O=>{e.onSpecChange(O),ae(n,!1)}}),Z(N),Z(I),jx(3,I,()=>tw),te(M,I)};Le(D,M=>{k(n)&&e.onSpecChange&&M(T)})}Z(A),Z(_),Ne(()=>{pt(c,e.spec.title),S=Nt(_,"",S,{display:"grid","grid-template-rows":e.isVisible?"1fr":"0fr",transition:"grid-template-rows 300ms ease-in-out"})}),te(t,r),at()}ti(["click"]);function Jnt(t){switch(t.type){case"embedding":return"embedding";case"table":return"table";default:return"chart"}}function hde(t){let e={embedding:[],table:[],chart:[]};for(let n in t){let r=Jnt(t[n]);r!=null&&e[r].push(n)}return e}var Znt=xe('<div class="flex-1 overflow-hidden rounded-md"><!></div>'),ert=xe('<div class="flex flex-row gap-2 flex-1 overflow-hidden"></div>'),trt=xe('<div class="flex-1 h-full overflow-hidden rounded-md"><!></div>'),nrt=xe("<div></div>"),rrt=xe('<div class="flex-1 flex flex-col overflow-hidden"><!> <!> <!></div>'),irt=xe('<div class="bg-white dark:bg-black rounded-md flex flex-col gap-2 group"><!></div>'),srt=xe('<div class="h-full overflow-x-hidden overflow-y-scroll"><div class="flex flex-row flex-wrap gap-2"><button class="bg-white dark:bg-black rounded-md flex flex-col justify-center items-center gap-2 p-2 w-full text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100">+ Add</button> <!></div></div>'),ort=xe("<!> <!> <!>",1),art=xe('<div class="bg-white dark:bg-black rounded-md flex flex-col gap-2 group"><!></div>'),lrt=xe('<div class="w-full h-full overflow-y-scroll flex flex-col gap-2"></div>'),urt=xe('<div class="w-full h-full flex flex-row"><!></div>');function crt(t,e){ot(e,!0);const n=()=>Ds(s,"$colorScheme",r),[r,i]=aa();let{colorScheme:s}=e.context,o=De(100),a=De(100),l=De(300),u=De(400),c=J(PG(()=>hde(e.charts))),f=J(()=>k(o)<500),h=J(()=>k(c).embedding.length>0&&(e.state.showEmbedding??!0)),d=J(()=>k(c).table.length>0&&(e.state.showTable??!0)),p=J(()=>e.state.showCharts??!0);function m(C,D){let M=Math.round((C+7)/(D+7)),I,N;for(let P=Math.max(1,M-1);P<=Math.max(1,M+1);P++){let O=(C-7*(P-1))/P,R=Math.abs(O-D);(I==null||R<I)&&(I=R,N=O)}return Math.floor((N??400)*2)/2}let y=J(PG(()=>{let C=e.state.chartsOrder??[],D=k(c).chart.slice();return D.sort((T,M)=>{let I=C.indexOf(T),N=C.indexOf(M);return I==-1&&(I=D.length),N==-1&&(N=D.length),I-N}),D}));function b(C,D){let T=[...k(y)],M=T.indexOf(C);if(M==-1)return;let I=M+D;I<0||I>=T.length||([T[M],T[I]]=[T[I],T[M]],e.onStateChange({chartsOrder:T}))}function v(C){e.onChartsChange({[C]:void 0}),e.onChartStatesChange({[C]:void 0})}var w=urt(),_=ne(w);{var S=C=>{var D=ort(),T=Ye(D);{var M=R=>{var L=rrt(),B=ne(L);{var z=Y=>{var se=ert();hn(se,20,()=>k(c).embedding,he=>he,(he,be)=>{var fe=Znt(),me=ne(fe);Bd(me,()=>e.chartView,()=>({id:be,width:"container",height:"container"})),Z(fe),te(he,fe)}),Z(se),te(Y,se)};Le(B,Y=>{k(h)&&Y(z)})}var U=pe(B,2);{var V=Y=>{{let se=J(()=>k(a)-100);UG(Y,{class:"h-2 flex-none",axis:"y",min:100,get max(){return k(se)},scaler:-1,get value(){return k(l)},onChange:he=>ae(l,he,!0)})}};Le(U,Y=>{k(h)&&k(d)&&Y(V)})}var W=pe(U,2);{var H=Y=>{var se=nrt();let he;hn(se,20,()=>k(c).table,be=>be,(be,fe)=>{var me=trt(),K=ne(me);Bd(K,()=>e.chartView,()=>({id:fe,width:"container",height:"container"})),Z(me),te(be,me)}),Z(se),Ne(()=>{wr(se,1,_8(k(h)?"flex-none":"flex-1")),he=Nt(se,"",he,{height:k(h)?`${k(l)}px`:null})}),jx(3,se,()=>tw),te(Y,se)};Le(W,Y=>{k(d)&&Y(H)})}Z(L),te(R,L)};Le(T,R=>{(k(h)||k(d))&&R(M)})}var I=pe(T,2);{var N=R=>{{let L=J(()=>k(o)-100);UG(R,{class:"w-2 flex-none",axis:"x",min:100,get max(){return k(L)},scaler:-1,get value(){return k(u)},onChange:B=>ae(u,B,!0)})}};Le(I,R=>{(k(h)||k(d))&&k(p)&&R(N)})}var P=pe(I,2);{var O=R=>{const L=J(()=>k(h)||k(d)?k(u):k(o));var B=srt();let z;var U=ne(B);let V;var W=ne(U);W.__click=()=>{let Y=aBe(e.charts);e.onChartsChange({[Y]:{type:"builder",title:"New"}}),e.onStateChange({chartsOrder:[Y,...k(y)]})};var H=pe(W,2);hn(H,26,()=>k(y),Y=>Y,(Y,se,he)=>{const be=J(()=>e.charts[se]),fe=J(()=>e.state.chartVisibility?.[se]??!0);var me=irt();let K;var de=ne(me);{let ge=J(()=>v.bind(null,se)),oe=J(()=>k(he)>0?b.bind(null,se,-1):void 0),Fe=J(()=>k(he)+1<k(y).length?b.bind(null,se,1):void 0);DQ(de,{get id(){return se},get spec(){return k(be)},onIsVisibleChange:Ce=>{e.onStateChange({chartVisibility:{[se]:Ce}})},get isVisible(){return k(fe)},get colorScheme(){return n()},get chartView(){return e.chartView},get onRemove(){return k(ge)},get onUp(){return k(oe)},get onDown(){return k(Fe)},onSpecChange:Ce=>{e.onChartsChange({[se]:void 0}),e.onChartStatesChange({[se]:void 0}),e.onChartsChange({[se]:Ce})}})}Z(me),Ne(ge=>K=Nt(me,"",K,ge),[()=>({width:`${m(k(L),500)??""}px`})]),UH(me,()=>$G,()=>({duration:300})),jx(2,me,()=>tw),te(Y,me)}),Z(U),Z(B),Ne(()=>{z=Nt(B,"",z,{width:`${k(L)??""}px`}),V=Nt(U,"",V,{width:`${k(L)??""}px`})}),jx(3,B,()=>tw,()=>({axis:"x"})),te(R,B)};Le(P,R=>{k(p)&&R(O)})}te(C,D)},A=C=>{var D=lrt();hn(D,30,()=>k(c).embedding.concat(k(y),k(c).table),T=>T,(T,M)=>{const I=J(()=>e.state.chartVisibility?.[M]??!0),N=J(()=>k(y).indexOf(M));var P=art(),O=ne(P);{let R=J(()=>v.bind(null,M)),L=J(()=>k(N)>0?b.bind(null,M,-1):void 0),B=J(()=>k(N)!=-1&&k(N)+1<k(y).length?b.bind(null,M,1):void 0);DQ(O,{get id(){return M},get spec(){return e.charts[M]},onIsVisibleChange:z=>{e.onStateChange({chartVisibility:{[M]:z}})},get isVisible(){return k(I)},get colorScheme(){return n()},get chartView(){return e.chartView},get onRemove(){return k(R)},get onUp(){return k(L)},get onDown(){return k(B)}})}Z(P),UH(P,()=>$G,()=>({duration:300})),jx(2,P,()=>tw),te(T,P)}),Z(D),te(C,D)};Le(_,C=>{k(f)?C(A,!1):C(S)})}Z(w),dc(w,"clientWidth",C=>ae(o,C)),dc(w,"clientHeight",C=>ae(a,C)),te(t,w),at(),i()}ti(["click"]);var frt=xe('<span class="flex h-5 items-center"> </span>'),hrt=xe("<button><!> <!></button>");function LC(t,e){ot(e,!0);let n=gt(e,"title",3,""),r=gt(e,"checked",15),i=gt(e,"label",3,null),s=gt(e,"icon",3,null);var o=hrt();let a;o.__click=()=>{r(!r())};var l=ne(o);{var u=h=>{const d=J(s);var p=kn(),m=Ye(p);m0(m,()=>k(d),(y,b)=>{b(y,{class:"w-5 h-5"})}),te(h,p)};Le(l,h=>{s()!=null&&h(u)})}var c=pe(l,2);{var f=h=>{var d=frt(),p=ne(d,!0);Z(d),Ne(()=>pt(p,i())),te(h,d)};Le(c,h=>{i()!=null&&h(f)})}Z(o),Ne(()=>{a=wr(o,1,"rounded-md px-1.5 py-1.5 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 flex select-none items-center focus-visible:outline-2 outline-blue-600 -outline-offset-1",null,a,{"text-slate-400":!r(),"dark:text-slate-500":!r()}),ue(o,"title",n())}),te(t,o),at()}ti(["click"]);var drt=xe("<!> <!> <!>",1);function TQ(t,e){ot(e,!0);let n=J(()=>hde(e.charts));var r=drt(),i=Ye(r);{var s=h=>{var d=()=>e.state.showEmbedding??!0,p=m=>{e.onStateChange({showEmbedding:m})};LC(h,{get icon(){return Rnt},title:"Show / hide embedding",get checked(){return d()},set checked(m){p(m)}})};Le(i,h=>{k(n).embedding.length>0&&h(s)})}var o=pe(i,2),a=()=>e.state.showTable??!0,l=h=>{e.onStateChange({showTable:h})};LC(o,{get icon(){return Bnt},title:"Show / hide table",get checked(){return a()},set checked(h){l(h)}});var u=pe(o,2),c=()=>e.state.showCharts??!0,f=h=>{e.onStateChange({showCharts:h})};LC(u,{get icon(){return Unt},title:"Show / hide charts",get checked(){return c()},set checked(h){f(h)}}),te(t,r),at()}const _b={list:[crt,TQ],grid:[rBe,TQ]};function prt(t){return _b[t]==null?_b.list[0]:_b[t][0]}function grt(t){return _b[t]==null?_b.list[1]:_b[t][1]}function mrt(t,e){ot(e,!0);let n=J(()=>grt(e.layout)),r=J(()=>e.layoutStates[e.layout]??{});function i(u,c="merge"){Qb(e.charts,u,c,f=>e.onChartsChange?.(f))}function s(u,c="merge"){Qb(e.chartStates,u,c,f=>e.onChartStatesChange?.(f))}function o(u,c,f="merge"){uC(e.layoutStates,u,c,f,h=>e.onLayoutStatesChange?.(h))}var a=kn(),l=Ye(a);{let u=J(()=>o.bind(null,e.layout));m0(l,()=>k(n),(c,f)=>{f(c,{get context(){return e.context},get charts(){return e.charts},get state(){return k(r)},get onStateChange(){return k(u)},onChartsChange:i,onChartStatesChange:s})})}te(t,a),at()}var yrt=xe("<div><!></div>");function tg(t,e){let n=gt(e,"defaultWidth",3,null),r=gt(e,"defaultHeight",3,null),i=gt(e,"scrollX",3,!1),s=gt(e,"scrollY",3,!1),o=J(()=>e.width!=null?e.width:i()?void 0:n()),a=J(()=>e.height!=null?e.height:s()?void 0:r());var l=yrt();let u;var c=ne(l);Bd(c,()=>e.children),Z(l),Ne(()=>{wr(l,1,`p-2 ${e.class??""??""}`),u=Nt(l,"",u,{width:k(o)!=null?`${k(o)}px`:void 0,height:k(a)!=null?`${k(a)}px`:void 0,"overflow-x":i()&&e.width!=null?"auto":void 0,"overflow-y":s()&&e.height!=null?"auto":void 0})}),te(t,l)}var brt=xe("<div><!></div>");function vS(t,e){let n=De(300),r=De(200),i=gt(e,"flexHeight",3,!0),s=gt(e,"defaultHeight",3,200);var o=brt();let a;var l=ne(o);Bd(l,()=>e.children??An,()=>k(n),()=>k(r)),Z(o),Ne(()=>{wr(o,1,_8(i()?"flex-1 min-h-0":void 0)),a=Nt(o,"",a,{"user-select":"none",position:"relative",height:i()?void 0:`${s()}px`})}),dc(o,"clientWidth",u=>ae(n,u)),dc(o,"clientHeight",u=>ae(r,u)),te(t,o)}function vrt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function UE(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function hv(t){return t=UE(Math.abs(t)),t?t[1]:NaN}function xrt(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function wrt(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _rt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Z_(t){if(!(e=_rt.exec(t)))throw new Error("invalid format: "+t);var e;return new RU({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Z_.prototype=RU.prototype;function RU(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}RU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Srt(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var dde;function Art(t,e){var n=UE(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(dde=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+UE(t,Math.max(0,e+s-1))[0]}function OQ(t,e){var n=UE(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const MQ={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:vrt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>OQ(t*100,e),r:OQ,s:Art,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function IQ(t){return t}var RQ=Array.prototype.map,FQ=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Crt(t){var e=t.grouping===void 0||t.thousands===void 0?IQ:xrt(RQ.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?IQ:wrt(RQ.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"â":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Z_(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,y=f.zero,b=f.width,v=f.comma,w=f.precision,_=f.trim,S=f.type;S==="n"?(v=!0,S="g"):MQ[S]||(w===void 0&&(w=12),_=!0,S="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var A=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",C=m==="$"?r:/[%p]/.test(S)?o:"",D=MQ[S],T=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M(I){var N=A,P=C,O,R,L;if(S==="c")P=D(I)+P,I="";else{I=+I;var B=I<0||1/I<0;if(I=isNaN(I)?l:D(Math.abs(I),w),_&&(I=Srt(I)),B&&+I==0&&p!=="+"&&(B=!1),N=(B?p==="("?p:a:p==="-"||p==="("?"":p)+N,P=(S==="s"?FQ[8+dde/3]:"")+P+(B&&p==="("?")":""),T){for(O=-1,R=I.length;++O<R;)if(L=I.charCodeAt(O),48>L||L>57){P=(L===46?i+I.slice(O+1):I.slice(O))+P,I=I.slice(0,O);break}}}v&&!y&&(I=e(I,1/0));var z=N.length+I.length+P.length,U=z<b?new Array(b-z+1).join(h):"";switch(v&&y&&(I=e(U+I,U.length?b-P.length:1/0),U=""),d){case"<":I=N+I+P+U;break;case"=":I=N+U+I+P;break;case"^":I=U.slice(0,z=U.length>>1)+N+I+P+U.slice(z);break;default:I=U+N+I+P;break}return s(I)}return M.toString=function(){return f+""},M}function c(f,h){var d=u((f=Z_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(hv(h)/3)))*3,m=Math.pow(10,-p),y=FQ[8+p/3];return function(b){return d(m*b)+y}}return{format:u,formatPrefix:c}}var a6,Lu,pde;krt({thousands:",",grouping:[3],currency:["$",""]});function krt(t){return a6=Crt(t),Lu=a6.format,pde=a6.formatPrefix,a6}function Ert(t){return Math.max(0,-hv(Math.abs(t)))}function Drt(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hv(e)/3)))*3-hv(Math.abs(t)))}function Trt(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hv(e)-hv(t))+1}function fr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qm(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function RD(t){let e,n,r;t.length!==2?(e=fr,n=(a,l)=>fr(t(a),l),r=(a,l)=>t(a)-l):(e=t===fr||t===Qm?t:Ort,n=t,r=t);function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function Ort(){return 0}function gde(t){return t===null?NaN:+t}function*Mrt(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Irt=RD(fr),FD=Irt.right;RD(gde).center;const mde=yde(bde),Rrt=yde(Frt);function yde(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:s,height:o}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!r)return e;const a=n&&t(n),l=r&&t(r),u=i.slice();return a&&l?(sy(a,u,i,s,o),sy(a,i,u,s,o),sy(a,u,i,s,o),oy(l,i,u,s,o),oy(l,u,i,s,o),oy(l,i,u,s,o)):a?(sy(a,i,u,s,o),sy(a,u,i,s,o),sy(a,i,u,s,o)):l&&(oy(l,i,u,s,o),oy(l,u,i,s,o),oy(l,i,u,s,o)),e}}function sy(t,e,n,r,i){for(let s=0,o=r*i;s<o;)t(e,n,s,s+=r,1)}function oy(t,e,n,r,i){for(let s=0,o=r*i;s<r;++s)t(e,n,s,s+o,r)}function Frt(t){const e=bde(t);return(n,r,i,s,o)=>{i<<=2,s<<=2,o<<=2,e(n,r,i+0,s+0,o),e(n,r,i+1,s+1,o),e(n,r,i+2,s+2,o),e(n,r,i+3,s+3,o)}}function bde(t){const e=Math.floor(t);if(e===t)return Nrt(t);const n=t-e,r=2*t+1;return(i,s,o,a,l)=>{if(!((a-=l)>=o))return;let u=e*s[o];const c=l*e,f=c+l;for(let h=o,d=o+c;h<d;h+=l)u+=s[Math.min(a,h)];for(let h=o,d=a;h<=d;h+=l)u+=s[Math.min(a,h+c)],i[h]=(u+n*(s[Math.max(o,h-f)]+s[Math.min(a,h+f)]))/r,u-=s[Math.max(o,h-c)]}}function Nrt(t){const e=2*t+1;return(n,r,i,s,o)=>{if(!((s-=o)>=i))return;let a=t*r[i];const l=o*t;for(let u=i,c=i+l;u<c;u+=o)a+=r[Math.min(s,u)];for(let u=i,c=s;u<=c;u+=o)a+=r[Math.min(s,u+l)],n[u]=a/e,a-=r[Math.max(i,u-l)]}}function ND(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function Lrt(t){return t.length|0}function Prt(t){return!(t>0)}function Brt(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function $rt(t){return e=>t(...e)}function Urt(...t){const e=typeof t[t.length-1]=="function"&&$rt(t.pop());t=t.map(Brt);const n=t.map(Lrt),r=t.length-1,i=new Array(r+1).fill(0),s=[];if(r<0||n.some(Prt))return s;for(;;){s.push(i.map((a,l)=>t[l][a]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?s.map(e):s;i[o--]=0}}}function zrt(t,e){var n=0;return Float64Array.from(t,r=>n+=+r||0)}function FU(t,e){let n=0,r,i=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function xS(t,e){const n=FU(t,e);return n&&Math.sqrt(n)}function Qi(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class zf{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[r++]=a),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Jm extends Map{constructor(e,n=wde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dN(this,e))}has(e){return super.has(dN(this,e))}set(e,n){return super.set(vde(this,e),n)}delete(e){return super.delete(xde(this,e))}}class y2 extends Set{constructor(e,n=wde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(dN(this,e))}add(e){return super.add(vde(this,e))}delete(e){return super.delete(xde(this,e))}}function dN({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function vde({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function xde({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function wde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pN(t){return t}function ng(t,...e){return NU(t,pN,pN,e)}function Sb(t,e,...n){return NU(t,pN,e,n)}function jrt(t,e,...n){return NU(t,Array.from,e,n)}function NU(t,e,n,r){return(function i(s,o){if(o>=r.length)return n(s);const a=new Jm,l=r[o++];let u=-1;for(const c of s){const f=l(c,++u,s),h=a.get(f);h?h.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,o));return e(a)})(t,0)}function qrt(t,e){return Array.from(e,n=>t[n])}function zE(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,s)=>s);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,s)=>{for(const o of e){const a=e3(o[i],o[s]);if(a)return a}})):(n=t.map(n),r.sort((i,s)=>e3(n[i],n[s]))),qrt(t,r)}return t.sort(LU(n))}function LU(t=fr){if(t===fr)return e3;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function e3(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function PU(t,e,n){return(e.length!==2?zE(Sb(t,e,n),(([r,i],[s,o])=>fr(i,o)||fr(r,s))):zE(ng(t,n),(([r,i],[s,o])=>e(i,o)||fr(r,s)))).map(([r])=>r)}const Vrt=Math.sqrt(50),Wrt=Math.sqrt(10),Hrt=Math.sqrt(2);function jE(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Vrt?10:s>=Wrt?5:s>=Hrt?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?jE(t,e,n*2):[a,l,u]}function P0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?jE(e,t,n):jE(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function t3(t,e,n){return e=+e,t=+t,n=+n,jE(t,e,n)[2]}function gN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?t3(e,t,n):t3(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function _de(t,e,n){let r;for(;;){const i=t3(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function BU(t){return Math.max(1,Math.ceil(Math.log(ND(t))/Math.LN2)+1)}function Ci(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Grt(t,e){let n,r=-1,i=-1;if(e===void 0)for(const s of t)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of t)(s=e(s,++i,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function ui(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Yrt(t,e){let n,r=-1,i=-1;if(e===void 0)for(const s of t)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of t)(s=e(s,++i,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function Sde(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?e3:LU(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),d=Math.max(n,Math.floor(e-u*f/l+h)),p=Math.min(r,Math.floor(e+(l-u)*f/l+h));Sde(t,e,d,p,i)}const s=t[e];let o=n,a=r;for(Ax(t,n,e),i(t[r],s)>0&&Ax(t,n,r);o<a;){for(Ax(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Ax(t,n,a):(++a,Ax(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Ax(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $U(t,e=fr){let n,r=!1;if(e.length===1){let i;for(const s of t){const o=e(s);(r?fr(o,i)>0:fr(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function B0(t,e,n){if(t=Float64Array.from(Mrt(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ui(t);if(e>=1)return Ci(t);var r,i=(r-1)*e,s=Math.floor(i),o=Ci(Sde(t,s).subarray(0,s+1)),a=ui(t.subarray(s+1));return o+(a-o)*(i-s)}}function Xrt(t,e,n=gde){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function Krt(t,e,n){const r=ND(t),i=B0(t,.75)-B0(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Ade(t,e,n){const r=ND(t),i=xS(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function LD(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function n3(t,e){return B0(t,.5,e)}function*Qrt(t){for(const e of t)yield*e}function Cde(t){return Array.from(Qrt(t))}function kde(t,e){const n=new Jm;if(e===void 0)for(let s of t)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of t)(o=e(o,++s,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[s,o]of n)o>i&&(i=o,r=s);return r}function Jrt(t,e=Zrt){const n=[];let r,i=!1;for(const s of t)i&&n.push(e(r,s)),r=s,i=!0;return n}function Zrt(t,e){return[t,e]}function Cl(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ede(t,e=fr){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=fr);const i=(a,l)=>e(n[a],n[l]);let s,o;return t=Uint32Array.from(n,(a,l)=>l),t.sort(e===fr?(a,l)=>e3(n[a],n[l]):LU(i)),t.forEach((a,l)=>{const u=i(a,s===void 0?a:s);u>=0?((s===void 0||u>0)&&(s=a,o=l),r[a]=o):r[a]=NaN}),r}function eit(t,e=fr){let n,r=!1;if(e.length===1){let i;for(const s of t){const o=e(s);(r?fr(o,i)<0:fr(o,o)===0)&&(n=s,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function yc(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function qE(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function vh(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function PD(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const mN=Symbol("implicit");function UU(){var t=new Jm,e=[],n=[],r=mN;function i(s){let o=t.get(s);if(o===void 0){if(r!==mN)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Jm;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return UU(e,n).unknown(r)},vh.apply(i,arguments),i}function wS(){var t=UU().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<r,p=d?i:r,m=d?r:i;s=(m-p)/Math.max(1,h-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(h-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var y=Cl(h).map(function(b){return p+s*b});return n(d?y.reverse():y)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(h){return arguments.length?(a=!!h,f()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return wS(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},vh.apply(f(),arguments)}function Dde(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Dde(e())},t}function tit(){return Dde(wS.apply(null,arguments).paddingInner(1))}function b2(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _S(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rg(){}var Zm=.7,dv=1/Zm,Ab="\\s*([+-]?\\d+)\\s*",r3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nit=/^#([0-9a-f]{3,8})$/,rit=new RegExp(`^rgb\\(${Ab},${Ab},${Ab}\\)$`),iit=new RegExp(`^rgb\\(${jf},${jf},${jf}\\)$`),sit=new RegExp(`^rgba\\(${Ab},${Ab},${Ab},${r3}\\)$`),oit=new RegExp(`^rgba\\(${jf},${jf},${jf},${r3}\\)$`),ait=new RegExp(`^hsl\\(${r3},${jf},${jf}\\)$`),lit=new RegExp(`^hsla\\(${r3},${jf},${jf},${r3}\\)$`),NQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};b2(rg,$0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:LQ,formatHex:LQ,formatHex8:uit,formatHsl:cit,formatRgb:PQ,toString:PQ});function LQ(){return this.rgb().formatHex()}function uit(){return this.rgb().formatHex8()}function cit(){return Tde(this).formatHsl()}function PQ(){return this.rgb().formatRgb()}function $0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nit.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?BQ(e):n===3?new ks(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?l6(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?l6(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rit.exec(t))?new ks(e[1],e[2],e[3],1):(e=iit.exec(t))?new ks(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sit.exec(t))?l6(e[1],e[2],e[3],e[4]):(e=oit.exec(t))?l6(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ait.exec(t))?zQ(e[1],e[2]/100,e[3]/100,1):(e=lit.exec(t))?zQ(e[1],e[2]/100,e[3]/100,e[4]):NQ.hasOwnProperty(t)?BQ(NQ[t]):t==="transparent"?new ks(NaN,NaN,NaN,0):null}function BQ(t){return new ks(t>>16&255,t>>8&255,t&255,1)}function l6(t,e,n,r){return r<=0&&(t=e=n=NaN),new ks(t,e,n,r)}function zU(t){return t instanceof rg||(t=$0(t)),t?(t=t.rgb(),new ks(t.r,t.g,t.b,t.opacity)):new ks}function Ha(t,e,n,r){return arguments.length===1?zU(t):new ks(t,e,n,r??1)}function ks(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}b2(ks,Ha,_S(rg,{brighter(t){return t=t==null?dv:Math.pow(dv,t),new ks(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zm:Math.pow(Zm,t),new ks(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ks(wm(this.r),wm(this.g),wm(this.b),VE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$Q,formatHex:$Q,formatHex8:fit,formatRgb:UQ,toString:UQ}));function $Q(){return`#${im(this.r)}${im(this.g)}${im(this.b)}`}function fit(){return`#${im(this.r)}${im(this.g)}${im(this.b)}${im((isNaN(this.opacity)?1:this.opacity)*255)}`}function UQ(){const t=VE(this.opacity);return`${t===1?"rgb(":"rgba("}${wm(this.r)}, ${wm(this.g)}, ${wm(this.b)}${t===1?")":`, ${t})`}`}function VE(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function im(t){return t=wm(t),(t<16?"0":"")+t.toString(16)}function zQ(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rc(t,e,n,r)}function Tde(t){if(t instanceof rc)return new rc(t.h,t.s,t.l,t.opacity);if(t instanceof rg||(t=$0(t)),!t)return new rc;if(t instanceof rc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new rc(o,a,l,t.opacity)}function yN(t,e,n,r){return arguments.length===1?Tde(t):new rc(t,e,n,r??1)}function rc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}b2(rc,yN,_S(rg,{brighter(t){return t=t==null?dv:Math.pow(dv,t),new rc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zm:Math.pow(Zm,t),new rc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ks(fM(t>=240?t-240:t+120,i,r),fM(t,i,r),fM(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rc(jQ(this.h),u6(this.s),u6(this.l),VE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=VE(this.opacity);return`${t===1?"hsl(":"hsla("}${jQ(this.h)}, ${u6(this.s)*100}%, ${u6(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jQ(t){return t=(t||0)%360,t<0?t+360:t}function u6(t){return Math.max(0,Math.min(1,t||0))}function fM(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ode=Math.PI/180,Mde=180/Math.PI,WE=18,Ide=.96422,Rde=1,Fde=.82521,Nde=4/29,Cb=6/29,Lde=3*Cb*Cb,hit=Cb*Cb*Cb;function Pde(t){if(t instanceof qf)return new qf(t.l,t.a,t.b,t.opacity);if(t instanceof vd)return Bde(t);t instanceof ks||(t=zU(t));var e=gM(t.r),n=gM(t.g),r=gM(t.b),i=hM((.2225045*e+.7168786*n+.0606169*r)/Rde),s,o;return e===n&&n===r?s=o=i:(s=hM((.4360747*e+.3850649*n+.1430804*r)/Ide),o=hM((.0139322*e+.0971045*n+.7141733*r)/Fde)),new qf(116*i-16,500*(s-i),200*(i-o),t.opacity)}function HE(t,e,n,r){return arguments.length===1?Pde(t):new qf(t,e,n,r??1)}function qf(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}b2(qf,HE,_S(rg,{brighter(t){return new qf(this.l+WE*(t??1),this.a,this.b,this.opacity)},darker(t){return new qf(this.l-WE*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Ide*dM(e),t=Rde*dM(t),n=Fde*dM(n),new ks(pM(3.1338561*e-1.6168667*t-.4906146*n),pM(-.9787684*e+1.9161415*t+.033454*n),pM(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function hM(t){return t>hit?Math.pow(t,1/3):t/Lde+Nde}function dM(t){return t>Cb?t*t*t:Lde*(t-Nde)}function pM(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function gM(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dit(t){if(t instanceof vd)return new vd(t.h,t.c,t.l,t.opacity);if(t instanceof qf||(t=Pde(t)),t.a===0&&t.b===0)return new vd(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Mde;return new vd(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function bN(t,e,n,r){return arguments.length===1?dit(t):new vd(t,e,n,r??1)}function vd(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Bde(t){if(isNaN(t.h))return new qf(t.l,0,0,t.opacity);var e=t.h*Ode;return new qf(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}b2(vd,bN,_S(rg,{brighter(t){return new vd(this.h,this.c,this.l+WE*(t??1),this.opacity)},darker(t){return new vd(this.h,this.c,this.l-WE*(t??1),this.opacity)},rgb(){return Bde(this).rgb()}}));var $de=-.14861,jU=1.78277,qU=-.29227,BD=-.90649,i3=1.97294,qQ=i3*BD,VQ=i3*jU,WQ=jU*qU-BD*$de;function pit(t){if(t instanceof _m)return new _m(t.h,t.s,t.l,t.opacity);t instanceof ks||(t=zU(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(WQ*r+qQ*e-VQ*n)/(WQ+qQ-VQ),s=r-i,o=(i3*(n-i)-qU*s)/BD,a=Math.sqrt(o*o+s*s)/(i3*i*(1-i)),l=a?Math.atan2(o,s)*Mde-120:NaN;return new _m(l<0?l+360:l,a,i,t.opacity)}function eh(t,e,n,r){return arguments.length===1?pit(t):new _m(t,e,n,r??1)}function _m(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}b2(_m,eh,_S(rg,{brighter(t){return t=t==null?dv:Math.pow(dv,t),new _m(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zm:Math.pow(Zm,t),new _m(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Ode,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ks(255*(e+n*($de*r+jU*i)),255*(e+n*(qU*r+BD*i)),255*(e+n*(i3*r)),this.opacity)}}));function git(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function mit(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return git((n-r/e)*e,o,i,s,a)}}const $D=t=>()=>t;function Ude(t,e){return function(n){return t+n*e}}function yit(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function VU(t,e){var n=e-t;return n?Ude(t,n>180||n<-180?n-360*Math.round(n/360):n):$D(isNaN(t)?e:t)}function bit(t){return(t=+t)==1?co:function(e,n){return n-e?yit(e,n,t):$D(isNaN(e)?n:e)}}function co(t,e){var n=e-t;return n?Ude(t,n):$D(isNaN(t)?e:t)}const e1=(function t(e){var n=bit(e);function r(i,s){var o=n((i=Ha(i)).r,(s=Ha(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=co(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r})(1);function vit(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ha(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var xit=vit(mit);function wit(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function _it(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sit(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=v2(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Ait(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ro(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Cit(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=v2(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var vN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mM=new RegExp(vN.source,"g");function kit(t){return function(){return t}}function Eit(t){return function(e){return t(e)+""}}function zde(t,e){var n=vN.lastIndex=mM.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=vN.exec(t))&&(i=mM.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:ro(r,i)})),n=mM.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Eit(l[0].x):kit(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function v2(t,e){var n=typeof e,r;return e==null||n==="boolean"?$D(e):(n==="number"?ro:n==="string"?(r=$0(e))?(e=r,e1):zde:e instanceof $0?e1:e instanceof Date?Ait:_it(e)?wit:Array.isArray(e)?Sit:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Cit:ro)(t,e)}function WU(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var HQ=180/Math.PI,xN={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jde(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*HQ,skewX:Math.atan(l)*HQ,scaleX:o,scaleY:a}}var c6;function Dit(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?xN:jde(e.a,e.b,e.c,e.d,e.e,e.f)}function Tit(t){return t==null||(c6||(c6=document.createElementNS("http://www.w3.org/2000/svg","g")),c6.setAttribute("transform",t),!(t=c6.transform.baseVal.consolidate()))?xN:(t=t.matrix,jde(t.a,t.b,t.c,t.d,t.e,t.f))}function qde(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,f,h,d,p){if(u!==f||c!==h){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:ro(u,f)},{i:m-2,x:ro(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ro(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ro(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,d,p){if(u!==f||c!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:ro(u,f)},{i:m-2,x:ro(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),a(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(d){for(var p=-1,m=h.length,y;++p<m;)f[(y=h[p]).i]=y.x(d);return f.join("")}}}var Oit=qde(Dit,"px, ","px)","deg)"),Mit=qde(Tit,", ",")",")"),Iit=1e-12;function GQ(t){return((t=Math.exp(t))+1/t)/2}function Rit(t){return((t=Math.exp(t))-1/t)/2}function Fit(t){return((t=Math.exp(2*t))-1)/(t+1)}const Nit=(function t(e,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],f=o[1],h=o[2],d=c-a,p=f-l,m=d*d+p*p,y,b;if(m<Iit)b=Math.log(h/u)/e,y=function(C){return[a+C*d,l+C*p,u*Math.exp(e*C*b)]};else{var v=Math.sqrt(m),w=(h*h-u*u+r*m)/(2*u*n*v),_=(h*h-u*u-r*m)/(2*h*n*v),S=Math.log(Math.sqrt(w*w+1)-w),A=Math.log(Math.sqrt(_*_+1)-_);b=(A-S)/e,y=function(C){var D=C*b,T=GQ(S),M=u/(n*v)*(T*Fit(e*D+S)-Rit(S));return[a+M*d,l+M*p,u*T/GQ(e*D+S)]}}return y.duration=b*1e3*e/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i})(Math.SQRT2,2,4);function Lit(t){return function(e,n){var r=t((e=yN(e)).h,(n=yN(n)).h),i=co(e.s,n.s),s=co(e.l,n.l),o=co(e.opacity,n.opacity);return function(a){return e.h=r(a),e.s=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const Pit=Lit(VU);function Bit(t,e){var n=co((t=HE(t)).l,(e=HE(e)).l),r=co(t.a,e.a),i=co(t.b,e.b),s=co(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=r(o),t.b=i(o),t.opacity=s(o),t+""}}function $it(t){return function(e,n){var r=t((e=bN(e)).h,(n=bN(n)).h),i=co(e.c,n.c),s=co(e.l,n.l),o=co(e.opacity,n.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const Uit=$it(VU);function Vde(t){return(function e(n){n=+n;function r(i,s){var o=t((i=eh(i)).h,(s=eh(s)).h),a=co(i.s,s.s),l=co(i.l,s.l),u=co(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=e,r})(1)}Vde(VU);var HU=Vde(co);function UD(t,e){e===void 0&&(e=t,t=v2);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function bc(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function zit(t){return function(){return t}}function wN(t){return+t}var YQ=[0,1];function vu(t){return t}function _N(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zit(isNaN(e)?NaN:.5)}function jit(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function qit(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=_N(i,r),s=n(o,s)):(r=_N(r,i),s=n(s,o)),function(a){return s(r(a))}}function Vit(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=_N(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=FD(t,a,1,r)-1;return s[l](i[l](a))}}function SS(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zD(){var t=YQ,e=YQ,n=v2,r,i,s,o=vu,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==vu&&(o=jit(t[0],t[h-1])),a=h>2?Vit:qit,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=a(e,t.map(r),ro)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,wN),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=WU,c()},f.clamp=function(h){return arguments.length?(o=h?!0:vu,c()):o!==vu},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,c()}}function Wde(){return zD()(vu,vu)}function Wit(t,e,n,r){var i=gN(t,e,n),s;switch(r=Z_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Drt(i,o))&&(r.precision=s),pde(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Trt(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ert(i))&&(r.precision=s-(r.type==="%")*2);break}}return Lu(r)}function AS(t){var e=t.domain;return t.ticks=function(n){var r=e();return P0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Wit(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=t3(o,a,n),u===l)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function ep(){var t=Wde();return t.copy=function(){return SS(t,ep())},vh.apply(t,arguments),AS(t)}function Hde(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,wN),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Hde(t).unknown(e)},t=arguments.length?Array.from(t,wN):[0,1],AS(n)}function Gde(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function XQ(t){return Math.log(t)}function KQ(t){return Math.exp(t)}function Hit(t){return-Math.log(-t)}function Git(t){return-Math.exp(-t)}function Yit(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Xit(t){return t===10?Yit:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Kit(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function QQ(t){return(e,n)=>-t(-e,n)}function Yde(t){const e=t(XQ,KQ),n=e.domain;let r=10,i,s;function o(){return i=Kit(r),s=Xit(r),n()[0]<0?(i=QQ(i),s=QQ(s),t(Hit,Git)):t(XQ,KQ),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=i(u),d=i(c),p,m;const y=a==null?10:+a;let b=[];if(!(r%1)&&d-h<y){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(p=1;p<r;++p)if(m=h<0?p/s(-h):p*s(h),!(m<u)){if(m>c)break;b.push(m)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/s(-h):p*s(h),!(m<u)){if(m>c)break;b.push(m)}b.length*2<y&&(b=P0(u,c,y))}else b=P0(h,d,Math.min(d-h,y)).map(s);return f?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Z_(l)).precision==null&&(l.trim=!0),l=Lu(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>n(Gde(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function pv(){const t=Yde(zD()).domain([1,10]);return t.copy=()=>SS(t,pv()).base(t.base()),vh.apply(t,arguments),t}function JQ(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ZQ(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Xde(t){var e=1,n=t(JQ(e),ZQ(e));return n.constant=function(r){return arguments.length?t(JQ(e=+r),ZQ(e)):e},AS(n)}function GU(){var t=Xde(zD());return t.copy=function(){return SS(t,GU()).constant(t.constant())},vh.apply(t,arguments)}function eJ(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Qit(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jit(t){return t<0?-t*t:t*t}function Kde(t){var e=t(vu,vu),n=1;function r(){return n===1?t(vu,vu):n===.5?t(Qit,Jit):t(eJ(n),eJ(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},AS(e)}function Qde(){var t=Kde(zD());return t.copy=function(){return SS(t,Qde()).exponent(t.exponent())},vh.apply(t,arguments),t}function Jde(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=Xrt(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[FD(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(fr),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Jde().domain(t).range(e).unknown(r)},vh.apply(s,arguments)}function Zde(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[FD(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Zde().domain(t).range(e).unknown(n)},vh.apply(i,arguments)}const yM=new Date,bM=new Date;function ds(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},i.filter=s=>ds(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(yM.setTime(+s),bM.setTime(+o),t(yM),t(bM),Math.floor(n(yM,bM))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const GE=ds(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);GE.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ds(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):GE);GE.range;const xd=1e3,xu=xd*60,wd=xu*60,zd=wd*24,YU=zd*7,tJ=zd*30,vM=zd*365,ac=ds(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*xd)},(t,e)=>(e-t)/xd,t=>t.getUTCSeconds());ac.range;const CS=ds(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xd)},(t,e)=>{t.setTime(+t+e*xu)},(t,e)=>(e-t)/xu,t=>t.getMinutes());CS.range;const kS=ds(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*xu)},(t,e)=>(e-t)/xu,t=>t.getUTCMinutes());kS.range;const ES=ds(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xd-t.getMinutes()*xu)},(t,e)=>{t.setTime(+t+e*wd)},(t,e)=>(e-t)/wd,t=>t.getHours());ES.range;const DS=ds(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*wd)},(t,e)=>(e-t)/wd,t=>t.getUTCHours());DS.range;const S1=ds(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xu)/zd,t=>t.getDate()-1);S1.range;const jD=ds(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zd,t=>t.getUTCDate()-1);jD.range;const qD=ds(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zd,t=>Math.floor(t/zd));qD.range;function A1(t){return ds(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*xu)/YU)}const gv=A1(0),s3=A1(1),epe=A1(2),tpe=A1(3),t1=A1(4),npe=A1(5),rpe=A1(6);gv.range;s3.range;epe.range;tpe.range;t1.range;npe.range;rpe.range;function C1(t){return ds(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/YU)}const mv=C1(0),o3=C1(1),ipe=C1(2),spe=C1(3),n1=C1(4),ope=C1(5),ape=C1(6);mv.range;o3.range;ipe.range;spe.range;n1.range;ope.range;ape.range;const TS=ds(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());TS.range;const OS=ds(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());OS.range;const vc=ds(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ds(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});vc.range;const xc=ds(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());xc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ds(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});xc.range;function lpe(t,e,n,r,i,s){const o=[[ac,1,xd],[ac,5,5*xd],[ac,15,15*xd],[ac,30,30*xd],[s,1,xu],[s,5,5*xu],[s,15,15*xu],[s,30,30*xu],[i,1,wd],[i,3,3*wd],[i,6,6*wd],[i,12,12*wd],[r,1,zd],[r,2,2*zd],[n,1,YU],[e,1,tJ],[e,3,3*tJ],[t,1,vM]];function a(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const d=f&&typeof f.range=="function"?f:l(u,c,f),p=d?d.range(u,+c+1):[];return h?p.reverse():p}function l(u,c,f){const h=Math.abs(c-u)/f,d=RD(([,,y])=>y).right(o,h);if(d===o.length)return t.every(gN(u/vM,c/vM,f));if(d===0)return GE.every(Math.max(gN(u,c,f),1));const[p,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return p.every(m)}return[a,l]}const[Zit,upe]=lpe(xc,OS,mv,qD,DS,kS),[est,tst]=lpe(vc,TS,gv,S1,ES,CS);function xM(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wM(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Cx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function nst(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=kx(i),c=Ex(i),f=kx(s),h=Ex(s),d=kx(o),p=Ex(o),m=kx(a),y=Ex(a),b=kx(l),v=Ex(l),w={a:B,A:z,b:U,B:V,c:null,d:aJ,e:aJ,f:Cst,g:Nst,G:Pst,H:_st,I:Sst,j:Ast,L:cpe,m:kst,M:Est,p:W,q:H,Q:cJ,s:fJ,S:Dst,u:Tst,U:Ost,V:Mst,w:Ist,W:Rst,x:null,X:null,y:Fst,Y:Lst,Z:Bst,"%":uJ},_={a:Y,A:se,b:he,B:be,c:null,d:lJ,e:lJ,f:jst,g:Jst,G:eot,H:$st,I:Ust,j:zst,L:hpe,m:qst,M:Vst,p:fe,q:me,Q:cJ,s:fJ,S:Wst,u:Hst,U:Gst,V:Yst,w:Xst,W:Kst,x:null,X:null,y:Qst,Y:Zst,Z:tot,"%":uJ},S={a:M,A:I,b:N,B:P,c:O,d:sJ,e:sJ,f:bst,g:iJ,G:rJ,H:oJ,I:oJ,j:pst,L:yst,m:dst,M:gst,p:T,q:hst,Q:xst,s:wst,S:mst,u:ast,U:lst,V:ust,w:ost,W:cst,x:R,X:L,y:iJ,Y:rJ,Z:fst,"%":vst};w.x=A(n,w),w.X=A(r,w),w.c=A(e,w),_.x=A(n,_),_.X=A(r,_),_.c=A(e,_);function A(K,de){return function(ge){var oe=[],Fe=-1,Ce=0,je=K.length,Ge,Ee,rt;for(ge instanceof Date||(ge=new Date(+ge));++Fe<je;)K.charCodeAt(Fe)===37&&(oe.push(K.slice(Ce,Fe)),(Ee=nJ[Ge=K.charAt(++Fe)])!=null?Ge=K.charAt(++Fe):Ee=Ge==="e"?" ":"0",(rt=de[Ge])&&(Ge=rt(ge,Ee)),oe.push(Ge),Ce=Fe+1);return oe.push(K.slice(Ce,Fe)),oe.join("")}}function C(K,de){return function(ge){var oe=Cx(1900,void 0,1),Fe=D(oe,K,ge+="",0),Ce,je;if(Fe!=ge.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(de&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Ce=wM(Cx(oe.y,0,1)),je=Ce.getUTCDay(),Ce=je>4||je===0?o3.ceil(Ce):o3(Ce),Ce=jD.offset(Ce,(oe.V-1)*7),oe.y=Ce.getUTCFullYear(),oe.m=Ce.getUTCMonth(),oe.d=Ce.getUTCDate()+(oe.w+6)%7):(Ce=xM(Cx(oe.y,0,1)),je=Ce.getDay(),Ce=je>4||je===0?s3.ceil(Ce):s3(Ce),Ce=S1.offset(Ce,(oe.V-1)*7),oe.y=Ce.getFullYear(),oe.m=Ce.getMonth(),oe.d=Ce.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),je="Z"in oe?wM(Cx(oe.y,0,1)).getUTCDay():xM(Cx(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(je+5)%7:oe.w+oe.U*7-(je+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,wM(oe)):xM(oe)}}function D(K,de,ge,oe){for(var Fe=0,Ce=de.length,je=ge.length,Ge,Ee;Fe<Ce;){if(oe>=je)return-1;if(Ge=de.charCodeAt(Fe++),Ge===37){if(Ge=de.charAt(Fe++),Ee=S[Ge in nJ?de.charAt(Fe++):Ge],!Ee||(oe=Ee(K,ge,oe))<0)return-1}else if(Ge!=ge.charCodeAt(oe++))return-1}return oe}function T(K,de,ge){var oe=u.exec(de.slice(ge));return oe?(K.p=c.get(oe[0].toLowerCase()),ge+oe[0].length):-1}function M(K,de,ge){var oe=d.exec(de.slice(ge));return oe?(K.w=p.get(oe[0].toLowerCase()),ge+oe[0].length):-1}function I(K,de,ge){var oe=f.exec(de.slice(ge));return oe?(K.w=h.get(oe[0].toLowerCase()),ge+oe[0].length):-1}function N(K,de,ge){var oe=b.exec(de.slice(ge));return oe?(K.m=v.get(oe[0].toLowerCase()),ge+oe[0].length):-1}function P(K,de,ge){var oe=m.exec(de.slice(ge));return oe?(K.m=y.get(oe[0].toLowerCase()),ge+oe[0].length):-1}function O(K,de,ge){return D(K,e,de,ge)}function R(K,de,ge){return D(K,n,de,ge)}function L(K,de,ge){return D(K,r,de,ge)}function B(K){return o[K.getDay()]}function z(K){return s[K.getDay()]}function U(K){return l[K.getMonth()]}function V(K){return a[K.getMonth()]}function W(K){return i[+(K.getHours()>=12)]}function H(K){return 1+~~(K.getMonth()/3)}function Y(K){return o[K.getUTCDay()]}function se(K){return s[K.getUTCDay()]}function he(K){return l[K.getUTCMonth()]}function be(K){return a[K.getUTCMonth()]}function fe(K){return i[+(K.getUTCHours()>=12)]}function me(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var de=A(K+="",w);return de.toString=function(){return K},de},parse:function(K){var de=C(K+="",!1);return de.toString=function(){return K},de},utcFormat:function(K){var de=A(K+="",_);return de.toString=function(){return K},de},utcParse:function(K){var de=C(K+="",!0);return de.toString=function(){return K},de}}}var nJ={"-":"",_:" ",0:"0"},Ms=/^\s*\d+/,rst=/^%/,ist=/[\\^$*+?|[\]().{}]/g;function Qn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function sst(t){return t.replace(ist,"\\$&")}function kx(t){return new RegExp("^(?:"+t.map(sst).join("|")+")","i")}function Ex(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ost(t,e,n){var r=Ms.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ast(t,e,n){var r=Ms.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function lst(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ust(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function cst(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function rJ(t,e,n){var r=Ms.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function iJ(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function fst(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hst(t,e,n){var r=Ms.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function dst(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sJ(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function pst(t,e,n){var r=Ms.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function oJ(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function gst(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function mst(t,e,n){var r=Ms.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function yst(t,e,n){var r=Ms.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function bst(t,e,n){var r=Ms.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vst(t,e,n){var r=rst.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function xst(t,e,n){var r=Ms.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function wst(t,e,n){var r=Ms.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function aJ(t,e){return Qn(t.getDate(),e,2)}function _st(t,e){return Qn(t.getHours(),e,2)}function Sst(t,e){return Qn(t.getHours()%12||12,e,2)}function Ast(t,e){return Qn(1+S1.count(vc(t),t),e,3)}function cpe(t,e){return Qn(t.getMilliseconds(),e,3)}function Cst(t,e){return cpe(t,e)+"000"}function kst(t,e){return Qn(t.getMonth()+1,e,2)}function Est(t,e){return Qn(t.getMinutes(),e,2)}function Dst(t,e){return Qn(t.getSeconds(),e,2)}function Tst(t){var e=t.getDay();return e===0?7:e}function Ost(t,e){return Qn(gv.count(vc(t)-1,t),e,2)}function fpe(t){var e=t.getDay();return e>=4||e===0?t1(t):t1.ceil(t)}function Mst(t,e){return t=fpe(t),Qn(t1.count(vc(t),t)+(vc(t).getDay()===4),e,2)}function Ist(t){return t.getDay()}function Rst(t,e){return Qn(s3.count(vc(t)-1,t),e,2)}function Fst(t,e){return Qn(t.getFullYear()%100,e,2)}function Nst(t,e){return t=fpe(t),Qn(t.getFullYear()%100,e,2)}function Lst(t,e){return Qn(t.getFullYear()%1e4,e,4)}function Pst(t,e){var n=t.getDay();return t=n>=4||n===0?t1(t):t1.ceil(t),Qn(t.getFullYear()%1e4,e,4)}function Bst(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qn(e/60|0,"0",2)+Qn(e%60,"0",2)}function lJ(t,e){return Qn(t.getUTCDate(),e,2)}function $st(t,e){return Qn(t.getUTCHours(),e,2)}function Ust(t,e){return Qn(t.getUTCHours()%12||12,e,2)}function zst(t,e){return Qn(1+jD.count(xc(t),t),e,3)}function hpe(t,e){return Qn(t.getUTCMilliseconds(),e,3)}function jst(t,e){return hpe(t,e)+"000"}function qst(t,e){return Qn(t.getUTCMonth()+1,e,2)}function Vst(t,e){return Qn(t.getUTCMinutes(),e,2)}function Wst(t,e){return Qn(t.getUTCSeconds(),e,2)}function Hst(t){var e=t.getUTCDay();return e===0?7:e}function Gst(t,e){return Qn(mv.count(xc(t)-1,t),e,2)}function dpe(t){var e=t.getUTCDay();return e>=4||e===0?n1(t):n1.ceil(t)}function Yst(t,e){return t=dpe(t),Qn(n1.count(xc(t),t)+(xc(t).getUTCDay()===4),e,2)}function Xst(t){return t.getUTCDay()}function Kst(t,e){return Qn(o3.count(xc(t)-1,t),e,2)}function Qst(t,e){return Qn(t.getUTCFullYear()%100,e,2)}function Jst(t,e){return t=dpe(t),Qn(t.getUTCFullYear()%100,e,2)}function Zst(t,e){return Qn(t.getUTCFullYear()%1e4,e,4)}function eot(t,e){var n=t.getUTCDay();return t=n>=4||n===0?n1(t):n1.ceil(t),Qn(t.getUTCFullYear()%1e4,e,4)}function tot(){return"+0000"}function uJ(){return"%"}function cJ(t){return+t}function fJ(t){return Math.floor(+t/1e3)}var ay,XU,MS;not({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function not(t){return ay=nst(t),XU=ay.format,ay.parse,MS=ay.utcFormat,ay.utcParse,ay}function rot(t){return new Date(t)}function iot(t){return t instanceof Date?+t:+new Date(+t)}function KU(t,e,n,r,i,s,o,a,l,u){var c=Wde(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),v=u("%b %d"),w=u("%B"),_=u("%Y");function S(A){return(l(A)<A?d:a(A)<A?p:o(A)<A?m:s(A)<A?y:r(A)<A?i(A)<A?b:v:n(A)<A?w:_)(A)}return c.invert=function(A){return new Date(f(A))},c.domain=function(A){return arguments.length?h(Array.from(A,iot)):h().map(rot)},c.ticks=function(A){var C=h();return t(C[0],C[C.length-1],A??10)},c.tickFormat=function(A,C){return C==null?S:u(C)},c.nice=function(A){var C=h();return(!A||typeof A.range!="function")&&(A=e(C[0],C[C.length-1],A??10)),A?h(Gde(C,A)):c},c.copy=function(){return SS(c,KU(t,e,n,r,i,s,o,a,l,u))},c}function sot(){return vh.apply(KU(est,tst,vc,TS,gv,S1,ES,CS,ac,XU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oot(){return vh.apply(KU(Zit,upe,xc,OS,mv,jD,DS,kS,ac,MS).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function VD(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function WD(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,u=vu,c,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,i=c(t=+t),s=c(e=+e),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(y){var b,v,w;return arguments.length?([b,v,w]=y,u=UD(m,[b,v,w]),d):[u(0),u(.5),u(1)]}}return d.range=p(v2),d.rangeRound=p(WU),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return c=m,i=m(t),s=m(e),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,d}}function ppe(){var t=AS(WD()(vu));return t.copy=function(){return VD(t,ppe())},PD.apply(t,arguments)}function gpe(){var t=Yde(WD()).domain([.1,1,10]);return t.copy=function(){return VD(t,gpe()).base(t.base())},PD.apply(t,arguments)}function mpe(){var t=Xde(WD());return t.copy=function(){return VD(t,mpe()).constant(t.constant())},PD.apply(t,arguments)}function ype(){var t=Kde(WD());return t.copy=function(){return VD(t,ype()).exponent(t.exponent())},PD.apply(t,arguments)}function nn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const aot=nn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),lot=nn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),uot=nn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),cot=nn("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),fot=nn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),hot=nn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),dot=nn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pot=nn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),got=nn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),mot=nn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),yot=nn("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Nr=t=>xit(t[t.length-1]);var bpe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(nn);const vpe=Nr(bpe);var xpe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(nn);const wpe=Nr(xpe);var _pe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(nn);const Spe=Nr(_pe);var Ape=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(nn);const Cpe=Nr(Ape);var SN=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(nn);const YE=Nr(SN);var kpe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(nn);const Epe=Nr(kpe);var AN=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(nn);const XE=Nr(AN);var Dpe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(nn);const Tpe=Nr(Dpe);var Ope=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(nn);const Mpe=Nr(Ope);var Ipe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(nn);const Rpe=Nr(Ipe);var Fpe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(nn);const Npe=Nr(Fpe);var Lpe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(nn);const Ppe=Nr(Lpe);var Bpe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(nn);const $pe=Nr(Bpe);var Upe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(nn);const QU=Nr(Upe);var zpe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(nn);const jpe=Nr(zpe);var qpe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(nn);const Vpe=Nr(qpe);var Wpe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(nn);const Hpe=Nr(Wpe);var Gpe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(nn);const JU=Nr(Gpe);var Ype=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(nn);const Xpe=Nr(Ype);var Kpe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(nn);const Qpe=Nr(Kpe);var Jpe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(nn);const Zpe=Nr(Jpe);var e0e=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(nn);const t0e=Nr(e0e);var n0e=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(nn);const r0e=Nr(n0e);var i0e=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(nn);const s0e=Nr(i0e);var o0e=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(nn);const a0e=Nr(o0e);var l0e=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(nn);const u0e=Nr(l0e);var c0e=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(nn);const f0e=Nr(c0e);function h0e(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const d0e=HU(eh(300,.5,0),eh(-240,.5,1));var p0e=HU(eh(-100,.75,.35),eh(80,1.5,.8)),g0e=HU(eh(260,.75,.35),eh(80,1.5,.8)),f6=eh();function m0e(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return f6.h=360*t-100,f6.s=1.5-1.5*e,f6.l=.8-.9*e,f6+""}var h6=Ha(),bot=Math.PI/3,vot=Math.PI*2/3;function y0e(t){var e;return t=(.5-t)*Math.PI,h6.r=255*(e=Math.sin(t))*e,h6.g=255*(e=Math.sin(t+bot))*e,h6.b=255*(e=Math.sin(t+vot))*e,h6+""}function ZU(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function HD(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const b0e=HD(nn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var v0e=HD(nn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),GD=HD(nn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),x0e=HD(nn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Ku={slate:{300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",700:"oklch(37.2% 0.044 257.287)"},gray:{500:"oklch(55.1% 0.027 264.364)"}};function w0e(){return!(navigator.gpu==null||navigator.gpu.requestAdapter==null)}function xot(t){return t==0&&(t=4),t%4!=0&&(t+=4-t%4),t}function kb(t,e,n,r){return(t.buffer==null||t.byteSize!=n||t.usage!=r)&&(t.buffer!=null&&t.buffer.destroy(),t.buffer=e.createBuffer({size:xot(n),usage:r}),t.byteSize=n,t.destroy=()=>{t.buffer?.destroy()}),t.buffer}function _M(t,e,n,r){if(t.buffer!==n||t.data!==r){if(r!=null)if(r.byteLength%4!=0){let i=r.byteLength-r.byteLength%4;if(e.queue.writeBuffer(n,0,r,0,i),r instanceof Uint8Array){let s=new Uint8Array(4);for(let o=0;o<4;o++)i+o<r.length&&(s[o]=r[i+o]);e.queue.writeBuffer(n,i,s)}}else e.queue.writeBuffer(n,0,r,0);else e.queue.writeBuffer(n,0,new ArrayBuffer(n.size));t.buffer=n,t.data=r}return n}function hJ(t,e,n,r,i,s){return(t.texture==null||t.width!=n||t.height!=r||t.format!=i||t.usage!=s)&&(t.texture!=null&&t.texture.destroy(),t.texture=e.createTexture({size:[n,r],format:i,usage:s}),t.destroy=()=>{t.texture?.destroy()}),t.texture}const Co=2,YD=4,XD=8,tp=16,np=32,k1=64,KD=128,wc=512,fo=1024,Ga=2048,rp=4096,Ml=8192,l0=16384,QD=32768,yv=65536,dJ=1<<17,_0e=1<<18,x2=1<<19,S0e=1<<20,a3=32768,CN=1<<21,ez=1<<22,u0=1<<23,Sm=Symbol("$state"),A0e=Symbol("legacy props"),wot=Symbol(""),Hy=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},tz=3,w2=8,_ot=!1;var C0e=Array.isArray,Sot=Array.prototype.indexOf,nz=Array.from,k0e=Object.defineProperty,Eb=Object.getOwnPropertyDescriptor,E0e=Object.getOwnPropertyDescriptors,Aot=Object.prototype,Cot=Array.prototype,rz=Object.getPrototypeOf,pJ=Object.isExtensible;function kot(t){for(var e=0;e<t.length;e++)t[e]()}function D0e(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function T0e(t){return t===this.v}function O0e(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function M0e(t){return!O0e(t,this.v)}function I0e(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Eot(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Dot(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Tot(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Oot(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Mot(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Iot(){throw new Error("https://svelte.dev/e/hydration_failed")}function Rot(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fot(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Not(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lot(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Pot(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let Bot=!1;const iz=1,sz=2,R0e=4,$ot=8,Uot=16,zot=1,jot=4,qot=8,Vot=16,Wot=1,Hot=2,F0e="[",JD="[!",oz="]",bv={},eo=Symbol(),Got="http://www.w3.org/1999/xhtml";let Ya=null;function vv(t){Ya=t}function E1(t,e=!1,n){Ya={p:Ya,i:!1,c:null,e:null,s:t,x:null,l:null}}function D1(t){var e=Ya,n=e.e;if(n!==null){e.e=null;for(var r of n)lge(r)}return e.i=!0,Ya=e.p,{}}function N0e(){return!0}let sm=[];function L0e(){var t=sm;sm=[],kot(t)}function _2(t){if(sm.length===0&&!Uw){var e=sm;queueMicrotask(()=>{e===sm&&L0e()})}sm.push(t)}function Yot(){for(;sm.length>0;)L0e()}function ZD(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function Xot(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Xn=!1;function _d(t){Xn=t}let zn;function Ba(t){if(t===null)throw ZD(),bv;return zn=t}function IS(){return Ba(xh(zn))}function Xi(t){if(Xn){if(xh(zn)!==null)throw ZD(),bv;zn=t}}function P0e(t=1){if(Xn){for(var e=t,n=zn;e--;)n=xh(n);zn=n}}function KE(t=!0){for(var e=0,n=zn;;){if(n.nodeType===w2){var r=n.data;if(r===oz){if(e===0)return n;e-=1}else(r===F0e||r===JD)&&(e+=1)}var i=xh(n);t&&n.remove(),n=i}}function B0e(t){if(!t||t.nodeType!==w2)throw ZD(),bv;return t.data}function om(t){if(typeof t!="object"||t===null||Sm in t)return t;const e=rz(t);if(e!==Aot&&e!==Cot)return t;var n=new Map,r=C0e(t),i=qr(0),s=Cm,o=a=>{if(Cm===s)return a();var l=$n,u=Cm;Fa(null),vJ(s);var c=a();return Fa(l),vJ(u),c};return r&&n.set("length",qr(t.length)),new Proxy(t,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Fot();var c=n.get(l);return c===void 0?c=o(()=>{var f=qr(u.value);return n.set(l,f),f}):zt(c,u.value,!0),!0},deleteProperty(a,l){var u=n.get(l);if(u===void 0){if(l in a){const c=o(()=>qr(eo));n.set(l,c),zw(i)}}else zt(u,eo),zw(i);return!0},get(a,l,u){if(l===Sm)return t;var c=n.get(l),f=l in a;if(c===void 0&&(!f||Eb(a,l)?.writable)&&(c=o(()=>{var d=om(f?a[l]:eo),p=qr(d);return p}),n.set(l,c)),c!==void 0){var h=Q(c);return h===eo?void 0:h}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var c=n.get(l);c&&(u.value=Q(c))}else if(u===void 0){var f=n.get(l),h=f?.v;if(f!==void 0&&h!==eo)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(a,l){if(l===Sm)return!0;var u=n.get(l),c=u!==void 0&&u.v!==eo||Reflect.has(a,l);if(u!==void 0||Kn!==null&&(!c||Eb(a,l)?.writable)){u===void 0&&(u=o(()=>{var h=c?om(a[l]):eo,d=qr(h);return d}),n.set(l,u));var f=Q(u);if(f===eo)return!1}return c},set(a,l,u,c){var f=n.get(l),h=l in a;if(r&&l==="length")for(var d=u;d<f.v;d+=1){var p=n.get(d+"");p!==void 0?zt(p,eo):d in a&&(p=o(()=>qr(eo)),n.set(d+"",p))}if(f===void 0)(!h||Eb(a,l)?.writable)&&(f=o(()=>qr(void 0)),zt(f,om(u)),n.set(l,f));else{h=f.v!==eo;var m=o(()=>om(u));zt(f,m)}var y=Reflect.getOwnPropertyDescriptor(a,l);if(y?.set&&y.set.call(c,u),!h){if(r&&typeof l=="string"){var b=n.get("length"),v=Number(l);Number.isInteger(v)&&v>=b.v&&zt(b,v+1)}zw(i)}return!0},ownKeys(a){Q(i);var l=Reflect.ownKeys(a).filter(f=>{var h=n.get(f);return h===void 0||h.v!==eo});for(var[u,c]of n)c.v!==eo&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Not()}})}var gJ,$0e,U0e,z0e;function kN(){if(gJ===void 0){gJ=window,$0e=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;U0e=Eb(e,"firstChild").get,z0e=Eb(e,"nextSibling").get,pJ(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),pJ(n)&&(n.__t=void 0)}}function th(t=""){return document.createTextNode(t)}function jd(t){return U0e.call(t)}function xh(t){return z0e.call(t)}function Ss(t,e){if(!Xn)return jd(t);var n=jd(zn);if(n===null)n=zn.appendChild(th());else if(e&&n.nodeType!==tz){var r=th();return n?.before(r),Ba(r),r}return Ba(n),n}function Ry(t,e=!1){if(!Xn){var n=jd(t);return n instanceof Comment&&n.data===""?xh(n):n}if(e&&zn?.nodeType!==tz){var r=th();return zn?.before(r),Ba(r),r}return zn}function oi(t,e=1,n=!1){let r=Xn?zn:t;for(var i;e--;)i=r,r=xh(r);if(!Xn)return r;if(n&&r?.nodeType!==tz){var s=th();return r===null?i?.after(s):r.before(s),Ba(s),s}return Ba(r),r}function j0e(t){t.textContent=""}function Kot(){return!1}function q0e(t){var e=Kn;if(e===null)return $n.f|=u0,t;if((e.f&QD)===0){if((e.f&KD)===0)throw t;e.b.error(t)}else xv(t,e)}function xv(t,e){for(;e!==null;){if((e.f&KD)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const d6=new Set;let rs=null,xl=null,xf=[],eT=null,EN=!1,Uw=!1,am=class DN{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){xf=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#u(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(rs=null,mJ(n.render_effects),mJ(n.effects),this.#l?.resolve()),xl=null}#s(e,n){e.f^=fo;for(var r=e.first;r!==null;){var i=r.f,s=(i&(np|k1))!==0,o=s&&(i&fo)!==0,a=o||(i&Ml)!==0||this.skipped_effects.has(r);if((r.f&KD)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){s?r.f^=fo:(i&YD)!==0?n.effects.push(r):RS(r)&&((r.f&tp)!==0&&n.block_effects.push(r),u3(r));var l=r.first;if(l!==null){r=l;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(e){for(const n of e)((n.f&Ga)!==0?this.#a:this.#i).push(n),bo(n,fo)}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&u0)===0&&(this.current.set(e,e.v),xl?.set(e,e.v))}activate(){rs=this,this.apply()}deactivate(){rs=null,xl=null}flush(){if(this.activate(),xf.length>0){if(V0e(),rs!==null&&rs!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#c()}#c(){if(d6.size>1){this.previous.clear();var e=xl,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of d6){if(i===this){n=!1;continue}const s=[];for(const[a,l]of this.current){if(i.current.has(a))if(n&&l!==i.current.get(a))i.current.set(a,l);else continue;s.push(a)}if(s.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){const a=new Set,l=new Map;for(const u of s)W0e(u,o,a,l);if(xf.length>0){rs=i,i.apply();for(const u of xf)i.#s(u,r);xf=[],i.deactivate()}}}rs=null,xl=e}this.committed=!0,d6.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#a)bo(e,Ga),r1(e);for(const e of this.#i)bo(e,rp),r1(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=D0e()).promise}static ensure(){if(rs===null){const e=rs=new DN;d6.add(rs),Uw||DN.enqueue(()=>{rs===e&&e.flush()})}return rs}static enqueue(e){_2(e)}apply(){}};function Qot(t){var e=Uw;Uw=!0;try{for(var n;;){if(Yot(),xf.length===0&&(rs?.flush(),xf.length===0))return eT=null,n;V0e()}}finally{Uw=e}}function V0e(){var t=Am;EN=!0;try{var e=0;for(yJ(!0);xf.length>0;){var n=am.ensure();if(e++>1e3){var r,i;Jot()}n.process(xf),c0.clear()}}finally{EN=!1,yJ(t),eT=null}}function Jot(){try{Mot()}catch(t){xv(t,eT)}}let td=null;function mJ(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(l0|Ml))===0&&RS(r)&&(td=new Set,u3(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?hge(r):r.fn=null),td?.size>0)){c0.clear();for(const i of td){if((i.f&(l0|Ml))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)td.has(o)&&(td.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(l0|Ml))===0&&u3(l)}}td.clear()}}td=null}}function W0e(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Co)!==0?W0e(i,e,n,r):(s&(ez|tp))!==0&&(s&Ga)===0&&H0e(i,e,r)&&(bo(i,Ga),r1(i))}}function H0e(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Co)!==0&&H0e(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function r1(t){for(var e=eT=t;e.parent!==null;){e=e.parent;var n=e.f;if(EN&&e===Kn&&(n&tp)!==0&&(n&_0e)===0)return;if((n&(k1|np))!==0){if((n&fo)===0)return;e.f^=fo}}xf.push(e)}function Zot(t){let e=0,n=i1(0),r;return()=>{nT()&&(Q(n),uz(()=>(e===0&&(r=O1(()=>t(()=>zw(n)))),e+=1,()=>{_2(()=>{e-=1,e===0&&(r?.(),r=void 0,zw(n))})})))}}var eat=yv|x2|KD;function tat(t,e,n){new nat(t,e,n)}class nat{parent;#e=!1;#t;#n=Xn?zn:null;#r;#l;#a;#i=null;#s=null;#o=null;#u=null;#c=null;#d=0;#f=0;#p=!1;#h=null;#y=Zot(()=>(this.#h=i1(this.#d),()=>{this.#h=null}));constructor(e,n,r){this.#t=e,this.#r=n,this.#l=r,this.parent=Kn.b,this.#e=!!this.#r.pending,this.#a=rT(()=>{if(Kn.b=this,Xn){const s=this.#n;IS(),s.nodeType===w2&&s.data===JD?this.#v():this.#b()}else{var i=this.#x();try{this.#i=Ju(()=>r(i))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},eat),Xn&&(this.#t=zn)}#b(){try{this.#i=Ju(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#v(){const e=this.#r.pending;e&&(this.#s=Ju(()=>e(this.#t)),am.enqueue(()=>{var n=this.#x();this.#i=this.#g(()=>(am.ensure(),Ju(()=>this.#l(n)))),this.#f>0?this.#m():(Db(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#x(){var e=this.#t;return this.#e&&(this.#c=th(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#g(e){var n=Kn,r=$n,i=Ya;nh(this.#a),Fa(this.#a),vv(this.#a.ctx);try{return e()}catch(s){return q0e(s),null}finally{nh(n),Fa(r),vv(i)}}#m(){const e=this.#r.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),gge(this.#i,this.#u)),this.#s===null&&(this.#s=Ju(()=>e(this.#t)))}#w(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(e);return}this.#f+=e,this.#f===0&&(this.#e=!1,this.#s&&Db(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#w(e),this.#d+=e,this.#h&&wv(this.#h,this.#d)}get_effect_pending(){return this.#y(),Q(this.#h)}error(e){var n=this.#r.onerror;let r=this.#r.failed;if(this.#p||!n&&!r)throw e;this.#i&&(ta(this.#i),this.#i=null),this.#s&&(ta(this.#s),this.#s=null),this.#o&&(ta(this.#o),this.#o=null),Xn&&(Ba(this.#n),P0e(),Ba(KE()));var i=!1,s=!1;const o=()=>{if(i){Xot();return}i=!0,s&&Pot(),am.ensure(),this.#d=0,this.#o!==null&&Db(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#g(()=>(this.#p=!1,Ju(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var a=$n;try{Fa(null),s=!0,n?.(e,o),s=!1}catch(l){xv(l,this.#a&&this.#a.parent)}finally{Fa(a)}r&&_2(()=>{this.#o=this.#g(()=>{am.ensure(),this.#p=!0;try{return Ju(()=>{r(this.#t,()=>e,()=>o)})}catch(l){return xv(l,this.#a.parent),null}finally{this.#p=!1}})})}}function rat(t,e,n,r){const i=tT;if(n.length===0&&t.length===0){r(e.map(i));return}var s=rs,o=Kn,a=iat();function l(){Promise.all(n.map(u=>sat(u))).then(u=>{a();try{r([...e.map(i),...u])}catch(c){(o.f&l0)===0&&xv(c,o)}s?.deactivate(),QE()}).catch(u=>{xv(u,o)})}t.length>0?Promise.all(t).then(()=>{a();try{return l()}finally{s?.deactivate(),QE()}}):l()}function iat(){var t=Kn,e=$n,n=Ya,r=rs;return function(i=!0){nh(t),Fa(e),vv(n),i&&r?.activate()}}function QE(){nh(null),Fa(null),vv(null)}function tT(t){var e=Co|Ga,n=$n!==null&&($n.f&Co)!==0?$n:null;return Kn!==null&&(Kn.f|=x2),{ctx:Ya,deps:null,effects:null,equals:T0e,f:e,fn:t,reactions:null,rv:0,v:eo,wv:0,parent:n??Kn,ac:null}}function sat(t,e){let n=Kn;n===null&&Eot();var r=n.b,i=void 0,s=i1(eo),o=!$n,a=new Map;return pat(()=>{var l=D0e();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{u===rs&&u.committed&&u.deactivate(),QE()})}catch(h){l.reject(h),QE()}var u=rs;if(o){var c=!r.is_pending();r.update_pending_count(1),u.increment(c),a.get(u)?.reject(Hy),a.delete(u),a.set(u,l)}const f=(h,d=void 0)=>{if(u.activate(),d)d!==Hy&&(s.f|=u0,wv(s,d));else{(s.f&u0)!==0&&(s.f^=u0),wv(s,h);for(const[p,m]of a){if(a.delete(p),p===u)break;m.reject(Hy)}}o&&(r.update_pending_count(-1),u.decrement(c))};l.promise.then(f,h=>f(null,h||"unknown"))}),age(()=>{for(const l of a.values())l.reject(Hy)}),new Promise(l=>{function u(c){function f(){c===i?l(s):u(i)}c.then(f,f)}u(i)})}function Wt(t){const e=tT(t);return Z0e(e),e}function G0e(t){const e=tT(t);return e.equals=M0e,e}function Y0e(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ta(e[n])}}function oat(t){for(var e=t.parent;e!==null;){if((e.f&Co)===0)return e;e=e.parent}return null}function az(t){var e,n=Kn;nh(oat(t));try{t.f&=~a3,Y0e(t),e=rge(t)}finally{nh(n)}return e}function X0e(t){var e=az(t);if(t.equals(e)||(t.v=e,t.wv=tge()),!T1)if(xl!==null)nT()&&xl.set(t,t.v);else{var n=(t.f&wc)===0?rp:fo;bo(t,n)}}let TN=new Set;const c0=new Map;let K0e=!1;function i1(t,e){var n={f:0,v:t,reactions:null,equals:T0e,rv:0,wv:0};return n}function qr(t,e){const n=i1(t);return Z0e(n),n}function Q0e(t,e=!1,n=!0){const r=i1(t);return e||(r.equals=M0e),r}function zt(t,e,n=!1){$n!==null&&(!If||($n.f&dJ)!==0)&&N0e()&&($n.f&(Co|tp|ez|dJ))!==0&&!Md?.includes(t)&&Lot();let r=n?om(e):e;return wv(t,r)}function wv(t,e){if(!t.equals(e)){var n=t.v;T1?c0.set(t,e):c0.set(t,n),t.v=e;var r=am.ensure();r.capture(t,n),(t.f&Co)!==0&&((t.f&Ga)!==0&&az(t),bo(t,(t.f&wc)!==0?fo:rp)),t.wv=tge(),J0e(t,Ga),Kn!==null&&(Kn.f&fo)!==0&&(Kn.f&(np|k1))===0&&(ru===null?lat([t]):ru.push(t)),!r.is_fork&&TN.size>0&&!K0e&&aat()}return e}function aat(){K0e=!1;const t=Array.from(TN);for(const e of t)(e.f&fo)!==0&&bo(e,rp),RS(e)&&u3(e);TN.clear()}function zw(t){zt(t,t.v+1)}function J0e(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],o=s.f,a=(o&Ga)===0;if(a&&bo(s,e),(o&Co)!==0){var l=s;xl?.delete(l),(o&a3)===0&&(o&wc&&(s.f|=a3),J0e(l,rp))}else a&&((o&tp)!==0&&td!==null&&td.add(s),r1(s))}}function lz(t){var e=$n,n=Kn;Fa(null),nh(null);try{return t()}finally{Fa(e),nh(n)}}let Am=!1;function yJ(t){Am=t}let T1=!1;function bJ(t){T1=t}let $n=null,If=!1;function Fa(t){$n=t}let Kn=null;function nh(t){Kn=t}let Md=null;function Z0e(t){$n!==null&&(Md===null?Md=[t]:Md.push(t))}let Po=null,fl=0,ru=null;function lat(t){ru=t}let ege=1,l3=0,Cm=l3;function vJ(t){Cm=t}function tge(){return++ege}function RS(t){var e=t.f;if((e&Ga)!==0)return!0;if(e&Co&&(t.f&=~a3),(e&rp)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(RS(s)&&X0e(s),s.wv>t.wv)return!0}(e&wc)!==0&&xl===null&&bo(t,fo)}return!1}function nge(t,e,n=!0){var r=t.reactions;if(r!==null&&!Md?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Co)!==0?nge(s,e,!1):e===s&&(n?bo(s,Ga):(s.f&fo)!==0&&bo(s,rp),r1(s))}}function rge(t){var e=Po,n=fl,r=ru,i=$n,s=Md,o=Ya,a=If,l=Cm,u=t.f;Po=null,fl=0,ru=null,$n=(u&(np|k1))===0?t:null,Md=null,vv(t.ctx),If=!1,Cm=++l3,t.ac!==null&&(lz(()=>{t.ac.abort(Hy)}),t.ac=null);try{t.f|=CN;var c=t.fn,f=c(),h=t.deps;if(Po!==null){var d;if(JE(t,fl),h!==null&&fl>0)for(h.length=fl+Po.length,d=0;d<Po.length;d++)h[fl+d]=Po[d];else t.deps=h=Po;if(Am&&nT()&&(t.f&wc)!==0)for(d=fl;d<h.length;d++)(h[d].reactions??=[]).push(t)}else h!==null&&fl<h.length&&(JE(t,fl),h.length=fl);if(N0e()&&ru!==null&&!If&&h!==null&&(t.f&(Co|rp|Ga))===0)for(d=0;d<ru.length;d++)nge(ru[d],t);return i!==null&&i!==t&&(l3++,ru!==null&&(r===null?r=ru:r.push(...ru))),(t.f&u0)!==0&&(t.f^=u0),f}catch(p){return q0e(p)}finally{t.f^=CN,Po=e,fl=n,ru=r,$n=i,Md=s,vv(o),If=a,Cm=l}}function uat(t,e){let n=e.reactions;if(n!==null){var r=Sot.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Co)!==0&&(Po===null||!Po.includes(e))&&(bo(e,rp),(e.f&wc)!==0&&(e.f^=wc,e.f&=~a3),Y0e(e),JE(e,0))}function JE(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)uat(t,n[r])}function u3(t){var e=t.f;if((e&l0)===0){bo(t,fo);var n=Kn,r=Am;Kn=t,Am=!0;try{(e&tp)!==0?gat(t):fge(t),cge(t);var i=rge(t);t.teardown=typeof i=="function"?i:null,t.wv=ege;var s;_ot&&Bot&&(t.f&Ga)!==0&&t.deps}finally{Am=r,Kn=n}}}function Q(t){var e=t.f,n=(e&Co)!==0;if($n!==null&&!If){var r=Kn!==null&&(Kn.f&l0)!==0;if(!r&&!Md?.includes(t)){var i=$n.deps;if(($n.f&CN)!==0)t.rv<l3&&(t.rv=l3,Po===null&&i!==null&&i[fl]===t?fl++:Po===null?Po=[t]:Po.includes(t)||Po.push(t));else{($n.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[$n]:s.includes($n)||s.push($n)}}}if(T1){if(c0.has(t))return c0.get(t);if(n){var o=t,a=o.v;return((o.f&fo)===0&&o.reactions!==null||sge(o))&&(a=az(o)),c0.set(o,a),a}}else if(n){if(o=t,xl?.has(o))return xl.get(o);RS(o)&&X0e(o),Am&&nT()&&(o.f&wc)===0&&ige(o)}else if(xl?.has(t))return xl.get(t);if((t.f&u0)!==0)throw t.v;return t.v}function ige(t){if(t.deps!==null){t.f^=wc;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Co)!==0&&(e.f&wc)===0&&ige(e)}}function sge(t){if(t.v===eo)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(c0.has(e)||(e.f&Co)!==0&&sge(e))return!0;return!1}function O1(t){var e=If;try{return If=!0,t()}finally{If=e}}const cat=-7169;function bo(t,e){t.f=t.f&cat|e}function fat(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Sm in t)ON(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Sm in n&&ON(n)}}}function ON(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ON(t[r],e)}catch{}const n=rz(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=E0e(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function oge(t){Kn===null&&($n===null&&Oot(),Tot()),T1&&Dot()}function hat(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function wh(t,e,n,r=!0){var i=Kn;i!==null&&(i.f&Ml)!==0&&(t|=Ml);var s={ctx:Ya,deps:null,nodes_start:null,nodes_end:null,f:t|Ga|wc,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{u3(s),s.f|=QD}catch(l){throw ta(s),l}else e!==null&&r1(s);if(r){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&x2)===0&&(o=o.first,(t&tp)!==0&&(t&yv)!==0&&o!==null&&(o.f|=yv)),o!==null&&(o.parent=i,i!==null&&hat(o,i),$n!==null&&($n.f&Co)!==0&&(t&k1)===0)){var a=$n;(a.effects??=[]).push(o)}}return s}function nT(){return $n!==null&&!If}function age(t){const e=wh(XD,null,!1);return bo(e,fo),e.teardown=t,e}function Yh(t){oge();var e=Kn.f,n=!$n&&(e&np)!==0&&(e&QD)===0;if(n){var r=Ya;(r.e??=[]).push(t)}else return lge(t)}function lge(t){return wh(YD|S0e,t,!1)}function jw(t){return oge(),wh(XD|S0e,t,!0)}function dat(t){am.ensure();const e=wh(k1|x2,t,!0);return(n={})=>new Promise(r=>{n.outro?Db(e,()=>{ta(e),r(void 0)}):(ta(e),r(void 0))})}function uge(t){return wh(YD,t,!1)}function pat(t){return wh(ez|x2,t,!0)}function uz(t,e=0){return wh(XD|e,t,!0)}function wl(t,e=[],n=[],r=[],i=!1){rat(r,e,n,s=>{wh(i?YD:XD,()=>t(...s.map(Q)),!0)})}function rT(t,e=0){var n=wh(tp|e,t,!0);return n}function Ju(t,e=!0){return wh(np|x2,t,!0,e)}function cge(t){var e=t.teardown;if(e!==null){const n=T1,r=$n;bJ(!0),Fa(null);try{e.call(null)}finally{bJ(n),Fa(r)}}}function fge(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&lz(()=>{i.abort(Hy)});var r=n.next;(n.f&k1)!==0?n.parent=null:ta(n,e),n=r}}function gat(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&np)===0&&ta(e),e=n}}function ta(t,e=!0){var n=!1;(e||(t.f&_0e)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(mat(t.nodes_start,t.nodes_end),n=!0),fge(t,e&&!n),JE(t,0),bo(t,l0);var r=t.transitions;if(r!==null)for(const s of r)s.stop();cge(t);var i=t.parent;i!==null&&i.first!==null&&hge(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function mat(t,e){for(;t!==null;){var n=t===e?null:xh(t);t.remove(),t=n}}function hge(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Db(t,e,n=!0){var r=[];cz(t,r,!0),dge(r,()=>{n&&ta(t),e&&e()})}function dge(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function cz(t,e,n){if((t.f&Ml)===0){if(t.f^=Ml,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&yv)!==0||(r.f&np)!==0&&(t.f&tp)!==0;cz(r,e,s?n:!1),r=i}}}function fz(t){pge(t,!0)}function pge(t,e){if((t.f&Ml)!==0){t.f^=Ml,(t.f&fo)===0&&(bo(t,Ga),r1(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&yv)!==0||(n.f&np)!==0;pge(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function gge(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:xh(n);e.append(n),n=i}}const mge=new Set,MN=new Set;function yat(t,e,n,r={}){function i(s){if(r.capture||cw.call(e,s),!s.cancelBubble)return lz(()=>n?.call(this,s))}return _2(()=>{e.addEventListener(t,i,r)}),i}function bat(t,e,n,r,i){var s={capture:r,passive:i},o=yat(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&age(()=>{e.removeEventListener(t,o,s)})}function vat(t){for(var e=0;e<t.length;e++)mge.add(t[e]);for(var n of MN)n(t)}let xJ=null;function cw(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;xJ=t;var o=0,a=xJ===t&&t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(s=i[o]||t.target,s!==e){k0e(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=$n,f=Kn;Fa(null),nh(null);try{for(var h,d=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];m!=null&&(!s.disabled||t.target===s)&&m.call(s,t)}catch(y){h?d.push(y):h=y}if(t.cancelBubble||p===e||p===null)break;s=p}if(h){for(let y of d)queueMicrotask(()=>{throw y});throw h}}finally{t.__root=e,delete t.currentTarget,Fa(c),nh(f)}}}function yge(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function f0(t,e){var n=Kn;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function ig(t,e){var n=(e&Wot)!==0,r=(e&Hot)!==0,i,s=!t.startsWith("<!>");return()=>{if(Xn)return f0(zn,null),zn;i===void 0&&(i=yge(s?t:"<!>"+t),n||(i=jd(i)));var o=r||$0e?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=jd(o),l=o.lastChild;f0(a,l)}else f0(o,o);return o}}function xat(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(Xn)return f0(zn,null),zn;if(!s){var o=yge(i),a=jd(o);s=jd(a)}var l=s.cloneNode(!0);return f0(l,l),l}}function ip(t,e){return xat(t,e,"svg")}function Dx(){if(Xn)return f0(zn,null),zn;var t=document.createDocumentFragment(),e=document.createComment(""),n=th();return t.append(e,n),f0(e,n),t}function Ti(t,e){if(Xn){var n=Kn;((n.f&QD)===0||n.nodes_end===null)&&(n.nodes_end=zn),IS();return}t!==null&&t.before(e)}const wat=["touchstart","touchmove"];function _at(t){return wat.includes(t)}function qw(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function bge(t,e){return vge(t,e)}function Sat(t,e){kN(),e.intro=e.intro??!1;const n=e.target,r=Xn,i=zn;try{for(var s=jd(n);s&&(s.nodeType!==w2||s.data!==F0e);)s=xh(s);if(!s)throw bv;_d(!0),Ba(s);const o=vge(t,{...e,anchor:s});return _d(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==bv&&console.warn("Failed to hydrate: ",o),e.recover===!1&&Iot(),kN(),j0e(n),_d(!1),bge(t,e)}finally{_d(r),Ba(i)}}const ly=new Map;function vge(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){kN();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var d=f[h];if(!a.has(d)){a.add(d);var p=_at(d);e.addEventListener(d,cw,{passive:p});var m=ly.get(d);m===void 0?(document.addEventListener(d,cw,{passive:p}),ly.set(d,1)):ly.set(d,m+1)}}};l(nz(mge)),MN.add(l);var u=void 0,c=dat(()=>{var f=n??e.appendChild(th());return tat(f,{pending:()=>{}},h=>{if(s){E1({});var d=Ya;d.c=s}if(i&&(r.$$events=i),Xn&&f0(h,null),u=t(h,r)||{},Xn&&(Kn.nodes_end=zn,zn===null||zn.nodeType!==w2||zn.data!==oz))throw ZD(),bv;s&&D1()}),()=>{for(var h of a){e.removeEventListener(h,cw);var d=ly.get(h);--d===0?(document.removeEventListener(h,cw),ly.delete(h)):ly.set(h,d)}MN.delete(l),f!==n&&f.parentNode?.removeChild(f)}});return IN.set(u,c),u}let IN=new WeakMap;function Aat(t,e){const n=IN.get(t);return n?(IN.delete(t),n(e)):Promise.resolve()}function Cat(t){return new kat(t)}class kat{#e;#t;constructor(e){var n=new Map,r=(s,o)=>{var a=Q0e(o,!1,!1);return n.set(s,a),a};const i=new Proxy({...e.props||{},$$events:{}},{get(s,o){return Q(n.get(o)??r(o,Reflect.get(s,o)))},has(s,o){return o===A0e?!0:(Q(n.get(o)??r(o,Reflect.get(s,o))),Reflect.has(s,o))},set(s,o,a){return zt(n.get(o)??r(o,a),a),Reflect.set(s,o,a)}});this.#t=(e.hydrate?Sat:bge)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&Qot(),this.#e=i.$$events;for(const s of Object.keys(this.#t))s==="$set"||s==="$destroy"||s==="$on"||k0e(this,s,{get(){return this.#t[s]},set(o){this.#t[s]=o},enumerable:!0});this.#t.$set=s=>{Object.assign(i,s)},this.#t.$destroy=()=>{Aat(this.#t)}}$set(e){this.#t.$set(e)}$on(e,n){this.#e[e]=this.#e[e]||[];const r=(...i)=>n.call(this,...i);return this.#e[e].push(r),()=>{this.#e[e]=this.#e[e].filter(i=>i!==r)}}$destroy(){this.#t.$destroy()}}const Eat="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Eat);class xge{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(e,n=!0){this.anchor=e,this.#r=n}#l=()=>{var e=rs;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)fz(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(o);a&&(ta(a.effect),this.#n.delete(o))}for(const[s,o]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var l=document.createDocumentFragment();gge(o,l),l.append(th()),this.#n.set(s,{effect:o,fragment:l})}else ta(o);this.#t.delete(s)};this.#r||!r?Db(o,a,!1):a()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#n)n.includes(r)||(ta(i.effect),this.#n.delete(r))};ensure(e,n){var r=rs,i=Kot();n&&!this.#t.has(e)&&!this.#n.has(e)&&this.#t.set(e,Ju(()=>n(this.anchor))),this.#e.set(r,e),i||(Xn&&(this.anchor=zn),this.#l())}}function hz(t){Ya===null&&I0e(),Yh(()=>{const e=O1(t);if(typeof e=="function")return e})}function Dat(t){Ya===null&&I0e(),hz(()=>()=>O1(t))}function ga(t,e,n=!1){Xn&&IS();var r=new xge(t),i=n?yv:0;function s(o,a){if(Xn){const u=B0e(t)===JD;if(o===u){var l=KE();Ba(l),r.anchor=l,_d(!1),r.ensure(o,a),_d(!0);return}}r.ensure(o,a)}rT(()=>{var o=!1;e((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},i)}function Tat(t,e,n){Xn&&IS();var r=new xge(t);rT(()=>{var i=e();r.ensure(i,n)})}function SM(t,e){return e}function Oat(t,e,n){for(var r=t.items,i=[],s=e.length,o=0;o<s;o++)cz(e[o].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;j0e(l),l.append(n),r.clear(),of(t,e[0].prev,e[s-1].next)}dge(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(r.delete(c.k),of(t,c.prev,c.next)),ta(c.e,!a)}})}function AM(t,e,n,r,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&R0e)!==0;if(l){var u=t;o=Xn?Ba(jd(u)):u.appendChild(th())}Xn&&IS();var c=null,f=!1,h=new Map,d=G0e(()=>{var b=n();return C0e(b)?b:b==null?[]:nz(b)}),p,m;function y(){Mat(m,p,a,h,o,i,e,r,n),s!==null&&(p.length===0?c?fz(c):c=Ju(()=>s(o)):c!==null&&Db(c,()=>{c=null}))}rT(()=>{m??=Kn,p=Q(d);var b=p.length;if(f&&b===0)return;f=b===0;let v=!1;if(Xn){var w=B0e(o)===JD;w!==(b===0)&&(o=KE(),Ba(o),_d(!1),v=!0)}if(Xn){for(var _=null,S,A=0;A<b;A++){if(zn.nodeType===w2&&zn.data===oz){o=zn,v=!0,_d(!1);break}var C=p[A],D=r(C,A);S=wge(zn,a,_,null,C,D,A,i,e,n),a.items.set(D,S),_=S}b>0&&Ba(KE())}Xn?b===0&&s&&(c=Ju(()=>s(o))):y(),v&&_d(!0),Q(d)}),Xn&&(o=zn)}function Mat(t,e,n,r,i,s,o,a,l){var u=(o&$ot)!==0,c=(o&(iz|sz))!==0,f=e.length,h=n.items,d=n.first,p=d,m,y=null,b,v=[],w=[],_,S,A,C;if(u)for(C=0;C<f;C+=1)_=e[C],S=a(_,C),A=h.get(S),A!==void 0&&(A.a?.measure(),(b??=new Set).add(A));for(C=0;C<f;C+=1){if(_=e[C],S=a(_,C),A=h.get(S),A===void 0){var D=r.get(S);if(D!==void 0){r.delete(S),h.set(S,D);var T=y?y.next:p;of(n,y,D),of(n,D,T),CM(D,T,i),y=D}else{var M=p?p.e.nodes_start:i;y=wge(M,n,y,y===null?n.first:y.next,_,S,C,s,o,l)}h.set(S,y),v=[],w=[],p=y.next;continue}if(c&&Iat(A,_,C,o),(A.e.f&Ml)!==0&&(fz(A.e),u&&(A.a?.unfix(),(b??=new Set).delete(A))),A!==p){if(m!==void 0&&m.has(A)){if(v.length<w.length){var I=w[0],N;y=I.prev;var P=v[0],O=v[v.length-1];for(N=0;N<v.length;N+=1)CM(v[N],I,i);for(N=0;N<w.length;N+=1)m.delete(w[N]);of(n,P.prev,O.next),of(n,y,P),of(n,O,I),p=I,y=O,C-=1,v=[],w=[]}else m.delete(A),CM(A,p,i),of(n,A.prev,A.next),of(n,A,y===null?n.first:y.next),of(n,y,A),y=A;continue}for(v=[],w=[];p!==null&&p.k!==S;)(p.e.f&Ml)===0&&(m??=new Set).add(p),w.push(p),p=p.next;if(p===null)continue;A=p}v.push(A),y=A,p=A.next}if(p!==null||m!==void 0){for(var R=m===void 0?[]:nz(m);p!==null;)(p.e.f&Ml)===0&&R.push(p),p=p.next;var L=R.length;if(L>0){var B=(o&R0e)!==0&&f===0?i:null;if(u){for(C=0;C<L;C+=1)R[C].a?.measure();for(C=0;C<L;C+=1)R[C].a?.fix()}Oat(n,R,B)}}u&&_2(()=>{if(b!==void 0)for(A of b)A.a?.apply()}),t.first=n.first&&n.first.e,t.last=y&&y.e;for(var z of r.values())ta(z.e);r.clear()}function Iat(t,e,n,r){(r&iz)!==0&&wv(t.v,e),(r&sz)!==0?wv(t.i,n):t.i=n}function wge(t,e,n,r,i,s,o,a,l,u,c){var f=(l&iz)!==0,h=(l&Uot)===0,d=f?h?Q0e(i,!1,!1):i1(i):i,p=(l&sz)===0?o:i1(o),m={i:p,v:d,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var y=document.createDocumentFragment();y.append(t=th())}return m.e=Ju(()=>a(t,d,p,u),Xn),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?c||(e.first=m):(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function CM(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var o=xh(s);i.before(s),s=o}}function of(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Yu(t,e,n){uge(()=>{var r=O1(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};uz(()=>{var o=n();fat(o),i&&O0e(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function wJ(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var s=t[i];s!=null&&s!==""&&(r+=" "+i+": "+s+n)}return r}function Rat(t,e){if(e){var n="",r,i;return Array.isArray(e)?(r=e[0],i=e[1]):r=e,r&&(n+=wJ(r)),i&&(n+=wJ(i,!0)),n=n.trim(),n===""?null:n}return String(t)}function kM(t,e={},n,r){for(var i in n){var s=n[i];e[i]!==s&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,s,r))}}function Ln(t,e,n,r){var i=t.__style;if(Xn||i!==e){var s=Rat(e,r);(!Xn||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else r&&(Array.isArray(r)?(kM(t,n?.[0],r[0]),kM(t,n?.[1],r[1],"important")):kM(t,n,r));return r}const Fat=Symbol("is custom element"),Nat=Symbol("is html");function tt(t,e,n,r){var i=Lat(t);Xn&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[wot]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Pat(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Lat(t){return t.__attributes??={[Fat]:t.nodeName.includes("-"),[Nat]:t.namespaceURI===Got}}var _J=new Map;function Pat(t){var e=t.getAttribute("is")||t.nodeName,n=_J.get(e);if(n)return n;_J.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=E0e(i);for(var o in r)r[o].set&&n.push(o);i=rz(i)}return n}function SJ(t,e){return t===e||t?.[Sm]===e}function RN(t={},e,n,r){return uge(()=>{var i,s;return uz(()=>{i=s,s=[],O1(()=>{t!==n(...s)&&(e(t,...s),i&&SJ(n(...i),t)&&e(null,...i))})}),()=>{_2(()=>{s&&SJ(n(...s),t)&&e(null,...s)})}}),t}let p6=!1;function Bat(t){var e=p6;try{return p6=!1,[t(),p6]}finally{p6=e}}function bt(t,e,n,r){var i=(n&qot)!==0,s=(n&Vot)!==0,o=r,a=!0,l=()=>(a&&(a=!1,o=s?O1(r):r),o),u;if(i){var c=Sm in t||A0e in t;u=Eb(t,e)?.set??(c&&e in t?v=>t[e]=v:void 0)}var f,h=!1;i?[f,h]=Bat(()=>t[e]):f=t[e],f===void 0&&r!==void 0&&(f=l(),u&&(Rot(),u(f)));var d;if(d=()=>{var v=t[e];return v===void 0?l():(a=!0,v)},(n&jot)===0)return d;if(u){var p=t.$$legacy;return(function(v,w){return arguments.length>0?((!w||p||h)&&u(w?d():v),v):d()})}var m=!1,y=((n&zot)!==0?tT:G0e)(()=>(m=!1,d()));i&&Q(y);var b=Kn;return(function(v,w){if(arguments.length>0){const _=w?Q(y):i?om(v):v;return zt(y,_),m=!0,o!==void 0&&(o=_),v}return T1&&m||(b.f&l0)!==0?y.v:Q(y)})}var $at=ip('<g><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect></g>');function Uat(t,e){E1(e,!0);let n=Wt(()=>e.pointLocation(e.value.xMin,e.value.yMin)),r=Wt(()=>e.pointLocation(e.value.xMax,e.value.yMax));const i=8;function s(y){return b=>{e.preventHover(!0);let v=[Q(n).x,Q(n).y,Q(r).x,Q(r).y];return{move:w=>{let _=w.pageX-b.pageX,S=w.pageY-b.pageY,A=[_,S,_,S].map((T,M)=>v[M]+T*y[M]),C=e.coordinateAtPoint(A[0],A[1]),D=e.coordinateAtPoint(A[2],A[3]);e.onChange({xMin:Math.min(C.x,D.x),xMax:Math.max(C.x,D.x),yMin:Math.min(C.y,D.y),yMax:Math.max(C.y,D.y)})},up:()=>{e.preventHover(!1)},cancel:()=>{e.preventHover(!1)}}}}var o=$at(),a=Ss(o);Ln(a,"",{},{stroke:"#fff",fill:"rgba(128,128,128,0.25)",cursor:"move"}),Yu(a,(y,b)=>Hi?.(y,b),()=>({drag:s([1,1,1,1])}));var l=oi(a);tt(l,"width",i),Ln(l,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(l,(y,b)=>Hi?.(y,b),()=>({drag:s([1,0,0,0])}));var u=oi(l);tt(u,"width",i),Ln(u,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(u,(y,b)=>Hi?.(y,b),()=>({drag:s([0,0,1,0])}));var c=oi(u);tt(c,"height",i),Ln(c,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(c,(y,b)=>Hi?.(y,b),()=>({drag:s([0,1,0,0])}));var f=oi(c);tt(f,"height",i),Ln(f,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(f,(y,b)=>Hi?.(y,b),()=>({drag:s([0,0,0,1])}));var h=oi(f);tt(h,"width",i),tt(h,"height",i),Ln(h,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(h,(y,b)=>Hi?.(y,b),()=>({drag:s([1,1,0,0])}));var d=oi(h);tt(d,"width",i),tt(d,"height",i),Ln(d,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(d,(y,b)=>Hi?.(y,b),()=>({drag:s([1,0,0,1])}));var p=oi(d);tt(p,"width",i),tt(p,"height",i),Ln(p,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(p,(y,b)=>Hi?.(y,b),()=>({drag:s([0,1,1,0])}));var m=oi(p);tt(m,"width",i),tt(m,"height",i),Ln(m,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),Yu(m,(y,b)=>Hi?.(y,b),()=>({drag:s([0,0,1,1])})),Xi(o),wl((y,b,v,w,_,S,A,C,D,T,M,I)=>{tt(a,"x",y),tt(a,"width",b),tt(a,"y",v),tt(a,"height",w),tt(l,"x",Q(n).x-i/2),tt(l,"y",_),tt(l,"height",S),tt(u,"x",Q(r).x-i/2),tt(u,"y",A),tt(u,"height",C),tt(c,"x",D),tt(c,"width",T),tt(c,"y",Q(n).y-i/2),tt(f,"x",M),tt(f,"width",I),tt(f,"y",Q(r).y-i/2),tt(h,"x",Q(n).x-i/2),tt(h,"y",Q(n).y-i/2),tt(d,"x",Q(n).x-i/2),tt(d,"y",Q(r).y-i/2),tt(p,"x",Q(r).x-i/2),tt(p,"y",Q(n).y-i/2),tt(m,"x",Q(r).x-i/2),tt(m,"y",Q(r).y-i/2)},[()=>Math.min(Q(n).x,Q(r).x),()=>Math.abs(Q(n).x-Q(r).x),()=>Math.min(Q(n).y,Q(r).y),()=>Math.abs(Q(n).y-Q(r).y),()=>Math.min(Q(n).y,Q(r).y),()=>Math.abs(Q(n).y-Q(r).y),()=>Math.min(Q(n).y,Q(r).y),()=>Math.abs(Q(n).y-Q(r).y),()=>Math.min(Q(n).x,Q(r).x),()=>Math.abs(Q(n).x-Q(r).x),()=>Math.min(Q(n).x,Q(r).x),()=>Math.abs(Q(n).x-Q(r).x)]),Ti(t,o),D1()}function zat(t,e){let n=!1,r,i,s,o=300,a=300,l=async c=>{n=!0;try{await t(c)}catch(f){console.error(f)}if(n=!1,r!==void 0){let f=r;r=void 0,u(f)}},u=async c=>{if(n){r=c;return}let f=new Date().getTime();e()&&(i=f);let h=!0;(i==null||f-i<a)&&(h=!1),h?(s&&clearTimeout(s),s=setTimeout(()=>l(c),o)):l(c)};return u}function jat(t,e){let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function qat(t){return"M "+t.map(({x:e,y:n})=>`${e},${n}`).join(" L ")+" Z"}function _ge(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(let{x:s,y:o}of t)e=Math.min(e,s),r=Math.min(r,o),n=Math.max(n,s),i=Math.max(i,o);return{xMin:e,yMin:r,xMax:n,yMax:i}}async function Vat(t){let e=JSON.stringify(t);return Hat(e)}function Gp(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object"||Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(e.hasOwnProperty(n)){if(!Gp(t[n],e[n]))return!1}else return!1;return!0}function Wat(t,e=0){let n=3735928559^e,r=1103547991^e;for(let i=0;i<t.length;i++){let s=t[i];n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677)}return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),[r>>>0,n>>>0]}function Hat(t){let e=new TextEncoder().encode(t),n=Wat(e);return n[0].toString(16).padStart(8,"0")+n[1].toString(16).padStart(8,"0")}var Gat=ip("<path></path>");function Yat(t,e){E1(e,!0);let n=Wt(()=>e.value.map(({x:i,y:s})=>e.pointLocation(i,s)));var r=Gat();Ln(r,"",{},{stroke:"#fff",fill:"rgba(128,128,128,0.25)"}),wl(i=>tt(r,"d",i),[()=>qat(Q(n))]),Ti(t,r),D1()}const Xat={marquee:"M7 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m1-.25c0 .414.336.75.75.75h6.5a.75.75 0 0 0 0-1.5h-6.5a.75.75 0 0 0-.75.75M4.75 8a.75.75 0 0 0-.75.75v6.5a.75.75 0 0 0 1.5 0v-6.5A.75.75 0 0 0 4.75 8m14.5 0a.75.75 0 0 0-.75.75v6.5a.75.75 0 0 0 1.5 0v-6.5a.75.75 0 0 0-.75-.75M8.75 20a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5zM5 21a2 2 0 1 0 0-4a2 2 0 0 0 0 4M21 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m-2 16a2 2 0 1 0 0-4a2 2 0 0 0 0 4",lasso:"M9.703 2.265A10 10 0 0 1 12 2c.79 0 1.559.092 2.297.265a.75.75 0 1 1-.343 1.46A8.5 8.5 0 0 0 12 3.5a8.6 8.6 0 0 0-1.954.225a.75.75 0 1 1-.343-1.46m-1.93 1.47a.75.75 0 0 1-.242 1.033a8.55 8.55 0 0 0-2.763 2.763a.75.75 0 1 1-1.275-.79a10.05 10.05 0 0 1 3.248-3.248a.75.75 0 0 1 1.032.243m8.454 0a.75.75 0 0 1 1.032-.242a10.05 10.05 0 0 1 3.248 3.248a.75.75 0 1 1-1.275.79a8.55 8.55 0 0 0-2.763-2.763a.75.75 0 0 1-.242-1.032m-13.06 5.41a.75.75 0 0 1 .558.901A8.5 8.5 0 0 0 3.5 12c0 .673.078 1.327.225 1.954a.75.75 0 1 1-1.46.343A10 10 0 0 1 2 12c0-.79.092-1.559.265-2.297a.75.75 0 0 1 .902-.559m17.666 0a.75.75 0 0 1 .902.558a10.1 10.1 0 0 1 0 4.595a.75.75 0 1 1-1.46-.343a8.54 8.54 0 0 0-.001-3.908a.75.75 0 0 1 .559-.902M3.736 16.226a.75.75 0 0 1 1.032.242a8.55 8.55 0 0 0 2.763 2.763a.75.75 0 0 1-.79 1.275a10.05 10.05 0 0 1-3.248-3.248a.75.75 0 0 1 .243-1.032m16.685.858a.75.75 0 1 0-1.342-.67l-.002.004l-.015.029l-.069.123a8 8 0 0 1-.289.466a9.6 9.6 0 0 1-.965 1.219c-1.17-1.073-2.756-2.006-4.74-2.006c-2.347 0-3.99 1.203-3.99 2.875S10.653 22 13 22c1.942 0 3.495-.75 4.658-1.645a11.7 11.7 0 0 1 1.315 2.01q.05.099.073.149l.017.035l.004.009a.75.75 0 0 0 1.368-.615c-.087-.183 0-.001 0-.001v-.002l-.003-.004l-.007-.015l-.024-.052l-.091-.184a13.2 13.2 0 0 0-1.538-2.337a11 11 0 0 0 1.525-2.032l.09-.162l.024-.047l.007-.014l.002-.005zM13 17.75c1.433 0 2.644.652 3.616 1.512c-.95.7-2.155 1.238-3.616 1.238c-1.973 0-2.49-.922-2.49-1.375s.517-1.375 2.49-1.375"};var Kat=ip('<svg width="24" height="24" viewBox="0 0 24 24"><path></path></svg>'),Qat=ig("<button><!></button>");function AJ(t,e){let n=bt(e,"active",3,!1);var r=Qat();r.__click=function(...a){e.onClick?.apply(this,a)};let i;var s=Ss(r);{var o=a=>{var l=Kat();Ln(l,"",{},{width:"14px",height:"14px"});var u=Ss(l);Ln(u,"",{},{fill:"currentColor"}),Xi(l),wl(()=>tt(u,"d",Xat[e.icon])),Ti(a,l)};ga(s,a=>{e.icon!=null&&a(o)})}Xi(r),wl(()=>{tt(r,"title",e.title),i=Ln(r,"",i,{border:"none",appearance:"none",background:n()?"color-mix(in srgb, currentColor 20%, transparent)":"none","border-radius":"2px",height:"16px",width:"16px",padding:"0",margin:"0","font-family":"inherit","font-size":"1em",color:"currentColor",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"})}),Ti(t,r)}vat(["click"]);var Jat=ig('<div><div> </div> <svg height="6px"><line shape-rendering="crispEdges"></line><line shape-rendering="crispEdges"></line><line shape-rendering="crispEdges"></line></svg></div>');function Zat(t,e){function n(h,d){let p=Math.log10(d*h),m=Math.round(p),y=[.1,.2,.5,1,2,5,10],b=0,v=1e10;for(let w of y){let _=Math.abs(Math.log10(w)+m-p);_<v&&(b=w,v=_)}return b*Math.pow(10,m)}let r=Wt(()=>n(e.distancePerPoint,30)),i=Wt(()=>Q(r)/e.distancePerPoint);var s=Jat();Ln(s,"",{},{display:"flex","align-items":"center"});var o=Ss(s);Ln(o,"",{},{"padding-right":"4px"});var a=Ss(o,!0);Xi(o);var l=oi(o,2),u=Ss(l);tt(u,"x1",1),tt(u,"y1",3),tt(u,"y2",3),Ln(u,"",{},{stroke:"currentColor","stroke-width":"2","stroke-cap":"butt"});var c=oi(u);tt(c,"x1",1),tt(c,"x2",1),tt(c,"y1",0),tt(c,"y2",6),Ln(c,"",{},{stroke:"currentColor"});var f=oi(c);tt(f,"y1",0),tt(f,"y2",6),Ln(f,"",{},{stroke:"currentColor"}),Xi(l),Xi(s),wl(h=>{qw(a,h),tt(l,"width",`${Q(i)+2}px`),tt(u,"x2",Q(i)+1),tt(f,"x1",Q(i)+1),tt(f,"x2",Q(i)+1)},[()=>Q(r).toLocaleString()]),Ti(t,s)}var elt=ig("<div> </div>"),tlt=ig('<a target="_blank"> </a> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div>',1),nlt=ig('<div><div><!></div> <div></div> <div><!> <!> <!> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div> <!> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div> <span> </span></div></div>');function rlt(t,e){E1(e,!0);let n=bt(e,"statusMessage",3,null);var r=nlt();let i;var s=Ss(r);let o;var a=Ss(s);{var l=w=>{var _=elt();Ln(_,"",{},{display:"inline-block"});var S=Ss(_,!0);Xi(_),wl(()=>qw(S,n())),Ti(w,_)};ga(a,w=>{n()!=null&&w(l)})}Xi(s);var u=oi(s,2);Ln(u,"",{},{flex:"1 1 0%"});var c=oi(u,2);let f;var h=Ss(c);{var d=w=>{var _=tlt(),S=Ry(_);Ln(S,"",{},{color:"currentColor","text-decoration":"underline"});var A=Ss(S,!0);Xi(S),P0e(2),wl(()=>{tt(S,"href",e.resolvedTheme.brandingLink.href),qw(A,e.resolvedTheme.brandingLink.text)}),Ti(w,_)};ga(h,w=>{e.resolvedTheme.brandingLink!=null&&w(d)})}var p=oi(h,2);{let w=Wt(()=>e.selectionMode=="marquee");AJ(p,{icon:"marquee",get active(){return Q(w)},title:"Toggle rectangle selection mode. In normal mode, use shift + drag for rectangle selection.",onClick:()=>e.onSelectionMode(e.selectionMode=="marquee"?"none":"marquee")})}var m=oi(p,2);{let w=Wt(()=>e.selectionMode=="lasso");AJ(m,{icon:"lasso",get active(){return Q(w)},title:"Toggle lasso selection mode. In normal mode, use shift + meta + drag for lasso selection.",onClick:()=>e.onSelectionMode(e.selectionMode=="lasso"?"none":"lasso")})}var y=oi(m,4);Zat(y,{get distancePerPoint(){return e.distancePerPoint}});var b=oi(y,4),v=Ss(b);Xi(b),Xi(c),Xi(r),wl(w=>{i=Ln(r,"",i,{"font-size":"12px","line-height":"20px",height:"20px",color:e.resolvedTheme.statusBarTextColor,position:"absolute",bottom:"0px",left:"0px",right:"0px","user-select":"none","font-family":e.resolvedTheme.fontFamily,display:"flex","flex-direction":"row"}),o=Ln(s,"",o,{flex:"none",display:"flex","flex-direction":"row",gap:"4px",padding:"0px 4px","border-radius":"2px",background:e.resolvedTheme.statusBarBackgroundColor}),f=Ln(c,"",f,{flex:"none",display:"flex","flex-direction":"row","align-items":"center",gap:"4px",padding:"0px 4px","border-radius":"2px",background:e.resolvedTheme.statusBarBackgroundColor}),qw(v,`${w??""} points`)},[()=>e.pointCount.toLocaleString()]),Ti(t,r),D1()}function ilt(t){return(e,n)=>{let r=new t(e,n);return{...r.update?{update:r.update.bind(r)}:{},...r.destroy?{destroy:r.destroy.bind(r)}:{}}}}let EM=new WeakMap;function Sge(t){let e=typeof t=="function"?t:t.class;if(EM.has(e))return EM.get(e);{let n=ilt(e);return EM.set(e,n),n}}function Age(t,e){return typeof t=="function"?e:{...t.props??{},...e}}var slt=ig("<div><div></div></div>");function olt(t,e){E1(e,!0);let n=bt(e,"margin",3,4),r,i,s=Wt(()=>Sge(e.customTooltip)),o=Wt(()=>Age(e.customTooltip,{tooltip:e.tooltip}));hz(()=>{jw(()=>{let u=Q(s),c=null;return jw(()=>{i.style.left="0px",i.style.top="0px",i.style.pointerEvents=e.allowInteraction?"all":"none",c==null?c=u(i,Q(o)):c.update?.(Q(o));function f(y,b,v,w){let _=e.location.x,S=e.location.y,A=2,C=y/2,D=b+(e.targetHeight+n());_-C<v&&(C=_-v),_-C>w-y&&(C=_-w+y),S-D<A&&(D=-(e.targetHeight+n())),i.style.left=_-C+"px",i.style.top=S-D+"px"}let h=r.getBoundingClientRect(),{width:d,height:p}=i.getBoundingClientRect();f(d,p,2,h.width-2);let m=requestAnimationFrame(()=>{m=null;let y=i.getBoundingClientRect();(y.width!=d||y.height!=p)&&f(y.width,y.height,2,h.width-2)});return()=>{m!=null&&cancelAnimationFrame(m)}}),()=>{c?.destroy?.(),i.replaceChildren()}})});var a=slt();Ln(a,"",{},{position:"absolute",width:"100%"});var l=Ss(a);Ln(l,"",{},{display:"flex",position:"absolute",width:"fit-content",height:"fit-content","z-index":"100"}),RN(l,u=>i=u,()=>i),Xi(a),RN(a,u=>r=u,()=>r),Ti(t,a),D1()}function dz(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Cge(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function FS(){}var c3=.7,ZE=1/c3,Tb="\\s*([+-]?\\d+)\\s*",f3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",alt=/^#([0-9a-f]{3,8})$/,llt=new RegExp(`^rgb\\(${Tb},${Tb},${Tb}\\)$`),ult=new RegExp(`^rgb\\(${Vf},${Vf},${Vf}\\)$`),clt=new RegExp(`^rgba\\(${Tb},${Tb},${Tb},${f3}\\)$`),flt=new RegExp(`^rgba\\(${Vf},${Vf},${Vf},${f3}\\)$`),hlt=new RegExp(`^hsl\\(${f3},${Vf},${Vf}\\)$`),dlt=new RegExp(`^hsla\\(${f3},${Vf},${Vf},${f3}\\)$`),CJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dz(FS,pz,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kJ,formatHex:kJ,formatHex8:plt,formatHsl:glt,formatRgb:EJ,toString:EJ});function kJ(){return this.rgb().formatHex()}function plt(){return this.rgb().formatHex8()}function glt(){return Ege(this).formatHsl()}function EJ(){return this.rgb().formatRgb()}function pz(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=alt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?DJ(e):n===3?new Na(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?g6(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?g6(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=llt.exec(t))?new Na(e[1],e[2],e[3],1):(e=ult.exec(t))?new Na(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=clt.exec(t))?g6(e[1],e[2],e[3],e[4]):(e=flt.exec(t))?g6(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hlt.exec(t))?MJ(e[1],e[2]/100,e[3]/100,1):(e=dlt.exec(t))?MJ(e[1],e[2]/100,e[3]/100,e[4]):CJ.hasOwnProperty(t)?DJ(CJ[t]):t==="transparent"?new Na(NaN,NaN,NaN,0):null}function DJ(t){return new Na(t>>16&255,t>>8&255,t&255,1)}function g6(t,e,n,r){return r<=0&&(t=e=n=NaN),new Na(t,e,n,r)}function mlt(t){return t instanceof FS||(t=pz(t)),t?(t=t.rgb(),new Na(t.r,t.g,t.b,t.opacity)):new Na}function kge(t,e,n,r){return arguments.length===1?mlt(t):new Na(t,e,n,r??1)}function Na(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}dz(Na,kge,Cge(FS,{brighter(t){return t=t==null?ZE:Math.pow(ZE,t),new Na(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?c3:Math.pow(c3,t),new Na(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Na(km(this.r),km(this.g),km(this.b),e5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TJ,formatHex:TJ,formatHex8:ylt,formatRgb:OJ,toString:OJ}));function TJ(){return`#${lm(this.r)}${lm(this.g)}${lm(this.b)}`}function ylt(){return`#${lm(this.r)}${lm(this.g)}${lm(this.b)}${lm((isNaN(this.opacity)?1:this.opacity)*255)}`}function OJ(){const t=e5(this.opacity);return`${t===1?"rgb(":"rgba("}${km(this.r)}, ${km(this.g)}, ${km(this.b)}${t===1?")":`, ${t})`}`}function e5(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function km(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lm(t){return t=km(t),(t<16?"0":"")+t.toString(16)}function MJ(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ic(t,e,n,r)}function Ege(t){if(t instanceof ic)return new ic(t.h,t.s,t.l,t.opacity);if(t instanceof FS||(t=pz(t)),!t)return new ic;if(t instanceof ic)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new ic(o,a,l,t.opacity)}function blt(t,e,n,r){return arguments.length===1?Ege(t):new ic(t,e,n,r??1)}function ic(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}dz(ic,blt,Cge(FS,{brighter(t){return t=t==null?ZE:Math.pow(ZE,t),new ic(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?c3:Math.pow(c3,t),new ic(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Na(DM(t>=240?t-240:t+120,i,r),DM(t,i,r),DM(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ic(IJ(this.h),m6(this.s),m6(this.l),e5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=e5(this.opacity);return`${t===1?"hsl(":"hsla("}${IJ(this.h)}, ${m6(this.s)*100}%, ${m6(this.l)*100}%${t===1?")":`, ${t})`}`}}));function IJ(t){return t=(t||0)%360,t<0?t+360:t}function m6(t){return Math.max(0,Math.min(1,t||0))}function DM(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const RJ=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],y6=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];function S2(t){if(t<1&&(t=1),t<=RJ.length)return RJ.slice(0,t);if(t<=y6.length)return y6.slice(0,t);{let e=[];for(let n=0;n<t;n++)e[n]=y6[n%y6.length];return e}}function gz(t){let{r:e,g:n,b:r,opacity:i}=kge(t);return{r:e/255,g:n/255,b:r/255,a:i}}function Dge(){return[1,0,0,0,1,0,0,0,1]}function mz(t,e){return[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2],t[0]*e[3]+t[3]*e[4]+t[6]*e[5],t[1]*e[3]+t[4]*e[4]+t[7]*e[5],t[2]*e[3]+t[5]*e[4]+t[8]*e[5],t[0]*e[6]+t[3]*e[7]+t[6]*e[8],t[1]*e[6]+t[4]*e[7]+t[7]*e[8],t[2]*e[6]+t[5]*e[7]+t[8]*e[8]]}function Tge(t,e){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]]}function vlt(t){return t[0]*t[4]*t[8]-t[0]*t[5]*t[7]-t[1]*t[3]*t[8]+t[1]*t[5]*t[6]+t[2]*t[3]*t[7]-t[2]*t[4]*t[6]}function Oge(t){let e=vlt(t);return[(t[4]*t[8]-t[5]*t[7])/e,(t[2]*t[7]-t[1]*t[8])/e,(t[1]*t[5]-t[2]*t[4])/e,(t[5]*t[6]-t[3]*t[8])/e,(t[0]*t[8]-t[2]*t[6])/e,(t[2]*t[3]-t[0]*t[5])/e,(t[3]*t[7]-t[4]*t[6])/e,(t[1]*t[6]-t[0]*t[7])/e,(t[0]*t[4]-t[1]*t[3])/e]}class iT{viewport;width;height;_matrix=[0,0,0,0,0,0,0,0,0];_pixel_kx=0;_pixel_bx=0;_pixel_ky=0;_pixel_by=0;constructor(e,n,r){this.viewport=e,this.width=n,this.height=r,this.updateCoefficients()}update(e,n,r){this.viewport=e,this.width=n,this.height=r,this.updateCoefficients()}updateCoefficients(){let{x:e,y:n,scale:r}=this.viewport,i=r,s=r;this.width<this.height?i*=this.height/this.width:s*=this.width/this.height,this._matrix=[i,0,0,0,s,0,-e*i,-n*s,1],this._pixel_kx=this._matrix[0]*this.width/2,this._pixel_bx=(this._matrix[6]+1)*this.width/2,this._pixel_ky=-this._matrix[4]*this.height/2,this._pixel_by=(-this._matrix[7]+1)*this.height/2}matrix(){return this._matrix}pixelLocation(e,n){return{x:e*this._pixel_kx+this._pixel_bx,y:n*this._pixel_ky+this._pixel_by}}coordinateAtPixel(e,n){return{x:(e-this._pixel_bx)/this._pixel_kx,y:(n-this._pixel_by)/this._pixel_ky}}pixelLocationFunction(){let e=this._pixel_kx,n=this._pixel_ky,r=this._pixel_bx,i=this._pixel_by;return(s,o)=>({x:s*e+r,y:o*n+i})}coordinateAtPixelFunction(){let e=this._pixel_kx,n=this._pixel_ky,r=this._pixel_bx,i=this._pixel_by;return(s,o)=>({x:(s-r)/e,y:(o-i)/n})}}let FN=class{_needsRun=!0;_inputs=new Set;_targets=new Set;constructor(e=[]){this._inputs=new Set(e);for(let n of this._inputs)n._targets.add(this)}addInput(e){this._inputs.add(e),e._targets.add(this)}removeInput(e){e._targets.delete(this),this._inputs.delete(e)}run(){if(this._needsRun){for(let e of this._inputs)e.run();this.update(),this._needsRun=!1}}setNeedsRunDownstream(){for(let e of this._targets)e._needsRun||(e._needsRun=!0,e.setNeedsRunDownstream())}update(){}destroy(){for(let e of this._inputs)e._targets.delete(this)}},A2=class extends FN{_value=null;setValue(e){this._value!==e&&(this._value=e,this.setNeedsRunDownstream())}get value(){return this.run(),this._value}};class Mge extends A2{constructor(e){super([]),this.setValue(e)}get value(){return super.value}set value(e){this.setValue(e)}}let xlt=class extends A2{fn;constructor(e,n){super(n),this.fn=e}update(){this.setValue(this.fn())}},wlt=class extends A2{fn;state;constructor(e,n){super(n),this.fn=e,this.state={}}update(){this.setValue(this.fn(this.state))}destroy(){super.destroy(),this.state.destroy&&this.state.destroy(),this.state={}}},_lt=class extends A2{parent;condition;buildTrue;buildFalse;context=null;currentCondition=null;currentNode=null;constructor(e,n,r,i){super([n]),this.parent=e,this.condition=n,this.buildTrue=r,this.buildFalse=i}update(){(this.currentNode==null||this.currentCondition!==this.condition.value)&&(this.currentNode&&this.removeInput(this.currentNode),this.context?.destroy(),this.context=new M1(this.parent),this.currentCondition=this.condition.value,this.currentCondition?this.currentNode=this.buildTrue(this.context):this.currentNode=this.buildFalse(this.context),this.addInput(this.currentNode)),this.setValue(this.currentNode.value)}destroy(){super.destroy(),this.context?.destroy()}},Slt=class extends A2{parent;input;build;cache;constructor(e,n,r){super([n]),this.parent=e,this.input=n,this.build=r,this.cache=new Map}update(){let e=new Set,n=this.input.value.map(r=>{if(e.add(r),this.cache.has(r)){let i=this.cache.get(r);return i.input.value=r,i.output.value}else{let i=new M1(this.parent),s=new Mge(r),o=this.build(i,s);return this.cache.set(r,{context:i,input:s,output:o}),this.addInput(o),o.value}});for(let[r,i]of this.cache)e.has(r)||(this.cache.delete(r),this.removeInput(i.output),i.context.destroy());this.setValue(n)}destroy(){super.destroy();for(let e of this.cache.values())e.context.destroy()}},Alt=class extends A2{parent;input;cases;currentCase=null;currentNode=null;currentContext=null;constructor(e,n,r){super([n]),this.parent=e,this.input=n,this.cases=r}update(){(this.currentNode==null||this.input.value!==this.currentCase)&&(this.currentNode&&this.removeInput(this.currentNode),this.currentContext?.destroy(),this.currentContext=new M1(this.parent),this.currentCase=this.input.value,this.currentNode=this.cases[this.currentCase](this.currentContext),this.addInput(this.currentNode)),this.setValue(this.currentNode.value)}destroy(){super.destroy(),this.currentContext?.destroy()}};class M1{_children;_nodes;constructor(e=null){this._children=new Set,this._nodes=new Set,e?._children.add(this)}destroy(){for(let e of this._children)e.destroy();for(let e of this._nodes)e.destroy();this._children.clear(),this._nodes.clear()}value(e){let n=new Mge(e);return this._nodes.add(n),n}derive(e,n){let r=e.map(s=>s instanceof FN?s:this.value(s)),i=new xlt(()=>n(...r.map(s=>s.value)),r);return this._nodes.add(i),i}statefulDerive(e,n){let r=e.map(s=>s instanceof FN?s:this.value(s)),i=new wlt(s=>n(s,...r.map(o=>o.value)),r);return this._nodes.add(i),i}if(e,n,r){let i=new _lt(this,e,n,r);return this._nodes.add(i),i}switch(e,n){let r=new Alt(this,e,n);return this._nodes.add(r),r}map(e,n){let r=new Slt(this,e,n);return this._nodes.add(r),r}assertNotNull(e){return e}subgraph(){return new M1(this)}}function rh(t,e,n,r){if(t.program==null||t.vsSource!=n||t.fsSource!=r){t.destroy&&t.destroy();let s=FJ(e,e.VERTEX_SHADER,n),o=FJ(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS)){var i=e.getProgramInfoLog(a);throw new Error(`failed to link program: ${i}, vertex source: ${n}, fragment source: ${r}`)}t.program=a,t.vsSource=n,t.fsSource=r,t.destroy=()=>{e.deleteProgram(a),e.deleteShader(s),e.deleteShader(o)},t.uniforms={};for(let l of(n+r).matchAll(/uniform +[0-9a-zA-Z_]+ +([0-9a-zA-Z_]+) *(;|\[)/g)){let u=l[1];t.uniforms[u]=e.getUniformLocation(a,u)}}return{program:t.program,uniforms:t.uniforms??{}}}function FJ(t,e,n){let r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);throw new Error(`failed to compile shader: ${i}, source: ${n}`)}return r}function Wf(t,e,n,r){if(t.buffer==null){let i=e.createBuffer();t.buffer=i,t.destroy=()=>{e.deleteBuffer(i)}}if(t.data!==n){if(t.data=n,e.bindBuffer(e.ARRAY_BUFFER,t.buffer),n instanceof Array)switch(r??"f32"){case"f32":e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);break;case"i32":e.bufferData(e.ARRAY_BUFFER,new Int32Array(n),e.STATIC_DRAW);break;case"u32":e.bufferData(e.ARRAY_BUFFER,new Uint32Array(n),e.STATIC_DRAW);break;case"i16":e.bufferData(e.ARRAY_BUFFER,new Int16Array(n),e.STATIC_DRAW);break;case"u16":e.bufferData(e.ARRAY_BUFFER,new Uint16Array(n),e.STATIC_DRAW);break;case"i8":e.bufferData(e.ARRAY_BUFFER,new Int8Array(n),e.STATIC_DRAW);break;case"u8":e.bufferData(e.ARRAY_BUFFER,new Uint8Array(n),e.STATIC_DRAW);break;default:throw new Error("invalid type")}else e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW);e.bindBuffer(e.ARRAY_BUFFER,null)}return t.buffer}function Clt(t,e,n,r,i){const s={u8:{1:[t.R8,t.RED,t.UNSIGNED_BYTE],2:[t.RG8,t.RG,t.UNSIGNED_BYTE],3:[t.RGB8,t.RGB,t.UNSIGNED_BYTE],4:[t.RGBA8,t.RGBA,t.UNSIGNED_BYTE]},u16:{1:[t.R8,t.RED,t.UNSIGNED_SHORT],2:[t.RG8,t.RG,t.UNSIGNED_SHORT],3:[t.RGB8,t.RGB,t.UNSIGNED_SHORT],4:[t.RGBA8,t.RGBA,t.UNSIGNED_SHORT]},u32:{1:[t.R8,t.RED,t.UNSIGNED_INT],2:[t.RG8,t.RG,t.UNSIGNED_INT],3:[t.RGB8,t.RGB,t.UNSIGNED_INT],4:[t.RGBA8,t.RGBA,t.UNSIGNED_INT]},f32:{1:[t.R32F,t.RED,t.FLOAT],2:[t.RG32F,t.RG,t.FLOAT],3:[t.RGB32F,t.RGB,t.FLOAT],4:[t.RGBA32F,t.RGBA,t.FLOAT]}};let[o,a,l]=s[i][r];t.texImage2D(t.TEXTURE_2D,0,o,e,n,0,a,l,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}function Yp(t,e,n,r,i,s){if(t.framebuffer==null||t.texture==null){let a=e.createFramebuffer(),l=e.createTexture();e.bindFramebuffer(e.FRAMEBUFFER,a),e.bindTexture(e.TEXTURE_2D,l),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,l,0),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),t.framebuffer=a,t.texture=l,t.destroy=()=>{e.deleteFramebuffer(a),e.deleteTexture(l)}}let o=`${n},${r},${i},${s}`;return t.cacheKey!=o&&(t.cacheKey=o,e.bindTexture(e.TEXTURE_2D,t.texture),Clt(e,n,r,i,s),e.bindTexture(e.TEXTURE_2D,null)),{framebuffer:t.framebuffer,texture:t.texture,width:n,height:r}}function klt(t){let e=t.squareMaxSize,n=t.samples,r=`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,i=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;
    void main() {
      vec4 color = vec4(0.0);
      const int count = ${e};
      int i = -count;
      while(i + 1 <= count) {
        color += texture(image, uv + direction * (float(i) + 0.5) / resolution) * 2.0;
        i += 2;
      }
      if (i <= count) {
        color += texture(image, uv + direction * float(count) / resolution);
      }
      outColor = color;
    }
  `,s=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform sampler2D imageBox;
    uniform vec2 resolution;
    uniform float scaler;
    in vec2 uv;
    out vec4 outColor;

    void main() {
      vec4 color = texture(imageBox, uv);
      if (color != vec4(0.0)) {
        ${n.map(({x:o,y:a,w:l})=>`color -= texture(image, uv + vec2(${o.toFixed(8)}, ${a.toFixed(8)}) / resolution) * (${l.toFixed(8)})`).join(";")};
      }
      outColor = color * scaler;
    }
  `;return{vertex:r,fragment1:i,fragment2:s}}function Elt(t,e,n){let r=t.derive([n],Dlt),i=t.derive([r],klt),s=t.statefulDerive([e,t.derive([i],l=>l.vertex),t.derive([i],l=>l.fragment1)],rh),o=t.statefulDerive([e,t.derive([i],l=>l.vertex),t.derive([i],l=>l.fragment2)],rh),a=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,a,s,o,n,r],(l,u,c,f,h,d)=>(p,m,y)=>{let{width:b,height:v}=m;l.disable(l.BLEND),l.enableVertexAttribArray(0),l.bindBuffer(l.ARRAY_BUFFER,u),l.vertexAttribPointer(0,2,l.FLOAT,!1,0,0),l.bindBuffer(l.ARRAY_BUFFER,null),l.useProgram(c.program),l.uniform2f(c.uniforms.resolution,b,v),l.uniform1i(c.uniforms.image,0),l.bindFramebuffer(l.FRAMEBUFFER,m.framebuffer),l.bindTexture(l.TEXTURE_2D,p),l.uniform2f(c.uniforms.direction,0,1),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,y.framebuffer),l.bindTexture(l.TEXTURE_2D,m.texture),l.uniform2f(c.uniforms.direction,1,0),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,m.framebuffer),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,y.texture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,p),l.useProgram(f.program),l.uniform2f(f.uniforms.resolution,b,v),l.uniform1i(f.uniforms.image,0),l.uniform1i(f.uniforms.imageBox,1);let w=1/d.totalWeight*h*h*Math.PI;l.uniform1f(f.uniforms.scaler,w),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,null),l.useProgram(null),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,null),l.disableVertexAttribArray(0)})}function NJ(t,e,n){let r=Math.sqrt(e*e+n*n);if(r<t-Math.sqrt(2)/2)return 1;if(r>t+Math.sqrt(2)/2)return 0;let i=2,s=0;for(let o=0;o<i;o++)for(let a=0;a<i;a++){let l=e+(o+.5)/i-.5,u=n+(a+.5)/i-.5;Math.sqrt(l*l+u*u)<t&&(s+=1)}return s/i/i}function Dlt(t){let e=Math.floor(t+.5),n=e,r=NJ(t,0,0),i=[];for(let a=-e;a<=e;a++)for(let l=-e;l<=e;l++){let u=r-NJ(t,a,l);if(!(u<=0))if(i.length>0&&a==i[i.length-1].x&&l==i[i.length-1].y+1){let c=i[i.length-1].w,f=u;i[i.length-1].y+=1-c/(c+f),i[i.length-1].w=c+f}else i.push({x:a,y:l,w:u})}i=i.sort((a,l)=>a.y!=l.y?a.y-l.y:a.x-l.x);let s=[];for(let{x:a,y:l,w:u}of i)if(s.length>0&&l==s[s.length-1].y&&a==s[s.length-1].x+1){let c=s[s.length-1].w,f=u;s[s.length-1].x+=1-c/(c+f),s[s.length-1].w=c+f}else s.push({x:a,y:l,w:u});let o=-s.reduce((a,l)=>a+l.w,0);return o+=r*(1+n*2)*(1+n*2),{squareMaxSize:n,squareWeight:r,samples:s,totalWeight:o}}function Tlt(t){let e;return t?e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      layout(location=0) in float x;
      layout(location=1) in float y;
      layout(location=2) in int category;
      out vec4 color;
      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        if (category == 0) {
          color = vec4(1, 0, 0, 0);
        } else if (category == 1) {
          color = vec4(0, 1, 0, 0);
        } else if (category == 2) {
          color = vec4(0, 0, 1, 0);
        } else if (category == 3) {
          color = vec4(0, 0, 0, 1);
        }
        gl_PointSize = 1.0;
      }
    `:e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      layout(location=0) in float x;
      layout(location=1) in float y;
      out vec4 color;
      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        color = vec4(1, 0, 0, 0);
        gl_PointSize = 1.0;
      }
    `,{vertex:e,fragment:`#version 300 es
    precision highp float;
    in vec4 color;
    out vec4 outColor;
    void main() {
      outColor = color;
    }
  `}}function NN(t,e,n,r,i,s){let o=i!=null,a=Tlt(o),l=t.statefulDerive([e,a.vertex,a.fragment],rh);return t.derive([e,l,n,r,i,s],(u,c,f,h,d,p)=>m=>{u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE),u.useProgram(c.program),u.enableVertexAttribArray(0),u.bindBuffer(u.ARRAY_BUFFER,f),u.vertexAttribPointer(0,1,u.FLOAT,!1,0,0),u.enableVertexAttribArray(1),u.bindBuffer(u.ARRAY_BUFFER,h),u.vertexAttribPointer(1,1,u.FLOAT,!1,0,0),d!=null&&(u.enableVertexAttribArray(2),u.bindBuffer(u.ARRAY_BUFFER,d),u.vertexAttribIPointer(2,1,u.BYTE,0,0)),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniformMatrix3fv(c.uniforms.matrix,!1,m),u.drawArrays(u.POINTS,0,p),u.disableVertexAttribArray(0),u.disableVertexAttribArray(1),d!=null&&u.disableVertexAttribArray(2),u.useProgram(null)})}function Olt(){return{vertex:`#version 300 es
    precision highp float;
    uniform vec2 xyScaler;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy * xyScaler, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform float gamma;
    in vec2 uv;
    out vec4 outColor;
    void main() {
      vec4 color = texture(source, uv);
      color.rgb = pow(color.rgb, vec3(1.0 / gamma));
      outColor = color;
    }
  `}}function Ige(t,e){let{vertex:n,fragment:r}=Olt(),i=t.statefulDerive([e,n,r],rh),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,i,s],(o,a,l)=>(u,c,f,h)=>{o.disable(o.BLEND),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,u),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.xyScaler,f??1,h??1),o.uniform1f(a.uniforms.gamma,c??2.2),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function Rge(t){return Math.ceil(t*3)}function Mlt(t){let e=Rge(t),n=[];for(let a=-e;a<=e;a++)n.push(Math.exp(-a*a/t/t/2));let r=n.reduce((a,l)=>a+l,0);n=n.map(a=>a/r);let i=Rlt(n).map(([a,l])=>[a-e,l]),s=`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,o=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;

    void main() {
      vec4 color = vec4(0.0);
      ${i.map(([a,l])=>`color += texture(image, uv + direction * vec2(${a.toFixed(10)}) / resolution) * ${l.toFixed(10)};`).join(`
`)}
      outColor = color;
    }
  `;return{vertex:s,fragment:o}}function Ilt(t,e,n){let r=t.derive([n],Mlt),i=t.statefulDerive([e,t.derive([r],o=>o.vertex),t.derive([r],o=>o.fragment)],rh),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,s,i,n],(o,a,l,u)=>(c,f,h)=>{let{width:d,height:p}=f;o.disable(o.BLEND),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,a),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.useProgram(l.program),o.uniform2f(l.uniforms.resolution,d,p),o.uniform1i(l.uniforms.image,0),o.bindFramebuffer(o.FRAMEBUFFER,h.framebuffer),o.bindTexture(o.TEXTURE_2D,c),o.uniform2f(l.uniforms.direction,0,1),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.bindFramebuffer(o.FRAMEBUFFER,f.framebuffer),o.bindTexture(o.TEXTURE_2D,h.texture),o.uniform2f(l.uniforms.direction,1,0),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.bindFramebuffer(o.FRAMEBUFFER,null),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function Rlt(t){let e=[];for(let n=0;n<t.length;n+=2)if(n+1<t.length){let r=t[n],i=t[n+1],s=1-r/(r+i);if(s>=0&&s<=1){let o=r+i;o!=0&&e.push([n+s,o])}else e.push([n,t[n]]),e.push([n+1,t[n+1]])}else e.push([n,t[n]]);return e}function Flt(t){return Math.ceil(t*3)}function Nlt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;

    uniform float weight0;
    uniform vec3 distances;
    uniform vec3 weights;

    void main() {
      vec4 color = texture(image, uv) * weight0;
      if (weights.x != 0.0) {
        color += texture(image, uv + direction * vec2(distances.x) / resolution) * weights.x;
        color += texture(image, uv - direction * vec2(distances.x) / resolution) * weights.x;
      }
      if (weights.y != 0.0) {
        color += texture(image, uv + direction * vec2(distances.y) / resolution) * weights.y;
        color += texture(image, uv - direction * vec2(distances.y) / resolution) * weights.y;
      }
      if (weights.z != 0.0) {
        color += texture(image, uv + direction * vec2(distances.z) / resolution) * weights.z;
        color += texture(image, uv - direction * vec2(distances.z) / resolution) * weights.z;
      }
      outColor = color;
    }
  `}}function Llt(t,e,n){let{vertex:r,fragment:i}=Nlt(),s=t.statefulDerive([e,r,i],rh),o=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,o,s],(a,l,u)=>(c,f,h)=>{let{width:d,height:p}=f;a.disable(a.BLEND),a.enableVertexAttribArray(0),a.bindBuffer(a.ARRAY_BUFFER,l),a.vertexAttribPointer(0,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(u.program),a.uniform2f(u.uniforms.resolution,d,p),a.uniform1i(u.uniforms.image,0);let m=c,y=h,b=f;for(let v=0;v<2;v++){a.uniform2f(u.uniforms.direction,v,1-v);for(let[w,_,S]of Plt){a.bindFramebuffer(a.FRAMEBUFFER,y.framebuffer),a.bindTexture(a.TEXTURE_2D,m),a.uniform1fv(u.uniforms.weight0,_),a.uniform3fv(u.uniforms.distances,w),a.uniform3fv(u.uniforms.weights,S),a.drawArrays(a.TRIANGLE_STRIP,0,4),m=y.texture;let A=y;y=b,b=A}}a.bindFramebuffer(a.FRAMEBUFFER,null),a.useProgram(null),a.bindTexture(a.TEXTURE_2D,null),a.disableVertexAttribArray(0)})}const Plt=[[[1,2,3],[.2288468365182578],[.18230006506971572,.1356122230111784,.06766429365997693]],[[2,6,10],[.09116254014100238],[.23317759354726447,.18385867277788717,.03738246360434722]],[[3,10,20],[.2950645715317288],[.010918865853671198,.23773695670296047,.10381189167750389]],[[4,16,30],[.20085957073474772],[.14463019087130788,.17934533765938643,.07559468610193185]]];function Blt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform float densityScaler;
    uniform float quantizationStep;
    uniform vec4 channelMask;
    uniform vec4 color;
    uniform float globalAlpha;

    in vec2 uv;
    out vec4 outColor;

    float sample_density(vec2 uv) {
      float d = dot(texture(source, uv), channelMask) * densityScaler;
      d = min(1.0, max(0.0, d));
      d = floor(d / quantizationStep);
      return d;
    }

    void main() {
      // Run the Sobel operator.
      float v = sample_density(uv);
      float v11 = sample_density(uv + vec2(-1, -1) / resolution);
      float v12 = sample_density(uv + vec2(-1,  0) / resolution);
      float v13 = sample_density(uv + vec2(-1, +1) / resolution);
      float v21 = sample_density(uv + vec2( 0, -1) / resolution);
      float v23 = sample_density(uv + vec2( 0, +1) / resolution);
      float v31 = sample_density(uv + vec2(+1, -1) / resolution);
      float v32 = sample_density(uv + vec2(+1,  0) / resolution);
      float v33 = sample_density(uv + vec2(+1, +1) / resolution);
      float gx = v11 + v12 * 2.0 + v13 - v31 - v32 * 2.0 - v33;
      float gy = v11 + v21 * 2.0 + v31 - v13 - v23 * 2.0 - v33;
      // Derive alpha value from the result.
      float alpha = length(vec2(gx, gy)) * 0.2;
      alpha = min(1.0, max(0.0, alpha));
      outColor = color * alpha * globalAlpha;
    }
  `}}function $lt(t,e){let{vertex:n,fragment:r}=Blt(),i=t.statefulDerive([e,n,r],rh),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,i,s],(o,a,l)=>(u,c,f,h,d,p)=>{o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,u.texture),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.resolution,u.width,u.height),o.uniform1f(a.uniforms.densityScaler,c),o.uniform1f(a.uniforms.quantizationStep,f),o.uniform1f(a.uniforms.globalAlpha,h),o.uniform4fv(a.uniforms.channelMask,d),o.uniform4fv(a.uniforms.color,p),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function Ult(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
    `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform float densityScaler;
    uniform float quantizationStep;

    uniform mat4 colorMatrix;
    uniform int isDarkMode;
    uniform float globalAlpha;

    in vec2 uv;
    out vec4 outColor;

    /* Combine alphas with symmetric blending equation f(a, b) = a + b - ab. */
    float combine_alphas(vec4 alphas) {
      float r = alphas.x + alphas.y - alphas.x * alphas.y;
      r = r + alphas.z - r * alphas.z;
      r = r + alphas.w - r * alphas.w;
      return r;
    }

    void main() {
      vec4 density = texture(source, uv) * densityScaler;

      if (density.x > 1.0 || density.y > 1.0 || density.z > 1.0 || density.w > 1.0) {
        density = density / max(max(max(density.x, density.y), density.z), density.w);
      } else {
        density = floor(density / quantizationStep) * quantizationStep;
      }

      if (density.x + density.y + density.z + density.w == 0.0) {
        discard;
      }

      float alpha = combine_alphas(density);

      density *= alpha / (density.x + density.y + density.z + density.w);

      vec3 c1 = colorMatrix[0].rgb * density.x;
      vec3 c2 = colorMatrix[1].rgb * density.y;
      vec3 c3 = colorMatrix[2].rgb * density.z;
      vec3 c4 = colorMatrix[3].rgb * density.w;
      vec3 c;

      if (isDarkMode == 0) {
        c = vec3(1.0) - alpha + c1 + c2 + c3 + c4;
      } else {
        c = c1 + c2 + c3 + c4;
      }

      outColor = vec4(c, 1.0) * alpha * globalAlpha;
    }
  `}}function zlt(t,e){let{vertex:n,fragment:r}=Ult(),i=t.statefulDerive([e,n,r],rh),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,i,s],(o,a,l)=>(u,c,f,h,d,p)=>{o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,u.texture),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.resolution,u.width,u.height),o.uniform1f(a.uniforms.densityScaler,c),o.uniform1f(a.uniforms.quantizationStep,f),o.uniform1f(a.uniforms.globalAlpha,h),o.uniform1i(a.uniforms.isDarkMode,p=="dark"?1:0),o.uniformMatrix4fv(a.uniforms.colorMatrix,!1,d),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function jlt(t){let e;return t?e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      uniform float point_size;
      uniform float alpha;
      uniform vec4 colorScheme[64];

      layout(location=0) in float x;
      layout(location=1) in float y;
      layout(location=2) in int category;

      out vec4 color;

      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        if (category < 64) {
          color = colorScheme[category];
        } else {
          color = vec4(0.5, 0.5, 0.5, 1);
        }
        color *= alpha;
        gl_PointSize = point_size;
      }
    `:e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      uniform float point_size;
      uniform vec4 colorScheme;
      uniform float alpha;

      layout(location=0) in float x;
      layout(location=1) in float y;

      out vec4 color;

      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        color = colorScheme;
        color *= alpha;
        gl_PointSize = point_size;
      }
    `,{vertex:e,fragment:`#version 300 es
    precision highp float;
    uniform float point_size;
    in vec4 color;
    out vec4 outColor;
    void main() {
      float r = length(gl_PointCoord.xy - vec2(0.5, 0.5)) * point_size;
      float a = max(0.0, min(1.0, point_size / 2.0 - r));
      outColor = color * a;
    }
  `}}function LJ(t,e,n,r,i,s){let o=i!=null,a=jlt(o),l=t.statefulDerive([e,a.vertex,a.fragment],rh);return t.derive([e,l,n,r,i,s],(u,c,f,h,d,p)=>(m,y,b,v)=>{u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),u.useProgram(c.program),u.enableVertexAttribArray(0),u.bindBuffer(u.ARRAY_BUFFER,f),u.vertexAttribPointer(0,1,u.FLOAT,!1,0,0),u.enableVertexAttribArray(1),u.bindBuffer(u.ARRAY_BUFFER,h),u.vertexAttribPointer(1,1,u.FLOAT,!1,0,0),d!=null&&(u.enableVertexAttribArray(2),u.bindBuffer(u.ARRAY_BUFFER,d),u.vertexAttribIPointer(2,1,u.BYTE,0,0)),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniformMatrix3fv(c.uniforms.matrix,!1,m),u.uniform1f(c.uniforms.point_size,y*2),u.uniform1f(c.uniforms.alpha,b),o?u.uniform4fv(c.uniforms.colorScheme,v):u.uniform4fv(c.uniforms.colorScheme,v.slice(0,4)),u.drawArrays(u.POINTS,0,p),u.disableVertexAttribArray(0),u.disableVertexAttribArray(1),d!=null&&u.disableVertexAttribArray(2),u.useProgram(null)})}function qlt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform mat4 colorMatrix;
    uniform float pointAlpha;
    uniform float globalAlpha;
    uniform int isDarkMode;
    in vec2 uv;
    out vec4 outColor;

    /* Combine alphas with symmetric blending equation f(a, b) = a + b - ab. */
    float combine_alphas(vec4 alphas) {
      float r = alphas.x + alphas.y - alphas.x * alphas.y;
      r = r + alphas.z - r * alphas.z;
      r = r + alphas.w - r * alphas.w;
      return r;
    }

    void main() {
      vec4 count = texture(source, uv);
      vec4 alphas = pointAlpha >= 0.999
        ? vec4(count.x > 0.0 ? 1.0 : 0.0, count.y > 0.0 ? 1.0 : 0.0, count.z > 0.0 ? 1.0 : 0.0, count.w > 0.0 ? 1.0 : 0.0)
        : vec4(1.0) - pow(vec4(1.0 - pointAlpha), count);
      float a = combine_alphas(alphas);
      if (a <= 0.0) { discard; }
      alphas *= a / (alphas.x + alphas.y + alphas.z + alphas.w);

      vec3 c1 = colorMatrix[0].rgb * alphas.x;
      vec3 c2 = colorMatrix[1].rgb * alphas.y;
      vec3 c3 = colorMatrix[2].rgb * alphas.z;
      vec3 c4 = colorMatrix[3].rgb * alphas.w;
      vec3 c;
      if (isDarkMode == 0) {
        c = vec3(1.0) - a + c1 + c2 + c3 + c4;
      } else {
        c = c1 + c2 + c3 + c4;
      }
      outColor = vec4(c, 1.0) * a * globalAlpha;
    }
  `}}function Vlt(t,e){let{vertex:n,fragment:r}=qlt(),i=t.statefulDerive([e,n,r],rh),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],Wf);return t.derive([e,i,s],(o,a,l)=>(u,c,f,h,d)=>{o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,u.texture),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.resolution,u.width,u.height),o.uniform1f(a.uniforms.pointAlpha,c),o.uniform1f(a.uniforms.globalAlpha,f),o.uniform1i(a.uniforms.isDarkMode,d=="dark"?1:0),o.uniformMatrix4fv(a.uniforms.colorMatrix,!1,h),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}let Wlt=class{props;viewport;df;gl;renderInputs;dataBuffers;renderer;constructor(e,n,r){this.props={mode:"points",colorScheme:"light",x:new Float32Array,y:new Float32Array,category:null,categoryCount:1,categoryColors:null,viewportX:0,viewportY:0,viewportScale:1,pointSize:1,pointAlpha:1,pointsAlpha:1,densityScaler:1,densityBandwidth:1,densityQuantizationStep:.1,contoursAlpha:1,densityAlpha:1,gamma:2.2,width:n,height:r},this.viewport=new iT({x:0,y:0,scale:1},n,r);let i=new M1,s=i.value(e);this.df=i,this.gl=s,this.renderInputs={mode:i.value(this.props.mode),colorScheme:i.value(this.props.colorScheme),xData:i.value(this.props.x),yData:i.value(this.props.y),categoryData:i.value(this.props.category),categoryCount:i.value(this.props.categoryCount),matrix:i.value(Dge()),width:i.value(n),height:i.value(r),pointSize:i.value(this.props.pointSize),densityBandwidth:i.value(this.props.densityBandwidth)},this.dataBuffers=Hlt(i,s,this.renderInputs),this.renderer=Glt(i,s,this.renderInputs,this.dataBuffers)}setProps(e){let n=!1,r;for(r in e)e[r]!==this.props[r]&&(this.props[r]=e[r],n=!0);return this.viewport.update({x:this.props.viewportX,y:this.props.viewportY,scale:this.props.viewportScale},this.props.width,this.props.height),this.renderInputs.mode.value=this.props.mode,this.renderInputs.colorScheme.value=this.props.colorScheme,this.renderInputs.xData.value=this.props.x,this.renderInputs.yData.value=this.props.y,this.renderInputs.categoryData.value=this.props.category,this.props.category!=null?this.renderInputs.categoryCount.value=this.props.categoryCount:this.renderInputs.categoryCount.value=1,this.renderInputs.matrix.value=this.viewport.matrix(),this.renderInputs.width.value=this.props.width,this.renderInputs.height.value=this.props.height,this.renderInputs.pointSize.value=this.props.pointSize,this.renderInputs.densityBandwidth.value=this.props.densityBandwidth,n}render(){this.renderer.value(this.props)}destroy(){this.df.destroy()}async densityMap(e,n,r,i){let s=this.df.subgraph(),o=Klt(s,this.gl,this.dataBuffers,s.value(e),s.value(n),s.value(r)),{x:a,y:l,scale:u}=i,c=[u,0,0,0,u,0,-a*u,-l*u,1],f=o.value(c),h=Oge(c);return s.destroy(),{data:f,width:e,height:n,coordinateAtPixel:(d,p)=>{let m=d/e*2-1,y=p/n*2-1,b=Tge([m,y,1],h);return{x:b[0],y:b[1]}}}}};function Hlt(t,e,n){const r=t.statefulDerive([e,n.xData,"f32"],Wf),i=t.statefulDerive([e,n.yData,"f32"],Wf),s=t.if(t.derive([n.categoryData],a=>a!=null),a=>a.statefulDerive([e,a.assertNotNull(n.categoryData),"u8"],Wf),a=>a.value(null)),o=t.derive([n.xData],a=>a.length);return{x:r,y:i,category:s,count:o}}function Glt(t,e,n,r){return t.switch(n.mode,{points:i=>Ylt(i,e,n,r),density:i=>Xlt(i,e,n,r)})}function Ylt(t,e,n,r){const i=t.derive([n.categoryCount],l=>l>1),s=t.statefulDerive([e,n.width,n.height,4,"f32"],Yp);let o=t.if(i,l=>LJ(l,e,r.x,r.y,l.assertNotNull(r.category),r.count),l=>LJ(l,e,r.x,r.y,null,r.count)),a=Ige(t,e);return t.derive([e,s,o,a,n.colorScheme,n.matrix,n.categoryCount],(l,u,c,f,h,d,p)=>m=>{let y=[],b=m.categoryColors??S2(m.categoryCount);for(let v=0;v<p;v++)if(v<b.length){let{r:w,g:_,b:S}=gz(b[v]);w=Math.pow(w,m.gamma),_=Math.pow(_,m.gamma),S=Math.pow(S,m.gamma),y=y.concat([w,_,S,1])}else y=y.concat([.5,.5,.5,1]);l.bindFramebuffer(l.FRAMEBUFFER,u.framebuffer),l.viewport(0,0,u.width,u.height),h=="light"?l.clearColor(1,1,1,1):l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT),c(d,Math.max(3,m.pointSize),m.pointAlpha*m.pointsAlpha,y),l.bindFramebuffer(l.FRAMEBUFFER,null),l.viewport(0,0,m.width,m.height),f(u.texture,m.gamma)})}function Xlt(t,e,n,r){let i=t.derive([n.densityBandwidth],w=>Flt(w)+1),s=t.derive([n.width,i],(w,_)=>w+_*2),o=t.derive([n.height,i],(w,_)=>w+_*2);const a=t.derive([n.categoryCount],w=>w>1),l=t.statefulDerive([e,s,o,4,"f32"],Yp),u=t.statefulDerive([e,s,o,4,"f32"],Yp),c=t.statefulDerive([e,s,o,4,"f32"],Yp),f=t.statefulDerive([e,s,o,4,"f32"],Yp);let h=t.if(a,w=>NN(w,e,r.x,r.y,w.assertNotNull(r.category),r.count),w=>NN(w,e,r.x,r.y,null,r.count)),d=Elt(t,e,n.pointSize),p=Llt(t,e,n.densityBandwidth),m=Vlt(t,e),y=zlt(t,e),b=$lt(t,e),v=Ige(t,e);return t.derive([e,l,u,c,f,n.colorScheme,n.matrix,h,d,p,m,y,b,v],(w,_,S,A,C,D,T,M,I,N,P,O,R,L)=>B=>{let z=B.categoryColors??S2(B.categoryCount),U=[];for(let Y=0;Y<4;Y++)if(Y<z.length){let{r:se,g:he,b:be}=gz(z[Y]);se=Math.pow(se,B.gamma),he=Math.pow(he,B.gamma),be=Math.pow(be,B.gamma),U=U.concat([se,he,be,1])}else U=U.concat([.5,.5,.5,1]);let V=B.width/S.width,W=B.height/S.height,H=mz([V,0,0,0,W,0,0,0,1],T);if(w.bindFramebuffer(w.FRAMEBUFFER,_.framebuffer),w.viewport(0,0,_.width,_.height),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),M(H),w.bindFramebuffer(w.FRAMEBUFFER,S.framebuffer),w.viewport(0,0,S.width,S.height),D=="light"?w.clearColor(1,1,1,1):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),B.pointAlpha>0&&B.pointsAlpha>0&&(I(_.texture,A,C),w.bindFramebuffer(w.FRAMEBUFFER,S.framebuffer),P(A,B.pointAlpha,B.pointsAlpha,U,D)),B.densityScaler>0&&(B.densityAlpha>0||B.contoursAlpha>0)&&(N(_.texture,A,C),w.bindFramebuffer(w.FRAMEBUFFER,S.framebuffer),B.densityAlpha>0&&O(A,B.densityScaler,B.densityQuantizationStep,B.densityAlpha,U,D),B.contoursAlpha>0))for(let Y=0;Y<z.length;Y++){let se=[0,0,0,0];se[Y]=1,R(A,B.densityScaler,B.densityQuantizationStep,B.contoursAlpha,se,U.slice(Y*4,Y*4+4))}w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,B.width,B.height),L(S.texture,B.gamma,1/V,1/W)})}function Klt(t,e,n,r,i,s){let o=t.derive([s],p=>Rge(p)+1),a=t.derive([r,o],(p,m)=>p+m*2),l=t.derive([i,o],(p,m)=>p+m*2);const u=t.statefulDerive([e,a,l,1,"f32"],Yp),c=t.statefulDerive([e,a,l,1,"f32"],Yp),f=t.statefulDerive([e,a,l,1,"f32"],Yp);let h=NN(t,e,n.x,n.y,null,n.count),d=Ilt(t,e,s);return t.derive([e,o,r,i,u,c,f,h,d],(p,m,y,b,v,w,_,S,A)=>C=>{let D=y/v.width,T=b/v.height,M=mz([D,0,0,0,T,0,0,0,1],C);p.bindFramebuffer(p.FRAMEBUFFER,v.framebuffer),p.viewport(0,0,v.width,v.height),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),S(M),A(v.texture,w,_),p.bindFramebuffer(p.FRAMEBUFFER,w.framebuffer);let I=new Float32Array(y*b);return p.readPixels(m,m,y,b,p.RED,p.FLOAT,I),p.bindFramebuffer(p.FRAMEBUFFER,null),I})}let Qlt=class{i32View;u32View;f32View;offset;constructor(e){this.i32View=new Int32Array(e),this.u32View=new Uint32Array(e),this.f32View=new Float32Array(e),this.offset=0}align2(){this.offset%2!=0&&(this.offset+=2-this.offset%2)}align4(){this.offset%4!=0&&(this.offset+=4-this.offset%4)}f32(e){this.f32View[this.offset++]=e}u32(e){this.u32View[this.offset++]=e}i32(e){this.i32View[this.offset++]=e}vec2f(e,n){this.align2(),this.f32View[this.offset++]=e,this.f32View[this.offset++]=n}vec3f(e,n,r){this.align4(),this.f32View[this.offset++]=e,this.f32View[this.offset++]=n,this.f32View[this.offset++]=r}vec4f(e,n,r,i){this.align4(),this.f32View[this.offset++]=e,this.f32View[this.offset++]=n,this.f32View[this.offset++]=r,this.f32View[this.offset++]=i}mat3x3f(e){this.vec3f(e[0],e[1],e[2]),this.vec3f(e[3],e[4],e[5]),this.vec3f(e[6],e[7],e[8])}byteOffset(){return this.offset*4}};function Jlt(t,e){let n=new ArrayBuffer(4288),r=t.statefulDerive([e,4288,GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST|GPUBufferUsage.VERTEX],kb);return{buffer:r,update:t.derive([e,r],(i,s)=>o=>{let a=new Qlt(n);a.u32(o.count),a.u32(o.category_count),a.i32(o.framebuffer_width),a.i32(o.framebuffer_height),a.i32(o.density_width),a.i32(o.density_height),a.f32(o.gamma),a.f32(o.point_size),a.f32(o.point_alpha),a.f32(o.points_alpha),a.f32(o.density_scaler),a.f32(o.quantization_step),a.f32(o.density_alpha),a.f32(o.contours_alpha),a.mat3x3f(o.matrix),a.vec2f(...o.view_xy_scaler),a.vec4f(...o.kde_causal),a.vec4f(...o.kde_anticausal),a.vec4f(...o.kde_a),a.vec4f(...o.background_color);let l=o.gamma;for(let u=0;u<Math.min(o.category_colors.length,256);u++){let{r:c,g:f,b:h,a:d}=o.category_colors[u];c=Math.pow(c,l),f=Math.pow(f,l),h=Math.pow(h,l),a.vec4f(c,f,h,d)}i.queue.writeBuffer(s,0,n,0,a.byteOffset())})}}const TM=64,OM=64;function Fge(t,e,n,r,i,s){let o=t.derive([e,n,r.layouts],(a,l,u)=>a.createComputePipeline({layout:a.createPipelineLayout({bindGroupLayouts:[u.group0,u.group1,u.group2A]}),compute:{module:l,entryPoint:"accumulate"}}));return t.derive([o,r.group0,r.group1,r.group2A,s.countBuffer,i.count],(a,l,u,c,f,h)=>d=>{if(d.clearBuffer(f),h==0)return;let p=d.beginComputePass();p.setPipeline(a),p.setBindGroup(0,l),p.setBindGroup(1,u),p.setBindGroup(2,c),h<=TM*OM?p.dispatchWorkgroups(Math.ceil(h/TM)):p.dispatchWorkgroups(OM,Math.ceil(h/(TM*OM))),p.end()})}function Zlt(t){const{COMPUTE:e,VERTEX:n,FRAGMENT:r}=GPUShaderStage;return{group0:t.createBindGroupLayout({entries:[{binding:0,visibility:e|n|r,buffer:{type:"uniform"}}]}),group1:t.createBindGroupLayout({entries:[{binding:0,visibility:e|n,buffer:{type:"read-only-storage"}},{binding:1,visibility:e|n,buffer:{type:"read-only-storage"}},{binding:2,visibility:e|n,buffer:{type:"read-only-storage"}}]}),group2A:t.createBindGroupLayout({entries:[{binding:0,visibility:e|r,buffer:{type:"storage"}}]}),group2B:t.createBindGroupLayout({entries:[{binding:1,visibility:e|r,buffer:{type:"storage"}},{binding:2,visibility:e|r,buffer:{type:"storage"}}]}),group3:t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}]})}}function Nge(t,e,n,r,i){let s=t.derive([e],f=>Zlt(f)),o=t.derive([e,s,n],(f,h,d)=>f.createBindGroup({layout:h.group0,entries:[{binding:0,resource:{buffer:d}}]})),a=t.derive([e,s,r.x,r.y,r.category],(f,h,d,p,m)=>f.createBindGroup({layout:h.group1,entries:[{binding:0,resource:{buffer:d}},{binding:1,resource:{buffer:p}},{binding:2,resource:{buffer:m??d}}]})),l=t.derive([e,s,i.countBuffer,i.blurBuffer],(f,h,d,p)=>f.createBindGroup({layout:h.group2A,entries:[{binding:0,resource:{buffer:d}}]})),u=t.derive([e,s,i.countBuffer,i.blurBuffer],(f,h,d,p)=>f.createBindGroup({layout:h.group2B,entries:[{binding:1,resource:{buffer:d}},{binding:2,resource:{buffer:p}}]})),c=t.derive([e,s,i.colorTexture,i.alphaTexture],(f,h,d,p)=>f.createBindGroup({layout:h.group3,entries:[{binding:0,resource:f.createSampler({})},{binding:1,resource:d.createView()},{binding:2,resource:p.createView()}]}));return{layouts:s,group0:o,group1:a,group2A:l,group2B:u,group3:c}}function eut(t,e,n,r,i){const s=t.derive([e,n,r.layouts],(o,a,l)=>o.createRenderPipeline({layout:o.createPipelineLayout({bindGroupLayouts:[l.group0,l.group1,l.group2B]}),vertex:{entryPoint:"draw_density_map_vs",module:a},fragment:{entryPoint:"draw_density_map_fs",module:a,targets:[{format:i.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:i.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return t.derive([s,r.group0,r.group1,r.group2B,i.colorTexture,i.alphaTexture],(o,a,l,u,c,f)=>h=>{let d=h.beginRenderPass({colorAttachments:[{loadOp:"load",storeOp:"store",view:c.createView()},{loadOp:"load",storeOp:"store",view:f.createView()}]});d.setPipeline(o),d.setBindGroup(0,a),d.setBindGroup(1,l),d.setBindGroup(2,u),d.draw(4),d.end()})}function tut(t,e,n,r,i,s){const o=t.derive([e,n,r.layouts],(a,l,u)=>a.createRenderPipeline({layout:a.createPipelineLayout({bindGroupLayouts:[u.group0,u.group1]}),vertex:{entryPoint:"points_vs",module:l},fragment:{entryPoint:"points_fs",module:l,targets:[{format:s.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:s.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return t.derive([o,r.group0,r.group1,i.count,s.colorTexture,s.alphaTexture],(a,l,u,c,f,h)=>d=>{let p=d.beginRenderPass({colorAttachments:[{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:f.createView()},{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:h.createView()}]});p.setPipeline(a),p.setBindGroup(0,l),p.setBindGroup(1,u),c>0&&p.draw(4,c),p.end()})}function nut(t,e,n,r,i){const s=t.derive([e,n,i.layouts],(o,a,l)=>o.createRenderPipeline({layout:o.createPipelineLayout({bindGroupLayouts:[l.group0,l.group1,l.group2B,l.group3]}),vertex:{entryPoint:"gamma_correction_vs",module:a},fragment:{entryPoint:"gamma_correction_fs",module:a,targets:[{format:r}]},primitive:{topology:"triangle-strip"}}));return t.derive([s,i.group0,i.group1,i.group2B,i.group3],(o,a,l,u,c)=>(f,h)=>{let d=f.beginRenderPass({colorAttachments:[{clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store",view:h}]});d.setPipeline(o),d.setBindGroup(0,a),d.setBindGroup(1,l),d.setBindGroup(2,u),d.setBindGroup(3,c),d.draw(4),d.end()})}const PJ=64;function Lge(t,e,n,r,i,s,o){let a=t.derive([e,n,r.layouts],(u,c,f)=>u.createComputePipeline({layout:u.createPipelineLayout({bindGroupLayouts:[f.group0,f.group1,f.group2B,f.group3]}),compute:{module:c,entryPoint:"gaussian_blur_stage_1"}})),l=t.derive([e,n,r.layouts],(u,c,f)=>u.createComputePipeline({layout:u.createPipelineLayout({bindGroupLayouts:[f.group0,f.group1,f.group2B,f.group3]}),compute:{module:c,entryPoint:"gaussian_blur_stage_2"}}));return t.derive([a,l,r.group0,r.group1,r.group2B,r.group3,i,s,o],(u,c,f,h,d,p,m,y,b)=>v=>{let w=v.beginComputePass();w.setBindGroup(0,f),w.setBindGroup(1,h),w.setBindGroup(2,d),w.setBindGroup(3,p),w.setPipeline(u),w.dispatchWorkgroups(Math.ceil(m/PJ),b),w.setPipeline(c),w.dispatchWorkgroups(Math.ceil(y/PJ),b),w.end()})}function rut(t,e=!1){const n=new Float64Array(5),r=new Float64Array(4);iut(n,r,t);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:t,negative:e,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function iut(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),i=Math.exp(-1.783/n),s=Math.exp(-1.723/n),o=.6318/n,a=1.997/n,l=Float64Array.of(-i*Math.cos(o),i*Math.sin(o),-i*Math.cos(-o),i*Math.sin(-o),-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),f=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let h,d;for(d=2;d<8;d+=2){for(c[d]=l[d]*c[d-2]-l[d+1]*c[d-1],c[d+1]=l[d]*c[d-1]+l[d+1]*c[d-2],h=d-2;h>0;h-=2)c[h]+=l[d]*c[h-2]-l[d+1]*c[h-1],c[h+1]+=l[d]*c[h-1]+l[d+1]*c[h-2];for(h=0;h<=d;h+=2)c[h]+=r[d]*f[h]-r[d+1]*f[h+1],c[h+1]+=r[d]*f[h+1]+r[d+1]*f[h];for(f[d+2]=l[d]*f[d]-l[d+1]*f[d+1],f[d+3]=l[d]*f[d+1]+l[d+1]*f[d],h=d;h>0;h-=2)f[h]+=l[d]*f[h-2]-l[d+1]*f[h-1],f[h+1]+=l[d]*f[h-1]+l[d+1]*f[h-2]}for(d=0;d<4;++d)h=d<<1,e[d]=c[h]/u,t[d+1]=f[h+2]}function Pge(t){let e=rut(t);return{kde_causal:[e.b_causal[0],e.b_causal[1],e.b_causal[2],e.b_causal[3]],kde_anticausal:[e.b_anticausal[1],e.b_anticausal[2],e.b_anticausal[3],e.b_anticausal[4]],kde_a:[e.a[1],e.a[2],e.a[3],e.a[4]]}}const sut=`// Copyright (c) 2025 Apple Inc. Licensed under MIT License.

enable f16;

struct Uniforms {
  count: u32,
  category_count: u32,
  framebuffer_width: i32,
  framebuffer_height: i32,
  density_width: i32,
  density_height: i32,
  gamma: f32,
  point_size: f32,
  point_alpha: f32,
  points_alpha: f32,
  density_scaler: f32,
  quantization_step: f32,
  density_alpha: f32,
  contours_alpha: f32,
  matrix: mat3x3<f32>,
  view_xy_scaler: vec2<f32>,
  kde_causal: vec4<f32>,
  kde_anticausal: vec4<f32>,
  kde_a: vec4<f32>,
  background_color: vec4<f32>,
  category_colors: array<vec4<f32>, 256>,
}

struct PointData {
  position: vec3<f32>,
  category: u32,
}

struct FragmentOutput {
  @location(0) color: vec4<f32>,
  @location(1) log1malpha: f32, // log(1 - alpha)
}

@group(0) @binding(0) var<uniform> uniforms: Uniforms;

@group(1) @binding(0) var<storage, read> x_buffer: array<f32>;
@group(1) @binding(1) var<storage, read> y_buffer: array<f32>;
@group(1) @binding(2) var<storage, read> category_buffer: array<u32>;

@group(2) @binding(0) var<storage, read_write> count_buffer: array<atomic<u32>>;
@group(2) @binding(1) var<storage, read_write> blur_buffer: array<f16>;
@group(2) @binding(2) var<storage, read_write> blur_swap_buffer: array<f16>;

@group(3) @binding(0) var framebuffer_sampler: sampler;
@group(3) @binding(1) var color_texture: texture_2d<f32>;
@group(3) @binding(2) var log1malpha_texture: texture_2d<f32>;

fn get_point(index: u32) -> PointData {
  var result: PointData;
  result.position = vec3(x_buffer[index], y_buffer[index], 1.0);
  if (uniforms.category_count > 1) {
    result.category = (category_buffer[index >> 2] >> ((index & 3) << 3)) & 0xff;
  } else {
    result.category = 0;
  }
  return result;
}

const ACCUMULATE_UNIT: u32 = 4096;

fn increment_count(x: i32, y: i32, category: u32, value: u32) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  if (x < 0 || x >= width || y < 0 || y >= height || category >= uniforms.category_count || value == 0) {
    return;
  }
  let offset = (y * width + x) + i32(category) * (width * height);
  atomicAdd(&count_buffer[offset], value);
}

@compute @workgroup_size(64, 1)
fn accumulate(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let index = id.y * 4096 + id.x; // 4096 = 64 * 64
  if (index >= uniforms.count) { return; }
  let point = get_point(index);
  let pos = uniforms.matrix * point.position;
  let x = (pos.x + 1.0) / 2.0 * f32(width) - 0.5;
  let y = (pos.y + 1.0) / 2.0 * f32(height) - 0.5;
  let ix = i32(x);
  let iy = i32(y);
  let tx = x - f32(ix);
  let ty = y - f32(iy);
  let w1: u32 = u32((1 - tx) * (1 - ty) * f32(ACCUMULATE_UNIT));
  let w2: u32 = u32(tx * (1 - ty) * f32(ACCUMULATE_UNIT));
  let w3: u32 = u32((1 - tx) * ty * f32(ACCUMULATE_UNIT));
  let w123 = w1 + w2 + w3;
  var w4: u32 = select(0, ACCUMULATE_UNIT - w123, w123 < ACCUMULATE_UNIT);
  increment_count(ix, iy, point.category, w1);
  increment_count(ix + 1, iy, point.category, w2);
  increment_count(ix, iy + 1, point.category, w3);
  increment_count(ix + 1, iy + 1, point.category, w4);
}

// Draw Discrete Points

struct PointsVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) dp: vec3<f32>,
  @location(1) color: vec4<f32>,
}

@vertex
fn points_vs(
  @builtin(instance_index) index: u32,
  @builtin(vertex_index) part: u32,
) -> PointsVertexOutput {
  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let alpha = uniforms.point_alpha * uniforms.points_alpha;
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  let point = get_point(index);
  let pos = uniforms.matrix * point.position;

  var out: PointsVertexOutput;
  out.position = vec4<f32>(pos.xy + dp * uniforms.point_size / framebuffer_size * 2.0, 0.0, 1.0);
  out.dp = vec3(dp, uniforms.point_size);
  out.color = uniforms.category_colors[point.category] * alpha;
  return out;
}

@fragment
fn points_fs(in: PointsVertexOutput) -> FragmentOutput {
  let r = length(in.dp.xy) * in.dp.z;
  let a = max(0.0, min(1.0, in.dp.z - r));
  var out: FragmentOutput;
  out.color = in.color * a;
  out.log1malpha = log(1 - out.color.a);
  return out;
}

// Draw Density Map

struct DrawDensityMapVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) texture_coord: vec2<f32>,
}

@vertex
fn draw_density_map_vs(
  @builtin(vertex_index) part: u32,
) -> DrawDensityMapVertexOutput {
  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  var out: DrawDensityMapVertexOutput;
  out.position = vec4(dp, 0.0, 1.0);
  out.texture_coord = (vec2(dp.x, dp.y) + 1.0) / 2.0 * framebuffer_size;
  return out;
}

fn get_density_raw(x: i32, y: i32, category: u32) -> f32 {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let density_scaler = uniforms.density_scaler;
  if (x < 0 || x >= width || y < 0 || y >= height) {
    return 0.0;
  }
  let offset = (y * width + x) + i32(category) * (width * height);
  return max(0.0, f32(blur_buffer[offset]) * density_scaler);
}

fn get_density(x: f32, y: f32, category: u32) -> f32 {
  let px = x / f32(uniforms.framebuffer_width) * f32(uniforms.density_width) - 0.5;
  let py = y / f32(uniforms.framebuffer_height) * f32(uniforms.density_height) - 0.5;
  let ix = i32(px);
  let iy = i32(py);
  let tx = px - f32(ix);
  let ty = py - f32(iy);
  let v00 = get_density_raw(ix, iy, category);
  let v10 = get_density_raw(ix + 1, iy, category);
  let v01 = get_density_raw(ix, iy + 1, category);
  let v11 = get_density_raw(ix + 1, iy + 1, category);
  return mix(mix(v00, v10, tx), mix(v01, v11, tx), ty);
}

fn get_density_quantized(x: f32, y: f32, category: u32) -> f32 {
  let v = get_density(x, y, category);
  return floor(clamp(v, 0, 1) / uniforms.quantization_step);
}

fn get_density_quantized_sobel(x: f32, y: f32, category: u32) -> vec2<f32> {
  let v11 = get_density_quantized(x - 1, y - 1, category);
  let v21 = get_density_quantized(x, y - 1, category);
  let v31 = get_density_quantized(x + 1, y - 1, category);
  let v12 = get_density_quantized(x - 1, y, category);
  let v22 = get_density_quantized(x, y, category);
  let v32 = get_density_quantized(x + 1, y, category);
  let v13 = get_density_quantized(x - 1, y + 1, category);
  let v23 = get_density_quantized(x, y + 1, category);
  let v33 = get_density_quantized(x + 1, y + 1, category);
  let gx = v11 + v12 * 2.0 + v13 - v31 - v32 * 2.0 - v33;
  let gy = v11 + v21 * 2.0 + v31 - v13 - v23 * 2.0 - v33;
  return vec2(gx, gy);
}

@fragment
fn draw_density_map_fs(in: DrawDensityMapVertexOutput) -> FragmentOutput {
  let px = in.texture_coord.x;
  let py = in.texture_coord.y;
  let quantization_step: f32 = uniforms.quantization_step;

  var sum_color: vec4<f32> = vec4(0);
  var sum_log1malpha: f32 = 0.0;

  for (var i: u32 = 0; i < uniforms.category_count; i++) {
    let density = get_density(px, py, i);
    var alpha = min(1.0, floor(density / quantization_step) * quantization_step);
    alpha *= uniforms.density_alpha;
    let color = uniforms.category_colors[i] * alpha;
    sum_color += color;
    sum_log1malpha += log(1 - color.a);
  }

  if (uniforms.contours_alpha > 0.0) {
    for (var i: u32 = 0; i < uniforms.category_count; i++) {
      let sobel = get_density_quantized_sobel(px, py, i);
      let alpha = clamp(length(sobel) * 0.2, 0.0, 1.0) * uniforms.contours_alpha;
      let color = uniforms.category_colors[i] * alpha;
      sum_color += color;
      sum_log1malpha += log(1 - color.a);
    }
  }

  var out: FragmentOutput;
  out.color = sum_color;
  out.log1malpha = sum_log1malpha;
  return out;
}

// Gamma Correction

struct GammaCorrectionVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) texture_coord: vec2<f32>,
}

@vertex
fn gamma_correction_vs(
  @builtin(vertex_index) part: u32,
) -> GammaCorrectionVertexOutput {
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  var out: GammaCorrectionVertexOutput;
  out.position = vec4(dp * uniforms.view_xy_scaler, 0.0, 1.0);
  out.texture_coord = (vec2(dp.x, -dp.y) + 1.0) / 2.0;
  return out;
}

@fragment
fn gamma_correction_fs(in: GammaCorrectionVertexOutput) -> @location(0) vec4<f32> {
  let sum_color = textureSample(color_texture, framebuffer_sampler, in.texture_coord);
  let sum_log_one_minus_alpha = textureSample(log1malpha_texture, framebuffer_sampler, in.texture_coord).r;
  var color: vec4<f32>;
  if (sum_color.a > 0.0) {
    color = sum_color / sum_color.a * (1.0 - exp(sum_log_one_minus_alpha));
    color = color + uniforms.background_color * (1 - color.a);
  } else {
    color = uniforms.background_color;
  }
  let rgb = pow(color.rgb, vec3(1.0 / uniforms.gamma));
  return vec4(rgb, 1.0);
}

// Gaussian Blur

@compute @workgroup_size(64, 1)
fn gaussian_blur_stage_1(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let x = id.x;
  if (x >= u32(width)) { return; }
  let start = x + id.y * u32(width * height);
  let count = u32(height);
  let stride = u32(width);

  deriche_conv_1d(
    &blur_buffer, &blur_swap_buffer, start, stride, count,
    uniforms.kde_causal, uniforms.kde_anticausal, uniforms.kde_a,
    true
  );
}

@compute @workgroup_size(64, 1)
fn gaussian_blur_stage_2(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let y = id.x;
  if (y >= u32(height)) { return; }
  let start = y * u32(width) + id.y * u32(width * height);
  let count = u32(width);
  let stride = u32(1);

  deriche_conv_1d(
    &blur_swap_buffer, &blur_buffer, start, stride, count,
    uniforms.kde_causal, uniforms.kde_anticausal, uniforms.kde_a,
    false
  );
}

fn deriche_conv_1d(
    src: ptr<storage, array<f16>, read_write>,
    dst: ptr<storage, array<f16>, read_write>,
    start: u32, stride: u32, count: u32,
    kde_causal: vec4<f32>, kde_anticausal: vec4<f32>, kde_a: vec4<f32>,
    src_is_u32: bool
) {
  var s: vec4<f32> = vec4(0.0);
  var y0: f32 = 0.0;
  var y1234: vec4<f32> = vec4(0.0);

  var first_nonzero: u32 = count;
  var last_nonzero: u32 = 0;

  for (var i: u32 = 0; i < count; i++) {
    let offset = start + i * stride;
    var input: f32;
    if (src_is_u32) {
      input = f32(bitcast<u32>(vec2((*src)[offset * 2], (*src)[offset * 2 + 1]))) / f32(ACCUMULATE_UNIT);
    } else {
      input = f32((*src)[offset]);
    }
    if (input != 0.0) {
      first_nonzero = min(i, first_nonzero);
      last_nonzero = max(i, last_nonzero);
    }
    s = vec4(input, s.xyz);
    y1234 = vec4(y0, y1234.xyz);
    y0 = dot(kde_causal, s) - dot(kde_a, y1234);
    (*dst)[offset] = f16(y0);
  }

  if (first_nonzero > last_nonzero) {
    return;
  }

  s = vec4(0.0);
  y0 = 0.0;
  y1234 = vec4(0.0);

  for (var i: u32 = count - 1 - last_nonzero; i < count; i++) {
    let p = count - 1 - i;
    let offset = start + p * stride;
    var input: f32 = 0.0;
    if (p >= first_nonzero) {
      if (src_is_u32) {
        input = f32(bitcast<u32>(vec2((*src)[offset * 2], (*src)[offset * 2 + 1]))) / f32(ACCUMULATE_UNIT);
      } else {
        input = f32((*src)[offset]);
      }
    }
    y1234 = vec4(y0, y1234.xyz);
    y0 = dot(kde_anticausal, s) - dot(kde_a, y1234);
    s = vec4(input, s.xyz);
    if (y0 != 0.0) {
      (*dst)[offset] = f16(f32((*dst)[offset]) + y0);
    }
  }
}
`;class out{props;viewport;df;device;module;uniforms;context;renderInputs;dataBuffers;renderer;constructor(e,n,r,i,s){this.context=e,this.props={mode:"points",colorScheme:"light",x:new Float32Array,y:new Float32Array,category:null,categoryCount:1,categoryColors:null,viewportX:0,viewportY:0,viewportScale:1,pointSize:1,pointAlpha:1,pointsAlpha:1,densityScaler:1,densityBandwidth:1,densityQuantizationStep:.1,contoursAlpha:1,densityAlpha:1,gamma:2.2,width:i,height:s},this.viewport=new iT({x:0,y:0,scale:1},i,s),this.df=new M1;let o=this.df;this.renderInputs={mode:o.value(this.props.mode),colorScheme:o.value(this.props.colorScheme),xData:o.value(this.props.x),yData:o.value(this.props.y),categoryData:o.value(this.props.category),categoryCount:o.value(this.props.categoryCount),categoryColors:o.value(this.props.categoryColors),matrix:o.value(Dge()),width:o.value(i),height:o.value(s),pointSize:o.value(this.props.pointSize),densityBandwidth:o.value(this.props.densityBandwidth)},this.device=o.value(n),this.dataBuffers=aut(o,this.device,this.renderInputs),this.module=o.derive([this.device],a=>a.createShaderModule({code:sut})),this.uniforms=Jlt(o,this.device),this.renderer=lut(o,this.device,this.module,this.uniforms,r,this.renderInputs,this.dataBuffers)}setProps(e){let n=!1,r;for(r in e)e[r]!==this.props[r]&&(this.props[r]=e[r],n=!0);return this.viewport.update({x:this.props.viewportX,y:this.props.viewportY,scale:this.props.viewportScale},this.props.width,this.props.height),this.renderInputs.mode.value=this.props.mode,this.renderInputs.colorScheme.value=this.props.colorScheme,this.renderInputs.xData.value=this.props.x,this.renderInputs.yData.value=this.props.y,this.renderInputs.categoryData.value=this.props.category,this.renderInputs.categoryColors.value=this.props.categoryColors,this.props.category!=null?this.renderInputs.categoryCount.value=this.props.categoryCount:this.renderInputs.categoryCount.value=1,this.renderInputs.matrix.value=this.viewport.matrix(),this.renderInputs.width.value=this.props.width,this.renderInputs.height.value=this.props.height,this.renderInputs.pointSize.value=this.props.pointSize,this.renderInputs.densityBandwidth.value=this.props.densityBandwidth,n}render(){this.renderer.value(this.props,this.context.getCurrentTexture().createView())}destroy(){this.df.destroy()}async densityMap(e,n,r,i){let s=this.df.subgraph(),{x:o,y:a,scale:l}=i,u=[l,0,0,0,l,0,-o*l,-a*l,1],c=Oge(u),f=await uut(s,this.device,this.module,this.uniforms,s.value(e),s.value(n),s.value(r),s.value(u),this.dataBuffers).value();return s.destroy(),{data:f,width:e,height:n,coordinateAtPixel:(h,d)=>{let p=h/e*2-1,m=d/n*2-1,y=Tge([p,m,1],c);return{x:y[0],y:y[1]}}}}}function aut(t,e,n){let r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST;const i=t.derive([n.xData],c=>c.length),s=t.derive([i],c=>c*4),o=i,a=t.statefulDerive([e,t.statefulDerive([e,s,r],kb),n.xData],_M),l=t.statefulDerive([e,t.statefulDerive([e,s,r],kb),n.yData],_M),u=t.statefulDerive([e,t.statefulDerive([e,o,r],kb),n.categoryData],_M);return{x:a,y:l,category:u,count:i}}function Bge(t,e,n,r,i,s,o){let a="rgba16float",l="r16float",u=GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,c=t.statefulDerive([e,n,r,a,u],hJ),f=t.statefulDerive([e,n,r,l,u],hJ),h=t.derive([i,s,o],(y,b,v)=>y*b*v*4),d=t.derive([i,s,o],(y,b,v)=>y*b*v*2),p=t.statefulDerive([e,h,GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC],kb),m=t.statefulDerive([e,d,GPUBufferUsage.STORAGE],kb);return{colorTexture:c,alphaTexture:f,colorTextureFormat:a,alphaTextureFormat:l,countBuffer:p,blurBuffer:m}}function lut(t,e,n,r,i,s,o){let a=t.derive([s.densityBandwidth],S=>Math.ceil(S*3)+1),l=t.derive([s.width,a],(S,A)=>S+A*2),u=t.derive([s.height,a],(S,A)=>S+A*2),c=t.derive([l],S=>Math.ceil(S/4)),f=t.derive([u],S=>Math.ceil(S/4)),h=Bge(t,e,l,u,c,f,s.categoryCount),d=Nge(t,e,r.buffer,o,h),p=Fge(t,e,n,d,o,h),m=tut(t,e,n,d,o,h),y=eut(t,e,n,d,h),b=nut(t,e,n,i,d),v=Lge(t,e,n,d,l,u,s.categoryCount),w=t.derive([s.densityBandwidth,l,c],(S,A,C)=>Pge(S/A*C)),_=t.derive([s.categoryColors,s.categoryCount],(S,A)=>(S==null&&(S=S2(A)),S.map(C=>gz(C))));return t.derive([e,l,u,c,f,r.update,o.count,s.matrix,_,m,b,p,v,y,w],(S,A,C,D,T,M,I,N,P,O,R,L,B,z,U)=>(V,W)=>{let H=V.colorScheme=="light"?[1,1,1,1]:[0,0,0,1],Y=V.width/A,se=V.height/C,he=mz([Y,0,0,0,se,0,0,0,1],N);M({count:I,category_count:V.categoryCount,framebuffer_width:A,framebuffer_height:C,density_width:D,density_height:T,gamma:V.gamma,point_size:Math.max(V.mode=="points"?3:1,V.pointSize),point_alpha:V.pointAlpha,points_alpha:V.pointsAlpha,density_scaler:V.densityScaler/16,quantization_step:V.densityQuantizationStep,density_alpha:V.densityAlpha,contours_alpha:V.contoursAlpha,matrix:he,view_xy_scaler:[1/Y,1/se],kde_causal:U.kde_causal,kde_anticausal:U.kde_anticausal,kde_a:U.kde_a,background_color:H,category_colors:P});let be=S.createCommandEncoder();O(be),V.mode=="density"&&(V.densityAlpha>0||V.contoursAlpha>0)&&(L(be),B(be),z(be)),R(be,W),S.queue.submit([be.finish()])})}function uut(t,e,n,r,i,s,o,a,l){let u=Bge(t,e,i,s,i,s,t.value(1)),c=Nge(t,e,r.buffer,l,u),f=Fge(t,e,n,c,l,u),h=Lge(t,e,n,c,i,s,t.value(1));return t.derive([e,i,s,l.count,r.update,o,a,f,h,u.countBuffer],(d,p,m,y,b,v,w,_,S,A)=>()=>{let C=d.createCommandEncoder(),D=Pge(v);b({count:y,category_count:1,framebuffer_width:p,framebuffer_height:m,density_width:p,density_height:m,gamma:1,point_size:0,point_alpha:0,points_alpha:0,density_scaler:0,quantization_step:0,density_alpha:0,contours_alpha:0,matrix:w,view_xy_scaler:[1,1],kde_causal:D.kde_causal,kde_anticausal:D.kde_anticausal,kde_a:D.kde_a,background_color:[0,0,0,0],category_colors:[]}),_(C),S(C);let T=d.createBuffer({size:p*m*2,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return C.copyBufferToBuffer(A,0,T,0,p*m*2),d.queue.submit([C.finish()]),T.mapAsync(GPUMapMode.READ,0,p*m*2).then(()=>cut(T.getMappedRange()))})}function cut(t){let e=new Uint16Array(t),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){let i=e[r]&32767,s=e[r]&32768,o=e[r]&31744;i<<=13,s<<=16,i+=939524096,i=o==0?0:i,i|=s,n[r]=i}return new Float32Array(n.buffer)}let Tx;function fut(){return Tx==null&&(Tx=document.createElement("canvas"),Tx.width=1,Tx.height=1),Tx.getContext("2d")}function hut(t){let e=fut();e.font=`${t.fontSize??10}px ${t.fontFamily??"system-ui"}`;let n=t.text.split(`
`).map(i=>e.measureText(i).width),r=(t.fontSize??10)*(t.lineSpacing??1)*n.length;return{width:n.reduce((i,s)=>Math.max(i,s)),height:r}}let MM=null,LN=new Map;function dut(){return MM==null&&(MM=new Promise((t,e)=>{let n=new Worker(new URL(""+new URL("clustering.worker-B-hzd4PN.js",import.meta.url).href,import.meta.url),{type:"module"});n.onmessage=r=>{if(r.data.ready){t(n);return}if(r.data.id!=null){let i=LN.get(r.data.id);i!=null&&(LN.delete(r.data.id),i(r.data))}}})),MM}function C2(t,e,n=[]){return new Promise((r,i)=>{dut().then(s=>{let o=new Date().getTime().toString()+"-"+Math.random().toString();LN.set(o,a=>{r(a.payload)}),s.postMessage({id:o,name:t,payload:e},n)})})}let put=(t,e,n,r)=>C2("findClusters",[t,e,n,r],[t.buffer]),gut=(...t)=>C2("dynamicLabelPlacement",t),mut=(...t)=>C2("textSummarizerCreate",t),yut=(...t)=>C2("textSummarizerDestroy",t),but=(...t)=>C2("textSummarizerAdd",t),vut=(...t)=>C2("textSummarizerSummarize",t);async function BJ(t,e,n,r,i){let s=new iT(n,t,e),o=r.reduce((p,m)=>Math.min(p,m.level??0),0),a=r.reduce((p,m)=>Math.max(p,m.level??0),0),l=n.scale,u=n.scale/2,c=u*4,f=l/c,h=r.map(p=>{let m=s.pixelLocation(p.x,p.y),y=p.level??0,b=y==0?14:12,v=hut({text:p.text,fontSize:b,fontFamily:i});return v.width+=4,v.height+=4,{text:p.text,fontSize:b,bounds:{xMin:m.x-v.width/2,xMax:m.x+v.width/2,yMin:m.y-v.height/2,yMax:m.y+v.height/2},locationAtZero:m,priority:p.priority,minScale:p.level==a?null:f*Math.pow(2,-y)/1.2,maxScale:p.level==o?null:f*Math.pow(2,-y+1),coordinate:{x:p.x,y:p.y},placement:null}}),d=await gut(h,{globalMaxScale:l/u});for(let p=0;p<d.length;p++){let m=d[p];if(m!=null){let y=l/m.minScale,b=l/m.maxScale;h[p].placement={minScale:b,maxScale:y}}}return h}function xut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $J={exports:{}},UJ;function wut(){return UJ||(UJ=1,(function(t){(function(){function e(a,l){var u=a.x-l.x,c=a.y-l.y;return u*u+c*c}function n(a,l,u){var c=l.x,f=l.y,h=u.x-c,d=u.y-f;if(h!==0||d!==0){var p=((a.x-c)*h+(a.y-f)*d)/(h*h+d*d);p>1?(c=u.x,f=u.y):p>0&&(c+=h*p,f+=d*p)}return h=a.x-c,d=a.y-f,h*h+d*d}function r(a,l){for(var u=a[0],c=[u],f,h=1,d=a.length;h<d;h++)f=a[h],e(f,u)>l&&(c.push(f),u=f);return u!==f&&c.push(f),c}function i(a,l,u,c,f){for(var h=c,d,p=l+1;p<u;p++){var m=n(a[p],a[l],a[u]);m>h&&(d=p,h=m)}h>c&&(d-l>1&&i(a,l,d,c,f),f.push(a[d]),u-d>1&&i(a,d,u,c,f))}function s(a,l){var u=a.length-1,c=[a[0]];return i(a,0,u,l,c),c.push(a[u]),c}function o(a,l,u){if(a.length<=2)return a;var c=l!==void 0?l*l:1;return a=u?a:r(a,c),a=s(a,c),a}t.exports=o,t.exports.default=o})()})($J)),$J.exports}var _ut=wut();const zJ=xut(_ut);function Sut(t,e){let n=t.slice();for(let r=0;r<e;r++){const i=[],s=n.length;for(let o=0;o<s;o++){const a=n[o],l=n[(o+1)%s],u={x:.75*a.x+.25*l.x,y:.75*a.y+.25*l.y},c={x:.25*a.x+.75*l.x,y:.25*a.y+.75*l.y};i.push(u,c)}n=i}return n}function Aut(t,e){const n=Sut(t,5),r=_ge(n);let i=Math.max(r.xMax-r.xMin,r.yMax-r.yMin)/100,s=zJ(n,i),o=0;for(;s.length>e&&o<20;)i*=1.1,o+=1,s=zJ(n,i);return s}const jJ={light:{fontFamily:"system-ui,sans-serif",clusterLabelColor:"#000",clusterLabelOutlineColor:"rgba(255,255,255,0.8)",clusterLabelOpacity:.8,statusBar:!0,statusBarTextColor:"#525252",statusBarBackgroundColor:"rgba(255,255,255,0.9)",brandingLink:{text:"Embedding Atlas",href:"https://apple.github.io/embedding-atlas"}},dark:{fontFamily:"system-ui,sans-serif",clusterLabelColor:"#ccc",clusterLabelOutlineColor:"rgba(0,0,0,0.8)",clusterLabelOpacity:.8,statusBar:!0,statusBarTextColor:"#d9d9d9",statusBarBackgroundColor:"rgba(0,0,0,0.9)",brandingLink:{text:"Embedding Atlas",href:"https://apple.github.io/embedding-atlas"}}};function Cut(t,e){return t==null?jJ[e]:{...jJ[e],...t,...t[e]!=null?t[e]:{}}}function kut(t,e,n,r,i,s,o){let a=Math.max(r,i)/s,l=t/(n*n)/(a*a),u=1/(l/(s*s))*.2,c=Math.sqrt(t/e/(a*a)),f=Math.log(c),h=Math.log(n),d=(Math.min(Math.max((h-f)*2,-1),1)+1)/2,p;if(o!=null)p=o*s;else{let b=.25/Math.sqrt(l);p=Math.max(.2,Math.min(5,b))*s}let m=1-d,y=.5+d*.5;return{densityScaler:u,densityAlpha:m,contoursAlpha:m,pointSize:p,pointAlpha:.7,pointsAlpha:y,densityBandwidth:20}}var Eut=ig("<div></div>"),Dut=ip("<circle></circle>"),Tut=ip("<circle></circle>"),Out=ip('<text dominant-baseline="middle"> </text>'),Mut=ip("<g></g>"),Iut=ip("<g><!></g>"),Rut=ip("<g></g>"),Fut=ig('<div><canvas></canvas> <div><!></div> <svg role="none"><!><!><!><!></svg> <!> <!></div>');function Nut(t,e){E1(e,!0);let n=bt(e,"data",19,()=>({x:new Float32Array,y:new Float32Array,category:null})),r=bt(e,"categoryCount",3,1),i=bt(e,"categoryColors",3,null),s=bt(e,"width",3,800),o=bt(e,"height",3,800),a=bt(e,"pixelRatio",3,2),l=bt(e,"theme",3,null),u=bt(e,"config",3,null),c=bt(e,"totalCount",3,null),f=bt(e,"maxDensity",3,null),h=bt(e,"labels",3,null),d=bt(e,"queryClusterLabels",3,null),p=bt(e,"tooltip",7,null),m=bt(e,"selection",7,null),y=bt(e,"querySelection",3,null),b=bt(e,"rangeSelection",7,null),v=bt(e,"defaultViewportState",3,null),w=bt(e,"viewportState",7,null),_=bt(e,"customTooltip",3,null),S=bt(e,"customOverlay",3,null),A=bt(e,"onViewportState",3,null),C=bt(e,"onTooltip",3,null),D=bt(e,"onSelection",3,null),T=bt(e,"onRangeSelection",3,null),M=bt(e,"cache",3,null),I=Wt(()=>u()?.colorScheme??"light"),N=Wt(()=>Cut(l(),Q(I))),P=Wt(()=>i()??S2(r())),O=Wt(()=>w()??v()??{x:0,y:0,scale:1}),R=Wt(()=>new iT(Q(O),s(),o())),L=Wt(()=>Q(R).pixelLocationFunction()),B=Wt(()=>Q(R).coordinateAtPixelFunction()),z=qr(!1);function U(Me,qe){return Me.x==qe.x&&Me.y==qe.y&&Me.category==qe.category&&Me.text==qe.text}let V=Wt(()=>m()?.length==1&&p()!=null&&U(m()[0],p()));function W(Me){Gp(w(),Me)||(w(Me),A()?.(Me))}function H(Me){Gp(p(),Me)||(p(Me),C()?.(Me))}function Y(Me){Gp(m(),Me)||(m(Me),D()?.(Me))}function se(Me){Gp(b(),Me)||(b(Me),T()?.(Me))}let he=qr(om([])),be=qr(null),fe=qr("none"),me=Wt(()=>s()*a()),K=Wt(()=>o()*a()),de=qr(null),ge=qr(null),oe=qr(null),Fe=Wt(()=>u()?.minimumDensity??1/16),Ce=Wt(()=>u()?.pointSize??null),je=Wt(()=>u()?.mode??"points"),Ge=Wt(()=>u()?.autoLabelEnabled),Ee=Wt(()=>kut(f()??(c()??n().x.length)/4,Q(Fe),Q(O).scale,Q(me),Q(K),a(),Q(Ce))),rt=Wt(()=>Q(Ee).pointSize),Vt=!0;jw(()=>{Q(ge)?.setProps({mode:Q(je),colorScheme:Q(I),viewportX:Q(O).x,viewportY:Q(O).y,viewportScale:Q(O).scale,width:Q(me),height:Q(K),x:n().x,y:n().y,category:n().category,categoryCount:r(),categoryColors:Q(P),...Q(Ee)})&&(ln(),(Q(Ge)!==!1||h()!=null)&&Vt&&Q(ge)!=null&&n().x!=null&&n().x.length>0&&v()!=null&&(Vt=!1,$r(v())))});function Xe(){ht=null,!(!Q(de)||!Q(ge))&&(Q(de).width=Q(ge).props.width,Q(de).height=Q(ge).props.height,Q(de).style.width=`${Q(ge).props.width/a()}px`,Q(de).style.height=`${Q(ge).props.height/a()}px`,Q(ge).render())}let ht=null;function ln(){ht==null&&(ht=requestAnimationFrame(Xe))}function er(Me){let qe;function et(){qe=Me.getContext("webgl2",{antialias:!1}),qe.getExtension("EXT_color_buffer_float"),qe.getExtension("EXT_float_blend"),qe.getExtension("OES_texture_float_linear"),zt(ge,new Wlt(qe,Q(me),Q(K)),!0)}et(),Me.addEventListener("webglcontextlost",()=>{Q(ge)?.destroy(),zt(ge,null),qe=null}),Me.addEventListener("webglcontextrestored",()=>{et()})}function ze(Me){async function qe(){let et=Me.getContext("webgpu");if(et==null){console.error("Could not get WebGPU canvas context");return}let ut=await navigator.gpu.requestAdapter();if(!ut){console.error("Could not request WebGPU adapter");return}let yt=512*1048576,Ut=512*1048576;yt=Math.min(yt,ut.limits.maxBufferSize),Ut=Math.min(Ut,ut.limits.maxStorageBufferBindingSize);let In={requiredLimits:{maxBufferSize:yt,maxStorageBufferBindingSize:Ut},requiredFeatures:["shader-f16"]},or=await ut.requestDevice(In);or.lost.then(Fi=>{console.info(`WebGPU device was lost: ${Fi.message}`),Fi.reason!="destroyed"&&(Q(ge)?.destroy(),zt(ge,null),qe())});let Er=navigator.gpu.getPreferredCanvasFormat();et.configure({device:or,format:Er,alphaMode:"premultiplied"}),zt(ge,new out(et,or,Er,Q(me),Q(K)),!0)}qe()}function Be(Me){Me!=null&&w()==null&&W(Me)}jw(()=>Be(v())),hz(()=>{Q(de)!=null&&(w0e()?ze(Q(de)):(er(Q(de)),zt(oe,"WebGPU is unavailable. If you are using Safari, please enable the WebGPU feature flag.")))}),Dat(()=>{Q(ge)?.destroy(),zt(ge,null)});function dt(Me){let qe=Q(de)?.getBoundingClientRect()??{left:0,top:0};return{x:Me.clientX-qe.left,y:Me.clientY-qe.top}}function Ht(Me){Me.preventDefault();let{x:qe,y:et}=dt(Me),ut=Math.exp(-Me.deltaY/200);dn(ut,{x:qe,y:et})}function dn(Me,qe){let{x:et,y:ut,scale:yt}=Q(O);H(null);let Ut=Math.min(100,Math.max(.01,yt*Me)),In=Q(de).getBoundingClientRect(),or=Math.max(In.width,In.height),Er=(qe.x-In.width/2)/or*2,Fi=(In.height/2-qe.y)/or*2,ql=et+Er/yt-Er/Ut,gs=ut+Fi/yt-Fi/Ut;W({x:ql,y:gs,scale:Ut})}function dr(Me){H(null);let qe="pan";Q(fe)!="none"?Me.modifiers.shift||(qe=Q(fe)):Me.modifiers.shift&&(qe=Me.modifiers.meta?"lasso":"marquee");let et=dt(Me);switch(qe){case"marquee":return{move:ut=>{if(H(null),Q(ge)==null)return;let yt=dt(ut),Ut=Q(B)(et.x,et.y),In=Q(B)(yt.x,yt.y);se({xMin:Math.min(Ut.x,In.x),yMin:Math.min(Ut.y,In.y),xMax:Math.max(Ut.x,In.x),yMax:Math.max(Ut.y,In.y)})}};case"lasso":{let ut=[Q(B)(et.x,et.y)];return{move:yt=>{if(H(null),Q(ge)==null)return;let Ut=dt(yt);ut=[...ut,Q(B)(Ut.x,Ut.y)],ut.length>=3&&se(Aut(ut,24))}}}case"pan":{let ut=Q(B)(0,0),yt=Q(B)(1,1),Ut=ut.x-yt.x,In=ut.y-yt.y,or=Q(O).x,Er=Q(O).y;return{move:Fi=>{W({x:or+(Fi.clientX-Me.clientX)*Ut,y:Er+(Fi.clientY-Me.clientY)*In,scale:Q(O).scale})}}}}}async function un(Me){if(b()!=null)se(null);else{const qe=await kr(dt(Me));if(qe==null)Y([]),H(null);else if(Me.modifiers.shift||Me.modifiers.ctrl||Me.modifiers.meta){let et=m()?.findIndex(ut=>ut.x==qe.x&&ut.y==qe.y&&ut.category==qe.category);m()==null||et==null||et<0?(Y([...m()??[],qe]),H(qe)):(Y([...m().slice(0,et),...m().slice(et+1)]),H(null))}else Y([qe]),H(qe)}}let ct=zat(async Me=>{let qe=Me?dt(Me):null;if(m()!=null&&m().length==1){let et=Q(L)(m()[0].x,m()[0].y);qe!=null&&jat(qe,et)<10&&H(m()[0])}else H(await kr(qe))},()=>p()!=null);function Vn(Me){Me!=null?Q(z)||ct(Me):ct(null)}jw(()=>{Q(z)&&ct(null)});async function kr(Me){if(Q(ge)==null||Me==null||y()==null)return null;let{x:qe,y:et}=Q(B)(Me.x,Me.y),ut=Math.abs(Q(B)(Me.x+1,Me.y).x-qe);return await y()(qe,et,ut)}async function Br(Me,qe,et,ut=.005){let yt=await Me.densityMap(1e3,1e3,qe,et),Ut=await put(yt.data,yt.width,yt.height),In=[];for(let Er=0;Er<Ut.length;Er++){let Fi=Ut[Er],ql=yt.coordinateAtPixel(Fi.meanX,Fi.meanY),gs=Fi.boundaryRectApproximation.map(([el,Uu,G2,zu])=>{let Th=yt.coordinateAtPixel(el,Uu),Oh=yt.coordinateAtPixel(G2,zu);return{xMin:Math.min(Th.x,Oh.x),xMax:Math.max(Th.x,Oh.x),yMin:Math.min(Th.y,Oh.y),yMax:Math.max(Th.y,Oh.y)}});In.push({x:ql.x,y:ql.y,sumDensity:Fi.sumDensity,rects:gs,bandwidth:qe})}let or=In.reduce((Er,Fi)=>Math.max(Er,Fi.sumDensity),0);return In.filter(Er=>Er.sumDensity/or>ut)}async function es(Me){if(Q(ge)==null||d()==null)return[];let qe=await Vat({autoLabel:{version:1,viewport:Me,stopWords:u()?.autoLabelStopWords,densityThreshold:u()?.autoLabelDensityThreshold}});if(M()!=null){let yt=await M().get(qe);if(yt!=null)return yt}let et=await Br(Q(ge),10,Me,u()?.autoLabelDensityThreshold??.005);if(et=et.concat(await Br(Q(ge),5,Me)),d()){let yt=await d()(et.map(Ut=>Ut.rects));for(let Ut=0;Ut<et.length;Ut++)et[Ut].label=yt[Ut]}let ut=et.filter(yt=>yt.label!=null&&yt.label.length>0).map(yt=>({x:yt.x,y:yt.y,text:yt.label,priority:yt.sumDensity,level:yt.bandwidth==10?0:1}));return M()!=null&&await M().set(qe,ut),ut}async function $r(Me){if(Q(ge)!=null)if(h()!=null)zt(he,await BJ(s(),o(),Me,h(),Q(N).fontFamily),!0);else{zt(be,"Generating labels...");let qe=await es(Me);zt(he,await BJ(s(),o(),Me,qe,Q(N).fontFamily),!0),zt(be,null)}}class Is{content;constructor(qe,et){let ut=document.createElement("div");this.content=ut,this.update(et),qe.appendChild(ut)}update(qe){let et=this.content;et.style.fontFamily=qe.fontFamily,Q(I)=="light"?(et.style.color="#000",et.style.background="#fff",et.style.border="1px solid #000"):(et.style.color="#ccc",et.style.background="#000",et.style.border="1px solid #ccc"),et.style.borderRadius="2px",et.style.padding="5px",et.style.fontSize="12px",et.style.maxWidth="300px",et.innerText=qe.tooltip.text??JSON.stringify(qe.tooltip)}}var Za=Fut();let jc;var Bu=Ss(Za);Ln(Bu,"",{},{position:"absolute",top:"0",left:"0"}),RN(Bu,Me=>zt(de,Me),()=>Q(de));var $u=oi(Bu,2);let pg;var wO=Ss($u);{var _O=Me=>{const qe=Wt(()=>Sge(S())),et=Wt(()=>({location:Q(L),width:s(),height:o()}));var ut=Dx(),yt=Ry(ut);Tat(yt,()=>Q(qe),Ut=>{var In=Eut();Yu(In,(or,Er)=>Q(qe)?.(or,Er),()=>Age(S(),{proxy:Q(et)})),Ti(Ut,In)}),Ti(Me,ut)};ga(wO,Me=>{S()&&Me(_O)})}Xi($u);var qc=oi($u,2);Ln(qc,"",{},{position:"absolute",left:"0",top:"0"});var p4=Ss(qc);{var g4=Me=>{const qe=Wt(()=>{const{x:In,y:or}=Q(L)(p().x,p().y);return{x:In,y:or}}),et=Wt(()=>Math.max(3,Q(rt)/a())+1);var ut=Dx(),yt=Ry(ut);{var Ut=In=>{var or=Dut();let Er;wl(()=>{tt(or,"cx",Q(qe).x),tt(or,"cy",Q(qe).y),tt(or,"r",Q(et)),Er=Ln(or,"",Er,{stroke:Q(I)=="light"?"#000":"#fff","stroke-width":1,fill:"none"})}),Ti(In,or)};ga(yt,In=>{isFinite(Q(qe).x)&&isFinite(Q(qe).y)&&isFinite(Q(et))&&In(Ut)})}Ti(Me,ut)};ga(p4,Me=>{p()!=null&&Q(ge)!=null&&Me(g4)})}var m4=oi(p4);{var SO=Me=>{var qe=Dx(),et=Ry(qe);AM(et,17,m,SM,(ut,yt)=>{const Ut=Wt(()=>{const{x:gs,y:el}=Q(L)(Q(yt).x,Q(yt).y);return{x:gs,y:el}}),In=Wt(()=>Q(yt).category!=null?Q(P)[Q(yt).category]:Q(P)[0]),or=Wt(()=>Math.max(3,Q(rt)/a())+1);var Er=Dx(),Fi=Ry(Er);{var ql=gs=>{var el=Tut();let Uu;wl(()=>{tt(el,"cx",Q(Ut).x),tt(el,"cy",Q(Ut).y),tt(el,"r",Q(or)),Uu=Ln(el,"",Uu,{stroke:Q(I)=="light"?"#000":"#fff","stroke-width":2,fill:Q(In)})}),Ti(gs,el)};ga(Fi,gs=>{isFinite(Q(Ut).x)&&isFinite(Q(Ut).y)&&isFinite(Q(or))&&gs(ql)})}Ti(ut,Er)}),Ti(Me,qe)};ga(m4,Me=>{m()!=null&&Q(ge)!=null&&Me(SO)})}var y4=oi(m4);{var W2=Me=>{var qe=Rut();AM(qe,21,()=>Q(he),SM,(et,ut)=>{const yt=Wt(()=>Q(ut).text.split(`
`)),Ut=Wt(()=>Q(L)(Q(ut).coordinate.x,Q(ut).coordinate.y)),In=Wt(()=>Q(ut).placement!=null&&Q(ut).placement.minScale<=Q(O).scale&&Q(O).scale<=Q(ut).placement.maxScale);var or=Iut(),Er=Ss(or);{var Fi=ql=>{var gs=Mut();AM(gs,21,()=>Q(yt),SM,(el,Uu,G2)=>{var zu=Out();tt(zu,"x",0);let Th;var Oh=Ss(zu,!0);Xi(zu),wl(()=>{tt(zu,"y",(G2-(Q(yt).length-1)/2)*Q(ut).fontSize),tt(zu,"font-size",Q(ut).fontSize),Th=Ln(zu,"",Th,{"paint-order":"stroke","stroke-width":"4","stroke-linejoin":"round","stroke-linecap":"round","text-anchor":"middle",fill:Q(N).clusterLabelColor,stroke:Q(N).clusterLabelOutlineColor,opacity:Q(N).clusterLabelOpacity,"user-select":"none","-webkit-user-select":"none","font-family":Q(N).fontFamily}),qw(Oh,Q(Uu))}),Ti(el,zu)}),Xi(gs),Ti(ql,gs)};ga(Er,ql=>{Q(In)&&ql(Fi)})}Xi(or),wl(()=>tt(or,"transform",`translate(${Q(Ut).x??""},${Q(Ut).y??""})`)),Ti(et,or)}),Xi(qe),Ti(Me,qe)};ga(y4,Me=>{Me(W2)})}var AO=oi(y4);{var H2=Me=>{var qe=Dx(),et=Ry(qe);{var ut=Ut=>{Yat(Ut,{get value(){return b()},get pointLocation(){return Q(L)}})},yt=Ut=>{Uat(Ut,{get value(){return b()},onChange:se,get pointLocation(){return Q(L)},get coordinateAtPoint(){return Q(B)},preventHover:In=>{zt(z,In,!0)}})};ga(et,Ut=>{b()instanceof Array?Ut(ut):Ut(yt,!1)})}Ti(Me,qe)};ga(AO,Me=>{b()!=null&&Q(ge)!=null&&Me(H2)})}Xi(qc),Yu(qc,(Me,qe)=>Hi?.(Me,qe),()=>({click:un,drag:dr,hover:Vn}));var b4=oi(qc,2);{var CO=Me=>{const qe=Wt(()=>Q(L)(p().x,p().y));{let et=Wt(()=>Math.max(3,Q(rt)/a())),ut=Wt(()=>_()??{class:Is,props:{colorScheme:Q(I),fontFamily:Q(N).fontFamily}});olt(Me,{get location(){return Q(qe)},get allowInteraction(){return Q(V)},get targetHeight(){return Q(et)},get customTooltip(){return Q(ut)},get tooltip(){return p()}})}};ga(b4,Me=>{p()!=null&&Q(ge)!=null&&Me(CO)})}var kO=oi(b4,2);{var EO=Me=>{{let qe=Wt(()=>Q(be)??Q(oe)),et=Wt(()=>1/(Q(L)(1,0).x-Q(L)(0,0).x));rlt(Me,{get resolvedTheme(){return Q(N)},get statusMessage(){return Q(qe)},get distancePerPoint(){return Q(et)},get pointCount(){return n().x.length},get selectionMode(){return Q(fe)},onSelectionMode:ut=>zt(fe,ut,!0)})}};ga(kO,Me=>{Q(N).statusBar&&Me(EO)})}Xi(Za),wl(()=>{jc=Ln(Za,"",jc,{width:`${s()??""}px`,height:`${o()??""}px`,position:"relative"}),pg=Ln($u,"",pg,{width:`${s()??""}px`,height:`${o()??""}px`,position:"absolute",top:"0",left:"0"}),tt(qc,"width",s()),tt(qc,"height",o())}),bat("wheel",qc,Ht),Ti(t,Za),D1()}function qJ(t,e){if(e.length==0)return Ze(!1);if(t.identifier!=null){let n=t.identifier;return lo(...e.map(r=>ml(_e(n),Ze(r.identifier))))}else{let n=t.x,r=t.y,i=t.category;return i!=null?lo(...e.map(s=>cs(ml(yi(_e(n),"DOUBLE"),Ze(s.x)),ml(yi(_e(r),"DOUBLE"),Ze(s.y)),ml(yi(_e(i),"INTEGER"),Ze(s.category))))):lo(...e.map(s=>cs(ml(yi(_e(n),"DOUBLE"),Ze(s.x)),ml(yi(_e(r),"DOUBLE"),Ze(s.y)))))}}function Lut(t,e,n){let r=[];for(let s=0;s<n.length;s++){let o=(s+1)%n.length,{x:a,y:l}=n[s],{x:u,y:c}=n[o],f=l<c?cs(Bf(Ze(l),e),Yi(e,Ze(c))):cs(Bf(Ze(c),e),Yi(e,Ze(l))),h=(l<c?Yi:du)(Yt(Xt(Ze(u-a),e),Xt(Ze(c-l),t)),Ze((u-a)*l-(c-l)*a));r.push(yi(cs(f,h),"INT"))}let i=r.reduce((s,o)=>lr(s,o));return ml(CIe(i,Ze(2)),Ze(1))}function Put(t,e){if(e instanceof Array){if(e.length<3)return Ze(!1);let n=_ge(e);return cs(Xo(_e(t.x),[n.xMin,n.xMax]),Xo(_e(t.y),[n.yMin,n.yMax]),Lut(_e(t.x),_e(t.y),e))}else return cs(Xo(_e(t.x),[e.xMin,e.xMax]),Xo(_e(t.y),[e.yMin,e.yMax]))}async function But(t,e){let{x:n,y:r,table:i}=e,s=await t.query(Ue.from(i).select({centerX:mt`MEDIAN(${_e(n)})`,centerY:mt`MEDIAN(${_e(r)})`,stdX:mt`STDDEV(${_e(n)})`,stdY:mt`STDDEV(${_e(r)})`,...e.category!=null?{maxCategory:mt`MAX(${_e(e.category)}::UTINYINT)`}:{}})),{centerX:o,centerY:a,stdX:l,stdY:u,maxCategory:c}=s.get(0),f=1/(Math.max(l,u,.001)*3),h=.1/f,d=mt`FLOOR((${_e(n)} - ${o}) / ${h})`,p=mt`FLOOR((${_e(r)} - ${a}) / ${h})`,m=e.category!=null?_e(e.category):null,y=m!=null?[d,p,m]:[d,p],b=Ue.from(Ue.from(i).select({count:mt`COUNT(*)`}).groupby(...y)).select({totalCount:mt`SUM(count)::INT`,maxCount:mt`MAX(count)::INT`});s=await t.query(b);let{maxCount:v,totalCount:w}=s.get(0),_=v/(h*h);return{centerX:o,centerY:a,scaler:f,totalCount:w,categoryCount:(c??0)+1,maxDensity:_}}class $ut{coordinator;source;lastDistance;selectParams;constructor(e,n){this.coordinator=e,this.source=n,this.lastDistance=0;let{x:r,y:i,category:s,text:o,identifier:a}=this.source,l={},u=n.additionalFields??{};for(let c in u){let f=u[c];typeof f=="string"?l["field_"+c]=_e(f):l["field_"+c]=mt`${f.sql}`}this.selectParams={x:mt`${_e(r)}::DOUBLE`,y:mt`${_e(i)}::DOUBLE`,...s!=null?{category:mt`${_e(s)}::INT`}:{},...o!=null?{text:mt`${_e(o)}`}:{},...a!=null?{identifier:mt`${_e(a)}`}:{},...l}}_convertToDataPoint(e){let n={};for(let r in e)r.startsWith("field_")&&(n[r.slice(6)]=e[r]);return{x:e.x,y:e.y,category:e.category,text:e.text,identifier:e.identifier,fields:n}}async queryClosestPoint(e,n,r,i){let s=i*12,{x:o,y:a}=this.source;for(let l of[this.lastDistance,s]){if(l==0||l>s)continue;let u=Ue.from(this.source.table).select(this.selectParams);u=u.where(mt`${_e(o)} BETWEEN ${n-l} AND ${n+l}`),u=u.where(mt`${_e(a)} BETWEEN ${r-l} AND ${r+l}`),e&&(u=u.where(e)),u=u.orderby(mt`(x - (${n}))**2 + (y - (${r}))**2`).limit(1);let c=(await this.coordinator.query(u)).get(0);if(c)return this.lastDistance=Math.max(Math.abs(c.x-n),Math.abs(c.y-r))*4,this._convertToDataPoint(c)}return null}async queryPoints(e){let{table:n,identifier:r}=this.source;if(r==null)return[];let i=Ue.from(n).select(this.selectParams);return i=i.where(w0(_e(r),e.map(s=>Ze(s)))),Array.from(await this.coordinator.query(i)).map(s=>this._convertToDataPoint(s))}}function Uut(t,e){E1(e,!0);let n=bt(e,"coordinator",19,gh),r=bt(e,"category",3,null),i=bt(e,"text",3,null),s=bt(e,"identifier",3,null),o=bt(e,"filter",3,null),a=bt(e,"categoryColors",3,null),l=bt(e,"tooltip",3,null),u=bt(e,"additionalFields",3,null),c=bt(e,"selection",3,null),f=bt(e,"rangeSelection",3,null),h=bt(e,"rangeSelectionValue",3,null),d=bt(e,"width",3,null),p=bt(e,"height",3,null),m=bt(e,"pixelRatio",3,null),y=bt(e,"config",3,null),b=bt(e,"theme",3,null),v=bt(e,"viewportState",3,null),w=bt(e,"labels",3,null),_=bt(e,"customTooltip",3,null),S=bt(e,"customOverlay",3,null),A=bt(e,"onViewportState",3,null),C=bt(e,"onTooltip",3,null),D=bt(e,"onSelection",3,null),T=bt(e,"onRangeSelection",3,null),M=bt(e,"cache",3,null),I=qr(new Float32Array),N=qr(new Float32Array),P=qr(null),O=qr(1),R=qr(1),L=qr(1),B=qr(null),z=qr(null),U=qr(null),V=qr(null),W=qr(null);Yh(()=>{let K={coordinator:n(),source:{table:e.table,x:e.x,y:e.y,category:r()}},de=null,ge=!1;async function oe(){let Fe=K.source,Ce=await But(K.coordinator,Fe);if(ge)return;let je=Ce.scaler*.95;zt(B,{x:Ce.centerX,y:Ce.centerY,scale:je}),zt(R,Ce.totalCount),zt(L,Ce.maxDensity),zt(O,Ce.categoryCount),de=mh({coordinator:K.coordinator,selection:o()??void 0,query:Ge=>Ue.from(Fe.table).select({x:mt`${_e(Fe.x)}::FLOAT`,y:mt`${_e(Fe.y)}::FLOAT`,...Fe.category!=null?{c:mt`${_e(Fe.category)}::UTINYINT`}:{}}).where(Ge),queryResult:Ge=>{let Ee=Ge.getChild("x").toArray(),rt=Ge.getChild("y").toArray(),Vt=Ge.getChild("c")?.toArray()??null;Ee!=null&&!(Ee instanceof Float32Array)&&(Ee=new Float32Array(Ee)),rt!=null&&!(rt instanceof Float32Array)&&(rt=new Float32Array(rt)),Vt!=null&&!(Vt instanceof Uint8Array)&&(Vt=new Uint8Array(Vt)),zt(I,Ee),zt(N,rt),zt(P,Vt),H(null),Y(null)}}),de.reset=()=>{se()},zt(W,de)}return oe(),()=>{zt(W,null),ge=!0,de?.destroy()}}),Yh(()=>{if(Ko(l())){let K=Q(W);if(K==null)return;let de=l();zt(z,de.valueFor(K)??null);let ge=()=>{zt(z,de.valueFor(K)??null)};return Yh(()=>{let oe=Q(z),Fe={x:e.x,y:e.y,category:r(),identifier:s()};de.update({source:K,clients:new Set().add(K),predicate:oe!=null?qJ(Fe,[oe]):null,value:oe})}),de.addEventListener("value",ge),()=>{de.removeEventListener("value",ge),de.update({source:K,clients:new Set().add(K),value:null,predicate:null})}}else if(l()==null||typeof l()=="object")zt(z,l());else{if(Q(z)?.identifier==l())return;let K=!1;return fe([l()]).then(de=>{K||(de.length>0?zt(z,de[0]):zt(z,null))}),()=>{K=!0}}});function H(K){Gp(l(),K)||(zt(z,K),C()?.(K))}Yh(()=>{if(Ko(c())){let K=Q(W);if(K==null)return;let de=c();zt(U,de.valueFor(K)??null);let ge=()=>{zt(U,de.valueFor(K)??null)};return Yh(()=>{let oe=Q(U),Fe={x:e.x,y:e.y,category:r(),identifier:s()};de.update({source:K,clients:new Set().add(K),predicate:oe!=null?qJ(Fe,oe):null,value:oe})}),de.addEventListener("value",ge),()=>{de.removeEventListener("value",ge),de.update({source:K,clients:new Set().add(K),value:null,predicate:null})}}else if(c()==null)zt(U,null);else if(c().length==0)zt(U,[]);else if(c().every(K=>typeof K=="object"))zt(U,c());else{let K=!1;return fe(c()).then(de=>{K||zt(U,de)}),()=>{K=!0}}});function Y(K){Gp(c(),K)||(zt(U,K),D()?.(K))}Yh(()=>{let K=Q(W);if(K==null)return;let de=f();if(de!=null)return Yh(()=>{let ge=Q(V),oe={x:e.x,y:e.y},Fe={source:K,clients:new Set().add(K),predicate:ge!=null?Put(oe,ge):null,value:ge};de.update(Fe),de.activate(Fe)}),()=>{de.update({source:K,clients:new Set().add(K),value:null,predicate:null})}}),Yh(()=>{Gp(O1(()=>Q(V)),h())||zt(V,h())});function se(){Y(null),H(null),T()?.(null),zt(V,null)}let he=Wt(()=>new $ut(n(),{table:e.table,x:e.x,y:e.y,category:r(),text:i(),identifier:s(),additionalFields:u()}));async function be(K,de,ge){return await Q(he).queryClosestPoint(o()?.predicate?.(Q(W)),K,de,ge)}async function fe(K){return await Q(he).queryPoints(K)}async function me(K){if(i()==null)return K.map(()=>null);let de=await mut({regions:K,stopWords:y()?.autoLabelStopWords??null}),ge=0,oe=1e4,Fe=null;for(;;){let je=await n().query(Ue.from(e.table).select({x:_e(e.x),y:_e(e.y),text:_e(i())}).offset(ge).limit(oe)),Ge={x:je.getChild("x").toArray(),y:je.getChild("y").toArray(),text:je.getChild("text").toArray()};if(Fe!=null&&await Fe,Fe=but(de,Ge),je.getChild("text").length<oe)break;ge+=oe}Fe!=null&&await Fe;let Ce=await vut(de);return await yut(de),Ce.map(je=>je.length==0?null:je.length>2?je.slice(0,2).join("-")+`-
`+je.slice(2).join("-"):je.join("-"))}{let K=Wt(()=>d()??800),de=Wt(()=>p()??800),ge=Wt(()=>m()??2),oe=Wt(()=>({x:Q(I),y:Q(N),category:Q(P)}));Nut(t,{get width(){return Q(K)},get height(){return Q(de)},get pixelRatio(){return Q(ge)},get theme(){return b()},get config(){return y()},get data(){return Q(oe)},get totalCount(){return Q(R)},get maxDensity(){return Q(L)},get categoryCount(){return Q(O)},get categoryColors(){return a()},get defaultViewportState(){return Q(B)},querySelection:be,queryClusterLabels:me,get labels(){return w()},get customTooltip(){return _()},get customOverlay(){return S()},get tooltip(){return Q(z)},onTooltip:H,get selection(){return Q(U)},onSelection:Y,get viewportState(){return v()},get onViewportState(){return A()},get rangeSelection(){return Q(V)},onRangeSelection:Fe=>{zt(V,Fe),T()?.(Fe)},get cache(){return M()}})}D1()}class zut{component;currentProps;constructor(e,n){this.currentProps={...n},this.component=Cat({component:Uut,target:e,props:n})}update(e){let n={};for(let r in e)e[r]!==this.currentProps[r]&&(n[r]=e[r],this.currentProps[r]=e[r]);this.component.$set(n)}destroy(){this.component.$destroy()}}function jut(){return w0e()?32:4}function b6(t,e=0){let n=HE(t);return n.l+=e,n.a=0,n.b=0,n.rgb().formatHex8()}const sg={light:{scheme:"light",continuousColorScheme:"YlGnBu",continuousColorSchemeAtZero:JU(0),markColor:"#3b82f6",markColorFade:"#dbeafe",markColorGray:b6("#3b82f6",20),markColorGrayFade:b6("#dbeafe"),gridColor:Ku.slate[300],labelColor:Ku.slate[400],titleColor:Ku.slate[400],brushBorder:Ku.slate[500],brushBorderBack:"#fff",brushFill:"rgba(0,0,0,0.1)"},dark:{scheme:"dark",continuousColorScheme:"Inferno",continuousColorSchemeAtZero:GD(0),markColor:"#3b82f6",markColorFade:"#3b4d7f",markColorGray:b6("#3b82f6",-20),markColorGrayFade:b6("#1f398a"),gridColor:Ku.slate[700],labelColor:Ku.slate[500],titleColor:Ku.slate[500],brushBorder:Ku.slate[400],brushBorderBack:"#000",brushFill:"rgba(255,255,255,0.1)"}};function $ge(t){let e=[];for(let n=0;n<t;n++)e.push(ZU((n+.5)/t));return e}const Uge="system-ui",PN=11,qut=80;let Ox;function Vut(){return Ox==null&&(Ox=document.createElement("canvas"),Ox.width=1,Ox.height=1),Ox.getContext("2d")}function BN(t){let e=Vut();e.font=`${PN}px ${Uge}`;let n=e.measureText(t);return{width:Math.min(qut,n.width),height:PN}}function zge(t,e,n=0){let r=0,i=0;for(let s of t){let{width:o,height:a}=s.size;r=Math.max(r,o),i=Math.max(i,a)}switch(e){case"x":return{left:r/2,right:r/2,top:0,bottom:i+n};case"y":return{left:r+n,right:0,top:i/2,bottom:i/2}}}function VJ(t,e,n){switch(t.type){case"band":return Wut(t,e,n);default:return Hut(t,e,n)}}function Wut(t,e,n){let r=[...t.domain,...t.specialValues??[]];r=Array.from(new Set(r)),n=="y"&&(r=r.reverse());let i=wS().domain(r).padding(.1),s=[],o=[],a={left:0,right:0,top:0,bottom:0};if(e){let l=e.values??i.domain(),u=e.labelPadding??6;s=l.map(c=>{let{width:f,height:h}=BN(c);return n=="y"?{text:c,value:c,padding:u,level:0,size:{width:f,height:h},orientation:"horizontal"}:{text:c,value:c,padding:u,level:0,size:{width:h,height:f},orientation:"vertical"}}),o=l.map(c=>({value:c,level:0})),a=yz([a,zge(s,n,u)])}return{extents:a,labels:s,gridLines:[],ticks:o,concrete:l=>Yut(i,t.domain,t.specialValues??[],l)}}function Hut(t,e,n){let r;switch(t.type){case"linear":{r=ep().domain(t.domain);break}case"log":{r=pv().domain(t.domain);break}case"symlog":{let a=t.constant??1;r=GU().constant(a).domain(t.domain),r.nice=()=>r,r.ticks=l=>Xut(r.domain(),a,l),r.tickFormat=()=>Lu("~s");break}default:throw new Error("invalid scale type")}let i=[],s=[],o={left:0,right:0,top:0,bottom:0};if(e){let a=[];if(e.extendScaleToTicks??!0)if(e.values){a=e.values;let f=r.domain().concat(a);r=r.domain([f.reduce((h,d)=>Math.min(h,d),f[0]),f.reduce((h,d)=>Math.max(h,d),f[0])])}else{let f=e.desiredTickCount??5;r.nice&&(r=r.nice(f)),a=r.ticks(f)}else{if(e.values)a=e.values;else{let d=e.desiredTickCount??5;a=r.ticks(d)}let[f,h]=r.domain();a=a.filter(d=>d>=f&&d<=h)}let l=e.labelPadding??6,u=r.tickFormat(e.values?e.values.length:e.desiredTickCount??5),c=f=>t.type=="log"||t.type=="symlog"?Math.round(Math.log10(Math.abs(f)))==Math.log10(Math.abs(f))?0:1:0;i=a.map(f=>{let h=u(f);return{text:h,value:f,padding:l,level:c(f),size:BN(h),orientation:"horizontal"}});for(let f of t.specialValues??[])i.push({text:f,value:f,padding:l,level:0,size:BN(f),orientation:"horizontal"});s=a.map(f=>({value:f,level:c(f)})),o=yz([o,zge(i,n,l)])}return{extents:o,labels:i,gridLines:s,ticks:s,concrete:a=>Gut(r,t.specialValues??[],a)}}function yz(t){let e={left:0,right:0,top:0,bottom:0};for(let n of t)e.left=Math.max(e.left,n.left),e.right=Math.max(e.right,n.right),e.top=Math.max(e.top,n.top),e.bottom=Math.max(e.bottom,n.bottom);return e}function WJ(t,e,n={}){let r=n.gap??0,i=t.map((a,l)=>({...e(a),index:l})).sort((a,l)=>a.priority-l.priority),s=t.map(a=>!1),o=(a,l)=>Math.abs(a.center-l.center)<r+a.length/2+l.length/2;for(let a=0;a<i.length;a++){let l=!1;for(let u=0;u<a;u++)if(s[i[u].index]&&o(i[a],i[u])){l=!0;break}s[i[a].index]=!l}return t.filter((a,l)=>s[l])}function Gut(t,e,n){e=Array.from(new Set(e));let r=n[0],i=n[1],s=new Map,o;if(e.length>0){let l=22,u=8,c=20,f=e.length*c,h=2,d=r;r<i?(r=r+f+l,o=[d,d+f+l-u]):(r=r-f-l,d=r+l,o=[d-l+u,d+f]);for(let p=0;p<e.length;p++)s.set(e[p],[d+p*c+h,d+p*c+c-h])}let a=t.copy().range([r,i]);return{domain:t.domain(),specialValues:e??[],range:[r,i],rangeBands:[[r,i],...o?[o]:[]],apply:l=>{let u=s.get(l);return u!=null?(u[0]+u[1])/2:a(l)},applyBand:l=>{let u=s.get(l);if(u!=null)return u;if(typeof l!="number")return[a(l[0]),a(l[1])];{let c=a(l);return[c,c]}},invert:(l,u)=>{if(u!="number"){for(let[c,f]of s.entries())if(l>=Math.min(...f)&&l<=Math.max(...f))return c}return a.invert(l)}}}function Yut(t,e,n,r){let i=r[0],s=r[1],o=t.copy().range(r),a=o.bandwidth(),l=o.step();return{domain:e,specialValues:n,range:[i,s],rangeBands:[[i,s]],apply:u=>(o(u)??0)+a/2,applyBand:u=>{let c=o(u)??0;return[c,c+a]},invert:u=>{let c=(u-i)/(s-i),f=Math.floor(c*Math.abs(s-i)/l);return t.domain()[f]}}}function Xut(t,e,n){n=n??5;let r=t[0],i=t[1];if(r>0&&i>0&&r/i>.5||r<0&&i<0&&i/r>.5)return ep().domain([r,i]).ticks(n);let s=e*2,o=e*5;return r<-o&&i>o&&(n=Math.ceil(n/2)),[...r<-o?pv().domain([s,-r]).ticks(n).map(a=>-a):[],0,...i>o?pv().domain([s,i]).ticks(n):[]].filter(a=>a>=r&&a<=i)}function Kut(t,e){let{min:n,max:r,median:i,count:s,minPositive:o}=t,a={type:"linear",domain:[n,r]};return e==null?s>=100&&n>=0&&i<r*.05&&(a.type=n>0?"log":"symlog"):a.type=e,a.type=="log"&&(a.domain[0]=o),a}function Qut(t,e={}){let n=e.fade??[],r=e.ordinal??!1,i=[],s=l=>JSON.stringify(l);for(let l of t){let u=s(l);typeof l=="string"&&n.indexOf(l)>=0||i.push(u)}let o=r?$ge(i.length):S2(i.length),a=new Map(i.map((l,u)=>[l,o[u]]));return{domain:t,apply:l=>{let u=s(l);return a.get(u)??"#888888"}}}var Jut=an("<g><foreignObject><div> </div></foreignObject></g>");function HJ(t,e){ot(e,!0);let n=J(()=>e.dimension=="x"?{px:e.proxy.xScale?.apply(e.label.value)??0,py:e.proxy.plotHeight+e.label.padding,anchorX:.5,anchorY:0}:{px:-e.label.padding,py:e.proxy.yScale?.apply(e.label.value)??0,anchorX:1,anchorY:.5}),r=J(()=>k(n).px),i=J(()=>k(n).py),s=J(()=>k(n).anchorX),o=J(()=>k(n).anchorY),a=J(()=>e.label.orientation=="vertical"?{rotation:90,shiftX:k(s)*e.label.size.width,shiftY:-k(o)*e.label.size.height,width:e.label.size.height,height:e.label.size.width}:{rotation:0,shiftX:-k(s)*e.label.size.width,shiftY:-k(o)*e.label.size.height,width:e.label.size.width,height:e.label.size.height}),l=J(()=>k(a).rotation),u=J(()=>k(a).shiftX),c=J(()=>k(a).shiftY),f=J(()=>k(a).width),h=J(()=>k(a).height),d=4,p=4;var m=Jut(),y=ne(m);ue(y,"x",-d),ue(y,"y",-p);var b=ne(y);let v;var w=ne(b,!0);Z(b),Z(y),Z(m),Ne(()=>{ue(m,"transform",`translate(${k(r)+k(u)}, ${k(i)+k(c)}) rotate(${k(l)??""})`),ue(y,"width",k(f)+d*2),ue(y,"height",k(h)+p*2),ue(b,"title",e.label.text),v=Nt(b,"",v,{width:`${k(f)+2}px`,height:`${k(h)+p*2}px`,"line-height":`${k(h)+p*2}px`,"font-family":Uge,"font-size":`${PN}px`,"margin-left":"4px",color:e.color,overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}),pt(w,e.label.text)}),te(t,m),at()}var Zut=an('<line stroke-linecap="butt"></line>'),ect=an('<line stroke-dasharray="1,3" stroke-linecap="square"></line>'),tct=an("<g><!><!><!></g>"),nct=an('<line stroke-linecap="butt"></line>'),rct=an('<line stroke-linecap="square"></line>'),ict=an("<g><!><!><!></g>"),sct=xe("<div><svg><g><!><!><!><!></g></svg></div>");function _v(t,e){ot(e,!0);const n=4;let r=gt(e,"xAxis",19,()=>({})),i=gt(e,"yAxis",19,()=>({})),s=J(()=>e.xScale?VJ(e.xScale,r(),"x"):null),o=J(()=>e.yScale?VJ(e.yScale,i(),"y"):null),a=J(()=>yz([k(s)?.extents,k(o)?.extents,e.extents].filter(T=>T!=null))),l=J(()=>({x:k(a).left,y:k(a).top,width:e.width-k(a).left-k(a).right,height:e.height-k(a).top-k(a).bottom})),u=J(()=>k(s)?.concrete([0,k(l).width])),c=J(()=>k(o)?.concrete([k(l).height,0])),f=J(()=>k(s)&&k(u)?WJ(k(s).labels,T=>({center:k(u).apply(T.value),length:T.size.width,priority:T.level}),{gap:4}):[]),h=J(()=>k(o)&&k(c)?WJ(k(o).labels,T=>({center:k(c).apply(T.value),length:T.size.height,priority:T.level}),{gap:2}):[]),d=J(()=>sg[e.colorScheme??"light"]),p=J(()=>({xScale:k(u),yScale:k(c),plotWidth:k(l).width,plotHeight:k(l).height}));var m=sct();let y;var b=ne(m);Nt(b,"",{},{position:"absolute",left:"-4px",top:"-4px"});var v=ne(b),w=ne(v);Bd(w,()=>e.childrenBelow??An,()=>k(p));var _=pe(w);{var S=T=>{var M=tct(),I=ne(M);hn(I,17,()=>k(s).ticks,Pn,(O,R)=>{const L=J(()=>k(u).apply(k(R).value));var B=Zut();Ne(()=>{ue(B,"x1",k(L)),ue(B,"y1",k(l).height),ue(B,"x2",k(L)),ue(B,"y2",k(l).height+(k(R).level==0?3:0)),ue(B,"stroke",k(d).gridColor),ue(B,"stroke-opacity",k(R).level==0?1:.4)}),te(O,B)});var N=pe(I);hn(N,17,()=>k(s).gridLines,Pn,(O,R)=>{const L=J(()=>k(u).apply(k(R).value));var B=kn(),z=Ye(B);hn(z,17,()=>k(c)?.rangeBands??[],Pn,(U,V)=>{var W=J(()=>YI(k(V),2));let H=()=>k(W)[0],Y=()=>k(W)[1];var se=ect();Ne((he,be)=>{ue(se,"x1",k(L)),ue(se,"y1",he),ue(se,"x2",k(L)),ue(se,"y2",be),ue(se,"stroke",k(d).gridColor),ue(se,"stroke-opacity",k(R).level==0?1:.4)},[()=>Math.min(H(),Y()),()=>Math.max(H(),Y())]),te(U,se)}),te(O,B)});var P=pe(N);hn(P,17,()=>k(f),Pn,(O,R)=>{HJ(O,{get label(){return k(R)},dimension:"x",get proxy(){return k(p)},get color(){return k(d).labelColor}})}),Z(M),te(T,M)};Le(_,T=>{k(s)&&k(u)&&r()&&T(S)})}var A=pe(_);{var C=T=>{var M=ict(),I=ne(M);hn(I,17,()=>k(o).ticks,Pn,(O,R)=>{const L=J(()=>k(c).apply(k(R).value));var B=nct();ue(B,"x2",0),Ne(()=>{ue(B,"x1",-(k(R).level==0?3:0)),ue(B,"y1",k(L)),ue(B,"y2",k(L)),ue(B,"stroke",k(d).gridColor),ue(B,"stroke-opacity",k(R).level==0?1:.4)}),te(O,B)});var N=pe(I);hn(N,17,()=>k(o).gridLines,Pn,(O,R)=>{const L=J(()=>k(c).apply(k(R).value));var B=kn(),z=Ye(B);hn(z,17,()=>k(u)?.rangeBands??[],Pn,(U,V)=>{var W=J(()=>YI(k(V),2));let H=()=>k(W)[0],Y=()=>k(W)[1];var se=rct();Ne(()=>{ue(se,"x1",H()),ue(se,"y1",k(L)),ue(se,"x2",Y()),ue(se,"y2",k(L)),ue(se,"stroke",k(d).gridColor),ue(se,"stroke-opacity",k(R).level==0?1:.4)}),te(U,se)}),te(O,B)});var P=pe(N);hn(P,17,()=>k(h),Pn,(O,R)=>{HJ(O,{get label(){return k(R)},dimension:"y",get proxy(){return k(p)},get color(){return k(d).labelColor}})}),Z(M),te(T,M)};Le(A,T=>{k(o)&&k(c)&&i()&&T(C)})}var D=pe(A);Bd(D,()=>e.children??An,()=>k(p)),Z(v),Z(b),Z(m),Ne(()=>{y=Nt(m,"",y,{width:`${e.width??""}py`,height:`${e.height??""}px`,position:"relative","user-select":"none","-webkit-user-select":"none",cursor:"default"}),ue(b,"width",e.width+n*2),ue(b,"height",e.height+n*2),ue(v,"transform",`translate(${n+k(l).x},${n+k(l).y})`)}),te(t,m),at()}var oct=an('<rect role="none"></rect><rect role="none"></rect>',1),act=an('<rect role="none"></rect><rect role="none"></rect>',1),lct=an('<rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect>',1),uct=an('<rect></rect><rect role="none"></rect><!><!><!>',1),cct=an('<g><rect stroke="none" fill="none" role="none"></rect><!></g>');function sT(t,e){ot(e,!0);const n=8;let r=J(()=>sg[e.colorScheme??"light"]),i,s=J(()=>e.proxy.xScale!=null&&e.value?.x!=null?e.proxy.xScale.applyBand(e.value.x):[0,e.proxy.plotWidth]),o=J(()=>e.proxy.yScale!=null&&e.value?.y!=null?e.proxy.yScale.applyBand(e.value.y):[0,e.proxy.plotHeight]);function a(y){return y instanceof Array&&y.length==2&&typeof y[0]=="number"&&typeof y[1]=="number"}function l(y,b,v){let w=y.invert(b,v);if(y.domain.length==2&&typeof y.domain[0]=="number"&&typeof w=="number"){let[_,S]=y.domain;return Math.max(Math.min(_,S),Math.min(Math.max(_,S),w))}return w}function u(y,b){return(b=="x"||b=="xy")&&y.x==null?!1:!((b=="y"||b=="xy")&&y.y==null)}function c(){return y=>{let b=i.getBoundingClientRect().left,v=i.getBoundingClientRect().top,w=y.clientX-b,_=y.clientY-v,S=e.proxy.xScale?l(e.proxy.xScale,w):null,A=e.proxy.yScale?l(e.proxy.yScale,_):null;if(S==null&&(e.mode=="x"||e.mode=="xy")||A==null&&(e.mode=="y"||e.mode=="xy"))return;let C=(T,M)=>typeof T=="number"&&typeof M=="number"?T!=M?[Math.min(T,M),Math.max(T,M)]:null:M,D=T=>{let M=T.clientX-b,I=T.clientY-v,N=e.proxy.xScale?l(e.proxy.xScale,M,typeof S=="number"?"number":void 0):null,P=e.proxy.yScale?l(e.proxy.yScale,I,typeof A=="number"?"number":void 0):null,O={};return(e.mode=="x"||e.mode=="xy")&&(O.x=C(S,N)),(e.mode=="y"||e.mode=="xy")&&(O.y=C(A,P)),u(O,e.mode)?O:null};return{move:T=>{e.onChange(D(T))},up:T=>{e.onChange(D(T))}}}}function f(y){return b=>{if(e.value==null)return;let v={...e.value},{xScale:w,yScale:_}=e.proxy,S=a(v.x),A=a(v.y),C=[...w&&v.x?w.applyBand(v.x):[0,0],..._&&v.y?_.applyBand(v.y):[0,0]];if(!S){let T=Math.max(y[0],y[1]);y=[T,T,y[2],y[3]]}if(!A){let T=Math.max(y[2],y[3]);y=[y[0],y[1],T,T]}let D=T=>{let M=T.pageX-b.pageX,I=T.pageY-b.pageY,N=[M,M,I,I].map((O,R)=>C[R]+O*y[R]),P={...v};if(w&&(e.mode=="x"||e.mode=="xy"))if(S){let O=l(w,N[0],"number"),R=l(w,N[1],"number");P.x=O==R?null:O<R?[O,R]:[R,O]}else P.x=l(w,(N[0]+N[1])/2),typeof P.x!="string"&&(P.x=null);if(_!=null&&(e.mode=="y"||e.mode=="xy"))if(A){let O=l(_,N[2],"number"),R=l(_,N[3],"number");P.y=O==R?null:O<R?[O,R]:[R,O]}else P.y=l(_,(N[2]+N[3])/2),typeof P.y!="string"&&(P.y=null);return u(P,e.mode)||(P=null),P};return{move:T=>{e.onChange(D(T))},up:T=>{let M=D(T);M&&!S&&!A&&M.x==v.x&&M.y==v.y&&(M=null),e.onChange(M)}}}}var h=cct(),d=ne(h);ue(d,"x",0),ue(d,"y",0),Nt(d,"",{},{"pointer-events":"fill","user-select":"none",cursor:"crosshair"}),za(d,y=>i=y,()=>i),dl(d,(y,b)=>Hi?.(y,b),()=>({click:()=>{e.onChange(null)},drag:c()}));var p=pe(d);{var m=y=>{var b=uct(),v=Ye(b);let w;var _=pe(v);let S;dl(_,(N,P)=>Hi?.(N,P),()=>({drag:f([1,1,1,1])}));var A=pe(_);{var C=N=>{var P=oct(),O=Ye(P);ue(O,"width",n),Nt(O,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(O,(L,B)=>Hi?.(L,B),()=>({drag:f([1,0,0,0])}));var R=pe(O);ue(R,"width",n),Nt(R,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(R,(L,B)=>Hi?.(L,B),()=>({drag:f([0,1,0,0])})),Ne((L,B,z,U)=>{ue(O,"x",k(s)[0]-n/2),ue(O,"y",L),ue(O,"height",B),ue(R,"x",k(s)[1]-n/2),ue(R,"y",z),ue(R,"height",U)},[()=>Math.min(k(o)[0],k(o)[1]),()=>Math.abs(k(o)[0]-k(o)[1]),()=>Math.min(k(o)[0],k(o)[1]),()=>Math.abs(k(o)[0]-k(o)[1])]),te(N,P)};Le(A,N=>{(e.mode=="x"||e.mode=="xy")&&a(e.value.x)&&N(C)})}var D=pe(A);{var T=N=>{var P=act(),O=Ye(P);ue(O,"height",n),Nt(O,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(O,(L,B)=>Hi?.(L,B),()=>({drag:f([0,0,1,0])}));var R=pe(O);ue(R,"height",n),Nt(R,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(R,(L,B)=>Hi?.(L,B),()=>({drag:f([0,0,0,1])})),Ne((L,B,z,U)=>{ue(O,"x",L),ue(O,"width",B),ue(O,"y",k(o)[0]-n/2),ue(R,"x",z),ue(R,"width",U),ue(R,"y",k(o)[1]-n/2)},[()=>Math.min(k(s)[0],k(s)[1]),()=>Math.abs(k(s)[0]-k(s)[1]),()=>Math.min(k(s)[0],k(s)[1]),()=>Math.abs(k(s)[0]-k(s)[1])]),te(N,P)};Le(D,N=>{(e.mode=="y"||e.mode=="xy")&&a(e.value.y)&&N(T)})}var M=pe(D);{var I=N=>{var P=lct(),O=Ye(P);ue(O,"width",n),ue(O,"height",n),Nt(O,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(O,(z,U)=>Hi?.(z,U),()=>({drag:f([1,0,1,0])}));var R=pe(O);ue(R,"width",n),ue(R,"height",n),Nt(R,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(R,(z,U)=>Hi?.(z,U),()=>({drag:f([1,0,0,1])}));var L=pe(R);ue(L,"width",n),ue(L,"height",n),Nt(L,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(L,(z,U)=>Hi?.(z,U),()=>({drag:f([0,1,1,0])}));var B=pe(L);ue(B,"width",n),ue(B,"height",n),Nt(B,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),dl(B,(z,U)=>Hi?.(z,U),()=>({drag:f([0,1,0,1])})),Ne(()=>{ue(O,"x",k(s)[0]-n/2),ue(O,"y",k(o)[0]-n/2),ue(R,"x",k(s)[0]-n/2),ue(R,"y",k(o)[1]-n/2),ue(L,"x",k(s)[1]-n/2),ue(L,"y",k(o)[0]-n/2),ue(B,"x",k(s)[1]-n/2),ue(B,"y",k(o)[1]-n/2)}),te(N,P)};Le(M,N=>{e.mode=="xy"&&a(e.value.x)&&a(e.value.y)&&N(I)})}Ne((N,P,O,R,L,B,z,U)=>{ue(v,"x",N),ue(v,"width",P),ue(v,"y",O),ue(v,"height",R),w=Nt(v,"",w,{stroke:k(r).brushBorderBack,fill:"none","stroke-width":2}),ue(_,"x",L),ue(_,"width",B),ue(_,"y",z),ue(_,"height",U),S=Nt(_,"",S,{stroke:k(r).brushBorder,fill:k(r).brushFill,cursor:"move"})},[()=>Math.min(k(s)[0],k(s)[1]),()=>Math.abs(k(s)[0]-k(s)[1]),()=>Math.min(k(o)[0],k(o)[1]),()=>Math.abs(k(o)[0]-k(o)[1]),()=>Math.min(k(s)[0],k(s)[1]),()=>Math.abs(k(s)[0]-k(s)[1]),()=>Math.min(k(o)[0],k(o)[1]),()=>Math.abs(k(o)[0]-k(o)[1])]),te(y,b)};Le(p,y=>{k(s)&&k(o)&&e.value&&y(m)})}Z(h),Ne(()=>{ue(d,"width",e.proxy.plotWidth),ue(d,"height",e.proxy.plotHeight)}),te(t,h),at()}const fct="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let jge=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=fct[n[t]&63];return e};var hct=xe("<option> </option>"),dct=xe('<select class="form-select text-center pl-[4px] pr-[16px] py-0 my-0 border-0 rounded text-sm! text-slate-500 bg-slate-100 dark:text-slate-400 dark:bg-slate-900"></select>');function oT(t,e){ot(e,!0);let n;const r=jge(),i=r+"_null",s=r+"_undefined",o=h=>h===null?i:h===void 0?s:h.toString(),a=h=>h===i?null:h===s?void 0:h,l=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 20">
    <path d="M 2,8 L 5,12 L 8,8" style="stroke:${Ku.gray[500]};stroke-opacity:0.7;stroke-width:1.5;fill:none;stroke-linecap:round;stroke-linejoin:round" />
  </svg>`;var u=dct();u.__change=()=>{e.onChange(a(n.value))};let c;hn(u,21,()=>e.options,Pn,(h,d)=>{var p=hct(),m=ne(p,!0);Z(p);var y={};Ne(b=>{pt(m,k(d).label),y!==(y=b)&&(p.value=(p.__value=b)??"")},[()=>o(k(d).value)]),te(h,p)}),Z(u),za(u,h=>n=h,()=>n);var f;ik(u),Ne((h,d)=>{c=Nt(u,"",c,h),f!==(f=d)&&(u.value=(u.__value=d)??"",jb(u,d))},[()=>({"background-image":`url(data:image/svg+xml;base64,${btoa(l)??""})`,"background-position":"right center"}),()=>o(e.value)]),te(t,u),at()}ti(["change"]);var pct=xe('<span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm"> </span> <!></span>');function s1(t,e){ot(e,!0);let n=gt(e,"value",15);const r=["linear","log","symlog"];var i=kn(),s=Ye(i);{var o=a=>{var l=pct(),u=ne(l),c=ne(u);Z(u);var f=pe(u,2);{let h=J(()=>r.map(d=>({value:d,label:d})));oT(f,{get options(){return k(h)},get value(){return n()},onChange:d=>n(d)})}Z(l),Ne(()=>pt(c,`${e.label??""}:`)),te(a,l)};Le(s,a=>{n()!=null&&n()!="band"&&a(o)})}te(t,i),at()}const gct=""+new URL("duckdb-browser-mvp.worker-Bc8GfOvd.js",import.meta.url).href,mct=""+new URL("duckdb-mvp-C5CQ5aRn.wasm",import.meta.url).href,yct=""+new URL("duckdb-browser-eh.worker-DcYAbAi8.js",import.meta.url).href,bct=""+new URL("duckdb-eh-CAt5YSMB.wasm",import.meta.url).href;function vct(){let t=window.location.href;return t=t.replace(/#.*$/,""),t=t.replace(/\/[^/]*$/,"/"),t.endsWith("/")||(t+="/"),t+"duckdb-wasm"}async function xct({log:t=!1}={}){const n=await rae({mvp:{mainModule:mct,mainWorker:gct},eh:{mainModule:bct,mainWorker:yct}}),r=new Worker(n.mainWorker),i=t?new eae:new Zoe,s=new nae(i,r);await s.instantiate(n.mainModule,n.pthreadWorker),await s.open({filesystem:{forceFullHTTPReads:!0}});const o=await s.connect();return await o.query(`SET custom_extension_repository = '${vct()}';`),{duckdb:s,connection:o}}async function bz(t,e,n=void 0){const r=await xct();if(e=="wasm"){const i=await EPe({duckdb:r.duckdb,connection:r.connection});t.databaseConnector(i)}else if(e=="socket"){const i=await Z9e({uri:n??""});t.databaseConnector(i)}else if(e=="rest"){const i=await vFe({uri:n??""});t.databaseConnector(i)}}function qge(t){return t==null?null:t instanceof Array?t.length==0?null:cs(t).toString().trim():typeof t=="string"?t.trim():typeof t=="boolean"?Ze(t).toString():t.toString().trim()}async function Vge(t,e){return Array.from(await t.query(`DESCRIBE ${e}`)).map(r=>({name:r.column_name,type:r.column_type,jsType:h3(r.column_type)}))}async function Wge(t,e,n){return(await t.query(`SELECT COUNT(DISTINCT ${_e(n)}) AS count FROM ${e}`)).get(0).count}function h3(t){return wct.has(t)?"number":_ct.has(t)?"string":t.match(/^(VARCHAR|TEXT)\[\d*\]$/)?"string[]":null}const wct=new Set(["REAL","FLOAT4","FLOAT8","FLOAT","DOUBLE","INT","TINYINT","INT1","SMALLINT","INT2","SHORT","INTEGER","INT4","INT","SIGNED","INT8","LONG","BIGINT","UTINYINT","USMALLINT","UINTEGER","UBIGINT","UHUGEINT"]),_ct=new Set(["BOOLEAN","DATE","VARCHAR","CHAR","BPCHAR","TEXT","STRING"]),Mx={linear:{type:"linear",expr:t=>t,forward:t=>t,reverse:t=>t},log:{type:"log",expr:t=>wa(du(t,0),Mie(t),Ze("nan")),forward:t=>Math.log10(t),reverse:t=>Math.pow(10,t)},symlog:{type:"symlog",expr:(t,e)=>Xt($d(t),ib(lr(1,No(Mr(t,e))))),forward:(t,e)=>Math.sign(t)*Math.log1p(Math.abs(t)/e),reverse:(t,e)=>Math.sign(t)*Math.expm1(Math.abs(t))*e}};function Sct(t,e){let n=t,r=1/0;for(let i of e){let s=Math.abs(t-i);s<r&&(r=s,n=i)}return n}function Hge(t,e={}){let{min:n,max:r,median:i,count:s}=t,o=e.scale;o=="band"&&(o=null),o==null&&(o="linear",s>=100&&n>=0&&i<r*.05&&(o=n>0?"log":"symlog")),n<=0&&o=="log"&&(r<=0?(n=1,r=10):n=Math.min(t.minPositive,r/10));let a=e.desiredCount??5;switch(o){case"linear":{let l=ep().domain([n,r]).nice(a),u=l.ticks(a);return{scale:{...Mx.linear,domain:l.domain()},binStart:l.domain()[0],binSize:u[1]-u[0]}}case"log":{let l=pv().domain([n,r]).nice(),u=Math.log10(l.domain()[0]),c=(Math.log10(l.domain()[1])-u)/a;return c=Sct(c,[.05,.1,.2,.5,1,1.5,2]),{scale:{...Mx.log,domain:l.domain()},binStart:u,binSize:c}}case"symlog":{let l=Math.max(Math.abs(n),Math.abs(r)),u=l>=100?1:l>0?l/1e5:1,c=Mx.symlog.forward(n,u),f=Mx.symlog.forward(r,u);return{scale:{...Mx.symlog,domain:[n,r],constant:u},binStart:c,binSize:(f-c)/a}}default:throw new Error("invalid scale type")}}async function qd(t,e,n){let r=a=>t.query(a),s=(await r(Ue.describe(Ue.from(e).select({field:_e(n,e)})))).get(0)?.column_type;if(s==null)return null;let o=h3(s);if(o=="number"){let a=yi(_e(n,e),"DOUBLE"),l=await r(Ue.from(e).select({count:ur(),min:pc(a),minPositive:pc(wa(du(a,0),a,Ze(null))),max:Eu(a),mean:$8(a),median:U8(a)}).where(r0(a))),u=await r(Ue.from(e).select({countNonFinite:ur()}).where(lo(Vb(r0(a)),uc(a))));return{table:e,field:n,quantitative:{...l.get(0),...u.get(0)}}}else if(o=="string"){let a=yi(_e(n,e),"TEXT"),l=Array.from(await r(Ue.from(e).select({value:a,count:ur()}).where(Yf(a)).groupby(a).orderby(Zv(ur())).limit(1e3))),u=(await r(Ue.from(e).select({count:ur()}).where(uc(a)))).get(0).count,{otherCount:c,numOtherLevels:f}=(await r(Ue.from(e).select({otherCount:ur(),numOtherLevels:mt`COUNT(DISTINCT(${a}))`}).where(Yf(a),Vb(w0(a,l.map(h=>Ze(h.value))))))).get(0);return{table:e,field:n,nominal:{levels:l,numOtherLevels:f,otherCount:c,nullCount:u}}}return null}function k2(...t){let e={},n={},r={},i={},s={};for(let l of t){if(l.stats.quantitative){let u=Hge(l.stats.quantitative,{scale:l.scaleType,desiredCount:l.binCount??20}),c=yi(_e(l.stats.field),"DOUBLE"),f=u.scale.expr(c,u.scale.constant??0);e[l.key]=u.scale.type=="log"?wa(cs(r0(c),du(c,Ze(0))),ao(Xt(Yt(f,u.binStart),1/u.binSize)),Ze(null)):wa(r0(c),ao(Xt(Yt(f,u.binStart),1/u.binSize)),Ze(null));let h=w=>Math.floor((u.scale.forward(w,u.scale.constant??0)-u.binStart)/u.binSize),d=w=>u.scale.reverse(w*u.binSize+u.binStart,u.scale.constant??0);r[l.key]=w=>w==null?"n/a":[d(w),d(w+1)];let p=h(u.scale.type=="log"?l.stats.quantitative.minPositive:l.stats.quantitative.min),m=h(l.stats.quantitative.max),y=[d(p),d(m+1)],b=l.stats.quantitative.countNonFinite>0;u.scale.type=="log"&&l.stats.quantitative.min<0&&(b=!0),n[l.key]={type:u.scale.type,constant:u.scale.constant,domain:y,specialValues:b?["n/a"]:[]};let v=w=>{if(typeof w=="string"){if(w=="n/a")return lo(Vb(r0(c)),uc(c))}else if(w instanceof Array)if(w.length==2&&typeof w[0]=="number"){let[_,S]=w;if(typeof _=="number"&&typeof S=="number")return Xo(c,[Math.min(_,S),Math.max(_,S)])}else return lo(...w.map(v));return Ze(!1)};i[l.key]=v,s[l.key]=(w,_)=>{let S=typeof w=="string"?[1,0]:[0,w[0]],A=typeof _=="string"?[1,0]:[0,_[0]];return S[0]!=A[0]?S[0]-A[0]:S[1]-A[1]}}if(l.stats.nominal){let u=l.binCount??15,{levels:c,nullCount:f,otherCount:h,numOtherLevels:d}=l.stats.nominal;c.length>u&&(d+=c.length-u,h=c.slice(u).reduce((_,S)=>_+S.count,0),c=c.slice(0,u));let p=`(${d.toLocaleString()} others)`,m="(null)",y=yi(_e(l.stats.field),"TEXT");e[l.key]=wa(w0(y,c.map(_=>Ze(_.value))),y,wa(uc(y),Ze(m),Ze(p)));let b=[...h>0?[p]:[],...f>0?[m]:[]];n[l.key]={type:"band",domain:c.map(_=>_.value),specialValues:b},r[l.key]=_=>_;let v=_=>_==m?uc(y):_==p?cs(Vb(w0(y,c.map(S=>Ze(S.value)))),Yf(y)):vB(y,Ze(_));i[l.key]=_=>_ instanceof Array?lo(..._.map(S=>v(S))):typeof _=="string"?v(_):null;let w=c.map(_=>_.value);s[l.key]=(_,S)=>{if(typeof _=="string"&&typeof S=="string"){let A=w.indexOf(_);A<0&&(A=w.length+b.indexOf(_));let C=w.indexOf(S);return C<0&&(C=w.length+b.indexOf(S)),A-C}return 0}}}function o(l){let u={...l};for(let c of t)u[c.key]=r[c.key](u[c.key]);return u}function a(l){let u=[];for(let c of t){let f=l[c.key],h=f!=null?i[c.key](f):null;h&&u.push(h)}return{value:{...l},predicate:u.length>0?cs(...u):null}}return{select:e,collect:o,scales:n,clause:a,order:s}}var Act=an('<line></line><line></line><line></line><rect></rect><line stroke-linecap="butt"></line>',1),Cct=an("<!><!>",1),kct=xe('<div class="text-slate-400 mb-1 select-none"> </div> <!> <div class="text-slate-400 mb-1 select-none text-right"> </div> <div class="flex flex-col items-end gap-1"><div class="flex flex gap-2 mt-2"><!> <!></div></div>',1);function Ect(t,e){ot(e,!0);const n=()=>Ds(s,"$colorScheme",r),[r,i]=aa();let{colorScheme:s}=e.context,o=J(()=>e.state.brush),a=J(()=>sg[n()]),l=De(null),u=De(null),c=De(null);function f(h,d,p,m,y){let b=De(null);Promise.all([qd(h,d,p),qd(h,d,m)]).then(([S,A])=>{ae(b,S!=null&&A!=null?{x:S,y:A}:null)});let v=J(()=>k(b)?k2({key:"x",stats:k(b).x,scaleType:e.spec.xScaleType,binCount:e.spec.xBinCount}):null),w=J(()=>k(b)?.y.quantitative?Kut(k(b).y.quantitative,e.spec.yScaleType):null);Bt(()=>{k(u)==null&&k(v)?.scales.x?.type!=null&&ae(u,k(v)?.scales.x?.type),k(c)==null&&k(w)?.type!=null&&ae(c,k(w)?.type)});function _(S,A,C){return mh({coordinator:h,selection:A??void 0,query:D=>{let T=_e(m,d);return Ue.from(d).select({...S.select,min:pc(T),max:Eu(T),p50:U8(T),p25:dR(T,.25),p75:dR(T,.75)}).where(D,r0(T)).groupby(S.select.x)},queryResult:D=>{C(Array.from(D).map(S.collect))}})}Bt(()=>{if(k(v)==null||k(w)==null)return;let S=k(v),A=De(mu([])),C=_(S,y,D=>{ae(A,D,!0)});return C.reset=()=>{e.onStateChange({brush:null})},Bt(()=>{ae(l,{xScale:S.scales.x,yScale:k(w),items:k(A)})}),Bt(()=>{let D={source:C,clients:new Set([C]),...k(o)!=null?S.clause(k(o)):{value:null,predicate:null}};y.update(D),y.activate(D)}),()=>{C.destroy(),y.update({source:C,clients:new Set([C]),value:null,predicate:null})}})}Bt(()=>{f(e.context.coordinator,e.context.table,e.spec.data.x,e.spec.data.y,e.context.filter)}),tg(t,{get width(){return e.width},get height(){return e.height},class:"flex flex-col",children:(h,d)=>{var p=kct(),m=Ye(p),y=ne(m);Z(m);var b=pe(m,2);{const N=(O,R=An,L=An)=>{var B=kn(),z=Ye(B);{var U=V=>{_v(V,{get width(){return R()},get height(){return L()},get xScale(){return k(l).xScale},get yScale(){return k(l).yScale},get colorScheme(){return n()},children:(H,Y=An)=>{const se=J(()=>Y().xScale),he=J(()=>Y().yScale),be=J(()=>n()=="dark"?"#bbbbbb":"black");var fe=Cct(),me=Ye(fe);hn(me,17,()=>k(l)?.items??[],Pn,(de,ge)=>{const oe=J(()=>{const[ze,Be]=k(se).applyBand(k(ge).x);return{x0:ze,x1:Be}}),Fe=J(()=>k(he).apply(k(ge).p50)),Ce=J(()=>{const[ze,Be]=k(he).applyBand([k(ge).min,k(ge).max]);return{ey0:ze,ey1:Be}}),je=J(()=>{const[ze,Be]=k(he).applyBand([k(ge).p25,k(ge).p75]);return{by0:ze,by1:Be}}),Ge=J(()=>Math.min(Math.abs(k(oe).x1-k(oe).x0)*.1,1)),Ee=J(()=>Math.abs(k(oe).x1-k(oe).x0)/3);var rt=Act(),Vt=Ye(rt),Xe=pe(Vt),ht=pe(Xe),ln=pe(ht),er=pe(ln);Ne((ze,Be,dt,Ht,dn,dr)=>{ue(Vt,"y1",k(Ce).ey0),ue(Vt,"y2",k(Ce).ey1),ue(Vt,"x1",(k(oe).x0+k(oe).x1)/2),ue(Vt,"x2",(k(oe).x0+k(oe).x1)/2),ue(Vt,"stroke",k(be)),ue(Xe,"y1",k(Ce).ey0),ue(Xe,"y2",k(Ce).ey0),ue(Xe,"x1",(k(oe).x0+k(oe).x1)/2-k(Ee)/2),ue(Xe,"x2",(k(oe).x0+k(oe).x1)/2+k(Ee)/2),ue(Xe,"stroke",k(be)),ue(ht,"y1",k(Ce).ey1),ue(ht,"y2",k(Ce).ey1),ue(ht,"x1",(k(oe).x0+k(oe).x1)/2-k(Ee)/2),ue(ht,"x2",(k(oe).x0+k(oe).x1)/2+k(Ee)/2),ue(ht,"stroke",k(be)),ue(ln,"x",ze),ue(ln,"height",Be),ue(ln,"y",dt),ue(ln,"width",Ht),ue(ln,"fill",k(a).markColor),ue(er,"y1",k(Fe)),ue(er,"y2",k(Fe)),ue(er,"x1",dn),ue(er,"x2",dr),ue(er,"stroke",k(be))},[()=>Math.min(k(oe).x0,k(oe).x1)+k(Ge)/2,()=>Math.abs(k(je).by0-k(je).by1),()=>Math.min(k(je).by0,k(je).by1),()=>Math.abs(k(oe).x0-k(oe).x1)-k(Ge),()=>Math.min(k(oe).x0,k(oe).x1)+k(Ge)/2,()=>Math.max(k(oe).x0,k(oe).x1)-k(Ge)/2]),te(de,rt)});var K=pe(me);{let de=J(()=>k(o)??null);sT(K,{get proxy(){return Y()},mode:"x",get value(){return k(de)},get colorScheme(){return n()},onChange:ge=>{e.onStateChange({brush:ge!=null&&ge.x!=null?{x:ge.x}:null})}})}te(H,fe)},$$slots:{default:!0}})};Le(z,V=>{k(l)!=null&&V(U)})}te(O,B)};let P=J(()=>e.height!=null);vS(b,{get flexHeight(){return k(P)},children:N,$$slots:{default:!0}})}var v=pe(b,2),w=ne(v);Z(v);var _=pe(v,2),S=ne(_),A=ne(S),C=()=>e.spec.xScaleType??k(u)??"linear",D=N=>{e.onSpecChange({xScaleType:N})};s1(A,{label:"X",get value(){return C()},set value(N){D(N)}});var T=pe(A,2),M=()=>e.spec.yScaleType??k(c)??"linear",I=N=>{e.onSpecChange({yScaleType:N})};s1(T,{label:"Y",get value(){return M()},set value(N){I(N)}}),Z(S),Z(_),Ne(()=>{pt(y,`â ${e.spec.data.y??""}`),pt(w,`${e.spec.data.x??""} â`)}),te(h,p)},$$slots:{default:!0}}),at(),i()}var Dct=xe('<hr class="mt-1 mb-1 border-slate-300 dark:border-slate-500 border-dashed"/>'),Tct=xe('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>'),Oct=xe('<!> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),Mct=xe('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>'),Ict=xe('<!> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),Rct=xe('<!> <button class="text-left items-center flex py-0.5"><div class="w-40 flex-none overflow-hidden whitespace-nowrap text-ellipsis pr-1"><span> </span></div> <div class="flex-1 h-4 relative"><!></div> <div class="flex-none"><span><!></span></div></button>',1),Fct=xe('<button class="py-0.5 text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden"><!></button>'),Nct=xe('<!> <div class="flex"><div class="flex-1 pl-40 mr-2 overflow-hidden"><!></div> <div class="flex"><!></div></div>',1),Lct=xe('<div class="flex flex-col text-sm w-full select-none"><!></div>');function Pct(t,e){ot(e,!0);const n=()=>Ds(l,"$colorScheme",r),[r,i]=aa(),s=10,o=100;let{coordinator:a,colorScheme:l}=e.context,u=J(()=>e.state.selection),c=J(()=>e.spec.expanded),f=J(()=>e.spec.percentage),h=De(null),d=De(400),p=J(()=>k(h)?.items.reduce((D,T)=>Math.max(D,k(f)?T.selected:T.total),0)??0),m=J(()=>ep([0,Math.max(1,k(p))],[0,k(d)-250])),y=J(()=>D=>D!=0?Math.max(1,k(m)(D)):0),b=J(()=>sg[n()]);function v(D,T,M,I){let N=De(null);qd(D,T,M).then(R=>{ae(N,R)});let P=J(()=>k(N)?k2({key:"x",stats:k(N),binCount:k(c)?o:s}):null);function O(R,L,B){return mh({coordinator:D,selection:L??void 0,query:z=>Ue.from(T).select({...R.select,count:ur()}).where(z).groupby(R.select.x),queryResult:z=>{B(Array.from(z).map(R.collect))}})}Bt(()=>{if(k(P)==null)return;let R=k(P),L=De([]),B=De([]),z=O(R,null,W=>{ae(L,W)}),U=O(R,I,W=>{ae(B,W)}),V={reset:()=>{e.onStateChange({selection:null})}};return Bt(()=>{if(k(L).length>0){let W=se=>JSON.stringify(se),H=new Map(k(L).map(({x:se,count:he})=>[W(se),he])),Y=new Map(k(B).map(({x:se,count:he})=>[W(se),he]));if(k(L).every(se=>typeof se.x=="string")){let se=R.scales.x.specialValues??[],he=se.filter(K=>K!="(null)").length>0,be=[...R.scales.x.domain,...se].map(K=>({x:K,total:H.get(W(K))??0,selected:Y.get(W(K))??0})),fe=be.reduce((K,de)=>K+de.total,0),me=be.reduce((K,de)=>K+de.selected,0);ae(h,{items:be,sumTotal:fe,sumSelected:me,firstSpecialIndex:R.scales.x.domain.length,hasOther:he})}else{let se=Array.from(H.keys()).map(me=>JSON.parse(me));se=se.sort((me,K)=>{let de=typeof me=="string"?1/0:me[0],ge=typeof K=="string"?1/0:K[0];return de-ge});let he=se.map(me=>({x:me,total:H.get(W(me))??0,selected:Y.get(W(me))??0})),be=he.reduce((me,K)=>me+K.total,0),fe=he.reduce((me,K)=>me+K.selected,0);ae(h,{items:he,sumTotal:be,sumSelected:fe,firstSpecialIndex:se.findIndex(me=>typeof me=="string"),hasOther:!1})}}}),Bt(()=>{let W={source:V,clients:new Set([U]),...k(u)!=null?R.clause({x:k(u)}):{value:null,predicate:null}};I.update(W),I.activate(W)}),()=>{z.destroy(),U.destroy(),I.update({source:V,clients:new Set([U]),value:null,predicate:null})}})}Bt(()=>{v(a,e.context.table,e.spec.data.field,e.context.filter)});const w=(D,T)=>JSON.stringify(D)==JSON.stringify(T);function _(D,T){if(k(u)==null||k(u).length==0)e.onStateChange({selection:[D]});else{let M=k(u).findIndex(I=>w(I,D))>=0;T?M?e.onStateChange({selection:k(u).filter(I=>!w(I,D))}):e.onStateChange({selection:[...k(u),D]}):M?e.onStateChange({selection:null}):e.onStateChange({selection:[D]})}}const S=Lu(".6");function A(D){return typeof D=="string"?D:"["+S(D[0])+", "+S(D[1])+")"}function C(D,T){return T==0?"-%":(D/T*100).toFixed(1)+"%"}tg(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,children:(D,T)=>{var M=Lct(),I=ne(M);{var N=P=>{var O=Nct(),R=Ye(O);hn(R,17,()=>k(h).items,Pn,(H,Y,se)=>{const he=J(()=>k(u)==null||k(u).length==0||k(u).findIndex(Be=>w(Be,k(Y).x))>=0),be=J(()=>!k(h).items.every(Be=>Be.total==Be.selected));var fe=Rct(),me=Ye(fe);{var K=Be=>{var dt=Dct();te(Be,dt)};Le(me,Be=>{se==k(h).firstSpecialIndex&&Be(K)})}var de=pe(me,2);de.__click=Be=>_(k(Y).x,Be.shiftKey);var ge=ne(de),oe=ne(ge);let Fe;var Ce=ne(oe,!0);Z(oe),Z(ge);var je=pe(ge,2),Ge=ne(je);{var Ee=Be=>{var dt=Oct(),Ht=Ye(dt);{var dn=ct=>{var Vn=Tct();let kr;Ne(Br=>kr=Nt(Vn,"",kr,Br),[()=>({background:k(b).markColorFade,width:`${k(y)(k(Y).total)??""}px`})]),te(ct,Vn)};Le(Ht,ct=>{k(f)||ct(dn)})}var dr=pe(Ht,2);let un;Ne(ct=>un=Nt(dr,"",un,ct),[()=>({background:k(b).markColor,width:`${k(y)(k(Y).selected)??""}px`})]),te(Be,dt)},rt=Be=>{var dt=Ict(),Ht=Ye(dt);{var dn=ct=>{var Vn=Mct();let kr;Ne(Br=>kr=Nt(Vn,"",kr,Br),[()=>({background:k(b).markColorGrayFade,width:`${k(y)(k(Y).total)??""}px`})]),te(ct,Vn)};Le(Ht,ct=>{k(f)||ct(dn)})}var dr=pe(Ht,2);let un;Ne(ct=>un=Nt(dr,"",un,ct),[()=>({background:k(b).markColorGray,width:`${k(y)(k(Y).selected)??""}px`})]),te(Be,dt)};Le(Ge,Be=>{k(he)?Be(Ee):Be(rt,!1)})}Z(je);var Vt=pe(je,2),Xe=ne(Vt);let ht;var ln=ne(Xe);{var er=Be=>{var dt=kn(),Ht=Ye(dt);{var dn=un=>{var ct=Ca();Ne(Vn=>pt(ct,Vn),[()=>C(k(Y).selected,k(h).sumSelected)]),te(un,ct)},dr=un=>{var ct=Ca();Ne(Vn=>pt(ct,Vn),[()=>k(Y).selected.toLocaleString()+" / "+k(Y).total.toLocaleString()]),te(un,ct)};Le(Ht,un=>{k(f)?un(dn):un(dr,!1)})}te(Be,dt)},ze=Be=>{var dt=kn(),Ht=Ye(dt);{var dn=un=>{var ct=Ca();Ne(Vn=>pt(ct,Vn),[()=>C(k(Y).total,k(h).sumTotal)]),te(un,ct)},dr=un=>{var ct=Ca();Ne(Vn=>pt(ct,Vn),[()=>k(Y).total.toLocaleString()]),te(un,ct)};Le(Ht,un=>{k(f)?un(dn):un(dr,!1)},!0)}te(Be,dt)};Le(ln,Be=>{k(be)?Be(er):Be(ze,!1)})}Z(Xe),Z(Vt),Z(de),Ne((Be,dt)=>{ue(de,"title",k(Y).x),Fe=wr(oe,1,"",null,Fe,{"text-gray-400":!k(he),"dark:text-gray-400":!k(he)}),pt(Ce,Be),ht=wr(Xe,1,"text-slate-400 dark:text-slate-500",null,ht,{"!text-gray-200":!k(he),"dark:!text-gray-600":!k(he)}),ue(Xe,"title",dt)},[()=>A(k(Y).x),()=>k(be)?`${k(Y).selected.toLocaleString()} / ${k(Y).total.toLocaleString()} (${C(k(Y).selected,k(Y).total)})
${C(k(Y).selected,k(h).sumSelected)} of selection`:`${k(Y).total.toLocaleString()}
${C(k(Y).total,k(h).sumTotal)} of all rows`]),te(H,fe)});var L=pe(R,2),B=ne(L),z=ne(B);{var U=H=>{var Y=Fct();Y.__click=()=>{k(c)==!0?(e.onSpecChange({expanded:!1}),e.onStateChange({selection:null})):e.onSpecChange({expanded:!0})};var se=ne(Y);{var he=fe=>{var me=Ca();me.nodeValue="â Show up to 10 values",te(fe,me)},be=fe=>{var me=Ca();me.nodeValue="â Show up to 100 values",te(fe,me)};Le(se,fe=>{k(c)?fe(he):fe(be,!1)})}Z(Y),te(H,Y)};Le(z,H=>{(k(c)||k(h).hasOther)&&H(U)})}Z(B);var V=pe(B,2),W=ne(V);{let H=J(()=>k(f)?.toString()??"false");oT(W,{options:[{value:"true",label:"%"},{value:"false",label:"#/#"}],get value(){return k(H)},onChange:Y=>e.onSpecChange({percentage:Y=="true"})})}Z(V),Z(L),te(P,O)};Le(I,P=>{k(h)&&P(N)})}Z(M),dc(M,"clientWidth",P=>ae(d,P)),te(D,M)},$$slots:{default:!0}}),at(),i()}ti(["click"]);async function Bct(t,e,n,r){let i=_e(n,e),s=await t.query(Ue.from(Ue.from(e).select({value:mt`UNNEST(${i})`})).select({value:"value",count:ur()}).groupby("value").orderby(Zv("count")).limit(r+1)),o=Array.from(s);return{values:o.slice(0,r),hasOther:o.length>r}}function $ct(t,e){return lo(...e.map(n=>mt`${Ze(n)} IN ${_e(t)}`))}var Uct=xe('<hr class="mt-1 mb-1 border-slate-300 dark:border-slate-500 border-dashed"/>'),zct=xe('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),jct=xe('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),qct=xe('<!> <button class="text-left items-center flex py-0.5"><div class="w-40 flex-none overflow-hidden whitespace-nowrap text-ellipsis pr-1"><span> </span></div> <div class="flex-1 h-4 relative"><!></div> <div class="flex-none"><span><!></span></div></button>',1),Vct=xe('<button class="py-0.5 text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden"><!></button>'),Wct=xe('<!> <div class="flex"><div class="flex-1 pl-40 mr-2 overflow-hidden"><!></div></div>',1),Hct=xe('<div class="flex flex-col text-sm w-full select-none"><!></div>');function Gct(t,e){ot(e,!0);const n=()=>Ds(a,"$colorScheme",r),[r,i]=aa(),s=10,o=100;let a=e.context.colorScheme,l=J(()=>e.state.selection),u=De(null),c=De(400),f=J(()=>k(u)?.items.reduce((S,A)=>Math.max(S,A.total),0)??0),h=J(()=>ep([0,Math.max(1,k(f))],[0,k(c)-250])),d=J(()=>S=>S!=0?Math.max(1,k(h)(S)):0),p=J(()=>sg[n()]);function m(S,A,C,D,T){let M=De(null);Bct(S,A,C,T).then(N=>{ae(M,N)});function I(N,P,O){return mh({coordinator:S,selection:N??void 0,query:R=>{let L=_e(C,A);return Ue.from(Ue.from(A).select({value:mt`UNNEST(${L})`}).where(R)).select({x:"value",count:ur()}).where(w0("value",P.map(B=>Ze(B)))).groupby("value").orderby(Zv("count"))},queryResult:R=>{O(Array.from(R))}})}Bt(()=>{if(k(M)==null)return;let N=k(M).values.map(U=>U.value),P=k(M).hasOther,O=De([]),R=De([]),L=I(null,N,U=>{ae(O,U)}),B=I(D,N,U=>{ae(R,U)}),z={reset:()=>{e.onStateChange({selection:null})}};return Bt(()=>{if(k(O).length>0){let U=Y=>JSON.stringify(Y),V=new Map(k(O).map(({x:Y,count:se})=>[U(Y),se])),W=new Map(k(R).map(({x:Y,count:se})=>[U(Y),se])),H=N.map(Y=>({x:Y,total:V.get(U(Y))??0,selected:W.get(U(Y))??0}));ae(u,{items:H,firstSpecialIndex:N.length,hasOther:P})}}),Bt(()=>{let U={source:z,clients:new Set([B]),...k(l)!=null?{value:k(l),predicate:$ct(C,k(l))}:{value:null,predicate:null}};D.update(U),D.activate(U)}),()=>{L.destroy(),B.destroy(),D.update({source:z,clients:new Set([B]),value:null,predicate:null})}})}Bt(()=>{m(e.context.coordinator,e.context.table,e.spec.data.field,e.context.filter,e.spec.expanded?o:s)});const y=(S,A)=>JSON.stringify(S)==JSON.stringify(A);function b(S,A){if(k(l)==null||k(l).length==0)e.onStateChange({selection:[S]});else{let C=k(l).findIndex(D=>y(D,S))>=0;A?C?e.onStateChange({selection:k(l).filter(D=>!y(D,S))}):e.onStateChange({selection:[...k(l),S]}):C?e.onStateChange({selection:null}):e.onStateChange({selection:[S]})}}const v=Lu(".6");function w(S){return typeof S=="string"?S:"["+v(S[0])+", "+v(S[1])+")"}function _(S,A){return A==0?"-%":(S/A*100).toFixed(1)+"%"}tg(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,children:(S,A)=>{var C=Hct(),D=ne(C);{var T=M=>{var I=Wct(),N=Ye(I);hn(N,17,()=>k(u).items,Pn,(B,z,U)=>{const V=J(()=>k(l)==null||k(l).length==0||k(l).findIndex(Xe=>y(Xe,k(z).x))>=0),W=J(()=>!k(u).items.every(Xe=>Xe.total==Xe.selected));var H=qct(),Y=Ye(H);{var se=Xe=>{var ht=Uct();te(Xe,ht)};Le(Y,Xe=>{U==k(u).firstSpecialIndex&&Xe(se)})}var he=pe(Y,2);he.__click=Xe=>b(k(z).x,Xe.shiftKey);var be=ne(he),fe=ne(be);let me;var K=ne(fe,!0);Z(fe),Z(be);var de=pe(be,2),ge=ne(de);{var oe=Xe=>{var ht=zct(),ln=Ye(ht);let er;var ze=pe(ln,2);let Be;Ne((dt,Ht)=>{er=Nt(ln,"",er,dt),Be=Nt(ze,"",Be,Ht)},[()=>({background:k(p).markColorFade,width:`${k(d)(k(z).total)??""}px`}),()=>({background:k(p).markColor,width:`${k(d)(k(z).selected)??""}px`})]),te(Xe,ht)},Fe=Xe=>{var ht=jct(),ln=Ye(ht);let er;var ze=pe(ln,2);let Be;Ne((dt,Ht)=>{er=Nt(ln,"",er,dt),Be=Nt(ze,"",Be,Ht)},[()=>({background:k(p).markColorGrayFade,width:`${k(d)(k(z).total)??""}px`}),()=>({background:k(p).markColorGray,width:`${k(d)(k(z).selected)??""}px`})]),te(Xe,ht)};Le(ge,Xe=>{k(V)?Xe(oe):Xe(Fe,!1)})}Z(de);var Ce=pe(de,2),je=ne(Ce);let Ge;var Ee=ne(je);{var rt=Xe=>{var ht=Ca();Ne(ln=>pt(ht,ln),[()=>k(z).selected.toLocaleString()+" / "+k(z).total.toLocaleString()]),te(Xe,ht)},Vt=Xe=>{var ht=Ca();Ne(ln=>pt(ht,ln),[()=>k(z).total.toLocaleString()]),te(Xe,ht)};Le(Ee,Xe=>{k(W)?Xe(rt):Xe(Vt,!1)})}Z(je),Z(Ce),Z(he),Ne((Xe,ht)=>{ue(he,"title",k(z).x),me=wr(fe,1,"",null,me,{"text-gray-400":!k(V),"dark:text-gray-400":!k(V)}),pt(K,Xe),Ge=wr(je,1,"text-slate-400 dark:text-slate-500",null,Ge,{"!text-gray-200":!k(V),"dark:!text-gray-600":!k(V)}),ue(je,"title",ht)},[()=>w(k(z).x),()=>k(W)?`${k(z).total.toLocaleString()} rows contain "${k(z).x}"; ${k(z).selected.toLocaleString()} (${_(k(z).selected,k(z).total)}) in selection`:`${k(z).total.toLocaleString()} rows contain "${k(z).x}"`]),te(B,H)});var P=pe(N,2),O=ne(P),R=ne(O);{var L=B=>{var z=Vct();z.__click=()=>{let H=!e.spec.expanded;e.onSpecChange({expanded:H}),H==!1&&e.onStateChange({selection:null})};var U=ne(z);{var V=H=>{var Y=Ca();Y.nodeValue="â Show up to 10 values",te(H,Y)},W=H=>{var Y=Ca();Y.nodeValue="â Show up to 100 values",te(H,Y)};Le(U,H=>{e.spec.expanded?H(V):H(W,!1)})}Z(z),te(B,z)};Le(R,B=>{(e.spec.expanded||k(u).hasOther)&&B(L)})}Z(O),Z(P),te(M,I)};Le(D,M=>{k(u)&&M(T)})}Z(C),dc(C,"clientWidth",M=>ae(c,M)),te(S,C)},$$slots:{default:!0}}),at(),i()}ti(["click"]);var Yct=an("<rect></rect>"),Xct=an("<rect></rect>"),Kct=an("<!><!><!>",1),Qct=xe('<div class="flex gap items-center text-sm"><span class="flex-1 text-slate-400 dark:text-slate-500"><!></span> <!></div>'),Jct=xe("<!> <!>",1);function Zct(t,e){ot(e,!0);const n=()=>Ds(o,"$colorScheme",r),[r,i]=aa();let{coordinator:s,colorScheme:o}=e.context,a=J(()=>e.state.brush),l=J(()=>sg[n()]),u=De(null),c=De(null);function f(h,d,p,m){let y=De(null);qd(h,d,p).then(w=>{ae(y,w)});let b=J(()=>k(y)?k2({key:"x",stats:k(y),scaleType:e.spec.xScaleType,binCount:e.spec.binCount}):null);Bt(()=>{k(c)==null&&k(b)?.scales.x?.type!=null&&ae(c,k(b)?.scales.x?.type,!0)});function v(w,_,S){return mh({coordinator:h,selection:_??void 0,query:A=>Ue.from(d).select({...w.select,count:ur()}).where(A).groupby(w.select.x),queryResult:A=>{S(Array.from(A).map(w.collect))}})}Bt(()=>{if(k(b)==null)return;let w=k(b),_=De(mu([])),S=De(mu([])),A=v(w,null,T=>{ae(_,T,!0)}),C=v(w,m,T=>{ae(S,T,!0)});Bt(()=>{k(_).length>0&&ae(u,{xScale:w.scales.x,allItems:k(_),filteredItems:k(S)})});let D={reset:()=>{e.onStateChange({brush:null})}};return Bt(()=>{let T={source:D,clients:new Set([C]),...k(a)!=null?w.clause(k(a)):{value:null,predicate:null}};m.update(T),m.activate(T)}),()=>{A.destroy(),C.destroy(),m.update({source:D,clients:new Set([C]),value:null,predicate:null})}})}Bt(()=>{f(s,e.context.table,e.spec.data.field,e.context.filter)}),tg(t,{get width(){return e.width},get height(){return e.height},class:"flex flex-col gap-2",children:(h,d)=>{var p=Jct(),m=Ye(p);{const v=(_,S=An,A=An)=>{var C=kn(),D=Ye(C);{var T=M=>{const I=J(()=>k(u).allItems.reduce((N,P)=>Math.max(N,P.count),1));{const N=(O,R=An)=>{const L=J(()=>R().xScale),B=J(()=>R().yScale);var z=Kct(),U=Ye(z);hn(U,17,()=>k(u)?.allItems??[],Pn,(H,Y)=>{const se=J(()=>{const[me,K]=k(L).applyBand(k(Y).x);return{x0:me,x1:K}}),he=J(()=>{const[me,K]=k(B).applyBand([0,k(Y).count]);return{y0:me,y1:K}}),be=J(()=>Math.min(Math.abs(k(se).x1-k(se).x0)*.1,1));var fe=Yct();Ne((me,K,de,ge)=>{ue(fe,"x",me),ue(fe,"y",K),ue(fe,"width",de),ue(fe,"height",ge),ue(fe,"fill",k(l).markColorFade)},[()=>Math.min(k(se).x0,k(se).x1)+k(be)/2,()=>Math.min(k(he).y0,k(he).y1),()=>Math.abs(k(se).x0-k(se).x1)-k(be),()=>Math.abs(k(he).y0-k(he).y1)]),te(H,fe)});var V=pe(U);hn(V,17,()=>k(u)?.filteredItems??[],Pn,(H,Y)=>{const se=J(()=>{const[me,K]=k(L).applyBand(k(Y).x);return{x0:me,x1:K}}),he=J(()=>{const[me,K]=k(B).applyBand([0,k(Y).count]);return{y0:me,y1:K}}),be=J(()=>Math.min(Math.abs(k(se).x1-k(se).x0)*.1,1));var fe=Xct();Ne((me,K,de,ge)=>{ue(fe,"x",me),ue(fe,"height",K),ue(fe,"y",de),ue(fe,"width",ge),ue(fe,"fill",k(l).markColor)},[()=>Math.min(k(se).x0,k(se).x1)+k(be)/2,()=>Math.abs(k(he).y0-k(he).y1),()=>Math.min(k(he).y0,k(he).y1),()=>Math.abs(k(se).x0-k(se).x1)-k(be)]),te(H,fe)});var W=pe(V);{let H=J(()=>k(a)??null);sT(W,{get proxy(){return R()},mode:"x",get value(){return k(H)},get colorScheme(){return n()},onChange:Y=>{e.onStateChange({brush:Y!=null&&Y.x!=null?{x:Y.x}:null})}})}te(O,z)};let P=J(()=>({type:"linear",domain:[0,k(I)]}));_v(M,{get width(){return S()},get height(){return A()},get xScale(){return k(u).xScale},get yScale(){return k(P)},get colorScheme(){return n()},children:N,$$slots:{default:!0}})}};Le(D,M=>{k(u)!=null&&M(T)})}te(_,C)};let w=J(()=>e.height!=null);vS(m,{get flexHeight(){return k(w)},children:v,$$slots:{default:!0}})}var y=pe(m,2);{var b=v=>{var w=Qct(),_=ne(w),S=ne(_);{var A=M=>{var I=kn(),N=Ye(I);{var P=R=>{var L=Ca();Ne(()=>pt(L,`[${k(a).x??""}]`)),te(R,L)},O=R=>{const L=J(()=>Lu(".4"));var B=Ca();Ne((z,U)=>pt(B,`[${z??""}, ${U??""}]`),[()=>k(L)(k(a).x[0]),()=>k(L)(k(a).x[1])]),te(R,B)};Le(N,R=>{typeof k(a).x=="string"?R(P):R(O,!1)})}te(M,I)};Le(S,M=>{k(a)&&M(A)})}Z(_);var C=pe(_,2),D=()=>e.spec.xScaleType??k(c)??"linear",T=M=>{e.onSpecChange({xScaleType:M})};s1(C,{label:"X",get value(){return D()},set value(M){T(M)}}),Z(w),te(v,w)};Le(y,v=>{k(u)?.xScale.type!="band"&&v(b)})}te(h,p)},$$slots:{default:!0}}),at(),i()}var eft=an('<image preserveAspectRatio="none"></image>');function tft(t,e){ot(e,!0);let n=J(()=>e.proxy.xScale&&e.xDomain?e.proxy.xScale.apply(e.xDomain[0]):0),r=J(()=>e.proxy.xScale&&e.xDomain?e.proxy.xScale.apply(e.xDomain[1]):e.proxy.plotWidth),i=J(()=>e.proxy.yScale&&e.yDomain?e.proxy.yScale.apply(e.yDomain[0]):0),s=J(()=>e.proxy.yScale&&e.yDomain?e.proxy.yScale.apply(e.yDomain[1]):e.proxy.plotHeight),o=De(null),a=document.createElement("canvas");Bt(()=>{a.width=e.rasterWidth,a.height=e.rasterHeight;let u=a.getContext("2d",{colorSpace:"srgb",willReadFrequently:!0});u.clearRect(0,0,a.width,a.height);let c=u.getImageData(0,0,a.width,a.height),f=0;for(let h=0;h<a.height;h++)for(let d=0;d<a.width;d++){let p=(d+.5)/a.width*(k(r)-k(n))+k(n),m=(h+.5)/a.height*(k(s)-k(i))+k(i),y=e.proxy.xScale?.invert(p)??0,b=e.proxy.yScale?.invert(m)??0,{r:v,g:w,b:_,opacity:S}=Ha(e.color(y,b));c.data[f++]=v,c.data[f++]=w,c.data[f++]=_,c.data[f++]=S*255}u.putImageData(c,0,0),ae(o,a.toDataURL("image/png"),!0)});var l=eft();Ne((u,c,f,h)=>{ue(l,"x",u),ue(l,"y",c),ue(l,"width",f),ue(l,"height",h),ue(l,"href",k(o))},[()=>Math.min(k(n),k(r)),()=>Math.min(k(i),k(s)),()=>Math.abs(k(n)-k(r)),()=>Math.abs(k(i)-k(s))]),te(t,l),at()}var nft=an("<rect></rect>"),rft=an("<rect></rect><!>",1),ift=xe('<div class="text-slate-400 mb-1 select-none"> </div> <!> <div class="text-slate-400 mb-1 select-none text-right"> </div> <div class="flex gap items-center text-sm"><span class="flex-1 text-slate-400 dark:text-slate-500"><!></span> <span class="flex flex-col items-end gap-1"><span class="flex gap-2"><!> <!></span> <span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm">Normalize:</span> <!></span></span></div>',1);function sft(t,e){ot(e,!0);const n=()=>Ds(s,"$colorScheme",r),[r,i]=aa();let{colorScheme:s}=e.context,o=J(()=>e.state.brush),a=De(null),l=J(()=>k(a)?.items.reduce((m,y)=>Math.max(m,y.value),1)??1);const u=.07,c=m=>m>0?u+(1-u)*m:0;let f=J(()=>n()=="dark"?m=>GD(c(m/k(l))):m=>QU(c(m/k(l)))),h=De(null),d=De(null);function p(m,y,b,v,w){let _=De(null);Promise.all([qd(m,y,b),qd(m,y,v)]).then(([C,D])=>{ae(_,C!=null&&D!=null?{x:C,y:D}:null)});let S=J(()=>k(_)?k2({key:"x",stats:k(_).x,scaleType:e.spec.xScaleType,binCount:e.spec.xBinCount},{key:"y",stats:k(_).y,scaleType:e.spec.yScaleType,binCount:e.spec.yBinCount}):null);Bt(()=>{k(h)==null&&k(S)?.scales.x?.type!=null&&ae(h,k(S)?.scales.x?.type),k(d)==null&&k(S)?.scales.y?.type!=null&&ae(d,k(S)?.scales.y?.type)});function A(C,D,T){return mh({coordinator:m,selection:D??void 0,query:M=>Ue.from(Ue.from(y).select({...C.select,count:ur()}).where(M).groupby(C.select.x,C.select.y)).select({x:"x",y:"y",count:"count",normalizeByX:mt`count / (SUM(count) OVER (PARTITION BY x))`,normalizeByY:mt`count / (SUM(count) OVER (PARTITION BY y))`}),queryResult:M=>{T(Array.from(M).map(C.collect))}})}Bt(()=>{if(k(S)==null)return;let C=k(S),D=De(null),T=A(C,w,I=>{ae(D,I)}),M={reset:()=>{e.onStateChange({brush:null})}};return Bt(()=>{k(D)!=null&&ae(a,{xScale:C.scales.x,yScale:C.scales.y,items:k(D).map(I=>({x:I.x,y:I.y,value:e.spec.normalization=="x"?I.normalizeByX:e.spec.normalization=="y"?I.normalizeByY:I.count}))})}),Bt(()=>{let I={source:M,clients:new Set([T]),...k(o)!=null?C.clause(k(o)):{value:null,predicate:null}};w.update(I),w.activate(I)}),()=>{T.destroy(),w.update({source:M,clients:new Set([T]),value:null,predicate:null})}})}Bt(()=>{p(e.context.coordinator,e.context.table,e.spec.data.x,e.spec.data.y,e.context.filter)}),tg(t,{get width(){return e.width},get height(){return e.height},class:"flex flex-col",children:(m,y)=>{var b=ift(),v=Ye(b),w=ne(v);Z(v);var _=pe(v,2);{const V=(Y,se=An,he=An)=>{var be=kn(),fe=Ye(be);{var me=K=>{_v(K,{get width(){return se()},get height(){return he()},get xScale(){return k(a).xScale},get yScale(){return k(a).yScale},get colorScheme(){return n()},childrenBelow:(oe,Fe=An)=>{const Ce=J(()=>Fe().xScale),je=J(()=>Fe().yScale);var Ge=rft(),Ee=Ye(Ge);ue(Ee,"x",0),ue(Ee,"y",0);var rt=pe(Ee);hn(rt,17,()=>k(a)?.items??[],Pn,(Vt,Xe)=>{const ht=J(()=>{const[Be,dt]=k(Ce).applyBand(k(Xe).x);return{x0:Be,x1:dt}}),ln=J(()=>{const[Be,dt]=k(je).applyBand(k(Xe).y);return{y0:Be,y1:dt}}),er=J(()=>0);var ze=nft();Ne((Be,dt,Ht,dn,dr)=>{ue(ze,"x",Be),ue(ze,"y",dt),ue(ze,"width",Ht),ue(ze,"height",dn),ue(ze,"fill",dr)},[()=>Math.min(k(ht).x0,k(ht).x1)+k(er)/2,()=>Math.min(k(ln).y0,k(ln).y1)+k(er)/2,()=>Math.abs(k(ht).x0-k(ht).x1)-k(er),()=>Math.abs(k(ln).y0-k(ln).y1)-k(er),()=>k(f)(k(Xe).value)]),te(Vt,ze)}),Ne(Vt=>{ue(Ee,"width",Fe().plotWidth),ue(Ee,"height",Fe().plotHeight),ue(Ee,"fill",Vt)},[()=>k(f)(0)]),te(oe,Ge)},children:(oe,Fe=An)=>{sT(oe,{get proxy(){return Fe()},mode:"xy",get value(){return k(o)},get colorScheme(){return n()},onChange:Ce=>{e.onStateChange({brush:Ce!=null&&Ce.x!=null&&Ce.y!=null?{x:Ce.x,y:Ce.y}:null})}})},$$slots:{childrenBelow:!0,default:!0}})};Le(fe,K=>{k(a)!=null&&K(me)})}te(Y,be)};let W=J(()=>e.height!=null),H=J(()=>Math.min(300,e.width??300));vS(_,{get flexHeight(){return k(W)},get defaultHeight(){return k(H)},children:V,$$slots:{default:!0}})}var S=pe(_,2),A=ne(S);Z(S);var C=pe(S,2),D=ne(C),T=ne(D);{const V=(H,Y=An)=>{{let se=J(()=>Y().xScale?.domain);tft(H,{get color(){return k(f)},rasterWidth:100,rasterHeight:1,get proxy(){return Y()},get xDomain(){return k(se)}})}};let W=J(()=>({type:"linear",domain:[0,k(l)]}));_v(T,{get xScale(){return k(W)},xAxis:{extendScaleToTicks:!1},width:230,height:24,extents:{left:30,right:30,top:0,bottom:0},get colorScheme(){return n()},children:V,$$slots:{default:!0}})}Z(D);var M=pe(D,2),I=ne(M),N=ne(I),P=()=>e.spec.xScaleType??k(h)??"linear",O=V=>{e.onSpecChange({xScaleType:V})};s1(N,{label:"X",get value(){return P()},set value(V){O(V)}});var R=pe(N,2),L=()=>e.spec.yScaleType??k(d)??"linear",B=V=>{e.onSpecChange({yScaleType:V})};s1(R,{label:"Y",get value(){return L()},set value(V){B(V)}}),Z(I);var z=pe(I,2),U=pe(ne(z),2);{let V=J(()=>e.spec.normalization??null);oT(U,{options:[{value:null,label:"off"},{value:"x",label:"X"},{value:"y",label:"Y"}],get value(){return k(V)},onChange:W=>e.onSpecChange({normalization:W})})}Z(z),Z(M),Z(C),Ne(()=>{pt(w,`â ${e.spec.data.y??""}`),pt(A,`${e.spec.data.x??""} â`)}),te(m,b)},$$slots:{default:!0}}),at(),i()}var oft=an("<rect></rect>"),aft=an("<rect></rect>"),lft=an("<!><!><!>",1),uft=xe('<div class="flex gap-1 items-center"><div class="w-3 h-3 block rounded-sm"></div> <div class="whitespace-nowrap max-w-32 overflow-hidden text-ellipsis"> </div></div>'),cft=xe('<div class="flex gap-2 flex-wrap items-center select-none"></div>'),fft=xe('<!> <div class="flex-none flex gap-2 items-start text-sm"><div class="flex-1 text-slate-400 dark:text-slate-500"><!></div> <span class="flex flex-col items-end gap-1"><!> <span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm">Normalize:</span> <!></span></span></div>',1);function hft(t,e){ot(e,!0);const n=()=>Ds(s,"$colorScheme",r),[r,i]=aa();let{colorScheme:s}=e.context,o=J(()=>e.state.brush),a=J(()=>sg[n()]),l=De(null),u=De(null);function c(d,p,m,y,b){let v=De(null);Promise.all([qd(d,p,m),qd(d,p,y)]).then(([S,A])=>{ae(v,S!=null&&A!=null?{x:S,group:A}:null)});let w=J(()=>k(v)?k2({key:"x",stats:k(v).x,scaleType:e.spec.xScaleType,binCount:e.spec.xBinCount},{key:"group",stats:k(v).group,binCount:e.spec.groupBinCount}):null);Bt(()=>{k(u)==null&&k(w)?.scales.x?.type!=null&&ae(u,k(w)?.scales.x?.type,!0)});function _(S,A,C){return mh({coordinator:d,selection:A??void 0,query:D=>Ue.from(Ue.from(p).select({...S.select,count:ur()}).where(D).groupby(S.select.x,S.select.group)).select({x:"x",group:"group",count:"count",normalizeByX:mt`count / (SUM(count) OVER (PARTITION BY x))`}),queryResult:D=>{C(Array.from(D).map(S.collect))}})}Bt(()=>{if(k(w)==null)return;let S=k(w),A=De(null),C=De(null),D=_(S,null,I=>{ae(A,I)}),T=_(S,b,I=>{ae(C,I)}),M={reset:()=>{e.onStateChange({brush:null})}};return Bt(()=>{if(k(A)!=null&&k(C)!=null){let I=z=>JSON.stringify(z),N=e.spec.normalization=="x"?"normalizeByX":"count",P=Array.from(f(k(A),z=>I(z.group),z=>z[0].group).entries()).sort((z,U)=>S.order.group(z[1],U[1])),O=f(k(A),z=>I(z.x),z=>({x:z[0].x,total:z.reduce((U,V)=>U+V[N],0)})),R=f(k(C),z=>I(z.x),z=>{z=z.sort((W,H)=>S.order.group(W.group,H.group));let U=[],V=0;for(let W of z)U.push({group:W.group,y1:V,y2:V+W[N]}),V+=W[N];return{x:z[0].x,groups:U}}),L=O.values().reduce((z,U)=>Math.max(z,U.total),1);e.spec.normalization&&(L=1);let B=Qut(Array.from(P.map(z=>z[1])),{fade:["n/a","(null)"],ordinal:S.scales.group.type!="band"});ae(l,{xScale:S.scales.x,yScale:{type:"linear",domain:[0,L]},colorScale:B,totals:Array.from(O.values()),items:Array.from(R.values())})}}),Bt(()=>{let I={source:M,clients:new Set([T]),...k(o)!=null?S.clause(k(o)):{value:null,predicate:null}};b.update(I),b.activate(I)}),()=>{D.destroy(),T.destroy(),b.update({source:M,clients:new Set([T]),value:null,predicate:null})}})}Bt(()=>{c(e.context.coordinator,e.context.table,e.spec.data.x,e.spec.data.group,e.context.filter)});function f(d,p,m){let y=new Map;for(let b of d){let v=p(b),w=y.get(v);w||(w=[],y.set(v,w)),w.push(b)}return new Map(y.entries().map(([b,v])=>[b,m(v)]))}function h(d){if(typeof d=="string")return d;{let p=Lu(".6");if(d.length==2)return`[${p(d[0])}, ${p(d[1])})`}return"(invalid)"}tg(t,{get width(){return e.width},get height(){return e.height},class:"flex flex-col gap-2",children:(d,p)=>{var m=fft(),y=Ye(m);{const I=(P,O=An,R=An)=>{var L=kn(),B=Ye(L);{var z=U=>{_v(U,{get width(){return O()},get height(){return R()},get xScale(){return k(l).xScale},get yScale(){return k(l).yScale},get colorScheme(){return n()},children:(W,H=An)=>{const Y=J(()=>H().xScale),se=J(()=>H().yScale);var he=lft(),be=Ye(he);hn(be,17,()=>k(l)?.totals??[],Pn,(K,de)=>{const ge=J(()=>{const[je,Ge]=k(Y).applyBand(k(de).x);return{x0:je,x1:Ge}}),oe=J(()=>{const[je,Ge]=k(se).applyBand([0,k(de).total]);return{y0:je,y1:Ge}}),Fe=J(()=>Math.min(Math.abs(k(ge).x1-k(ge).x0)*.2,Math.abs(k(oe).y1-k(oe).y0)*.2,1));var Ce=oft();Ne((je,Ge,Ee,rt)=>{ue(Ce,"x",je),ue(Ce,"y",Ge),ue(Ce,"width",Ee),ue(Ce,"height",rt),ue(Ce,"fill",k(a).markColorFade)},[()=>Math.min(k(ge).x0,k(ge).x1)+k(Fe)/2,()=>Math.min(k(oe).y0,k(oe).y1),()=>Math.abs(k(ge).x0-k(ge).x1)-k(Fe),()=>Math.abs(k(oe).y0-k(oe).y1)]),te(K,Ce)});var fe=pe(be);hn(fe,17,()=>k(l)?.items??[],Pn,(K,de)=>{let ge=()=>k(de).x,oe=()=>k(de).groups;const Fe=J(()=>{const[Ge,Ee]=k(Y).applyBand(ge());return{x0:Ge,x1:Ee}});var Ce=kn(),je=Ye(Ce);hn(je,17,oe,Pn,(Ge,Ee)=>{const rt=J(()=>{const[ht,ln]=k(se).applyBand([k(Ee).y1,k(Ee).y2]);return{y0:ht,y1:ln}}),Vt=J(()=>Math.min(Math.abs(k(Fe).x1-k(Fe).x0)*.2,Math.abs(k(rt).y1-k(rt).y0)*.2,1));var Xe=aft();Ne((ht,ln,er,ze,Be)=>{ue(Xe,"x",ht),ue(Xe,"y",ln),ue(Xe,"width",er),ue(Xe,"height",ze),ue(Xe,"fill",Be)},[()=>Math.min(k(Fe).x0,k(Fe).x1)+k(Vt)/2,()=>Math.min(k(rt).y0,k(rt).y1),()=>Math.abs(k(Fe).x0-k(Fe).x1)-k(Vt),()=>Math.abs(k(rt).y0-k(rt).y1),()=>k(l)?.colorScale.apply(k(Ee).group)]),te(Ge,Xe)}),te(K,Ce)});var me=pe(fe);sT(me,{get proxy(){return H()},mode:"x",get value(){return k(o)},get colorScheme(){return n()},onChange:K=>{e.onStateChange({brush:K!=null&&K.x!=null?{x:K.x}:null})}}),te(W,he)},$$slots:{default:!0}})};Le(B,U=>{k(l)!=null&&U(z)})}te(P,L)};let N=J(()=>e.height!=null);vS(y,{get flexHeight(){return k(N)},children:I,$$slots:{default:!0}})}var b=pe(y,2),v=ne(b),w=ne(v);{var _=I=>{var N=cft();hn(N,21,()=>k(l).colorScale.domain,Pn,(P,O)=>{var R=uft(),L=ne(R);let B;var z=pe(L,2),U=ne(z,!0);Z(z),Z(R),Ne((V,W,H)=>{ue(R,"title",V),B=Nt(L,"",B,W),pt(U,H)},[()=>JSON.stringify(k(O)),()=>({background:k(l).colorScale.apply(k(O))}),()=>h(k(O))]),te(P,R)}),Z(N),te(I,N)};Le(w,I=>{k(l)&&I(_)})}Z(v);var S=pe(v,2),A=ne(S),C=()=>e.spec.xScaleType??k(u)??"linear",D=I=>{e.onSpecChange({xScaleType:I})};s1(A,{label:"X",get value(){return C()},set value(I){D(I)}});var T=pe(A,2),M=pe(ne(T),2);oT(M,{options:[{value:null,label:"off"},{value:"x",label:"X"}],get value(){return e.spec.normalization},onChange:I=>e.onSpecChange({normalization:I})}),Z(T),Z(S),Z(b),te(d,m)},$$slots:{default:!0}}),at(),i()}var dft=an('<circle r="3"></circle>'),pft=an('<path fill="none" stroke-width="2"></path><!>',1),gft=xe('<div class="flex gap items-center text-sm"><span class="flex-1"></span> <!></div>'),mft=xe("<!> <!>",1);function yft(t,e){ot(e,!0);const n=()=>Ds(o,"$colorScheme",r),[r,i]=aa();let{coordinator:s,colorScheme:o}=e.context,a=J(()=>sg[n()]),l=De(null),u=De(null);function c(f,h,d){let p=De(null);qd(f,h,d).then(b=>{ae(p,b)});let m=J(()=>k(p)?k2({key:"x",stats:k(p),scaleType:e.spec.xScaleType,binCount:52}):null);Bt(()=>{k(u)==null&&k(m)?.scales.x?.type!=null&&ae(u,k(m)?.scales.x?.type,!0)});function y(b,v){return mh({coordinator:f,selection:e.context.filter,query:w=>Ue.from(h).select({...b.select,count:ur()}).where(w).groupby(b.select.x).orderby(b.select.x),queryResult:w=>{v(Array.from(w).map(b.collect))}})}Bt(()=>{if(k(m)==null)return;let b=k(m),v=De(mu([])),w=y(b,_=>{ae(v,_,!0)});return Bt(()=>{k(v).length>0&&ae(l,{xScale:b.scales.x,points:k(v)})}),()=>{w.destroy()}})}Bt(()=>{c(s,e.context.table,e.spec.data.x)}),tg(t,{get width(){return e.width},get height(){return e.height},class:"flex flex-col gap-2",children:(f,h)=>{var d=mft(),p=Ye(d);{const b=(w,_=An,S=An)=>{var A=kn(),C=Ye(A);{var D=T=>{const M=J(()=>k(l).points.reduce((I,N)=>Math.max(I,N.count),1));{const I=(P,O=An)=>{const R=J(()=>O().xScale),L=J(()=>O().yScale);var B=kn(),z=Ye(B);{var U=V=>{const W=J(()=>k(l).points.map((he,be)=>{const fe=k(R).apply(he.x),me=k(L).apply(he.count);return`${be===0?"M":"L"} ${fe} ${me}`}).join(" "));var H=pft(),Y=Ye(H),se=pe(Y);hn(se,17,()=>k(l).points,Pn,(he,be)=>{const fe=J(()=>k(R).apply(k(be).x)),me=J(()=>k(L).apply(k(be).count));var K=dft();Ne(()=>{ue(K,"cx",k(fe)),ue(K,"cy",k(me)),ue(K,"fill",k(a).markColor)}),te(he,K)}),Ne(()=>{ue(Y,"d",k(W)),ue(Y,"stroke",k(a).markColor)}),te(V,H)};Le(z,V=>{k(l).points.length>1&&V(U)})}te(P,B)};let N=J(()=>({type:"linear",domain:[0,k(M)]}));_v(T,{get width(){return _()},get height(){return S()},get xScale(){return k(l).xScale},get yScale(){return k(N)},get colorScheme(){return n()},children:I,$$slots:{default:!0}})}};Le(C,T=>{k(l)!=null&&T(D)})}te(w,A)};let v=J(()=>e.height!=null);vS(p,{get flexHeight(){return k(v)},children:b,$$slots:{default:!0}})}var m=pe(p,2);{var y=b=>{var v=gft(),w=pe(ne(v),2);{let _=J(()=>e.spec.xScaleType??k(u)??"linear");s1(w,{label:"X",get value(){return k(_)},onChange:S=>{e.onSpecChange({xScaleType:S})}})}Z(v),te(b,v)};Le(m,b=>{k(l)?.xScale.type!="band"&&b(y)})}te(f,d)},$$slots:{default:!0}}),at(),i()}const NS=Symbol("Fixed"),_c=Symbol("Transient"),Gge=Symbol("Transform");function bft(t){return t}var vft=3,GJ=1e-6;function xft(t){return"translate("+t+",0)"}function wft(t){return e=>+t(e)}function _ft(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Sft(){return!this.__axis}function Aft(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=1,c="y",f=xft;function h(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):bft),y=Math.max(s,0)+a,b=e.range(),v=+b[0]+l,w=+b[b.length-1]+l,_=(e.bandwidth?_ft:wft)(e.copy(),l),S=d.selection?d.selection():d,A=S.selectAll(".domain").data([null]),C=S.selectAll(".tick").data(p,e).order(),D=C.exit(),T=C.enter().append("g").attr("class","tick"),M=C.select("line"),I=C.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(T),M=M.merge(T.append("line").attr("stroke","currentColor").attr(c+"2",u*s)),I=I.merge(T.append("text").attr("fill","currentColor").attr(c,u*y).attr("dy","0.71em")),d!==S&&(A=A.transition(d),C=C.transition(d),M=M.transition(d),I=I.transition(d),D=D.transition(d).attr("opacity",GJ).attr("transform",function(N){return isFinite(N=_(N))?f(N+l):this.getAttribute("transform")}),T.attr("opacity",GJ).attr("transform",function(N){var P=this.parentNode.__axis;return f((P&&isFinite(P=P(N))?P:_(N))+l)})),D.remove(),A.attr("d",o?"M"+v+","+u*o+"V"+l+"H"+w+"V"+u*o:"M"+v+","+l+"H"+w),C.attr("opacity",1).attr("transform",function(N){return f(_(N)+l)}),M.attr(c+"2",u*s),I.attr(c,u*y).text(m),S.filter(Sft).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),S.each(function(){this.__axis=_})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function Cft(t){return Aft(vft,t)}var kft={value:()=>{}};function aT(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new PC(n)}function PC(t){this._=t}function Eft(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}PC.prototype=aT.prototype={constructor:PC,on:function(t,e){var n=this._,r=Eft(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Dft(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=YJ(n[i],t.name,e);else if(e==null)for(i in n)n[i]=YJ(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new PC(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Dft(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function YJ(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=kft,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var $N="http://www.w3.org/1999/xhtml";const Vd={svg:"http://www.w3.org/2000/svg",xhtml:$N,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lT(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Vd.hasOwnProperty(e)?{space:Vd[e],local:t}:t}function Tft(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$N&&e.documentElement.namespaceURI===$N?e.createElement(t):e.createElementNS(n,t)}}function Oft(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uT(t){var e=lT(t);return(e.local?Oft:Tft)(e)}function Mft(){}function vz(t){return t==null?Mft:function(){return this.querySelector(t)}}function Ift(t){typeof t!="function"&&(t=vz(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Bl(r,this._parents)}function Rft(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Fft(){return[]}function Yge(t){return t==null?Fft:function(){return this.querySelectorAll(t)}}function Nft(t){return function(){return Rft(t.apply(this,arguments))}}function Lft(t){typeof t=="function"?t=Nft(t):t=Yge(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new Bl(r,i)}function Xge(t){return function(){return this.matches(t)}}function Kge(t){return function(e){return e.matches(t)}}var Pft=Array.prototype.find;function Bft(t){return function(){return Pft.call(this.children,t)}}function $ft(){return this.firstElementChild}function Uft(t){return this.select(t==null?$ft:Bft(typeof t=="function"?t:Kge(t)))}var zft=Array.prototype.filter;function jft(){return Array.from(this.children)}function qft(t){return function(){return zft.call(this.children,t)}}function Vft(t){return this.selectAll(t==null?jft:qft(typeof t=="function"?t:Kge(t)))}function Wft(t){typeof t!="function"&&(t=Xge(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new Bl(r,this._parents)}function Qge(t){return new Array(t.length)}function Hft(){return new Bl(this._enter||this._groups.map(Qge),this._parents)}function t5(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}t5.prototype={constructor:t5,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Gft(t){return function(){return t}}function Yft(t,e,n,r,i,s){for(var o=0,a,l=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new t5(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function Xft(t,e,n,r,i,s,o){var a,l,u=new Map,c=e.length,f=s.length,h=new Array(c),d;for(a=0;a<c;++a)(l=e[a])&&(h[a]=d=o.call(l,l.__data__,a,e)+"",u.has(d)?i[a]=l:u.set(d,l));for(a=0;a<f;++a)d=o.call(t,s[a],a,s)+"",(l=u.get(d))?(r[a]=l,l.__data__=s[a],u.delete(d)):n[a]=new t5(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(h[a])===l&&(i[a]=l)}function Kft(t){return t.__data__}function Qft(t,e){if(!arguments.length)return Array.from(this,Kft);var n=e?Xft:Yft,r=this._parents,i=this._groups;typeof t!="function"&&(t=Gft(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=i[u],h=f.length,d=Jft(t.call(c,c&&c.__data__,u,r)),p=d.length,m=a[u]=new Array(p),y=o[u]=new Array(p),b=l[u]=new Array(h);n(c,f,m,y,b,d,e);for(var v=0,w=0,_,S;v<p;++v)if(_=m[v]){for(v>=w&&(w=v+1);!(S=y[w])&&++w<p;);_._next=S||null}}return o=new Bl(o,r),o._enter=a,o._exit=l,o}function Jft(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zft(){return new Bl(this._exit||this._groups.map(Qge),this._parents)}function eht(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function tht(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],f=u.length,h=a[l]=new Array(f),d,p=0;p<f;++p)(d=u[p]||c[p])&&(h[p]=d);for(;l<i;++l)a[l]=n[l];return new Bl(a,this._parents)}function nht(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function rht(t){t||(t=iht);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new Bl(i,this._parents).order()}function iht(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sht(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oht(){return Array.from(this)}function aht(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function lht(){let t=0;for(const e of this)++t;return t}function uht(){return!this.node()}function cht(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function fht(t){return function(){this.removeAttribute(t)}}function hht(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dht(t,e){return function(){this.setAttribute(t,e)}}function pht(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ght(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function mht(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yht(t,e){var n=lT(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?hht:fht:typeof e=="function"?n.local?mht:ght:n.local?pht:dht)(n,e))}function Jge(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bht(t){return function(){this.style.removeProperty(t)}}function vht(t,e,n){return function(){this.style.setProperty(t,e,n)}}function xht(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wht(t,e,n){return arguments.length>1?this.each((e==null?bht:typeof e=="function"?xht:vht)(t,e,n??"")):Sv(this.node(),t)}function Sv(t,e){return t.style.getPropertyValue(e)||Jge(t).getComputedStyle(t,null).getPropertyValue(e)}function _ht(t){return function(){delete this[t]}}function Sht(t,e){return function(){this[t]=e}}function Aht(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Cht(t,e){return arguments.length>1?this.each((e==null?_ht:typeof e=="function"?Aht:Sht)(t,e)):this.node()[t]}function Zge(t){return t.trim().split(/^|\s+/)}function xz(t){return t.classList||new eme(t)}function eme(t){this._node=t,this._names=Zge(t.getAttribute("class")||"")}eme.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function tme(t,e){for(var n=xz(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function nme(t,e){for(var n=xz(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function kht(t){return function(){tme(this,t)}}function Eht(t){return function(){nme(this,t)}}function Dht(t,e){return function(){(e.apply(this,arguments)?tme:nme)(this,t)}}function Tht(t,e){var n=Zge(t+"");if(arguments.length<2){for(var r=xz(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Dht:e?kht:Eht)(n,e))}function Oht(){this.textContent=""}function Mht(t){return function(){this.textContent=t}}function Iht(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Rht(t){return arguments.length?this.each(t==null?Oht:(typeof t=="function"?Iht:Mht)(t)):this.node().textContent}function Fht(){this.innerHTML=""}function Nht(t){return function(){this.innerHTML=t}}function Lht(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Pht(t){return arguments.length?this.each(t==null?Fht:(typeof t=="function"?Lht:Nht)(t)):this.node().innerHTML}function Bht(){this.nextSibling&&this.parentNode.appendChild(this)}function $ht(){return this.each(Bht)}function Uht(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zht(){return this.each(Uht)}function jht(t){var e=typeof t=="function"?t:uT(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qht(){return null}function Vht(t,e){var n=typeof t=="function"?t:uT(t),r=e==null?qht:typeof e=="function"?e:vz(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Wht(){var t=this.parentNode;t&&t.removeChild(this)}function Hht(){return this.each(Wht)}function Ght(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yht(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xht(t){return this.select(t?Yht:Ght)}function Kht(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Qht(t){return function(e){t.call(this,e,this.__data__)}}function Jht(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Zht(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function edt(t,e,n){return function(){var r=this.__on,i,s=Qht(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function tdt(t,e,n){var r=Jht(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?edt:Zht,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function rme(t,e,n){var r=Jge(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ndt(t,e){return function(){return rme(this,t,e)}}function rdt(t,e){return function(){return rme(this,t,e.apply(this,arguments))}}function idt(t,e){return this.each((typeof e=="function"?rdt:ndt)(t,e))}function*sdt(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var ime=[null];function Bl(t,e){this._groups=t,this._parents=e}function LS(){return new Bl([[document.documentElement]],ime)}function odt(){return this}Bl.prototype=LS.prototype={constructor:Bl,select:Ift,selectAll:Lft,selectChild:Uft,selectChildren:Vft,filter:Wft,data:Qft,enter:Hft,exit:Zft,join:eht,merge:tht,selection:odt,order:nht,sort:rht,call:sht,nodes:oht,node:aht,size:lht,empty:uht,each:cht,attr:yht,style:wht,property:Cht,classed:Tht,text:Rht,html:Pht,raise:$ht,lower:zht,append:jht,insert:Vht,remove:Hht,clone:Xht,datum:Kht,on:tdt,dispatch:idt,[Symbol.iterator]:sdt};function Kr(t){return typeof t=="string"?new Bl([[document.querySelector(t)]],[document.documentElement]):new Bl([[t]],ime)}function adt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Zu(t,e){if(t=adt(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const UN={capture:!0,passive:!1};function zN(t){t.preventDefault(),t.stopImmediatePropagation()}function sme(t){var e=t.document.documentElement,n=Kr(t).on("dragstart.drag",zN,UN);"onselectstart"in e?n.on("selectstart.drag",zN,UN):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ome(t,e){var n=t.document.documentElement,r=Kr(t).on("dragstart.drag",null);e&&(r.on("click.drag",zN,UN),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Av=0,fw=0,Ix=0,ame=1e3,n5,hw,r5=0,o1=0,cT=0,d3=typeof performance=="object"&&performance.now?performance:Date,lme=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wz(){return o1||(lme(ldt),o1=d3.now()+cT)}function ldt(){o1=0}function i5(){this._call=this._time=this._next=null}i5.prototype=ume.prototype={constructor:i5,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?wz():+n)+(e==null?0:+e),!this._next&&hw!==this&&(hw?hw._next=this:n5=this,hw=this),this._call=t,this._time=n,jN()},stop:function(){this._call&&(this._call=null,this._time=1/0,jN())}};function ume(t,e,n){var r=new i5;return r.restart(t,e,n),r}function udt(){wz(),++Av;for(var t=n5,e;t;)(e=o1-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Av}function XJ(){o1=(r5=d3.now())+cT,Av=fw=0;try{udt()}finally{Av=0,fdt(),o1=0}}function cdt(){var t=d3.now(),e=t-r5;e>ame&&(cT-=e,r5=t)}function fdt(){for(var t,e=n5,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:n5=n);hw=t,jN(r)}function jN(t){if(!Av){fw&&(fw=clearTimeout(fw));var e=t-o1;e>24?(t<1/0&&(fw=setTimeout(XJ,t-d3.now()-cT)),Ix&&(Ix=clearInterval(Ix))):(Ix||(r5=d3.now(),Ix=setInterval(cdt,ame)),Av=1,lme(XJ))}}function KJ(t,e,n){var r=new i5;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var hdt=aT("start","end","cancel","interrupt"),ddt=[],cme=0,QJ=1,qN=2,BC=3,JJ=4,VN=5,$C=6;function fT(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;pdt(t,n,{name:e,index:r,group:i,on:hdt,tween:ddt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:cme})}function _z(t,e){var n=Bc(t,e);if(n.state>cme)throw new Error("too late; already scheduled");return n}function _h(t,e){var n=Bc(t,e);if(n.state>BC)throw new Error("too late; already running");return n}function Bc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pdt(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ume(s,0,n.time);function s(u){n.state=QJ,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,h,d;if(n.state!==QJ)return l();for(c in r)if(d=r[c],d.name===n.name){if(d.state===BC)return KJ(o);d.state===JJ?(d.state=$C,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=$C,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(KJ(function(){n.state===BC&&(n.state=JJ,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=qN,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qN){for(n.state=BC,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=VN,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===VN&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=$C,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Ob(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>qN&&r.state<VN,r.state=$C,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function gdt(t){return this.each(function(){Ob(this,t)})}function mdt(t,e){var n,r;return function(){var i=_h(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ydt(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=_h(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function bdt(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Bc(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?mdt:ydt)(n,t,e))}function Sz(t,e,n){var r=t._id;return t.each(function(){var i=_h(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Bc(i,r).value[e]}}function fme(t,e){var n;return(typeof e=="number"?ro:e instanceof $0?e1:(n=$0(e))?(e=n,e1):zde)(t,e)}function vdt(t){return function(){this.removeAttribute(t)}}function xdt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wdt(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function _dt(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function Sdt(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function Adt(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function Cdt(t,e){var n=lT(t),r=n==="transform"?Mit:fme;return this.attrTween(t,typeof e=="function"?(n.local?Adt:Sdt)(n,r,Sz(this,"attr."+t,e)):e==null?(n.local?xdt:vdt)(n):(n.local?_dt:wdt)(n,r,e))}function kdt(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Edt(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ddt(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Edt(t,s)),n}return i._value=e,i}function Tdt(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&kdt(t,s)),n}return i._value=e,i}function Odt(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=lT(t);return this.tween(n,(r.local?Ddt:Tdt)(r,e))}function Mdt(t,e){return function(){_z(this,t).delay=+e.apply(this,arguments)}}function Idt(t,e){return e=+e,function(){_z(this,t).delay=e}}function Rdt(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Mdt:Idt)(e,t)):Bc(this.node(),e).delay}function Fdt(t,e){return function(){_h(this,t).duration=+e.apply(this,arguments)}}function Ndt(t,e){return e=+e,function(){_h(this,t).duration=e}}function Ldt(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fdt:Ndt)(e,t)):Bc(this.node(),e).duration}function Pdt(t,e){if(typeof e!="function")throw new Error;return function(){_h(this,t).ease=e}}function Bdt(t){var e=this._id;return arguments.length?this.each(Pdt(e,t)):Bc(this.node(),e).ease}function $dt(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;_h(this,t).ease=n}}function Udt(t){if(typeof t!="function")throw new Error;return this.each($dt(this._id,t))}function zdt(t){typeof t!="function"&&(t=Xge(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new Wd(r,this._parents,this._name,this._id)}function jdt(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),h,d=0;d<c;++d)(h=l[d]||u[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Wd(o,this._parents,this._name,this._id)}function qdt(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Vdt(t,e,n){var r,i,s=qdt(e)?_z:_h;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function Wdt(t,e){var n=this._id;return arguments.length<2?Bc(this.node(),n).on.on(t):this.each(Vdt(n,t,e))}function Hdt(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Gdt(){return this.on("end.remove",Hdt(this._id))}function Ydt(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vz(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,f,h=0;h<l;++h)(c=a[h])&&(f=t.call(c,c.__data__,h,a))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,fT(u[h],e,n,h,u,Bc(c,n)));return new Wd(s,this._parents,e,n)}function Xdt(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Yge(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=t.call(c,c.__data__,f,l),d,p=Bc(c,n),m=0,y=h.length;m<y;++m)(d=h[m])&&fT(d,e,n,m,h,p);s.push(h),o.push(c)}return new Wd(s,o,e,n)}var Kdt=LS.prototype.constructor;function Qdt(){return new Kdt(this._groups,this._parents)}function Jdt(t,e){var n,r,i;return function(){var s=Sv(this,t),o=(this.style.removeProperty(t),Sv(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function hme(t){return function(){this.style.removeProperty(t)}}function Zdt(t,e,n){var r,i=n+"",s;return function(){var o=Sv(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function ept(t,e,n){var r,i,s;return function(){var o=Sv(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Sv(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function tpt(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=_h(this,t),u=l.on,c=l.value[s]==null?a||(a=hme(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function npt(t,e,n){var r=(t+="")=="transform"?Oit:fme;return e==null?this.styleTween(t,Jdt(t,r)).on("end.style."+t,hme(t)):typeof e=="function"?this.styleTween(t,ept(t,r,Sz(this,"style."+t,e))).each(tpt(this._id,t)):this.styleTween(t,Zdt(t,r,e),n).on("end.style."+t,null)}function rpt(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ipt(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&rpt(t,o,n)),r}return s._value=e,s}function spt(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ipt(t,e,n??""))}function opt(t){return function(){this.textContent=t}}function apt(t){return function(){var e=t(this);this.textContent=e??""}}function lpt(t){return this.tween("text",typeof t=="function"?apt(Sz(this,"text",t)):opt(t==null?"":t+""))}function upt(t){return function(e){this.textContent=t.call(this,e)}}function cpt(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&upt(i)),e}return r._value=t,r}function fpt(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,cpt(t))}function hpt(){for(var t=this._name,e=this._id,n=dme(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=Bc(l,e);fT(l,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Wd(r,this._parents,t,n)}function dpt(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=_h(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&s()})}var ppt=0;function Wd(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function dme(){return++ppt}var Uh=LS.prototype;Wd.prototype={constructor:Wd,select:Ydt,selectAll:Xdt,selectChild:Uh.selectChild,selectChildren:Uh.selectChildren,filter:zdt,merge:jdt,selection:Qdt,transition:hpt,call:Uh.call,nodes:Uh.nodes,node:Uh.node,size:Uh.size,empty:Uh.empty,each:Uh.each,on:Wdt,attr:Cdt,attrTween:Odt,style:npt,styleTween:spt,text:lpt,textTween:fpt,remove:Gdt,tween:bdt,delay:Rdt,duration:Ldt,ease:Bdt,easeVarying:Udt,end:dpt,[Symbol.iterator]:Uh[Symbol.iterator]};function gpt(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var mpt={time:null,delay:0,duration:250,ease:gpt};function ypt(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function bpt(t){var e,n;t instanceof Wd?(e=t._id,t=t._name):(e=dme(),(n=mpt).time=wz(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&fT(l,t,e,u,o,n||ypt(l,e));return new Wd(r,this._parents,t,e)}LS.prototype.interrupt=gdt;LS.prototype.transition=bpt;const IM=t=>()=>t;function vpt(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function xpt(t){t.stopImmediatePropagation()}function RM(t){t.preventDefault(),t.stopImmediatePropagation()}var ZJ={name:"drag"},FM={name:"space"},uy={name:"handle"},cy={name:"center"};const{abs:eZ,max:Ks,min:Qs}=Math;function tZ(t){return[+t[0],+t[1]]}function WN(t){return[tZ(t[0]),tZ(t[1])]}var UC={name:"x",handles:["w","e"].map(p3),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},zC={name:"y",handles:["n","s"].map(p3),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},wpt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(p3),input:function(t){return t==null?null:WN(t)},output:function(t){return t}},zh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nZ={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},rZ={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_pt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Spt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function p3(t){return{type:t}}function Apt(t){return!t.ctrlKey&&!t.button}function Cpt(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function kpt(){return navigator.maxTouchPoints||"ontouchstart"in this}function NM(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ept(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Dpt(){return Az(UC)}function Tpt(){return Az(zC)}function Opt(){return Az(wpt)}function Az(t){var e=Cpt,n=Apt,r=kpt,i=!0,s=aT("start","brush","end"),o=6,a;function l(y){var b=y.property("__brush",m).selectAll(".overlay").data([p3("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",zh.overlay).merge(b).each(function(){var w=NM(this).extent;Kr(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),y.selectAll(".selection").data([p3("selection")]).enter().append("rect").attr("class","selection").attr("cursor",zh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=y.selectAll(".handle").data(t.handles,function(w){return w.type});v.exit().remove(),v.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return zh[w.type]}),y.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(y,b,v){y.tween?y.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,_=w.__brush,S=c(w,arguments),A=_.selection,C=t.input(typeof b=="function"?b.apply(this,arguments):b,_.extent),D=v2(A,C);function T(M){_.selection=M===1&&C===null?null:D(M),u.call(w),S.brush()}return A!==null&&C!==null?T:T(1)}):y.each(function(){var w=this,_=arguments,S=w.__brush,A=t.input(typeof b=="function"?b.apply(w,_):b,S.extent),C=c(w,_).beforestart();Ob(w),S.selection=A===null?null:A,u.call(w),C.start(v).brush(v).end(v)})},l.clear=function(y,b){l.move(y,null,b)};function u(){var y=Kr(this),b=NM(this).selection;b?(y.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?b[1][0]-o/2:b[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?b[1][1]-o/2:b[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?b[1][0]-b[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?b[1][1]-b[0][1]+o:o})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(y,b,v){var w=y.__brush.emitter;return w&&(!v||!w.clean)?w:new f(y,b,v)}function f(y,b,v){this.that=y,this.args=b,this.state=y.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,b){return this.starting?(this.starting=!1,this.emit("start",y,b)):this.emit("brush",y),this},brush:function(y,b){return this.emit("brush",y,b),this},end:function(y,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,b)),this},emit:function(y,b,v){var w=Kr(this.that).datum();s.call(y,this.that,new vpt(y,{sourceEvent:b,target:l,selection:t.output(this.state.selection),mode:v,dispatch:s}),w)}};function h(y){if(a&&!y.touches||!n.apply(this,arguments))return;var b=this,v=y.target.__data__.type,w=(i&&y.metaKey?v="overlay":v)==="selection"?ZJ:i&&y.altKey?cy:uy,_=t===zC?null:_pt[v],S=t===UC?null:Spt[v],A=NM(b),C=A.extent,D=A.selection,T=C[0][0],M,I,N=C[0][1],P,O,R=C[1][0],L,B,z=C[1][1],U,V,W=0,H=0,Y,se=_&&S&&i&&y.shiftKey,he,be,fe=Array.from(y.touches||[y],Ee=>{const rt=Ee.identifier;return Ee=Zu(Ee,b),Ee.point0=Ee.slice(),Ee.identifier=rt,Ee});Ob(b);var me=c(b,arguments,!0).beforestart();if(v==="overlay"){D&&(Y=!0);const Ee=[fe[0],fe[1]||fe[0]];A.selection=D=[[M=t===zC?T:Qs(Ee[0][0],Ee[1][0]),P=t===UC?N:Qs(Ee[0][1],Ee[1][1])],[L=t===zC?R:Ks(Ee[0][0],Ee[1][0]),U=t===UC?z:Ks(Ee[0][1],Ee[1][1])]],fe.length>1&&Fe(y)}else M=D[0][0],P=D[0][1],L=D[1][0],U=D[1][1];I=M,O=P,B=L,V=U;var K=Kr(b).attr("pointer-events","none"),de=K.selectAll(".overlay").attr("cursor",zh[v]);if(y.touches)me.moved=oe,me.ended=Ce;else{var ge=Kr(y.view).on("mousemove.brush",oe,!0).on("mouseup.brush",Ce,!0);i&&ge.on("keydown.brush",je,!0).on("keyup.brush",Ge,!0),sme(y.view)}u.call(b),me.start(y,w.name);function oe(Ee){for(const rt of Ee.changedTouches||[Ee])for(const Vt of fe)Vt.identifier===rt.identifier&&(Vt.cur=Zu(rt,b));if(se&&!he&&!be&&fe.length===1){const rt=fe[0];eZ(rt.cur[0]-rt[0])>eZ(rt.cur[1]-rt[1])?be=!0:he=!0}for(const rt of fe)rt.cur&&(rt[0]=rt.cur[0],rt[1]=rt.cur[1]);Y=!0,RM(Ee),Fe(Ee)}function Fe(Ee){const rt=fe[0],Vt=rt.point0;var Xe;switch(W=rt[0]-Vt[0],H=rt[1]-Vt[1],w){case FM:case ZJ:{_&&(W=Ks(T-M,Qs(R-L,W)),I=M+W,B=L+W),S&&(H=Ks(N-P,Qs(z-U,H)),O=P+H,V=U+H);break}case uy:{fe[1]?(_&&(I=Ks(T,Qs(R,fe[0][0])),B=Ks(T,Qs(R,fe[1][0])),_=1),S&&(O=Ks(N,Qs(z,fe[0][1])),V=Ks(N,Qs(z,fe[1][1])),S=1)):(_<0?(W=Ks(T-M,Qs(R-M,W)),I=M+W,B=L):_>0&&(W=Ks(T-L,Qs(R-L,W)),I=M,B=L+W),S<0?(H=Ks(N-P,Qs(z-P,H)),O=P+H,V=U):S>0&&(H=Ks(N-U,Qs(z-U,H)),O=P,V=U+H));break}case cy:{_&&(I=Ks(T,Qs(R,M-W*_)),B=Ks(T,Qs(R,L+W*_))),S&&(O=Ks(N,Qs(z,P-H*S)),V=Ks(N,Qs(z,U+H*S)));break}}B<I&&(_*=-1,Xe=M,M=L,L=Xe,Xe=I,I=B,B=Xe,v in nZ&&de.attr("cursor",zh[v=nZ[v]])),V<O&&(S*=-1,Xe=P,P=U,U=Xe,Xe=O,O=V,V=Xe,v in rZ&&de.attr("cursor",zh[v=rZ[v]])),A.selection&&(D=A.selection),he&&(I=D[0][0],B=D[1][0]),be&&(O=D[0][1],V=D[1][1]),(D[0][0]!==I||D[0][1]!==O||D[1][0]!==B||D[1][1]!==V)&&(A.selection=[[I,O],[B,V]],u.call(b),me.brush(Ee,w.name))}function Ce(Ee){if(xpt(Ee),Ee.touches){if(Ee.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else ome(Ee.view,Y),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);K.attr("pointer-events","all"),de.attr("cursor",zh.overlay),A.selection&&(D=A.selection),Ept(D)&&(A.selection=null,u.call(b)),me.end(Ee,w.name)}function je(Ee){switch(Ee.keyCode){case 16:{se=_&&S;break}case 18:{w===uy&&(_&&(L=B-W*_,M=I+W*_),S&&(U=V-H*S,P=O+H*S),w=cy,Fe(Ee));break}case 32:{(w===uy||w===cy)&&(_<0?L=B-W:_>0&&(M=I-W),S<0?U=V-H:S>0&&(P=O-H),w=FM,de.attr("cursor",zh.selection),Fe(Ee));break}default:return}RM(Ee)}function Ge(Ee){switch(Ee.keyCode){case 16:{se&&(he=be=se=!1,Fe(Ee));break}case 18:{w===cy&&(_<0?L=B:_>0&&(M=I),S<0?U=V:S>0&&(P=O),w=uy,Fe(Ee));break}case 32:{w===FM&&(Ee.altKey?(_&&(L=B-W*_,M=I+W*_),S&&(U=V-H*S,P=O+H*S),w=cy):(_<0?L=B:_>0&&(M=I),S<0?U=V:S>0&&(P=O),w=uy),de.attr("cursor",zh[v]),Fe(Ee));break}default:return}RM(Ee)}}function d(y){c(this,arguments).moved(y)}function p(y){c(this,arguments).ended(y)}function m(){var y=this.__brush||{selection:null};return y.extent=WN(e.apply(this,arguments)),y.dim=t,y}return l.extent=function(y){return arguments.length?(e=typeof y=="function"?y:IM(WN(y)),l):e},l.filter=function(y){return arguments.length?(n=typeof y=="function"?y:IM(!!y),l):n},l.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:IM(!!y),l):r},l.handleSize=function(y){return arguments.length?(o=+y,l):o},l.keyModifiers=function(y){return arguments.length?(i=!!y,l):i},l.on=function(){var y=s.on.apply(s,arguments);return y===s?l:y},l}const HN=Math.PI,GN=2*HN,$g=1e-6,Mpt=GN-$g;function pme(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ipt(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return pme;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let gme=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?pme:Ipt(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=i-n,c=o-e,f=a-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>$g)if(!(Math.abs(f*l-u*c)>$g)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,p=i-a,m=l*l+u*u,y=d*d+p*p,b=Math.sqrt(m),v=Math.sqrt(h),w=s*Math.tan((HN-Math.acos((m+h-y)/(2*b*v)))/2),_=w/v,S=w/b;Math.abs(_-1)>$g&&this._append`L${e+_*c},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*d>c*p)},${this._x1=e+S*l},${this._y1=n+S*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,f=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>$g||Math.abs(this._y1-c)>$g)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%GN+GN),h>Mpt?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>$g&&this._append`A${r},${r},0,${+(h>=HN)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Sd(t=3){return new gme(+t)}var Rpt=Array.prototype,mme=Rpt.slice;function Fpt(t,e){return t-e}function Npt(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Lp=t=>()=>t;function Lpt(t,e){for(var n=-1,r=e.length,i;++n<r;)if(i=Ppt(t,e[n]))return i;return 0}function Ppt(t,e){for(var n=e[0],r=e[1],i=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],u=l[0],c=l[1],f=t[a],h=f[0],d=f[1];if(Bpt(l,f,e))return 0;c>r!=d>r&&n<(h-u)*(r-c)/(d-c)+u&&(i=-i)}return i}function Bpt(t,e,n){var r;return $pt(t,e,n)&&Upt(t[r=+(t[0]===e[0])],n[r],e[r])}function $pt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Upt(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function zpt(){}var jh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function s5(){var t=1,e=1,n=BU,r=l;function i(u){var c=n(u);if(Array.isArray(c))c=c.slice().sort(Fpt);else{const f=Qi(u,jpt);for(c=P0(..._de(f[0],f[1],c),c);c[c.length-1]>=f[1];)c.pop();for(;c[1]<f[0];)c.shift()}return c.map(f=>s(u,f))}function s(u,c){const f=c==null?NaN:+c;if(isNaN(f))throw new Error(`invalid value: ${c}`);var h=[],d=[];return o(u,f,function(p){r(p,u,f),Npt(p)>0?h.push([p]):d.push(p)}),d.forEach(function(p){for(var m=0,y=h.length,b;m<y;++m)if(Lpt((b=h[m])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:h}}function o(u,c,f){var h=new Array,d=new Array,p,m,y,b,v,w;for(p=m=-1,b=Og(u[0],c),jh[b<<1].forEach(_);++p<t-1;)y=b,b=Og(u[p+1],c),jh[y|b<<1].forEach(_);for(jh[b<<0].forEach(_);++m<e-1;){for(p=-1,b=Og(u[m*t+t],c),v=Og(u[m*t],c),jh[b<<1|v<<2].forEach(_);++p<t-1;)y=b,b=Og(u[m*t+t+p+1],c),w=v,v=Og(u[m*t+p+1],c),jh[y|b<<1|v<<2|w<<3].forEach(_);jh[b|v<<3].forEach(_)}for(p=-1,v=u[m*t]>=c,jh[v<<2].forEach(_);++p<t-1;)w=v,v=Og(u[m*t+p+1],c),jh[v<<2|w<<3].forEach(_);jh[v<<3].forEach(_);function _(S){var A=[S[0][0]+p,S[0][1]+m],C=[S[1][0]+p,S[1][1]+m],D=a(A),T=a(C),M,I;(M=d[D])?(I=h[T])?(delete d[M.end],delete h[I.start],M===I?(M.ring.push(C),f(M.ring)):h[M.start]=d[I.end]={start:M.start,end:I.end,ring:M.ring.concat(I.ring)}):(delete d[M.end],M.ring.push(C),d[M.end=T]=M):(M=h[T])?(I=d[D])?(delete h[M.start],delete d[I.end],M===I?(M.ring.push(C),f(M.ring)):h[I.start]=d[M.end]={start:I.start,end:M.end,ring:I.ring.concat(M.ring)}):(delete h[M.start],M.ring.unshift(A),h[M.start=D]=M):h[D]=d[T]={start:D,end:T,ring:[A,C]}}}function a(u){return u[0]*2+u[1]*(t+1)*4}function l(u,c,f){u.forEach(function(h){var d=h[0],p=h[1],m=d|0,y=p|0,b=LM(c[y*t+m]);d>0&&d<t&&m===d&&(h[0]=iZ(d,LM(c[y*t+m-1]),b,f)),p>0&&p<e&&y===p&&(h[1]=iZ(p,LM(c[(y-1)*t+m]),b,f))})}return i.contour=s,i.size=function(u){if(!arguments.length)return[t,e];var c=Math.floor(u[0]),f=Math.floor(u[1]);if(!(c>=0&&f>=0))throw new Error("invalid size");return t=c,e=f,i},i.thresholds=function(u){return arguments.length?(n=typeof u=="function"?u:Array.isArray(u)?Lp(mme.call(u)):Lp(u),i):n},i.smooth=function(u){return arguments.length?(r=u?l:zpt,i):r===l},i}function jpt(t){return isFinite(t)?t:NaN}function Og(t,e){return t==null?!1:+t>=e}function LM(t){return t==null||isNaN(t=+t)?-1/0:t}function iZ(t,e,n,r){const i=r-e,s=n-e,o=isFinite(i)||isFinite(s)?i/s:Math.sign(i)/Math.sign(s);return isNaN(o)?t:t+o-.5}function qpt(t){return t[0]}function Vpt(t){return t[1]}function Wpt(){return 1}function Hpt(){var t=qpt,e=Vpt,n=Wpt,r=960,i=500,s=20,o=2,a=s*3,l=r+a*2>>o,u=i+a*2>>o,c=Lp(20);function f(v){var w=new Float32Array(l*u),_=Math.pow(2,-o),S=-1;for(const P of v){var A=(t(P,++S,v)+a)*_,C=(e(P,S,v)+a)*_,D=+n(P,S,v);if(D&&A>=0&&A<l&&C>=0&&C<u){var T=Math.floor(A),M=Math.floor(C),I=A-T-.5,N=C-M-.5;w[T+M*l]+=(1-I)*(1-N)*D,w[T+1+M*l]+=I*(1-N)*D,w[T+1+(M+1)*l]+=I*N*D,w[T+(M+1)*l]+=(1-I)*N*D}}return mde({data:w,width:l,height:u},s*_),w}function h(v){var w=f(v),_=c(w),S=Math.pow(2,2*o);return Array.isArray(_)||(_=P0(Number.MIN_VALUE,Ci(w)/S,_)),s5().size([l,u]).thresholds(_.map(A=>A*S))(w).map((A,C)=>(A.value=+_[C],d(A)))}h.contours=function(v){var w=f(v),_=s5().size([l,u]),S=Math.pow(2,2*o),A=C=>{C=+C;var D=d(_.contour(w,C*S));return D.value=C,D};return Object.defineProperty(A,"max",{get:()=>Ci(w)/S}),A};function d(v){return v.coordinates.forEach(p),v}function p(v){v.forEach(m)}function m(v){v.forEach(y)}function y(v){v[0]=v[0]*Math.pow(2,o)-a,v[1]=v[1]*Math.pow(2,o)-a}function b(){return a=s*3,l=r+a*2>>o,u=i+a*2>>o,h}return h.x=function(v){return arguments.length?(t=typeof v=="function"?v:Lp(+v),h):t},h.y=function(v){return arguments.length?(e=typeof v=="function"?v:Lp(+v),h):e},h.weight=function(v){return arguments.length?(n=typeof v=="function"?v:Lp(+v),h):n},h.size=function(v){if(!arguments.length)return[r,i];var w=+v[0],_=+v[1];if(!(w>=0&&_>=0))throw new Error("invalid size");return r=w,i=_,b()},h.cellSize=function(v){if(!arguments.length)return 1<<o;if(!((v=+v)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(v)/Math.LN2),b()},h.thresholds=function(v){return arguments.length?(c=typeof v=="function"?v:Array.isArray(v)?Lp(mme.call(v)):Lp(v),h):c},h.bandwidth=function(v){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((v=+v)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*v*v+1)-1)/2,b()},h}const Id=11102230246251565e-32,Js=134217729,Gpt=(3+8*Id)*Id;function PM(t,e,n,r,i){let s,o,a,l,u=e[0],c=r[0],f=0,h=0;c>u==c>-u?(s=u,u=e[++f]):(s=c,c=r[++h]);let d=0;if(f<t&&h<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=e[++f]):(o=c+s,a=s-(o-c),c=r[++h]),s=o,a!==0&&(i[d++]=a);f<t&&h<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++f]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++h]),s=o,a!==0&&(i[d++]=a);for(;f<t;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++f],s=o,a!==0&&(i[d++]=a);for(;h<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++h],s=o,a!==0&&(i[d++]=a);return(s!==0||d===0)&&(i[d++]=s),d}function Ypt(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function PS(t){return new Float64Array(t)}const Xpt=(3+16*Id)*Id,Kpt=(2+12*Id)*Id,Qpt=(9+64*Id)*Id*Id,fy=PS(4),sZ=PS(8),oZ=PS(12),aZ=PS(16),Ro=PS(4);function Jpt(t,e,n,r,i,s,o){let a,l,u,c,f,h,d,p,m,y,b,v,w,_,S,A,C,D;const T=t-i,M=n-i,I=e-s,N=r-s;_=T*N,h=Js*T,d=h-(h-T),p=T-d,h=Js*N,m=h-(h-N),y=N-m,S=p*y-(_-d*m-p*m-d*y),A=I*M,h=Js*I,d=h-(h-I),p=I-d,h=Js*M,m=h-(h-M),y=M-m,C=p*y-(A-d*m-p*m-d*y),b=S-C,f=S-b,fy[0]=S-(b+f)+(f-C),v=_+b,f=v-_,w=_-(v-f)+(b-f),b=w-A,f=w-b,fy[1]=w-(b+f)+(f-A),D=v+b,f=D-v,fy[2]=v-(D-f)+(b-f),fy[3]=D;let P=Ypt(4,fy),O=Kpt*o;if(P>=O||-P>=O||(f=t-T,a=t-(T+f)+(f-i),f=n-M,u=n-(M+f)+(f-i),f=e-I,l=e-(I+f)+(f-s),f=r-N,c=r-(N+f)+(f-s),a===0&&l===0&&u===0&&c===0)||(O=Qpt*o+Gpt*Math.abs(P),P+=T*c+N*a-(I*u+M*l),P>=O||-P>=O))return P;_=a*N,h=Js*a,d=h-(h-a),p=a-d,h=Js*N,m=h-(h-N),y=N-m,S=p*y-(_-d*m-p*m-d*y),A=l*M,h=Js*l,d=h-(h-l),p=l-d,h=Js*M,m=h-(h-M),y=M-m,C=p*y-(A-d*m-p*m-d*y),b=S-C,f=S-b,Ro[0]=S-(b+f)+(f-C),v=_+b,f=v-_,w=_-(v-f)+(b-f),b=w-A,f=w-b,Ro[1]=w-(b+f)+(f-A),D=v+b,f=D-v,Ro[2]=v-(D-f)+(b-f),Ro[3]=D;const R=PM(4,fy,4,Ro,sZ);_=T*c,h=Js*T,d=h-(h-T),p=T-d,h=Js*c,m=h-(h-c),y=c-m,S=p*y-(_-d*m-p*m-d*y),A=I*u,h=Js*I,d=h-(h-I),p=I-d,h=Js*u,m=h-(h-u),y=u-m,C=p*y-(A-d*m-p*m-d*y),b=S-C,f=S-b,Ro[0]=S-(b+f)+(f-C),v=_+b,f=v-_,w=_-(v-f)+(b-f),b=w-A,f=w-b,Ro[1]=w-(b+f)+(f-A),D=v+b,f=D-v,Ro[2]=v-(D-f)+(b-f),Ro[3]=D;const L=PM(R,sZ,4,Ro,oZ);_=a*c,h=Js*a,d=h-(h-a),p=a-d,h=Js*c,m=h-(h-c),y=c-m,S=p*y-(_-d*m-p*m-d*y),A=l*u,h=Js*l,d=h-(h-l),p=l-d,h=Js*u,m=h-(h-u),y=u-m,C=p*y-(A-d*m-p*m-d*y),b=S-C,f=S-b,Ro[0]=S-(b+f)+(f-C),v=_+b,f=v-_,w=_-(v-f)+(b-f),b=w-A,f=w-b,Ro[1]=w-(b+f)+(f-A),D=v+b,f=D-v,Ro[2]=v-(D-f)+(b-f),Ro[3]=D;const B=PM(L,oZ,4,Ro,aZ);return aZ[B-1]}function v6(t,e,n,r,i,s){const o=(e-s)*(n-i),a=(t-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=Xpt*u?l:-Jpt(t,e,n,r,i,s,u)}const lZ=Math.pow(2,-52),x6=new Uint32Array(512);class o5{static from(e,n=r0t,r=i0t){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=e[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new o5(s)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let T=0;T<o;T++){const M=e[2*T],I=e[2*T+1];M<a&&(a=M),I<l&&(l=I),M>u&&(u=M),I>c&&(c=I),this._ids[T]=T}const f=(a+u)/2,h=(l+c)/2;let d,p,m;for(let T=0,M=1/0;T<o;T++){const I=BM(f,h,e[2*T],e[2*T+1]);I<M&&(d=T,M=I)}const y=e[2*d],b=e[2*d+1];for(let T=0,M=1/0;T<o;T++){if(T===d)continue;const I=BM(y,b,e[2*T],e[2*T+1]);I<M&&I>0&&(p=T,M=I)}let v=e[2*p],w=e[2*p+1],_=1/0;for(let T=0;T<o;T++){if(T===d||T===p)continue;const M=t0t(y,b,v,w,e[2*T],e[2*T+1]);M<_&&(m=T,_=M)}let S=e[2*m],A=e[2*m+1];if(_===1/0){for(let I=0;I<o;I++)this._dists[I]=e[2*I]-e[0]||e[2*I+1]-e[1];Gy(this._ids,this._dists,0,o-1);const T=new Uint32Array(o);let M=0;for(let I=0,N=-1/0;I<o;I++){const P=this._ids[I],O=this._dists[P];O>N&&(T[M++]=P,N=O)}this.hull=T.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(v6(y,b,v,w,S,A)<0){const T=p,M=v,I=w;p=m,v=S,w=A,m=T,S=M,A=I}const C=n0t(y,b,v,w,S,A);this._cx=C.x,this._cy=C.y;for(let T=0;T<o;T++)this._dists[T]=BM(e[2*T],e[2*T+1],C.x,C.y);Gy(this._ids,this._dists,0,o-1),this._hullStart=d;let D=3;r[d]=n[m]=p,r[p]=n[d]=m,r[m]=n[p]=d,i[d]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(y,b)]=d,s[this._hashKey(v,w)]=p,s[this._hashKey(S,A)]=m,this.trianglesLen=0,this._addTriangle(d,p,m,-1,-1,-1);for(let T=0,M,I;T<this._ids.length;T++){const N=this._ids[T],P=e[2*N],O=e[2*N+1];if(T>0&&Math.abs(P-M)<=lZ&&Math.abs(O-I)<=lZ||(M=P,I=O,N===d||N===p||N===m))continue;let R=0;for(let V=0,W=this._hashKey(P,O);V<this._hashSize&&(R=s[(W+V)%this._hashSize],!(R!==-1&&R!==r[R]));V++);R=n[R];let L=R,B;for(;B=r[L],v6(P,O,e[2*L],e[2*L+1],e[2*B],e[2*B+1])>=0;)if(L=B,L===R){L=-1;break}if(L===-1)continue;let z=this._addTriangle(L,N,r[L],-1,-1,i[L]);i[N]=this._legalize(z+2),i[L]=z,D++;let U=r[L];for(;B=r[U],v6(P,O,e[2*U],e[2*U+1],e[2*B],e[2*B+1])<0;)z=this._addTriangle(U,N,B,i[N],-1,i[U]),i[N]=this._legalize(z+2),r[U]=U,D--,U=B;if(L===R)for(;B=n[L],v6(P,O,e[2*B],e[2*B+1],e[2*L],e[2*L+1])<0;)z=this._addTriangle(B,N,L,-1,i[L],i[B]),this._legalize(z+2),i[B]=z,r[L]=L,D--,L=B;this._hullStart=n[N]=L,r[L]=n[U]=N,r[N]=U,s[this._hashKey(P,O)]=N,s[this._hashKey(e[2*L],e[2*L+1])]=L}this.hull=new Uint32Array(D);for(let T=0,M=this._hullStart;T<D;T++)this.hull[T]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(Zpt(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=x6[--s];continue}const u=a-a%3,c=l+(e+1)%3,f=u+(a+2)%3,h=n[o],d=n[e],p=n[c],m=n[f];if(e0t(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[e]=m,n[a]=h;const b=r[f];if(b===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=e;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(e,b),this._link(a,r[o]),this._link(o,f);const v=u+(a+1)%3;s<x6.length&&(x6[s++]=v)}else{if(s===0)break;e=x6[--s]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Zpt(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function BM(t,e,n,r){const i=t-n,s=e-r;return i*i+s*s}function e0t(t,e,n,r,i,s,o,a){const l=t-o,u=e-a,c=n-o,f=r-a,h=i-o,d=s-a,p=l*l+u*u,m=c*c+f*f,y=h*h+d*d;return l*(f*y-m*d)-u*(c*y-m*h)+p*(c*d-f*h)<0}function t0t(t,e,n,r,i,s){const o=n-t,a=r-e,l=i-t,u=s-e,c=o*o+a*a,f=l*l+u*u,h=.5/(o*u-a*l),d=(u*c-a*f)*h,p=(o*f-l*c)*h;return d*d+p*p}function n0t(t,e,n,r,i,s){const o=n-t,a=r-e,l=i-t,u=s-e,c=o*o+a*a,f=l*l+u*u,h=.5/(o*u-a*l),d=t+(u*c-a*f)*h,p=e+(o*f-l*c)*h;return{x:d,y:p}}function Gy(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=t[i],o=e[s];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Rx(t,i,s),e[t[n]]>e[t[r]]&&Rx(t,n,r),e[t[s]]>e[t[r]]&&Rx(t,s,r),e[t[n]]>e[t[s]]&&Rx(t,n,s);const a=t[s],l=e[a];for(;;){do s++;while(e[t[s]]<l);do o--;while(e[t[o]]>l);if(o<s)break;Rx(t,s,o)}t[n+1]=t[o],t[o]=a,r-s+1>=o-n?(Gy(t,e,s,r),Gy(t,e,n,o-1)):(Gy(t,e,n,o-1),Gy(t,e,s,r))}}function Rx(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function r0t(t){return t[0]}function i0t(t){return t[1]}const uZ=1e-6;class um{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>uZ||Math.abs(this._y1-s)>uZ)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class YN{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}let s0t=class{constructor(e,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,y=0,b=r.length,v,w;m<b;m+=3,y+=2){const _=r[m]*2,S=r[m+1]*2,A=r[m+2]*2,C=e[_],D=e[_+1],T=e[S],M=e[S+1],I=e[A],N=e[A+1],P=T-C,O=M-D,R=I-C,L=N-D,B=(P*L-O*R)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const U of n)s+=e[U*2],o+=e[U*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-C)*L-(o-D)*R);v=(C+I)/2-z*L,w=(D+N)/2+z*R}else{const z=1/B,U=P*P+O*O,V=R*R+L*L;v=C+(L*U-O*V)*z,w=D+(P*V-R*U)*z}a[y]=v,a[y+1]=w}let l=n[n.length-1],u,c=l*4,f,h=e[2*l],d,p=e[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=c,f=h,d=p,c=l*4,h=e[2*l],p=e[2*l+1],i[u+2]=i[c]=d-p,i[u+3]=i[c+1]=h-f}render(e){const n=e==null?e=new um:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const h=r[c];if(h<c)continue;const d=Math.floor(c/3)*2,p=Math.floor(h/3)*2,m=o[d],y=o[d+1],b=o[p],v=o[p+1];this._renderSegment(m,y,b,v,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const f=Math.floor(i[u]/3)*2,h=o[f],d=o[f+1],p=l*4,m=this._project(h,d,a[p+2],a[p+3]);m&&this._renderSegment(h,d,m[0],m[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new um:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new um:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new YN;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,s){let o;const a=this._regioncode(e,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(e,n),s.lineTo(r,i)):(o=this._clipSegment(e,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[e];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n))}_clipFinite(e,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,h=0;for(let d=0;d<r;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=h,h=0,i?i.push(a,l):i=[a,l];else{let p,m,y,b,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,y,b,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[b,v,m,y]=p,f=h,h=this._edgecode(m,y),f&&h&&this._edge(e,f,h,i,i.length),i?i.push(m,y):i=[m,y]}f=h,h=this._edgecode(b,v),f&&h&&this._edge(e,f,h,i,i.length),i?i.push(b,v):i=[b,v]}if(i)f=h,h=this._edgecode(i[0],i[1]),f&&h&&this._edge(e,f,h,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,s,o){const a=s<o;for(a&&([e,n,r,i,s,o]=[r,i,e,n,o,s]);;){if(s===0&&o===0)return a?[r,i,e,n]:[e,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=e+(r-e)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=e+(r-e)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-e)/(r-e),l=this.xmax):(u=n+(i-n)*(this.xmin-e)/(r-e),l=this.xmin),s?(e=l,n=u,s=this._regioncode(e,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,c=a.length,f,h=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=h,h=this._edgecode(a[u],a[u+1]),f&&h&&(u=this._edge(e,f,h,a,u),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(e,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(e,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=e+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=e+(s=o)*r)}if(r>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const r=(n+2)%e.length,i=(n+4)%e.length;(e[n]===e[r]&&e[r]===e[i]||e[n+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),n-=2)}e.length||(e=null)}return e}};const o0t=2*Math.PI,hy=Math.pow;function a0t(t){return t[0]}function l0t(t){return t[1]}function u0t(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],s=2*e[r+1],o=2*e[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function c0t(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class og{static from(e,n=a0t,r=l0t,i){return new og("length"in e?f0t(e,n,r,i):Float64Array.from(h0t(e,n,r,i)))}constructor(e){this._delaunator=new o5(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&u0t(e)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,d=n.length/2;h<d;++h){const p=c0t(n[2*h],n[2*h+1],f);n[2*h]=p[0],n[2*h+1]=p[1]}this._delaunator=new o5(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new s0t(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(e);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){const f=r[(i[e]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,e,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(e,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,f=hy(n-u[e*2],2)+hy(r-u[e*2+1],2);const h=i[e];let d=h;do{let p=l[d];const m=hy(n-u[p*2],2)+hy(r-u[p*2+1],2);if(m<f&&(f=m,c=p),d=d%3===2?d-2:d+1,l[d]!==e)break;if(d=a[d],d===-1){if(d=s[(o[e]+1)%s.length],d!==p&&hy(n-u[d*2],2)+hy(r-u[d*2+1],2)<f)return d;break}}while(d!==h);return c}render(e){const n=e==null?e=new um:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;e.moveTo(r[u],r[u+1]),e.lineTo(r[c],r[c+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const r=e==null?e=new um:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];e.moveTo(a+n,l),e.arc(a,l,n,0,o0t)}return r&&r.value()}renderHull(e){const n=e==null?e=new um:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;e.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];e.lineTo(i[l],i[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new YN;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new um:void 0,{points:i,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new YN;return this.renderTriangle(e,n),n.value()}}function f0t(t,e,n,r){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=t[o];s[o*2]=e.call(r,a,o,t),s[o*2+1]=n.call(r,a,o,t)}return s}function*h0t(t,e,n,r){let i=0;for(const s of t)yield e.call(r,s,i,t),yield n.call(r,s,i,t),++i}var Mt=1e-6,a5=1e-12,bn=Math.PI,Oi=bn/2,cZ=bn/4,$l=bn*2,Ps=180/bn,Hn=bn/180,sr=Math.abs,E2=Math.atan,Sc=Math.atan2,Pt=Math.cos,w6=Math.ceil,yme=Math.exp,XN=Math.hypot,l5=Math.log,$M=Math.pow,vt=Math.sin,wu=Math.sign||function(t){return t>0?1:t<0?-1:0},ia=Math.sqrt,Cz=Math.tan;function bme(t){return t>1?0:t<-1?bn:Math.acos(t)}function Xa(t){return t>1?Oi:t<-1?-Oi:Math.asin(t)}function kl(){}function u5(t,e){t&&hZ.hasOwnProperty(t.type)&&hZ[t.type](t,e)}var fZ={Feature:function(t,e){u5(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)u5(n[r].geometry,e)}},hZ={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){KN(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)KN(n[r],e,0)},Polygon:function(t,e){dZ(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)dZ(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)u5(n[r],e)}};function KN(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function dZ(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)KN(t[n],e,1);e.polygonEnd()}function $p(t,e){t&&fZ.hasOwnProperty(t.type)?fZ[t.type](t,e):u5(t,e)}function QN(t){return[Sc(t[1],t[0]),Xa(t[2])]}function Cv(t){var e=t[0],n=t[1],r=Pt(n);return[r*Pt(e),r*vt(e),vt(n)]}function _6(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function c5(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function UM(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function S6(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function JN(t){var e=ia(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var dw,f5,h5,d5,p5,g5,m5,y5,ZN,eL,tL,vme,xme,qo,Vo,Wo,lc={sphere:kl,point:kz,lineStart:pZ,lineEnd:gZ,polygonStart:function(){lc.lineStart=g0t,lc.lineEnd=m0t},polygonEnd:function(){lc.lineStart=pZ,lc.lineEnd=gZ}};function kz(t,e){t*=Hn,e*=Hn;var n=Pt(e);BS(n*Pt(t),n*vt(t),vt(e))}function BS(t,e,n){++dw,h5+=(t-h5)/dw,d5+=(e-d5)/dw,p5+=(n-p5)/dw}function pZ(){lc.point=d0t}function d0t(t,e){t*=Hn,e*=Hn;var n=Pt(e);qo=n*Pt(t),Vo=n*vt(t),Wo=vt(e),lc.point=p0t,BS(qo,Vo,Wo)}function p0t(t,e){t*=Hn,e*=Hn;var n=Pt(e),r=n*Pt(t),i=n*vt(t),s=vt(e),o=Sc(ia((o=Vo*s-Wo*i)*o+(o=Wo*r-qo*s)*o+(o=qo*i-Vo*r)*o),qo*r+Vo*i+Wo*s);f5+=o,g5+=o*(qo+(qo=r)),m5+=o*(Vo+(Vo=i)),y5+=o*(Wo+(Wo=s)),BS(qo,Vo,Wo)}function gZ(){lc.point=kz}function g0t(){lc.point=y0t}function m0t(){wme(vme,xme),lc.point=kz}function y0t(t,e){vme=t,xme=e,t*=Hn,e*=Hn,lc.point=wme;var n=Pt(e);qo=n*Pt(t),Vo=n*vt(t),Wo=vt(e),BS(qo,Vo,Wo)}function wme(t,e){t*=Hn,e*=Hn;var n=Pt(e),r=n*Pt(t),i=n*vt(t),s=vt(e),o=Vo*s-Wo*i,a=Wo*r-qo*s,l=qo*i-Vo*r,u=XN(o,a,l),c=Xa(u),f=u&&-c/u;ZN.add(f*o),eL.add(f*a),tL.add(f*l),f5+=c,g5+=c*(qo+(qo=r)),m5+=c*(Vo+(Vo=i)),y5+=c*(Wo+(Wo=s)),BS(qo,Vo,Wo)}function b0t(t){dw=f5=h5=d5=p5=g5=m5=y5=0,ZN=new zf,eL=new zf,tL=new zf,$p(t,lc);var e=+ZN,n=+eL,r=+tL,i=XN(e,n,r);return i<a5&&(e=g5,n=m5,r=y5,f5<Mt&&(e=h5,n=d5,r=p5),i=XN(e,n,r),i<a5)?[NaN,NaN]:[Sc(n,e)*Ps,Xa(r/i)*Ps]}function nL(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function rL(t,e){return sr(t)>bn&&(t-=Math.round(t/$l)*$l),[t,e]}rL.invert=rL;function _me(t,e,n){return(t%=$l)?e||n?nL(yZ(t),bZ(e,n)):yZ(t):e||n?bZ(e,n):rL}function mZ(t){return function(e,n){return e+=t,sr(e)>bn&&(e-=Math.round(e/$l)*$l),[e,n]}}function yZ(t){var e=mZ(t);return e.invert=mZ(-t),e}function bZ(t,e){var n=Pt(t),r=vt(t),i=Pt(e),s=vt(e);function o(a,l){var u=Pt(l),c=Pt(a)*u,f=vt(a)*u,h=vt(l),d=h*n+c*r;return[Sc(f*i-d*s,c*n-h*r),Xa(d*i+f*s)]}return o.invert=function(a,l){var u=Pt(l),c=Pt(a)*u,f=vt(a)*u,h=vt(l),d=h*i-f*s;return[Sc(f*i+h*s,c*n+d*r),Xa(d*n-c*r)]},o}function v0t(t){t=_me(t[0]*Hn,t[1]*Hn,t.length>2?t[2]*Hn:0);function e(n){return n=t(n[0]*Hn,n[1]*Hn),n[0]*=Ps,n[1]*=Ps,n}return e.invert=function(n){return n=t.invert(n[0]*Hn,n[1]*Hn),n[0]*=Ps,n[1]*=Ps,n},e}function x0t(t,e,n,r,i,s){if(n){var o=Pt(e),a=vt(e),l=r*n;i==null?(i=e+r*$l,s=e-l/2):(i=vZ(o,i),s=vZ(o,s),(r>0?i<s:i>s)&&(i+=r*$l));for(var u,c=i;r>0?c>s:c<s;c-=l)u=QN([o,-a*Pt(c),-a*vt(c)]),t.point(u[0],u[1])}}function vZ(t,e){e=Cv(e),e[0]-=t,JN(e);var n=bme(-e[1]);return((-e[2]<0?-n:n)+$l-Mt)%$l}function Sme(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:kl,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function jC(t,e){return sr(t[0]-e[0])<Mt&&sr(t[1]-e[1])<Mt}function A6(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ame(t,e,n,r,i){var s=[],o=[],a,l;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],b=p[m],v;if(jC(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),a=0;a<m;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}b[0]+=2*Mt}s.push(v=new A6(y,p,null,!0)),o.push(v.o=new A6(y,null,v,!1)),s.push(v=new A6(b,p,null,!1)),o.push(v.o=new A6(b,null,v,!0))}}),!!s.length){for(o.sort(e),xZ(s),xZ(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,f;;){for(var h=u,d=!0;h.v;)if((h=h.n)===u)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function xZ(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function zM(t){return sr(t[0])<=bn?t[0]:wu(t[0])*((sr(t[0])+bn)%$l-bn)}function w0t(t,e){var n=zM(e),r=e[1],i=vt(r),s=[vt(n),-Pt(n),0],o=0,a=0,l=new zf;i===1?r=Oi+Mt:i===-1&&(r=-Oi-Mt);for(var u=0,c=t.length;u<c;++u)if(h=(f=t[u]).length)for(var f,h,d=f[h-1],p=zM(d),m=d[1]/2+cZ,y=vt(m),b=Pt(m),v=0;v<h;++v,p=_,y=A,b=C,d=w){var w=f[v],_=zM(w),S=w[1]/2+cZ,A=vt(S),C=Pt(S),D=_-p,T=D>=0?1:-1,M=T*D,I=M>bn,N=y*A;if(l.add(Sc(N*T*vt(M),b*C+N*Pt(M))),o+=I?D+T*$l:D,I^p>=n^_>=n){var P=c5(Cv(d),Cv(w));JN(P);var O=c5(s,P);JN(O);var R=(I^D>=0?-1:1)*Xa(O[2]);(r>R||r===R&&(P[0]||P[1]))&&(a+=I^D>=0?1:-1)}}return(o<-Mt||o<Mt&&l<-a5)^a&1}function Cme(t,e,n,r){return function(i){var s=e(i),o=Sme(),a=e(o),l=!1,u,c,f,h={point:d,lineStart:m,lineEnd:y,polygonStart:function(){h.point=b,h.lineStart=v,h.lineEnd=w,c=[],u=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=y,c=Cde(c);var _=w0t(u,r);c.length?(l||(i.polygonStart(),l=!0),Ame(c,S0t,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,S){t(_,S)&&i.point(_,S)}function p(_,S){s.point(_,S)}function m(){h.point=p,s.lineStart()}function y(){h.point=d,s.lineEnd()}function b(_,S){f.push([_,S]),a.point(_,S)}function v(){a.lineStart(),f=[]}function w(){b(f[0][0],f[0][1]),a.lineEnd();var _=a.clean(),S=o.result(),A,C=S.length,D,T,M;if(f.pop(),u.push(f),f=null,!!C){if(_&1){if(T=S[0],(D=T.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),A=0;A<D;++A)i.point((M=T[A])[0],M[1]);i.lineEnd()}return}C>1&&_&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(_0t))}}return h}}function _0t(t){return t.length>1}function S0t(t,e){return((t=t.x)[0]<0?t[1]-Oi-Mt:Oi-t[1])-((e=e.x)[0]<0?e[1]-Oi-Mt:Oi-e[1])}const wZ=Cme(function(){return!0},A0t,k0t,[-bn,-Oi]);function A0t(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,o){var a=s>0?bn:-bn,l=sr(s-e);sr(l-bn)<Mt?(t.point(e,n=(n+o)/2>0?Oi:-Oi),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),i=0):r!==a&&l>=bn&&(sr(e-r)<Mt&&(e-=r*Mt),sr(s-a)<Mt&&(s-=a*Mt),n=C0t(e,n,s,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),i=0),t.point(e=s,n=o),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function C0t(t,e,n,r){var i,s,o=vt(t-n);return sr(o)>Mt?E2((vt(e)*(s=Pt(r))*vt(n)-vt(r)*(i=Pt(e))*vt(t))/(i*s*o)):(e+r)/2}function k0t(t,e,n,r){var i;if(t==null)i=n*Oi,r.point(-bn,i),r.point(0,i),r.point(bn,i),r.point(bn,0),r.point(bn,-i),r.point(0,-i),r.point(-bn,-i),r.point(-bn,0),r.point(-bn,i);else if(sr(t[0]-e[0])>Mt){var s=t[0]<e[0]?bn:-bn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}function E0t(t){var e=Pt(t),n=2*Hn,r=e>0,i=sr(e)>Mt;function s(c,f,h,d){x0t(d,t,n,h,c,f)}function o(c,f){return Pt(c)*Pt(f)>e}function a(c){var f,h,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(y,b){var v=[y,b],w,_=o(y,b),S=r?_?0:u(y,b):_?u(y+(y<0?bn:-bn),b):0;if(!f&&(p=d=_)&&c.lineStart(),_!==d&&(w=l(f,v),(!w||jC(f,w)||jC(v,w))&&(v[2]=1)),_!==d)m=0,_?(c.lineStart(),w=l(v,f),c.point(w[0],w[1])):(w=l(f,v),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^_){var A;!(S&h)&&(A=l(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)))}_&&(!f||!jC(f,v))&&c.point(v[0],v[1]),f=v,d=_,h=S},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return m|(p&&d)<<1}}}function l(c,f,h){var d=Cv(c),p=Cv(f),m=[1,0,0],y=c5(d,p),b=_6(y,y),v=y[0],w=b-v*v;if(!w)return!h&&c;var _=e*b/w,S=-e*v/w,A=c5(m,y),C=S6(m,_),D=S6(y,S);UM(C,D);var T=A,M=_6(C,T),I=_6(T,T),N=M*M-I*(_6(C,C)-1);if(!(N<0)){var P=ia(N),O=S6(T,(-M-P)/I);if(UM(O,C),O=QN(O),!h)return O;var R=c[0],L=f[0],B=c[1],z=f[1],U;L<R&&(U=R,R=L,L=U);var V=L-R,W=sr(V-bn)<Mt,H=W||V<Mt;if(!W&&z<B&&(U=B,B=z,z=U),H?W?B+z>0^O[1]<(sr(O[0]-R)<Mt?B:z):B<=O[1]&&O[1]<=z:V>bn^(R<=O[0]&&O[0]<=L)){var Y=S6(T,(-M+P)/I);return UM(Y,C),[O,QN(Y)]}}}function u(c,f){var h=r?t:bn-t,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return Cme(o,a,s,r?[0,-t]:[-bn,t-bn])}function D0t(t,e,n,r,i,s){var o=t[0],a=t[1],l=e[0],u=e[1],c=0,f=1,h=l-o,d=u-a,p;if(p=n-o,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}return c>0&&(t[0]=o+c*h,t[1]=a+c*d),f<1&&(e[0]=o+f*h,e[1]=a+f*d),!0}}}}}var pw=1e9,C6=-pw;function kme(t,e,n,r){function i(u,c){return t<=u&&u<=n&&e<=c&&c<=r}function s(u,c,f,h){var d=0,p=0;if(u==null||(d=o(u,f))!==(p=o(c,f))||l(u,c)<0^f>0)do h.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+f+4)%4)!==p);else h.point(c[0],c[1])}function o(u,c){return sr(u[0]-t)<Mt?c>0?0:3:sr(u[0]-n)<Mt?c>0?2:1:sr(u[1]-e)<Mt?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=o(u,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=Sme(),h,d,p,m,y,b,v,w,_,S,A,C={point:D,lineStart:N,lineEnd:P,polygonStart:M,polygonEnd:I};function D(R,L){i(R,L)&&c.point(R,L)}function T(){for(var R=0,L=0,B=d.length;L<B;++L)for(var z=d[L],U=1,V=z.length,W=z[0],H,Y,se=W[0],he=W[1];U<V;++U)H=se,Y=he,W=z[U],se=W[0],he=W[1],Y<=r?he>r&&(se-H)*(r-Y)>(he-Y)*(t-H)&&++R:he<=r&&(se-H)*(r-Y)<(he-Y)*(t-H)&&--R;return R}function M(){c=f,h=[],d=[],A=!0}function I(){var R=T(),L=A&&R,B=(h=Cde(h)).length;(L||B)&&(u.polygonStart(),L&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),B&&Ame(h,a,R,s,u),u.polygonEnd()),c=u,h=d=p=null}function N(){C.point=O,d&&d.push(p=[]),S=!0,_=!1,v=w=NaN}function P(){h&&(O(m,y),b&&_&&f.rejoin(),h.push(f.result())),C.point=D,_&&c.lineEnd()}function O(R,L){var B=i(R,L);if(d&&p.push([R,L]),S)m=R,y=L,b=B,S=!1,B&&(c.lineStart(),c.point(R,L));else if(B&&_)c.point(R,L);else{var z=[v=Math.max(C6,Math.min(pw,v)),w=Math.max(C6,Math.min(pw,w))],U=[R=Math.max(C6,Math.min(pw,R)),L=Math.max(C6,Math.min(pw,L))];D0t(z,U,t,e,n,r)?(_||(c.lineStart(),c.point(z[0],z[1])),c.point(U[0],U[1]),B||c.lineEnd(),A=!1):B&&(c.lineStart(),c.point(R,L),A=!1)}v=R,w=L,_=B}return C}}function _Z(t,e,n){var r=Cl(t,e-Mt,n).concat(e);return function(i){return r.map(function(s){return[i,s]})}}function SZ(t,e,n){var r=Cl(t,e-Mt,n).concat(e);return function(i){return r.map(function(s){return[s,i]})}}function T0t(){var t,e,n,r,i,s,o,a,l=10,u=l,c=90,f=360,h,d,p,m,y=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return Cl(w6(r/c)*c,n,c).map(p).concat(Cl(w6(a/f)*f,o,f).map(m)).concat(Cl(w6(e/l)*l,t,l).filter(function(w){return sr(w%c)>Mt}).map(h)).concat(Cl(w6(s/u)*u,i,u).filter(function(w){return sr(w%f)>Mt}).map(d))}return b.lines=function(){return v().map(function(w){return{type:"LineString",coordinates:w}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(w){return arguments.length?b.extentMajor(w).extentMinor(w):b.extentMinor()},b.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),b.precision(y)):[[r,a],[n,o]]},b.extentMinor=function(w){return arguments.length?(e=+w[0][0],t=+w[1][0],s=+w[0][1],i=+w[1][1],e>t&&(w=e,e=t,t=w),s>i&&(w=s,s=i,i=w),b.precision(y)):[[e,s],[t,i]]},b.step=function(w){return arguments.length?b.stepMajor(w).stepMinor(w):b.stepMinor()},b.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],b):[c,f]},b.stepMinor=function(w){return arguments.length?(l=+w[0],u=+w[1],b):[l,u]},b.precision=function(w){return arguments.length?(y=+w,h=_Z(s,i,90),d=SZ(e,t,y),p=_Z(a,o,90),m=SZ(r,n,y),b):y},b.extentMajor([[-180,-90+Mt],[180,90-Mt]]).extentMinor([[-180,-80-Mt],[180,80+Mt]])}function O0t(){return T0t()()}const iL=t=>t;var jM=new zf,sL=new zf,Eme,Dme,oL,aL,gd={point:kl,lineStart:kl,lineEnd:kl,polygonStart:function(){gd.lineStart=M0t,gd.lineEnd=R0t},polygonEnd:function(){gd.lineStart=gd.lineEnd=gd.point=kl,jM.add(sr(sL)),sL=new zf},result:function(){var t=jM/2;return jM=new zf,t}};function M0t(){gd.point=I0t}function I0t(t,e){gd.point=Tme,Eme=oL=t,Dme=aL=e}function Tme(t,e){sL.add(aL*t-oL*e),oL=t,aL=e}function R0t(){Tme(Eme,Dme)}var kv=1/0,b5=kv,g3=-kv,v5=g3,x5={point:F0t,lineStart:kl,lineEnd:kl,polygonStart:kl,polygonEnd:kl,result:function(){var t=[[kv,b5],[g3,v5]];return g3=v5=-(b5=kv=1/0),t}};function F0t(t,e){t<kv&&(kv=t),t>g3&&(g3=t),e<b5&&(b5=e),e>v5&&(v5=e)}var lL=0,uL=0,gw=0,w5=0,_5=0,Yy=0,cL=0,fL=0,mw=0,Ome,Mme,wf,_f,pu={point:a1,lineStart:AZ,lineEnd:CZ,polygonStart:function(){pu.lineStart=P0t,pu.lineEnd=B0t},polygonEnd:function(){pu.point=a1,pu.lineStart=AZ,pu.lineEnd=CZ},result:function(){var t=mw?[cL/mw,fL/mw]:Yy?[w5/Yy,_5/Yy]:gw?[lL/gw,uL/gw]:[NaN,NaN];return lL=uL=gw=w5=_5=Yy=cL=fL=mw=0,t}};function a1(t,e){lL+=t,uL+=e,++gw}function AZ(){pu.point=N0t}function N0t(t,e){pu.point=L0t,a1(wf=t,_f=e)}function L0t(t,e){var n=t-wf,r=e-_f,i=ia(n*n+r*r);w5+=i*(wf+t)/2,_5+=i*(_f+e)/2,Yy+=i,a1(wf=t,_f=e)}function CZ(){pu.point=a1}function P0t(){pu.point=$0t}function B0t(){Ime(Ome,Mme)}function $0t(t,e){pu.point=Ime,a1(Ome=wf=t,Mme=_f=e)}function Ime(t,e){var n=t-wf,r=e-_f,i=ia(n*n+r*r);w5+=i*(wf+t)/2,_5+=i*(_f+e)/2,Yy+=i,i=_f*t-wf*e,cL+=i*(wf+t),fL+=i*(_f+e),mw+=i*3,a1(wf=t,_f=e)}function Rme(t){this._context=t}Rme.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,$l);break}}},result:kl};var hL=new zf,qM,Fme,Nme,yw,bw,m3={point:kl,lineStart:function(){m3.point=U0t},lineEnd:function(){qM&&Lme(Fme,Nme),m3.point=kl},polygonStart:function(){qM=!0},polygonEnd:function(){qM=null},result:function(){var t=+hL;return hL=new zf,t}};function U0t(t,e){m3.point=Lme,Fme=yw=t,Nme=bw=e}function Lme(t,e){yw-=t,bw-=e,hL.add(ia(yw*yw+bw*bw)),yw=t,bw=e}let kZ,S5,EZ,DZ;class TZ{constructor(e){this._append=e==null?Pme:z0t(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==EZ||this._append!==S5){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,EZ=r,S5=this._append,DZ=this._,this._=i}this._+=DZ;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Pme(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function z0t(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Pme;if(e!==kZ){const n=10**e;kZ=e,S5=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return S5}function $S(t,e){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),$p(a,i(s))),s.result()}return o.area=function(a){return $p(a,i(gd)),gd.result()},o.measure=function(a){return $p(a,i(m3)),m3.result()},o.bounds=function(a){return $p(a,i(x5)),x5.result()},o.centroid=function(a){return $p(a,i(pu)),pu.result()},o.projection=function(a){return arguments.length?(i=a==null?(t=null,iL):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new TZ(n)):new Rme(e=a),typeof r!="function"&&s.pointRadius(r),o):e},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return e===null&&(s=new TZ(n)),o},o.projection(t).digits(n).context(e)}function A5(t){return{stream:hT(t)}}function hT(t){return function(e){var n=new dL;for(var r in t)n[r]=t[r];return n.stream=e,n}}function dL(){}dL.prototype={constructor:dL,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ez(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),$p(n,t.stream(x5)),e(x5.result()),r!=null&&t.clipExtent(r),t}function Dz(t,e,n){return Ez(t,function(r){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(s-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function Bme(t,e,n){return Dz(t,[[0,0],e],n)}function $me(t,e,n){return Ez(t,function(r){var i=+e,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];t.scale(150*s).translate([o,a])},n)}function Ume(t,e,n){return Ez(t,function(r){var i=+e,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var OZ=16,j0t=Pt(30*Hn);function MZ(t,e){return+e?V0t(t,e):q0t(t)}function q0t(t){return hT({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function V0t(t,e){function n(r,i,s,o,a,l,u,c,f,h,d,p,m,y){var b=u-r,v=c-i,w=b*b+v*v;if(w>4*e&&m--){var _=o+h,S=a+d,A=l+p,C=ia(_*_+S*S+A*A),D=Xa(A/=C),T=sr(sr(A)-1)<Mt||sr(s-f)<Mt?(s+f)/2:Sc(S,_),M=t(T,D),I=M[0],N=M[1],P=I-r,O=N-i,R=v*P-b*O;(R*R/w>e||sr((b*P+v*O)/w-.5)>.3||o*h+a*d+l*p<j0t)&&(n(r,i,s,o,a,l,I,N,T,_/=C,S/=C,A,m,y),y.point(I,N),n(I,N,T,_,S,A,u,c,f,h,d,p,m,y))}}return function(r){var i,s,o,a,l,u,c,f,h,d,p,m,y={point:b,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),y.lineStart=S},polygonEnd:function(){r.polygonEnd(),y.lineStart=v}};function b(D,T){D=t(D,T),r.point(D[0],D[1])}function v(){f=NaN,y.point=w,r.lineStart()}function w(D,T){var M=Cv([D,T]),I=t(D,T);n(f,h,c,d,p,m,f=I[0],h=I[1],c=D,d=M[0],p=M[1],m=M[2],OZ,r),r.point(f,h)}function _(){y.point=b,r.lineEnd()}function S(){v(),y.point=A,y.lineEnd=C}function A(D,T){w(i=D,T),s=f,o=h,a=d,l=p,u=m,y.point=w}function C(){n(f,h,c,d,p,m,s,o,i,a,l,u,OZ,r),y.lineEnd=_,_()}return y}}var W0t=hT({point:function(t,e){this.stream.point(t*Hn,e*Hn)}});function H0t(t){return hT({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function G0t(t,e,n,r,i){function s(o,a){return o*=r,a*=i,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},s}function IZ(t,e,n,r,i,s){if(!s)return G0t(t,e,n,r,i);var o=Pt(s),a=vt(s),l=o*t,u=a*t,c=o/t,f=a/t,h=(a*n-o*e)/t,d=(a*e+o*n)/t;function p(m,y){return m*=r,y*=i,[l*m-u*y+e,n-u*m-l*y]}return p.invert=function(m,y){return[r*(c*m-f*y+h),i*(d-f*m-c*y)]},p}function ag(t){return zme(function(){return t})()}function zme(t){var e,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,f=0,h=1,d=1,p=null,m=wZ,y=null,b,v,w,_=iL,S=.5,A,C,D,T,M;function I(R){return D(R[0]*Hn,R[1]*Hn)}function N(R){return R=D.invert(R[0],R[1]),R&&[R[0]*Ps,R[1]*Ps]}I.stream=function(R){return T&&M===R?T:T=W0t(H0t(c)(m(A(_(M=R)))))},I.preclip=function(R){return arguments.length?(m=R,p=void 0,O()):m},I.postclip=function(R){return arguments.length?(_=R,y=b=v=w=null,O()):_},I.clipAngle=function(R){return arguments.length?(m=+R?E0t(p=R*Hn):(p=null,wZ),O()):p*Ps},I.clipExtent=function(R){return arguments.length?(_=R==null?(y=b=v=w=null,iL):kme(y=+R[0][0],b=+R[0][1],v=+R[1][0],w=+R[1][1]),O()):y==null?null:[[y,b],[v,w]]},I.scale=function(R){return arguments.length?(n=+R,P()):n},I.translate=function(R){return arguments.length?(r=+R[0],i=+R[1],P()):[r,i]},I.center=function(R){return arguments.length?(s=R[0]%360*Hn,o=R[1]%360*Hn,P()):[s*Ps,o*Ps]},I.rotate=function(R){return arguments.length?(a=R[0]%360*Hn,l=R[1]%360*Hn,u=R.length>2?R[2]%360*Hn:0,P()):[a*Ps,l*Ps,u*Ps]},I.angle=function(R){return arguments.length?(f=R%360*Hn,P()):f*Ps},I.reflectX=function(R){return arguments.length?(h=R?-1:1,P()):h<0},I.reflectY=function(R){return arguments.length?(d=R?-1:1,P()):d<0},I.precision=function(R){return arguments.length?(A=MZ(C,S=R*R),O()):ia(S)},I.fitExtent=function(R,L){return Dz(I,R,L)},I.fitSize=function(R,L){return Bme(I,R,L)},I.fitWidth=function(R,L){return $me(I,R,L)},I.fitHeight=function(R,L){return Ume(I,R,L)};function P(){var R=IZ(n,0,0,h,d,f).apply(null,e(s,o)),L=IZ(n,r-R[0],i-R[1],h,d,f);return c=_me(a,l,u),C=nL(e,L),D=nL(c,C),A=MZ(C,S),O()}function O(){return T=M=null,I}return function(){return e=t.apply(this,arguments),I.invert=e.invert&&N,P()}}function Tz(t){var e=0,n=bn/3,r=zme(t),i=r(e,n);return i.parallels=function(s){return arguments.length?r(e=s[0]*Hn,n=s[1]*Hn):[e*Ps,n*Ps]},i}function Y0t(t){var e=Pt(t);function n(r,i){return[r*e,vt(i)/e]}return n.invert=function(r,i){return[r/e,Xa(i*e)]},n}function X0t(t,e){var n=vt(t),r=(n+vt(e))/2;if(sr(r)<Mt)return Y0t(t);var i=1+n*(2*r-n),s=ia(i)/r;function o(a,l){var u=ia(i-2*r*vt(l))/r;return[u*vt(a*=r),s-u*Pt(a)]}return o.invert=function(a,l){var u=s-l,c=Sc(a,sr(u))*wu(u);return u*r<0&&(c-=bn*wu(a)*wu(u)),[c/r,Xa((i-(a*a+u*u)*r*r)/(2*r))]},o}function C5(){return Tz(X0t).scale(155.424).center([0,33.6442])}function jme(){return C5().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function K0t(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Q0t(){var t,e,n=jme(),r,i=C5().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=C5().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(h,d){l=[h,d]}};function c(h){var d=h[0],p=h[1];return l=null,r.point(d,p),l||(s.point(d,p),l)||(a.point(d,p),l)}c.invert=function(h){var d=n.scale(),p=n.translate(),m=(h[0]-p[0])/d,y=(h[1]-p[1])/d;return(y>=.12&&y<.234&&m>=-.425&&m<-.214?i:y>=.166&&y<.234&&m>=-.214&&m<-.115?o:n).invert(h)},c.stream=function(h){return t&&e===h?t:t=K0t([n.stream(e=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],m=+h[1];return r=n.translate(h).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(u),s=i.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+Mt,m+.12*d+Mt],[p-.214*d-Mt,m+.234*d-Mt]]).stream(u),a=o.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+Mt,m+.166*d+Mt],[p-.115*d-Mt,m+.234*d-Mt]]).stream(u),f()},c.fitExtent=function(h,d){return Dz(c,h,d)},c.fitSize=function(h,d){return Bme(c,h,d)},c.fitWidth=function(h,d){return $me(c,h,d)},c.fitHeight=function(h,d){return Ume(c,h,d)};function f(){return t=e=null,c}return c.scale(1070)}function qme(t){return function(e,n){var r=Pt(e),i=Pt(n),s=t(r*i);return s===1/0?[2,0]:[s*i*vt(e),s*vt(n)]}}function US(t){return function(e,n){var r=ia(e*e+n*n),i=t(r),s=vt(i),o=Pt(i);return[Sc(e*s,r*o),Xa(r&&n*s/r)]}}var Vme=qme(function(t){return ia(2/(1+t))});Vme.invert=US(function(t){return 2*Xa(t/2)});function J0t(){return ag(Vme).scale(124.75).clipAngle(180-.001)}var Wme=qme(function(t){return(t=bme(t))&&t/vt(t)});Wme.invert=US(function(t){return t});function Z0t(){return ag(Wme).scale(79.4188).clipAngle(180-.001)}function dT(t,e){return[t,l5(Cz((Oi+e)/2))]}dT.invert=function(t,e){return[t,2*E2(yme(e))-Oi]};function egt(){return Hme(dT).scale(961/$l)}function Hme(t){var e=ag(t),n=e.center,r=e.scale,i=e.translate,s=e.clipExtent,o=null,a,l,u;e.scale=function(f){return arguments.length?(r(f),c()):r()},e.translate=function(f){return arguments.length?(i(f),c()):i()},e.center=function(f){return arguments.length?(n(f),c()):n()},e.clipExtent=function(f){return arguments.length?(f==null?o=a=l=u=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var f=bn*r(),h=e(v0t(e.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===dT?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),u]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,u)]])}return c()}function k6(t){return Cz((Oi+t)/2)}function tgt(t,e){var n=Pt(t),r=t===e?vt(t):l5(n/Pt(e))/l5(k6(e)/k6(t)),i=n*$M(k6(t),r)/r;if(!r)return dT;function s(o,a){i>0?a<-Oi+Mt&&(a=-Oi+Mt):a>Oi-Mt&&(a=Oi-Mt);var l=i/$M(k6(a),r);return[l*vt(r*o),i-l*Pt(r*o)]}return s.invert=function(o,a){var l=i-a,u=wu(r)*ia(o*o+l*l),c=Sc(o,sr(l))*wu(l);return l*r<0&&(c-=bn*wu(o)*wu(l)),[c/r,2*E2($M(i/u,1/r))-Oi]},s}function ngt(){return Tz(tgt).scale(109.5).parallels([30,30])}function k5(t,e){return[t,e]}k5.invert=k5;function rgt(){return ag(k5).scale(152.63)}function igt(t,e){var n=Pt(t),r=t===e?vt(t):(n-Pt(e))/(e-t),i=n/r+t;if(sr(r)<Mt)return k5;function s(o,a){var l=i-a,u=r*o;return[l*vt(u),i-l*Pt(u)]}return s.invert=function(o,a){var l=i-a,u=Sc(o,sr(l))*wu(l);return l*r<0&&(u-=bn*wu(o)*wu(l)),[u/r,i-wu(r)*ia(o*o+l*l)]},s}function sgt(){return Tz(igt).scale(131.154).center([0,13.9389])}var Vw=1.340264,Ww=-.081106,Hw=893e-6,Gw=.003796,E5=ia(3)/2,ogt=12;function Gme(t,e){var n=Xa(E5*vt(e)),r=n*n,i=r*r*r;return[t*Pt(n)/(E5*(Vw+3*Ww*r+i*(7*Hw+9*Gw*r))),n*(Vw+Ww*r+i*(Hw+Gw*r))]}Gme.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,s=0,o,a,l;s<ogt&&(a=n*(Vw+Ww*r+i*(Hw+Gw*r))-e,l=Vw+3*Ww*r+i*(7*Hw+9*Gw*r),n-=o=a/l,r=n*n,i=r*r*r,!(sr(o)<a5));++s);return[E5*t*(Vw+3*Ww*r+i*(7*Hw+9*Gw*r))/Pt(n),Xa(vt(n)/E5)]};function agt(){return ag(Gme).scale(177.158)}function Yme(t,e){var n=Pt(e),r=Pt(t)*n;return[n*vt(t)/r,vt(e)/r]}Yme.invert=US(E2);function lgt(){return ag(Yme).scale(144.049).clipAngle(60)}function Xme(t,e){return[Pt(e)*vt(t),vt(e)]}Xme.invert=US(Xa);function ugt(){return ag(Xme).scale(249.5).clipAngle(90+Mt)}function Kme(t,e){var n=Pt(e),r=1+Pt(t)*n;return[n*vt(t)/r,vt(e)/r]}Kme.invert=US(function(t){return 2*E2(t)});function cgt(){return ag(Kme).scale(250).clipAngle(142)}function Qme(t,e){return[l5(Cz((Oi+e)/2)),-t]}Qme.invert=function(t,e){return[-e,2*E2(yme(t))-Oi]};function fgt(){var t=Hme(Qme),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function hgt(t,e){return t.parent===e.parent?1:2}function dgt(t){return t.reduce(pgt,0)/t.length}function pgt(t,e){return t+e.x}function ggt(t){return 1+t.reduce(mgt,0)}function mgt(t,e){return Math.max(t,e.y)}function ygt(t){for(var e;e=t.children;)t=e[0];return t}function bgt(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Jme(){var t=hgt,e=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=dgt(d),h.y=ggt(d)):(h.x=o?a+=t(h,o):0,h.y=0,o=h)});var l=ygt(s),u=bgt(s),c=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return s.eachAfter(r?function(h){h.x=(h.x-s.x)*e,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-c)/(f-c)*e,h.y=(1-(s.y?h.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(r=!1,e=+s[0],n=+s[1],i):r?null:[e,n]},i.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],n=+s[1],i):r?[e,n]:null},i}function vgt(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function xgt(){return this.eachAfter(vgt)}function wgt(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function _gt(t,e){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Sgt(t,e){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Agt(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Cgt(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function kgt(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Egt(t){for(var e=this,n=Dgt(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Dgt(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Tgt(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ogt(){return Array.from(this)}function Mgt(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Igt(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Rgt(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function Zme(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Lgt)):e===void 0&&(e=Ngt);for(var n=new Ev(t),r,i=[n],s,o,a,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new Ev(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(e1e)}function Fgt(){return Zme(this).eachBefore(Pgt)}function Ngt(t){return t.children}function Lgt(t){return Array.isArray(t)?t[1]:null}function Pgt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function e1e(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Ev(t){this.data=t,this.depth=this.height=0,this.parent=null}Ev.prototype=Zme.prototype={constructor:Ev,count:xgt,each:wgt,eachAfter:Sgt,eachBefore:_gt,find:Agt,sum:Cgt,sort:kgt,path:Egt,ancestors:Tgt,descendants:Ogt,leaves:Mgt,links:Igt,copy:Fgt,[Symbol.iterator]:Rgt};function VM(t){return t==null?null:Bgt(t)}function Bgt(t){if(typeof t!="function")throw new Error;return t}var $gt={depth:-1},RZ={},WM={};function Ugt(t){return t.id}function zgt(t){return t.parentId}function t1e(){var t=Ugt,e=zgt,n;function r(i){var s=Array.from(i),o=t,a=e,l,u,c,f,h,d,p,m,y=new Map;if(n!=null){const b=s.map((_,S)=>jgt(n(_,S,i))),v=b.map(FZ),w=new Set(b).add("");for(const _ of v)w.has(_)||(w.add(_),b.push(_),v.push(FZ(_)),s.push(WM));o=(_,S)=>b[S],a=(_,S)=>v[S]}for(c=0,l=s.length;c<l;++c)u=s[c],d=s[c]=new Ev(u),(p=o(u,c,i))!=null&&(p+="")&&(m=d.id=p,y.set(m,y.has(m)?RZ:d)),(p=a(u,c,i))!=null&&(p+="")&&(d.parent=p);for(c=0;c<l;++c)if(d=s[c],p=d.parent){if(h=y.get(p),!h)throw new Error("missing: "+p);if(h===RZ)throw new Error("ambiguous: "+p);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===WM&&f.children.length===1;)f=f.children[0],--l;for(let b=s.length-1;b>=0&&(d=s[b],d.data===WM);--b)d.data=null}if(f.parent=$gt,f.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(e1e),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=VM(i),r):t},r.parentId=function(i){return arguments.length?(e=VM(i),r):e},r.path=function(i){return arguments.length?(n=VM(i),r):n},r}function jgt(t){t=`${t}`;let e=t.length;return pL(t,e-1)&&!pL(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function FZ(t){let e=t.length;if(e<2)return"";for(;--e>1&&!pL(t,e););return t.slice(0,e)}function pL(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function qgt(t,e){return t.parent===e.parent?1:2}function HM(t){var e=t.children;return e?e[0]:t.t}function GM(t){var e=t.children;return e?e[e.length-1]:t.t}function Vgt(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Wgt(t){for(var e=0,n=0,r=t.children,i=r.length,s;--i>=0;)s=r[i],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function Hgt(t,e,n){return t.a.parent===e.parent?t.a:n}function qC(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}qC.prototype=Object.create(Ev.prototype);function Ggt(t){for(var e=new qC(t,0),n,r=[e],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new qC(s[o],o)),i.parent=n;return(e.parent=new qC(null,0)).children=[e],e}function D5(){var t=qgt,e=1,n=1,r=null;function i(u){var c=Ggt(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var f=u,h=u,d=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>h.x&&(h=v),v.depth>d.depth&&(d=v)});var p=f===h?1:t(f,h)/2,m=p-f.x,y=e/(h.x+p+m),b=n/(d.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*y,v.y=v.depth*b})}return u}function s(u){var c=u.children,f=u.parent.children,h=u.i?f[u.i-1]:null;if(c){Wgt(u);var d=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+t(u._,h._),u.m=u.z-d):u.z=d}else h&&(u.z=h.z+t(u._,h._));u.parent.A=a(u,h,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var h=u,d=u,p=c,m=h.parent.children[0],y=h.m,b=d.m,v=p.m,w=m.m,_;p=GM(p),h=HM(h),p&&h;)m=HM(m),d=GM(d),d.a=u,_=p.z+v-h.z-y+t(p._,h._),_>0&&(Vgt(Hgt(p,u,f),u,_),y+=_,b+=_),v+=p.m,y+=h.m,w+=m.m,b+=d.m;p&&!GM(d)&&(d.t=p,d.m+=v-b),h&&!HM(m)&&(m.t=h,m.m+=y-w,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}const Ygt=1664525,Xgt=1013904223,NZ=1/4294967296;function Oz(t=Math.random()){let e=(0<=t&&t<1?t/NZ:Math.abs(t))|0;return()=>(e=Ygt*e+Xgt|0,NZ*(e>>>0))}function ws(t){return function(){return t}}const n1e=Math.cos,Mz=Math.min,T5=Math.sin,ps=Math.sqrt,LZ=1e-12,O5=Math.PI,pT=2*O5;function r1e(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new gme(e)}function i1e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function s1e(t){this._context=t}s1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function zS(t){return new s1e(t)}function o1e(t){return t[0]}function a1e(t){return t[1]}function l1e(t,e){var n=ws(!0),r=null,i=zS,s=null,o=r1e(a);t=typeof t=="function"?t:t===void 0?o1e:ws(t),e=typeof e=="function"?e:e===void 0?a1e:ws(e);function a(l){var u,c=(l=i1e(l)).length,f,h=!1,d;for(r==null&&(s=i(d=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,l),+e(f,u,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:ws(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:ws(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ws(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function Iz(t,e,n){var r=null,i=ws(!0),s=null,o=zS,a=null,l=r1e(u);t=typeof t=="function"?t:t===void 0?o1e:ws(+t),e=typeof e=="function"?e:ws(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?a1e:ws(+n);function u(f){var h,d,p,m=(f=i1e(f)).length,y,b=!1,v,w=new Array(m),_=new Array(m);for(s==null&&(a=o(v=l())),h=0;h<=m;++h){if(!(h<m&&i(y=f[h],h,f))===b)if(b=!b)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=h-1;p>=d;--p)a.point(w[p],_[p]);a.lineEnd(),a.areaEnd()}b&&(w[h]=+t(y,h,f),_[h]=+e(y,h,f),a.point(r?+r(y,h,f):w[h],n?+n(y,h,f):_[h]))}if(v)return a=null,v+""||null}function c(){return l1e().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:ws(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ws(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ws(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:ws(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ws(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ws(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ws(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),u):s},u}class u1e{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Kgt(t){return new u1e(t,!0)}function Qgt(t){return new u1e(t,!1)}const Jgt=ps(3),c1e={draw(t,e){const n=ps(e+Mz(e/28,.75))*.59436,r=n/2,i=r*Jgt;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},y3={draw(t,e){const n=ps(e/O5);t.moveTo(n,0),t.arc(0,0,n,0,pT)}},f1e={draw(t,e){const n=ps(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},h1e=ps(1/3),Zgt=h1e*2,d1e={draw(t,e){const n=ps(e/Zgt),r=n*h1e;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},p1e={draw(t,e){const n=ps(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},g1e={draw(t,e){const n=ps(e-Mz(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},m1e={draw(t,e){const n=ps(e),r=-n/2;t.rect(r,r,n,n)}},y1e={draw(t,e){const n=ps(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},emt=.8908130915292852,b1e=T5(O5/10)/T5(7*O5/10),tmt=T5(pT/10)*b1e,nmt=-n1e(pT/10)*b1e,v1e={draw(t,e){const n=ps(e*emt),r=tmt*n,i=nmt*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=pT*s/5,a=n1e(o),l=T5(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},YM=ps(3),x1e={draw(t,e){const n=-ps(e/(YM*3));t.moveTo(0,n*2),t.lineTo(-YM*n,-n),t.lineTo(YM*n,-n),t.closePath()}},rmt=ps(3),w1e={draw(t,e){const n=ps(e)*.6824,r=n/2,i=n*rmt/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},Jl=-.5,Zl=ps(3)/2,gL=1/ps(12),imt=(gL/2+1)*3,_1e={draw(t,e){const n=ps(e/imt),r=n/2,i=n*gL,s=r,o=n*gL+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Jl*r-Zl*i,Zl*r+Jl*i),t.lineTo(Jl*s-Zl*o,Zl*s+Jl*o),t.lineTo(Jl*a-Zl*l,Zl*a+Jl*l),t.lineTo(Jl*r+Zl*i,Jl*i-Zl*r),t.lineTo(Jl*s+Zl*o,Jl*o-Zl*s),t.lineTo(Jl*a+Zl*l,Jl*l-Zl*a),t.closePath()}},S1e={draw(t,e){const n=ps(e-Mz(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},smt=[y3,f1e,d1e,m1e,v1e,x1e,_1e],omt=[y3,g1e,S1e,w1e,c1e,y1e,p1e];function U0(){}function M5(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gT(t){this._context=t}gT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:M5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M5(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function amt(t){return new gT(t)}function A1e(t){this._context=t}A1e.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:M5(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lmt(t){return new A1e(t)}function C1e(t){this._context=t}C1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:M5(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function umt(t){return new C1e(t)}function k1e(t,e){this._basis=new gT(t),this._beta=e}k1e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const cmt=(function t(e){function n(r){return e===1?new gT(r):new k1e(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function I5(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Rz(t,e){this._context=t,this._k=(1-e)/6}Rz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:I5(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:I5(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const fmt=(function t(e){function n(r){return new Rz(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Fz(t,e){this._context=t,this._k=(1-e)/6}Fz.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:I5(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const hmt=(function t(e){function n(r){return new Fz(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Nz(t,e){this._context=t,this._k=(1-e)/6}Nz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I5(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const dmt=(function t(e){function n(r){return new Nz(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Lz(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>LZ){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>LZ){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function E1e(t,e){this._context=t,this._alpha=e}E1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Lz(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const pmt=(function t(e){function n(r){return e?new E1e(r,e):new Rz(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function D1e(t,e){this._context=t,this._alpha=e}D1e.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Lz(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gmt=(function t(e){function n(r){return e?new D1e(r,e):new Fz(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function T1e(t,e){this._context=t,this._alpha=e}T1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Lz(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const mmt=(function t(e){function n(r){return e?new T1e(r,e):new Nz(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function O1e(t){this._context=t}O1e.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ymt(t){return new O1e(t)}function PZ(t){return t<0?-1:1}function BZ(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(PZ(s)+PZ(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function $Z(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function XM(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function R5(t){this._context=t}R5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XM(this,this._t0,$Z(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,XM(this,$Z(this,n=BZ(this,t,e)),n);break;default:XM(this,this._t0,n=BZ(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function M1e(t){this._context=new I1e(t)}(M1e.prototype=Object.create(R5.prototype)).point=function(t,e){R5.prototype.point.call(this,e,t)};function I1e(t){this._context=t}I1e.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function bmt(t){return new R5(t)}function vmt(t){return new M1e(t)}function R1e(t){this._context=t}R1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=UZ(t),i=UZ(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function UZ(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function xmt(t){return new R1e(t)}function mT(t,e){this._context=t,this._t=e}mT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function wmt(t){return new mT(t,.5)}function _mt(t){return new mT(t,0)}function Smt(t){return new mT(t,1)}const E6=t=>()=>t;function Amt(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Rf(t,e,n){this.k=t,this.x=e,this.y=n}Rf.prototype={constructor:Rf,scale:function(t){return t===1?this:new Rf(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Rf(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var F1e=new Rf(1,0,0);Rf.prototype;function KM(t){t.stopImmediatePropagation()}function Fx(t){t.preventDefault(),t.stopImmediatePropagation()}function Cmt(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function kmt(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function zZ(){return this.__zoom||F1e}function Emt(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Dmt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tmt(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Omt(){var t=Cmt,e=kmt,n=Tmt,r=Emt,i=Dmt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Nit,u=aT("start","zoom","end"),c,f,h,d=500,p=150,m=0,y=10;function b(O){O.property("__zoom",zZ).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(O,R,L,B){var z=O.selection?O.selection():O;z.property("__zoom",zZ),O!==z?S(O,R,L,B):z.interrupt().each(function(){A(this,arguments).event(B).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},b.scaleBy=function(O,R,L,B){b.scaleTo(O,function(){var z=this.__zoom.k,U=typeof R=="function"?R.apply(this,arguments):R;return z*U},L,B)},b.scaleTo=function(O,R,L,B){b.transform(O,function(){var z=e.apply(this,arguments),U=this.__zoom,V=L==null?_(z):typeof L=="function"?L.apply(this,arguments):L,W=U.invert(V),H=typeof R=="function"?R.apply(this,arguments):R;return n(w(v(U,H),V,W),z,o)},L,B)},b.translateBy=function(O,R,L,B){b.transform(O,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof L=="function"?L.apply(this,arguments):L),e.apply(this,arguments),o)},null,B)},b.translateTo=function(O,R,L,B,z){b.transform(O,function(){var U=e.apply(this,arguments),V=this.__zoom,W=B==null?_(U):typeof B=="function"?B.apply(this,arguments):B;return n(F1e.translate(W[0],W[1]).scale(V.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof L=="function"?-L.apply(this,arguments):-L),U,o)},B,z)};function v(O,R){return R=Math.max(s[0],Math.min(s[1],R)),R===O.k?O:new Rf(R,O.x,O.y)}function w(O,R,L){var B=R[0]-L[0]*O.k,z=R[1]-L[1]*O.k;return B===O.x&&z===O.y?O:new Rf(O.k,B,z)}function _(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function S(O,R,L,B){O.on("start.zoom",function(){A(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(B).end()}).tween("zoom",function(){var z=this,U=arguments,V=A(z,U).event(B),W=e.apply(z,U),H=L==null?_(W):typeof L=="function"?L.apply(z,U):L,Y=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),se=z.__zoom,he=typeof R=="function"?R.apply(z,U):R,be=l(se.invert(H).concat(Y/se.k),he.invert(H).concat(Y/he.k));return function(fe){if(fe===1)fe=he;else{var me=be(fe),K=Y/me[2];fe=new Rf(K,H[0]-me[0]*K,H[1]-me[1]*K)}V.zoom(null,fe)}})}function A(O,R,L){return!L&&O.__zooming||new C(O,R)}function C(O,R){this.that=O,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(O,R),this.taps=0}C.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,R){return this.mouse&&O!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var R=Kr(this.that).datum();u.call(O,this.that,new Amt(O,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),R)}};function D(O,...R){if(!t.apply(this,arguments))return;var L=A(this,R).event(O),B=this.__zoom,z=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),U=Zu(O);if(L.wheel)(L.mouse[0][0]!==U[0]||L.mouse[0][1]!==U[1])&&(L.mouse[1]=B.invert(L.mouse[0]=U)),clearTimeout(L.wheel);else{if(B.k===z)return;L.mouse=[U,B.invert(U)],Ob(this),L.start()}Fx(O),L.wheel=setTimeout(V,p),L.zoom("mouse",n(w(v(B,z),L.mouse[0],L.mouse[1]),L.extent,o));function V(){L.wheel=null,L.end()}}function T(O,...R){if(h||!t.apply(this,arguments))return;var L=O.currentTarget,B=A(this,R,!0).event(O),z=Kr(O.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",Y,!0),U=Zu(O,L),V=O.clientX,W=O.clientY;sme(O.view),KM(O),B.mouse=[U,this.__zoom.invert(U)],Ob(this),B.start();function H(se){if(Fx(se),!B.moved){var he=se.clientX-V,be=se.clientY-W;B.moved=he*he+be*be>m}B.event(se).zoom("mouse",n(w(B.that.__zoom,B.mouse[0]=Zu(se,L),B.mouse[1]),B.extent,o))}function Y(se){z.on("mousemove.zoom mouseup.zoom",null),ome(se.view,B.moved),Fx(se),B.event(se).end()}}function M(O,...R){if(t.apply(this,arguments)){var L=this.__zoom,B=Zu(O.changedTouches?O.changedTouches[0]:O,this),z=L.invert(B),U=L.k*(O.shiftKey?.5:2),V=n(w(v(L,U),B,z),e.apply(this,R),o);Fx(O),a>0?Kr(this).transition().duration(a).call(S,V,B,O):Kr(this).call(b.transform,V,B,O)}}function I(O,...R){if(t.apply(this,arguments)){var L=O.touches,B=L.length,z=A(this,R,O.changedTouches.length===B).event(O),U,V,W,H;for(KM(O),V=0;V<B;++V)W=L[V],H=Zu(W,this),H=[H,this.__zoom.invert(H),W.identifier],z.touch0?!z.touch1&&z.touch0[2]!==H[2]&&(z.touch1=H,z.taps=0):(z.touch0=H,U=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(z.taps<2&&(f=H[0],c=setTimeout(function(){c=null},d)),Ob(this),z.start())}}function N(O,...R){if(this.__zooming){var L=A(this,R).event(O),B=O.changedTouches,z=B.length,U,V,W,H;for(Fx(O),U=0;U<z;++U)V=B[U],W=Zu(V,this),L.touch0&&L.touch0[2]===V.identifier?L.touch0[0]=W:L.touch1&&L.touch1[2]===V.identifier&&(L.touch1[0]=W);if(V=L.that.__zoom,L.touch1){var Y=L.touch0[0],se=L.touch0[1],he=L.touch1[0],be=L.touch1[1],fe=(fe=he[0]-Y[0])*fe+(fe=he[1]-Y[1])*fe,me=(me=be[0]-se[0])*me+(me=be[1]-se[1])*me;V=v(V,Math.sqrt(fe/me)),W=[(Y[0]+he[0])/2,(Y[1]+he[1])/2],H=[(se[0]+be[0])/2,(se[1]+be[1])/2]}else if(L.touch0)W=L.touch0[0],H=L.touch0[1];else return;L.zoom("touch",n(w(V,W,H),L.extent,o))}}function P(O,...R){if(this.__zooming){var L=A(this,R).event(O),B=O.changedTouches,z=B.length,U,V;for(KM(O),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),U=0;U<z;++U)V=B[U],L.touch0&&L.touch0[2]===V.identifier?delete L.touch0:L.touch1&&L.touch1[2]===V.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(V=Zu(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<y)){var W=Kr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return b.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:E6(+O),b):r},b.filter=function(O){return arguments.length?(t=typeof O=="function"?O:E6(!!O),b):t},b.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:E6(!!O),b):i},b.extent=function(O){return arguments.length?(e=typeof O=="function"?O:E6([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),b):e},b.scaleExtent=function(O){return arguments.length?(s[0]=+O[0],s[1]=+O[1],b):[s[0],s[1]]},b.translateExtent=function(O){return arguments.length?(o[0][0]=+O[0][0],o[1][0]=+O[1][0],o[0][1]=+O[0][1],o[1][1]=+O[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(O){return arguments.length?(n=O,b):n},b.duration=function(O){return arguments.length?(a=+O,b):a},b.interpolate=function(O){return arguments.length?(l=O,b):l},b.on=function(){var O=u.on.apply(u,arguments);return O===u?b:O},b.clickDistance=function(O){return arguments.length?(m=(O=+O)*O,b):Math.sqrt(m)},b.tapDistance=function(O){return arguments.length?(y=+O,b):y},b}function Gs(t){return t!=null&&!Number.isNaN(t)}function Ru(t,e){return+Gs(e)-+Gs(t)||fr(t,e)}function F5(t,e){return+Gs(e)-+Gs(t)||Qm(t,e)}function Pz(t){return t!=null&&`${t}`!=""}function N5(t){return isFinite(t)?t:NaN}function Rd(t){return t>0&&isFinite(t)?t:NaN}function yT(t){return t<0&&isFinite(t)?t:NaN}function Mmt(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${Imt(t.getUTCFullYear())}-${sd(t.getUTCMonth()+1,2)}-${sd(t.getUTCDate(),2)}${n||r||i||s?`T${sd(n,2)}:${sd(r,2)}${i||s?`:${sd(i,2)}${s?`.${sd(s,3)}`:""}`:""}Z`:""}`}function Imt(t){return t<0?`-${sd(-t,6)}`:t>9999?`+${sd(t,6)}`:sd(t,4)}function sd(t,e){return`${t}`.padStart(e,"0")}const Rmt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function N1e(t,e){return Rmt.test(t+="")?new Date(t):typeof e=="function"?e(t):e}function Dv(t){if(t==null)return;const e=t[0],n=t[t.length-1];return Qm(e,n)}const Xy=1e3,Xp=Xy*60,Kp=Xp*60,ih=Kp*24,af=ih*7,Em=ih*30,Tp=ih*365,QM=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Xy],["5 seconds",5*Xy],["15 seconds",15*Xy],["30 seconds",30*Xy],["minute",Xp],["5 minutes",5*Xp],["15 minutes",15*Xp],["30 minutes",30*Xp],["hour",Kp],["3 hours",3*Kp],["6 hours",6*Kp],["12 hours",12*Kp],["day",ih],["2 days",2*ih],["week",af],["2 weeks",2*af],["month",Em],["3 months",3*Em],["6 months",6*Em],["year",Tp],["2 years",2*Tp],["5 years",5*Tp],["10 years",10*Tp],["20 years",20*Tp],["50 years",50*Tp],["100 years",100*Tp]],Bz=new Map([["second",Xy],["minute",Xp],["hour",Kp],["day",ih],["monday",af],["tuesday",af],["wednesday",af],["thursday",af],["friday",af],["saturday",af],["sunday",af],["week",af],["month",Em],["year",Tp]]),L1e=new Map([["second",ac],["minute",CS],["hour",ES],["day",S1],["monday",s3],["tuesday",epe],["wednesday",tpe],["thursday",t1],["friday",npe],["saturday",rpe],["sunday",gv],["week",gv],["month",TS],["year",vc]]),$z=new Map([["second",ac],["minute",kS],["hour",DS],["day",qD],["monday",o3],["tuesday",ipe],["wednesday",spe],["thursday",n1],["friday",ope],["saturday",ape],["sunday",mv],["week",mv],["month",OS],["year",xc]]),jS=Symbol("intervalDuration"),bT=Symbol("intervalType");for(const[t,e]of L1e)e[jS]=Bz.get(t),e[bT]="time";for(const[t,e]of $z)e[jS]=Bz.get(t),e[bT]="utc";const vw=[["year",xc,"utc"],["month",OS,"utc"],["day",qD,"utc",6*Em],["hour",DS,"utc",3*ih],["minute",kS,"utc",6*Kp],["second",ac,"utc",30*Xp]],VC=[["year",vc,"time"],["month",TS,"time"],["day",S1,"time",6*Em],["hour",ES,"time",3*ih],["minute",CS,"time",6*Kp],["second",ac,"time",30*Xp]],Fmt=[vw[0],VC[0],vw[1],VC[1],vw[2],VC[2],...vw.slice(3)];function Uz(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(e);switch(r&&(e=e.slice(r[0].length),n=+r[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let i=$z.get(e);if(!i)throw new Error(`unknown interval: ${t}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function zz(t){return P1e(Uz(t),"time")}function vT(t){return P1e(Uz(t),"utc")}function P1e([t,e],n){let r=(n==="time"?L1e:$z).get(t);return e>1&&(r=r.every(e),r[jS]=Bz.get(t)*e,r[bT]=n),r}function jZ(t,e){if(!(e>1))return;const n=t[jS];if(!QM.some(([,i])=>i===n)||n%ih===0&&ih<n&&n<Em)return;const[r]=QM[RD(([,i])=>Math.log(i)).center(QM,Math.log(n*e))];return(t[bT]==="time"?zz:vT)(r)}function qZ(t,e,n){const r=e==="time"?XU:MS;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Nmt(n);switch(t){case"millisecond":return dy(r(".%L"),r(":%M:%S"),i);case"second":return dy(r(":%S"),r("%-I:%M"),i);case"minute":return dy(r("%-I:%M"),r("%p"),i);case"hour":return dy(r("%-I %p"),r("%b %-d"),i);case"day":return dy(r("%-d"),r("%b"),i);case"month":return dy(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Nmt(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function Lmt(t){return t==="time"?VC:t==="utc"?vw:Fmt}function Pmt(t,e,n){const r=Ci(Jrt(e,(i,s)=>Math.abs(s-i)));if(r<1e3)return qZ("millisecond","utc",n);for(const[i,s,o,a]of Lmt(t)){if(r>a||i==="hour"&&!r)break;if(e.every(l=>s.floor(l)>=l))return qZ(i,o,n)}}function dy(t,e,n){return(r,i,s)=>{const o=t(r,i),a=e(r,i),l=i-Dv(s);return i!==l&&s[l]!==void 0&&a===e(s[l],l)?o:n(o,a)}}const xT=Object.getPrototypeOf(Uint8Array),Bmt=Object.prototype.toString;function sp(t){return t instanceof Array||t instanceof xT}function B1e(t){return t instanceof xT&&!$mt(t)}function $1e(t){return t?.prototype instanceof xT&&!Umt(t)}function $mt(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function Umt(t){return t===BigInt64Array||t===BigUint64Array}const U1e=Symbol("reindex");function wn(t,e,n){const r=typeof e;return r==="string"?eye(t)?jz(t.getChild(e),n):VZ(t,z1e(e),n):r==="function"?VZ(t,e,n):r==="number"||e instanceof Date||r==="boolean"?Rr(t,Vs(e),n):typeof e?.transform=="function"?mL(e.transform(t),n):zmt(mL(e,n),t?.[U1e])}function zmt(t,e){return t!=null&&e?_T(t,e):t}function VZ(t,e,n){return Rr(t,$1e(n)?(r,i)=>Wz(e(r,i)):e,n)}function mL(t,e){return e===void 0?lg(t):tye(t)?jz(t,e):t instanceof e?t:e.from(t,$1e(e)&&!B1e(t)?Wz:void 0)}function jz(t,e){return t==null?t:(e===void 0||e===Array)&&t1t(t.type)?j1e(WZ(t)):mL(WZ(t),e)}function WZ(t){return t.nullCount?t.toJSON():t.toArray()}const Yw=[null],z1e=t=>e=>{const n=e[t];return n===void 0&&e.type==="Feature"?e.properties?.[t]:n},Zi={transform:op},xt={transform:t=>t},qz=()=>1,jmt=()=>!0,Us=t=>t==null?t:`${t}`,Zr=t=>t==null?t:+t,wT=t=>t?t[0]:void 0,b3=t=>t?t[1]:void 0,qmt=t=>t?t[2]:void 0,Vs=t=>()=>t;function Vz(t){const e=+`${t}`.slice(1)/100;return(n,r)=>B0(n,e,r)}function La(t){return B1e(t)?t:Rr(t,Wz,Float64Array)}function Wz(t){return t==null?NaN:Number(t)}function j1e(t){return Rr(t,q1e)}function q1e(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?N1e(t):t==null||isNaN(t=Number(t))?void 0:new Date(t)}function sa(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:qS(t)?[void 0,t]:[t,void 0]}function zi(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function V1e(t,e,n){if(t!=null)return zl(t,e,n)}function zl(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Tv(t){return eye(t)?t:lg(t)}function lg(t){if(t==null||sp(t))return t;if(tye(t))return jz(t);if(W1e(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function W1e(t){switch(t?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function Rr(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function v3(t,e=Array){return t instanceof e?t.slice():e.from(t)}function H1e({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function G1e({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function D2(t){return H1e(t)||G1e(t)||t.interval!==void 0}function jl(t){return t?.toString===Bmt}function Dm(t){return jl(t)&&(t.type!==void 0||t.domain!==void 0)}function ff(t){return jl(t)&&typeof t.transform!="function"}function z0(t){return ff(t)&&t.value===void 0&&t.channel===void 0}function Y1e(t,e,n,r=xt){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function $c(t,e){return t===void 0&&e===void 0?[wT,b3]:[t,e]}function ug({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=sa(e)),t===void 0&&([t]=sa(n)),t}function x3(t){return sp(t)?t.length:t?.numRows}function op(t){const e=x3(t),n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function _T(t,e){return sp(t)?Rr(e,n=>t[n],t.constructor):Rr(e,n=>t.at(n))}function Hz(t){return t.length===1?(e,n)=>t(_T(n,e)):t}function Tm(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function Ad(t){return t!==null&&typeof t=="object"?t.valueOf():t}function X1e(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function El(t){let e;return[{transform:()=>e,label:Sh(t)},n=>e=n]}function ya(t){return t==null?[t]:El(t)}function Sh(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function L5(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return oa(r)||oa(i)?Rr(r,(s,o)=>new Date((+r[o]+ +i[o])/2)):Rr(r,(s,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:t.label}}function P5(t,e){const n=K1e(e?.interval,e?.type);return n?Rr(t,n):t}function K1e(t,e){const n=ST(t,e);return n&&(r=>Gs(r)?n.floor(r):r)}function ST(t,e){if(t!=null){if(typeof t=="number")return Q1e(t);if(typeof t=="string")return(e==="time"?zz:vT)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function Q1e(t){t=+t,0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:n=>Math.floor(n*e)/e,offset:(n,r=1)=>(n*e+Math.floor(r))/e,range:(n,r)=>Cl(Math.ceil(n*e),r*e).map(i=>i/e)}:{floor:n=>Math.floor(n/e)*e,offset:(n,r=1)=>n+e*Math.floor(r),range:(n,r)=>Cl(Math.ceil(n/e),r/e).map(i=>i*e)}}function T2(t,e){if(t=ST(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function Vmt(t,e){if(t=T2(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function Wmt(t){return Ky(t)&&typeof t?.floor=="function"&&t.floor()instanceof Date}function Ky(t){return typeof t?.range=="function"}function O2(t){return t===void 0||ff(t)?t:{value:t}}function Hmt(t){return t==null?null:{transform:e=>wn(e,t,Float64Array),label:Sh(t)}}function Gmt(t){if(!ap(t))return!1;for(const e of t)if(e!=null)return typeof e=="object"&&"0"in e&&"1"in e}function ap(t){return t&&typeof t[Symbol.iterator]=="function"}function J1e(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Di(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function oa(t){for(const e of t)if(e!=null)return e instanceof Date}function Ymt(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&N1e(e)}function Xmt(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function Qy(t){for(const e of t)if(e!=null)return typeof e=="number"}function JM(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const Kmt=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function qS(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||Kmt.has(t))}function Qmt(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function ai(t){return t==null||Ov(t)}function Ov(t){return/^\s*none\s*$/i.test(t)}function Jmt(t){return/^\s*round\s*$/i.test(t)}function yL(t,e){return V1e(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function VS(t="middle"){return yL(t,"frameAnchor")}function Zmt(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const s=r[i];n===t?n={...n,[i]:s}:n[i]=s}return n}function e1t(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function Gz(t){return ap(t)?e1t(t):t}function Z1e(t){return t===!0?t="frame":t===!1?t=null:!W1e(t)&&t!=null&&(t=zl(t,"clip",["frame","sphere"]),t==="sphere"&&(t={type:"Sphere"})),t}function eye(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function tye(t){return t&&typeof t.toArray=="function"&&t.type}function t1t(t){return t&&(t.typeId===8||t.typeId===10)&&t.unit===1}const Ff=Symbol("position"),lp=Symbol("color"),WS=Symbol("radius"),HS=Symbol("length"),GS=Symbol("opacity"),AT=Symbol("symbol"),nye=Symbol("projection"),wi=new Map([["x",Ff],["y",Ff],["fx",Ff],["fy",Ff],["r",WS],["color",lp],["opacity",GS],["symbol",AT],["length",HS],["projection",nye]]);function n1t(t){return t===Ff||t===nye}function r1t(t){return t===Ff||t===WS||t===HS||t===GS}const rye=Math.sqrt(3),iye=2/rye,i1t={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*iye,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},Yz=new Map([["asterisk",c1e],["circle",y3],["cross",f1e],["diamond",d1e],["diamond2",p1e],["hexagon",i1t],["plus",g1e],["square",m1e],["square2",y1e],["star",v1e],["times",S1e],["triangle",x1e],["triangle2",w1e],["wye",_1e]]);function Xz(t){return t&&typeof t.draw=="function"}function s1t(t){return Xz(t)?!0:typeof t!="string"?!1:Yz.has(t.toLowerCase())}function Kz(t){if(t==null||Xz(t))return t;const e=Yz.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function o1t(t){if(t==null||Xz(t))return[void 0,t];if(typeof t=="string"){const e=Yz.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Uc({filter:t,sort:e,reverse:n,transform:r,initializer:i,...s}={},o){if(r===void 0&&(t!=null&&(r=Qz(t)),e!=null&&!z0(e)&&(r=ZM(r,Zz(e))),n&&(r=ZM(r,Jz))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(e===null||z0(e))&&{sort:e},transform:ZM(r,o)}}function ko({filter:t,sort:e,reverse:n,initializer:r,...i}={},s){return r===void 0&&(t!=null&&(r=Qz(t)),e!=null&&!z0(e)&&(r=eI(r,Zz(e))),n&&(r=eI(r,Jz))),{...i,...(e===null||z0(e))&&{sort:e},initializer:eI(r,s)}}function ZM(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,Tv(n),r,i)}}function eI(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...s){let o,a,l,u,c,f;return{data:a=n,facets:l=r,channels:o}=t.call(this,n,r,i,...s),{data:c=a,facets:f=l,channels:u}=e.call(this,a,l,{...i,...o},...s),{data:c,facets:f,channels:{...o,...u}}}}function CT(t,e){return(t.initializer!=null?ko:Uc)(t,e)}function a1t(t,e){return CT(e,Qz(t))}function Qz(t){return(e,n)=>{const r=wn(e,t);return{data:e,facets:n.map(i=>i.filter(s=>r[s]))}}}function l1t({sort:t,...e}={}){return{...CT(e,Jz),sort:z0(t)?t:null}}function Jz(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function u1t({seed:t,sort:e,...n}={}){return{...CT(n,oye(t==null?Math.random:Oz(t))),sort:z0(e)?e:null}}function sye(t,{sort:e,...n}={}){return{...(ff(t)&&t.channel!==void 0?ko:CT)(n,Zz(t)),sort:z0(e)?e:null}}function Zz(t){return(typeof t=="function"&&t.length!==1?c1t:oye)(t)}function c1t(t){return(e,n)=>{const r=sp(e)?(i,s)=>t(e[i],e[s]):(i,s)=>t(e.get(i),e.get(s));return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function oye(t){let e,n;({channel:e,value:t,order:n}={...O2(t)});const r=e?.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?F5:Ru),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ru;break;case"descending":n=F5;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,o)=>{let a;if(e===void 0)a=wn(i,t);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[e],!a)return{};a=a.value}const l=(u,c)=>n(a[u],a[c]);return{data:i,facets:s.map(u=>u.slice().sort(l))}}}function ej(t,e){return kT(null,null,t,e)}function w3(t={y:"count"},e={}){const{x:n=xt}=e;if(n==null)throw new Error("missing channel: x");return kT(n,null,t,e)}function _3(t={x:"count"},e={}){const{y:n=xt}=e;if(n==null)throw new Error("missing channel: y");return kT(null,n,t,e)}function tj(t={fill:"count"},e={}){let{x:n,y:r}=e;if([n,r]=$c(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return kT(n,r,t,e)}function kT(t,e,{data:n=sj,filter:r,sort:i,reverse:s,...o}={},a={}){o=lye(o,a),n=fye(n,xt),i=i==null?void 0:uye("sort",i,a),r=r==null?void 0:cye("filter",r,a);const[l,u]=ya(t),[c,f]=ya(e),{z:h,fill:d,stroke:p,x1:m,x2:y,y1:b,y2:v,...w}=a,[_,S]=ya(h),[A]=sa(d),[C]=sa(p),[D,T]=ya(A),[M,I]=ya(C);return{..."z"in a&&{z:_||h},..."fill"in a&&{fill:D||d},..."stroke"in a&&{stroke:M||p},...Uc(w,(N,P,O)=>{const R=P5(wn(N,t),O?.x),L=P5(wn(N,e),O?.y),B=wn(N,h),z=wn(N,A),U=wn(N,C),V=ij(o,{z:B,fill:z,stroke:U}),W=[],H=[],Y=R&&u([]),se=L&&f([]),he=B&&S([]),be=z&&T([]),fe=U&&I([]);let me=0;for(const K of o)K.initialize(N);i&&i.initialize(N),r&&r.initialize(N);for(const K of P){const de=[];for(const ge of o)ge.scope("facet",K);i&&i.scope("facet",K),r&&r.scope("facet",K);for(const[ge,oe]of Om(K,V))for(const[Fe,Ce]of Om(oe,L))for(const[je,Ge]of Om(Ce,R)){const Ee={data:N};if(R&&(Ee.x=je),L&&(Ee.y=Fe),V&&(Ee.z=ge),!(r&&!r.reduce(Ge,Ee))){de.push(me++),H.push(n.reduceIndex(Ge,N,Ee)),R&&Y.push(je),L&&se.push(Fe),B&&he.push(V===B?ge:B[Ge[0]]),z&&be.push(V===z?ge:z[Ge[0]]),U&&fe.push(V===U?ge:U[Ge[0]]);for(const rt of o)rt.reduce(Ge,Ee);i&&i.reduce(Ge,Ee)}}W.push(de)}return hye(W,i,s),{data:H,facets:W}}),...!Qp(o,"x")&&(l?{x:l}:{x1:m,x2:y}),...!Qp(o,"y")&&(c?{y:c}:{y1:b,y2:v}),...Object.fromEntries(o.map(({name:N,output:P})=>[N,P]))}}function Qp(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function aye(t,e,n=nj){const r=Object.entries(t);return e.title!=null&&t.title===void 0&&r.push(["title",m1t]),e.href!=null&&t.href===void 0&&r.push(["href",oj]),r.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?f1t(i):n(i,s,e))}function nj(t,e,n,r=rj){let i;jl(e)&&"reduce"in e&&(i=e.scale,e=e.reduce);const s=r(t,e,n),[o,a]=El(s.label);let l;return{name:t,output:i===void 0?o:{value:o,scale:i},initialize(u){s.initialize(u),l=a([])},scope(u,c){s.scope(u,c)},reduce(u,c){l.push(s.reduce(u,c))}}}function f1t(t){return{name:t,initialize(){},scope(){},reduce(){}}}function rj(t,e,n,r=ET){const i=X1e(t,n),s=r(e,i);let o,a;return{label:Sh(s===B5?null:i,s.label),initialize(l){o=i===void 0?l:wn(l,i),s.scope==="data"&&(a=s.reduceIndex(op(l),o))},scope(l,u){s.scope===l&&(a=s.reduceIndex(u,o))},reduce(l,u){return s.scope==null?s.reduceIndex(l,o,u):s.reduceIndex(l,o,a,u)}}}function Om(t,e){return e?ng(t,n=>e[n]):[[,t]]}function ET(t,e,n=h1t){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&jl(t))return p1t(t);if(typeof t=="function")return g1t(t);if(/^p\d{2}$/i.test(t))return Xh(Vz(t));switch(`${t}`.toLowerCase()){case"first":return oj;case"last":return y1t;case"identity":return sj;case"count":return B5;case"distinct":return b1t;case"sum":return e==null?B5:v1t;case"proportion":return GZ(e,"data");case"proportion-facet":return GZ(e,"facet");case"deviation":return Xh(xS);case"min":return Xh(ui);case"min-index":return Xh(Yrt);case"max":return Xh(Ci);case"max-index":return Xh(Grt);case"mean":return HZ(LD);case"median":return HZ(n3);case"variance":return Xh(FU);case"mode":return Xh(kde)}return n(t)}function h1t(t){throw new Error(`invalid reduce: ${t}`)}function lye(t,e){return aye(t,e,uye)}function uye(t,e,n){return nj(t,e,n,cye)}function cye(t,e,n){return rj(t,e,n,fye)}function fye(t,e){return ET(t,e,d1t)}function d1t(t){switch(`${t}`.toLowerCase()){case"x":return x1t;case"y":return w1t;case"z":return dye}throw new Error(`invalid group reduce: ${t}`)}function ij(t,e){for(const n in e){const r=e[n];if(r!==void 0&&!t.some(i=>i.name===n))return r}}function hye(t,e,n){if(e){const r=e.output.transform(),i=(s,o)=>Ru(r[s],r[o]);t.forEach(s=>s.sort(i))}n&&t.forEach(r=>r.reverse())}function p1t(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function g1t(t){return{reduceIndex(e,n,r){return t(_T(n,e),r)}}}function Xh(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function HZ(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return oa(n)?new Date(r):r}}}const sj={reduceIndex(t,e){return _T(e,t)}},oj={reduceIndex(t,e){return e[t[0]]}},m1t={reduceIndex(t,e){const r=zE(Sb(t,s=>s.length,s=>e[s]),b3),i=r.slice(-5).reverse();if(i.length<r.length){const s=r.slice(0,-4);i[4]=[`â¦ ${s.length.toLocaleString("en-US")} more`,yc(s,b3)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},y1t={reduceIndex(t,e){return e[t[t.length-1]]}},B5={label:"Frequency",reduceIndex(t){return t.length}},b1t={label:"Distinct",reduceIndex(t,e){const n=new y2;for(const r of t)n.add(e[r]);return n.size}},v1t=Xh(yc);function GZ(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>yc(n,s=>r[s])/i}}const x1t={reduceIndex(t,e,{x:n}){return n}},w1t={reduceIndex(t,e,{y:n}){return n}},dye={reduceIndex(t,e,{z:n}){return n}};function _1t(t){if(typeof t!="function")throw new Error(`invalid test function: ${t}`);return{reduceIndex(e,n,{data:r}){return n[e.find(sp(r)?i=>t(r[i],i,r):i=>t(r.get(i),i,r))]}}}function S3(t,{scale:e,type:n,value:r,filter:i,hint:s,label:o=Sh(r)},a){return s===void 0&&typeof r?.transform=="function"&&(s=r.hint),gye(a,{scale:e,type:n,value:wn(t,r),label:o,filter:i,hint:s})}function pye(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,S3(e,r,n)]))}function DT(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:s}])=>{const o=i==null?null:e[i];return[r,o==null?s:Rr(s,o)]}));return n.channels=t,n}function gye(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&JM(r,qS)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&JM(r,Qmt)?null:"opacity",e.defaultScale="opacity";break;case"symbol":n!==!0&&JM(r,s1t)?(e.scale=null,e.value=Rr(r,Kz)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=wi.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!wi.has(n))throw new Error(`unknown scale: ${n}`);return e}function S1t(t,e,n,r,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const u in i){if(!wi.has(u))continue;let{value:c,order:f=s,reverse:h=o,reduce:d=a,limit:p=l}=O2(i[u]);const m=c?.startsWith("-");if(m&&(c=c.slice(1)),f=f===void 0?m!==(c==="width"||c==="height")?yye:mye:k1t(f),d==null||d===!1)continue;const y=u==="fx"||u==="fy"?C1t(e,r[u]):A1t(n,u);if(!y)throw new Error(`missing channel for scale: ${u}`);const b=y.value,[v=0,w=1/0]=ap(p)?p:p<0?[p]:[0,p];if(c==null)y.domain=()=>{let _=Array.from(new y2(b));return h&&(_=_.reverse()),(v!==0||w!==1/0)&&(_=_.slice(v,w)),_};else{const _=c==="data"?t:c==="height"?YZ(n,"y1","y2"):c==="width"?YZ(n,"x1","x2"):bL(n,c,c==="y"?"y2":c==="x"?"x2":void 0),S=ET(d===!0?"max":d,_);y.domain=()=>{let A=jrt(op(b),C=>S.reduceIndex(C,_),C=>b[C]);return f&&A.sort(f),h&&A.reverse(),(v!==0||w!==1/0)&&(A=A.slice(v,w)),A.map(wT)}}}}function A1t(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function C1t(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let s=0;s<n.length;++s){const o=r[n[s][0]];for(const a of t[s])i[a]=o}return e}function YZ(t,e,n){const r=bL(t,e),i=bL(t,n);return Rr(i,(s,o)=>Math.abs(s-r[o]),Float64Array)}function bL(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function k1t(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return mye;case"descending":return yye}throw new Error(`invalid order: ${t}`)}function mye([t,e],[n,r]){return Ru(e,r)||Ru(t,n)}function yye([t,e],[n,r]){return F5(e,r)||Ru(t,n)}function vL(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const bye=new Map([["accent",lot],["category10",aot],["dark2",uot],["observable10",cot],["paired",fot],["pastel1",hot],["pastel2",dot],["set1",pot],["set2",got],["set3",mot],["tableau10",yot]]);function E1t(t){return t!=null&&bye.has(`${t}`.toLowerCase())}const XZ=new Map([...bye,["brbg",qh(bpe,vpe)],["prgn",qh(xpe,wpe)],["piyg",qh(_pe,Spe)],["puor",qh(Ape,Cpe)],["rdbu",qh(SN,YE)],["rdgy",qh(kpe,Epe)],["rdylbu",qh(AN,XE)],["rdylgn",qh(Dpe,Tpe)],["spectral",qh(Ope,Mpe)],["burd",KZ(SN,YE)],["buylrd",KZ(AN,XE)],["blues",ys(e0e,t0e)],["greens",ys(n0e,r0e)],["greys",ys(i0e,s0e)],["oranges",ys(c0e,f0e)],["purples",ys(o0e,a0e)],["reds",ys(l0e,u0e)],["turbo",Vh(ZU)],["viridis",Vh(b0e)],["magma",Vh(v0e)],["inferno",Vh(GD)],["plasma",Vh(x0e)],["cividis",Vh(h0e)],["cubehelix",Vh(d0e)],["warm",Vh(p0e)],["cool",Vh(g0e)],["bugn",ys(Ipe,Rpe)],["bupu",ys(Fpe,Npe)],["gnbu",ys(Lpe,Ppe)],["orrd",ys(Bpe,$pe)],["pubu",ys(zpe,jpe)],["pubugn",ys(Upe,QU)],["purd",ys(qpe,Vpe)],["rdpu",ys(Wpe,Hpe)],["ylgn",ys(Ype,Xpe)],["ylgnbu",ys(Gpe,JU)],["ylorbr",ys(Kpe,Qpe)],["ylorrd",ys(Jpe,Zpe)],["rainbow",QZ(m0e)],["sinebow",QZ(y0e)]]);function ys(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?bc(e,n):t[n])}function qh(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?bc(e,n):t[n])}function KZ(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?bc(r=>e(1-r),n):t[n].slice().reverse())}function Vh(t){return({length:e})=>bc(t,Math.max(2,Math.floor(e)))}function QZ(t){return({length:e})=>bc(t,Math.floor(e)+1).slice(0,-1)}function vye(t){const e=`${t}`.toLowerCase();if(!XZ.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return XZ.get(e)}function TT(t,e){const n=vye(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function D1t(t,e="greys"){const n=new Set,[r,i]=TT(e,2);for(const s of t)if(s!=null)if(s===!0)n.add(i);else if(s===!1)n.add(r);else return;return[...n]}const JZ=new Map([["brbg",vpe],["prgn",wpe],["piyg",Spe],["puor",Cpe],["rdbu",YE],["rdgy",Epe],["rdylbu",XE],["rdylgn",Tpe],["spectral",Mpe],["burd",t=>YE(1-t)],["buylrd",t=>XE(1-t)],["blues",t0e],["greens",r0e],["greys",s0e],["purples",a0e],["reds",u0e],["oranges",f0e],["turbo",ZU],["viridis",b0e],["magma",v0e],["inferno",GD],["plasma",x0e],["cividis",h0e],["cubehelix",d0e],["warm",p0e],["cool",g0e],["bugn",Rpe],["bupu",Npe],["gnbu",Ppe],["orrd",$pe],["pubugn",QU],["pubu",jpe],["purd",Vpe],["rdpu",Hpe],["ylgnbu",JU],["ylgn",Xpe],["ylorbr",Qpe],["ylorrd",Zpe],["rainbow",m0e],["sinebow",y0e]]);function aj(t){const e=`${t}`.toLowerCase();if(!JZ.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return JZ.get(e)}const T1t=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function O1t(t){return t!=null&&T1t.has(`${t}`.toLowerCase())}const xye=t=>e=>t(1-e),tI=[0,1],ZZ=new Map([["number",ro],["rgb",e1],["hsl",Pit],["hcl",Uit],["lab",Bit]]);function wye(t){const e=`${t}`.toLowerCase();if(!ZZ.has(e))throw new Error(`unknown interpolator: ${e}`);return ZZ.get(e)}function YS(t,e,n,{type:r,nice:i,clamp:s,zero:o,domain:a=Sye(t,n),unknown:l,round:u,scheme:c,interval:f,range:h=wi.get(t)===WS?z1t(n,a):wi.get(t)===HS?j1t(n,a):wi.get(t)===GS?tI:void 0,interpolate:d=wi.get(t)===lp?c==null&&h!==void 0?e1:aj(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):u?WU:ro,reverse:p}){if(a=eee(a),f=T2(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=wye(d)),p=!!p,h!==void 0){const m=a.length,y=(h=eee(h)).length;if(m!==y){if(d.length===1)throw new Error("invalid piecewise interpolator");d=UD(d,h),h=void 0}}if(d.length===1?(p&&(d=xye(d),p=!1),h===void 0&&(h=Float64Array.from(a,(m,y)=>y/(a.length-1)),h.length===2&&(h=tI)),e.interpolate((h===tI?Vs:uj)(d))):e.interpolate(d),o){const[m,y]=Qi(a);(m>0||y<0)&&(a=v3(a),(Dv(a)||1)===Math.sign(m)?a[0]=0:a[a.length-1]=0)}return p&&(a=qE(a)),e.domain(a).unknown(l),i&&(e.nice(M1t(i,r)),a=e.domain()),h!==void 0&&e.range(h),s&&e.clamp(s),{type:r,domain:a,range:h,scale:e,interpolate:d,interval:f}}function eee(t){return t=lg(t),t.length>=2?t:[t[0],t[0]]}function M1t(t,e){return t===!0?void 0:typeof t=="number"?t:Vmt(t,e)}function I1t(t,e,n){return YS(t,ep(),e,n)}function R1t(t,e,n){return _ye(t,e,{...n,exponent:.5})}function _ye(t,e,{exponent:n=1,...r}){return YS(t,Qde().exponent(n),e,{...r,type:"pow"})}function F1t(t,e,{base:n=10,domain:r=q1t(e),...i}){return YS(t,pv().base(n),e,{...i,domain:r})}function N1t(t,e,{constant:n=1,...r}){return YS(t,GU().constant(n),e,r)}function L1t(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:s="rdylbu",domain:o=V1t(e),unknown:a,interpolate:l,reverse:u}){return n===void 0&&(n=l!==void 0?bc(l,i):wi.get(t)===lp?TT(s,i):void 0),o.length>0&&(o=Jde(o,n===void 0?{length:i}:n).quantiles()),lj(t,e,{domain:o,range:n,reverse:u,unknown:a})}function P1t(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:s=Sye(t,e),unknown:o,interpolate:a,reverse:l}){const[u,c]=Qi(s);let f;return n===void 0?(f=P0(u,c,r),f[0]<=u&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=a!==void 0?bc(a,r):wi.get(t)===lp?TT(i,r):void 0):(f=bc(ro(u,c),r+1).slice(1,-1),u instanceof Date&&(f=f.map(h=>new Date(h)))),Dv(lg(s))<0&&f.reverse(),lj(t,e,{domain:f,range:n,reverse:l,unknown:o})}function lj(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?bc(s,n.length+1):wi.get(t)===lp?TT(i,n.length+1):void 0,reverse:a}){n=lg(n);const l=Dv(n);if(!isNaN(l)&&!B1t(n,l))throw new Error(`the ${t} scale has a non-monotonic domain`);return a&&(o=qE(o)),{type:"threshold",scale:Zde(l<0?qE(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function B1t(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const s=Qm(i,i=t[n]);if(s!==0&&s!==e)return!1}return!0}function $1t(t){return{type:"identity",scale:r1t(wi.get(t))?Hde():e=>e}}function A3(t,e=N5){return t.length?[ui(t,({value:n})=>n===void 0?n:ui(n,e)),Ci(t,({value:n})=>n===void 0?n:Ci(n,e))]:[0,1]}function Sye(t,e){const n=wi.get(t);return(n===WS||n===GS||n===HS?U1t:A3)(e)}function U1t(t){return[0,t.length?Ci(t,({value:e})=>e===void 0?e:Ci(e,N5)):1]}function z1t(t,e){const n=t.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=B0(t,.5,({value:o})=>o===void 0?NaN:B0(o,.25,Rd)),i=e.map(o=>3*Math.sqrt(o/r)),s=30/Ci(i);return s<1?i.map(o=>o*s):i}function j1t(t,e){const n=n3(t,({value:s})=>s===void 0?NaN:n3(s,Math.abs)),r=e.map(s=>12*s/n),i=60/Ci(r);return i<1?r.map(s=>s*i):r}function q1t(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return A3(t,Rd);if(n<0)return A3(t,yT)}return[1,10]}function V1t(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function uj(t){return(e,n)=>r=>t(e+r*(n-e))}let xL=0,wL;function W1t(){const t=xL;return xL=0,wL=void 0,t}function Fd(t){t!==wL&&(wL=t,console.warn(t),++xL)}function OT(t,e,n,r,{type:i,nice:s,clamp:o,domain:a=A3(r),unknown:l,pivot:u=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=wi.get(t)===lp?c==null&&f!==void 0?e1:aj(c!==void 0?c:"rdbu"):ro,reverse:p}){u=+u,a=lg(a);let[m,y]=a;if(a.length>2&&Fd(`Warning: the diverging ${t} scale domain contains extra elements.`),Qm(m,y)<0&&([m,y]=[y,m],p=!p),m=Math.min(m,u),y=Math.max(y,u),typeof d!="function"&&(d=wye(d)),f!==void 0&&(d=d.length===1?uj(d)(...f):UD(d,f)),p&&(d=xye(d)),h){const b=n.apply(u),v=b-n.apply(m),w=n.apply(y)-b;v<w?m=n.invert(b-w):v>w&&(y=n.invert(b+v))}return e.domain([m,u,y]).unknown(l).interpolator(d),o&&e.clamp(o),s&&e.nice(s),{type:i,domain:[m,y],pivot:u,interpolate:d,scale:e}}function H1t(t,e,n){return OT(t,ppe(),K1t,e,n)}function G1t(t,e,n){return Aye(t,e,{...n,exponent:.5})}function Aye(t,e,{exponent:n=1,...r}){return OT(t,ype().exponent(n=+n),Z1t(n),e,{...r,type:"diverging-pow"})}function Y1t(t,e,{base:n=10,pivot:r=1,domain:i=A3(e,r<0?yT:Rd),...s}){return OT(t,gpe().base(n=+n),Q1t,e,{domain:i,pivot:r,...s})}function X1t(t,e,{constant:n=1,...r}){return OT(t,mpe().constant(n=+n),eyt(n),e,r)}const K1t={apply(t){return t},invert(t){return t}},Q1t={apply:Math.log,invert:Math.exp},J1t={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function Z1t(t){return t===.5?J1t:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function eyt(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Cye(t,e,n,r){return YS(t,e,n,r)}function tyt(t,e,n){return Cye(t,sot(),e,n)}function nyt(t,e,n){return Cye(t,oot(),e,n)}const XS=Symbol("ordinal");function kye(t,e,n,{type:r,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=T2(i,r),s===void 0&&(s=Dye(n,i,t)),(r==="categorical"||r===XS)&&(r="ordinal"),a&&(s=qE(s)),s=e.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),e.range(o)),{type:r,domain:s,range:o,scale:e,hint:l,interval:i}}function ryt(t,e,{type:n,interval:r,domain:i,range:s,scheme:o,unknown:a,...l}){r=T2(r,n),i===void 0&&(i=Dye(e,r,t));let u;if(wi.get(t)===AT)u=oyt(e),s=s===void 0?ayt(u):Rr(s,Kz);else if(wi.get(t)===lp&&(s===void 0&&(n==="ordinal"||n===XS)&&(s=D1t(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(s!==void 0){const c=aj(o),f=s[0],h=s[1]-s[0];s=({length:d})=>bc(p=>c(f+h*p),d)}else s=vye(o);if(a===mN)throw new Error(`implicit unknown on ${t} scale is not supported`);return kye(t,UU().unknown(a),e,{...l,type:n,domain:i,range:s,hint:u})}function iyt(t,e,{align:n=.5,padding:r=.5,...i}){return Eye(tit().align(n).padding(r),e,i,t)}function syt(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:s=t==="fx"||t==="fy"?0:r,...o}){return Eye(wS().align(n).paddingInner(i).paddingOuter(s),e,o,t)}function Eye(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=kye(r,t,e,n),t.round=i,t}function Dye(t,e,n){const r=new y2;for(const{value:i,domain:s}of t){if(s!==void 0)return s();if(i!==void 0)for(const o of i)r.add(o)}if(e!==void 0){const[i,s]=Qi(r).map(e.floor,e);return e.range(i,e.offset(s))}if(r.size>1e4&&wi.get(n)===Ff)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return zE(r,Ru)}function tee(t,e){let n;for(const{hint:r}of t){const i=r?.[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function oyt(t){return{fill:tee(t,"fill"),stroke:tee(t,"stroke")}}function ayt(t){return ai(t.fill)?omt:smt}function _L(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:u,zero:c,align:f,padding:h,projection:d,facet:{label:p=e}={},...m}={}){const y={};for(const[b,v]of t){const w=m[b],_=Rye(b,v,{round:wi.get(b)===Ff?a:void 0,nice:l,clamp:u,zero:c,align:f,padding:h,projection:d,...w});if(_){let{label:S=b==="fx"||b==="fy"?p:e,percent:A,transform:C,inset:D,insetTop:T=D!==void 0?D:b==="y"?r:0,insetRight:M=D!==void 0?D:b==="x"?i:0,insetBottom:I=D!==void 0?D:b==="y"?s:0,insetLeft:N=D!==void 0?D:b==="x"?o:0}=w||{};if(C==null)C=void 0;else if(typeof C!="function")throw new Error("invalid scale transform; not a function");_.percent=!!A,_.label=S===void 0?uyt(v,_):S,_.transform=C,b==="x"||b==="fx"?(_.insetLeft=+N,_.insetRight=+M):(b==="y"||b==="fy")&&(_.insetTop=+T,_.insetBottom=+I),y[b]=_}}return y}function nee(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:s,type:o,interval:a,label:l}=i;e[r]=Nye(i),n[r]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function lyt(t,e){const{x:n,y:r,fx:i,fy:s}=t,o=i||s?cj(e):e;i&&ree(i,o),s&&iee(s,o);const a=i||s?Oye(t,e):e;n&&ree(n,a),r&&iee(r,a)}function uyt(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!I1(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Tye(t){return Math.sign(Dv(t.domain()))*Math.sign(Dv(t.range()))}function cj(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:u,marginLeft:c}}=t;return{marginTop:Math.max(e,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,u),marginLeft:Math.max(i,c),width:s,height:o}}function Oye({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=cj(n);return{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:t?t.scale.bandwidth()+o+i:a,height:e?e.scale.bandwidth()+r+s:l,facet:{width:a,height:l}}}function ree(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:s=0,marginRight:o=0}=e,a=s+n,l=i-o-r;t.range=[a,Math.max(a,l)],I1(t)||(t.range=Iye(t)),t.scale.range(t.range)}Mye(t)}function iee(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:s=0,marginBottom:o=0}=e,a=s+n,l=i-o-r;t.range=[Math.max(a,l),a],I1(t)?t.range.reverse():t.range=Iye(t),t.scale.range(t.range)}Mye(t)}function Mye(t){t.round===void 0&&hyt(t)&&cyt(t)<=30&&t.scale.round(!0)}function cyt({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,s=t.paddingOuter?t.paddingOuter():t.padding(),o=e-i,a=Math.abs(r-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function Iye(t){const e=t.scale.domain().length+Fye(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,s)=>n+s/(e-1)*(r-n))}function SL(t,e,n){return Rye(t,n===void 0?void 0:[{hint:n}],{...e})}function Rye(t,e=[],n={}){const r=fyt(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&I1({type:r})){const i=e.map(({value:s})=>s).filter(s=>s!==void 0);i.some(oa)?Fd(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${py(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${py(r)}".`):i.some(Ymt)?Fd(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${py(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${py(r)}".`):i.some(Xmt)&&Fd(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${py(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${py(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=D6(e,n,La);break;case"identity":switch(wi.get(t)){case Ff:n=D6(e,n,La);break;case AT:n=D6(e,n,dyt);break}break;case"utc":case"time":n=D6(e,n,j1e);break}switch(r){case"diverging":return H1t(t,e,n);case"diverging-sqrt":return G1t(t,e,n);case"diverging-pow":return Aye(t,e,n);case"diverging-log":return Y1t(t,e,n);case"diverging-symlog":return X1t(t,e,n);case"categorical":case"ordinal":case XS:return ryt(t,e,n);case"cyclical":case"sequential":case"linear":return I1t(t,e,n);case"sqrt":return R1t(t,e,n);case"threshold":return lj(t,e,n);case"quantile":return L1t(t,e,n);case"quantize":return P1t(t,e,n);case"pow":return _ye(t,e,n);case"log":return F1t(t,e,n);case"symlog":return N1t(t,e,n);case"utc":return nyt(t,e,n);case"time":return tyt(t,e,n);case"point":return iyt(t,e,n);case"band":return syt(t,e,n);case"identity":return $1t(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function py(t){return typeof t=="symbol"?t.description:t}function see(t){return typeof t=="string"?`${t}`.toLowerCase():t}const oee={toString:()=>"projection"};function fyt(t,e,{type:n,domain:r,range:i,scheme:s,pivot:o,projection:a}){if(n=see(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&a!=null&&(n=oee);for(const c of e){const f=see(c.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===oee)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:c})=>c!==void 0))return;const l=wi.get(t);if(l===WS)return"sqrt";if(l===GS||l===HS)return"linear";if(l===AT)return"ordinal";const u=(r??i)?.length;if(u<2||u>2)return nI(l);if(r!==void 0){if(Di(r))return nI(l);if(oa(r))return"utc"}else{const c=e.map(({value:f})=>f).filter(f=>f!==void 0);if(c.some(Di))return nI(l);if(c.some(oa))return"utc"}if(l===lp){if(o!=null||O1t(s))return"diverging";if(E1t(s))return"categorical"}return"linear"}function nI(t){switch(t){case Ff:return"point";case lp:return XS;default:return"ordinal"}}function I1({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===XS}function Fye({type:t}){return t==="threshold"}function hyt({type:t}){return t==="point"||t==="band"}function sh(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function D6(t,{domain:e,...n},r){for(const i of t)i.value!==void 0&&(e===void 0&&(e=i.value?.domain),i.value=r(i.value));return{domain:e===void 0?e:r(e),...n}}function dyt(t){return Rr(t,Kz)}function C3(t={}){let e;for(const n in t)if(wi.has(n)&&Dm(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=Nye(SL(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function pyt(t){return e=>{if(!wi.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function Nye({scale:t,type:e,domain:n,range:r,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(e==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const u=t.unknown?t.unknown():void 0;return{type:e,domain:v3(n),...r!==void 0&&{range:v3(r)},...o!==void 0&&{transform:o},...a&&{percent:a},...u!==void 0&&{unknown:u},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:c=>t(c),...t.invert&&{invert:c=>t.invert(c)}}}function gyt(t,e){const{fx:n,fy:r}=_L(t,e),i=n?.scale.domain(),s=r?.scale.domain();return i&&s?Urt(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function myt(t,{x:e,y:n}){return e&&=AL(e),n&&=AL(n),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function fj(t,{fx:e,fy:n}){const r=op(t),i=e?.value,s=n?.value;return e&&n?Sb(r,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):e?Sb(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Sb(r,o=>(o.fy=s[o[0]],o),o=>s[o])}function yyt(t,e,{marginTop:n,marginLeft:r}){const i=t?({x:o})=>t(o)-r:()=>0,s=e?({y:o})=>e(o)-n:()=>0;return function(o){this.tagName==="svg"?(this.setAttribute("x",i(o)),this.setAttribute("y",s(o))):this.setAttribute("transform",`translate(${i(o)},${s(o)})`)}}function byt(t){const e=[],n=new Uint32Array(yc(t,r=>r.length));for(const r of t){let i=0;for(const s of t)r!==s&&(n.set(s,i),i+=s.length);e.push(n.slice(0,i))}return e}const vyt=new Map([["top",rI],["right",oI],["bottom",iI],["left",sI],["top-left",T6(rI,sI)],["top-right",T6(rI,oI)],["bottom-left",T6(iI,sI)],["bottom-right",T6(iI,oI)],["top-empty",_yt],["right-empty",Cyt],["bottom-empty",Syt],["left-empty",Ayt],["empty",kyt]]);function xyt(t){if(t==null)return null;const e=vyt.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const aee=new WeakMap;function AL(t){let e=aee.get(t);return e||aee.set(t,e=new Jm(Rr(t,(n,r)=>[n,r]))),e}function cg(t,e){return AL(t).get(e)}function wyt(t,e,n){return e=Ad(e),n=Ad(n),t.find(r=>Object.is(Ad(r.x),e)&&Object.is(Ad(r.y),n))}function MT(t,e,n){return wyt(t,e,n)?.empty}function rI(t,{y:e},{y:n}){return e?cg(e,n)===0:!0}function iI(t,{y:e},{y:n}){return e?cg(e,n)===e.length-1:!0}function sI(t,{x:e},{x:n}){return e?cg(e,n)===0:!0}function oI(t,{x:e},{x:n}){return e?cg(e,n)===e.length-1:!0}function _yt(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=cg(e,r);if(s>0)return MT(t,n,e[s-1])}function Syt(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=cg(e,r);if(s<e.length-1)return MT(t,n,e[s+1])}function Ayt(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=cg(e,n);if(s>0)return MT(t,e[s-1],r)}function Cyt(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const s=cg(e,n);if(s<e.length-1)return MT(t,e[s+1],r)}function kyt(t,e,{empty:n}){return n}function T6(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function aI(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:s})=>r.get(i)?.get(s)??[]):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}const Lye=Math.PI,Wh=2*Lye,lI=.618;function Eyt({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:s=e}={},o){if(t==null)return;if(typeof t.stream=="function")return t;let a,l,u="frame";if(jl(t)){let S;if({type:t,domain:l,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:s=S!==void 0?S:s,clip:u=u,...a}=t,t==null)return}typeof t!="function"&&({type:t}=CL(t));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:p,marginBottom:m}=o,y=c-h-d-s-r,b=f-p-m-n-i;if(t=t?.({width:y,height:b,clip:u,...a}),t==null)return;u=Dyt(u,h,p,c-d,f-m);let v=h+s,w=p+n,_;if(l!=null){const[[S,A],[C,D]]=$S(t).bounds(l),T=Math.min(y/(C-S),b/(D-A));T>0?(v-=(T*(S+C)-y)/2,w-=(T*(A+D)-b)/2,_=A5({point(M,I){this.stream.point(M*T+v,I*T+w)}})):Fd("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??=v===0&&w===0?Pye():A5({point(S,A){this.stream.point(S+v,A+w)}}),{stream:S=>t.stream(_.stream(u(S)))}}function CL(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Gu(Q0t,.7463,.4673);case"albers":return O6(jme,.7463,.4673);case"azimuthal-equal-area":return Gu(J0t,4,4);case"azimuthal-equidistant":return Gu(Z0t,Wh,Wh);case"conic-conformal":return O6(ngt,Wh,Wh);case"conic-equal-area":return O6(C5,6.1702,2.9781);case"conic-equidistant":return O6(sgt,7.312,3.6282);case"equal-earth":return Gu(agt,5.4133,2.6347);case"equirectangular":return Gu(rgt,Wh,Lye);case"gnomonic":return Gu(lgt,3.4641,3.4641);case"identity":return{type:Pye};case"reflect-y":return{type:Tyt};case"mercator":return Gu(egt,Wh,Wh);case"orthographic":return Gu(ugt,2,2);case"stereographic":return Gu(cgt,2,2);case"transverse-mercator":return Gu(fgt,Wh,Wh);default:throw new Error(`unknown projection type: ${t}`)}}function Dyt(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return s=>s;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return kme(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function Gu(t,e,n){return{type:({width:r,height:i,rotate:s,precision:o=.15,clip:a})=>{const l=t();return o!=null&&l.precision?.(o),s!=null&&l.rotate?.(s),typeof a=="number"&&l.clipAngle?.(a),r!=null&&(l.scale(Math.min(r/e,i/n)),l.translate([r/2,i/2])),l},aspectRatio:n/e}}function O6(t,e,n){const{type:r,aspectRatio:i}=Gu(t,e,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:u}=s,c=r(s);return o!=null&&(c.parallels(o),a===void 0&&l!=null&&c.fitSize([l,u],{type:"Sphere"})),c},aspectRatio:i}}const Pye=Vs({stream:t=>t}),Tyt=Vs(A5({point(t,e){this.stream.point(t,-e)}}));function Bye(t,e,n,r){const i=n[t],s=n[e],o=i.length,a=n[t]=new Float64Array(o).fill(NaN),l=n[e]=new Float64Array(o).fill(NaN);let u;const c=r.stream({point(f,h){a[u]=f,l[u]=h}});for(u=0;u<o;++u)c.point(i[u],s[u])}function Oyt({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(jl(t)&&(t=t.type),t!=null)}function Myt(t){if(typeof t?.stream=="function")return lI;if(jl(t)){let e,n;if({domain:e,type:t,...n}=t,e!=null&&t!=null){const r=typeof t=="string"?CL(t).type:t,[[i,s],[o,a]]=$S(r({...n,width:100,height:100})).bounds(e),l=(a-s)/(o-i);return l&&isFinite(l)?l<.2?.2:l>5?5:l:lI}}if(t!=null){if(typeof t!="function"){const{aspectRatio:e}=CL(t);if(e)return e}return lI}}function KS(t,e,{projection:n}){const{x:r,y:i}=t;let s={};return r&&(s.x=r),i&&(s.y=i),s=DT(s,e),n&&r?.scale==="x"&&i?.scale==="y"&&Bye("x","y",s,n),r&&(s.x=La(s.x)),i&&(s.y=La(s.y)),s}function Iyt(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},s={point(o,a){e.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of t.value)$p(o,s);return[r,i]}function Ryt({x:t,y:e}){if(t||e)return t??=n=>n,e??=n=>n,A5({point(n,r){this.stream.point(t(n),e(r))}})}function IT(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Z1e(n)}}function Nn(t,{document:e}){return Kr(uT(t).call(e.documentElement))}const kL=Symbol("unset");function Mv(t){return(t.length===1?Fyt:Nyt)(t)}function Fyt(t){let e,n=kL;return r=>(Object.is(n,r)||(n=r,e=t(r)),e)}function Nyt(t){let e,n;return(...r)=>((n?.length!==r.length||n.some((i,s)=>!Object.is(i,r[s])))&&(n=r,e=t(...r)),e)}const Lyt=Mv(t=>new Intl.NumberFormat(t)),Pyt=Mv((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}})),Byt=Mv((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function $ye(t="en-US"){const e=Lyt(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function $yt(t="en-US",e="short"){const n=Pyt(t,e);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function Uyt(t="en-US",e="short"){const n=Byt(t,e);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function Uye(t){return Mmt(t,"Invalid Date")}function zyt(t="en-US"){const e=$ye(t);return n=>(n instanceof Date?Uye:typeof n=="number"?e:Us)(n)}const Iv=zyt(),Ws=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let jyt=0,qyt=0;function hj(){return`plot-clip-${++jyt}`}function Vyt(){return`plot-pattern-${++qyt}`}function zye(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:u,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:y,opacity:b,mixBlendMode:v,imageFilter:w,paintOrder:_,pointerEvents:S,shapeRendering:A,channels:C},{ariaLabel:D,fill:T="currentColor",fillOpacity:M,stroke:I="none",strokeOpacity:N,strokeWidth:P,strokeLinecap:O,strokeLinejoin:R,strokeMiterlimit:L,paintOrder:B}){T===null&&(a=null,l=null),I===null&&(u=null,f=null),ai(T)?!ai(I)&&(!ai(a)||C?.fill)&&(I="none"):ai(I)&&(!ai(u)||C?.stroke)&&(T="none");const[z,U]=sa(a,T),[V,W]=zi(l,M),[H,Y]=sa(u,I),[se,he]=zi(f,N),[be,fe]=zi(b);Ov(Y)||(c===void 0&&(c=P),d===void 0&&(d=O),h===void 0&&(h=R),p===void 0&&!Jmt(h)&&(p=L),!Ov(U)&&_===void 0&&(_=B));const[me,K]=zi(c);return T!==null&&(t.fill=Wi(U,"currentColor"),t.fillOpacity=Nx(W,1)),I!==null&&(t.stroke=Wi(Y,"none"),t.strokeWidth=Nx(K,1),t.strokeOpacity=Nx(he,1),t.strokeLinejoin=Wi(h,"miter"),t.strokeLinecap=Wi(d,"butt"),t.strokeMiterlimit=Nx(p,4),t.strokeDasharray=Wi(m,"none"),t.strokeDashoffset=Wi(y,"0")),t.target=Us(o),t.ariaLabel=Us(D),t.ariaDescription=Us(i),t.ariaHidden=Us(s),t.opacity=Nx(fe,1),t.mixBlendMode=Wi(v,"normal"),t.imageFilter=Wi(w,"none"),t.paintOrder=Wi(_,"normal"),t.pointerEvents=Wi(S,"auto"),t.shapeRendering=Wi(A,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:z,scale:"auto",optional:!0},fillOpacity:{value:V,scale:"auto",optional:!0},stroke:{value:H,scale:"auto",optional:!0},strokeOpacity:{value:se,scale:"auto",optional:!0},strokeWidth:{value:me,optional:!0},opacity:{value:be,scale:"auto",optional:!0}}}function Wyt(t,e){e&&t.filter(n=>Pz(e[n])).append("title").call(Gyt,e)}function Hyt(t,e){e&&t.filter(([n])=>Pz(e[n])).append("title").call(Yyt,e)}function Gyt(t,e){e&&t.text(n=>Iv(e[n]))}function Yyt(t,e){e&&t.text(([n])=>Iv(e[n]))}function ki(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:u,opacity:c,href:f}){r&&St(t,"aria-label",h=>r[h]),s&&St(t,"fill",h=>s[h]),o&&St(t,"fill-opacity",h=>o[h]),a&&St(t,"stroke",h=>a[h]),l&&St(t,"stroke-opacity",h=>l[h]),u&&St(t,"stroke-width",h=>u[h]),c&&St(t,"opacity",h=>c[h]),f&&qye(t,h=>f[h],e),n||Wyt(t,i)}function $5(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:u,opacity:c,href:f}){r&&St(t,"aria-label",([h])=>r[h]),s&&St(t,"fill",([h])=>s[h]),o&&St(t,"fill-opacity",([h])=>o[h]),a&&St(t,"stroke",([h])=>a[h]),l&&St(t,"stroke-opacity",([h])=>l[h]),u&&St(t,"stroke-width",([h])=>u[h]),c&&St(t,"opacity",([h])=>c[h]),f&&qye(t,([h])=>f[h],e),n||Hyt(t,i)}function Xyt({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:u}){return[t,u?void 0:e,n,r,i,s,o,a,l].filter(c=>c!==void 0)}function dj(t,e,n){const r=ng(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&Fd("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*jye(t,e,n,r){const{z:i}=n,{z:s}=r,o=Xyt(r,n),a=[...e,...o];for(const l of s?dj(t,s,i):[t]){let u,c;e:for(const f of l){for(const h of a)if(!Gs(h[f])){c&&c.push(-1);continue e}if(u===void 0){c&&(yield c),u=o.map(h=>Ad(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(Ad(o[h][f])!==u[h]){yield c,u=o.map(p=>Ad(p[f])),c=[f];continue e}}c&&(yield c)}}function Kyt(t,e,n,r){let i;const{clip:s=r.clip}=e;s==="frame"?(t=Nn("svg:g",r).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=Jyt(r,n)):s&&(i=ebt(s,r)),St(t,"aria-label",e.ariaLabel),St(t,"aria-description",e.ariaDescription),St(t,"aria-hidden",e.ariaHidden),St(t,"clip-path",i)}function Qyt(t){const e=new WeakMap;return(n,r)=>{let i=e.get(n);if(!i){const s=hj();Kr(n.ownerSVGElement).append("clipPath").attr("id",s).call(t,n,r),e.set(n,i=`url(#${s})`)}return i}}const Jyt=Qyt((t,e,n)=>{const{width:r,height:i,marginLeft:s,marginRight:o,marginTop:a,marginBottom:l}=n;t.append("rect").attr("x",s).attr("y",a).attr("width",r-o-s).attr("height",i-a-l)}),lee=new WeakMap,Zyt={type:"Sphere"};function ebt(t,e){let n,r;if((n=lee.get(e))||lee.set(e,n=new WeakMap),t.type==="Sphere"&&(t=Zyt),!(r=n.get(t))){const i=hj();Kr(e.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",e.path()(t)),n.set(t,r=`url(#${i})`)}return r}function ni(t,e,n,r){Kyt(t,e,n,r),St(t,"class",e.className),St(t,"fill",e.fill),St(t,"fill-opacity",e.fillOpacity),St(t,"stroke",e.stroke),St(t,"stroke-width",e.strokeWidth),St(t,"stroke-opacity",e.strokeOpacity),St(t,"stroke-linejoin",e.strokeLinejoin),St(t,"stroke-linecap",e.strokeLinecap),St(t,"stroke-miterlimit",e.strokeMiterlimit),St(t,"stroke-dasharray",e.strokeDasharray),St(t,"stroke-dashoffset",e.strokeDashoffset),St(t,"shape-rendering",e.shapeRendering),St(t,"filter",e.imageFilter),St(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;St(t,"pointer-events",i)}function Cr(t,e){tbt(t,"mix-blend-mode",e.mixBlendMode),St(t,"opacity",e.opacity)}function qye(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const s=this.ownerDocument.createElementNS(Vd.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Vd.xlink,"href",i),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function St(t,e,n){n!=null&&t.attr(e,n)}function tbt(t,e,n){n!=null&&t.style(e,n)}function Lr(t,e,{x:n,y:r},i=Ws,s=Ws){i+=e.dx,s+=e.dy,n?.bandwidth&&(i+=n.bandwidth()/2),r?.bandwidth&&(s+=r.bandwidth()/2),(i||s)&&t.attr("transform",`translate(${i},${s})`)}function Wi(t,e){if((t=Us(t))!==e)return t}function Nx(t,e){if((t=Zr(t))!==e)return t}const nbt=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function pj(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!nbt.test(t))throw new Error(`invalid class name: ${t}`);return t}function gj(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Ah({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(t)?o:/right$/.test(t)?e-i:(o+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-s:(r+n-s)/2]}let Pr=class{constructor(e,n={},r={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:u,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:p=h,marginBottom:m=h,marginLeft:y=h,className:b,clip:v=i?.clip,channels:w,tip:_,render:S}=r;if(this.data=e,this.sort=z0(u)?u:null,this.initializer=ko(r).initializer,this.transform=this.initializer?r.transform:Uc(r).transform,s===null||s===!1?this.facet=null:(this.facet=zl(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=e===Yw&&typeof a=="string"?[a]:a,this.fy=e===Yw&&typeof l=="string"?[l]:l),this.facetAnchor=xyt(o),n=Gz(n),w!==void 0&&(n={...rbt(w),...n}),i!==void 0&&(n={...zye(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([A,C])=>{if(ff(C.value)){const{value:D,label:T=C.label,scale:M=C.scale}=C.value;C={...C,label:T,scale:M,value:D}}if(e===Yw&&typeof C.value=="string"){const{value:D}=C;C={...C,value:[D]}}return[A,C]}).filter(([A,{value:C,optional:D}])=>{if(C!=null)return!0;if(D)return!1;throw new Error(`missing channel value: ${A}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+y,this.clip=Z1e(v),this.tip=ibt(_),this.className=Us(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const A in this.channels){const{scale:C}=n[A];if(!(C!=="x"&&C!=="y"))throw new Error("super-faceting cannot use x or y")}}S!=null&&(this.render=k3(S,this.render))}initialize(e,n,r){let i=Tv(this.data);e===void 0&&i!=null&&(e=[op(i)]);const s=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=Tv(i)),e!==void 0&&(e.original=s);const o=pye(this.channels,i);return this.sort!=null&&S1t(i,e,o,n,this.sort),{data:i,facets:e,channels:o}}filter(e,n,r){for(const i in n){const{filter:s=Gs}=n[i];if(s!==null){const o=r[i];e=e.filter(a=>s(o[a]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in e&&e[s].scale==="y"&&Bye(i,s,n,r.projection)}}scale(e,n,r){const i=DT(e,n);return r.projection&&this.project(e,i,r),i}};function Fu(...t){return t.plot=Pr.prototype.plot,t}function k3(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,s,o,a){return t.call(this,n,r,i,s,o,(l,u,c,f,h)=>e.call(this,l,u,c,f,h,a))}}function rbt(t){return Object.fromEntries(Object.entries(Gz(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:O2(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function ibt(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?zl(t,"tip",["x","y","xy"]):t}function R1(t,e){return t?.tip===!0?{...t,tip:e}:jl(t?.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}function sbt(t,e,n={}){let r=.5-Ws,i=.5+Ws,s=.5+Ws,o=.5-Ws;for(const{marginTop:m,marginRight:y,marginBottom:b,marginLeft:v}of e)m>r&&(r=m),y>i&&(i=y),b>s&&(s=b),v>o&&(o=v);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:u=a!==void 0?a:i,marginBottom:c=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,u=+u,c=+c,f=+f;let{width:h=640,height:d=obt(t,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-r+c-s)}=n;h=+h,d=+d;const p={width:h,height:d,marginTop:l,marginRight:u,marginBottom:c,marginLeft:f};if(t.fx||t.fy){let{margin:m,marginTop:y=m!==void 0?m:l,marginRight:b=m!==void 0?m:u,marginBottom:v=m!==void 0?m:c,marginLeft:w=m!==void 0?m:f}=n.facet??{};y=+y,b=+b,v=+v,w=+w,p.facet={marginTop:y,marginRight:b,marginBottom:v,marginLeft:w}}return p}function obt({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:u,marginLeftDefault:c}){const f=n&&n.scale.domain().length||1,h=Myt(i);if(h){const p=r?r.scale.domain().length:1,m=(1.1*f-.1)/(1.1*p-.1)*h,y=Math.max(.1,Math.min(10,m));return Math.round((o-c-l)*y+a+u)}const d=e?I1(e)?e.scale.domain().length||1:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=uee("y",e)/(uee("x",t)*s),m=r?r.scale.bandwidth():1,y=n?n.scale.bandwidth():1,b=m*(o-c-l)-t.insetLeft-t.insetRight;return(p*b+e.insetTop+e.insetBottom)/y+a+u}return!!(e||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function uee(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=e.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[s,o]=Qi(r);return Math.abs(i(o)-i(s))}const cee=new WeakMap;function mj(t,e,{x:n,y:r,px:i,py:s,maxRadius:o=40,channels:a,render:l,...u}={}){return o=+o,i!=null&&(n??=null,a={...a,px:{value:i,scale:"x"}}),s!=null&&(r??=null,a={...a,py:{value:s,scale:"y"}}),{x:n,y:r,channels:a,...u,render:k3(function(c,f,h,d,p,m){p={...p,pointerSticky:!1};const y=p.ownerSVGElement,{data:b}=p.getMarkState(this);let v=cee.get(y);v||cee.set(y,v={sticky:!1,roots:[],renders:[]});let w=v.renders.push(Y)-1;const{x:_,y:S,fx:A,fy:C}=f;let D=A?A(c.fx)-d.marginLeft:0,T=C?C(c.fy)-d.marginTop:0;_?.bandwidth&&(D+=_.bandwidth()/2),S?.bandwidth&&(T+=S.bandwidth()/2);const M=c.fi!=null;let I;if(M){let fe=v.facetStates;fe||(v.facetStates=fe=new Map),I=fe.get(this),I||fe.set(this,I=new Map)}const[N,P]=Ah(this,d),{px:O,py:R}=h,L=O?fe=>O[fe]:Vye(h,N),B=R?fe=>R[fe]:Wye(h,P);let z,U,V,W;function H(fe,me){if(M)if(W&&(W=cancelAnimationFrame(W)),fe==null)I.delete(c.fi);else{I.set(c.fi,me),W=requestAnimationFrame(()=>{W=null;for(const[K,de]of I)if(de<me||de===me&&K<c.fi){fe=null;break}Y(fe)});return}Y(fe)}function Y(fe){if(z===fe&&V===v.sticky)return;z=fe,V=p.pointerSticky=v.sticky;const me=z==null?[]:[z];M&&(me.fx=c.fx,me.fy=c.fy,me.fi=c.fi);const K=m(me,f,h,d,p);if(U){if(M){const de=U.parentNode,ge=U.getAttribute("transform"),oe=K.getAttribute("transform");ge?K.setAttribute("transform",ge):K.removeAttribute("transform"),oe?de.setAttribute("transform",oe):de.removeAttribute("transform"),K.removeAttribute("aria-label"),K.removeAttribute("aria-description"),K.removeAttribute("aria-hidden")}U.replaceWith(K)}if(v.roots[w]=U=K,!(z==null&&I?.size>1)){const de=z==null?null:sp(b)?b[z]:b.get(z);p.dispatchValue(de)}return K}function se(fe){if(v.sticky||fe.pointerType==="mouse"&&fe.buttons===1)return;let[me,K]=Zu(fe);me-=D,K-=T;const de=me<d.marginLeft||me>d.width-d.marginRight?1:t,ge=K<d.marginTop||K>d.height-d.marginBottom?1:e;let oe=null,Fe=o*o;for(const Ce of c){const je=de*(L(Ce)-me),Ge=ge*(B(Ce)-K),Ee=je*je+Ge*Ge;Ee<=Fe&&(oe=Ce,Fe=Ee)}if(oe!=null&&(t!==1||e!==1)){const Ce=L(oe)-me,je=B(oe)-K;Fe=Ce*Ce+je*je}H(oe,Fe)}function he(fe){fe.pointerType==="mouse"&&z!=null&&(v.sticky&&v.roots.some(me=>me?.contains(fe.target))||(v.sticky?(v.sticky=!1,v.renders.forEach(me=>me(null))):(v.sticky=!0,Y(z)),fe.stopImmediatePropagation()))}function be(fe){fe.pointerType==="mouse"&&(v.sticky||H(null))}return y.addEventListener("pointerenter",se),y.addEventListener("pointermove",se),y.addEventListener("pointerdown",he),y.addEventListener("pointerleave",be),Y(null)},l)}}function RT(t){return mj(1,1,t)}function FT(t){return mj(1,.01,t)}function E3(t){return mj(.01,1,t)}function Vye({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Wye({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Hye(t){return I1(t)&&t.interval===void 0?void 0:"tabular-nums"}function abt(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:s=44+r,marginTop:o=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:u=0,style:c,ticks:f=(i-u-a)/64,tickFormat:h,fontVariant:d=Hye(t),round:p=!0,opacity:m,className:y}=e;const b=IT(e);y=pj(y),m=zi(m)[1],h===null&&(h=()=>null);const v=Nn("svg",b).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(N=>N.append("style").text(`:where(.${y}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${y}-ramp text) {
  white-space: pre;
}`)).call(gj,c);let w=N=>N.selectAll(".tick line").attr("y1",o+l-s),_;const S=p?(N,P)=>N.rangeRound(P):(N,P)=>N.range(P),{type:A,domain:C,range:D,interpolate:T,scale:M,pivot:I}=t;if(T){const N=D===void 0?T:UD(T.length===1?uj(T):T,D);_=S(M.copy(),bc(ro(u,i-a),Math.min(C.length+(I!==void 0),D===void 0?1/0:D.length)));const P=256,O=b.document.createElement("canvas");O.width=P,O.height=1;const R=O.getContext("2d");for(let L=0,B=P-1;L<P;++L)R.fillStyle=N(L/B),R.fillRect(L,0,1,1);v.append("image").attr("opacity",m).attr("x",u).attr("y",o).attr("width",i-u-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(A==="threshold"){const N=C,P=h===void 0?O=>O:typeof h=="string"?Lu(h):h;_=S(ep().domain([-1,D.length-1]),[u,i-a]),v.append("g").attr("fill-opacity",m).selectAll().data(D).enter().append("rect").attr("x",(O,R)=>_(R-1)).attr("y",o).attr("width",(O,R)=>_(R)-_(R-1)).attr("height",s-o-l).attr("fill",O=>O),f=Rr(N,(O,R)=>R),h=O=>P(N[O],O)}else _=S(wS().domain(C),[u,i-a]),v.append("g").attr("fill-opacity",m).selectAll().data(C).enter().append("rect").attr("x",_).attr("y",o).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",s-o-l).attr("fill",M),w=()=>{};return v.append("g").attr("transform",`translate(0,${s-l})`).call(Cft(_).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Wi(d,"normal")).call(w).call(N=>N.select(".domain").remove()),n!==void 0&&v.append("text").attr("x",u).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),v.node()}const U5=Math.PI/180;function M2(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=uI(n),t.markerMid=uI(r),t.markerEnd=uI(i)}function uI(t){if(t==null||t===!1)return null;if(t===!0)return hee;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return fee("auto");case"arrow-reverse":return fee("auto-start-reverse");case"dot":return lbt;case"circle":case"circle-fill":return hee;case"circle-stroke":return ubt;case"tick":return cI("auto");case"tick-x":return cI(90);case"tick-y":return cI(0)}throw new Error(`invalid marker: ${t}`)}function fee(t){return(e,n)=>Nn("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function lbt(t,e){return Nn("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function hee(t,e){return Nn("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function ubt(t,e){return Nn("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function cI(t){return(e,n)=>Nn("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let cbt=0;function QS(t,e,{stroke:n},r){return Yye(t,e,n&&(i=>n[i]),null,r)}function fbt(t,e,{stroke:n,z:r},i){return Yye(t,e,n&&(([s])=>n[s]),r,i)}const EL=1,Gye=2;function hbt(t,e){const n=new Uint8Array(e.length),r=t.data().filter(s=>s.length>1),i=r.length;for(let s=0,o=kL;s<i;++s){const a=r[s];if(a.length>1){const l=a[0];o!==(o=Ad(e[l]))&&(n[l]|=EL)}}for(let s=i-1,o=kL;s>=0;--s){const a=r[s];if(a.length>1){const l=a[0];o!==(o=Ad(e[l]))&&(n[l]|=Gye)}}return([s])=>n[s]}function Yye(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},s=()=>i,o,a){if(!e&&!n&&!r)return;const l=new Map,u=o&&hbt(t,o);function c(f,h,d){return function(p){if(d&&!d(p))return;const m=s(p);let y=l.get(h);y||l.set(h,y=new Map);let b=y.get(m);if(!b){const v=this.parentNode.insertBefore(h(m,a),this),w=`plot-marker-${++cbt}`;v.setAttribute("id",w),y.set(m,b=`url(#${w})`)}this.setAttribute(f,b)}}e&&t.each(c("marker-start",e,u&&(f=>u(f)&EL))),n&&u&&t.each(c("marker-start",n,f=>!(u(f)&EL))),n&&t.each(c("marker-mid",n)),r&&t.each(c("marker-end",r,u&&(f=>u(f)&Gye)))}function JS({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Xye(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function ZS({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Xye(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Xye(t,e,n){return t===void 0&&e===void 0&&n===void 0?Ws?[1,0]:[.5,.5]:[e,n]}function Kye(t,{interval:e}){return t={...O2(t)},t.interval=ST(t.interval===void 0?e:t.interval),t}function NT(t,e,n,r){const{[t]:i,[`${t}1`]:s,[`${t}2`]:o}=n,{value:a,interval:l}=Kye(i,n);if(a==null||l==null&&!r)return n;const u=Sh(i);if(l==null){let d;const p={transform:m=>d||(d=wn(m,a)),label:u};return{...n,[t]:void 0,[`${t}1`]:s===void 0?p:s,[`${t}2`]:o===void 0&&!(s===o&&r)?p:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=Rr(wn(c=d,a),p=>l.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:s===void 0?{transform:h,label:u}:s,[`${t}2`]:o===void 0?{transform:d=>h(d).map(p=>l.offset(p)),label:u}:o})}function Qye(t,e,n){const{[t]:r}=n,{value:i,interval:s}=Kye(r,n);return i==null||s==null?n:e({...n,[t]:{label:Sh(r),transform:o=>{const a=Rr(wn(o,i),u=>s.floor(u)),l=a.map(u=>s.offset(u));return a.map(oa(a)?(u,c)=>u==null||isNaN(u=+u)||(c=l[c],c==null)||isNaN(c=+c)?void 0:new Date((u+c)/2):(u,c)=>u==null||(c=l[c],c==null)?NaN:(+u+ +c)/2)}}})}function Jye(t={}){return NT("x",JS,t,!0)}function Zye(t={}){return NT("y",ZS,t,!0)}function yj(t={}){return NT("x",JS,t)}function bj(t={}){return NT("y",ZS,t)}function ebe(t={}){return Qye("x",JS,t)}function tbe(t={}){return Qye("y",ZS,t)}const nbe={ariaLabel:"rule",fill:null,stroke:"currentColor"};class rbe extends Pr{constructor(e,n={}){const{x:r,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},R1(n,"x"),nbe),this.insetTop=Zr(a),this.insetBottom=Zr(l),M2(this,n)}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y1:u,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:y}=i,{insetTop:b,insetBottom:v}=this;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o},Ws,0).call(w=>w.selectAll().data(e).enter().append("line").call(Cr,this).attr("x1",l?_=>l[_]:(m+f-p)/2).attr("x2",l?_=>l[_]:(m+f-p)/2).attr("y1",u&&!sh(a)?_=>u[_]+b:d+b).attr("y2",c&&!sh(a)?a.bandwidth?_=>c[_]+a.bandwidth()-v:_=>c[_]-v:h-y-v).call(ki,this,r).call(QS,this,r,s)).node()}}class ibe extends Pr{constructor(e,n={}){const{x1:r,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(e,{y:{value:s,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},R1(n,"y"),nbe),this.insetRight=Zr(a),this.insetLeft=Zr(l),M2(this,n)}render(e,n,r,i,s){const{x:o,y:a}=n,{y:l,x1:u,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:y}=i,{insetLeft:b,insetRight:v}=this;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{y:l&&a},0,Ws).call(w=>w.selectAll().data(e).enter().append("line").call(Cr,this).attr("x1",u&&!sh(o)?_=>u[_]+b:m+b).attr("x2",c&&!sh(o)?o.bandwidth?_=>c[_]+o.bandwidth()-v:_=>c[_]-v:f-p-v).attr("y1",l?_=>l[_]:(d+h-y)/2).attr("y2",l?_=>l[_]:(d+h-y)/2).call(ki,this,r).call(QS,this,r,s)).node()}}function j0(t,e){let{x:n=xt,y:r,y1:i,y2:s,...o}=bj(e);return[i,s]=sbe(r,i,s),new rbe(t,{...o,x:n,y1:i,y2:s})}function q0(t,e){let{y:n=xt,x:r,x1:i,x2:s,...o}=yj(e);return[i,s]=sbe(r,i,s),new ibe(t,{...o,y:n,x1:i,x2:s})}function sbe(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function e4(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let s=0;s<n;++s)i+=e[s](r)+t[s+1];return i}}const dbt={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},obe="Â­";let LT=class extends Pr{constructor(e,n={}){const{x:r,y:i,text:s=ap(e)&&J1e(e)?xt:Zi,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:u=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:y,fontWeight:b,rotate:v}=n,[w,_]=zi(v,0),[S,A]=ybt(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:Hmt(w),optional:!0},text:{value:s,filter:Pz,optional:!0}},n,dbt),this.rotate=_,this.textAnchor=Wi(a,"middle"),this.lineAnchor=zl(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+c,this.textOverflow=abe(f),this.monospace=!!h,this.fontFamily=Us(d),this.fontSize=A,this.fontStyle=Us(m),this.fontVariant=Us(y),this.fontWeight=Us(b),this.frameAnchor=VS(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=fbe(this),this.clipLine=hbe(this)}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:p}=this,[m,y]=Ah(this,i);return Nn("svg:g",s).call(ni,this,i,s).call(cbe,this,f,i).call(Lr,this,{x:l&&o,y:u&&a}).call(b=>b.selectAll().data(e).enter().append("text").call(Cr,this).call(pbt,this,f,h).attr("transform",e4`translate(${l?v=>l[v]:m},${u?v=>u[v]:y})${c?v=>` rotate(${c[v]})`:p?` rotate(${p})`:""}`).call(St,"font-size",d&&(v=>d[v])).call(ki,this,r)).node()}};function abe(t){return t==null?null:zl(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function pbt(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=e;t.each(function(u){const c=a(Iv(n[u])??"").map(l),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let p=0;p<f;++p){if(++d,!c[p])continue;const m=this.ownerDocument.createElementNS(Vd.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(h+p)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=c[p],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[u]){const d=this.ownerDocument.createElementNS(Vd.svg,"title");d.textContent=n[u],this.appendChild(d)}})}function Rv(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=$c(e,n)),new LT(t,{...r,x:e,y:n})}function lbe(t,{x:e=xt,...n}={}){return new LT(t,tbe({...n,x:e}))}function ube(t,{y:e=xt,...n}={}){return new LT(t,ebe({...n,y:e}))}function cbe(t,e,n){St(t,"text-anchor",e.textAnchor),St(t,"font-family",e.fontFamily),St(t,"font-size",e.fontSize),St(t,"font-style",e.fontStyle),St(t,"font-variant",e.fontVariant===void 0?gbt(n):e.fontVariant),St(t,"font-weight",e.fontWeight)}function gbt(t){return t&&(Qy(t)||oa(t))?"tabular-nums":void 0}const mbt=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function ybt(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),mbt.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function bbt(t,e,n){const r=[];let i,s=0;for(const[o,a,l]of vbt(t)){if(i===void 0&&(i=o),s>i&&n(t,i,a)>e&&(r.push(t.slice(i,s)+(t[s-1]===obe?"-":"")),i=o),l){r.push(t.slice(i,a)),i=void 0;continue}s=a}return r}function*vbt(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case obe:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const dee={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"â":31,"â":31,"â":47,"â":47,"â¦":82};function vj(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=I2(t,i))r+=dee[t[i]]??(pbe(t,i)?120:dee.e);return r}function xj(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=I2(t,i))r+=pbe(t,i)?126:63;return r}function fbe({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return s=>s.split(/\r\n?|\n/g);const r=t?xj:vj,i=e*100;return s=>bbt(s,i,r)}function hbe({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return s=>s;const r=t?xj:vj,i=e*100;switch(n){case"clip-start":return s=>gee(s,i,r,"");case"clip-end":return s=>pee(s,i,r,"");case"ellipsis-start":return s=>gee(s,i,r,Mb);case"ellipsis-middle":return s=>xbt(s,i,r,Mb);case"ellipsis-end":return s=>pee(s,i,r,Mb)}}const Mb="â¦";function Fv(t,e,n,r){const i=[];let s=0;for(let o=0,a=0,l=t.length;o<l;o=a){a=I2(t,o);const u=n(t,o,a);if(s+u>e){for(s+=r;s>e&&o>0;)a=o,o=i.pop(),s-=n(t,o,a);return[o,e-s]}s+=u,i.push(o)}return[-1,0]}function pee(t,e,n,r){t=t.trim();const i=n(r),[s]=Fv(t,e,n,i);return s<0?t:t.slice(0,s).trimEnd()+r}function xbt(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const s=n(r)/2,[o,a]=Fv(t,e/2,n,s),[l]=Fv(t,i-e/2-a+s,n,-s);return l<0?r:t.slice(0,o).trimEnd()+r+t.slice(I2(t,l)).trimStart()}function gee(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const s=n(r),[o]=Fv(t,i-e+s,n,-s);return o<0?r:r+t.slice(I2(t,o)).trimStart()}const DL=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,mee=/\p{Extended_Pictographic}/uy;function I2(t,e){return e+=wbt(t,e)?2:1,Sbt(t,e)&&(e=DL.lastIndex),_bt(t,e)?I2(t,e+1):e}function dbe(t,e){return t.charCodeAt(e)<128}function wbt(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function _bt(t,e){return t.charCodeAt(e)===8205}function Sbt(t,e){return dbe(t,e)?!1:(DL.lastIndex=e,DL.test(t))}function pbe(t,e){return dbe(t,e)?!1:(mee.lastIndex=e,mee.test(t))}const gbe={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},mbe=3.5,Abt=mbe*5,ybe={draw(t,e,n){const r=e*n/Abt;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},bbe={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},Cbt=new Map([["arrow",ybe],["spike",bbe]]);function kbt(t){return t&&typeof t.draw=="function"}function Ebt(t){if(kbt(t))return t;const e=Cbt.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class PT extends Pr{constructor(e,n={}){const{x:r,y:i,r:s=mbe,length:o,rotate:a,shape:l=ybe,anchor:u="middle",frameAnchor:c}=n,[f,h]=zi(o,12),[d,p]=zi(a,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,gbe),this.r=+s,this.length=h,this.rotate=p,this.shape=Ebt(l),this.anchor=zl(u,"anchor",["start","middle","end"]),this.frameAnchor=VS(c)}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,length:c,rotate:f}=r,{length:h,rotate:d,anchor:p,shape:m,r:y}=this,[b,v]=Ah(this,i);return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o,y:u&&a}).call(w=>w.selectAll().data(e).enter().append("path").call(Cr,this).attr("transform",e4`translate(${l?_=>l[_]:b},${u?_=>u[_]:v})${f?_=>` rotate(${f[_]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?c?_=>` translate(0,${c[_]})`:` translate(0,${h})`:c?_=>` translate(0,${c[_]/2})`:` translate(0,${h/2})`}`).attr("d",c?_=>{const S=Sd();return m.draw(S,c[_],y),S}:(()=>{const _=Sd();return m.draw(_,h,y),_})()).call(ki,this,r)).node()}}function vbe(t,e={}){let{x:n,y:r,...i}=e;return e.frameAnchor===void 0&&([n,r]=$c(n,r)),new PT(t,{...i,x:n,y:r})}function xbe(t,e={}){const{x:n=xt,...r}=e;return new PT(t,{...r,x:n})}function wbe(t,e={}){const{y:n=xt,...r}=e;return new PT(t,{...r,y:n})}function Dbt(t,e={}){const{shape:n=bbe,stroke:r=gbe.stroke,strokeWidth:i=1,fill:s=r,fillOpacity:o=.3,anchor:a="start",...l}=e;return vbe(t,{...l,shape:n,stroke:r,strokeWidth:i,fill:s,fillOpacity:o,anchor:a})}function fg(t,e){return arguments.length<2&&!ap(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function BT({anchor:t}={},e){return t===void 0?e[0]:zl(t,"anchor",e)}function _be(t){return BT(t,["left","right"])}function Sbe(t){return BT(t,["right","left"])}function Abe(t){return BT(t,["bottom","top"])}function Cbe(t){return BT(t,["top","bottom"])}function wj(){const[t,e]=fg(...arguments);return Dbe("y",_be(e),t,e)}function kbe(){const[t,e]=fg(...arguments);return Dbe("fy",Sbe(e),t,e)}function _j(){const[t,e]=fg(...arguments);return Tbe("x",Abe(e),t,e)}function Ebe(){const[t,e]=fg(...arguments);return Tbe("fx",Cbe(e),t,e)}function Dbe(t,e,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:u=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:y,x:b,margin:v,marginTop:w=v===void 0?20:v,marginRight:_=v===void 0?e==="right"?40:0:v,marginBottom:S=v===void 0?20:v,marginLeft:A=v===void 0?e==="left"?40:0:v,label:C,labelAnchor:D,labelArrow:T,labelOffset:M,ariaLabel:I=`${t}-axis`,...N}){return p=Zr(p),m=Zr(m),y=Zr(y),D!==void 0&&(D=zl(D,"labelAnchor",["center","top","bottom"])),T=zbe(T),Fu(p&&!ai(s)?Tbt(t,e,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,x:b,ariaLabel:I,...N}):null,ai(l)?null:Mbt(t,e,n,{fill:l,fillOpacity:u,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:y,x:b,marginTop:w,marginRight:_,marginBottom:S,marginLeft:A,ariaLabel:I,...N}),!ai(l)&&C!==null?Rv([],Pbe({fill:l,fillOpacity:u,...N},function(P,O,R,L,B){const z=L[t],{marginTop:U,marginRight:V,marginBottom:W,marginLeft:H}=t==="y"&&B.inset||B,Y=D??(z.bandwidth?"center":"top"),se=M??(e==="right"?V:H)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-U:Y==="bottom"?W-3:0,this.dx=e==="right"?se:-se,this.ariaLabel=`${I} label`,{facets:[[0]],channels:{text:{value:[Ube(t,z,{anchor:e,label:C,labelAnchor:Y,labelArrow:T})]}}}})):null)}function Tbe(t,e,n,{color:r="currentColor",opacity:i=1,stroke:s=r,strokeOpacity:o=i,strokeWidth:a=1,fill:l=r,fillOpacity:u=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:y,y:b,margin:v,marginTop:w=v===void 0?e==="top"?30:0:v,marginRight:_=v===void 0?20:v,marginBottom:S=v===void 0?e==="bottom"?30:0:v,marginLeft:A=v===void 0?20:v,label:C,labelAnchor:D,labelArrow:T,labelOffset:M,ariaLabel:I=`${t}-axis`,...N}){return p=Zr(p),m=Zr(m),y=Zr(y),D!==void 0&&(D=zl(D,"labelAnchor",["center","left","right"])),T=zbe(T),Fu(p&&!ai(s)?Obt(t,e,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,y:b,ariaLabel:I,...N}):null,ai(l)?null:Ibt(t,e,n,{fill:l,fillOpacity:u,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:y,y:b,marginTop:w,marginRight:_,marginBottom:S,marginLeft:A,ariaLabel:I,...N}),!ai(l)&&C!==null?Rv([],Pbe({fill:l,fillOpacity:u,...N},function(P,O,R,L,B){const z=L[t],{marginTop:U,marginRight:V,marginBottom:W,marginLeft:H}=t==="x"&&B.inset||B,Y=D??(z.bandwidth?"center":"right"),se=M??(e==="top"?U:W)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-se:se,this.dx=Y==="right"?V-3:Y==="left"?3-H:0,this.ariaLabel=`${I} label`,{facets:[[0]],channels:{text:{value:[Ube(t,z,{anchor:e,label:C,labelAnchor:Y,labelArrow:T})]}}}})):null)}function Tbt(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=e+(t==="y"?"-empty":""),frameAnchor:a=e,tickSize:l,inset:u=0,insetLeft:c=u,insetRight:f=u,dx:h=0,y:d=t==="y"?void 0:null,ariaLabel:p,...m}){return R2(wbe,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...m,dx:e==="left"?+h-Ws+ +c:+h+Ws-f,anchor:"start",length:l,shape:e==="left"?Lbt:Pbt})}function Obt(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=e+(t==="x"?"-empty":""),frameAnchor:a=e,tickSize:l,inset:u=0,insetTop:c=u,insetBottom:f=u,dy:h=0,x:d=t==="x"?void 0:null,ariaLabel:p,...m}){return R2(xbe,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:d,...m,dy:e==="bottom"?+h-Ws-f:+h+Ws+ +c,anchor:"start",length:l,shape:e==="bottom"?Fbt:Nbt})}function Mbt(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*U5):0),text:l,textAnchor:u=Math.abs(o)>60?"middle":e==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:p=h,dx:m=0,ariaLabel:y,y:b=t==="y"?void 0:null,...v}){return R2(ube,t,n,{ariaLabel:`${y} tick label`},{facetAnchor:r,frameAnchor:i,text:l,textAnchor:u,lineAnchor:c,fontVariant:f,rotate:o,y:b,...v,dx:e==="left"?+m-s-a+ +d:+m+ +s+ +a-p},function(w,_,S,A,C){f===void 0&&(this.fontVariant=$be(w)),l===void 0&&(C.text=Bbe(w,_,S,A,e))})}function Ibt(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*U5):0),text:l,textAnchor:u=Math.abs(o)>=10?o<0^e==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:p=h,dy:m=0,x:y=t==="x"?void 0:null,ariaLabel:b,...v}){return R2(lbe,t,n,{ariaLabel:`${b} tick label`},{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:u,lineAnchor:c,fontVariant:f,rotate:o,x:y,...v,dy:e==="bottom"?+m+ +s+ +a-p:+m-s-a+ +d},function(w,_,S,A,C){f===void 0&&(this.fontVariant=$be(w)),l===void 0&&(C.text=Bbe(w,_,S,A,e))})}function Obe(){const[t,e]=fg(...arguments);return Fbe("y",_be(e),t,e)}function Mbe(){const[t,e]=fg(...arguments);return Fbe("fy",Sbe(e),t,e)}function Ibe(){const[t,e]=fg(...arguments);return Nbe("x",Abe(e),t,e)}function Rbe(){const[t,e]=fg(...arguments);return Nbe("fx",Cbe(e),t,e)}function Fbe(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:s=e==="left"?i:null,x2:o=e==="right"?i:null,ariaLabel:a=`${t}-grid`,ariaHidden:l=!0,...u}){return R2(q0,t,n,{ariaLabel:a,ariaHidden:l},{y:r,x1:s,x2:o,...Lbe(u)})}function Nbe(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:s=e==="top"?i:null,y2:o=e==="bottom"?i:null,ariaLabel:a=`${t}-grid`,ariaHidden:l=!0,...u}){return R2(j0,t,n,{ariaLabel:a,ariaHidden:l},{x:r,y1:s,y2:o,...Lbe(u)})}function Lbe({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...s}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...s}}function Pbe({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:u,clip:c=!1},f){return[,t]=sa(t),[,e]=zi(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:u,clip:c,initializer:f}}function R2(t,e,n,r,i,s){let o;function a(c,f,h,d,p,m){const y=c==null&&(e==="fx"||e==="fy"),{[e]:b}=d;if(!b)throw new Error(`missing scale: ${e}`);const v=b.domain();let{interval:w,ticks:_,tickFormat:S,tickSpacing:A=e==="x"?80:35}=i;if(typeof _=="string"&&jbe(b)&&(w=_,_=void 0),_===void 0&&(_=T2(w,b.type)??Rbt(b,A)),c==null){if(ap(_))c=lg(_);else if(Ky(_))c=fI(_,...Qi(v));else if(b.interval){let D=b.interval;if(b.ticks){const[T,M]=Qi(v),I=(M-T)/D[jS];D=jZ(D,I/_)??D,c=fI(D,T,M)}else{c=v;const T=c.length;D=jZ(D,T/_)??D,D!==b.interval&&(c=fI(D,...Qi(c)))}if(D===b.interval){const T=Math.round(c.length/_);T>1&&(c=c.filter((M,I)=>I%T===0))}}else b.ticks?c=b.ticks(_):c=v;if(!b.ticks&&c.length&&c!==v){const D=new y2(v);c=c.filter(T=>D.has(T)),c.length||Fd(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?f=[op(c)]:o[e]={scale:e,value:xt}}s?.call(this,b,c,_,S,o);const C=Object.fromEntries(Object.entries(o).map(([D,T])=>[D,{...T,value:wn(c,T.value)}]));return y&&(f=m.filterFacets(c,C)),{data:c,facets:f,channels:C}}const l=ko(i).initializer,u=t(n,ko({...i,initializer:a},l));return n==null?(o=u.channels,u.channels={}):o={},r!==void 0&&Object.assign(u,r),u.clip===void 0&&(u.clip=!1),u}function Rbt(t,e){const[n,r]=Qi(t.range());return(r-n)/e}function Bbe(t,e,n,r,i){return{value:Sj(t,e,n,r,i)}}function Sj(t,e,n,r,i){return typeof r=="function"&&!(t.type==="log"&&t.tickFormat)?r:r===void 0&&e&&oa(e)?Pmt(t.type,e,i)??Iv:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):typeof r=="string"&&t.domain().length>0?(oa(t.domain())?MS:Lu)(r):r===void 0?Iv:Vs(r)}function fI(t,e,n){return t.range(e,t.offset(t.floor(n)))}const Fbt={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},Nbt={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Lbt={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},Pbt={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function $be(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function Ube(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:s}={}){if(!(r==null||r.inferred&&jbe(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),s==="auto"&&(s=(!e.bandwidth||e.interval)&&!/[ââââ]/.test(r)),!s)return r;if(s===!0){const o=Tye(e);o&&(s=/x$/.test(t)||i==="center"?/x$/.test(t)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`â ${r}`;case"right":return`${r} â`;case"up":return n==="right"?`${r} â`:`â ${r}`;case"down":return n==="right"?`${r} â`:`â ${r}`}return r}}function zbe(t="auto"){return ai(t)?!1:typeof t=="boolean"?t:zl(t,"labelArrow",["auto","up","right","down","left"])}function jbe(t){return oa(t.domain())}function yee(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function Bbt(t,{opacity:e,...n}={}){if(!I1(t)&&!Fye(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return qbe(t,n,(r,i,s,o)=>r.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",zi(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function $bt(t,{fill:e=t.hint?.fill!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=t.hint?.stroke!==void 0?t.hint.stroke:ai(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[u,c]=sa(e),[f,h]=sa(r),d=yee(l,u),p=yee(l,f),m=o*o*Math.PI;return n=zi(n)[1],i=zi(i)[1],s=zi(s)[1],qbe(t,a,(y,b,v,w)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",w).attr("fill",u==="color"?_=>d.scale(_):c).attr("fill-opacity",n).attr("stroke",f==="color"?_=>p.scale(_):h).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",_=>{const S=Sd();return t.scale(_).draw(S,m),S}))}function qbe(t,e={},n){let{columns:r,tickFormat:i,fontVariant:s=Hye(t),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:u=0,className:c,style:f,width:h}=e;const d=IT(e);c=pj(c),i=Sj(t.scale,t.domain,void 0,i);const p=Nn("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,t,a,l).call(y=>y.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(m=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,t,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(y=>y.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",Wi(s,"normal")).call(gj,f).node()}const z5=new Map([["symbol",$bt],["color",Vbe],["opacity",jbt]]);function Ubt(t={}){for(const[e,n]of z5){const r=t[e];if(Dm(r)){const i=IT(t);let s;if(e==="symbol"){const{fill:o,stroke:a=o===void 0&&Dm(t.color)?"color":void 0}=t;s={fill:o,stroke:a}}return n(SL(e,r,s),Aj(i,r,t),o=>Dm(t[o])?SL(o,t[o]):null)}}throw new Error("unknown legend type; no scale found")}function zbt(t,e,n={}){return(r,i)=>{if(!z5.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return z5.get(r)(t[r],Aj(e,n[r],i),s=>t[s])}}function Aj({className:t,...e},{label:n,ticks:r,tickFormat:i}={},s){return Zmt(s,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function Vbe(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return Bbt(t,n);case"ramp":return abt(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function jbt({type:t,interpolate:e,...n},{legend:r=!0,color:i=Ha(0,0,0),...s}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Vbe({type:t,...n,interpolate:qbt(i)},{legend:r,...s})}function qbt(t){const{r:e,g:n,b:r}=Ha(t)||Ha(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function Vbt(t,e,n){const r=[];for(const[i,s]of z5){const o=n[i];if(o?.legend&&i in t){const a=s(t[i],Aj(e,t[i],o),l=>t[l]);a!=null&&r.push(a)}}return r}function $T(t={},e="x"){return H1e(t)?t:{...t,[e]:xt}}function UT(t={},e="y"){return G1e(t)?t:{...t,[e]:xt}}function Wbe(t,e){if(e.length===1)return{data:t,facets:e};const n=x3(t),r=new Uint8Array(n);let i=0;for(const a of e)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:t,facets:e};t=v3(t);const s=t[U1e]=new Uint32Array(n+i);e=e.map(a=>v3(a,Uint32Array));let o=n;r.fill(0);for(const a of e)for(let l=0,u=a.length;l<u;++l){const c=a[l];r[c]?(a[l]=o,t[o]=t[c],s[o]=c,++o):s[c]=c,r[c]=1}return{data:t,facets:e}}function Hbe(t={},e={}){arguments.length===1&&([t,e]=F2(t));const{y1:n,y:r=n,x:i,...s}=e,[o,a,l,u]=N2(r,i,"y","x",t,s);return{...o,y1:n,y:a,x1:l,x2:u,x:L5(l,u)}}function Wbt(t={},e={}){arguments.length===1&&([t,e]=F2(t));const{y1:n,y:r=n,x:i}=e,[s,o,a]=N2(r,i,"y","x",t,e);return{...s,y1:n,y:o,x:a}}function Hbt(t={},e={}){arguments.length===1&&([t,e]=F2(t));const{y1:n,y:r=n,x:i}=e,[s,o,,a]=N2(r,i,"y","x",t,e);return{...s,y1:n,y:o,x:a}}function Gbe(t={},e={}){arguments.length===1&&([t,e]=F2(t));const{x1:n,x:r=n,y:i,...s}=e,[o,a,l,u]=N2(r,i,"x","y",t,s);return{...o,x1:n,x:a,y1:l,y2:u,y:L5(l,u)}}function Gbt(t={},e={}){arguments.length===1&&([t,e]=F2(t));const{x1:n,x:r=n,y:i}=e,[s,o,a]=N2(r,i,"x","y",t,e);return{...s,x1:n,x:o,y:a}}function Ybt(t={},e={}){arguments.length===1&&([t,e]=F2(t));const{x1:n,x:r=n,y:i}=e,[s,o,,a]=N2(r,i,"x","y",t,e);return{...s,x1:n,x:o,y:a}}function zT({x:t,x1:e,x2:n,...r}={}){return r=R1(r,"y"),e===void 0&&n===void 0?Hbe({x:t,...r}):([e,n]=Y1e(t,e,n),{...r,x1:e,x2:n})}function jT({y:t,y1:e,y2:n,...r}={}){return r=R1(r,"x"),e===void 0&&n===void 0?Gbe({y:t,...r}):([e,n]=Y1e(t,e,n),{...r,y1:e,y2:n})}function F2(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const Xbt={length:!0};function N2(t,e=qz,n,r,{offset:i,order:s,reverse:o},a){if(e===null)throw new Error(`stack requires ${r}`);const l=ug(a),[u,c]=ya(t),[f,h]=El(e),[d,p]=El(e);return f.hint=d.hint=Xbt,i=Kbt(i),s=Zbt(s,i,r),[Uc(a,(m,y,b)=>{({data:m,facets:y}=Wbe(m,y));const v=t==null?void 0:c(P5(wn(m,t),b?.[n])),w=wn(m,e,Float64Array),_=wn(m,l),S=s&&s(m,v,w,_),A=x3(m),C=h(new Float64Array(A)),D=p(new Float64Array(A)),T=[];for(const M of y){const I=v?Array.from(ng(M,N=>v[N]).values()):[M];if(S)for(const N of I)N.sort(S);for(const N of I){let P=0,O=0;o&&N.reverse();for(const R of N){const L=w[R];L<0?P=D[R]=(C[R]=P)+L:L>0?O=D[R]=(C[R]=O)+L:D[R]=C[R]=O}}T.push(I)}return i&&i(T,C,D,_),{data:m,facets:y}}),u,f,d]}function Kbt(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return Qbt;case"center":case"silhouette":return Jbt;case"wiggle":return Xbe}throw new Error(`unknown offset: ${t}`)}}function Ybe(t,e){let n=0,r=0;for(const i of t){const s=e[i];s<n&&(n=s),s>r&&(r=s)}return[n,r]}function Qbt(t,e,n){for(const r of t)for(const i of r){const[s,o]=Ybe(i,n);for(const a of i){const l=1/(o-s||1);e[a]=l*(e[a]-s),n[a]=l*(n[a]-s)}}}function Jbt(t,e,n){for(const r of t){for(const i of r){const[s,o]=Ybe(i,n);for(const a of i){const l=(o+s)/2;e[a]-=l,n[a]-=l}}Kbe(r,e,n)}Qbe(t,e,n)}function Xbe(t,e,n,r){for(const i of t){const s=new Jm;let o=0;for(const a of i){let l=-1;const u=a.map(d=>Math.abs(n[d]-e[d])),c=a.map(d=>{l=r?r[d]:++l;const p=n[d]-e[d],m=s.has(l)?p-s.get(l):0;return s.set(l,p),m}),f=[0,...zrt(c)];for(const d of a)e[d]+=o,n[d]+=o;const h=yc(u);h&&(o-=yc(u,(d,p)=>(c[p]/2+f[p])*d)/h)}Kbe(i,e,n)}Qbe(t,e,n)}function Kbe(t,e,n){const r=ui(t,i=>ui(i,s=>e[s]));for(const i of t)for(const s of i)e[s]-=r,n[s]-=r}function Qbe(t,e,n){const r=t.length;if(r===1)return;const i=t.map(a=>a.flat()),s=i.map(a=>(ui(a,l=>e[l])+Ci(a,l=>n[l]))/2),o=ui(s);for(let a=0;a<r;a++){const l=o-s[a];for(const u of i[a])e[u]+=l,n[u]+=l}}function Zbt(t,e,n){if(t===void 0&&e===Xbe)return bee(Ru);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?F5:Ru;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return evt(i);case"z":return tvt(i);case"sum":return nvt(i);case"appearance":return rvt(i);case"inside-out":return bee(i)}return vee(z1e(t))}if(typeof t=="function")return(t.length===1?vee:ivt)(t);if(sp(t))return svt(t);throw new Error(`invalid order: ${t}`)}}function evt(t){return(e,n,r)=>(i,s)=>t(r[i],r[s])}function tvt(t){return(e,n,r,i)=>(s,o)=>t(i[s],i[o])}function nvt(t){return qT(t,(e,n,r,i)=>PU(op(e),s=>yc(s,o=>r[o]),s=>i[s]))}function rvt(t){return qT(t,(e,n,r,i)=>PU(op(e),s=>n[$U(s,o=>r[o])],s=>i[s]))}function bee(t){return qT(t,(e,n,r,i)=>{const s=op(e),o=PU(s,f=>n[$U(f,h=>r[h])],f=>i[f]),a=Sb(s,f=>yc(f,h=>r[h]),f=>i[f]),l=[],u=[];let c=0;for(const f of o)c<0?(c+=a.get(f),l.push(f)):(c-=a.get(f),u.push(f));return u.reverse().concat(l)})}function vee(t){return e=>{const n=wn(e,t);return(r,i)=>Ru(n[r],n[i])}}function ivt(t){return e=>sp(e)?(n,r)=>t(e[n],e[r]):(n,r)=>t(e.get(n),e.get(r))}function svt(t){return qT(Ru,()=>t)}function qT(t,e){return(n,r,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new Jm(e(n,r,i,s).map((a,l)=>[a,l]));return(a,l)=>t(o.get(s[a]),o.get(s[l]))}}const ovt={ariaLabel:"rect"};class VT extends Pr{constructor(e,n={}){const{x1:r,y1:i,x2:s,y2:o}=n;super(e,{x1:{value:r,scale:"x",type:r!=null&&s==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&o==null?"band":void 0,optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,ovt),Cj(this,n),kj(this,n)}render(e,n,r,i,s){const{x:o,y:a}=n;let{x1:l,y1:u,x2:c,y2:f}=r;const{marginTop:h,marginRight:d,marginBottom:p,marginLeft:m,width:y,height:b}=i,{projection:v}=s,{insetTop:w,insetRight:_,insetBottom:S,insetLeft:A}=this,{rx:C,ry:D,rx1y1:T,rx1y2:M,rx2y1:I,rx2y2:N}=this;(l||c)&&!v&&sh(o)&&(l=c=null),(u||f)&&!v&&sh(a)&&(u=f=null);const P=o?.bandwidth?o.bandwidth():0,O=a?.bandwidth?a.bandwidth():0;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{},0,0).call(R=>R.selectAll().data(e).enter().call(T||M||I||N?L=>L.append("path").call(Cr,this).call(Ej,l&&c?B=>l[B]+(c[B]<l[B]?-_:A):l?B=>l[B]+A:m+A,u&&f?B=>u[B]+(f[B]<u[B]?-S:w):u?B=>u[B]+w:h+w,l&&c?B=>c[B]-(c[B]<l[B]?-A:_):l?B=>l[B]+P-_:y-d-_,u&&f?B=>f[B]-(f[B]<u[B]?-w:S):u?B=>u[B]+O-S:b-p-S,this).call(ki,this,r):L=>L.append("rect").call(Cr,this).attr("x",l?c?B=>Math.min(l[B],c[B])+A:B=>l[B]+A:m+A).attr("y",u?f?B=>Math.min(u[B],f[B])+w:B=>u[B]+w:h+w).attr("width",l?c?B=>Math.max(0,Math.abs(c[B]-l[B])+P-A-_):P-A-_:y-d-m-_-A).attr("height",u?f?B=>Math.max(0,Math.abs(u[B]-f[B])+O-w-S):O-w-S:b-h-p-w-S).call(St,"rx",C).call(St,"ry",D).call(ki,this,r))).node()}}function Cj(t,{inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:s=e}={}){t.insetTop=Zr(n),t.insetRight=Zr(r),t.insetBottom=Zr(i),t.insetLeft=Zr(s)}function kj(t,{r:e,rx:n,ry:r,rx1:i=e,ry1:s=e,rx2:o=e,ry2:a=e,rx1y1:l=i!==void 0?+i:s!==void 0?+s:0,rx1y2:u=i!==void 0?+i:a!==void 0?+a:0,rx2y1:c=o!==void 0?+o:s!==void 0?+s:0,rx2y2:f=o!==void 0?+o:a!==void 0?+a:0}={}){l||u||c||f?(t.rx1y1=l,t.rx1y2=u,t.rx2y1=c,t.rx2y2=f):(t.rx=Wi(n,"auto"),t.ry=Wi(r,"auto"))}function Ej(t,e,n,r,i,s){const{rx1y1:o,rx1y2:a,rx2y1:l,rx2y2:u}=s;typeof e!="function"&&(e=Vs(e)),typeof n!="function"&&(n=Vs(n)),typeof r!="function"&&(r=Vs(r)),typeof i!="function"&&(i=Vs(i));const c=Math.max(Math.abs(o+l),Math.abs(a+u)),f=Math.max(Math.abs(o+a),Math.abs(l+u));t.attr("d",h=>{const d=e(h),p=n(h),m=r(h),y=i(h),b=d>m,v=p>y,w=b?m:d,_=b?d:m,S=v?y:p,A=v?p:y,C=Math.min(1,(_-w)/c,(A-S)/f),D=C*(b?v?u:l:v?a:o),T=C*(b?v?a:o:v?u:l),M=C*(b?v?o:a:v?l:u),I=C*(b?v?l:u:v?o:a);return`M${w},${S+I6(D,I)}A${D},${D} 0 0 ${D<0?0:1} ${w+M6(D,I)},${S}H${_-M6(T,M)}A${T},${T} 0 0 ${T<0?0:1} ${_},${S+I6(T,M)}V${A-I6(M,T)}A${M},${M} 0 0 ${M<0?0:1} ${_-M6(M,T)},${A}H${w+M6(I,D)}A${I},${I} 0 0 ${I<0?0:1} ${w},${A-I6(I,D)}Z`})}function M6(t,e){return e<0?t:Math.abs(t)}function I6(t,e){return e<0?Math.abs(t):t}function Dj(t,e){return new VT(t,Jye(Zye(e)))}function j5(t,e={}){return D2(e)||(e={...e,y:Zi,x2:xt,interval:1}),new VT(t,zT(Zye($T(e))))}function q5(t,e={}){return D2(e)||(e={...e,x:Zi,y2:xt,interval:1}),new VT(t,jT(Jye(UT(e))))}const avt={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},lvt={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Jbe extends Pr{constructor(e={}){const{anchor:n=null}=e;super(Yw,void 0,e,n==null?avt:lvt),this.anchor=V1e(n,"anchor",["top","right","bottom","left"]),Cj(this,e),n||kj(this,e)}render(e,n,r,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:u,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:p,insetBottom:m,insetLeft:y}=this,{rx:b,ry:v,rx1y1:w,rx1y2:_,rx2y1:S,rx2y2:A}=this,C=u+y,D=c-a-p,T=o+d,M=f-l-m;return Nn(h?"svg:line":w||_||S||A?"svg:path":"svg:rect",s).datum(0).call(ni,this,i,s).call(Cr,this).call(ki,this,r).call(Lr,this,{}).call(h==="left"?I=>I.attr("x1",C).attr("x2",C).attr("y1",T).attr("y2",M):h==="right"?I=>I.attr("x1",D).attr("x2",D).attr("y1",T).attr("y2",M):h==="top"?I=>I.attr("x1",C).attr("x2",D).attr("y1",T).attr("y2",T):h==="bottom"?I=>I.attr("x1",C).attr("x2",D).attr("y1",M).attr("y2",M):w||_||S||A?I=>I.call(Ej,C,T,D,M,this):I=>I.attr("x",C).attr("y",T).attr("width",D-C).attr("height",M-T).attr("rx",b).attr("ry",v)).node()}}function Tj(t){return new Jbe(t)}const hI={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},uvt=new Set(["geometry","href","src","ariaLabel","scales"]);class Zbe extends Pr{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ap(e)&&J1e(e)&&(n={...n,title:xt});const{x:r,y:i,x1:s,x2:o,y1:a,y2:l,anchor:u,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:y,lineHeight:b=1,lineWidth:v=20,frameAnchor:w,format:_,textAnchor:S="start",textOverflow:A,textPadding:C=8,title:D,pointerSize:T=12,pathFilter:M="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:s!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:D,optional:!0}},n,hI),this.anchor=yL(u,"anchor"),this.preferredAnchor=yL(c,"preferredAnchor"),this.frameAnchor=VS(w),this.textAnchor=Wi(S,"middle"),this.textPadding=+C,this.pointerSize=+T,this.pathFilter=Us(M),this.lineHeight=+b,this.lineWidth=+v,this.textOverflow=abe(A),this.monospace=!!f,this.fontFamily=Us(h),this.fontSize=Zr(d),this.fontStyle=Us(p),this.fontVariant=Us(m),this.fontWeight=Us(y);for(const I in hI)I in this.channels&&(this[I]=hI[I]);this.splitLines=fbe(this),this.clipLine=hbe(this),this.format=typeof _=="string"||typeof _=="function"?{title:_}:{..._}}render(e,n,r,i,s){const o=this,{x:a,y:l,fx:u,fy:c}=n,{ownerSVGElement:f,document:h}=s,{anchor:d,monospace:p,lineHeight:m,lineWidth:y}=this,{textPadding:b,pointerSize:v,pathFilter:w}=this,{marginTop:_,marginLeft:S}=i,{x1:A,y1:C,x2:D,y2:T,x:M=A??D,y:I=C??T}=r,N=u?u(e.fx)-S:0,P=c?c(e.fy)-_:0,[O,R]=Ah(this,i),L=Vye(r,O),B=Wye(r,R),z=p?xj:vj,U=z(Mb);let V,W;"title"in r?(V=xee.call(this,{title:r.channels.title},n),W=dvt):(V=xee.call(this,r.channels,n),W=pvt);const H=Nn("svg:g",s).call(ni,this,i,s).call(cbe,this).call(Lr,this,{x:M&&a,y:I&&l}).call(he=>he.selectAll().data(e).enter().append("g").attr("transform",be=>`translate(${Math.round(L(be))},${Math.round(B(be))})`).call(Cr,this).call(be=>be.append("path").attr("filter",w)).call(be=>be.append("text").each(function(fe){const me=Kr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const K=W.call(o,fe,e,V,n,r);if(typeof K=="string")for(const de of o.splitLines(K))Y(me,{value:o.clipLine(de)});else{const de=new Set;for(const ge of K){const{label:oe=""}=ge;oe&&de.has(oe)||(de.add(oe),Y(me,ge))}}})));function Y(he,{label:be,value:fe,color:me,opacity:K}){be??="",fe??="";const de=me!=null||K!=null;let ge,oe=y*100;const[Fe]=Fv(be,oe,z,U);if(Fe>=0)be=be.slice(0,Fe).trimEnd()+Mb,ge=fe.trim(),fe="";else{(be||!fe&&!de)&&(fe=" "+fe);const[je]=Fv(fe,oe-z(be),z,U);je>=0&&(ge=fe.trim(),fe=fe.slice(0,je).trimEnd()+Mb)}const Ce=he.append("tspan").attr("x",0).attr("dy",`${m}em`).text("â");be&&Ce.append("tspan").attr("font-weight","bold").text(be),fe&&Ce.append(()=>h.createTextNode(fe)),de&&Ce.append("tspan").text(" â ").attr("fill",me).attr("fill-opacity",K).style("user-select","none"),ge&&Ce.append("title").text(ge)}function se(){const{width:he,height:be}=i.facet??i;H.selectChildren().each(function(fe){let{x:me,width:K,height:de}=this.getBBox();K=Math.round(K),de=Math.round(de);let ge=d;if(ge===void 0){const Ce=L(fe)+N,je=B(fe)+P,Ge=Ce+K+v+b*2<he,Ee=Ce-K-v-b*2>0,rt=je+de+v+b*2<be,Vt=je-de-v-b*2>0;ge=Ge&&Ee?rt&&Vt?o.preferredAnchor:Vt?"bottom":"top":rt&&Vt?Ge?"left":"right":(Ge||Ee)&&(rt||Vt)?`${Vt?"bottom":"top"}-${Ge?"left":"right"}`:o.preferredAnchor}const oe=this.firstChild,Fe=this.lastChild;if(oe.setAttribute("d",hvt(ge,v,b,K,de)),me)for(const Ce of Fe.childNodes)Ce.setAttribute("x",-me);Fe.setAttribute("y",`${+cvt(ge,Fe.childNodes.length,m).toFixed(6)}em`),Fe.setAttribute("transform",`translate(${fvt(ge,v,b,K,de)})`)}),H.attr("visibility",null)}return e.length&&(H.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(se):typeof requestAnimationFrame<"u"&&requestAnimationFrame(se)),H.node()}}function eve(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=$c(e,n)),new Zbe(t,{...r,x:e,y:n})}function cvt(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function fvt(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function hvt(t,e,n,r,i){const s=r+n*2,o=i+n*2;switch(t){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${e},${e}h${s-e}v${o}h${-s}z`;case"top":return`M0,0l${e/2},${e/2}h${(s-e)/2}v${o}h${-s}v${-o}h${(s-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-s}v${o}h${s}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-o/2}h${-s}v${o}h${s}v${e/2-o/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${s-e}v${-o}h${-s}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(s-e)/2}v${-o}h${-s}v${o}h${(s-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-s}v${-o}h${s}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-o/2}h${s}v${o}h${-s}v${e/2-o/2}z`}}function xee(t,e){const n={};let r=this.format;r=wee(r,t,"x"),r=wee(r,t,"y"),this.format=r;for(const i in r){const s=r[i];if(!(s===null||s===!1))if(i==="fx"||i==="fy")n[i]=!0;else{const o=vL(t,i);o&&(n[i]=o)}}for(const i in t){if(i in n||i in r||uvt.has(i)||(i==="x"||i==="y")&&t.geometry)continue;const s=vL(t,i);if(s){if(s.scale==null&&s.defaultScale==="color")continue;n[i]=s}}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const i in n){const s=this.format[i];if(typeof s=="string"){const o=n[i]?.value??e[i]?.domain()??[];this.format[i]=(oa(o)?MS:Lu)(s)}else if(s===void 0||s===!0){const o=e[i];this.format[i]=o?.bandwidth?Sj(o,o.domain()):Iv}}return n}function wee(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const s=Object.entries(t),o=t[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[r,o],[i,o]),Object.fromEntries(s)}function dvt(t,e,{title:n}){return this.format.title(n.value[t],t)}function*pvt(t,e,n,r,i){for(const s in n){if(s==="fx"||s==="fy"){yield{label:V5(r,n,s),value:this.format[s](e[s],t)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:See(r,n,"x"),value:_ee(this.format.x2,n.x1,o,t)};else if(s==="y2"&&"y1"in n)yield{label:See(r,n,"y"),value:_ee(this.format.y2,n.y1,o,t)};else{const a=o.value[t],l=o.scale;if(!Gs(a)&&l==null)continue;yield{label:V5(r,n,s),value:this.format[s](a,t),color:l==="color"?i[s][t]:null,opacity:l==="opacity"?i[s][t]:null}}}}function _ee(t,e,n,r){return n.hint?.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}â${t(n.value[r],r)}`}function See(t,e,n){const r=V5(t,e,`${n}1`,n),i=V5(t,e,`${n}2`,n);return r===i?r:`${r}â${i}`}function V5(t,e,n,r=n){const i=e[n],s=t[i?.scale??n];return String(s?.label??i?.label??r)}function Oj(t={}){const{facet:e,style:n,title:r,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=t,l=pj(t.className),u=t.marks===void 0?[]:Cee(t.marks);u.push(...wvt(u));const c=vvt(e,t),f=new Map;for(const U of u){const V=kee(U,c,t);V&&f.set(U,V)}const h=new Map;c&&Lx(h,[c],t),Lx(h,f,t);const d=Cee(_vt(u,h,t));for(const U of d){const V=kee(U,c,t);V&&f.set(U,V)}u.unshift(...d);let p=gyt(h,t);if(p!==void 0){const U=c?aI(p,c):void 0;for(const W of u){if(W.facet===null||W.facet==="super")continue;const H=f.get(W);H!==void 0&&(H.facetsIndex=W.fx!=null||W.fy!=null?aI(p,H):U)}const V=new Set;for(const{facetsIndex:W}of f.values())W?.forEach((H,Y)=>{H?.length>0&&V.add(Y)});p.forEach(0<V.size&&V.size<p.length?(W,H)=>W.empty=!V.has(H):W=>W.empty=!1);for(const W of u)if(W.facet==="exclude"){const H=f.get(W);H!==void 0&&(H.facetsIndex=byt(H.facetsIndex))}}for(const U of wi.keys())Dm(t[U])&&U!=="fx"&&U!=="fy"&&h.set(U,[]);const m=new Map;for(const U of u){if(m.has(U))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:V,channels:W}=f.get(U)??{},{data:H,facets:Y,channels:se}=U.initialize(V,W,t);Mj(se,t),m.set(U,{data:H,facets:Y,channels:se})}const y=_L(Lx(h,m,t),t),b=sbt(y,u,t);lyt(y,b);const v=nee(y),{fx:w,fy:_}=v,S=w||_?Oye(y,b):b,A=w||_?Tvt(v,b):b,C=IT(t),D=C.document,T=uT("svg").call(D.documentElement);let M=T;C.ownerSVGElement=T,C.className=l,C.projection=Eyt(t,S),C.path=function(){return $S(this.projection??Ryt(v))},C.filterFacets=(U,V)=>aI(p,{channels:V,groups:fj(U,V)}),C.getMarkState=U=>{const V=m.get(U),W=f.get(U);return{...V,channels:{...V.channels,...W?.channels}}},C.dispatchValue=U=>{M.value!==U&&(M.value=U,M.dispatchEvent(new C.document.defaultView.Event("input",{bubbles:!0})))};const I=new Set;for(const[U,V]of m)if(U.initializer!=null){const W=U.facet==="super"?A:S,H=U.initializer(V.data,V.facets,V.channels,v,W,C);if(H.data!==void 0&&(V.data=H.data),H.facets!==void 0&&(V.facets=H.facets),H.channels!==void 0){const{fx:Y,fy:se,...he}=H.channels;bvt(he),Object.assign(V.channels,he);for(const be of Object.values(he)){const{scale:fe}=be;fe!=null&&!n1t(wi.get(fe))&&(tve(be,t),I.add(fe))}(Y!=null||se!=null)&&f.set(U,!0)}}if(I.size){const U=new Map;Lx(U,m,t,Y=>I.has(Y)),Lx(h,m,t,Y=>I.has(Y));const V=Dvt(_L(U,t),y),{scales:W,...H}=nee(V);Object.assign(y,V),Object.assign(v,H),Object.assign(v.scales,W)}let N,P;p!==void 0&&(N={x:w?.domain(),y:_?.domain()},p=myt(p,N),P=yyt(w,_,b));for(const[U,V]of m)V.values=U.scale(V.channels,v,C);const{width:O,height:R}=b;Kr(T).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",R).attr("viewBox",`0 0 ${O} ${R}`).attr("aria-label",o).attr("aria-description",a).call(U=>U.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call(gj,n);for(const U of u){const{channels:V,values:W,facets:H}=m.get(U);if(p===void 0||U.facet==="super"){let Y=null;if(H&&(Y=H[0],Y=U.filter(Y,V,W),Y.length===0))continue;const se=U.render(Y,v,W,A,C);if(se==null)continue;T.appendChild(se)}else{let Y;for(const se of p){if(!(U.facetAnchor?.(p,N,se)??!se.empty))continue;let he=null;if(H){const fe=f.has(U);if(he=H[fe?se.i:0],he=U.filter(he,V,W),he.length===0)continue;!fe&&he===H[0]&&(he=Tm(he)),he.fx=se.x,he.fy=se.y,he.fi=se.i}const be=U.render(he,v,W,S,C);if(be!=null){(Y??=Kr(T).append("g")).append(()=>be).datum(se);for(const fe of["aria-label","aria-description","aria-hidden","transform"])be.hasAttribute(fe)&&(Y.attr(fe,be.getAttribute(fe)),be.removeAttribute(fe))}}Y?.selectChildren().each(P)}}const L=Vbt(y,C,t),{figure:B=r!=null||i!=null||s!=null||L.length>0}=t;B&&(M=D.createElement("figure"),M.className=`${l}-figure`,M.style.maxWidth="initial",r!=null&&M.append(Aee(D,r,"h2")),i!=null&&M.append(Aee(D,i,"h3")),M.append(...L,T),s!=null&&M.append(gvt(D,s)),"value"in T&&(M.value=T.value,delete T.value)),M.scale=pyt(v.scales),M.legend=zbt(y,C,t);const z=W1t();return z>0&&Kr(T).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("â ï¸").append("title").text(`${z.toLocaleString("en-US")} warning${z===1?"":"s"}. Please check the console.`),M}function Aee(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function gvt(t,e){const n=t.createElement("figcaption");return n.append(e),n}function Cee(t){return t.flat(1/0).filter(e=>e!=null).map(mvt)}function mvt(t){return typeof t.render=="function"?t:new yvt(t)}class yvt extends Pr{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Mj(t,e){for(const n in t)tve(t[n],e);return t}function tve(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l==null?NaN:l*100:K1e(o,i)}=e[n]??{};a!=null&&(t.value=Rr(t.value,a),t.transform=!1)}function bvt(t){for(const e in t)gye(e,t[e])}function Lx(t,e,n,r=jmt){for(const{channels:i}of e.values())for(const s in i){const o=i[s],{scale:a}=o;if(a!=null&&r(a))if(a==="projection"){if(!Oyt(n)){const l=n.x?.domain===void 0,u=n.y?.domain===void 0;if(l||u){const[c,f]=Iyt(o);l&&dI(t,"x",c),u&&dI(t,"y",f)}}}else dI(t,a,o)}return t}function dI(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function vvt(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=Tv(t.data);if(i==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=S3(i,{value:n,scale:"fx"})),r!=null&&(s.fy=S3(i,{value:r,scale:"fy"})),Mj(s,e);const o=fj(i,s);return{channels:s,groups:o,data:t.data}}function kee(t,e,n){if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const l=Tv(t.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(l===null)return;const u={};return r!=null&&(u.fx=S3(l,{value:r,scale:"fx"})),i!=null&&(u.fy=S3(l,{value:i,scale:"fy"})),Mj(u,n),{channels:u,groups:fj(l,u)}}if(e===void 0)return;const{channels:s,groups:o,data:a}=e;if(t.facet!=="auto"||t.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&x3(Tv(t.data))===x3(a)&&Fd(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnât faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function xvt(t,e={}){return ko({...e,x:null,y:null},(n,r,i,s,o,a)=>a.getMarkState(t))}function wvt(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:s}=r;i=/^x$/i.test(i)?FT:/^y$/i.test(i)?E3:RT,r=i(xvt(n,r)),r.title=null,s===void 0&&(r.preferredAnchor=i===E3?"left":"bottom");const o=eve(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,e.push(o)}}return e}function _vt(t,e,n){let{projection:r,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:u,facet:c={},facet:{axis:f=l,grid:h}=c,x:{axis:d=l,grid:p=d===null?null:u}=i,y:{axis:m=l,grid:y=m===null?null:u}=s,fx:{axis:b=f,grid:v=b===null?null:h}=o,fy:{axis:w=f,grid:_=w===null?null:h}=a}=n;(r||!Dm(i)&&!Eee("x",t))&&(d=p=null),(r||!Dm(s)&&!Eee("y",t))&&(m=y=null),e.has("fx")||(b=v=null),e.has("fy")||(w=_=null),d===void 0&&(d=!N6(t,"x")),m===void 0&&(m=!N6(t,"y")),b===void 0&&(b=!N6(t,"fx")),w===void 0&&(w=!N6(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),b===!0&&(b=d==="top"||d===null?"bottom":"top"),w===!0&&(w=m==="right"||m===null?"left":"right");const S=[];return F6(S,_,Mbe,a),R6(S,w,kbe,"right","left",c,a),F6(S,v,Rbe,o),R6(S,b,Ebe,"top","bottom",c,o),F6(S,y,Obe,s),R6(S,m,wj,"left","right",n,s),F6(S,p,Ibe,i),R6(S,d,_j,"bottom","top",n,i),S}function R6(t,e,n,r,i,s,o){if(!e)return;const a=Svt(e);o=Avt(a?r:e,s,o);const{line:l}=o;(n===wj||n===_j)&&l&&!Ov(l)&&t.push(Tj(Cvt(o))),t.push(n(o)),a&&t.push(n({...o,anchor:i,label:null}))}function F6(t,e,n,r){!e||Ov(e)||t.push(n(kvt(e,r)))}function Svt(t){return/^\s*both\s*$/i.test(t)}function Avt(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:u,ariaLabel:c,ariaDescription:f,label:h=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:u,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:p,labelOffset:m}}function Cvt(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function kvt(t,{stroke:e=qS(t)?t:void 0,ticks:n=Evt(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:s}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:s}}function Evt(t){switch(typeof t){case"number":return!0;case"string":return!qS(t)}return ap(t)||typeof t?.range=="function"}function N6(t,e){const n=`${e}-axis `;return t.some(r=>r.ariaLabel?.startsWith(n))}function Eee(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function Dvt(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function Tvt({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=cj(n),u=t&&Dee(t),c=e&&Dee(e);return{marginTop:e?c[0]:r,marginRight:t?a-u[1]:i,marginBottom:e?l-c[1]:s,marginLeft:t?u[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function Dee(t){const e=t.domain();if(e.length===0)return[0,t.bandwidth()];let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const Ovt=new Map([["basis",amt],["basis-closed",lmt],["basis-open",umt],["bundle",cmt],["bump-x",Kgt],["bump-y",Qgt],["cardinal",fmt],["cardinal-closed",hmt],["cardinal-open",dmt],["catmull-rom",pmt],["catmull-rom-closed",gmt],["catmull-rom-open",mmt],["linear",zS],["linear-closed",ymt],["monotone-x",bmt],["monotone-y",vmt],["natural",xmt],["step",wmt],["step-after",Smt],["step-before",_mt]]);function Ij(t=zS,e){if(typeof t=="function")return t;const n=Ovt.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function nve(t=Nv,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Nv:Ij(t,e)}function Nv(t){return zS(t)}function Up(t={y:"count"},e={}){[t,e]=Lj(t,e);const{x:n,y:r}=e;return Nj(W5(n,e,xt),null,null,r,t,JS(e))}function zp(t={x:"count"},e={}){[t,e]=Lj(t,e);const{x:n,y:r}=e;return Nj(null,W5(r,e,xt),n,null,t,ZS(e))}function jg(t={fill:"count"},e={}){[t,e]=Lj(t,e);const{x:n,y:r}=Mvt(e);return Nj(n,r,null,null,t,JS(ZS(e)))}function rve(t,e,n={}){if(n?.interval==null)return n;const{reduce:r=oj}=n,i={filter:null};return n[e]!=null&&(i[e]=r),n[`${e}1`]!=null&&(i[`${e}1`]=r),n[`${e}2`]!=null&&(i[`${e}2`]=r),t(i,n)}function Rj(t={}){return rve(Up,"y",R1(t,"x"))}function Fj(t={}){return rve(zp,"x",R1(t,"y"))}function Nj(t,e,n,r,{data:i=sj,filter:s=B5,sort:o,reverse:a,...l}={},u={}){t=Tee(t),e=Tee(e),l=Ivt(l,u),i=ave(i,xt),o=o==null?void 0:sve("sort",o,u),s=s==null?void 0:ove("filter",s,u),n!=null&&Qp(l,"x","x1","x2")&&(n=null),r!=null&&Qp(l,"y","y1","y2")&&(r=null);const[c,f]=ya(t),[h,d]=ya(t),[p,m]=ya(e),[y,b]=ya(e),[v,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[_,S]=ya(v),{x:A,y:C,z:D,fill:T,stroke:M,x1:I,x2:N,y1:P,y2:O,domain:R,cumulative:L,thresholds:B,interval:z,...U}=u,[V,W]=ya(D),[H]=sa(T),[Y]=sa(M),[se,he]=ya(H),[be,fe]=ya(Y);return{..."z"in u&&{z:V||D},..."fill"in u&&{fill:se||T},..."stroke"in u&&{stroke:be||M},...Uc(U,(me,K,de)=>{const ge=P5(wn(me,v),de?.[w]),oe=wn(me,D),Fe=wn(me,H),Ce=wn(me,Y),je=ij(l,{z:oe,fill:Fe,stroke:Ce}),Ge=[],Ee=[],rt=ge&&S([]),Vt=oe&&W([]),Xe=Fe&&he([]),ht=Ce&&fe([]),ln=t&&f([]),er=t&&d([]),ze=e&&m([]),Be=e&&b([]),dt=Nvt(t,e,me);let Ht=0;for(const dn of l)dn.initialize(me);o&&o.initialize(me),s&&s.initialize(me);for(const dn of K){const dr=[];for(const un of l)un.scope("facet",dn);o&&o.scope("facet",dn),s&&s.scope("facet",dn);for(const[un,ct]of Om(dn,je))for(const[Vn,kr]of Om(ct,ge))for(const[Br,es]of dt(kr))if(je&&(es.z=un),!(s&&!s.reduce(Br,es))){dr.push(Ht++),Ee.push(i.reduceIndex(Br,me,es)),ge&&rt.push(Vn),oe&&Vt.push(je===oe?un:oe[(Br.length>0?Br:kr)[0]]),Fe&&Xe.push(je===Fe?un:Fe[(Br.length>0?Br:kr)[0]]),Ce&&ht.push(je===Ce?un:Ce[(Br.length>0?Br:kr)[0]]),ln&&(ln.push(es.x1),er.push(es.x2)),ze&&(ze.push(es.y1),Be.push(es.y2));for(const $r of l)$r.reduce(Br,es);o&&o.reduce(Br,es)}Ge.push(dr)}return hye(Ge,o,a),{data:Ee,facets:Ge}}),...!Qp(l,"x")&&(c?{x1:c,x2:h,x:L5(c,h)}:{x:A,x1:I,x2:N}),...!Qp(l,"y")&&(p?{y1:p,y2:y,y:L5(p,y)}:{y:C,y1:P,y2:O}),..._&&{[w]:_},...Object.fromEntries(l.map(({name:me,output:K})=>[me,K]))}}function Lj({cumulative:t,domain:e,thresholds:n,interval:r,...i},s){return[i,{cumulative:t,domain:e,thresholds:n,interval:r,...s}]}function W5(t,{cumulative:e,domain:n,thresholds:r,interval:i},s){return t={...O2(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=r),t.interval===void 0&&(t.interval=i),t.value===void 0&&(t.value=s),t.thresholds=ive(t.thresholds,t.interval),t}function Mvt(t){let{x:e,y:n}=t;return e=W5(e,t),n=W5(n,t),[e.value,n.value]=$c(e.value,n.value),{x:e,y:n}}function Tee(t){if(t==null)return;const{value:e,cumulative:n,domain:r=Qi,thresholds:i}=t,s=o=>{let a=wn(o,e),l;if(oa(a)||Fvt(i)){a=Rr(a,q1e,Float64Array);let[c,f]=typeof r=="function"?r(a):r,h=typeof i=="function"&&!Ky(i)?i(a,c,f):i;typeof h=="number"&&(h=upe(c,f,h)),Ky(h)&&(r===Qi&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),l=h}else{a=La(a);let[c,f]=typeof r=="function"?r(a):r,h=typeof i=="function"&&!Ky(i)?i(a,c,f):i;if(typeof h=="number")if(r===Qi){let d=t3(c,f,h);if(isFinite(d))if(d>0){let p=Math.round(c/d),m=Math.round(f/d);p*d<=c||--p,m*d>f||++m;let y=m-p+1;h=new Float64Array(y);for(let b=0;b<y;++b)h[b]=(p+b)*d}else if(d<0){d=-d;let p=Math.round(c*d),m=Math.round(f*d);p/d<=c||--p,m/d>f||++m;let y=m-p+1;h=new Float64Array(y);for(let b=0;b<y;++b)h[b]=(p+b)/d}else h=[c];else h=[c]}else h=P0(c,f,h);else Ky(h)&&(r===Qi&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));l=h}const u=[];if(l.length===1)u.push([l[0],l[0]]);else for(let c=1;c<l.length;++c)u.push([l[c-1],l[c]]);return u.bin=(n<0?Pvt:n>0?Lvt:Pj)(u,l,a),u};return s.label=Sh(e),s}function ive(t,e,n=Oee){if(t===void 0)return e===void 0?n:T2(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return Krt;case"scott":return Ade;case"sturges":return BU;case"auto":return Oee}return vT(t)}return t}function Ivt(t,e){return aye(t,e,sve)}function sve(t,e,n){return nj(t,e,n,ove)}function ove(t,e,n){return rj(t,e,n,ave)}function ave(t,e){return ET(t,e,Rvt)}function Rvt(t){switch(`${t}`.toLowerCase()){case"x":return Bvt;case"x1":return Uvt;case"x2":return zvt;case"y":return $vt;case"y1":return jvt;case"y2":return qvt;case"z":return dye}throw new Error(`invalid bin reduce: ${t}`)}function Oee(t,e,n){return Math.min(200,Ade(t,e,n))}function Fvt(t){return Wmt(t)||ap(t)&&oa(t)}function Nvt(t,e,n){const r=t?.(n),i=e?.(n);return r&&i?function*(s){const o=r.bin(s);for(const[a,[l,u]]of r.entries()){const c=i.bin(o[a]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:l,y1:h,x2:u,y2:d}]}}:r?function*(s){const o=r.bin(s);for(const[a,[l,u]]of r.entries())yield[o[a],{data:n,x1:l,x2:u}]}:function*(s){const o=i.bin(s);for(const[a,[l,u]]of i.entries())yield[o[a],{data:n,y1:l,y2:u}]}}function Pj(t,e,n){return e=La(e),r=>{const i=t.map(()=>[]);for(const s of r)i[FD(e,n[s])-1]?.push(s);return i}}function Lvt(t,e,n){const r=Pj(t,e,n);return i=>{const s=r(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],u=s[o];for(const c of l)u.push(c)}return s}}function Pvt(t,e,n){const r=Pj(t,e,n);return i=>{const s=r(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const u of a)l.push(u)}return s}}function lve(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const Bvt={reduceIndex(t,e,{x1:n,x2:r}){return lve(n,r)}},$vt={reduceIndex(t,e,{y1:n,y2:r}){return lve(n,r)}},Uvt={reduceIndex(t,e,{x1:n}){return n}},zvt={reduceIndex(t,e,{x2:n}){return n}},jvt={reduceIndex(t,e,{y1:n}){return n}},qvt={reduceIndex(t,e,{y2:n}){return n}},Vvt={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class WT extends Pr{constructor(e,n={}){const{x1:r,y1:i,x2:s,y2:o,z:a,curve:l,tension:u}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:ug(n),optional:!0}},n,Vvt),this.z=a,this.curve=Ij(l,u)}filter(e){return e}render(e,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:u=a}=r;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n,0,0).call(c=>c.selectAll().data(jye(e,[o,a,l,u],this,r)).enter().append("path").call(Cr,this).call($5,this,r).attr("d",Iz().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>u[f]))).node()}}function TL(t,e){return e===void 0?Lv(t,{x:wT,y:b3}):new WT(t,e)}function D3(t,e){const{y:n=Zi,...r}=Fj(e);return new WT(t,zT($T({...r,y1:n,y2:void 0},n===Zi?"x2":"x")))}function Lv(t,e){const{x:n=Zi,...r}=Rj(e);return new WT(t,jT(UT({...r,x1:n,x2:void 0},n===Zi?"y2":"y")))}const Wvt={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class uve extends Pr{constructor(e,n={}){const{x1:r,y1:i,x2:s,y2:o,curve:a,tension:l}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Wvt),this.curve=nve(a,l),M2(this,n)}project(e,n,r){this.curve!==Nv&&super.project(e,n,r)}render(e,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:u=a}=r,{curve:c}=this;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(f=>f.selectAll().data(e).enter().append("path").call(Cr,this).attr("d",c===Nv&&s.projection?Hvt(s.path(),o,a,l,u):h=>{const d=Sd(),p=c(d);return p.lineStart(),p.point(o[h],a[h]),p.point(l[h],u[h]),p.lineEnd(),d}).call(ki,this,r).call(QS,this,r,s)).node()}}function Hvt(t,e,n,r,i){return e=La(e),n=La(n),r=La(r),i=La(i),s=>t({type:"LineString",coordinates:[[e[s],n[s]],[r[s],i[s]]]})}function cve(t,{x:e,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=H5(e,n,r),[s,o]=H5(i,s,o),new uve(t,{...a,x1:n,x2:r,y1:s,y2:o})}function H5(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const Gvt={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class fve extends Pr{constructor(e,n={}){const{x1:r,y1:i,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:u=8,inset:c=0,insetStart:f=c,insetEnd:h=c,sweep:d}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Gvt),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+u,this.insetStart=+f,this.insetEnd=+h,this.sweep=Yvt(d)}render(e,n,r,i,s){const{x1:o,y1:a,x2:l=o,y2:u=a,SW:c}=r,{strokeWidth:f,bend:h,headAngle:d,headLength:p,insetStart:m,insetEnd:y}=this,b=c?_=>c[_]:Vs(f===void 0?1:f),v=d*U5/2,w=p/1.5;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(_=>_.selectAll().data(e).enter().append("path").call(Cr,this).attr("d",S=>{let A=o[S],C=a[S],D=l[S],T=u[S];const M=Math.hypot(D-A,T-C);if(M<=m+y)return null;let I=Math.atan2(T-C,D-A);const N=Math.min(w*b(S),M/3),P=this.sweep(A,C,D,T)*h*U5,O=Math.hypot(M/Math.tan(P),M)/2;if(m||y)if(O<1e5){const se=Math.sign(P),[he,be]=Xvt([A,C],[D,T],O,se);if(m&&([A,C]=Mee([he,be,O],[A,C,m],-se*Math.sign(m))),y){const[fe,me]=Mee([he,be,O],[D,T,y],se*Math.sign(y));I+=Math.atan2(me-be,fe-he)-Math.atan2(T-be,D-he),D=fe,T=me}}else{const se=D-A,he=T-C,be=Math.hypot(se,he);m&&(A+=se/be*m,C+=he/be*m),y&&(D-=se/be*y,T-=he/be*y)}const R=I+P,L=R+v,B=R-v,z=D-N*Math.cos(L),U=T-N*Math.sin(L),V=D-N*Math.cos(B),W=T-N*Math.sin(B),H=O<1e5?`A${O},${O} 0,0,${P>0?1:0} `:"L",Y=N?`M${z},${U}L${D},${T}L${V},${W}`:"";return`M${A},${C}${H}${D},${T}${Y}`}).call(ki,this,r)).node()}}function Yvt(t=1){if(typeof t=="number")return Vs(Math.sign(t));if(typeof t=="function")return(e,n,r,i)=>Math.sign(t(e,n,r,i));switch(zl(t,"sweep",["+x","-x","+y","-y"])){case"+x":return(e,n,r)=>fr(e,r);case"-x":return(e,n,r)=>Qm(e,r);case"+y":return(e,n,r,i)=>fr(n,i);case"-y":return(e,n,r,i)=>Qm(n,i)}}function Xvt([t,e],[n,r],i,s){const o=n-t,a=r-e,l=Math.hypot(o,a),u=s*Math.sqrt(i*i-l*l/4)/l;return[(t+n)/2-a*u,(e+r)/2+o*u]}function Mee([t,e,n],[r,i,s],o){const a=r-t,l=i-e,u=Math.hypot(a,l),c=(a*a+l*l-s*s+n*n)/(2*u),f=o*Math.sqrt(n*n-c*c);return[t+(a*c+l*f)/u,e+(l*c-a*f)/u]}function Kvt(t,{x:e,x1:n,x2:r,y:i,y1:s,y2:o,...a}={}){return[n,r]=H5(e,n,r),[s,o]=H5(i,s,o),new fve(t,{...a,x1:n,x2:r,y1:s,y2:o})}const Qvt={ariaLabel:"bar"};class Bj extends Pr{constructor(e,n,r={},i=Qvt){super(e,n,r,i),Cj(this,r),kj(this,r)}render(e,n,r,i,s){const{rx:o,ry:a,rx1y1:l,rx1y2:u,rx2y1:c,rx2y2:f}=this,h=this._x(n,r,i),d=this._y(n,r,i),p=this._width(n,r,i),m=this._height(n,r,i);return Nn("svg:g",s).call(ni,this,i,s).call(this._transform,this,n).call(y=>y.selectAll().data(e).enter().call(l||u||c||f?b=>b.append("path").call(Cr,this).call(Ej,h,d,Iee(h,p),Iee(d,m),this).call(ki,this,r):b=>b.append("rect").call(Cr,this).attr("x",h).attr("width",p).attr("y",d).attr("height",m).call(St,"rx",o).call(St,"ry",a).call(ki,this,r))).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?s=>n[s]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?s=>n[s]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&e?e.bandwidth():s-r-i;return Math.max(0,l-o-a)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&e?e.bandwidth():s-r-i;return Math.max(0,l-o-a)}}function Iee(t,e){return typeof t=="function"&&typeof e=="function"?n=>t(n)+e(n):typeof t=="function"?n=>t(n)+e:typeof e=="function"?n=>t+e(n):t+e}class $j extends Bj{constructor(e,n={},r){const{x1:i,x2:s,y:o}=n;super(e,{x1:{value:i,scale:"x"},x2:{value:s,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},n,r)}_transform(e,n,{x:r}){e.call(Lr,n,{x:r},0,0)}_x({x:e},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:s}=this;return sh(e)?i+s:o=>Math.min(n[o],r[o])+s}_width({x:e},{x1:n,x2:r},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return sh(e)?o-i-s-a-l:u=>Math.max(0,Math.abs(r[u]-n[u])-a-l)}}class Uj extends Bj{constructor(e,n={},r){const{x:i,y1:s,y2:o}=n;super(e,{y1:{value:s,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,r)}_transform(e,n,{y:r}){e.call(Lr,n,{y:r},0,0)}_y({y:e},{y1:n,y2:r},{marginTop:i}){const{insetTop:s}=this;return sh(e)?i+s:o=>Math.min(n[o],r[o])+s}_height({y:e},{y1:n,y2:r},{marginTop:i,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return sh(e)?o-i-s-a-l:u=>Math.max(0,Math.abs(r[u]-n[u])-a-l)}}function cm(t,e={}){return D2(e)||(e={...e,y:Zi,x2:xt}),new $j(t,zT(yj($T(e))))}function fm(t,e={}){return D2(e)||(e={...e,x:Zi,y2:xt}),new Uj(t,jT(bj(UT(e))))}const Jvt={ariaLabel:"cell"};class HT extends Bj{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,Jvt)}_transform(e,n){e.call(Lr,n,{},0,0)}}function Jy(t,{x:e,y:n,...r}={}){return[e,n]=$c(e,n),new HT(t,{...r,x:e,y:n})}function Zvt(t,{x:e=Zi,fill:n,stroke:r,...i}={}){return n===void 0&&sa(r)[0]===void 0&&(n=xt),new HT(t,{...i,x:e,fill:n,stroke:r})}function e2t(t,{y:e=Zi,fill:n,stroke:r,...i}={}){return n===void 0&&sa(r)[0]===void 0&&(n=xt),new HT(t,{...i,y:e,fill:n,stroke:r})}const t2t={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function zj(t){return t.sort===void 0&&t.reverse===void 0?sye({channel:"-r"},t):t}class GT extends Pr{constructor(e,n={}){const{x:r,y:i,r:s,rotate:o,symbol:a=y3,frameAnchor:l}=n,[u,c]=zi(o,0),[f,h]=o1t(a),[d,p]=zi(s,f==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:Rd,optional:!0},rotate:{value:u,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},zj(n),t2t),this.r=p,this.rotate=c,this.symbol=h,this.frameAnchor=VS(l);const{channels:m}=this,{symbol:y}=m;if(y){const{fill:b,stroke:v}=m;y.hint={fill:b?b.value===y.value?"color":"currentColor":this.fill??"currentColor",stroke:v?v.value===y.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,r:c,rotate:f,symbol:h}=r,{r:d,rotate:p,symbol:m}=this,[y,b]=Ah(this,i),v=m===y3,w=c?void 0:d*d*Math.PI;return yT(d)&&(e=[]),Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o,y:u&&a}).call(_=>_.selectAll().data(e).enter().append(v?"circle":"path").call(Cr,this).call(v?S=>{S.attr("cx",l?A=>l[A]:y).attr("cy",u?A=>u[A]:b).attr("r",c?A=>c[A]:d)}:S=>{S.attr("transform",e4`translate(${l?A=>l[A]:y},${u?A=>u[A]:b})${f?A=>` rotate(${f[A]})`:p?` rotate(${p})`:""}`).attr("d",c&&h?A=>{const C=Sd();return h[A].draw(C,c[A]*c[A]*Math.PI),C}:c?A=>{const C=Sd();return m.draw(C,c[A]*c[A]*Math.PI),C}:h?A=>{const C=Sd();return h[A].draw(C,w),C}:(()=>{const A=Sd();return m.draw(A,w),A})())}).call(ki,this,r)).node()}}function hg(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=$c(e,n)),new GT(t,{...r,x:e,y:n})}function n2t(t,{x:e=xt,...n}={}){return new GT(t,tbe({...n,x:e}))}function r2t(t,{y:e=xt,...n}={}){return new GT(t,ebe({...n,y:e}))}function i2t(t,e){return hg(t,{...e,symbol:"circle"})}function s2t(t,e){return hg(t,{...e,symbol:"hexagon"})}const o2t={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class YT extends Pr{constructor(e,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ug(n),optional:!0}},n,o2t),this.z=s,this.curve=nve(o,a),M2(this,n)}filter(e){return e}project(e,n,r){this.curve!==Nv&&super.project(e,n,r)}render(e,n,r,i,s){const{x:o,y:a}=r,{curve:l}=this;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(u=>u.selectAll().data(jye(e,[o,a],this,r)).enter().append("path").call(Cr,this).call($5,this,r).call(fbt,this,r,s).attr("d",l===Nv&&s.projection?a2t(s.path(),o,a):l1e().curve(l).defined(c=>c>=0).x(c=>o[c]).y(c=>a[c]))).node()}}function a2t(t,e,n){return e=La(e),n=La(n),r=>{let i=[];const s=[i];for(const o of r)o===-1?(i=[],s.push(i)):i.push([e[o],n[o]]);return t({type:"MultiLineString",coordinates:s})}}function XT(t,{x:e,y:n,...r}={}){return[e,n]=$c(e,n),new YT(t,{...r,x:e,y:n})}function T3(t,{x:e=xt,y:n=Zi,...r}={}){return new YT(t,Fj({...r,x:e,y:n}))}function O3(t,{x:e=Zi,y:n=xt,...r}={}){return new YT(t,Rj({...r,x:e,y:n}))}function hve(t,e){e=u2t(e);const{x:n,y:r,color:i,size:s}=e,o=L6(t,n),a=L6(t,r),l=L6(t,i),u=L6(t,s);let{fx:c,fy:f,x:{value:h,reduce:d,zero:p,...m},y:{value:y,reduce:b,zero:v,...w},color:{value:_,color:S,reduce:A},size:{value:C,reduce:D},mark:T}=e;if(d===void 0&&(d=b==null&&h==null&&C==null&&y!=null?"count":null),b===void 0&&(b=d==null&&y==null&&C==null&&h!=null?"count":null),D===void 0&&C==null&&A==null&&d==null&&b==null&&(h==null||Di(o))&&(y==null||Di(a))&&(D="count"),p===void 0&&(p=P6(d)?!0:void 0),v===void 0&&(v=P6(b)?!0:void 0),h==null&&y==null)throw new Error("must specify x or y");if(d!=null&&y==null)throw new Error("reducing x requires y");if(b!=null&&h==null)throw new Error("reducing y requires x");T===void 0&&(T=C!=null||D!=null?"dot":P6(d)||P6(b)||A!=null?"bar":h!=null&&y!=null?Di(o)||Di(a)||d==null&&b==null&&!Px(o)&&!Px(a)?"dot":"line":h!=null||y!=null?"rule":null);let M,I,N;switch(T){case"dot":N=hg,I="stroke";break;case"line":N=o&&a||d!=null||b!=null?v||b!=null||o&&Px(o)?O3:p||d!=null||a&&Px(a)?T3:XT:o?T3:O3,I="stroke",Fee(l)&&(M=null);break;case"area":N=!(v||b!=null)&&(p||d!=null||a&&Px(a))?D3:Lv,I="fill",Fee(l)&&(M=null);break;case"rule":N=o?j0:q0,I="stroke";break;case"bar":N=d!=null?Di(a)?Ree(d)&&o&&Di(o)?Jy:cm:j5:b!=null?Di(o)?Ree(b)&&a&&Di(a)?Jy:fm:q5:A!=null||D!=null?o&&Di(o)&&a&&Di(a)?Jy:o&&Di(o)?fm:a&&Di(a)?cm:Dj:o&&Qy(o)&&!(a&&Qy(a))?cm:a&&Qy(a)&&!(o&&Qy(o))?fm:Jy,I="fill";break;default:throw new Error(`invalid mark: ${T}`)}let P={fx:c,fy:f,x:o??void 0,y:a??void 0,[I]:l??S,z:M,r:u??void 0,tip:!0},O,R={[I]:A??void 0,r:D??void 0};if(d!=null&&b!=null)throw new Error("cannot reduce both x and y");return b!=null?(R.y=b,O=Di(o)?w3:Up):d!=null?(R.x=d,O=Di(a)?_3:zp):(A!=null||D!=null)&&(o&&a?O=Di(o)&&Di(a)?tj:Di(o)?zp:Di(a)?Up:jg:o?O=Di(o)?w3:Up:a&&(O=Di(a)?_3:zp)),(O===jg||O===Up)&&(P.x={value:o,...m}),(O===jg||O===zp)&&(P.y={value:a,...w}),p===void 0&&(p=o&&!(O===jg||O===Up)&&(N===cm||N===D3||N===j5||N===q0)),v===void 0&&(v=a&&!(O===jg||O===zp)&&(N===fm||N===Lv||N===q5||N===j0)),{fx:c??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!p,...m},y:{value:y??null,reduce:b??null,zero:!!v,...w},color:{value:_??null,reduce:A??null,...S!==void 0&&{color:S}},size:{value:C??null,reduce:D??null},mark:T,markImpl:Nee[N],markOptions:P,transformImpl:Nee[O],transformOptions:R,colorMode:I}}function l2t(t,e){const n=hve(t,e),{fx:r,fy:i,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:u}=n,c=OL[n.markImpl],f=OL[n.transformImpl],h=r!=null||i!=null?Tj({strokeOpacity:.1}):null,d=[s?j0([0]):null,o?q0([0]):null],p=c(t,f?f(l,a):a);return u==="stroke"?Fu(h,d,p):Fu(h,p,d)}function Px(t){let e,n;for(const r of t){if(r==null)continue;if(e===void 0){e=r;continue}const i=Math.sign(fr(e,r));if(i){if(n!==void 0&&i!==n)return!1;e=r,n=i}}return!0}function u2t({x:t,y:e,color:n,size:r,fx:i,fy:s,mark:o}={}){return ff(t)||(t=gy(t)),ff(e)||(e=gy(e)),ff(n)||(n=qS(n)?{color:n}:gy(n)),ff(r)||(r=gy(r)),ff(i)&&({value:i}=gy(i)),ff(s)&&({value:s}=gy(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:t,y:e,color:n,size:r,fx:i,fy:s,mark:o}}function L6(t,e){const n=wn(t,e.value);return n&&(n.label=Sh(e.value)),n}function gy(t){return c2t(t)?{reduce:t}:{value:t}}function P6(t){return/^(?:distinct|count|sum|proportion)$/i.test(t)}function Ree(t){return/^(?:first|last|mode)$/i.test(t)}function c2t(t){if(t==null)return!1;if(typeof t.reduceIndex=="function"||typeof t.reduce=="function"&&jl(t)||/^p\d{2}$/i.test(t))return!0;switch(`${t}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function Fee(t){return t?new y2(t).size>t.length>>1:!1}const OL={dot:hg,line:XT,lineX:T3,lineY:O3,areaX:D3,areaY:Lv,ruleX:j0,ruleY:q0,barX:cm,barY:fm,rect:Dj,rectX:j5,rectY:q5,cell:Jy,bin:jg,binX:Up,binY:zp,group:tj,groupX:w3,groupY:_3},Nee=Object.fromEntries(Object.entries(OL).map(([t,e])=>[e,t]));function jj(t,e={}){let{x:n,x1:r,x2:i}=e;n===void 0&&r===void 0&&i===void 0&&(e={...e,x:n=xt});const s={};return n!=null&&(s.x=t),r!=null&&(s.x1=t),i!=null&&(s.x2=t),oh(s,e)}function qj(t,e={}){let{y:n,y1:r,y2:i}=e;n===void 0&&r===void 0&&i===void 0&&(e={...e,y:n=xt});const s={};return n!=null&&(s.y=t),r!=null&&(s.y1=t),i!=null&&(s.y2=t),oh(s,e)}function oh(t={},e={}){const n=ug(e),r=Object.entries(t).map(([i,s])=>{const o=X1e(i,e);if(o==null)throw new Error(`missing channel: ${i}`);const[a,l]=El(o);return{key:i,input:o,output:a,setOutput:l,map:f2t(s)}});return{...Uc(e,(i,s)=>{const o=wn(i,n),a=r.map(({input:u})=>wn(i,u)),l=r.map(({setOutput:u})=>u(new Array(i.length)));for(const u of s)for(const c of o?ng(u,f=>o[f]).values():[u])r.forEach(({map:f},h)=>f.mapIndex(c,a[h],l[h]));return{data:i,facets:s}}),...Object.fromEntries(r.map(({key:i,output:s})=>[i,s]))}}function f2t(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&jl(t))return h2t(t);if(typeof t=="function")return pI(Hz(t));switch(`${t}`.toLowerCase()){case"cumsum":return p2t;case"rank":return pI((e,n)=>Ede(e,r=>n[r]));case"quantile":return pI((e,n)=>d2t(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function h2t(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function d2t(t,e){const n=ND(t,e)-1;return Ede(t,e).map(r=>r/n)}function pI(t){return{mapIndex(e,n,r){const i=t(e,n);if(i.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,o=e.length;s<o;++s)r[e[s]]=i[s]}}}const p2t={mapIndex(t,e,n){let r=0;for(const i of t)n[i]=r+=e[i]}};function g2t(t={},e){return arguments.length===1&&(e=t),jj(KT(t),e)}function m2t(t={},e){return arguments.length===1&&(e=t),qj(KT(t),e)}function KT(t={}){typeof t=="number"&&(t={k:t});let{k:e,reduce:n,shift:r,anchor:i,strict:s}=t;if(i===void 0&&r!==void 0&&(i=b2t(r),Fd(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((e=Math.floor(e))>0))throw new Error(`invalid k: ${e}`);return v2t(n)(e,y2t(i,e),s)}function y2t(t="middle",e){switch(`${t}`.toLowerCase()){case"middle":return e-1>>1;case"start":return 0;case"end":return e-1}throw new Error(`invalid anchor: ${t}`)}function b2t(t){switch(`${t}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${t}`)}function v2t(t="mean"){if(typeof t=="string"){if(/^p\d{2}$/i.test(t))return B6(Vz(t));switch(t.toLowerCase()){case"deviation":return B6(xS);case"max":return $6((e,n)=>Ci(e,r=>n[r]));case"mean":return x2t;case"median":return B6(n3);case"min":return $6((e,n)=>ui(e,r=>n[r]));case"mode":return $6((e,n)=>kde(e,r=>n[r]));case"sum":return dve;case"variance":return B6(FU);case"difference":return S2t;case"ratio":return A2t;case"first":return C2t;case"last":return k2t}}if(typeof t!="function")throw new Error(`invalid reduce: ${t}`);return $6(Hz(t))}function B6(t){return(e,n,r)=>r?{mapIndex(i,s,o){const a=u=>s[u]==null?NaN:+s[u];let l=0;for(let u=0;u<e-1;++u)isNaN(a(u))&&++l;for(let u=0,c=i.length-e+1;u<c;++u)isNaN(a(u+e-1))&&++l,o[i[u+n]]=l===0?t(Tm(i,u,u+e),a):NaN,isNaN(a(u))&&--l}}:{mapIndex(i,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[i[l+n]]=t(Tm(i,0,l+e),a);for(let l=0,u=i.length-n;l<u;++l)o[i[l+n]]=t(Tm(i,l,l+e),a)}}}function $6(t){return(e,n,r)=>r?{mapIndex(i,s,o){let a=0;for(let l=0;l<e-1;++l)a+=Gs(s[i[l]]);for(let l=0,u=i.length-e+1;l<u;++l)a+=Gs(s[i[l+e-1]]),a===e&&(o[i[l+n]]=t(Tm(i,l,l+e),s)),a-=Gs(s[i[l]])}}:{mapIndex(i,s,o){for(let a=-n;a<0;++a)o[i[a+n]]=t(Tm(i,0,a+e),s);for(let a=0,l=i.length-n;a<l;++a)o[i[a+n]]=t(Tm(i,a,a+e),s)}}}function dve(t,e,n){return n?{mapIndex(r,i,s){let o=0,a=0;for(let l=0;l<t-1;++l){const u=i[r[l]];u===null||isNaN(u)?++o:a+=+u}for(let l=0,u=r.length-t+1;l<u;++l){const c=i[r[l]],f=i[r[l+t-1]];f===null||isNaN(f)?++o:a+=+f,s[r[l+e]]=o===0?a:NaN,c===null||isNaN(c)?--o:a-=+c}}}:{mapIndex(r,i,s){let o=0;const a=r.length;for(let l=0,u=Math.min(a,t-e-1);l<u;++l)o+=+i[r[l]]||0;for(let l=-e,u=a-e;l<u;++l)o+=+i[r[l+t-1]]||0,s[r[l+e]]=o,o-=+i[r[l]]||0}}}function x2t(t,e,n){if(n){const r=dve(t,e,n);return{mapIndex(i,s,o){r.mapIndex(i,s,o);for(let a=0,l=i.length-t+1;a<l;++a)o[i[a+e]]/=t}}}else return{mapIndex(r,i,s){let o=0,a=0;const l=r.length;for(let u=0,c=Math.min(l,t-e-1);u<c;++u){let f=i[r[u]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let u=-e,c=l-e;u<c;++u){let f=i[r[u+t-1]],h=i[r[u]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[r[u+e]]=o/a,h!==null&&!isNaN(h=+h)&&(o-=h,--a)}}}}function w2t(t,e,n,r){for(let i=n+r;n<i;++n){const s=t[e[n]];if(Gs(s))return s}}function _2t(t,e,n,r){for(let i=n+r-1;i>=n;--i){const s=t[e[i]];if(Gs(s))return s}}function pve(t,e,n,r){for(let i=n+r;n<i;++n){let s=t[e[n]];if(s!==null&&!isNaN(s=+s))return s}}function gve(t,e,n,r){for(let i=n+r-1;i>=n;--i){let s=t[e[i]];if(s!==null&&!isNaN(s=+s))return s}}function S2t(t,e,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-t;o<a;++o){const l=i[r[o]],u=i[r[o+t-1]];s[r[o+e]]=l===null||u===null?NaN:u-l}}}:{mapIndex(r,i,s){for(let o=-e,a=r.length-t+e+1;o<a;++o)s[r[o+e]]=gve(i,r,o,t)-pve(i,r,o,t)}}}function A2t(t,e,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-t;o<a;++o){const l=i[r[o]],u=i[r[o+t-1]];s[r[o+e]]=l===null||u===null?NaN:u/l}}}:{mapIndex(r,i,s){for(let o=-e,a=r.length-t+e+1;o<a;++o)s[r[o+e]]=gve(i,r,o,t)/pve(i,r,o,t)}}}function C2t(t,e,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-t;o<a;++o)s[r[o+e]]=i[r[o]]}}:{mapIndex(r,i,s){for(let o=-e,a=r.length-t+e+1;o<a;++o)s[r[o+e]]=w2t(i,r,o,t)}}}function k2t(t,e,n){return n?{mapIndex(r,i,s){for(let o=0,a=r.length-t;o<a;++o)s[r[o+e]]=i[r[o+t-1]]}}:{mapIndex(r,i,s){for(let o=-e,a=r.length-t+e+1;o<a;++o)s[r[o+e]]=_2t(i,r,o,t)}}}const Nd={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function E2t(t,{x:e=xt,y:n,k:r=Nd.k,color:i=Nd.color,opacity:s=Nd.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:u,strokeWidth:c,...f}={}){return Fu(ai(o)?null:D3(t,oh({x1:Mm({k:-r,...f}),x2:Mm({k:r,...f})},{x1:e,x2:e,y:n,fill:o,fillOpacity:a,...f})),ai(l)?null:T3(t,oh({x:Mm(f)},{x:e,y:n,stroke:l,strokeOpacity:u,strokeWidth:c,...f})))}function D2t(t,{x:e,y:n=xt,k:r=Nd.k,color:i=Nd.color,opacity:s=Nd.opacity,fill:o=i,fillOpacity:a=s,stroke:l=i,strokeOpacity:u,strokeWidth:c,...f}={}){return Fu(ai(o)?null:Lv(t,oh({y1:Mm({k:-r,...f}),y2:Mm({k:r,...f})},{x:e,y1:n,y2:n,fill:o,fillOpacity:a,...f})),ai(l)?null:O3(t,oh({y:Mm(f)},{x:e,y:n,stroke:l,strokeOpacity:u,strokeWidth:c,...f})))}function Mm({n:t=Nd.n,k:e=0,strict:n=Nd.strict,anchor:r=Nd.anchor}={}){return KT({k:t,reduce:i=>LD(i)+e*(xS(i)||0),strict:n,anchor:r})}const T2t={ariaLabel:"tick",fill:null,stroke:"currentColor"};class mve extends Pr{constructor(e,n,r){super(e,n,r,T2t),M2(this,r)}render(e,n,r,i,s){return Nn("svg:g",s).call(ni,this,i,s).call(this._transform,this,n).call(o=>o.selectAll().data(e).enter().append("line").call(Cr,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(ki,this,r).call(QS,this,r,s)).node()}}class yve extends mve{constructor(e,n={}){const{x:r,y:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Zr(o),this.insetBottom=Zr(a)}_transform(e,n,{x:r}){e.call(Lr,n,{x:r},Ws,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&e?s=>n[s]+i:r+i}_y2({y:e},{y:n},{height:r,marginBottom:i}){const{insetBottom:s}=this;return n&&e?o=>n[o]+e.bandwidth()-s:r-i-s}}class bve extends mve{constructor(e,n={}){const{x:r,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(e,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Zr(o),this.insetLeft=Zr(a)}_transform(e,n,{y:r}){e.call(Lr,n,{y:r},0,Ws)}_x1({x:e},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&e?s=>n[s]+i:r+i}_x2({x:e},{x:n},{width:r,marginRight:i}){const{insetRight:s}=this;return n&&e?o=>n[o]+e.bandwidth()-s:r-i-s}_y1(e,{y:n}){return r=>n[r]}_y2(e,{y:n}){return r=>n[r]}}function vve(t,{x:e=xt,...n}={}){return new yve(t,{...n,x:e})}function xve(t,{y:e=xt,...n}={}){return new bve(t,{...n,y:e})}function O2t(t,{x:e=xt,y:n=null,r,fill:i="#ccc",fillOpacity:s,stroke:o="currentColor",strokeOpacity:a,strokeWidth:l=2,sort:u,...c}={}){const f=n!=null?_3:ej;return Fu(q0(t,f({x1:Vj,x2:Wj},{x:e,y:n,stroke:o,strokeOpacity:a,...c})),cm(t,f({x1:"p25",x2:"p75"},{x:e,y:n,fill:i,fillOpacity:s,...c})),vve(t,f({x:"p50"},{x:e,y:n,stroke:o,strokeOpacity:a,strokeWidth:l,sort:u,...c})),hg(t,oh({x:wve},{x:e,y:n,z:n,r,stroke:o,strokeOpacity:a,...c})))}function M2t(t,{y:e=xt,x:n=null,r,fill:i="#ccc",fillOpacity:s,stroke:o="currentColor",strokeOpacity:a,strokeWidth:l=2,sort:u,...c}={}){const f=n!=null?w3:ej;return Fu(j0(t,f({y1:Vj,y2:Wj},{x:n,y:e,stroke:o,strokeOpacity:a,...c})),fm(t,f({y1:"p25",y2:"p75"},{x:n,y:e,fill:i,fillOpacity:s,...c})),xve(t,f({y:"p50"},{x:n,y:e,stroke:o,strokeOpacity:a,strokeWidth:l,sort:u,...c})),hg(t,oh({y:wve},{x:n,y:e,z:n,r,stroke:o,strokeOpacity:a,...c})))}function wve(t){const e=Vj(t),n=Wj(t);return t.map(r=>r<e||r>n?r:NaN)}function Vj(t){const e=_ve(t)*2.5-Sve(t)*1.5;return ui(t,n=>n>=e?n:NaN)}function Wj(t){const e=Sve(t)*2.5-_ve(t)*1.5;return Ci(t,n=>n<=e?n:NaN)}function _ve(t){return B0(t,.25)}function Sve(t){return B0(t,.75)}const I2t={ariaLabel:"raster",stroke:null,pixelSize:1};function my(t,e){const n=+t;if(isNaN(n))throw new Error(`invalid ${e}: ${t}`);return n}function Lee(t,e){const n=Math.floor(t);if(isNaN(n))throw new Error(`invalid ${e}: ${t}`);return n}class Ave extends Pr{constructor(e,n,r={},i){let{width:s,height:o,x:a,y:l,x1:u=a==null?0:void 0,y1:c=l==null?0:void 0,x2:f=a==null?s:void 0,y2:h=l==null?o:void 0,pixelSize:d=i.pixelSize,blur:p=0,interpolate:m}=r;if(s!=null&&(s=Lee(s,"width")),o!=null&&(o=Lee(o,"height")),u!=null&&(u=my(u,"x1")),c!=null&&(c=my(c,"y1")),f!=null&&(f=my(f,"x2")),h!=null&&(h=my(h,"y2")),a==null&&(u==null||f==null))throw new Error("missing x");if(l==null&&(c==null||h==null))throw new Error("missing y");e!=null&&s!=null&&o!=null&&(a===void 0&&u!=null&&f!=null&&(a=z2t(u,f,s)),l===void 0&&c!=null&&h!=null&&(l=j2t(c,h,s,o))),super(e,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:u==null?null:[u],scale:"x",optional:!0,filter:null},y1:{value:c==null?null:[c],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},r,i),this.width=s,this.height=o,this.pixelSize=my(d,"pixelSize"),this.blur=my(p,"blur"),this.interpolate=a==null||l==null?null:F2t(m)}}class Cve extends Ave{constructor(e,n={}){const{imageRendering:r}=n;if(e==null){const{fill:i,fillOpacity:s}=n;zi(s)[0]!==void 0&&(n=ML("fillOpacity",n)),sa(i)[0]!==void 0&&(n=ML("fill",n))}super(e,void 0,n,I2t),this.imageRendering=Wi(r,"auto")}scale(e,{color:n,...r},i){return super.scale(e,r,i)}render(e,n,r,i,s){const o=n[r.channels.fill?.scale]??(R=>R),{x:a,y:l}=r,{document:u}=s,[c,f,h,d]=Eve(r,i,s),p=h-c,m=d-f,{pixelSize:y,width:b=Math.round(Math.abs(p)/y),height:v=Math.round(Math.abs(m)/y)}=this,w=b*v;let{fill:_,fillOpacity:S}=r,A=0;if(this.interpolate){const R=b/p,L=v/m,B=Rr(a,U=>(U-c)*R,Float64Array),z=Rr(l,U=>(U-f)*L,Float64Array);_&&(_=this.interpolate(e,b,v,B,z,_)),S&&(S=this.interpolate(e,b,v,B,z,S))}else this.data==null&&e&&(A=e.fi*w);const C=u.createElement("canvas");C.width=b,C.height=v;const D=C.getContext("2d"),T=D.createImageData(b,v),M=T.data;let{r:I,g:N,b:P}=Ha(this.fill)??{r:0,g:0,b:0},O=(this.fillOpacity??1)*255;for(let R=0;R<w;++R){const L=R<<2;if(_){const B=o(_[R+A]);if(B==null){M[L+3]=0;continue}({r:I,g:N,b:P}=Ha(B))}S&&(O=S[R+A]*255),M[L+0]=I,M[L+1]=N,M[L+2]=P,M[L+3]=O}return this.blur>0&&Rrt(T,this.blur),D.putImageData(T,0,0),Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(R=>R.append("image").attr("transform",`translate(${c},${f}) scale(${Math.sign(h-c)},${Math.sign(d-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(St,"image-rendering",this.imageRendering).call(Cr,this).attr("xlink:href",C.toDataURL())).node()}}function kve(t,e,n){arguments.length<3&&(n=e,e=null);let{x:r,y:i,[t]:s,...o}=n;return r===void 0&&i===void 0&&Gmt(e)&&(r=wT,i=b3,s===void 0&&(s=qmt)),[e,{...o,x:r,y:i,[t]:s}]}function R2t(){const[t,e]=kve("fill",...arguments);return new Cve(t,t==null||e.fill!==void 0||e.fillOpacity!==void 0?e:{...e,fill:xt})}function Eve({x1:t,y1:e,x2:n,y2:r},i,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:u,marginBottom:c,marginLeft:f}=i;return[t&&s==null?t[0]:f,e&&s==null?e[0]:l,n&&s==null?n[0]:o-u,r&&s==null?r[0]:a-c]}function Dve({x1:t,y1:e,x2:n,y2:r},i,s,o){const a={};return t&&(a.x1=t),e&&(a.y1=e),n&&(a.x2=n),r&&(a.y2=r),Eve(DT(a,i),s,o)}function ML(t,e={}){const{[t]:n}=e;if(typeof n!="function")throw new Error(`invalid ${t}: not a function`);return ko({...e,[t]:void 0},function(r,i,s,o,a,l){const{x:u,y:c}=o;if(!u)throw new Error("missing scale: x");if(!c)throw new Error("missing scale: y");const[f,h,d,p]=Dve(s,o,a,l),m=d-f,y=p-h,{pixelSize:b}=this,{width:v=Math.round(Math.abs(m)/b),height:w=Math.round(Math.abs(y)/b)}=e,_=new Array(v*w*(i?i.length:1)),S=m/v,A=y/w;let C=0;for(const D of i??[void 0])for(let T=.5;T<w;++T)for(let M=.5;M<v;++M,++C)_[C]=n(u.invert(f+M*S),c.invert(h+T*A),D);return{data:_,facets:i,channels:{[t]:{value:_,scale:"auto"}}}})}function F2t(t){if(typeof t=="function")return t;if(t==null)return IL;switch(`${t}`.toLowerCase()){case"none":return IL;case"nearest":return Gj;case"barycentric":return Hj();case"random-walk":return Yj()}throw new Error(`invalid interpolate: ${t}`)}function IL(t,e,n,r,i,s){const o=new Array(e*n);for(const a of t)r[a]<0||r[a]>=e||i[a]<0||i[a]>=n||(o[Math.floor(i[a])*e+Math.floor(r[a])]=s[a]);return o}function Hj({random:t=Oz(42)}={}){return(e,n,r,i,s,o)=>{const{points:a,triangles:l,hull:u}=og.from(e,d=>i[d],d=>s[d]),c=new o.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),h=U2t(o,t);for(let d=0;d<l.length;d+=3){const p=l[d],m=l[d+1],y=l[d+2],b=a[2*p],v=a[2*m],w=a[2*y],_=a[2*p+1],S=a[2*m+1],A=a[2*y+1],C=Math.min(b,v,w),D=Math.max(b,v,w),T=Math.min(_,S,A),M=Math.max(_,S,A),I=(S-A)*(b-w)+(_-A)*(w-v);if(!I)continue;const N=o[e[p]],P=o[e[m]],O=o[e[y]];for(let R=Math.floor(C);R<D;++R)for(let L=Math.floor(T);L<M;++L){if(R<0||R>=n||L<0||L>=r)continue;const B=R+.5,z=L+.5,U=Math.sign(I),V=(S-A)*(B-w)+(z-A)*(w-v);if(V*U<0)continue;const W=(A-_)*(B-w)+(z-A)*(b-w);if(W*U<0)continue;const H=I-(V+W);if(H*U<0)continue;const Y=R+n*L;c[Y]=h(N,V/I,P,W/I,O,H/I,R,L),f[Y]=1}}return N2t(c,f,i,s,o,n,r,u,e,h),c}}function N2t(t,e,n,r,i,s,o,a,l,u){n=Float64Array.from(a,d=>n[l[d]]),r=Float64Array.from(a,d=>r[l[d]]),i=Array.from(a,d=>i[l[d]]);const c=n.length,f=Array.from({length:c},(d,p)=>P2t(p,n,r));let h=0;for(let d=0;d<o;++d){const p=d+.5;for(let m=0;m<s;++m){const y=m+s*d;if(!e[y]){const b=m+.5;for(let v=0;v<c;++v){const w=(c+h+(v%2?(v+1)/2:-v/2))%c;if(f[w](b,p)){const _=L2t(n.at(w-1),r.at(w-1),n[w],r[w],b,p);t[y]=u(i.at(w-1),_,i[w],1-_,i[w],0,m,d),h=w;break}}}}}}function L2t(t,e,n,r,i,s){const o=n-t,a=r-e,l=o*(n-i)+a*(r-s),u=o*(i-t)+a*(s-e);return l>0&&u>0?l/(l+u):+(l>u)}function Bx(t,e,n,r){return t*r-n*e}function P2t(t,e,n){const r=e.length,i=e.at(t-2),s=n.at(t-2),o=e.at(t-1),a=n.at(t-1),l=e[t],u=n[t],c=e.at(t+1-r),f=n.at(t+1-r),h=o-l,d=a-u,p=i-o,m=s-a,y=l-c,b=u-f,v=Math.hypot(h,d),w=Math.hypot(p,m),_=Math.hypot(y,b);return(S,A)=>{const C=S-o,D=A-a,T=S-l,M=A-u;return Bx(C,D,T,M)>-1e-6&&Bx(C,D,h,d)*w-Bx(C,D,p,m)*v>-1e-6&&Bx(T,M,y,b)*v-Bx(T,M,h,d)*_<=0}}function Gj(t,e,n,r,i,s){const o=new s.constructor(e*n),a=og.from(t,c=>r[c],c=>i[c]);let l,u;for(let c=.5,f=0;c<n;++c){u=l;for(let h=.5;h<e;++h,++f)u=a.find(h,c,u),h===.5&&(l=u),o[f]=s[t[u]]}return o}function Yj({random:t=Oz(42),minDistance:e=.5,maxSteps:n=2}={}){return(r,i,s,o,a,l)=>{const u=new l.constructor(i*s),c=og.from(r,p=>o[p],p=>a[p]);let f,h,d;for(let p=.5,m=0;p<s;++p){h=f;for(let y=.5;y<i;++y,++m){let b=y,v=p;d=h=c.find(b,v,h),y===.5&&(f=h);let w,_=0;for(;(w=Math.hypot(o[r[d]]-b,a[r[d]]-v))>e&&_<n;){const S=t(y,p,_)*2*Math.PI;b+=Math.cos(S)*w,v+=Math.sin(S)*w,d=c.find(b,v,d),++_}u[m]=l[r[d]]}}return u}}function B2t(t,e,n,r,i,s){return e*t+r*n+s*i}function $2t(t){return(e,n,r,i,s,o,a,l)=>{const u=t(a,l);return u<n?e:u<n+i?r:s}}function U2t(t,e){return Qy(t)||oa(t)?B2t:$2t(e)}function z2t(t,e,n){return{transform(r){const i=r.length,s=new Float64Array(i),o=(e-t)/n,a=t+o/2;for(let l=0;l<i;++l)s[l]=l%n*o+a;return s}}}function j2t(t,e,n,r){return{transform(i){const s=i.length,o=new Float64Array(s),a=(e-t)/r,l=t+a/2;for(let u=0;u<s;++u)o[u]=Math.floor(u/n)%r*a+l;return o}}}const Pee={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class Tve extends Ave{constructor(e,{smooth:n=!0,value:r,...i}={}){const s=zye({},i,Pee);if(r===void 0){for(const a in s)if(s[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(u=>u.value),label:Sh(r)};for(const l in s)i[l]==="value"&&(i[l]=a)}if(e==null){if(r==null)throw new Error("missing contour value");i=ML("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=xt),a===void 0&&(i.interpolate="nearest")}super(e,{value:{value:r,optional:!0}},q2t(i),Pee);const o={geometry:{value:xt}};for(const a in this.channels){const l=this.channels[a],{scale:u}=l;u==="x"||u==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(e,{x:n,y:r,value:i,...s},o){return super.filter(e,s,o)}render(e,n,r,i,s){const{geometry:o}=r,a=$S();return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(l=>{l.selectAll().data(e).enter().append("path").call(Cr,this).attr("d",u=>a(o[u])).call(ki,this,r)}).node()}}function q2t({thresholds:t,interval:e,...n}){return t=ive(t,e,BU),ko(n,function(r,i,s,o,a,l){const[u,c,f,h]=Dve(s,o,a,l),d=f-u,p=h-c,{pixelSize:m,width:y=Math.round(Math.abs(d)/m),height:b=Math.round(Math.abs(p)/m)}=this,v=y/d,w=b/p,_=s.value.value,S=[];if(this.interpolate){const{x:M,y:I}=KS(s,o,l),N=Rr(M,L=>(L-u)*v,Float64Array),P=Rr(I,L=>(L-c)*w,Float64Array),O=[s.x,s.y,s.value],R=[N,P,_];for(const L of i){const B=this.filter(L,O,R);S.push(this.interpolate(B,y,b,N,P,_))}}else if(i){const M=y*b,I=i.length;for(let N=0;N<I;++N)S.push(_.slice(N*M,N*M+M))}else S.push(_);if(this.blur>0)for(const M of S)mde({data:M,width:y,height:b},this.blur);const A=V2t(t,_,...H2t(S));if(A===null)throw new Error(`unsupported thresholds: ${t}`);const{contour:C}=s5().size([y,b]).smooth(this.smooth),D=[],T=[];for(const M of S)T.push(Cl(D.length,D.push(...Rr(A,I=>C(M,I)))));for(const{coordinates:M}of D)for(const I of M)for(const N of I)for(const P of N)P[0]=P[0]/v+u,P[1]=P[1]/w+c;return{data:D,facets:T,channels:pye(this.contourChannels,D)}})}function V2t(t,e,n,r){if(typeof t?.range=="function")return t.range(t.floor(n),r);if(typeof t=="function"&&(t=t(e,n,r)),typeof t!="number")return lg(t);const i=P0(..._de(n,r,t),t);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function W2t(){return new Tve(...kve("value",...arguments))}function H2t(t){return[ui(t,e=>ui(e,Bee)),Ci(t,e=>Ci(e,Bee))]}function Bee(t){return isFinite(t)?t:NaN}function G2t(t,e){return Xj(RT,t,e)}function Y2t(t,e={}){return Xj(FT,t,e)}function X2t(t,e={}){return Xj(E3,t,e)}function Xj(t,e,n={}){const{x:r,y:i,maxRadius:s}=n,o=t({px:r,py:i,maxRadius:s}),a=[];r!=null&&a.push(j0(e,$ee("x",{...o,inset:-6},n))),i!=null&&a.push(q0(e,$ee("y",{...o,inset:-6},n))),r!=null&&a.push(Rv(e,Uee("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Rv(e,Uee("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Fu(...a)}function Ove(t,{channels:e,...n},{facet:r,facetAnchor:i,fx:s,fy:o,[t]:a,channels:l,transform:u,initializer:c}){return{...n,facet:r,facetAnchor:i,fx:s,fy:o,[t]:a,channels:{...e,...l},transform:u,initializer:K2t(t,c)}}function K2t(t,e){return e==null?e:function(n,r,{x:i,y:s,px:o,py:a,...l},...u){const{channels:{x:c,y:f,...h}={},...d}=e.call(this,n,r,{...l,x:o,y:a},...u);return{channels:{...h,...c&&{px:c,...t==="x"&&{x:c}},...f&&{py:f,...t==="y"&&{y:f}}},...d}}}function $ee(t,e,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:s=r,ruleStrokeOpacity:o=i,ruleStrokeWidth:a}=n;return{...Ove(t,e,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function Uee(t,e,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:s,textStroke:o="var(--plot-background)",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...Ove(t,e,Q2t(t,n)),fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function Q2t(t,e){return ko(e,(n,r,i)=>({channels:{text:{value:vL(i,t)?.value}}}))}const J2t={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Z2t={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},ext={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},txt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},nxt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class rxt extends Pr{constructor(e,n={}){const{x:r,y:i,z:s,curve:o,tension:a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},n,J2t),this.curve=Ij(o,a),M2(this,n)}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,z:c}=r,{curve:f}=this,[h,d]=Ah(this,i),p=l?v=>l[v]:Vs(h),m=u?v=>u[v]:Vs(d),y=this;function b(v){let w=-1;const _=[],S={};for(const O in r)S[O]=[];const A=[],C=[],D=[],T=[];function M(O,R){O=v[O],R=v[R],_.push(++w),A[w]=p(O),D[w]=m(O),C[w]=p(R),T[w]=m(R);for(const L in r)S[L].push(r[L][R])}const{halfedges:I,hull:N,triangles:P}=og.from(v,p,m);for(let O=0;O<I.length;++O){const R=I[O];R>O&&M(P[O],P[R])}for(let O=0;O<N.length;++O)M(N[O],N[(O+1)%N.length]);Kr(this).selectAll().data(_).enter().append("path").call(Cr,y).attr("d",O=>{const R=Sd(),L=f(R);return L.lineStart(),L.point(A[O],D[O]),L.point(C[O],T[O]),L.lineEnd(),R}).call(ki,y,S).call(QS,y,S,s)}return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o,y:u&&a}).call(c?v=>v.selectAll().data(ng(e,w=>c[w]).values()).enter().append("g").each(b):v=>v.datum(e).each(b)).node()}}class Kj extends Pr{constructor(e,n={},r,i=({z:s})=>s){const{x:s,y:o}=n;super(e,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,z:c}=r,[f,h]=Ah(this,i),d=l?b=>l[b]:Vs(f),p=u?b=>u[b]:Vs(h),m=this;function y(b){const v=og.from(b,d,p);Kr(this).append("path").datum(b[0]).call(Cr,m).attr("d",m._render(v,i)).call(ki,m,r)}return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o,y:u&&a}).call(c?b=>b.selectAll().data(ng(e,v=>c[v]).values()).enter().append("g").each(y):b=>b.datum(e).each(y)).node()}}class ixt extends Kj{constructor(e,n={}){super(e,n,Z2t),this.fill="none"}_render(e){return e.render()}}class sxt extends Kj{constructor(e,n={}){super(e,n,ext,ug)}_render(e){return e.renderHull()}}class oxt extends Pr{constructor(e,n={}){const{x:r,y:i,z:s}=n;super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:s,optional:!0}},ko(n,function(o,a,l,u,c,f){let{x:h,y:d,z:p}=l;({x:h,y:d}=KS(l,u,f)),p=p?.value;const m=new Array((h??d).length).fill(null),[y,b]=Ah(this,c),v=h?_=>h[_]:Vs(y),w=d?_=>d[_]:Vs(b);for(let _ of a){h&&(_=_.filter(S=>Gs(v(S)))),d&&(_=_.filter(S=>Gs(w(S))));for(const[,S]of Om(_,p)){const A=og.from(S,v,w),C=Mve(A,c);for(let D=0,T=S.length;D<T;++D)m[S[D]]=C.renderCell(D)}}return{data:o,facets:a,channels:{cells:{value:m}}}}),txt)}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,cells:c}=r;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o,y:u&&a}).call(f=>{f.selectAll().data(e).enter().append("path").call(Cr,this).attr("d",h=>c[h]).call(ki,this,r)}).node()}}class axt extends Kj{constructor(e,n){super(e,n,nxt),this.fill="none"}_render(e,n){return Mve(e,n).render()}}function Mve(t,e){const{width:n,height:r,marginTop:i,marginRight:s,marginBottom:o,marginLeft:a}=e;return t.voronoi([a,i,n-s,r-o])}function t4(t,e,{x:n,y:r,...i}={}){return[n,r]=$c(n,r),new t(e,{...i,x:n,y:r})}function lxt(t,e){return t4(rxt,t,e)}function uxt(t,e){return t4(ixt,t,e)}function cxt(t,e){return t4(sxt,t,e)}function fxt(t,{x:e,y:n,initializer:r,...i}={}){return t4(oxt,t,{...Uc({...i,x:e,y:n},Wbe),initializer:r})}function hxt(t,e){return t4(axt,t,e)}const dxt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Ive extends Pr{constructor(e,{x:n,y:r,z:i,weight:s,fill:o,stroke:a,...l}={}){const u=zee(o)&&(o="currentColor",!0),c=zee(a)&&(a="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:ug({z:i,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},mxt({...l,fill:o,stroke:a},u,c),dxt),u&&(this.fill=void 0),c&&(this.stroke=void 0),this.z=i}filter(e){return e}render(e,n,r,i,s){const{contours:o}=r,a=$S();return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{}).call(l=>l.selectAll().data(e).enter().append("path").call(Cr,this).call(ki,this,r).attr("d",u=>a(o[u]))).node()}}function pxt(t,{x:e,y:n,...r}={}){return[e,n]=$c(e,n),new Ive(t,{...r,x:e,y:n})}const gxt=new Set(["x","y","z","weight"]);function mxt(t,e,n){let{bandwidth:i,thresholds:s}=t;return i=i===void 0?20:+i,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?La(s):+s,ko(t,function(o,a,l,u,c,f){const h=l.weight?La(l.weight.value):null,d=l.z?.value,{z:p}=this,[m,y]=Ah(this,c),{width:b,height:v}=c,{x:w,y:_}=KS(l,u,f),S=Object.fromEntries(Object.entries(l).filter(([P])=>!gxt.has(P)).map(([P,O])=>[P,{...O,value:[]}])),A=e&&[],C=n&&[],D=Hpt().x(w?P=>w[P]:m).y(_?P=>_[P]:y).weight(h?P=>h[P]:1).size([b,v]).bandwidth(i),T=[];for(const P of a){const O=[];T.push(O);for(const R of d?dj(P,d,p):[P]){const L=D.contours(R);O.push([R,L])}}let M=s;if(!(M instanceof xT)){let P=0;for(const O of T)for(const[,R]of O){const L=R.max;L>P&&(P=L)}M=Float64Array.from({length:s-1},(O,R)=>P*100*(R+1)/s)}const I=[],N=[];for(const P of T){const O=[];I.push(O);for(const[R,L]of P)for(const B of M){O.push(N.length),N.push(L(B/100)),A&&A.push(B),C&&C.push(B);for(const z in S)S[z].value.push(l[z].value[R[0]])}}return A&&A.push(0),C&&C.push(0),{data:o,facets:I,channels:{...S,...A&&{fill:{value:A,scale:"color"}},...C&&{stroke:{value:C,scale:"color"}},contours:{value:N}}}})}function zee(t){return/^density$/i.test(t)}function yxt(t,e){return Rve("x",t,e)}function bxt(t,e){return Rve("y",t,e)}function Rve(t,e,{x1:n,x2:r,y1:i,y2:s,x:o=n===void 0&&r===void 0?t==="y"?Zi:xt:void 0,y:a=i===void 0&&s===void 0?t==="x"?Zi:xt:void 0,fill:l,positiveFill:u="#3ca951",negativeFill:c="#4269d0",fillOpacity:f=1,positiveFillOpacity:h=f,negativeFillOpacity:d=f,stroke:p,strokeOpacity:m,z:y=sa(p)[0],clip:b,tip:v,render:w,..._}={}){return[n,r]=jee(o,n,r),[i,s]=jee(a,i,s),n===r&&i===s&&(t==="y"?i=nd(0):n=nd(0)),{tip:v}=R1({tip:v},t==="y"?"x":"y"),Fu(ai(u)?null:Object.assign(TL(e,{x1:n,x2:r,y1:i,y2:s,z:y,fill:u,fillOpacity:h,render:k3(w,qee(t,!0)),clip:b,..._}),{ariaLabel:"positive difference"}),ai(c)?null:Object.assign(TL(e,{x1:n,x2:r,y1:i,y2:s,z:y,fill:c,fillOpacity:d,render:k3(w,qee(t,!1)),clip:b,..._}),{ariaLabel:"negative difference"}),XT(e,{x:r,y:s,z:y,stroke:p,strokeOpacity:m,tip:v,clip:!0,..._}))}function jee(t,e,n){return e===void 0&&n===void 0?e=n=nd(t):e===void 0?(n=nd(n),e=t===void 0?n:nd(t)):n===void 0?(e=nd(e),n=t===void 0?e:nd(t)):(e=nd(e),n=nd(n)),[e,n]}function nd(t){let e;const{value:n,label:r=Sh(n)}=O2(t);return{transform:i=>e||(e=wn(i,n)),label:r}}function qee(t,e){const n=t==="x"?"y":"x",r=`${n}1`,i=`${n}2`,s=`${t}1`,o=`${t}2`;return(a,l,u,c,f,h)=>{const{[r]:d,[i]:p}=u,m=new Float32Array(d.length),y=new Float32Array(p.length),b=c[t==="y"?"height":"width"];(e===Tye(l[t])<0?m:y).fill(b);const v=h(a,l,{...u,[i]:d,[o]:y},c,f),w=h(a,l,{...u,[r]:p,[s]:m},c,f),_=v.querySelector("g")??v,S=w.querySelector("g")??w;for(let A=0;_.firstChild;A+=2){const C=hj(),D=Nn("svg:clipPath",f).attr("id",C).node();D.appendChild(_.firstChild),S.childNodes[A].setAttribute("clip-path",`url(#${C})`),S.insertBefore(D,S.childNodes[A])}return w}}function Fve({geometry:t=xt,...e}={}){const n=Mv(r=>wn(r,t));return ko({...e,x:null,y:null,geometry:{transform:n}},(r,i,s,o,a,l)=>{const u=n(r),c=u.length,f=new Float64Array(c),h=new Float64Array(c),{centroid:d}=l.path();for(let p=0;p<c;++p)[f[p],h[p]]=d(u[p]);return{data:r,facets:i,channels:{x:{value:f,scale:null,source:null},y:{value:h,scale:null,source:null}}}})}function vxt({geometry:t=xt,...e}={}){const n=Mv(i=>wn(i,t)),r=Mv(i=>wn(n(i),b0t));return{...e,x:{transform:i=>Float64Array.from(r(i),([s])=>s)},y:{transform:i=>Float64Array.from(r(i),([,s])=>s)},geometry:{transform:n}}}const xxt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Nve extends Pr{constructor(e,n={}){const[r,i]=zi(n.r,3);super(e,{x:{value:n.tip?n.x:null,scale:"x",optional:!0},y:{value:n.tip?n.y:null,scale:"y",optional:!0},r:{value:r,scale:"r",filter:Rd,optional:!0},geometry:{value:n.geometry,scale:"projection"}},zj(n),xxt),this.r=i}render(e,n,r,i,s){const{geometry:o,r:a}=r,l=s.path(),{r:u}=this;return yT(u)?e=[]:u!==void 0&&l.pointRadius(u),Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(c=>{c.selectAll().data(e).enter().append("path").call(Cr,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(ki,this,r)}).node()}}function Qj(t,e={}){return e.tip&&e.x===void 0&&e.y===void 0?e=Fve(e):e.geometry===void 0&&(e={...e,geometry:xt}),new Nve(t,e)}function wxt({strokeWidth:t=1.5,...e}={}){return Qj({type:"Sphere"},{strokeWidth:t,...e})}function _xt({strokeOpacity:t=.1,...e}={}){return Qj(O0t(),{strokeOpacity:t,...e})}const Xw=.5,Kw=0;function Sxt(t={fill:"count"},{binWidth:e,...n}={}){const{z:r}=n;return e=e===void 0?20:Zr(e),t=lye(t,n),Qp(t,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Qp(t,"r")&&(n.r=e/2),ko(n,(i,s,o,a,l,u)=>{let{x:c,y:f,z:h,fill:d,stroke:p,symbol:m}=o;if(c===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:c,y:f}=KS(o,a,u)),h=h?h.value:wn(i,r),d=d?.value,p=p?.value,m=m?.value;const y=ij(t,{z:h,fill:d,stroke:p,symbol:m}),b=h&&[],v=d&&[],w=p&&[],_=m&&[],S=[],A=[],C=[];let D=-1;for(const N of t)N.initialize(i);for(const N of s){const P=[];for(const O of t)O.scope("facet",N);for(const[O,R]of Om(N,y))for(const{index:L,extent:B}of Axt(i,R,c,f,e)){P.push(++D),A.push(B.x),C.push(B.y),h&&b.push(y===h?O:h[L[0]]),d&&v.push(y===d?O:d[L[0]]),p&&w.push(y===p?O:p[L[0]]),m&&_.push(y===m?O:m[L[0]]);for(const z of t)z.reduce(L,B)}S.push(P)}const T=o.x.scale,M=o.y.scale,I={x:{value:A,source:a[T]?{value:Rr(A,a[T].invert),scale:T}:null},y:{value:C,source:a[M]?{value:Rr(C,a[M].invert),scale:M}:null},...h&&{z:{value:b}},...d&&{fill:{value:v,scale:"auto"}},...p&&{stroke:{value:w,scale:"auto"}},...m&&{symbol:{value:_,scale:"auto"}},...Object.fromEntries(t.map(({name:N,output:P})=>[N,{scale:"auto",label:P.label,radius:N==="r"?e/2:void 0,value:P.transform()}]))};return{data:i,facets:S,channels:I}})}function Axt(t,e,n,r,i){const s=i*(1.5/rye),o=new Map;for(const a of e){let l=n[a],u=r[a];if(isNaN(l)||isNaN(u))continue;let c=Math.round(u=(u-Kw)/s),f=Math.round(l=(l-Xw)/i-(c&1)/2),h=u-c;if(Math.abs(h)*3>1){let m=l-f,y=f+(l<f?-1:1)/2,b=c+(u<c?-1:1),v=l-y,w=u-b;m*m+h*h>v*v+w*w&&(f=y+(c&1?1:-1)/2,c=b)}const d=`${f},${c}`;let p=o.get(d);p===void 0&&(p={index:[],extent:{data:t,x:(f+(c&1)/2)*i+Xw,y:c*s+Kw}},o.set(d,p)),p.index.push(a)}return o.values()}const Cxt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function kxt(t){return new Lve(t)}class Lve extends Pr{constructor({binWidth:e=20,clip:n=!0,...r}={}){super(Yw,void 0,{clip:n,...r},Cxt),this.binWidth=Zr(e)}render(e,n,r,i,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:u,marginLeft:c,width:f,height:h}=i,d=c-Xw,p=f-l-Xw,m=a-Kw,y=h-u-Kw,b=o/2,v=b*iye,w=v/2,_=b*2,S=v*1.5,A=Math.floor(d/_),C=Math.ceil(p/_),D=Math.floor((m+w)/S),T=Math.ceil((y-w)/S)+1,M=`m0,${Ep(-v)}l${Ep(b)},${Ep(w)}v${Ep(v)}l${Ep(-b)},${Ep(w)}`;let I=M;for(let N=D;N<T;++N)for(let P=A;P<C;++P)I+=`M${Ep(P*_+(N&1)*b)},${Ep(N*S)}${M}`;return Nn("svg:g",s).datum(0).call(ni,this,i,s).call(Lr,this,{},Ws+Xw,Ws+Kw).call(N=>N.append("path").call(Cr,this).call(ki,this,r).attr("d",I)).node()}}function Ep(t){return Math.round(t*1e3)/1e3}const Ext={ariaLabel:"image",fill:null,stroke:null};function Dxt(t){return/^\.*\//.test(t)}function Txt(t){return/^(blob|data|file|http|https):/i.test(t)}function Oxt(t){return typeof t=="string"&&(Dxt(t)||Txt(t))?[void 0,t]:[t,void 0]}class Pve extends Pr{constructor(e,n={}){let{x:r,y:i,r:s,width:o,height:a,rotate:l,src:u,preserveAspectRatio:c,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[p,m]=Oxt(u),[y,b]=zi(s),[v,w]=zi(o,b!==void 0?b*2:void 0),[_,S]=zi(a,b!==void 0?b*2:void 0),[A,C]=zi(l,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:y,scale:"r",filter:Rd,optional:!0},width:{value:v,filter:Rd,optional:!0},height:{value:_,filter:Rd,optional:!0},rotate:{value:A,optional:!0},src:{value:p,optional:!0}},zj(n),Ext),this.src=m,this.width=w,this.rotate=C,this.height=S,this.r=b,this.preserveAspectRatio=Wi(c,"xMidYMid"),this.crossOrigin=Us(f),this.frameAnchor=VS(h),this.imageRendering=Wi(d,"auto")}render(e,n,r,i,s){const{x:o,y:a}=n,{x:l,y:u,width:c,height:f,r:h,rotate:d,src:p}=r,{r:m,width:y,height:b,rotate:v}=this,[w,_]=Ah(this,i);return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,{x:l&&o,y:u&&a}).call(S=>S.selectAll().data(e).enter().append("image").call(Cr,this).attr("x",Vee(l,c,h,w,y,m)).attr("y",Vee(u,f,h,_,b,m)).attr("width",c?A=>c[A]:y!==void 0?y:h?A=>h[A]*2:m*2).attr("height",f?A=>f[A]:b!==void 0?b:h?A=>h[A]*2:m*2).attr("transform",d?A=>`rotate(${d[A]})`:v?`rotate(${v})`:null).attr("transform-origin",d||v?e4`${l?A=>l[A]:w}px ${u?A=>u[A]:_}px`:null).call(St,"href",p?A=>p[A]:this.src).call(St,"preserveAspectRatio",this.preserveAspectRatio).call(St,"crossorigin",this.crossOrigin).call(St,"image-rendering",this.imageRendering).call(St,"clip-path",h?A=>`circle(${h[A]}px)`:m!==void 0?`circle(${m}px)`:null).call(ki,this,r)).node()}}function Vee(t,e,n,r,i,s){return e&&t?o=>t[o]-e[o]/2:e?o=>r-e[o]/2:t&&i!==void 0?o=>t[o]-i/2:i!==void 0?r-i/2:n&&t?o=>t[o]-n[o]:n?o=>r-n[o]:t?o=>t[o]-s:r-s}function Mxt(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=$c(e,n)),new Pve(t,{...r,x:e,y:n})}function Ixt(t,e,n){var r=1e-8,i=e-1,s=n-1,o=0,a,l,u,c,f,h,d,p;if(t<=0)return 0;if(t>=1)return 1;for(a=Math.log(e/(e+n)),l=Math.log(n/(e+n)),u=Math.exp(e*a)/e,c=Math.exp(n*l)/n,d=u+c,t<u/d?h=Math.pow(e*d*t,1/e):h=1-Math.pow(n*d*(1-t),1/n),p=-Ib(e)-Ib(n)+Ib(e+n);o<10;o++){if(h===0||h===1)return h;if(f=Rxt(h,e,n)-t,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+p),c=f/u,h-=u=c/(1-.5*Math.min(1,c*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function Rxt(t,e,n){var r=t===0||t===1?0:Math.exp(Ib(e+n)-Ib(e)-Ib(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*Wee(t,e,n)/e:1-r*Wee(1-t,n,e)/n}function Wee(t,e,n){var r=1e-30,i=1,s=e+n,o=e+1,a=e-1,l=1,u=1-s*t/o,c,f,h,d;for(Math.abs(u)<r&&(u=r),u=1/u,d=u;i<=100&&(c=2*i,f=i*(n-i)*t/((a+c)*(e+c)),u=1+f*u,Math.abs(u)<r&&(u=r),l=1+f/l,Math.abs(l)<r&&(l=r),u=1/u,d*=u*l,f=-(e+i)*(s+i)*t/((e+c)*(o+c)),u=1+f*u,Math.abs(u)<r&&(u=r),l=1+f/l,Math.abs(l)<r&&(l=r),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function Ib(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=t)+5.5,o-=(i+.5)*Math.log(o);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/i)-o}function Fxt(t,e){var n=Ixt(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Nxt={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Bve extends Pr{constructor(e,n={}){const{x:r,y:i,z:s,ci:o=.95,precision:a=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:ug(n),optional:!0}},n,Nxt),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(e,n,r,i,s){const{x:o,y:a,z:l}=r,{ci:u}=this;return Nn("svg:g",s).call(ni,this,i,s).call(Lr,this,n).call(c=>c.selectAll().data(l?dj(e,l,this.z):[e]).enter().call(f=>f.append("path").attr("fill","none").call(Cr,this).call($5,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,o,a)).call(u&&!Ov(this.fill)?h=>h.select(Lxt).attr("stroke","none").call(Cr,this).call($5,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function Lxt(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Vd.svg,"path"),this)}class Pxt extends Bve{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:i,precision:s}=this,[o,a]=Qi(e,c=>r[c]),l=G5(e,r,n),u=$ve(e,r,n,(1-i)/2,l);return Iz().y(c=>c).x0(c=>u(c,-1)).x1(c=>u(c,1))(Cl(o,a-s/2,s).concat(a))}_renderLine(e,n,r){const[i,s]=Qi(e,a=>r[a]),o=G5(e,r,n);return`M${o(i)},${i}L${o(s)},${s}`}}class Bxt extends Bve{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:i,precision:s}=this,[o,a]=Qi(e,c=>n[c]),l=G5(e,n,r),u=$ve(e,n,r,(1-i)/2,l);return Iz().x(c=>c).y0(c=>u(c,-1)).y1(c=>u(c,1))(Cl(o,a-s/2,s).concat(a))}_renderLine(e,n,r){const[i,s]=Qi(e,a=>n[a]),o=G5(e,n,r);return`M${i},${o(i)}L${s},${o(s)}`}}function $xt(t,{y:e=Zi,x:n=xt,stroke:r,fill:i=ai(r)?"currentColor":r,...s}={}){return new Pxt(t,Fj({...s,x:n,y:e,fill:i,stroke:r}))}function Uxt(t,{x:e=Zi,y:n=xt,stroke:r,fill:i=ai(r)?"currentColor":r,...s}={}){return new Bxt(t,Rj({...s,x:e,y:n,fill:i,stroke:r}))}function G5(t,e,n){let r=0,i=0,s=0,o=0;for(const c of t){const f=e[c],h=n[c];r+=f,i+=h,s+=f*h,o+=f*f}const a=t.length,l=(a*s-r*i)/(a*o-r*r),u=(i-l*r)/a;return c=>l*c+u}function $ve(t,e,n,r,i){const s=yc(t,c=>e[c])/t.length;let o=0,a=0;for(const c of t)o+=(e[c]-s)**2,a+=(n[c]-i(e[c]))**2;const l=Math.sqrt(a/(t.length-2)),u=Fxt(r,t.length-2);return(c,f)=>{const h=i(c),d=l*Math.sqrt(1/t.length+(c-s)**2/o);return h+f*u*d}}function RL({path:t=xt,delimiter:e,frameAnchor:n,treeLayout:r=D5,treeSort:i,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=Jj(o),i=zve(i),a!=null&&(a=NL(a)),n===void 0&&(n=o.frameAnchor);const u=jve(e),c=Xve(l,NL),[f,h]=El(),[d,p]=El();return{x:f,y:d,frameAnchor:n,...Uc(l,(m,y)=>{const b=u(wn(m,t)),v=h([]),w=p([]);let _=-1;const S=[],A=[],C=t1e().path(M=>b[M]),D=sp(m)?M=>M.data=m[M.data]:M=>M.data=m.get(M.data),T=r();T.nodeSize&&T.nodeSize([1,1]),T.separation&&s!==void 0&&T.separation(s??qz);for(const M of c)M[Y5]=M[Gve]([]);for(const M of y){const I=[],N=C(M.filter(P=>b[P]!=null)).each(D);i!=null&&N.sort(i),T(N);for(const P of N.descendants())if(!(a!=null&&!a(P))){I.push(++_),S[_]=P.data,o.position(P,_,v,w);for(const O of c)O[Y5][_]=O[Yve](P)}A.push(I)}return{data:S,facets:A}}),...Object.fromEntries(c)}}function Uve({path:t=xt,delimiter:e,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:s=.5,treeLayout:o=D5,treeSort:a,treeSeparation:l,treeAnchor:u,treeFilter:c,...f}={}){u=Jj(u),a=zve(a),c!=null&&(c=Gee(c)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:s,...f};const h=jve(e),d=Xve(f,Gee),[p,m]=El(),[y,b]=El(),[v,w]=El(),[_,S]=El();return{x1:p,x2:y,y1:v,y2:_,...Uc(f,(A,C)=>{const D=h(wn(A,t)),T=m([]),M=b([]),I=w([]),N=S([]);let P=-1;const O=[],R=[],L=t1e().path(z=>D[z]),B=o();B.nodeSize&&B.nodeSize([1,1]),B.separation&&l!==void 0&&B.separation(l??qz);for(const z of d)z[Y5]=z[Gve]([]);for(const z of C){const U=[],V=L(z.filter(W=>D[W]!=null)).each(W=>W.data=A[W.data]);a!=null&&V.sort(a),B(V);for(const{source:W,target:H}of V.links())if(!(c!=null&&!c(H,W))){U.push(++P),O[P]=H.data,u.position(W,P,T,I),u.position(H,P,M,N);for(const Y of d)Y[Y5][P]=Y[Yve](H,W)}R.push(U)}return{data:O,facets:R}}),...Object.fromEntries(d)}}function Jj(t="left"){switch(`${t}`.trim().toLowerCase()){case"left":return zxt;case"right":return jxt}throw new Error(`invalid tree anchor: ${t}`)}const zxt={frameAnchor:"left",dx:6,position({x:t,y:e},n,r,i){r[n]=e,i[n]=-t}},jxt={frameAnchor:"right",dx:-6,position({x:t,y:e},n,r,i){r[n]=-e,i[n]=-t}};function zve(t){return t==null||typeof t=="function"?t:`${t}`.trim().toLowerCase().startsWith("node:")?Hee(NL(t)):Hee(qxt(t))}function Hee(t){return(e,n)=>Ru(t(e),t(n))}function qxt(t){return e=>e.data?.[t]}function jve(t="/"){if(t=`${t}`,t==="/")return n=>n;if(t.length!==1)throw new Error("delimiter must be exactly one character");const e=t.charCodeAt(0);return n=>n.map(r=>Vxt(r,e))}const FL=92,qve=47;function Vxt(t,e){if(e===FL)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=t.length;r<i;++r){switch(t.charCodeAt(r)){case FL:if(!n){n=!0;continue}break;case e:n?(t=t.slice(0,r-1)+t.slice(r),--r,--i):t=t.slice(0,r)+"/"+t.slice(r+1);break;case qve:n?(t=t.slice(0,r)+"\\\\"+t.slice(r),r+=2,i+=2):(t=t.slice(0,r)+"\\"+t.slice(r),++r,++i);break}n=!1}return t}function Wxt(t){let e=!1;for(let n=0,r=t.length;n<r;++n){switch(t.charCodeAt(n)){case FL:if(!e){e=!0;continue}case qve:e&&(t=t.slice(0,n-1)+t.slice(n),--n,--r);break}e=!1}return t}function Vve(t){return jl(t)&&typeof t.node=="function"}function Hxt(t){return jl(t)&&typeof t.link=="function"}function NL(t){if(Vve(t))return t.node;if(t=`${t}`.trim().toLowerCase(),!!t.startsWith("node:")){switch(t){case"node:name":return PL;case"node:path":return LL;case"node:internal":return Wve;case"node:external":return Hve;case"node:depth":return BL;case"node:height":return $L}throw new Error(`invalid node value: ${t}`)}}function Gee(t){if(Vve(t))return t.node;if(Hxt(t))return t.link;if(t=`${t}`.trim().toLowerCase(),!(!t.startsWith("node:")&&!t.startsWith("parent:"))){switch(t){case"parent:name":return U6(PL);case"parent:path":return U6(LL);case"parent:depth":return U6(BL);case"parent:height":return U6($L);case"node:name":return PL;case"node:path":return LL;case"node:internal":return Wve;case"node:external":return Hve;case"node:depth":return BL;case"node:height":return $L}throw new Error(`invalid link value: ${t}`)}}function LL(t){return t.id}function PL(t){return Gxt(t.id)}function BL(t){return t.depth}function $L(t){return t.height}function Wve(t){return!!t.children}function Hve(t){return!t.children}function U6(t){return(e,n)=>n==null?void 0:t(n)}function Gxt(t){let e=t.length;for(;--e>0&&!Yxt(t,e););return Wxt(t.slice(e+1))}function Yxt(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}const Gve=2,Yve=3,Y5=4;function Xve(t,e){const n=[];for(const r in t){const i=t[r],s=e(i);s!==void 0&&n.push([r,...El(i),s])}return n}function Kve(t,{fill:e,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:u,marker:c,markerStart:f=c,markerEnd:h=c,dot:d=ai(f)&&ai(h),text:p="node:name",textStroke:m="var(--plot-background)",title:y="node:path",dx:b,dy:v,textAnchor:w,treeLayout:_=D5,textLayout:S=_===D5||_===Jme?"mirrored":"normal",tip:A,...C}={}){if(b===void 0&&(b=Jj(C.treeAnchor).dx),w!==void 0)throw new Error("textAnchor is not a configurable tree option");S=zl(S,"textLayout",["mirrored","normal"]);function D(T){return Rv(t,RL({treeLayout:_,text:p,fill:e===void 0?"currentColor":e,stroke:m,dx:b,dy:v,title:y,...T,...C}))}return Fu(cve(t,Uve({treeLayout:_,markerStart:f,markerEnd:h,stroke:n!==void 0?n:e===void 0?"node:internal":e,strokeWidth:r,strokeOpacity:i,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:u,...C})),d?hg(t,RL({treeLayout:_,fill:e===void 0?"node:internal":e,title:y,tip:A,...C})):null,p!=null?S==="mirrored"?[D({textAnchor:"start",treeFilter:"node:external"}),D({textAnchor:"end",treeFilter:"node:internal",dx:-b})]:D():null)}function Xxt(t,e){return Kve(t,{...e,treeLayout:Jme})}const Qve={ariaLabel:"waffle"};class Jve extends $j{constructor(e,{unit:n=1,gap:r=1,round:i,multiple:s,...o}={}){super(e,e2e("x",o),Qve),this.unit=Math.max(0,n),this.gap=+r,this.round=t2e(i),this.multiple=n2e(s)}}class Zve extends Uj{constructor(e,{unit:n=1,gap:r=1,round:i,multiple:s,...o}={}){super(e,e2e("y",o),Qve),this.unit=Math.max(0,n),this.gap=+r,this.round=t2e(i),this.multiple=n2e(s)}}function e2e(t,e){const n=t==="y"?"x":"y",r=`${t}1`,i=`${t}2`;return ko(Kxt(e),function(s,o,a,l,u){const{round:c,unit:f}=this,h=a[r].value,d=a[i].value,p=DT({...n in a&&{[n]:a[n]},[r]:a[r],[i]:a[i]},l),m=this[t==="y"?"_width":"_height"](l,p,u),y=this[t==="y"?"_x":"_y"](l,p,u),b=f*Zxt(l.scales[t]),{multiple:v=Math.max(1,Math.floor(Math.sqrt(m/b)))}=this,w=Math.min(m/v,b*v),_=b*v,S=(m-v*w)/2,A=typeof y=="function"?L=>y(L)+S:y+S,C=l[t](0),D=t==="y"?([L,B])=>[L*w,-B*_]:([L,B])=>[B*_,L*w],T=typeof A=="function"?L=>A(L)-m/2:()=>A,[M,I]=t==="y"?[0,1]:[1,0],N=d.length,P=new Array(N),O=new Float64Array(N),R=new Float64Array(N);for(let L=0;L<N;++L){P[L]=Zj(c(h[L]/f),c(d[L]/f),v).map(D);const B=P[L].pop();O[L]=B[M]+T(L),R[L]=B[I]+C}return{channels:{polygon:{value:P,source:null,filter:null},[`c${n}`]:{value:[w,A],source:null,filter:null},[`c${t}`]:{value:[_,C],source:null,filter:null},[n]:{value:O,scale:null,source:null},[r]:{value:R,scale:null,source:a[r]},[i]:{value:R,scale:null,source:a[i]}}}})}function Kxt({render:t,...e}){return{...e,render:k3(t,function(n,r,i,s,o){const{gap:a,rx:l,ry:u}=this,{channels:c,ariaLabel:f,href:h,title:d,...p}=i,{document:m}=o,y=c.polygon.value,[b,v]=c.cx.value,[w,_]=c.cy.value,S=Vyt(),A=m.createElementNS(Vd.svg,"pattern");A.setAttribute("width",b),A.setAttribute("height",w),A.setAttribute("patternUnits","userSpaceOnUse");const C=A.appendChild(m.createElementNS(Vd.svg,"rect"));return C.setAttribute("x",a/2),C.setAttribute("y",a/2),C.setAttribute("width",b-a),C.setAttribute("height",w-a),l!=null&&C.setAttribute("rx",l),u!=null&&C.setAttribute("ry",u),Nn("svg:g",o).call(ni,this,s,o).call(this._transform,this,r).call(D=>D.selectAll().data(n).enter().append(()=>A.cloneNode(!0)).attr("id",T=>`${S}-${T}`).select("rect").call(Cr,this).call(ki,this,p)).call(D=>D.selectAll().data(n).enter().append("path").attr("transform",e4`translate(${v},${_})`).attr("d",T=>`M${y[T].join("L")}Z`).attr("fill",T=>`url(#${S}-${T})`).attr("stroke",this.stroke==null?null:"none").call(ki,this,{ariaLabel:f,href:h,title:d})).node()})}}function Zj(t,e,n){if(e<t)return Zj(e,t,n);if(t<0)return Qxt(t,e,n,Math.ceil(-Math.min(t,e)/n));const r=Math.floor(t%n),i=Math.ceil(t%n),s=Math.floor(e%n),o=Math.ceil(e%n),a=Math.floor(t/n),l=Math.ceil(t/n),u=Math.floor(e/n),c=Math.ceil(e/n),f=[];return c>l&&f.push([0,l]),f.push([r,l],[r,a+t%1],[i,a+t%1]),t%n>n-1||(f.push([i,a]),u>a&&f.push([n,a])),u>a&&f.push([n,u]),f.push([o,u],[o,u+e%1],[s,u+e%1]),e%n<1||(f.push([s,c]),c>l&&f.push([0,c])),f.push(Jxt(t,e,n)),f}function Qxt(t,e,n,r){return Zj(t+r*n,e+r*n,n).map(([i,s])=>[i,s-r])}function Jxt(t,e,n){const r=Math.floor(e/n)-Math.floor(t/n);return r===0?gI(t,e,n):r===1?Math.floor(e%n)>Math.ceil(t%n)?[(Math.floor(e%n)+Math.ceil(t%n))/2,Math.floor(e/n)]:e%n>n-t%n?gI(e-e%n,e,n):gI(t,n*Math.ceil(t/n),n):[n/2,(Math.round(t/n)+Math.round(e/n))/2]}function gI(t,e,n){const r=Math.floor(e)-Math.floor(t);return r===0?[Math.floor(t%n)+.5,Math.floor(t/n)+(t+e)/2%1]:r===1?e%1-t%1>.5?[Math.ceil(t%n),Math.floor(e/n)+(t%1+e%1)/2]:e%1>1-t%1?[Math.floor(e%n)+.5,Math.floor(e/n)+e%1/2]:[Math.floor(t%n)+.5,Math.floor(t/n)+(1+t%1)/2]:[Math.ceil(t%n)+Math.ceil(Math.floor(e)-Math.ceil(t))/2,Math.floor(t/n)+(e>=1+t?.5:(t+e)/2%1)]}function t2e(t){if(t===void 0||t===!1)return Number;if(t===!0)return Math.round;if(typeof t!="function")throw new Error(`invalid round: ${t}`);return t}function n2e(t){return t===void 0?void 0:Math.max(1,Math.floor(t))}function Zxt({domain:t,range:e}){return Yee(e)/Yee(t)}function Yee(t){const[e,n]=Qi(t);return n-e}function ewt(t,{tip:e,...n}={}){return D2(n)||(n={...n,y:Zi,x2:xt}),new Jve(t,{tip:r2e(e),...zT(yj($T(n)))})}function twt(t,{tip:e,...n}={}){return D2(n)||(n={...n,x:Zi,y2:xt}),new Zve(t,{tip:r2e(e),...jT(bj(UT(n)))})}function r2e(t){return t===!0?{maxRadius:1/0}:jl(t)&&t.maxRadius===void 0?{...t,maxRadius:1/0}:void 0}var mI,Xee;function nwt(){if(Xee)return mI;Xee=1;function t(o,a,l,u,c){for(var f=c+1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p>=0?(f=h,c=h-1):u=h+1}return f}function e(o,a,l,u,c){for(var f=c+1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p>0?(f=h,c=h-1):u=h+1}return f}function n(o,a,l,u,c){for(var f=u-1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p<0?(f=h,u=h+1):c=h-1}return f}function r(o,a,l,u,c){for(var f=u-1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p<=0?(f=h,u=h+1):c=h-1}return f}function i(o,a,l,u,c){for(;u<=c;){var f=u+c>>>1,h=o[f],d=l!==void 0?l(h,a):h-a;if(d===0)return f;d<=0?u=f+1:c=f-1}return-1}function s(o,a,l,u,c,f){return typeof l=="function"?f(o,a,l,u===void 0?0:u|0,c===void 0?o.length-1:c|0):f(o,a,void 0,l===void 0?0:l|0,u===void 0?o.length-1:u|0)}return mI={ge:function(o,a,l,u,c){return s(o,a,l,u,c,t)},gt:function(o,a,l,u,c){return s(o,a,l,u,c,e)},lt:function(o,a,l,u,c){return s(o,a,l,u,c,n)},le:function(o,a,l,u,c){return s(o,a,l,u,c,r)},eq:function(o,a,l,u,c){return s(o,a,l,u,c,i)}},mI}var yI,Kee;function rwt(){if(Kee)return yI;Kee=1;var t=nwt(),e=0,n=1,r=2;yI=w;function i(_,S,A,C,D){this.mid=_,this.left=S,this.right=A,this.leftPoints=C,this.rightPoints=D,this.count=(S?S.count:0)+(A?A.count:0)+C.length}var s=i.prototype;function o(_,S){_.mid=S.mid,_.left=S.left,_.right=S.right,_.leftPoints=S.leftPoints,_.rightPoints=S.rightPoints,_.count=S.count}function a(_,S){var A=y(S);_.mid=A.mid,_.left=A.left,_.right=A.right,_.leftPoints=A.leftPoints,_.rightPoints=A.rightPoints,_.count=A.count}function l(_,S){var A=_.intervals([]);A.push(S),a(_,A)}function u(_,S){var A=_.intervals([]),C=A.indexOf(S);return C<0?e:(A.splice(C,1),a(_,A),n)}s.intervals=function(_){return _.push.apply(_,this.leftPoints),this.left&&this.left.intervals(_),this.right&&this.right.intervals(_),_},s.insert=function(_){var S=this.count-this.leftPoints.length;if(this.count+=1,_[1]<this.mid)this.left?4*(this.left.count+1)>3*(S+1)?l(this,_):this.left.insert(_):this.left=y([_]);else if(_[0]>this.mid)this.right?4*(this.right.count+1)>3*(S+1)?l(this,_):this.right.insert(_):this.right=y([_]);else{var A=t.ge(this.leftPoints,_,p),C=t.ge(this.rightPoints,_,m);this.leftPoints.splice(A,0,_),this.rightPoints.splice(C,0,_)}},s.remove=function(_){var S=this.count-this.leftPoints;if(_[1]<this.mid){if(!this.left)return e;var A=this.right?this.right.count:0;if(4*A>3*(S-1))return u(this,_);var C=this.left.remove(_);return C===r?(this.left=null,this.count-=1,n):(C===n&&(this.count-=1),C)}else if(_[0]>this.mid){if(!this.right)return e;var D=this.left?this.left.count:0;if(4*D>3*(S-1))return u(this,_);var C=this.right.remove(_);return C===r?(this.right=null,this.count-=1,n):(C===n&&(this.count-=1),C)}else{if(this.count===1)return this.leftPoints[0]===_?r:e;if(this.leftPoints.length===1&&this.leftPoints[0]===_){if(this.left&&this.right){for(var T=this,M=this.left;M.right;)T=M,M=M.right;if(T===this)M.right=this.right;else{var I=this.left,C=this.right;T.count-=M.count,T.right=M.left,M.left=I,M.right=C}o(this,M),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return n}for(var I=t.ge(this.leftPoints,_,p);I<this.leftPoints.length&&this.leftPoints[I][0]===_[0];++I)if(this.leftPoints[I]===_){this.count-=1,this.leftPoints.splice(I,1);for(var C=t.ge(this.rightPoints,_,m);C<this.rightPoints.length&&this.rightPoints[C][1]===_[1];++C)if(this.rightPoints[C]===_)return this.rightPoints.splice(C,1),n}return e}};function c(_,S,A){for(var C=0;C<_.length&&_[C][0]<=S;++C){var D=A(_[C]);if(D)return D}}function f(_,S,A){for(var C=_.length-1;C>=0&&_[C][1]>=S;--C){var D=A(_[C]);if(D)return D}}function h(_,S){for(var A=0;A<_.length;++A){var C=S(_[A]);if(C)return C}}s.queryPoint=function(_,S){if(_<this.mid){if(this.left){var A=this.left.queryPoint(_,S);if(A)return A}return c(this.leftPoints,_,S)}else if(_>this.mid){if(this.right){var A=this.right.queryPoint(_,S);if(A)return A}return f(this.rightPoints,_,S)}else return h(this.leftPoints,S)},s.queryInterval=function(_,S,A){if(_<this.mid&&this.left){var C=this.left.queryInterval(_,S,A);if(C)return C}if(S>this.mid&&this.right){var C=this.right.queryInterval(_,S,A);if(C)return C}return S<this.mid?c(this.leftPoints,S,A):_>this.mid?f(this.rightPoints,_,A):h(this.leftPoints,A)};function d(_,S){return _-S}function p(_,S){var A=_[0]-S[0];return A||_[1]-S[1]}function m(_,S){var A=_[1]-S[1];return A||_[0]-S[0]}function y(_){if(_.length===0)return null;for(var S=[],A=0;A<_.length;++A)S.push(_[A][0],_[A][1]);S.sort(d);for(var C=S[S.length>>1],D=[],T=[],M=[],A=0;A<_.length;++A){var I=_[A];I[1]<C?D.push(I):C<I[0]?T.push(I):M.push(I)}var N=M,P=M.slice();return N.sort(p),P.sort(m),new i(C,y(D),y(T),N,P)}function b(_){this.root=_}var v=b.prototype;v.insert=function(_){this.root?this.root.insert(_):this.root=new i(_[0],null,null,[_],[_])},v.remove=function(_){if(this.root){var S=this.root.remove(_);return S===r&&(this.root=null),S!==e}return!1},v.queryPoint=function(_,S){if(this.root)return this.root.queryPoint(_,S)},v.queryInterval=function(_,S,A){if(_<=S&&this.root)return this.root.queryInterval(_,S,A)},Object.defineProperty(v,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(v,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(_){return!_||_.length===0?new b(null):new b(y(_))}return yI}var iwt=rwt();const swt=Z0(iwt),owt=({marginLeft:t})=>[1,t],awt=({width:t,marginRight:e})=>[-1,t-e],lwt=({width:t,marginLeft:e,marginRight:n})=>[0,(e+t-n)/2],uwt=({marginTop:t})=>[1,t],cwt=({height:t,marginBottom:e})=>[-1,t-e],fwt=({height:t,marginTop:e,marginBottom:n})=>[0,(e+t-n)/2];function i2e(t){return typeof t=="string"?{anchor:t}:t}function hwt(t={},e={}){arguments.length===1&&([t,e]=s2e(t));let{anchor:n="left",padding:r=1,r:i=e.r}=i2e(t);switch(`${n}`.toLowerCase()){case"left":n=owt;break;case"right":n=awt;break;case"middle":n=lwt;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return o2e("x","y",n,Zr(r),i,e)}function dwt(t={},e={}){arguments.length===1&&([t,e]=s2e(t));let{anchor:n="bottom",padding:r=1,r:i=e.r}=i2e(t);switch(`${n}`.toLowerCase()){case"top":n=uwt;break;case"bottom":n=cwt;break;case"middle":n=fwt;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return o2e("y","x",n,Zr(r),i,e)}function s2e(t){const{anchor:e,padding:n,...r}=t,{r:i}=r;return[{anchor:e,padding:n,r:i},r]}function o2e(t,e,n,r,i,s){if(i!=null&&typeof i!="number"){let{channels:o,sort:a,reverse:l}=s;o=Gz(o),o?.r===void 0&&(s={...s,channels:{...o,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return ko(s,function(o,a,l,u,c,f){let{[e]:h,r:d}=l;if(!l[e])throw new Error(`missing channel: ${e}`);({[e]:h}=KS(l,u,f));const p=d?void 0:i!==void 0?Zr(i):this.r!==void 0?this.r:3;d&&(d=wn(d.value,u[d.scale]||xt,Float64Array));let[m,y]=n(c);const b=m?gwt:pwt,v=new Float64Array(h.length),w=d?_=>d[_]:()=>p;for(let _ of a){const S=swt();_=_.filter(d?C=>N5(h[C])&&Rd(d[C]):C=>N5(h[C]));const A=new Float64Array(2*_.length+2);for(const C of _){const D=w(C),T=m?D+r:0,M=h[C]-D,I=h[C]+D;let N=2;S.queryInterval(M-r,I+r,([,,O])=>{const R=v[O]-T,L=h[C]-h[O],B=r+(d?d[C]+d[O]:2*p),z=Math.sqrt(B*B-L*L);A[N++]=R-z,A[N++]=R+z});let P=A.slice(0,N);m&&(P=P.filter(O=>O>=0));e:for(const O of P.sort(b)){for(let R=0;R<N;R+=2)if(A[R]+1e-6<O&&O<A[R+1]-1e-6)continue e;v[C]=O+T;break}S.insert([M,I,C])}}m||(m=1);for(const _ of a)for(const S of _)v[S]=v[S]*m+y;return{data:o,facets:a,channels:{[t]:{value:v,source:null},[e]:{value:h,source:l[e]},...d&&{r:{value:d,source:l.r}}}}})}function pwt(t,e){return Math.abs(t)-Math.abs(e)}function gwt(t,e){return t-e}function mwt(t,e){return arguments.length===1&&({basis:t,...e}=t),jj(eq(t),e)}function ywt(t,e){return arguments.length===1&&({basis:t,...e}=t),qj(eq(t),e)}function eq(t){if(t===void 0)return Qee;if(typeof t=="function")return QT(Hz(t));if(/^p\d{2}$/i.test(t))return L2(Vz(t));switch(`${t}`.toLowerCase()){case"deviation":return xwt;case"first":return Qee;case"last":return vwt;case"max":return wwt;case"mean":return _wt;case"median":return Swt;case"min":return Awt;case"sum":return Cwt;case"extent":return bwt}throw new Error(`invalid basis: ${t}`)}function QT(t){return{mapIndex(e,n,r){const i=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/i}}}function L2(t){return QT((e,n)=>t(e,r=>n[r]))}const bwt={mapIndex(t,e,n){const[r,i]=Qi(t,o=>e[o]),s=i-r;for(const o of t)n[o]=e[o]===null?NaN:(e[o]-r)/s}},Qee=QT((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(Gs(r))return r}}),vwt=QT((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(Gs(r))return r}}),xwt={mapIndex(t,e,n){const r=LD(t,s=>e[s]),i=xS(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:i?(e[s]-r)/i:0}},wwt=L2(Ci),_wt=L2(LD),Swt=L2(n3),Awt=L2(ui),Cwt=L2(yc);function kwt(t,e){return a2e("x",t,e)}function Ewt(t,e){return a2e("y",t,e)}function a2e(t,e,n={}){let r,i=1;if(typeof e=="number")i=e,r=(u,c)=>+u+c;else{if(typeof e=="string"){const u=e.startsWith("-")?-1:1;[e,i]=Uz(e.replace(/^[+-]/,"")),i*=u}e=ST(e),r=(u,c)=>e.offset(u,c)}const s=`${t}1`,o=`${t}2`,a=oh({[s]:u=>u.map(c=>r(c,i)),[o]:u=>u},n),l=a[o].transform;return a[o].transform=()=>{const u=l(),[c,f]=Qi(u);return u.domain=i<0?[c,r(f,i)]:[r(c,i),f],u},a}function Dwt(t,e={}){if(typeof t=="string")switch(t.toLowerCase()){case"first":return tq(e);case"last":return nq(e)}if(typeof t=="function")return V0(null,t,e);let n,r;for(n in t){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=Twt(t[n])}if(r===void 0)throw new Error(`invalid selector: ${t}`);return V0(n,r,e)}function Twt(t){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"min":return rq;case"max":return iq}throw new Error(`unknown selector: ${t}`)}function tq(t){return V0(null,Owt,t)}function nq(t){return V0(null,Mwt,t)}function l2e(t){return V0("x",rq,t)}function u2e(t){return V0("y",rq,t)}function c2e(t){return V0("x",iq,t)}function f2e(t){return V0("y",iq,t)}function*Owt(t){yield t[0]}function*Mwt(t){yield t[t.length-1]}function*rq(t,e){yield eit(t,n=>e[n])}function*iq(t,e){yield $U(t,n=>e[n])}function V0(t,e,n){if(t!=null){if(n[t]==null)throw new Error(`missing channel: ${t}`);t=n[t]}const r=ug(n);return Uc(n,(i,s)=>{const o=wn(i,r),a=wn(i,t),l=[];for(const u of s){const c=[];for(const f of o?ng(u,h=>o[h]).values():[u])for(const h of e(f,a))c.push(h);l.push(c)}return{data:i,facets:l}})}Pr.prototype.plot=function({marks:t=[],...e}={}){return Oj({...e,marks:[...t,this]})};const Iwt=Object.freeze(Object.defineProperty({__proto__:null,Area:WT,Arrow:fve,BarX:$j,BarY:Uj,Cell:HT,Contour:Tve,Density:Ive,Dot:GT,Frame:Jbe,Geo:Nve,Hexgrid:Lve,Image:Pve,Line:YT,Link:uve,Mark:Pr,Raster:Cve,Rect:VT,RuleX:rbe,RuleY:ibe,Text:LT,TickX:yve,TickY:bve,Tip:Zbe,Vector:PT,WaffleX:Jve,WaffleY:Zve,area:TL,areaX:D3,areaY:Lv,arrow:Kvt,auto:l2t,autoSpec:hve,axisFx:Ebe,axisFy:kbe,axisX:_j,axisY:wj,barX:cm,barY:fm,bin:jg,binX:Up,binY:zp,bollinger:Mm,bollingerX:E2t,bollingerY:D2t,boxX:O2t,boxY:M2t,cell:Jy,cellX:Zvt,cellY:e2t,centroid:Fve,circle:i2t,cluster:Xxt,column:El,contour:W2t,crosshair:G2t,crosshairX:Y2t,crosshairY:X2t,delaunayLink:lxt,delaunayMesh:uxt,density:pxt,differenceX:yxt,differenceY:bxt,dodgeX:hwt,dodgeY:dwt,dot:hg,dotX:n2t,dotY:r2t,filter:a1t,find:_1t,formatIsoDate:Uye,formatMonth:$yt,formatNumber:$ye,formatWeekday:Uyt,frame:Tj,geo:Qj,geoCentroid:vxt,graticule:_xt,gridFx:Rbe,gridFy:Mbe,gridX:Ibe,gridY:Obe,group:tj,groupX:w3,groupY:_3,groupZ:ej,hexagon:s2t,hexbin:Sxt,hexgrid:kxt,hull:cxt,identity:xt,image:Mxt,indexOf:Zi,initializer:ko,interpolateNearest:Gj,interpolateNone:IL,interpolatorBarycentric:Hj,interpolatorRandomWalk:Yj,legend:Ubt,line:XT,lineX:T3,lineY:O3,linearRegressionX:$xt,linearRegressionY:Uxt,link:cve,map:oh,mapX:jj,mapY:qj,marks:Fu,normalize:eq,normalizeX:mwt,normalizeY:ywt,numberInterval:Q1e,plot:Oj,pointer:RT,pointerX:FT,pointerY:E3,raster:R2t,rect:Dj,rectX:j5,rectY:q5,reverse:l1t,ruleX:j0,ruleY:q0,scale:C3,select:Dwt,selectFirst:tq,selectLast:nq,selectMaxX:c2e,selectMaxY:f2e,selectMinX:l2e,selectMinY:u2e,shiftX:kwt,shiftY:Ewt,shuffle:u1t,sort:sye,sphere:wxt,spike:Dbt,stackX:Hbe,stackX1:Wbt,stackX2:Hbt,stackY:Gbe,stackY1:Gbt,stackY2:Ybt,text:Rv,textX:lbe,textY:ube,tickX:vve,tickY:xve,timeInterval:zz,tip:eve,transform:Uc,tree:Kve,treeLink:Uve,treeNode:RL,utcInterval:vT,valueof:wn,vector:vbe,vectorX:xbe,vectorY:wbe,voronoi:fxt,voronoiMesh:hxt,waffleX:ewt,waffleY:twt,window:KT,windowX:g2t,windowY:m2t},Symbol.toStringTag,{value:"Module"})),Rwt=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelArrow","x.labelArrow"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xPercent","x.percent"],["xReverse","x.reverse"],["xZero","x.zero"],["xBase","x.base"],["xExponent","x.exponent"],["xConstant","x.constant"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelArrow","y.labelArrow"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yPercent","y.percent"],["yReverse","y.reverse"],["yZero","y.zero"],["yBase","y.base"],["yExponent","y.exponent"],["yConstant","y.constant"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorN","color.n"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorPercent","color.percent"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["colorBase","color.base"],["colorExponent","color.exponent"],["colorConstant","color.constant"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityPercent","opacity.percent"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["opacityBase","opacity.base"],["opacityExponent","opacity.exponent"],["opacityConstant","opacity.constant"],["symbolScale","symbol.type"],["symbolDomain","symbol.domain"],["symbolRange","symbol.range"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rLabel","r.label"],["rPercent","r.percent"],["rZero","r.zero"],["rBase","r.base"],["rExponent","r.exponent"],["rConstant","r.constant"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthPercent","length.percent"],["lengthZero","length.zero"],["lengthBase","length.base"],["lengthExponent","length.exponent"],["lengthConstant","length.constant"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]);function Fwt(t,e,n){for(let r=0;r<e.length;++r){const i=e[r];r===e.length-1?t[i]=n:t=t[i]||(t[i]={})}}function Nwt(t,e,n){for(const r in t){const i=Rwt.get(r);if(i==null)throw new Error(`Unrecognized plot attribute: ${r}`);const s=t[r];typeof s=="symbol"?n.push(r):s!==void 0&&Fwt(e,i.split("."),s)}}const Lwt=new Set(["frame","hexgrid","sphere","graticule"]),Pwt=new Map([["first",tq],["last",nq],["maxX",c2e],["maxY",f2e],["minX",l2e],["minY",u2e],["nearest",RT],["nearestX",FT],["nearestXY",E3]]);async function Bwt(t){const e={marks:[]},n=[],{attributes:r,marks:i}=t;Nwt(r,e,n);const s=[];for(const a of i)for(const{type:l,data:u,options:c}of a.plotSpecs()){const{select:f,...h}=c,d=Pwt.get(f)?.(h)??h,p=Lwt.has(l)?[d]:[u,d];e.marks.push(Iwt[l](...p)),a.index>-1&&s.push(a.index)}Uwt(e,t);const o=Oj(e);jwt(o,s),$wt(t,o,r,n);for(const a of t.interactors)await a.init(o);return o}function $wt(t,e,n,r){r.forEach(i=>{const s=n[i];if(s===NS){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const o=i.slice(0,-6),a=e.scale(o);a?.domain&&t.setAttribute(i,n[`${o}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${s}`)})}function Uwt(t,e){const{marks:n}=e;z6("x",t,n),z6("y",t,n),z6("fx",t,n),z6("fy",t,n)}function z6(t,e,n){const r=e[t]||{};if(r.axis===null||r.label!==void 0)return;const i=n.map(o=>o.channelField(t)?.field);if(i.every(o=>o==null))return;let s;for(let o=0;o<i.length;++o){const a=h2e(i[o]);a!==void 0&&(s===void 0?s=a:s!==a&&(s=void 0))}s!==void 0&&(e[t]={...r,label:s})}function h2e(t){if(t){switch(t.type){case"COLUMN_REF":case"CUSTOM":return t.column;case"CAST":return h2e(t.expr);case"FUNCTION":if(t.name==="make_date")return"date";break}return zwt(t)}}function zwt(t){const e=`${t}`.replaceAll('"',"").replaceAll("(*)","()");return e.endsWith("()")?e.slice(0,-2):e}function jwt(t,e){let n=-1;for(const r of t.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||i==="frame"||i==="hexgrid"||r.setAttribute("data-index",e[++n])}}const Jee=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid"]),qwt={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class Vwt{constructor(e){this.attributes={...qwt},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.params=new Map,this.synch=new PPe,this.element=e||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",Object.assign(this.element,{value:this})}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:e,right:n}=this.margins();return this.getAttribute("width")-e-n}innerHeight(e=400){const{top:n,bottom:r}=this.margins();let i=this.getAttribute("height");return i==null&&(i=Wwt(this,n,r)||e,this.setAttribute("height",i,{silent:!0})),i-n-r}pending(e){this.synch.pending(e)}update(e){return this.synch.ready(e)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const e=await Bwt(this),n=this.legends.flatMap(({legend:r,include:i})=>{const s=r.init(e);return i?s:[]});this.element.replaceChildren(e,...n),this.synch.resolve()}getAttribute(e){return this.attributes[e]}setAttribute(e,n,r){return Gie(this.attributes[e],n)?(n===void 0?delete this.attributes[e]:this.attributes[e]=n,r?.silent||this.listeners?.get(e)?.forEach(i=>i(e,n)),!0):!1}addAttributeListener(e,n){const r=this.listeners||(this.listeners=new Map);return r.has(e)||r.set(e,new Set),r.get(e).add(n),this}removeAttributeListener(e,n){return this.listeners?.get(e)?.delete(n)}addParams(e,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(e):(r.set(i,[e]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(s=>s.initialize()))))}addMark(e){const n=Jee.has(e.type)?-1:this.marks.reduce((r,i)=>r+(Jee.has(i.type)?0:1),0);return e.setPlot(this,n),this.marks.push(e),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(e){return this.interactors.push(e),this}addLegend(e,n=!0){e.setPlot(this),this.legends.push({legend:e,include:n})}}function Wwt(t,e,n){const r=t.getAttribute("aspectRatio");if(r==null)return;const i=t.getAttribute("xDomain"),s=t.getAttribute("yDomain");if(!i||!s)return;const o=Math.abs(i[1]-i[0]);return Math.abs(s[1]-s[0])*t.innerWidth()/(r*o)+e+n}function d2e(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),t==="none"||t==="currentcolor"||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||$0(t)!==null)}const Hwt=new Set(["offset","order","reverse","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents","target","select"]);function Gwt(t){return Hwt.has(t)}const Ywt=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function Xwt(t){return Ywt.has(`${t}`.toLowerCase())}const p2e=t=>t==="stroke"||t==="fill",Kwt=t=>/opacity$/i.test(t),Qwt=t=>t==="symbol",Jwt=(t,e)=>t!=="sort"&&t!=="tip"&&e!=null&&!Array.isArray(e),bI=(t,e)=>({channel:t,field:e,as:N8(e)&&!dMe(e)?e.column:t}),vI=(t,e)=>({channel:t,value:e}),UL=t=>Array.isArray(t);let dg=class extends y1{constructor(e,n,r,i={}){super(n?.options?.filterBy),this.type=e,this.reqs=i,this.source=n;const s=this.channels=[],o=this.detail=new Set,a=this.params=new Set;UL(n)?this.data=Vm(n):Su(n?.table)&&a.add(n.table);const l=(u,c)=>{const f=typeof c;if(u==="channels")for(const h in c)o.add(h),l(h,c[h]);else if(f==="function"&&c[Gge]){const h=c(this,u);for(const d in h)l(d,h[d])}else if(f==="string")Gwt(u)||p2e(u)&&d2e(c)||Qwt(u)&&Xwt(c)?s.push(vI(u,c)):s.push(bI(u,_e(c)));else if(q3(c)){const h=vI(u,c.value);s.push(h),c.addEventListener("value",d=>(h.value=d,this.update()))}else Nl(c)?(rRe(c).forEach(h=>a.add(h)),s.push(bI(u,c))):f==="object"&&Jwt(u,c)?s.push(bI(u,c)):c!==void 0&&s.push(vI(u,c))};for(const u in r)l(u,r[u])}setPlot(e,n){this.plot=e,this.index=n,e.addParams(this,this.params),this.source?.table&&this.queryPending()}sourceTable(){const e=this.source?.table;return e?Su(e)?e.value:e:null}hasOwnData(){return this.source==null||UL(this.source)}hasFieldInfo(){return!!this._fieldInfo}channel(e){return this.channels.find(n=>n.channel===e)}channelField(e,{exact:n=!1}={}){const r=n?this.channel(e):this.channels.find(i=>i.channel.startsWith(e));return r?.field?r:null}async prepare(){if(this.hasOwnData())return null;const{channels:e,reqs:n}=this,r=new Map;for(const{channel:a,field:l}of e){if(!l)continue;const u=l.stats?.stats||[],c=l.stats?.column??l,f=r.get(c)??r.set(c,new Set).get(c);u.forEach(h=>f.add(h)),n[a]?.forEach(h=>f.add(h))}const i=this.sourceTable(),s=await e$(this.coordinator,Array.from(r,([a,l])=>({table:i,column:a,stats:Array.from(l)}))),o=Object.fromEntries(s.map(a=>[a.column,a]));for(const a of this.channels){const{field:l}=a;l&&Object.assign(a,o[l.stats?.column??l])}this._fieldInfo=!0}query(e=[]){return this.hasOwnData()?null:sq(this.channels,this.sourceTable()).where(e)}queryPending(){return this.plot.pending(this),this}queryResult(e){return this.data=Vm(e),this}update(){return this.plot.update(this)}plotSpecs(){const{type:e,data:n,detail:r,channels:i}=this;return g2e(e,r,i,n)}};function au(t,e){const n=e?.[t.as]??t.as;return Object.hasOwn(t,"value")?t.value:p2e(t.channel)?{value:n,scale:"color"}:Kwt(t.channel)?{value:n,scale:"opacity"}:n}function sq(t,e,n=[]){const r=Ue.from({source:e}),i=new Set;let s=!1;for(const o of t){const{channel:a,field:l,as:u}=o;if(!n.includes(a)){if(a==="orderby")r.orderby(o.value??l);else if(l){if(X0(l))s=!0;else{if(i.has(u))continue;i.add(u)}r.select({[u]:l})}}}return s&&r.groupby(Array.from(i)),r}function g2e(t,e,n,r,i={}){const{numRows:s,values:o,columns:a}=r??{},l={};for(const f of n){const h=e.has(f.channel)?l:i;h[f.channel]=au(f,a)}return e.size&&(i.channels=l),[{type:t,data:o??(r?{length:s}:null),options:i}]}function X5(t,e){const{plot:n}=t;let r=n.getAttribute(`${e}Scale`);if(!r){const{type:s}=t.channelField(e);r=s==="date"?"time":"linear"}const i={type:r};switch(r){case"log":i.base=n.getAttribute(`${e}Base`)??10;break;case"pow":i.exponent=n.getAttribute(`${e}Exponent`)??1;break;case"symlog":i.constant=n.getAttribute(`${e}Constant`)??1;break}return _B(i)}function W0(t,e,n,r,i=1,s){const{field:o}=t.channelField(e);s=s??o;const{type:a,apply:l,sqlApply:u}=X5(t,e),c=!!t.plot.getAttribute(`${e}Reverse`),[f,h]=r.map(m=>l(m)),d=u(s),p=a==="time"||a==="utc"?d:s;return[hRe(d,f,h,n-i,c),p]}const m2e={x:["min","max"]},y2e={y:["min","max"]},b2e={...m2e,...y2e};function v2e(t,e,n,r,i){const{plot:s}=t,o=s.getAttribute(r),a=s.getAttribute(i);if(Array.isArray(o)&&!o[_c])return o;{const{column:l,min:u,max:c}=t.channelField(n),f=x2e(e,l)||(a?ep().domain([u,c]).nice().domain():[u,c]);return o!==NS&&(f[_c]=!0),s.setAttribute(r,f,{silent:!0}),f}}function n4(t,e){return v2e(t,e,"x","xDomain","xNice")}function r4(t,e){return v2e(t,e,"y","yDomain","yNice")}function x2e(t,e){if(!t)return;let n,r;return[t].flat().forEach(i=>zm(i,s=>{if(s instanceof _ie&&`${s.expr}`===e){const o=(s.extent??[]).map(a=>a?.value??a);(n==null||o[0]<n)&&(n=o[0]),(r==null||o[1]>r)&&(r=o[1])}})),n!=null&&r!=null&&n!==r?[n,r]:void 0}class Zwt extends dg{constructor(e,n,r){const i=e.endsWith("X")?"y":e.endsWith("Y")?"x":null,s=i?{[i]:["count","min","max"]}:void 0;super(e,n,r,s),this.dim=i}query(e=[]){const{plot:n,dim:r,source:i}=this;let s=i.options?.optimize;const o=super.query(e);if(!r)return o;const a=r==="x"?"y":"x",l=this.channelField(a,{exact:!0})?.as,{field:u,as:c,type:f,count:h,min:d,max:p}=this.channelField(r),m=f==="date"||f==="number",y=r==="x"?n.innerWidth():n.innerHeight();if(s??=h/y>10,s&&m&&l){const[b,v]=x2e(e,u)||[d,p],[w]=W0(this,r,y,[b,v],1,c),_=o._select.map(S=>S.alias).filter(S=>S!==c&&S!==l);return MRe(o,w,c,l,_)}else return o.orderby(c)}}function zL(t,e=[]){return new e.constructor(t)}function e_t(t,e,n,r,i){if(!e?.length)return{numRows:0,columns:{}};const s=e.length,o={},a=[];if(i?.length){const l=new Int32Array(s),u=i.map(h=>r[h]),c={};for(let h=0;h<s;++h){const d=u.map(p=>p[h]);l[h]=c[d]??=a.push(d)-1}for(let h=0;h<i.length;++h)o[i[h]]=a.map(d=>d[h]);const f=o._grid=a.map(()=>zL(t,n));for(let h=0;h<s;++h)f[l[h]][e[h]]=n[h]}else{a.push([]);const[l]=o._grid=[zL(t,n)];for(let u=0;u<s;++u)l[e[u]]=n[u]}return{numRows:a.length,columns:o}}function t_t(t,e,n,r,i,s,o){if(!n?.length)return{numRows:0,columns:{}};const a=n.length,l=t*e,u=i.map(d=>r[d]),c={},f=[],h=new Int32Array(a);if(s?.length){const d=s.map(m=>r[m]),p={};for(let m=0;m<a;++m){const y=d.map(b=>b[m]);h[m]=p[y]??=f.push(y)-1}for(let m=0;m<s.length;++m)c[s[m]]=f.map(y=>y[m])}else f.push([]);if(o){const d=n.map(y=>y%t),p=n.map(y=>Math.floor(y/t)),m=f.map(()=>[]);for(let y=0;y<a;++y)m[h[y]].push(y);i.forEach((y,b)=>{const v=u[b];c[y]=f.map((w,_)=>o(m[_],t,e,d,p,v))})}else i.forEach((d,p)=>{const m=u[p],y=c[d]=f.map(()=>zL(l,m));for(let b=0;b<a;++b)y[h[b]][n[b]]=m[b]});return{numRows:f.length,columns:c}}function oq(t){let e=1/0,n=-1/0;return t.forEach(r=>{const i=r.length;for(let s=0;s<i;++s){const o=r[s];o<e&&(e=o),o>n&&(n=o)}}),Number.isFinite(e)&&Number.isFinite(n)?[e,n]:[0,1]}function n_t(t){const e=new y2;return t.forEach(n=>{const r=n.length;for(let i=0;i<r;++i)e.add(n[i])}),Array.from(e).sort(fr)}function io(t,e){return Su(t)?(t.addEventListener("value",e),t.value):t}function jL(t,e=!1){const n=new Float64Array(5),r=new Float64Array(4);r_t(n,r,t);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:t,negative:e,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function r_t(t,e,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),s=Math.exp(-1.783/n),o=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,u=Float64Array.of(-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,u[0],u[1],0,0,0,0,0,0);let d,p;for(p=2;p<8;p+=2){for(f[p]=u[p]*f[p-2]-u[p+1]*f[p-1],f[p+1]=u[p]*f[p-1]+u[p+1]*f[p-2],d=p-2;d>0;d-=2)f[d]+=u[p]*f[d-2]-u[p+1]*f[d-1],f[d+1]+=u[p]*f[d-1]+u[p+1]*f[d-2];for(d=0;d<=p;d+=2)f[d]+=i[p]*h[d]-i[p+1]*h[d+1],f[d+1]+=i[p]*h[d+1]+i[p+1]*h[d];for(h[p+2]=u[p]*h[p]-u[p+1]*h[p+1],h[p+3]=u[p]*h[p+1]+u[p+1]*h[p],d=p;d>0;d-=2)h[d]+=u[p]*h[d-2]-u[p+1]*h[d-1],h[d+1]+=u[p]*h[d-1]+u[p+1]*h[d-2]}for(p=0;p<4;++p)d=p<<1,e[p]=f[d]/c,t[p+1]=h[d+2]}function i_t(t,e,n,[r,i]){const s=new Float64Array(Math.max(r,i)),o=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let u=0,c=0;u<i;++u,c+=r){const f=l.subarray(c);qL(t,n.subarray(c),r,1,s,o,a,f)}for(let u=0;u<r;++u){const c=l.subarray(u);qL(e,c,i,r,s,o,a,c)}return l}function qL(t,e,n,r=1,i=new Float64Array(n),s=new Float64Array(n),o=new Float64Array(5),a=i,l=s_t){const u=r*2,c=r*3,f=r*4,h=r*n;let d,p;for(l(i,e,n,r,t.b_causal,3,t.a,4,t.sum_causal,o,t.sigma),p=4,d=f;p<n;++p,d+=r)i[p]=t.b_causal[0]*e[d]+t.b_causal[1]*e[d-r]+t.b_causal[2]*e[d-u]+t.b_causal[3]*e[d-c]-t.a[1]*i[p-1]-t.a[2]*i[p-2]-t.a[3]*i[p-3]-t.a[4]*i[p-4];for(l(s,e,n,-r,t.b_anticausal,4,t.a,4,t.sum_anticausal,o,t.sigma),p=4,d=h-r*5;p<n;++p,d-=r)s[p]=t.b_anticausal[1]*e[d+r]+t.b_anticausal[2]*e[d+u]+t.b_anticausal[3]*e[d+c]+t.b_anticausal[4]*e[d+f]-t.a[1]*s[p-1]-t.a[2]*s[p-2]-t.a[3]*s[p-3]-t.a[4]*s[p-4];if(t.negative)for(p=0,d=0;p<n;++p,d+=r)a[d]=i[p]+s[n-p-1];else for(p=0,d=0;p<n;++p,d+=r)a[d]=Math.max(0,i[p]+s[n-p-1]);return a}function s_t(t,e,n,r,i,s,o,a,l,u,c,f=.5){const h=Math.abs(r)*n,d=r<0?h+r:0;let p,m,y;for(m=0;m<=a;++m)for(u[m]=m<=s?i[m]:0,y=1;y<=a&&y<=m;++y)u[m]-=o[y]*u[m-y];for(y=0;y<a;++y)for(t[y]=0,m=1;m<=y;++m)p=d+r*m,p>=0&&p<h&&(t[y]+=u[y-m]*e[p]);const b=e[d],v=Math.ceil(c*10);for(m=0;m<v;++m){for(y=0;y<a;++y)t[y]+=u[y]*b;if(l-=Math.abs(u[0]),l<=f)break;for(u[a]=m+a<=s?i[m+a]:0,y=1;y<=a;++y)u[a]-=o[y]*u[a-y];for(y=0;y<a;++y)u[y]=u[y+1]}}const cf="density";class JT extends dg{constructor(e,n,r){const{bandwidth:i=0,interpolate:s="none",pixelSize:o=1,pad:a=1,width:l,height:u,...c}=r,f=o_t(c);super(e,n,c,b2e),this.densityMap=f,this.bandwidth=io(i,h=>(this.bandwidth=h,this.grids?this.convolve().update():null)),this.interpolate=io(s,h=>(this.interpolate=h,this.requestUpdate())),this.pixelSize=io(o,h=>(this.pixelSize=h,this.requestUpdate())),this.pad=io(a,h=>(this.pad=h,this.requestUpdate())),this.width=io(l,h=>(this.width=h,this.requestUpdate())),this.height=io(u,h=>(this.height=h,this.requestUpdate()))}setPlot(e,n){const r=()=>{this.hasFieldInfo()&&this.requestUpdate()};e.addAttributeListener("xDomain",r),e.addAttributeListener("yDomain",r),super.setPlot(e,n)}get filterStable(){const e=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return e&&n&&!e[_c]&&!n[_c]}query(e=[]){const{interpolate:n,pad:r,channels:i,densityMap:s}=this,[o,a]=this.extentX=n4(this,e),[l,u]=this.extentY=r4(this,e),[c,f]=this.bins=this.binDimensions(),[h,d]=W0(this,"x",c,[o,a],r),[p,m]=W0(this,"y",f,[l,u],r),y=r?[Xo(d,[+o,+a]),Xo(m,[+l,+u])]:[Bf(+o,d),Yi(d,+a),Bf(+l,m),Yi(m,+u)],b=Ue.from(this.sourceTable()).where(e.concat(y)),v=this.groupby=[],w={};for(const S of i)if(Object.hasOwn(S,"field")){const{as:A,channel:C,field:D}=S;X0(D)?(w[C]=D,s[C]=!0):C==="weight"?w[cf]=Qr(D):C!=="x"&&C!=="y"&&(b.select({[A]:D}),v.push(A))}const _=this.aggr=Object.keys(w);if(w.density&&_.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(_.length||(_.push(cf),w[cf]=ur()),n==="linear"){if(_.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!w[cf])throw new Error("Linear binning not applicable to custom aggregates.");const S=wB(w[cf])[0];return TRe(b,h,p,S,c,v)}else return dRe(b,h,p,w,c,v)}binDimensions(){const{plot:e,pixelSize:n,width:r,height:i}=this;return[r??Math.round(e.innerWidth()/n),i??Math.round(e.innerHeight()/n)]}queryResult(e){const[n,r]=this.bins,i=a_t(this.interpolate),{columns:s}=Vm(e);return this.grids0=t_t(n,r,s.index,s,this.aggr,this.groupby,i),this.convolve()}convolve(){const{aggr:e,bandwidth:n,bins:r,grids0:i,plot:s}=this;if(this.grids=i,n>0&&i.numRows>0){const o=e.length===1?e[0]:e.includes(cf)?cf:null;if(!o)return console.warn("No compatible grid found for smoothing."),this;const a=i.columns[o],l=s.innerWidth(),u=s.innerHeight(),[c,f]=r,h=a.some(m=>m.some(y=>y<0)),d=jL(n*(c-1)/l,h),p=jL(n*(f-1)/u,h);this.grids={numRows:i.numRows,columns:{...i.columns,[o]:a.map(m=>i_t(d,p,m,r))}}}return this}}function o_t(t){const e={};for(const n in t)t[n]==="density"&&(delete t[n],e[n]=!0);return e}function a_t(t="none"){if(typeof t=="function")return t;switch(t.toLowerCase()){case"none":case"linear":return;case"nearest":return Gj;case"barycentric":return Hj();case"random-walk":return Yj()}throw new Error(`invalid interpolate: ${t}`)}class l_t extends JT{constructor(e,n){const{thresholds:r=10,...i}=n;super("geo",e,{bandwidth:20,interpolate:"linear",pixelSize:2,...i}),this.thresholds=io(r,s=>(this.thresholds=s,this.grids?this.contours().update():null))}convolve(){return super.convolve().contours()}contours(){const{bins:e,densityMap:n,grids:r,thresholds:i,plot:s}=this,{numRows:o,columns:a}=r;let l=i,u;if(Array.isArray(l))u=l;else{const[,I]=oq(a.density);u=Array.from({length:l-1},(N,P)=>I*(P+1)/l)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[c,f]=e,[h,d]=s.getAttribute("xDomain"),[p,m]=s.getAttribute("yDomain"),y=(d-h)/c,b=(m-p)/f,v=+h,w=+p,_=I=>v+I*y,S=I=>w+I*b,A=s5().size(e),C=this.contourData=Array(o*u.length),{density:D,...T}=a,M=Object.entries(T);for(let I=0,N=0;I<o;++I){const P=D[I],O=M.reduce((R,[L,B])=>(R[L]=B[I],R),{});for(let R=0;R<u.length;++R,++N)C[N]=Object.assign(u_t(A.contour(P,u[R]),_,S),O)}return this}plotSpecs(){const{type:e,channels:n,densityMap:r,contourData:i}=this,s={};for(const o of n){const{channel:a}=o;a!=="x"&&a!=="y"&&(s[a]=au(o))}for(const o in r)r[o]&&(s[o]=au({channel:o,as:"value"}));return[{type:e,data:i,options:s}]}}function u_t(t,e,n){function r(o){o.forEach(i)}function i(o){o.forEach(s)}function s(o){o[0]=e(o[0]),o[1]=n(o[1])}return t.coordinates.forEach(r),t}function aq(t){return Array.from({length:t},(e,n)=>n)}function w2e(t,e){const n=e.reduce((i,s,o)=>(i[s]=o,i),{}),r=aq(t.length);return r.sort((i,s)=>n[t[i]]-n[t[s]]),r}function _2e(t,e){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",t),n.setAttribute("height",e),n}throw new Error("Can not create a canvas instance.")}function c_t(t=1){const e=255*t|0;return(n,r,i)=>{for(let s=0,o=0;s<i;++s)for(let a=0;a<r;++a,o+=4)n[o+3]=e}}function f_t(t){const{apply:e}=t;return(n,r,i,s)=>{for(let o=0,a=0;o<i;++o)for(let l=0,u=(i-o-1)*r;l<r;++l,a+=4)n[a+3]=255*e(s[l+u])|0}}function h_t(t={}){const{r:e=0,g:n=0,b:r=0,opacity:i=1}=typeof t=="string"?Ha(t):t,s=new Uint8ClampedArray([e,n,r,255*i|0]);return(o,a,l)=>{for(let u=0,c=0;u<l;++u)for(let f=0;f<a;++f,c+=4)o[c+0]=s[0],o[c+1]=s[1],o[c+2]=s[2],o[c+3]=s[3]}}function d_t(t){const{domain:e,range:n}=t,r=Object.create(null),i=new Uint8ClampedArray(4*e.length),s=e.length-1,o=n.length;for(let a=0;a<=s;++a){const l=n[a%o],{r:u,g:c,b:f,opacity:h=1}=typeof l=="string"?Ha(l):l,d=a<<2;i[d+0]=u,i[d+1]=c,i[d+2]=f,i[d+3]=255*h|0,r[e[a]]=d}return(a,l,u,c)=>{if(c.map)for(let f=0,h=0;f<u;++f)for(let d=0,p=(u-f-1)*l;d<l;++d,h+=4){const m=r[c[d+p]];a[h+0]=i[m+0],a[h+1]=i[m+1],a[h+2]=i[m+2],a[h+3]=i[m+3]}else{const f=r[c];for(let h=0,d=0;h<u;++h)for(let p=0;p<l;++p,d+=4)a[d+0]=i[f+0],a[d+1]=i[f+1],a[d+2]=i[f+2],a[d+3]=i[f+3]}}}function p_t(t,e,n){const{interpolate:r}=e,i=new Uint8ClampedArray(4*t),s=t-1;for(let o=0;o<=s;++o){const a=r(o/s),{r:l,g:u,b:c,opacity:f=1}=typeof a=="string"?Ha(a):a,h=o<<2;i[h+0]=l,i[h+1]=u,i[h+2]=c,i[h+3]=255*f|0}return(o,a,l,u)=>{for(let c=0,f=0;c<l;++c)for(let h=0,d=(l-c-1)*a;h<a;++h,f+=4){const p=s*n(u[h+d])<<2;o[f+0]=i[p+0],o[f+1]=i[p+1],o[f+2]=i[p+2],o[f+3]=i[p+3]}}}class lq extends JT{constructor(e,n){super("image",e,n),this.image=null}setPlot(e,n){const r=()=>{this.hasFieldInfo()&&this.rasterize()};e.addAttributeListener("schemeColor",r),super.setPlot(e,n)}convolve(){return super.convolve().rasterize()}rasterize(){const{bins:e,grids:n}=this,[r,i]=e,{numRows:s,columns:o}=n,{canvas:a,ctx:l,img:u}=v_t(this,r,i),{alpha:c,alphaProp:f,color:h,colorProp:d}=S2e(this),p=o[f]??[],m=o[d]??[],y=s>1&&d&&this.groupby?.includes(d)?w2e(m,this.plot.getAttribute("colorDomain")):aq(s);return this.data={numRows:s,columns:{src:Array.from({length:s},(b,v)=>(h?.(u.data,r,i,m[y[v]]),c?.(u.data,r,i,p[y[v]]),l.putImageData(u,0,0),a.toDataURL()))}},this}plotSpecs(){const{type:e,plot:n,data:{numRows:r,columns:i}}=this,s={src:i.src,width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:e,data:{length:r},options:s}]}}class g_t extends lq{constructor(e,n){super(e,{bandwidth:20,interpolate:"linear",pixelSize:2,...n})}}function S2e(t){const{aggr:e,densityMap:n,groupby:r,plot:i}=t,s=e.includes(cf),o=e.includes("fillOpacity"),a=t.channel("fill"),l=t.channel("fillOpacity");if(e.length>2||s&&o)throw new Error("Invalid raster encodings. Try dropping an aggregate?");if(r.includes(l?.as))throw new Error("Raster fillOpacity must be an aggregate or constant.");const u=n.fill||e.includes("fill")?"grid":r.includes(a?.as)?"group":d2e(a?.value)?a.value:s&&i.getAttribute("colorScheme")?"grid":void 0,c=n.fillOpacity||e.includes("fillOpacity")?"grid":typeof l?.value=="number"?l.value:s&&u!=="grid"?"grid":void 0;if(u!=="grid"&&c!=="grid")throw new Error("Raster mark missing density values.");const f=a?.as??(u==="grid"?cf:null),h=l?.as??(c==="grid"?cf:null),d=u!=="grid"&&u!=="group"?h_t(u):y_t(t,f),p=c!=="grid"?c_t(c):m_t(t,h);return{alphaProp:h,colorProp:f,alpha:p,color:d}}function m_t(t,e){const{plot:n,grids:r}=t,i=n.getAttribute("opacityDomain"),s=i===NS,o=i?.[_c],a=!s&&!o&&i||oq(r.columns[e]);(s||o||!i)&&(s||(a[_c]=!0),n.setAttribute("opacityDomain",a));const l=C3({opacity:{type:n.getAttribute("opacityScale"),domain:a,range:n.getAttribute("opacityRange"),clamp:n.getAttribute("opacityClamp"),nice:n.getAttribute("opacityNice"),reverse:n.getAttribute("opacityReverse"),zero:n.getAttribute("opacityZero"),base:n.getAttribute("opacityBase"),exponent:n.getAttribute("opacityExponent"),constant:n.getAttribute("opacityConstant")}});return f_t(l)}function y_t(t,e){const{plot:n,grids:r}=t,i=r.columns[e]??[],s=!i[0]?.map,o=s||Array.isArray(i[0]),a=n.getAttribute("colorDomain"),l=a===NS,u=a?.[_c],c=!l&&!u&&a||(s?i.slice().sort(fr):o?n_t(i):oq(i));(l||u||!a)&&(l||(c[_c]=!0),n.setAttribute("colorDomain",c));const f=C3({color:{type:n.getAttribute("colorScale"),domain:c,range:n.getAttribute("colorRange"),clamp:n.getAttribute("colorClamp"),n:n.getAttribute("colorN"),nice:n.getAttribute("colorNice"),reverse:n.getAttribute("colorReverse"),scheme:n.getAttribute("colorScheme"),interpolate:n.getAttribute("colorInterpolate"),pivot:n.getAttribute("colorPivot"),symmetric:n.getAttribute("colorSymmetric"),zero:n.getAttribute("colorZero"),base:n.getAttribute("colorBase"),exponent:n.getAttribute("colorExponent"),constant:n.getAttribute("colorConstant")}});if(o)return d_t(f);{const h=C3({x:{type:b_t(f.type),domain:f.domain,reverse:f.reverse,range:[0,1],clamp:f.clamp,base:f.base,exponent:f.exponent,constant:f.constant}});return p_t(1024,f,h.apply)}}function b_t(t){return t.endsWith("symlog")?"symlog":t.endsWith("log")?"log":t.endsWith("pow")?"pow":t.endsWith("sqrt")?"sqrt":t==="diverging"?"linear":t}function v_t(t,e,n){if(!t.image||t.image.w!==e||t.image.h!==n){const r=_2e(e,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,e,n);t.image={canvas:r,ctx:i,img:s,w:e,h:n}}return t.image}class x_t extends lq{constructor(e,n){const{normalize:r=!0,...i}=n;super(e,i),this.normalize=io(r,s=>(this.normalize=s,this.requestUpdate()))}query(e=[]){const{channels:n,normalize:r,pad:i}=this,[s,o]=this.bins=this.binDimensions(),[a]=W0(this,"x",s,n4(this,e),i),[l]=W0(this,"y",o,r4(this,e),i),u=Ue.from(this.sourceTable()).where(w_t(this,e));this.aggr=["density"];const c=this.groupby=[],f=[];for(const h of n)if(Object.hasOwn(h,"field")){const{channel:d,field:p}=h;d==="z"?(u.select({[d]:p}),f.push("z")):d!=="x"&&d!=="y"&&(u.select({[d]:p}),c.push(d))}return ORe(u,a,l,f,s,o,c,r)}}function w_t(t,e){if(Array.isArray(e)&&!e.length)return e;const n=t.channelField("x").column,r=t.channelField("y").column,i=o=>{const a=`${o.expr}`;return o.type!=="BETWEEN"||a!==n&&a!==r},s=o=>o.op==="AND"?cs(o.clauses.filter(a=>i(a))):o;return Array.isArray(e)?e.filter(o=>i(o)).map(o=>s(o)):s(e)}const __t={fill:1,stroke:1,z:1};class A2e extends dg{constructor(e,n,r){const{bins:i=1024,bandwidth:s=20,normalize:o=!1,stack:a=!1,...l}=r,u=e.endsWith("X")?"y":"x";super(e,n,l,u==="x"?m2e:y2e),this.dim=u,this.bins=io(i,c=>(this.bins=c,this.requestUpdate())),this.bandwidth=io(s,c=>(this.bandwidth=c,this.grids?this.convolve().update():null)),this.normalize=io(o,c=>(this.normalize=c,this.convolve().update())),this.stack=io(a,c=>(this.stack=c,this.update()))}get filterStable(){const e=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(e);return n&&!n[_c]}query(e=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i}=this,s=this.extent=(i==="x"?n4:r4)(this,e),[o,a]=W0(this,i,n,s),l=sq(r,this.sourceTable(),[i]).where(e.concat(Xo(a,s))),u=this.channelField("weight")?"weight":null,c=this.groupby=r.flatMap(f=>__t[f.channel]&&f.field?f.as:[]);return DRe(l,o,u,c)}queryResult(e){const n=Vm(e).columns;return this.grids=e_t(this.bins,n.index,n.density,n,this.groupby),this.convolve()}convolve(){const{bins:e,bandwidth:n,normalize:r,dim:i,grids:s,groupby:o,plot:a,extent:[l,u]}=this,c=s.columns,f=s.numRows,h=this.channelField(i).as,d=i==="x"?"y":"x",p=i==="x"?a.innerWidth():a.innerHeight(),m=c._grid.some(C=>C.some(D=>D<0)),y=jL(n*(e-1)/p,m),b=+l,v=(u-b)/(e-1),w=e*f,_=new Float64Array(w),S=new Float64Array(w),A=o.reduce((C,D)=>(C[D]=Array(w),C),{});for(let C=0,D=0;D<f;++D){o.forEach(N=>A[N].fill(c[N][D],C,C+e));const T=c._grid[D],M=qL(y,T,e),I=1/S_t(T,M,v,r);for(let N=0;N<e;++N,++C)_[C]=b+N*v,S[C]=M[N]*I}return this.data={numRows:w,columns:{[h]:_,[d]:S,...A}},this}plotSpecs(){const{type:e,data:{numRows:n,columns:r},channels:i,dim:s,stack:o}=this,a=e.startsWith("area")&&!o?"2":"",l=s==="x"?{[`y${a}`]:r.y}:{[`x${a}`]:r.x};for(const u of i)l[u.channel]=au(u,r);return[{type:e,data:{length:n},options:l}]}}function S_t(t,e,n,r){return(r===!0||r==="sum"?yc(t):r==="max"?Ci(e):n)||1}class A_t extends JT{constructor(e,n){const{type:r="dot",...i}=n;super(r,e,{bandwidth:20,interpolate:"linear",pad:0,pixelSize:2,...i})}convolve(){super.convolve();const{bins:e,pad:n,extentX:r,extentY:i}=this,[s,o]=e,a=X5(this,"x"),l=X5(this,"y"),[u,c]=r.map(y=>a.apply(y)),[f,h]=i.map(y=>l.apply(y)),d=(c-u)/(s-n),p=(h-f)/(o-n),m=n?0:.5;return this.data=C_t(this.grids,e,u,f,d,p,a.invert,l.invert,m),this}plotSpecs(){const{type:e,channels:n,densityMap:r,data:{numRows:i,columns:s}}=this,o={};for(const a of n){const{channel:l}=a;o[l]=l==="x"||l==="y"?s[l]:au(a,s)}for(const a in r)r[a]&&(o[a]=s.density);return[{type:e,data:{length:i},options:o}]}}function C_t(t,e,n,r,i,s,o,a,l){const u=1/(i*s),[c,f]=e,h=c*f,d=h*t.numRows,p=new Float64Array(d),m=new Float64Array(d),y=new Float64Array(d),b={x:p,y:m,density:y},{density:v,...w}=t.columns;for(const S in w)b[S]=new w[S].constructor(d);let _=0;for(let S=0;S<t.numRows;++S){for(const C in w)b[C].fill(w[C][S],_,_+h);const A=v[S];for(let C=0,D=0;D<f;++D)for(let T=0;T<c;++T,++_,++C)p[_]=o(n+(T+l)*i),m[_]=a(r+(D+l)*s),y[_]=A[C]*u}return{numRows:d,columns:b}}function k_t(t,e,n){var r=1e-8,i=e-1,s=n-1,o=0,a,l,u,c,f,h,d,p;if(t<=0)return 0;if(t>=1)return 1;for(a=Math.log(e/(e+n)),l=Math.log(n/(e+n)),u=Math.exp(e*a)/e,c=Math.exp(n*l)/n,d=u+c,t<u/d?h=Math.pow(e*d*t,1/e):h=1-Math.pow(n*d*(1-t),1/n),p=-Rb(e)-Rb(n)+Rb(e+n);o<10;o++){if(h===0||h===1)return h;if(f=E_t(h,e,n)-t,u=Math.exp(i*Math.log(h)+s*Math.log(1-h)+p),c=f/u,h-=u=c/(1-.5*Math.min(1,c*(i/h-s/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<r*h&&o>0)break}return h}function E_t(t,e,n){var r=t===0||t===1?0:Math.exp(Rb(e+n)-Rb(e)-Rb(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?0:t<(e+1)/(e+n+2)?r*Zee(t,e,n)/e:1-r*Zee(1-t,n,e)/n}function Zee(t,e,n){var r=1e-30,i=1,s=e+n,o=e+1,a=e-1,l=1,u=1-s*t/o,c,f,h,d;for(Math.abs(u)<r&&(u=r),u=1/u,d=u;i<=100&&(c=2*i,f=i*(n-i)*t/((a+c)*(e+c)),u=1+f*u,Math.abs(u)<r&&(u=r),l=1+f/l,Math.abs(l)<r&&(l=r),u=1/u,d*=u*l,f=-(e+i)*(s+i)*t/((e+c)*(o+c)),u=1+f*u,Math.abs(u)<r&&(u=r),l=1+f/l,Math.abs(l)<r&&(l=r),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function Rb(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,s,o;for(o=(s=i=t)+5.5,o-=(i+.5)*Math.log(o);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/i)-o}function D_t(t,e){var n=k_t(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}function T_t(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}class C2e extends dg{constructor(e,n,r){const i=e.endsWith("X")?"y":"x",{ci:s=.95,...o}=r;super(e,n,o),this.dim=i,this.field=this.channelField(i).field,this.channels=this.channels.filter(a=>a.channel!==i),this.ci=io(s,a=>(this.ci=a,this.update()))}query(e=[]){const{channels:n,field:r}=this,i=n.concat([{field:$8(r),as:"__avg__"},{field:Mr(Oie(r),l_(ur(r))),as:"__se__"}]);return sq(i,this.sourceTable()).where(e)}queryResult(e){return this.data=Vm(e),this}plotSpecs(){const{type:e,dim:n,detail:r,data:i,ci:s,channels:o}=this,a=Math.SQRT2*T_t(s),{columns:{__avg__:l,__se__:u}}=i,c={[`${n}1`]:l.map((f,h)=>f-a*u[h]),[`${n}2`]:l.map((f,h)=>f+a*u[h])};return g2e(e,r,o,i,c)}}const O_t="geom";class M_t extends dg{constructor(e,n={},r){!UL(e)&&!n?.geometry&&(n.geometry=Rie(O_t)),super("geo",e,n,r)}queryResult(e){super.queryResult(e);const n=this.channelField("geometry")?.as;if(n){const{columns:r}=this.data;typeof r[n][0]=="string"&&(r[n]=r[n].map(i=>JSON.parse(i)))}return this}}class I_t extends dg{constructor(e,n){const{type:r="hexagon",binWidth:i=20,...s}=n;super(r,e,{r:i/2,clip:!0,...s},b2e),this.binWidth=io(i,o=>(this.binWidth=o,this.requestUpdate()))}get filterStable(){const e=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return e&&n&&!e[_c]&&!n[_c]}query(e=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i}=this;let s,o;const a=new Set,l={};for(const M of i)if(M.channel!=="orderby"){if(M.channel==="x")s=M;else if(M.channel==="y")o=M;else if(Object.hasOwn(M,"field")){const{as:I,field:N}=M;l[I]=N,X0(N)||a.add(I)}}const[u,c]=n4(this,e),[f,h]=r4(this,e),d=.5-n.getAttribute("marginLeft"),p=0-n.getAttribute("marginTop"),m=zo(r),y=zo(r*(1.5/Math.sqrt(3))),b=zo(n.innerWidth()/(c-u)),v=zo(n.innerHeight()/(h-f)),w="_x",_="_y",S="_px",A="_py",C="_pi",D="_pj",T="_tt";return Ue.select({[s.as]:lr(zo(u),Mr(lr(Xt(lr(w,Xt(.5,W7(_,1))),m),d),b)),[o.as]:Yt(zo(h),Mr(lr(Xt(_,y),p),v)),...l}).groupby(w,_,...a).from(Ue.select({[A]:Mr(Yt(Xt(v,Yt(h,o.field)),p),y),[D]:ls(u_(A)),[S]:Yt(Mr(Yt(Xt(b,Yt(s.field,u)),d),m),Xt(.5,W7(D,1))),[C]:ls(u_(S)),[T]:cs(du(Xt(No(Yt(A,D)),3),1),du(lr(uo(Yt(S,C),2),uo(Yt(A,D),2)),lr(uo(Yt(Yt(S,C),Xt(.5,wa(Yi(S,C),-1,1))),2),uo(Yt(Yt(A,D),wa(Yi(A,D),-1,1)),2)))),[w]:wa(T,ls(lr(lr(C,wa(Yi(S,C),-.5,.5)),wa(H3(W7(D,1),0),.5,-.5))),C),[_]:wa(T,ls(lr(D,wa(Yi(A,D),-1,1))),D)},"*").from(this.sourceTable()).where(Yf(s.field),Yf(o.field),e))}}class R_t extends JT{constructor(e,n){const{origin:r=[0,0],dim:i="xy",...s}=n;super("image",e,s),this.image=null,this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(e,n){const r=()=>{this.hasFieldInfo()&&this.rasterize()};e.addAttributeListener("schemeColor",r),super.setPlot(e,n)}requestQuery(){return this.requestTiles()}query(e=[]){return this._filter=e,null}tileQuery(e){const{interpolate:n,pad:r,channels:i,densityMap:s}=this,[[o,a],[l,u]]=e,[c,f]=this.bins,[h,d]=W0(this,"x",c,[o,a],r),[p,m]=W0(this,"y",f,[l,u],r),y=r?[Xo(d,[+o,+a]),Xo(m,[+l,+u])]:[Bf(+o,d),Yi(d,+a),Bf(+l,m),Yi(m,+u)],b=Ue.from(this.sourceTable()).where(y),v=this.groupby=[],w={};for(const S of i)if(Object.hasOwn(S,"field")){const{as:A,channel:C,field:D}=S;D.aggregate?(w[C]=D,s[C]=!0):C==="weight"?w.density=Qr(D):C!=="x"&&C!=="y"&&(b.select({[A]:D}),v.push(A))}const _=this.aggr=Object.keys(w);if(w.density&&_.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(_.length||(_.push("density"),w.density=ur()),n==="linear"){if(_.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!w.density)throw new Error("Linear binning not applicable to custom aggregates.");return B_t(b,h,p,w.density,c,v)}else return P_t(b,h,p,w,c,v)}async requestTiles(){const e=gh();this.prefetch&&e.cancel(this.prefetch);const{pad:n,tileX:r,tileY:i,origin:[s,o]}=this,[a,l]=this.bins=this.binDimensions(),[u,c]=n4(this,this._filter),[f,h]=r4(this,this._filter),d=c-u,p=h-f,m=Math.floor((u-s)*(a-n)/d),y=Math.floor((f-o)*(l-n)/p),b=(I,N)=>[[s+I*d,s+(I+1)*d],[o+N*p,o+(N+1)*p]],v=Math.floor((u-s)/d),w=r?ete((c-s)/d):v,_=Math.floor((f-o)/p),S=i?ete((h-o)/p):_,A=[];for(let I=v;I<=w;++I)for(let N=_;N<=S;++N)A.push([I,N]);const C=A.map(([I,N])=>e.query(this.tileQuery(b(I,N)))),D=[];if(r)for(let I=_;I<=S;++I)D.push([w+1,I]),D.push([v-1,I]);if(i){const I=r?v-1:v,N=r?w+1:w;for(let P=I;P<=N;++P)D.push([P,S+1]),D.push([P,_-1])}this.prefetch=D.map(([I,N])=>e.prefetch(this.tileQuery(b(I,N))));const T=await Promise.all(C),M=F_t(a,l,m,y,A,T);this.grids0={numRows:M.length,columns:{density:[M]}},this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){const{bins:e,grids:n}=this,[r,i]=e,{numRows:s,columns:o}=n,{canvas:a,ctx:l,img:u}=L_t(this,r,i),{alpha:c,alphaProp:f,color:h,colorProp:d}=S2e(this),p=o[f]??[],m=o[d]??[],y=s>1&&d&&this.groupby?.includes(d)?w2e(m,this.plot.getAttribute("colorDomain")):aq(s);return this.data={numRows:s,columns:{src:Array.from({length:s},(b,v)=>(h?.(u.data,r,i,m[y[v]]),c?.(u.data,r,i,p[y[v]]),l.putImageData(u,0,0),a.toDataURL()))}},this}plotSpecs(){const{type:e,plot:n,data:{numRows:r,columns:i}}=this,s={src:i.src,width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:e,data:{length:r},options:s}]}}function F_t(t,e,n,r,i,s){const o=new Float64Array(t*e);return s.forEach((a,l)=>{const[u,c]=i[l],f=u*t-n,h=c*e-r;N_t(t,e,o,a,f,h)}),o}function N_t(t,e,n,r,i,s){const o=r.numRows;if(o===0)return;const a=r.getChild("index").toArray(),l=r.getChild("density").toArray();for(let u=0;u<o;++u){const c=a[u],f=i+c%t,h=s+Math.floor(c/t);0<=f&&f<t&&0<=h&&h<e&&(n[f+h*t]=l[u])}}function L_t(t,e,n){if(!t.image||t.image.w!==e||t.image.h!==n){const r=_2e(e,n),i=r.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,e,n);t.image={canvas:r,ctx:i,img:s,w:e,h:n}}return t.image}function P_t(t,e,n,r,i,s){return t.select({index:mt`FLOOR(${e})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,...r}).groupby("index",s)}function B_t(t,e,n,r,i,s){const o=r.column?`* ${r.column}`:"",a=(h,d)=>t.clone().select({xp:e,yp:n,i:h,w:d}),l=a(mt`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,mt`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),u=a(mt`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,mt`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${o}`),c=a(mt`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,mt`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${o}`),f=a(mt`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,mt`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${o}`);return Ue.from(Ue.unionAll(l,u,c,f)).select({index:"i",density:Qr("w")},s).groupby("index",s).having(H3("density",0))}function ete(t){const e=Math.floor(t);return e===t?e-1:e}class $_t extends dg{constructor(e,n){const{ci:r=.95,precision:i=4,...s}=n;super("line",e,s);const o=()=>this.modelFit?this.confidenceBand().update():null;this.ci=io(r,a=>(this.ci=a,o())),this.precision=io(i,a=>(this.precision=a,o()))}query(e=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(s=>this.channelField(s)?.as||[])));return Ue.from(super.query(e)).select({intercept:XMe(r,n),slope:JMe(r,n),n:Tie(r,n),ssy:QMe(r,n),ssx:KMe(r,n),xm:Die(r,n),x0:zo(pc(n).where(Yf(r))),x1:zo(Eu(n).where(Yf(r)))}).select(i).groupby(i)}queryResult(e){return this.modelFit=Vm(e),this.lineData=U_t(this.modelFit),this.confidenceBand()}confidenceBand(){const{ci:e,modelFit:n,precision:r,plot:i}=this,s=i.innerWidth();return this.areaData=e?z_t(n,e,r,s):null,this}plotSpecs(){const{lineData:e,areaData:n,channels:r,ci:i}=this,s=e.columns,o=i?n.columns:{},a={x:s.x,y:s.y},l={x:o.x,y1:o.y1,y2:o.y2,fillOpacity:.1};for(const u of r)switch(u.channel){case"x":case"y":case"fill":break;case"tip":l.tip=au(u,o);break;case"stroke":a.stroke=au(u,s),l.fill=au(u,o);break;case"strokeOpacity":a.strokeOpacity=au(u,s);break;case"fillOpacity":l.fillOpacity=au(u,o);break;default:a[u.channel]=au(u,s),l[u.channel]=au(u,o);break}return[...i?[{type:"areaY",data:{length:n.numRows},options:l}]:[],{type:"line",data:{length:e.numRows},options:a}]}}function xI(t,e){if(t.concat)return t.concat(e);const n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function U_t(t){const{x0:e=[],x1:n=[],xm:r,intercept:i,slope:s,n:o,ssx:a,ssy:l,...u}=t.columns,c=(d,p)=>i[p]+d*s[p],f=xI(e,n),h=xI(e.map(c),n.map(c));for(const d in u)u[d]=xI(u[d],u[d]);return{numRows:f.length,columns:{x:f,y:h,...u}}}function z_t(t,e,n,r){const i=t.numRows,{x0:s,x1:o,xm:a,intercept:l,slope:u,n:c,ssx:f,ssy:h,...d}=t.columns,p=Object.keys(d),m={x:[],y1:[],y2:[]};p.forEach(y=>m[y]=[]);for(let y=0;y<i;++y){const b=n*(o[y]-s[y])/r,v=D_t((1-e)/2,c[y]-2)*Math.sqrt(h[y]/(c[y]-2));Cl(s[y],o[y]-b/2,b).concat(o[y]).forEach(w=>{const _=l[y]+w*u[y],S=v*Math.sqrt(1/c[y]+(w-a[y])**2/f[y]);m.x.push(w),m.y1.push(_-S),m.y2.push(_+S),p.forEach(A=>m[A].push(d[A][y]))})}return{numRows:m.x.length,columns:m}}function uq(t){t.tagName==="a"&&(t=t.children[0]);const e=t.__data__;return Array.isArray(e)?e[0]:e}function j_t(t){const e=t.toLowerCase(),n=t.length;let r="";for(let i=0;i<n;++i)r+=(t[i]!==e[i]?"-":"")+e[i];return r}function ZT(t){const e={};for(const n in t)e[j_t(n)]=t[n];return e}function q_t(t){const{channels:e}=t,n=new Set;let r=!1,i=!1;for(const s of e){const{channel:o,field:a,as:l}=s;if(o==="orderby")r=!0;else if(a)if(X0(a))i=!0;else{if(n.has(l))continue;n.add(l)}}return!r&&i&&n.size&&t.channels.push({channel:"orderby",value:Array.from(n)}),t}class V_t{constructor(e,{selection:n,channels:r={}}){this.mark=q_t(e),this.selection=n;const i=Object.entries(ZT(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",kre(()=>this.update()))}init(e){this.svg=e;const n=this.values=[],i=`g[data-index="${this.mark.index}"]`,s=`${i} > *:not(g), ${i} > g > *`,o=this.nodes=e.querySelectorAll(s),{channels:a}=this;for(let l=0;l<o.length;++l){const u=o[l];n.push(a.map(c=>u.getAttribute(c[0])))}return this.update()}async update(){const{svg:e,nodes:n,channels:r,values:i,mark:s,selection:o}=this;if(!e)return;const a=await W_t(s,o);for(let l=0;l<n.length;++l){const u=n[l],c=i[l],f=a(uq(u));for(let h=0;h<r.length;++h){const[d,p]=r[h];u.setAttribute(d,f?c[h]:p)}}}}async function W_t(t,e){const n=e?.predicate(t);if(!n||n.length===0)return()=>!0;const r=t.filterBy?.predicate(t,!0),i={__:cs(n)},s=t.query(r);(s.queries||[s]).forEach(l=>{l._groupby.length?l.select(i):l.setSelect(i)});const o=await t.coordinator.query(s),a=o.getChild?.("__");return o.numRows||o.length?a?(l=>a.at(l)):(l=>o[l].__):(()=>!1)}function k2e(){const t=this,e=t.getScreenCTM;let n;t.getScreenCTM=()=>t.isConnected?n=e.call(t):n}function cq(t){const e=t.on;let n=!0;function r(i){n=!1,i(),n=!0}return t.reset=(...i)=>{r(()=>t.clear(...i))},t.moveSilent=(...i)=>{r(()=>t.move(...i))},t.on=(...i)=>{if(i.length>1&&i[1]){const s=i[1];i[1]=(...o)=>n&&s(...o)}return e(...i)},t}function E2e(){return cq(Opt())}function H_t(){return cq(Dpt())}function G_t(){return cq(Tpt())}function D2e(t,e,n,r,i){let s=Kr(e??t).append("g").attr("class",i);const o=t.scale("fx"),a=t.scale("fy");if(o||a){const l=o?.domain.map(c=>o.apply(c)-n),u=a?.domain.map(c=>a.apply(c)-r);if(l&&u)for(let c=0;c<l.length;++c)for(let f=0;f<u.length;++f)s.append("g").attr("transform",`translate(${l[c]}, ${u[f]})`);else if(l)for(let c=0;c<l.length;++c)s.append("g").attr("transform",`translate(${l[c]}, 0})`);else if(u)for(let c=0;c<u.length;++c)s.append("g").attr("transform",`translate(0, ${u[c]})`);s=s.selectAll("g")}return s.each(k2e)}const tte=1e-12;function VL(t,e){return t===e||t&&e&&Math.abs(t[0]-e[0])<tte&&Math.abs(t[1]-e[1])<tte||!1}function T2e(t){if(Nl(t)){if(t.type==="COLUMN_REF")return t.column;if(t.type==="AGGREGATE")return t.args[0]??t}return t}function Pv(t,e){return T2e(t.channelField(e)?.field)}function Y_t(t,e){const n=[],r=[];return e.forEach(i=>{const s=i==="color"?["color","fill","stroke"]:i==="x"?["x","x1","x2"]:i==="y"?["y","y1","y2"]:[i];for(let o=0;o<s.length;++o){const a=t.channelField(s[o],{exact:!0});if(a){n.push(T2e(a.field)),r.push(a.as);return}}throw new Error(`Missing channel: ${i}`)}),{fields:n,as:r}}function WL(t,e,n=1){return e.invert(n*Math.floor(t/n))}class fq{constructor(e,{channel:n,selection:r,field:i=void 0,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=e,this.channel=n,this.pixelSize=s||1,this.selection=r,this.peers=o,this.field=i||Pv(e,n),this.style=a&&ZT(a),this.brush=n==="y"?G_t():H_t(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(e){let n;e&&(n=e.map(r=>WL(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),VL(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,e),this.selection.update(this.clause(n)))}clause(e){const{mark:n,pixelSize:r,field:i,scale:s}=this;return ZB(i,e,{source:this,clients:this.peers?n.plot.markSet:new Set().add(n),scale:s,pixelSize:r})}init(e,n){const{brush:r,channel:i,style:s}=this;this.scale=e.scale(i);const o=this.value?.map(this.scale.apply).sort(fr),a=e.scale("x").range,l=e.scale("y").range;if(r.extent([[ui(a),ui(l)],[Ci(a),Ci(l)]]),this.g=D2e(e,n,ui(a),ui(l),`interval-${i}`).call(r).call(r.moveSilent,o),s){const u=this.g.selectAll("rect.selection");for(const c in s)u.attr(c,s[c])}e.addEventListener("pointerenter",u=>{u.buttons||this.activate()})}}class X_t{constructor(e,{selection:n,xfield:r,yfield:i,pixelSize:s=1,peers:o=!0,brush:a}){this.mark=e,this.pixelSize=s||1,this.selection=n,this.peers=o,this.xfield=r||Pv(e,"x"),this.yfield=i||Pv(e,"y"),this.style=a&&ZT(a),this.brush=E2e(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(e){const{value:n,pixelSize:r,xscale:i,yscale:s}=this;let o,a;if(e){const[l,u]=e;o=[l[0],u[0]].map(c=>WL(c,i,r)).sort(fr),a=[l[1],u[1]].map(c=>WL(c,s,r)).sort(fr)}(!VL(o,n?.[0])||!VL(a,n?.[1]))&&(this.value=e?[o,a]:void 0,this.g.call(this.brush.moveSilent,e),this.selection.update(this.clause(this.value)))}clause(e){const{mark:n,pixelSize:r,xfield:i,yfield:s,xscale:o,yscale:a}=this;return MPe([i,s],e,{source:this,clients:this.peers?n.plot.markSet:new Set().add(n),scales:[o,a],pixelSize:r})}init(e){const{brush:n,style:r,value:i}=this,s=this.xscale=e.scale("x"),o=this.yscale=e.scale("y"),a=s.range,l=o.range;if(n.extent([[ui(a),ui(l)],[Ci(a),Ci(l)]]),this.g=D2e(e,null,ui(a),ui(l),"interval-xy").call(n),r){const u=this.g.selectAll("rect.selection");for(const c in r)u.attr(c,r[c])}if(i){const[u,c]=i[0].map(s.apply).sort(fr),[f,h]=i[1].map(o.apply).sort(fr);this.g.call(n.moveSilent,[[u,f],[c,h]])}e.addEventListener("pointerenter",u=>{u.buttons||this.activate()})}}class hq{constructor(e,{selection:n,pointer:r,channels:i,fields:s,maxRadius:o=40}){this.mark=e,this.selection=n,this.clients=new Set().add(e),this.pointer=r,this.channels=i||(r==="x"?["x"]:r==="y"?["y"]:["x","y"]),this.fields=s||this.channels.map(a=>Pv(e,[a])),this.maxRadius=o,this.valueIndex=-1}clause(e){const{clients:n,fields:r}=this,i={source:this,clients:n};return r.length>1?Y8(r,e&&[e],i):Wk(r[0],e?.[0],i)}init(e){const n=this,{mark:r,channels:i,selection:s,maxRadius:o}=this,{data:{columns:a}}=r,l=i.map(m=>r.channelField(m).as),u=!Ko(s),[c,f]=K_t(e,r),h=this.pointer==="y"?.01:1,d=this.pointer==="x"?.01:1,p=Kr(e);p.on("pointerenter pointerdown pointermove",function(m){const[y,b]=Zu(m,this),v=Q_t(c,f,y,b,h,d,o);if(v!==this.valueIndex){this.valueIndex=v;const w=v<0?void 0:l.map(_=>a[_][v]);s.update(u?!w||w.length>1?w:w[0]:n.clause(w))}}),!u&&(p.on("pointerleave",()=>{s.update(n.clause(void 0))}),e.addEventListener("pointerenter",m=>{m.buttons||this.activate()}))}activate(){const e=this.channels.map(()=>0);this.selection.activate(this.clause(e))}}function K_t(t,e){const{data:{columns:n}}=e,r=f=>n[e.channelField(f)?.as],i=f=>t.scale(f),s=t.scale("x"),o=t.scale("y"),a=i("fx")?.apply,l=i("fy")?.apply,u=Array.from(r("x"),s.apply),c=Array.from(r("y"),o.apply);if(a){const f=ui(s.range),h=r("fx");for(let d=0;d<h.length;++d)u[d]+=a(h[d])-f}if(l){const f=ui(o.range),h=r("fy");for(let d=0;d<h.length;++d)c[d]+=l(h[d])-f}return[u,c]}function Q_t(t,e,n,r,i,s,o){let a=o*o,l=-1;for(let u=0;u<t.length;++u){const c=i*(t[u]-n),f=s*(e[u]-r),h=c*c+f*f;h<=a&&(a=h,l=u)}return l}const nte=(t,e)=>t-e;class J_t{constructor(e,{x:n=new Wb,y:r=new Wb,xfield:i,yfield:s,zoom:o=!0,panx:a=!0,pany:l=!0}){this.mark=e,this.xsel=n,this.ysel=r,this.xfield=i||Pv(e,"x"),this.yfield=s||Pv(e,"y"),this.zoom=wI(o,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:u}=e;a&&this.xsel.addEventListener("value",c=>{u.setAttribute("xDomain",c)&&u.update()}),l&&this.ysel.addEventListener("value",c=>{u.setAttribute("yDomain",c)&&u.update()})}publish(e){if(this.panx){const n=Z_t(e,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=e3t(e,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(e,n,r){return ZB(n,e,{source:this,clients:this.mark.plot.markSet,scale:r})}init(e){if(this.svg=e,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}}}=this;this.xscale=e.scale("x"),this.yscale=e.scale("y");const s=this.xscale.range.slice().sort(nte),o=this.yscale.range.slice().sort(nte),a=wI(n,[-1/0,1/0],s),l=wI(r,[-1/0,1/0],o),u=Omt().extent([[s[0],o[0]],[s[1],o[1]]]).scaleExtent(this.zoom).translateExtent([[a[0],l[0]],[a[1],l[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new Rf(1,0,0)).on("zoom",({transform:c})=>this.publish(c));if(Kr(i).call(u),n||r){let c=!1;i.addEventListener("pointerenter",f=>{c||(c=!0,f.buttons||this.activate())}),i.addEventListener("pointerleave",()=>c=!1)}}activate(){if(this.panx){const{xscale:e,xfield:n}=this;this.xsel.activate(this.clause(e.domain,n,e))}if(this.pany){const{yscale:e,yfield:n}=this;this.ysel.activate(this.clause(e.domain,n,e))}}}function wI(t,e,n){return t?Array.isArray(t)?t:e:n}function Z_t(t,e){return e.range.map(t.invertX,t).map(e.invert,e)}function e3t(t,e){return e.range.map(t.invertY,t).map(e.invert,e)}const t3t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},n3t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,r3t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,i3t=/^((\s+,?\s*)|(,\s*))/,s3t=/^[01]/,O2e=t=>`Invalid SVG path, incorrect parameter ${t}`;function o3t(t){const e=[];return(t.match(n3t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=t3t[s],a=a3t(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw new Error(O2e("count"));if(e.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)e.push([i,...a.slice(u,u+o)])}}),e}function a3t(t,e,n){const r=[];for(let i=0;e&&i<n.length;)for(let s=0;s<e;++s){const o=t==="a"&&(s===3||s===4)?s3t:r3t,a=n.slice(i).match(o);if(a===null)throw new Error(O2e("type"));i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(i3t);l!==null&&(i+=l[0].length)}return r}function l3t(t,e,n){const{x:r,y:i}=t.getBoundingClientRect(),s=t.createSVGMatrix(),o=[];for(const a of e.children)if(a.tagName==="g"){const l=M2e(a)??s;for(const u of a.children)rte(n,r,i,u,l)&&o.push(u)}else rte(n,r,i,a,s)&&o.push(a);return o}function rte(t,e,n,r,i){let[[s,o],[a,l]]=t;const{e:u,f:c}=i,f=r.getBoundingClientRect(),h=f.left-e,d=f.right-e,p=f.top-n,m=f.bottom-n;if(h>=s&&d<=a&&p>=o&&m<=l)return!0;if(h<=a&&d>=s&&p<=l&&m>=o){let y=r.tagName;if(y==="a"&&(r=r.children[0],y=r.tagName),y==="rect"||y==="text"||y==="image")return!0;switch(s-=u,o-=c,a-=u,l-=c,y){case"circle":return I2e(s,o,a,l,Mg(r.cx),Mg(r.cy),Mg(r.r));case"line":return R2e(s,o,a,l,Mg(r.x1),Mg(r.y1),Mg(r.x2),Mg(r.y2));case"path":return u3t(s,o,a,l,r)}}return!1}function Mg(t){return t.baseVal.value}function M2e(t){const e=t.transform.baseVal,n=e.length;let r=e[0]?.matrix;for(let i=1;i<n;++i)r=r.multiply(e[i].matrix);return r}function I2e(t,e,n,r,i,s,o){const a=t<=i&&i<=n,l=e<=s&&s<=r;if(a&&l)return!0;const u=Math.min(Math.abs(t-i),Math.abs(n-i));if(l&&u<=o)return!0;const c=Math.min(Math.abs(e-s),Math.abs(r-s));return a&&c<=o||u*u+c*c<=o*o}function R2e(t,e,n,r,i,s,o,a){const l=Math.max(Math.min(i,o),t),u=Math.min(Math.max(i,o),n);if(l>u)return!1;let c=s,f=a;const h=o-i;if(Math.abs(h)>1e-8){const m=(a-s)/h,y=s-m*i;c=m*l+y,f=m*u+y}const d=Math.max(Math.min(c,f),e),p=Math.min(Math.max(c,f),r);return d<=p}function u3t(t,e,n,r,i){const s=i.__path__||(i.__path__=o3t(i.getAttribute("d")));let o=0,a=0,l=0,u=0,c=!1,f=[0,0],h=2;const d=M2e(i),p=(v,w)=>{f.length=h=2,f[0]=l=o=v,f[1]=u=a=w},m=d?(v,w)=>p(ite(d,v,w),ste(d,v,w)):(v,w)=>p(v,w),y=(v,w)=>(f[h]=v,f[h+1]=w,h+=2,R2e(t,e,n,r,f[h-4],f[h-3],v,w)),b=d?(v,w)=>{c=y(ite(d,l=v,u=w),ste(d,v,w))}:(v,w)=>{c=y(l=v,u=w)};for(let v=0;v<s.length;++v){const w=s[v];switch(w[0]){case"M":m(w[1],w[2]);break;case"m":m(l+w[1],u+w[2]);break;case"L":case"T":b(w[1],w[2]);break;case"H":b(w[1],u);break;case"V":b(l,w[1]);break;case"l":case"t":b(l+w[1],u+w[2]);break;case"h":b(l+w[1],u);break;case"v":b(l,u+w[1]);break;case"C":b(w[5],w[6]);break;case"c":b(l+w[5],u+w[6]);break;case"S":case"Q":b(w[3],w[4]);break;case"s":case"q":b(l+w[3],u+w[4]);break;case"A":b(w[6],w[7]);break;case"a":if(c3t(s,v))return I2e(t,e,n,r,l,u-w[2],w[2]);b(l+w[6],l+w[7]);break;case"z":case"Z":if(b(o,a),f3t(t,e,f)>0)return!0;m(o,a);break;default:return console.warn("SVG path command not supported: ",w[0]),!1}if(c)return!0}return!1}function ite(t,e,n){return t.a*e+t.c*n+t.e}function ste(t,e,n){return t.b*e+t.d*n+t.f}function c3t(t,e){const n=t[e],r=t[e+1];return r&&r[0]==="a"&&t[e+2]?.[0]==="z"&&n[1]===n[2]&&r[1]===r[2]&&n[1]===r[1]&&n[7]===-r[7]}function f3t(t,e,n){let r=0;const i=n.length-2;for(let s=0;s<i;s+=2)n[s+1]<=e?n[s+3]>e&&ote(t,e,n,s)>0&&++r:n[s+3]<=e&&ote(t,e,n[s])<0&&--r;return r}function ote(t,e,n,r){return(n[r+2]-n[r])*(e-n[r+1])-(t-n[r])*(n[r+3]-n[r+1])}function F2e(t,e){return t==null||e==null?t!=null||e!=null:t.length!==e.length||t.some((n,r)=>HL(n,e[r]))}function HL(t,e){const n=t.length;if(e.length!==n)return!0;for(let r=0;r<n;++r)if(t[r]!==e[r])return!0;return!1}class h3t{constructor(e,{channels:n,selection:r,peers:i=!0,brush:s={fill:"none",stroke:"currentColor",strokeDasharray:"1,1"}}){this.mark=e,this.selection=r,this.peers=i,this.style=s&&ZT(s),this.brush=E2e(),this.brush.on("brush end",l=>this.publish(l.selection)),this.extent=null,this.groups=null;const{fields:o,as:a}=Y_t(e,n);this.fields=o,this.as=a}reset(){this.value=void 0,this.extent=null,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause([this.fields.map(()=>0)]))}clause(e){const{fields:n,mark:r}=this;return Y8(n,e,{source:this,clients:this.peers?r.plot.markSet:new Set().add(r)})}publish(e){const{as:n,group:r,mark:i,svg:s}=this;let o;if(e){const{data:{columns:a={}}={}}=i,l=new Map;l3t(s,r,e).forEach(u=>{const c=uq(u),f=n.map(h=>a[h][c]);l.set(f.join("|"),f)}),o=Array.from(l.values())}this.extent=e,F2e(o,this.value)&&(this.value=o,this.selection.update(this.clause(o)))}init(e){const{brush:n,extent:r,mark:i,style:s}=this;this.svg=e;const o=e.width.baseVal.value,a=e.height.baseVal.value;if(n.extent([[0,0],[o,a]]),this.group=e.querySelector(`[data-index="${i.index}"]`),this.g=Kr(e).append("g").attr("class","region-xy").each(k2e).call(n).call(n.moveSilent,r),s){const l=this.g.selectAll("rect.selection");for(const u in s)l.attr(u,s[u])}e.addEventListener("pointerenter",l=>{l.buttons||this.activate()})}}class N2e{constructor(e,{selection:n,channels:r,peers:i=!0}){this.mark=e,this.value=null,this.selection=n,this.peers=i;const s=this.fields=[],o=this.as=[];r.forEach(a=>{const l=a==="color"?["color","fill","stroke"]:a==="x"?["x","x1","x2"]:a==="y"?["y","y1","y2"]:[a];for(let u=0;u<l.length;++u){const c=e.channelField(l[u],{exact:!0});if(c){s.push(c.field?.basis||c.field),o.push(c.as);return}}throw new Error(`Missing channel: ${a}`)})}clause(e){const{fields:n,mark:r}=this;return Y8(n,e,{source:this,clients:this.peers?r.plot.markSet:new Set().add(r)})}init(e,n,r){const{mark:i,as:s,selection:o}=this,{data:{columns:a={}}={}}=i;r??=u=>s.map(c=>a[c][uq(u)]),n??=`[data-index="${i.index}"]`;const l=Array.from(e.querySelectorAll(n));e.addEventListener("pointerdown",u=>{const c=o.single?o.value:this.value,f=u.target;let h=null;if(d3t(l,f)){const d=r(f);(u.shiftKey||u.metaKey)&&c?.length?(h=c.filter(p=>HL(p,d)),h.length===c.length&&h.push(d)):c?.length===1&&!HL(c[0],d)?h=null:h=[d]}this.value=h,F2e(c,h)&&o.update(this.clause(h))}),e.addEventListener("pointerenter",u=>{u.buttons||this.activate()})}activate(){this.selection.activate(this.clause([this.fields.map(()=>0)]))}}function d3t(t,e){return t.some(n=>n.contains(e))}const L2e=":scope > div, :scope > span",WC="swatch",ate="ramp";let lte=class{constructor(e,n){const{as:r,field:i,...s}=n;this.channel=e,this.options=s,this.type=null,this.handler=null,this.selection=r,this.field=i,this.legend=null,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),Object.defineProperty(this.element,"value",{value:this})}setPlot(e){this.plot=e}init(e){const n=p3t(this,e);return this.element.replaceChildren(n),this.element}update(){if(!this.legend)return;const{selection:e,handler:n}=this,{single:r,value:i}=e,s=r?i:e.valueFor(n),o=s&&s.length?new Set(s.map(l=>l[0])):null,a=this.legend.querySelectorAll(L2e);for(const l of a){const u=o?o.has(l.__data__):!0;l.style.opacity=u?1:.2}}};function p3t(t,e){const{channel:n,plot:r,selection:i}=t,s=e.scale(n),o=s.type==="ordinal"?WC:ate,a={label:r.getAttribute(`${n}Label`)??null,...t.options},l=o===WC?a:a.label?{tickSize:2,...a}:{tickSize:2,marginTop:1,height:29,...a},u=e.legend(n,l);t.legend=u;let c=!!i;if(c&&o===ate){const f=l.width??240,h=b3t(s,f);h?u.scale=function(d){return d==="x"?{range:[0,f]}:d==="y"?{range:[-10,0]}:d===n?h:void 0}:c=!1}if(c){const f=g3t(t,o);o===WC?(f.init(u,L2e,h=>[h.__data__]),t.update()):f.init(u,u.querySelector("g:last-of-type"))}return u}function g3t(t,e){const{channel:n,handler:r,selection:i}=t;if(r)return r;const s=m3t(t);return e===WC?(t.handler=new N2e(s,{selection:i,channels:[n],peers:!1}),i.addEventListener("value",()=>t.update())):t.handler=new fq(s,{selection:i,channel:n,brush:{fill:"none",stroke:"currentColor"},peers:!1}),t.handler}function m3t(t){const{channel:e,plot:n}=t,r=t.field??y3t(n.marks,e)??"value";if(r){const i={field:r};return{plot:n,channelField:s=>e===s?i:void 0}}}function y3t(t,e){const n=e==="color"?["fill","stroke"]:e==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=t.length-1;r>-1;--r)for(const i of n){const s=t[r].channelField(i,{exact:!0});if(s)return s.field}return null}function b3t(t,e){const{apply:n,invert:r,interpolate:i,...s}=t;let o=t.type;o.startsWith("diverging-")&&(o=o.slice(11));let a;switch(o){case"log":case"pow":case"sqrt":case"symlog":a=o;break;case"threshold":case"quantize":case"quantile":return console.warn(`Legends do not yet support ${o} scales.`),null;default:a="linear"}return C3({x:{...s,type:a,range:[0,e]}})}const v3t=new Set(["rectY-x","rectX-y","rect-x","rect-y","ruleY-x","ruleX-y"]);function x3t(t,e){return v3t.has(`${t.type}-${e}`)}function w3t(t,e={}){const n=(r,i)=>x3t(r,i)?{[`${i}1`]:_I(r,i,t,e),[`${i}2`]:_I(r,i,t,{...e,offset:1})}:{[i]:_I(r,i,t,e)};return n[Gge]=!0,n}function _I(t,e,n,r){return new S3t(n,t,e,r)}function _3t(t,e){const n=t.plot.getAttribute(`${e}Scale`);return n==="utc"||n==="time"}let S3t=class extends fi{constructor(e,n,r,i){super("CUSTOM"),this.column=e,this.mark=n,this.channel=r,this.options=i}get stats(){return{column:this.column,stats:["min","max"]}}toString(e=pie){const{mark:n,channel:r,column:i,options:s}=this,{type:o,min:a,max:l}=n.channelField(r),c=s.interval||o==="date"||_3t(n,r)?xRe(i,[a,l],s):ERe(i,[a,l],s,X5(n,r));return e.toString(c)}},eO=class extends y1{constructor(e,n,r="input"){super(e),this.element=n||document.createElement("div"),r&&this.element.setAttribute("class",r),Object.defineProperty(this.element,"value",{value:this})}activate(){}};const A3t=t=>t&&typeof t=="object"&&!Array.isArray(t);class C3t extends eO{constructor({element:e,filterBy:n,as:r,from:i,column:s,label:o=s,format:a=h=>h,options:l,value:u,field:c=s,listMatch:f}={}){super(n,e),this.from=i,this.column=s,this.format=a,this.field=c,this.listMatch=f;const h=this.selection=r,d=document.createElement("label");if(d.innerText=o||s,this.element.appendChild(d),this.select=document.createElement("select"),this.element.appendChild(this.select),l&&(this.data=l.map(p=>A3t(p)?p:{value:p}),this.selectedValue(u===void 0?"":u),this.update()),h){const p=!Ko(h);u!=null&&(!p||h.value===void 0)&&this.publish(u),this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),p?this.selection.addEventListener("value",m=>{m!==this.select.value&&this.selectedValue(m)}):(this.select.addEventListener("pointerenter",m=>{m.buttons||this.activate()}),this.select.addEventListener("focus",()=>this.activate()))}}selectedValue(e){if(arguments.length===0){const n=this.select.selectedIndex;return this.data[n].value}else{const n=this.data?.findIndex(r=>r.value===e);n>=0?this.select.selectedIndex=n:this.select.value=String(e)}}reset(){this.select.selectedIndex=this.from?0:-1}activate(){Ko(this.selection)&&this.selection.activate(Wk(this.field,0,{source:this}))}publish(e){const{selection:n,field:r,listMatch:i}=this;if(Ko(n)){e===""&&(e=void 0);const s=i?NPe(r,e,{source:this,listMatch:i}):Wk(r,e,{source:this});n.update(s)}else Su(n)&&n.update(e)}query(e=[]){const{from:n,column:r,listMatch:i}=this;return n?Ue.from(n).select({value:i?UIe(r):r}).distinct().where(e).orderby(r):null}queryResult(e){return this.data=[{value:"",label:"All"},...e],this}update(){const{data:e,format:n,select:r,selection:i}=this;r.replaceChildren();for(const{value:s,label:o}of e){const a=document.createElement("option");a.setAttribute("value",s),a.innerText=o??n(s),this.select.appendChild(a)}if(i){const s=Ko(i)?i.valueFor(this):i.value;this.selectedValue(s===void 0?"":s)}return this}}let k3t=0;class E3t extends eO{constructor({element:e,filterBy:n,from:r,column:i,label:s,type:o="contains",field:a=i,as:l}={}){if(super(n,e),this.id="search_"+ ++k3t,this.type=o,this.from=r,this.column=i,this.selection=l,this.field=a,s){const u=document.createElement("label");u.setAttribute("for",this.id),u.innerText=s,this.element.appendChild(u)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),Ko(this.selection)?(this.searchbox.addEventListener("pointerenter",u=>{u.buttons||this.activate()}),this.searchbox.addEventListener("focus",()=>this.activate())):this.selection.addEventListener("value",u=>{u!==this.searchbox.value&&(this.searchbox.value=u)}))}reset(){this.searchbox.value=""}clause(e){const{field:n,type:r}=this;return FPe(n,e,{source:this,method:r})}activate(){Ko(this.selection)&&this.selection.activate(this.clause(""))}publish(e){const{selection:n}=this;Ko(n)?n.update(this.clause(e)):Su(n)&&n.update(e)}query(e=[]){const{from:n,column:r}=this;return n?Ue.from(n).select({list:r}).distinct().where(e):null}queryResult(e){return this.data=e,this}update(){const e=document.createElement("datalist"),n=`${this.id}_list`;e.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),e.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=e),this.searchbox.setAttribute("list",n),this}}let D3t=0,T3t=class extends eO{constructor({element:e,filterBy:n,as:r,min:i,max:s,step:o,from:a,column:l,label:u=l,value:c=r?.value,select:f="point",field:h=l,width:d}={}){if(super(n,e),this.id="slider_"+ ++D3t,this.from=a,this.column=l||"value",this.selection=r,this.selectionType=f,this.field=h,this.min=i,this.max=s,this.step=o,u){const p=document.createElement("label");p.setAttribute("for",this.id),p.innerText=u,this.element.appendChild(p)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),d!=null&&(this.slider.style.width=`${+d}px`),i!=null&&this.slider.setAttribute("min",`${i}`),s!=null&&this.slider.setAttribute("max",`${s}`),o!=null&&this.slider.setAttribute("step",`${o}`),this.element.appendChild(this.slider),this.curval=document.createElement("label"),this.curval.setAttribute("for",this.id),this.curval.setAttribute("class","value"),this.element.appendChild(this.curval),c!=null&&(this.slider.setAttribute("value",`${c}`),this.selection?.value===void 0&&this.publish(c)),this.curval.innerText=this.slider.value,this.slider.addEventListener("input",()=>{const{value:p}=this.slider;this.curval.innerText=p,this.selection&&this.publish(+p)}),this.selection&&(Ko(this.selection)?(this.slider.addEventListener("pointerenter",p=>{p.buttons||this.activate()}),this.slider.addEventListener("focus",()=>this.activate())):this.selection.addEventListener("value",p=>{p!==+this.slider.value&&(this.slider.value=p,this.curval.innerText=p)}))}query(e=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:Ue.select({min:pc(r),max:Eu(r)}).from(n).where(e)}queryResult(e){const{min:n,max:r}=Array.from(e)[0];return this.min==null&&(this.min=n,this.slider.setAttribute("min",`${n}`)),this.max==null&&(this.max=r,this.slider.setAttribute("max",`${r}`)),this.step==null&&(this.step=(r-n)/500,this.slider.setAttribute("step",`${this.step}`)),this}clause(e){const{field:n,selectionType:r}=this;if(r==="interval"){const i=[this.min??0,e];return ZB(n,i,{source:this,bin:"ceil",scale:{type:"identity",domain:i},pixelSize:this.step})}else return Wk(n,e,{source:this})}activate(){Ko(this.selection)&&this.selection.activate(this.clause(0))}publish(e){const{selection:n}=this;Ko(n)?n.update(this.clause(e)):Su(this.selection)&&n.update(e)}};const P2e=$2e(t=>{const e=dq(t);return n=>n==null?"":typeof n=="number"?e(n):n instanceof Date?B2e(n):`${n}`}),dq=$2e(t=>e=>e===0?"0":e.toLocaleString(t));P2e();dq();function B2e(t){return O3t(t,"Invalid Date")}function $2e(t){let e=null,n;return(r="en")=>r===e?n:n=t(e=r)}function O3t(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(+t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${M3t(t.getUTCFullYear())}-${od(t.getUTCMonth()+1,2)}-${od(t.getUTCDate(),2)}${n||r||i||s?`T${od(n,2)}:${od(r,2)}${i||s?`:${od(i,2)}${s?`.${od(s,3)}`:""}`:""}Z`:""}`}function M3t(t){return t<0?`-${od(-t,6)}`:t>9999?`+${od(t,6)}`:od(t,4)}function od(t,e){return`${t}`.padStart(e,"0")}let I3t=-1,R3t=class extends eO{constructor({element:e,filterBy:n,from:r,columns:i=["*"],align:s={},format:o,width:a,maxWidth:l,height:u=500,rowBatch:c=100,as:f}={}){super(n,e,null),this.id=`table-${++I3t}`,this.element.setAttribute("id",this.id),this.from=r,this.columns=i,this.format=o,this.align=s,this.widths=typeof a=="object"?a:{},Su(r)&&r.addEventListener("value",()=>this.initialize()),this.offset=0,this.limit=+c,this.isPending=!1,this.selection=f,this.currentRow=-1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${u}px`,this.element.style.overflow="auto";let h=-1;this.element.addEventListener("scroll",d=>{const{isPending:p,loaded:m}=this,{scrollHeight:y,scrollTop:b,clientHeight:v}=d.target,w=b<h;h=b,!(w||p||m)&&y-b<2*v&&(this.isPending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.selection&&(this.body.addEventListener("pointerover",d=>{const p=F3t(d.target);p>-1&&p!==this.currentRow&&(this.currentRow=p,this.selection.update(this.clause([p])))}),this.body.addEventListener("pointerleave",()=>{this.currentRow=-1,this.selection.update(this.clause())})),this.style=document.createElement("style"),this.element.appendChild(this.style)}sourceTable(){return Su(this.from)?this.from.value:this.from}clause(e=[]){const{data:n,limit:r,schema:i}=this,s=i.map(a=>a.column),o=e.map(a=>{const{columns:l}=n[~~(a/r)];return s.map(u=>l[u][a%r])});return Y8(s,o,{source:this})}requestData(e=0){this.offset=e;const n=this.query(this.filterBy?.predicate(this));this.requestQuery(n),gh().prefetch(n.clone().offset(e+this.limit))}async prepare(){const e=this.sourceTable(),n=this.columns.map(o=>({column:o,table:e})),r=await e$(this.coordinator,n);this.schema=r;const i=this.head;i.innerHTML="";const s=document.createElement("tr");for(const{column:o}of r){const a=document.createElement("th");a.addEventListener("click",l=>this.sort(l,o)),a.appendChild(document.createElement("span")),a.appendChild(document.createTextNode(o)),s.appendChild(a)}i.appendChild(s),this.formats=N3t(this.format,r),this.style.innerText=B3t(this.id,L3t(this.align,r),P3t(this.widths,r))}query(e=[]){const{limit:n,offset:r,schema:i,sortColumn:s,sortDesc:o}=this;return Ue.from(this.sourceTable()).select(i.map(a=>a.column)).where(e).orderby(s?o?Zv(s):s:[]).limit(n).offset(r)}queryResult(e){return this.isPending||(this.loaded=!1,this.data=[],this.body.replaceChildren(),this.offset=0),this.data.push(Vm(e)),this}update(){const{body:e,formats:n,data:r,schema:i,limit:s}=this,o=i.length,a=r.length-1,l=s*a,{numRows:u,columns:c}=r[a],f=i.map(h=>c[h.column]);for(let h=0;h<u;++h){const d=document.createElement("tr");Object.assign(d,{__row__:l+h});for(let p=0;p<o;++p){const m=f[p][h],y=document.createElement("td");y.innerText=m==null?"":n[p](m),d.appendChild(y)}e.appendChild(d)}return u<s&&(this.loaded=!0),this.isPending=!1,this}activate(){Ko(this.selection)&&this.selection.activate(this.clause([]))}sort(e,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=e.currentTarget,i=this.sortHeader;i===r&&e.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"â¾":"â´"),this.requestData()}};function F3t(t){const e=t.parentElement;return Object.hasOwn(e,"__row__")?+e.__row__:-1}function N3t(t={},e,n){return e.map(({column:r,type:i})=>{if(r in t)return t[r];switch(i){case"number":return dq(n);case"date":return B2e;default:return P2e(n)}})}function L3t(t={},e){return e.map(({column:n,type:r})=>n in t?t[n]:r==="number"?"right":"left")}function P3t(t={},e){return e.map(({column:n})=>t[n])}function B3t(t,e,n){const r=[];return e.forEach((i,s)=>{const o=+n[s];if(i!=="left"||o){const a=i!=="left"?`text-align:${i};`:"",l=o?`width:${o}px;max-width:${o}px;`:"";r.push(`#${t} tr>:nth-child(${s+1}) {${a}${l}}`)}}),r.join(" ")}function U2e(t,...e){const n=t?.context?.coordinator??gh();for(const r of e)n.connect(r)}function tO(t,e,n){const r=new e(n);return U2e(t,r),r.element}function $3t(t){return tO(this,C3t,t)}function U3t(t){return tO(this,E3t,t)}function z3t(t){return tO(this,T3t,t)}function j3t(t){return tO(this,R3t,t)}function z2e({direction:t="vertical",wrap:e=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=t==="vertical"?"column":"row",r.style.flexWrap=e?e===!0?"wrap":e:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),Object.assign(r,{value:{element:r}}),r}function q3t(...t){return z2e({direction:"vertical"},t.flat())}function V3t(...t){return z2e({direction:"horizontal"},t.flat())}function j2e({dim:t="width",size:e=10}){const n=document.createElement("span");return n.style.display="inline-block",n.style[t]=Number.isNaN(+e)?e:`${e}px`,Object.assign(n,{value:{element:n}})}function W3t(t){return j2e({dim:"height",size:t})}function H3t(t){return j2e({dim:"width",size:t})}class q2e extends Map{request(e,n){if(this.has(e))n(this.get(e));else{const r=this.waiting||(this.waiting=new Map),i=r.get(e)||[];r.set(e,i.concat(n))}}set(e,n){this.has(e)&&console.warn(`Overwriting named plot "${e}".`);const{waiting:r}=this;return r?.has(e)&&(r.get(e).forEach(i=>i(n)),r.delete(e)),super.set(e,n)}clear(){return this.waiting?.clear(),super.clear()}}const V2e=new q2e;function G3t(t,e,n){(t?.context?.namedPlots??V2e).request(e,n)}function Y3t(t,e,n){(t?.context?.namedPlots??V2e).set(e,n)}function W2e(t){return e=>Y3t(this,t,e)}function H2e(t,e,n){Su(n)?(n.addEventListener("value",r=>{t.setAttribute(e,r),t.update()}),n.value!==void 0&&t.setAttribute(e,n.value)):t.setAttribute(e,n)}function X3t(t,e){return n=>{H2e(n,t,e)}}function pq(t){return e=>{for(const[n,r]of Object.entries(t))H2e(e,n,r)}}function G2e(t){const{top:e,bottom:n,left:r,right:i}=t,s={};return e!==void 0&&(s.marginTop=e),n!==void 0&&(s.marginBottom=n),r!==void 0&&(s.marginLeft=r),i!==void 0&&(s.marginRight=i),pq(s)}function Y2e(t){return pq({marginTop:t,marginBottom:t,marginLeft:t,marginRight:t})}function X2e(t){return pq({xDomain:t,yDomain:t})}const re=t=>e=>X3t(t,e),K2e=re("style"),Q2e=re("width"),J2e=re("height"),Z2e=re("marginLeft"),exe=re("marginRight"),txe=re("marginTop"),nxe=re("marginBottom"),rxe=re("align"),ixe=re("aspectRatio"),sxe=re("axis"),oxe=re("inset"),axe=re("grid"),lxe=re("clip"),uxe=re("padding"),cxe=re("ariaLabel"),fxe=re("ariaDescription"),hxe=re("xScale"),dxe=re("xDomain"),pxe=re("xRange"),gxe=re("xNice"),mxe=re("xInset"),yxe=re("xInsetLeft"),bxe=re("xInsetRight"),vxe=re("xClamp"),xxe=re("xRound"),wxe=re("xAlign"),_xe=re("xPadding"),Sxe=re("xPaddingInner"),Axe=re("xPaddingOuter"),Cxe=re("xAxis"),kxe=re("xTicks"),Exe=re("xTickSize"),Dxe=re("xTickSpacing"),Txe=re("xTickPadding"),Oxe=re("xTickFormat"),Mxe=re("xTickRotate"),Ixe=re("xGrid"),Rxe=re("xLine"),Fxe=re("xLabel"),Nxe=re("xLabelAnchor"),Lxe=re("xLabelArrow"),Pxe=re("xLabelOffset"),Bxe=re("xFontVariant"),$xe=re("xAriaLabel"),Uxe=re("xAriaDescription"),zxe=re("xPercent"),jxe=re("xReverse"),qxe=re("xZero"),Vxe=re("xBase"),Wxe=re("xExponent"),Hxe=re("xConstant"),Gxe=re("yScale"),Yxe=re("yDomain"),Xxe=re("yRange"),Kxe=re("yNice"),Qxe=re("yInset"),Jxe=re("yInsetTop"),Zxe=re("yInsetBottom"),ewe=re("yClamp"),twe=re("yRound"),nwe=re("yAlign"),rwe=re("yPadding"),iwe=re("yPaddingInner"),swe=re("yPaddingOuter"),owe=re("yAxis"),awe=re("yTicks"),lwe=re("yTickSize"),uwe=re("yTickSpacing"),cwe=re("yTickPadding"),fwe=re("yTickFormat"),hwe=re("yTickRotate"),dwe=re("yGrid"),pwe=re("yLine"),gwe=re("yLabel"),mwe=re("yLabelAnchor"),ywe=re("yLabelArrow"),bwe=re("yLabelOffset"),vwe=re("yFontVariant"),xwe=re("yAriaLabel"),wwe=re("yAriaDescription"),_we=re("yPercent"),Swe=re("yReverse"),Awe=re("yZero"),Cwe=re("yBase"),kwe=re("yExponent"),Ewe=re("yConstant"),Dwe=re("facetMargin"),Twe=re("facetMarginTop"),Owe=re("facetMarginBottom"),Mwe=re("facetMarginLeft"),Iwe=re("facetMarginRight"),Rwe=re("facetGrid"),Fwe=re("facetLabel"),Nwe=re("fxDomain"),Lwe=re("fxRange"),Pwe=re("fxInset"),Bwe=re("fxInsetLeft"),$we=re("fxInsetRight"),Uwe=re("fxRound"),zwe=re("fxAlign"),jwe=re("fxPadding"),qwe=re("fxPaddingInner"),Vwe=re("fxPaddingOuter"),Wwe=re("fxAxis"),Hwe=re("fxTicks"),Gwe=re("fxTickSize"),Ywe=re("fxTickSpacing"),Xwe=re("fxTickPadding"),Kwe=re("fxTickFormat"),Qwe=re("fxTickRotate"),Jwe=re("fxGrid"),Zwe=re("fxLine"),e_e=re("fxLabel"),t_e=re("fxLabelAnchor"),n_e=re("fxLabelOffset"),r_e=re("fxFontVariant"),i_e=re("fxAriaLabel"),s_e=re("fxAriaDescription"),o_e=re("fxReverse"),a_e=re("fyDomain"),l_e=re("fyRange"),u_e=re("fyInset"),c_e=re("fyInsetTop"),f_e=re("fyInsetBottom"),h_e=re("fyRound"),d_e=re("fyAlign"),p_e=re("fyPadding"),g_e=re("fyPaddingInner"),m_e=re("fyPaddingOuter"),y_e=re("fyAxis"),b_e=re("fyTicks"),v_e=re("fyTickSize"),x_e=re("fyTickSpacing"),w_e=re("fyTickPadding"),__e=re("fyTickFormat"),S_e=re("fyTickRotate"),A_e=re("fyGrid"),C_e=re("fyLine"),k_e=re("fyLabel"),E_e=re("fyLabelAnchor"),D_e=re("fyLabelOffset"),T_e=re("fyFontVariant"),O_e=re("fyAriaLabel"),M_e=re("fyAriaDescription"),I_e=re("fyReverse"),R_e=re("colorScale"),F_e=re("colorDomain"),N_e=re("colorRange"),L_e=re("colorClamp"),P_e=re("colorN"),B_e=re("colorNice"),$_e=re("colorScheme"),U_e=re("colorInterpolate"),z_e=re("colorPivot"),j_e=re("colorSymmetric"),q_e=re("colorLabel"),V_e=re("colorPercent"),W_e=re("colorReverse"),H_e=re("colorZero"),G_e=re("colorTickFormat"),Y_e=re("colorBase"),X_e=re("colorExponent"),K_e=re("colorConstant"),Q_e=re("opacityScale"),J_e=re("opacityDomain"),Z_e=re("opacityRange"),e3e=re("opacityClamp"),t3e=re("opacityNice"),n3e=re("opacityLabel"),r3e=re("opacityPercent"),i3e=re("opacityReverse"),s3e=re("opacityZero"),o3e=re("opacityTickFormat"),a3e=re("opacityBase"),l3e=re("opacityExponent"),u3e=re("opacityConstant"),c3e=re("symbolScale"),f3e=re("symbolDomain"),h3e=re("symbolRange"),d3e=re("rScale"),p3e=re("rDomain"),g3e=re("rRange"),m3e=re("rClamp"),y3e=re("rNice"),b3e=re("rLabel"),v3e=re("rPercent"),x3e=re("rZero"),w3e=re("rBase"),_3e=re("rExponent"),S3e=re("rConstant"),A3e=re("lengthScale"),C3e=re("lengthDomain"),k3e=re("lengthRange"),E3e=re("lengthClamp"),D3e=re("lengthNice"),T3e=re("lengthPercent"),O3e=re("lengthZero"),M3e=re("lengthBase"),I3e=re("lengthExponent"),R3e=re("lengthConstant"),F3e=re("projectionType"),N3e=re("projectionParallels"),L3e=re("projectionPrecision"),P3e=re("projectionRotate"),B3e=re("projectionDomain"),$3e=re("projectionInset"),U3e=re("projectionInsetLeft"),z3e=re("projectionInsetRight"),j3e=re("projectionInsetTop"),q3e=re("projectionInsetBottom"),V3e=re("projectionClip"),K3t=Object.freeze(Object.defineProperty({__proto__:null,align:rxe,ariaDescription:fxe,ariaLabel:cxe,aspectRatio:ixe,axis:sxe,clip:lxe,colorBase:Y_e,colorClamp:L_e,colorConstant:K_e,colorDomain:F_e,colorExponent:X_e,colorInterpolate:U_e,colorLabel:q_e,colorN:P_e,colorNice:B_e,colorPercent:V_e,colorPivot:z_e,colorRange:N_e,colorReverse:W_e,colorScale:R_e,colorScheme:$_e,colorSymmetric:j_e,colorTickFormat:G_e,colorZero:H_e,facetGrid:Rwe,facetLabel:Fwe,facetMargin:Dwe,facetMarginBottom:Owe,facetMarginLeft:Mwe,facetMarginRight:Iwe,facetMarginTop:Twe,fxAlign:zwe,fxAriaDescription:s_e,fxAriaLabel:i_e,fxAxis:Wwe,fxDomain:Nwe,fxFontVariant:r_e,fxGrid:Jwe,fxInset:Pwe,fxInsetLeft:Bwe,fxInsetRight:$we,fxLabel:e_e,fxLabelAnchor:t_e,fxLabelOffset:n_e,fxLine:Zwe,fxPadding:jwe,fxPaddingInner:qwe,fxPaddingOuter:Vwe,fxRange:Lwe,fxReverse:o_e,fxRound:Uwe,fxTickFormat:Kwe,fxTickPadding:Xwe,fxTickRotate:Qwe,fxTickSize:Gwe,fxTickSpacing:Ywe,fxTicks:Hwe,fyAlign:d_e,fyAriaDescription:M_e,fyAriaLabel:O_e,fyAxis:y_e,fyDomain:a_e,fyFontVariant:T_e,fyGrid:A_e,fyInset:u_e,fyInsetBottom:f_e,fyInsetTop:c_e,fyLabel:k_e,fyLabelAnchor:E_e,fyLabelOffset:D_e,fyLine:C_e,fyPadding:p_e,fyPaddingInner:g_e,fyPaddingOuter:m_e,fyRange:l_e,fyReverse:I_e,fyRound:h_e,fyTickFormat:__e,fyTickPadding:w_e,fyTickRotate:S_e,fyTickSize:v_e,fyTickSpacing:x_e,fyTicks:b_e,grid:axe,height:J2e,inset:oxe,lengthBase:M3e,lengthClamp:E3e,lengthConstant:R3e,lengthDomain:C3e,lengthExponent:I3e,lengthNice:D3e,lengthPercent:T3e,lengthRange:k3e,lengthScale:A3e,lengthZero:O3e,margin:Y2e,marginBottom:nxe,marginLeft:Z2e,marginRight:exe,marginTop:txe,margins:G2e,name:W2e,opacityBase:a3e,opacityClamp:e3e,opacityConstant:u3e,opacityDomain:J_e,opacityExponent:l3e,opacityLabel:n3e,opacityNice:t3e,opacityPercent:r3e,opacityRange:Z_e,opacityReverse:i3e,opacityScale:Q_e,opacityTickFormat:o3e,opacityZero:s3e,padding:uxe,projectionClip:V3e,projectionDomain:B3e,projectionInset:$3e,projectionInsetBottom:q3e,projectionInsetLeft:U3e,projectionInsetRight:z3e,projectionInsetTop:j3e,projectionParallels:N3e,projectionPrecision:L3e,projectionRotate:P3e,projectionType:F3e,rBase:w3e,rClamp:m3e,rConstant:S3e,rDomain:p3e,rExponent:_3e,rLabel:b3e,rNice:y3e,rPercent:v3e,rRange:g3e,rScale:d3e,rZero:x3e,style:K2e,symbolDomain:f3e,symbolRange:h3e,symbolScale:c3e,width:Q2e,xAlign:wxe,xAriaDescription:Uxe,xAriaLabel:$xe,xAxis:Cxe,xBase:Vxe,xClamp:vxe,xConstant:Hxe,xDomain:dxe,xExponent:Wxe,xFontVariant:Bxe,xGrid:Ixe,xInset:mxe,xInsetLeft:yxe,xInsetRight:bxe,xLabel:Fxe,xLabelAnchor:Nxe,xLabelArrow:Lxe,xLabelOffset:Pxe,xLine:Rxe,xNice:gxe,xPadding:_xe,xPaddingInner:Sxe,xPaddingOuter:Axe,xPercent:zxe,xRange:pxe,xReverse:jxe,xRound:xxe,xScale:hxe,xTickFormat:Oxe,xTickPadding:Txe,xTickRotate:Mxe,xTickSize:Exe,xTickSpacing:Dxe,xTicks:kxe,xZero:qxe,xyDomain:X2e,yAlign:nwe,yAriaDescription:wwe,yAriaLabel:xwe,yAxis:owe,yBase:Cwe,yClamp:ewe,yConstant:Ewe,yDomain:Yxe,yExponent:kwe,yFontVariant:vwe,yGrid:dwe,yInset:Qxe,yInsetBottom:Zxe,yInsetTop:Jxe,yLabel:gwe,yLabelAnchor:mwe,yLabelArrow:ywe,yLabelOffset:bwe,yLine:pwe,yNice:Kxe,yPadding:rwe,yPaddingInner:iwe,yPaddingOuter:swe,yPercent:_we,yRange:Xxe,yReverse:Swe,yRound:twe,yScale:Gxe,yTickFormat:fwe,yTickPadding:cwe,yTickRotate:hwe,yTickSize:lwe,yTickSpacing:uwe,yTicks:awe,yZero:Awe},Symbol.toStringTag,{value:"Module"}));function Q3t(t,e=void 0){return{table:t,options:e}}const J3t=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function wt(t,e,n={}){arguments.length===2&&!Array.isArray(e)&&(n=e,e=J3t.has(t)?null:[{}]);const r=t.startsWith("area")||t.startsWith("line")?Zwt:dg;return i4(r,t,e,n)}function i4(t,e,n,r){return i=>{i.addMark(new t(e,n,r))}}function up(t,e,n){return r=>{r.addMark(new t(e,n))}}const W3e=(...t)=>wt("area",...t),H3e=(...t)=>wt("areaX",...t),G3e=(...t)=>wt("areaY",...t),Y3e=(...t)=>wt("line",...t),X3e=(...t)=>wt("lineX",...t),K3e=(...t)=>wt("lineY",...t),Q3e=(...t)=>wt("barX",...t),J3e=(...t)=>wt("barY",...t),Z3e=(...t)=>wt("cell",...t),eSe=(...t)=>wt("cellX",...t),tSe=(...t)=>wt("cellY",...t),nSe=(...t)=>wt("rect",...t),rSe=(...t)=>wt("rectX",...t),iSe=(...t)=>wt("rectY",...t),sSe=(...t)=>wt("dot",...t),oSe=(...t)=>wt("dotX",...t),aSe=(...t)=>wt("dotY",...t),lSe=(...t)=>wt("circle",...t),uSe=(...t)=>wt("hexagon",...t),cSe=(...t)=>wt("text",...t),fSe=(...t)=>wt("textX",...t),hSe=(...t)=>wt("textY",...t),dSe=(...t)=>wt("ruleX",...t),pSe=(...t)=>wt("ruleY",...t),gSe=(...t)=>wt("tickX",...t),mSe=(...t)=>wt("tickY",...t),ySe=(...t)=>wt("vector",...t),bSe=(...t)=>wt("vectoX",...t),vSe=(...t)=>wt("vectorY",...t),xSe=(...t)=>wt("spike",...t),wSe=(...t)=>wt("image",...t),_Se=(...t)=>i4(A2e,"areaX",...t),SSe=(...t)=>i4(A2e,"areaY",...t),ASe=(...t)=>up(A_t,...t),CSe=(...t)=>up(x_t,...t),kSe=(...t)=>up(l_t,...t),ESe=(...t)=>up(g_t,...t),DSe=(...t)=>up(lq,...t),TSe=(...t)=>up(R_t,...t),OSe=(...t)=>up(I_t,...t),MSe=(...t)=>wt("hexgrid",...t),ISe=(...t)=>up($_t,...t),RSe=(...t)=>i4(C2e,"ruleY",...t),FSe=(...t)=>i4(C2e,"ruleX",...t),NSe=(...t)=>wt("voronoi",...t),LSe=(...t)=>wt("voronoiMesh",...t),PSe=(...t)=>wt("delaunayLink",...t),BSe=(...t)=>wt("delaunayMesh",...t),$Se=(...t)=>wt("hull",...t),USe=(...t)=>wt("arrow",...t),zSe=(...t)=>wt("link",...t),jSe=(...t)=>wt("frame",...t),qSe=(...t)=>wt("axisX",...t),VSe=(...t)=>wt("axisY",...t),WSe=(...t)=>wt("axisFx",...t),HSe=(...t)=>wt("axisFy",...t),GSe=(...t)=>wt("gridX",...t),YSe=(...t)=>wt("gridY",...t),XSe=(...t)=>wt("gridFx",...t),KSe=(...t)=>wt("gridFy",...t),QSe=(...t)=>up(M_t,...t),JSe=(...t)=>wt("sphere",...t),ZSe=(...t)=>wt("graticule",...t),e4e=(...t)=>wt("waffleX",...t),t4e=(...t)=>wt("waffleY",...t),Z3t=Object.freeze(Object.defineProperty({__proto__:null,area:W3e,areaX:H3e,areaY:G3e,arrow:USe,axisFx:WSe,axisFy:HSe,axisX:qSe,axisY:VSe,barX:Q3e,barY:J3e,cell:Z3e,cellX:eSe,cellY:tSe,circle:lSe,contour:kSe,delaunayLink:PSe,delaunayMesh:BSe,denseLine:CSe,density:ASe,densityX:_Se,densityY:SSe,dot:sSe,dotX:oSe,dotY:aSe,errorbarX:RSe,errorbarY:FSe,frame:jSe,geo:QSe,graticule:ZSe,gridFx:XSe,gridFy:KSe,gridX:GSe,gridY:YSe,heatmap:ESe,hexagon:uSe,hexbin:OSe,hexgrid:MSe,hull:$Se,image:wSe,line:Y3e,lineX:X3e,lineY:K3e,link:zSe,raster:DSe,rasterTile:TSe,rect:nSe,rectX:rSe,rectY:iSe,regressionY:ISe,ruleX:dSe,ruleY:pSe,sphere:JSe,spike:xSe,text:cSe,textX:fSe,textY:hSe,tickX:gSe,tickY:mSe,vector:ySe,vectorX:bSe,vectorY:vSe,voronoi:NSe,voronoiMesh:LSe,waffleX:e4e,waffleY:t4e},Symbol.toStringTag,{value:"Module"}));function Ch(t,e){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new t(r,e))}}function n4e({by:t,...e}){return Ch(V_t,{selection:t,channels:e})}function r4e({as:t,...e}){return Ch(fq,{...e,selection:t,channel:"x"})}function i4e({as:t,...e}){return Ch(fq,{...e,selection:t,channel:"y"})}function s4e({as:t,...e}){return Ch(X_t,{...e,selection:t})}function o4e({as:t,...e}){return Ch(hq,{...e,selection:t,pointer:"xy"})}function a4e({as:t,...e}){return Ch(hq,{...e,selection:t,pointer:"x"})}function l4e({as:t,...e}){return Ch(hq,{...e,selection:t,pointer:"y"})}function u4e({as:t,...e}){return Ch(h3t,{...e,selection:t})}function P2({as:t,...e}){return Ch(N2e,{...e,selection:t})}function c4e(t){return P2({...t,channels:["x"]})}function f4e(t){return P2({...t,channels:["y"]})}function h4e(t){return P2({...t,channels:["z"]})}function d4e(t){return P2({...t,channels:["color"]})}function B2(t){return Ch(J_t,t)}function p4e(t={}){return B2({...t,zoom:!1})}function g4e(t={}){return B2({...t,zoom:!1,pany:!1})}function m4e(t={}){return B2({...t,zoom:!1,panx:!1})}function y4e(t={}){return B2(t)}function b4e(t={}){return B2({...t,pany:!1})}function v4e(t={}){return B2({...t,panx:!1})}const eSt=Object.freeze(Object.defineProperty({__proto__:null,highlight:n4e,intervalX:r4e,intervalXY:s4e,intervalY:i4e,nearest:o4e,nearestX:a4e,nearestY:l4e,pan:p4e,panX:g4e,panY:m4e,panZoom:y4e,panZoomX:b4e,panZoomY:v4e,region:u4e,toggle:P2,toggleColor:d4e,toggleX:c4e,toggleY:f4e,toggleZ:h4e},Symbol.toStringTag,{value:"Module"}));function gq(t,e={}){if(e.for){const{for:n,...r}=e,i=new lte(t,r),s=typeof n,o=a=>a.addLegend(i,!1);return s==="string"?G3t(this,n,o):n.value&&o(n.value),i.element}else return n=>n.addLegend(new lte(t,e))}function x4e(t){return gq.call(this,"color",t)}function w4e(t){return gq.call(this,"opacity",t)}function _4e(t){return gq.call(this,"symbol",t)}const tSt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:x4e,opacityLegend:w4e,symbolLegend:_4e},Symbol.toStringTag,{value:"Module"}));function nSt(...t){const e=new Vwt;return t.flat().forEach(n=>n(e)),U2e(this,...e.marks),e.update(),e.element}const rSt=Object.freeze(Object.defineProperty({__proto__:null,Fixed:NS,Param:mm,Query:Ue,Selection:Wb,align:rxe,and:cs,area:W3e,areaX:H3e,areaY:G3e,argmax:ck,argmin:fk,ariaDescription:fxe,ariaLabel:cxe,arrayAgg:LMe,arrow:USe,aspectRatio:ixe,avg:$8,axis:sxe,axisFx:WSe,axisFy:HSe,axisX:qSe,axisY:VSe,barX:Q3e,barY:J3e,bin:w3t,cast:yi,cell:Z3e,cellX:eSe,cellY:tSe,centroid:xB,centroidX:IIe,centroidY:RIe,circle:lSe,clip:lxe,colorBase:Y_e,colorClamp:L_e,colorConstant:K_e,colorDomain:F_e,colorExponent:X_e,colorInterpolate:U_e,colorLabel:q_e,colorLegend:x4e,colorN:P_e,colorNice:B_e,colorPercent:V_e,colorPivot:z_e,colorRange:N_e,colorReverse:W_e,colorScale:R_e,colorScheme:$_e,colorSymmetric:j_e,colorTickFormat:G_e,colorZero:H_e,column:_e,contour:kSe,coordinator:gh,corr:PMe,count:ur,covarPop:$Me,covariance:BMe,createSchema:iRe,createTable:Y3,cume_dist:VIe,dateDay:bIe,dateMonth:mIe,dateMonthDay:yIe,days:lIe,delaunayLink:PSe,delaunayMesh:BSe,denseLine:CSe,dense_rank:jIe,density:ASe,densityX:_Se,densityY:SSe,dot:sSe,dotX:oSe,dotY:aSe,entropy:UMe,eq:ml,errorbarX:RSe,errorbarY:FSe,facetGrid:Rwe,facetLabel:Fwe,facetMargin:Dwe,facetMarginBottom:Owe,facetMarginLeft:Mwe,facetMarginRight:Iwe,facetMarginTop:Twe,first:zMe,first_value:GIe,float32:iIe,float64:zo,frame:jSe,frameGroups:JIe,frameRange:QIe,frameRows:KIe,from:Q3t,fxAlign:zwe,fxAriaDescription:s_e,fxAriaLabel:i_e,fxAxis:Wwe,fxDomain:Nwe,fxFontVariant:r_e,fxGrid:Jwe,fxInset:Pwe,fxInsetLeft:Bwe,fxInsetRight:$we,fxLabel:e_e,fxLabelAnchor:t_e,fxLabelOffset:n_e,fxLine:Zwe,fxPadding:jwe,fxPaddingInner:qwe,fxPaddingOuter:Vwe,fxRange:Lwe,fxReverse:o_e,fxRound:Uwe,fxTickFormat:Kwe,fxTickPadding:Xwe,fxTickRotate:Qwe,fxTickSize:Gwe,fxTickSpacing:Ywe,fxTicks:Hwe,fyAlign:d_e,fyAriaDescription:M_e,fyAriaLabel:O_e,fyAxis:y_e,fyDomain:a_e,fyFontVariant:T_e,fyGrid:A_e,fyInset:u_e,fyInsetBottom:f_e,fyInsetTop:c_e,fyLabel:k_e,fyLabelAnchor:E_e,fyLabelOffset:D_e,fyLine:C_e,fyPadding:p_e,fyPaddingInner:g_e,fyPaddingOuter:m_e,fyRange:l_e,fyReverse:I_e,fyRound:h_e,fyTickFormat:__e,fyTickPadding:w_e,fyTickRotate:S_e,fyTickSize:v_e,fyTickSpacing:x_e,fyTicks:b_e,geo:QSe,geojson:Rie,geomean:jMe,graticule:ZSe,grid:axe,gridFx:XSe,gridFy:KSe,gridX:GSe,gridY:YSe,gt:du,gte:kIe,hconcat:V3t,heatmap:ESe,height:J2e,hexagon:uSe,hexbin:OSe,hexgrid:MSe,highlight:n4e,hours:uIe,hspace:H3t,hull:$Se,image:wSe,inset:oxe,int32:ls,interval:Ic,intervalX:r4e,intervalXY:s4e,intervalY:i4e,isBetween:Xo,isDistinct:EIe,isNotBetween:DIe,isNotDistinct:vB,isNotNull:Yf,isNull:uc,kurtosis:qMe,lag:HIe,last:HMe,last_value:YIe,lead:pR,lengthBase:M3e,lengthClamp:E3e,lengthConstant:R3e,lengthDomain:C3e,lengthExponent:I3e,lengthNice:D3e,lengthPercent:T3e,lengthRange:k3e,lengthScale:A3e,lengthZero:O3e,line:Y3e,lineX:X3e,lineY:K3e,link:zSe,literal:Ze,loadCSV:oRe,loadExtension:Pie,loadJSON:aRe,loadObjects:cRe,loadParquet:lRe,loadSpatial:uRe,lt:Yi,lte:Bf,mad:VMe,margin:Y2e,marginBottom:nxe,marginLeft:Z2e,marginRight:exe,marginTop:txe,margins:G2e,max:Eu,median:U8,menu:$3t,microseconds:dIe,milliseconds:hIe,min:pc,minutes:cIe,mode:WMe,months:aIe,name:W2e,nearest:o4e,nearestX:a4e,nearestY:l4e,neq:H3,not:Vb,nth_value:XIe,ntile:WIe,opacityBase:a3e,opacityClamp:e3e,opacityConstant:u3e,opacityDomain:J_e,opacityExponent:l3e,opacityLabel:n3e,opacityLegend:w4e,opacityNice:t3e,opacityPercent:r3e,opacityRange:Z_e,opacityReverse:i3e,opacityScale:Q_e,opacityTickFormat:o3e,opacityZero:s3e,or:lo,padding:uxe,pan:p4e,panX:g4e,panY:m4e,panZoom:y4e,panZoomX:b4e,panZoomY:v4e,percent_rank:qIe,plot:nSt,product:GMe,projectionClip:V3e,projectionDomain:B3e,projectionInset:$3e,projectionInsetBottom:q3e,projectionInsetLeft:U3e,projectionInsetRight:z3e,projectionInsetTop:j3e,projectionParallels:N3e,projectionPrecision:L3e,projectionRotate:P3e,projectionType:F3e,quantile:dR,rBase:w3e,rClamp:m3e,rConstant:S3e,rDomain:p3e,rExponent:_3e,rLabel:b3e,rNice:y3e,rPercent:v3e,rRange:g3e,rScale:d3e,rZero:x3e,rank:zIe,raster:DSe,rasterTile:TSe,rect:nSe,rectX:rSe,rectY:iSe,region:u4e,regressionY:ISe,row_number:Nie,ruleX:dSe,ruleY:pSe,search:U3t,seconds:fIe,skewness:ZMe,slider:z3t,sphere:JSe,spike:xSe,sql:mt,stddev:Oie,stddevPop:eIe,stringAgg:tIe,style:K2e,sum:Qr,symbolDomain:f3e,symbolLegend:_4e,symbolRange:h3e,symbolScale:c3e,table:j3t,text:cSe,textX:fSe,textY:hSe,tickX:gSe,tickY:mSe,toggle:P2,toggleColor:d4e,toggleX:c4e,toggleY:f4e,toggleZ:h4e,varPop:rIe,variance:nIe,vconcat:q3t,vector:ySe,vectorX:bSe,vectorY:vSe,voronoi:NSe,voronoiMesh:LSe,vspace:W3t,waffleX:e4e,waffleY:t4e,width:Q2e,xAlign:wxe,xAriaDescription:Uxe,xAriaLabel:$xe,xAxis:Cxe,xBase:Vxe,xClamp:vxe,xConstant:Hxe,xDomain:dxe,xExponent:Wxe,xFontVariant:Bxe,xGrid:Ixe,xInset:mxe,xInsetLeft:yxe,xInsetRight:bxe,xLabel:Fxe,xLabelAnchor:Nxe,xLabelArrow:Lxe,xLabelOffset:Pxe,xLine:Rxe,xNice:gxe,xPadding:_xe,xPaddingInner:Sxe,xPaddingOuter:Axe,xPercent:zxe,xRange:pxe,xReverse:jxe,xRound:xxe,xScale:hxe,xTickFormat:Oxe,xTickPadding:Txe,xTickRotate:Mxe,xTickSize:Exe,xTickSpacing:Dxe,xTicks:kxe,xZero:qxe,xyDomain:X2e,yAlign:nwe,yAriaDescription:wwe,yAriaLabel:xwe,yAxis:owe,yBase:Cwe,yClamp:ewe,yConstant:Ewe,yDomain:Yxe,yExponent:kwe,yFontVariant:vwe,yGrid:dwe,yInset:Qxe,yInsetBottom:Zxe,yInsetTop:Jxe,yLabel:gwe,yLabelAnchor:mwe,yLabelArrow:ywe,yLabelOffset:bwe,yLine:pwe,yNice:Kxe,yPadding:rwe,yPaddingInner:iwe,yPaddingOuter:swe,yPercent:_we,yRange:Xxe,yReverse:Swe,yRound:twe,yScale:Gxe,yTickFormat:fwe,yTickPadding:cwe,yTickRotate:hwe,yTickSize:lwe,yTickSpacing:uwe,yTicks:awe,yZero:Awe,years:oIe},Symbol.toStringTag,{value:"Module"}));function S4e({coordinator:t=gh(),namedPlots:e=new q2e,extensions:n=null,...r}={}){return{...rSt,...n,context:{coordinator:t,namedPlots:e,...r}}}const iSt="spec",A4e="literal",sSt="options",oSt="selection",aSt="paramref",lSt="columnparamref",uSt="param",cSt="include",C4e="select",GL="value",fSt="crossfilter",k4e="intersect",hSt="union",dSt="single",pSt="data",gSt="expression",Qw="sql",mq="input",K5="hconcat",Q5="vconcat",J5="hspace",Z5="vspace",E4e="mark",ute="from",e8="plot",yq="legend",mSt="attribute",D4e="transform",ySt="windowframe",bSt="interactor",HC="Fixed";function t8(t){const e=typeof t;return e==="object"?t?.param:e==="string"?vSt(t):null}function vSt(t){return t?.[0]==="$"?t.slice(1):null}function cte(t){return`$${t}`}function T4e(t){return[t].flat()}function Im(t){return Array.isArray(t)}function bq(t){return t!==null&&typeof t=="object"&&!Im(t)}function GC(t){return typeof t=="string"}function O4e(t,e){throw Object.assign(Error(t),{data:e})}const xSt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function wSt(t,e){return xSt.test(t+="")?new Date(t):e}class ri{constructor(e,n=null){this.type=e,this.children=n}instantiate(e){throw Error("instantiate not implemented")}codegen(e){return Error("codegen not implemented")}toJSON(){return Error("toJSON not implemented")}}function zc(t,e){const n={};for(const r in t)n[r]=e.maybeSelection(t[r]);return new s4(n)}class s4 extends ri{constructor(e){super(sSt),this.options=e}filter(e){const n=Object.fromEntries(Object.entries(this.options).filter(([r,i])=>e(r,i)));return new s4(n)}instantiate(e){const{options:n}=this,r={};for(const i in n)r[i]=n[i].instantiate(e);return r}codegen(e){const{options:n}=this,r=[];for(const i in n)r.push(`${i}: ${n[i].codegen(e)}`);return r.length?`{${e.maybeLineWrap(r)}}`:""}toJSON(){const{options:e}=this,n={};for(const r in e)n[r]=e[r].toJSON();return n}}const M4e="table",I4e="parquet",R4e="csv",vq="json",xq="spatial",fte=new Map([[M4e,kSt],[I4e,ESt],[R4e,DSt],[vq,TSt],[xq,OSt]]);function _St(t,e,n){const r=SSt(e);if(fte.has(r.type))return fte.get(r.type)(t,r,n);n.error("Unrecognized data format type.",e)}function SSt(t){return Im(t)&&(t={type:"json",data:t}),GC(t)&&(t={type:"table",query:t}),{...t,type:ASt(t)}}function ASt(t){return t.type||CSt(t.file)||"table"}function CSt(t){const e=t?.lastIndexOf(".");return e>0?t.slice(e+1):null}function kSt(t,e,n){const{query:r,type:i,...s}=e;return new RSt(t,r,zc(s,n))}function ESt(t,e,n){const{file:r,type:i,...s}=e;return new NSt(t,r,zc(s,n))}function DSt(t,e,n){const{file:r,type:i,...s}=e;return new LSt(t,r,zc(s,n))}function TSt(t,e,n){const{data:r,file:i,type:s,...o}=e,a=zc(o,n);return r?new BSt(t,r,a):new PSt(t,i,a)}function OSt(t,e,n){const{file:r,type:i,...s}=e;return new FSt(t,r,zc(s,n))}function hte(t,e){return e?new URL(t,e).toString():t}function MSt(t,e){const n=t?.codegen(e);return n?`, ${n}`:""}class ISt extends ri{constructor(e,n){super(pSt),this.name=e,this.format=n}}class wq extends ISt{constructor(e,n){super(e,n)}instantiateQuery(e){e.error("instantiateQuery not implemented")}codegenQuery(e){e.error("codegenQuery not implemented")}instantiate(e){const n=this.instantiateQuery(e);if(n)return n}codegen(e){const n=this.codegenQuery(e);if(n)return n}}class RSt extends wq{constructor(e,n,r){super(e,M4e),this.query=n?.trim(),this.options=r}instantiateQuery(e){const{name:n,query:r,options:i}=this;if(r)return e.api.createTable(n,r,i.instantiate(e))}codegenQuery(e){const{name:n,query:r,options:i}=this;if(r)return`\`${Y3(n,r,i.instantiate(e))}\``}toJSON(){const{format:e,query:n,options:r}=this;return{type:e,query:n,...r.toJSON()}}}class nO extends wq{constructor(e,n,r,i,s){super(e,n),this.file=i,this.method=r,this.options=s}instantiateQuery(e){const{name:n,method:r,file:i,options:s}=this,o=hte(i,e.baseURL),a=s?.instantiate(e);return e.api[r](n,o,a)}codegenQuery(e){const{name:n,method:r,file:i,options:s}=this,o=hte(i,e.baseURL),a=MSt(s,e);return`${e.ns()}${r}("${n}", "${o}"${a})`}toJSON(){const{format:e,file:n,options:r}=this;return{type:e,file:n,...r.toJSON()}}}class FSt extends nO{constructor(e,n,r){super(e,xq,"loadSpatial",n,r)}}class NSt extends nO{constructor(e,n,r){super(e,I4e,"loadParquet",n,r)}}class LSt extends nO{constructor(e,n,r){super(e,R4e,"loadCSV",n,r)}}class PSt extends nO{constructor(e,n,r){super(e,vq,"loadJSON",n,r)}}class BSt extends wq{constructor(e,n,r){super(e,vq),this.data=n,this.options=r}instantiateQuery(e){const{name:n,data:r,options:i}=this;return e.api.loadObjects(n,r,i.instantiate(e))}codegenQuery(e){const{name:n,data:r,options:i}=this,s=i?","+i.codegen(e):"",o=`[
    `+r.map(a=>JSON.stringify(a)).join(`,
    `)+`
  ]`;return`${e.ns()}loadObjects("${n}", ${o}${s})`}toJSON(){const{format:e,data:n,options:r}=this;return{type:e,data:n,...r.toJSON()}}}function $St(t){const e=t.config?.extensions,n=new Set(e?T4e(e):[]);for(const r of Object.values(t.data))r.format===xq&&n.add("spatial");return n}async function USt(t,e){const{data:n,params:r,plotDefaults:i}=t,s=new zSt({plotDefaults:i,...e}),o=[],a=$St(t);o.push(...Array.from(a).map(l=>Pie(l)));for(const l of Object.values(n)){const u=l.instantiate(s);u&&o.push(u)}o.length>0&&await s.coordinator.exec(o);for(const[l,u]of Object.entries(r))if(!s.activeParams.has(l)){const c=u.instantiate(s);s.activeParams.set(l,c)}return{element:t.root.instantiate(s),params:s.activeParams}}class zSt{constructor({api:e=S4e(),plotDefaults:n=[],params:r=new Map,baseURL:i=null}={}){this.api=e,this.plotDefaults=n,this.activeParams=r,this.baseURL=i,this.coordinator=e.context.coordinator}error(e,n){O4e(e,n)}}class YL extends ri{constructor(e){super(A4e),this.value=e}instantiate(){return this.value}codegen(e){return e.stringify(this.value)}toJSON(){return this.value}}function jSt(t,e){const{select:n,include:r,...i}=t,s=zc(i,e);return r&&(s.options.include=new qSt(T4e(r).map(o=>e.selectionRef(t8(o))))),new XL(n,s)}class XL extends ri{constructor(e=k4e,n=new s4({})){super(oSt),this.select=e,this.options=n}instantiate(e){const{select:n,options:r}=this;return e.api.Selection[n](r.instantiate(e))}codegen(e){const{select:n,options:r}=this;return`${e.ns()}Selection.${n}(${r.codegen(e)})`}toJSON(){const{select:e,options:n}=this;return{select:e,...n.toJSON()}}}class qSt extends ri{constructor(e){super(cSt),this.refs=e}instantiate(e){return this.refs.map(n=>n.instantiate(e))}codegen(e){return`[${this.refs.map(n=>n.codegen(e)).join(", ")}]`}toJSON(){return this.refs.map(e=>e.toJSON())}}const VSt=new Set([GL,dSt,fSt,k4e,hSt]);function WSt(t,e){const n=bq(t)?t:{value:t},{select:r=GL,value:i,date:s}=n;return VSt.has(r)||e.error(`Unrecognized param type: ${r}`,n),r!==GL?jSt(t,e):Im(i)?new KL(i.map(o=>e.maybeParam(o))):new KL(i,s)}class KL extends ri{constructor(e,n){super(uSt),this.value=e,this.date=n}instantiate(e){const{date:n,value:r}=this,{Param:i}=e.api;return Im(r)?i.array(r.map(s=>s.instantiate(e))):i.value(wSt(n,r))}codegen(e){const{value:n,date:r}=this,i=`${e.ns()}Param.`;return Im(n)?`${i}array([${n.map(s=>s.codegen(e)).join(", ")}])`:r?`${i}value(new Date(${JSON.stringify(r)}))`:`${i}value(${JSON.stringify(n)})`}toJSON(){const{date:e,value:n}=this;return Im(n)?n.map(r=>r.toJSON()):e?{date:e}:n}}class HSt extends ri{constructor(e){super(aSt),this.name=e}instantiate(e){return e.activeParams?.get(this.name)}codegen(e){return cte(this.name)}toJSON(){return cte(this.name)}}function F4e(t,e,n){return n.plot?.attributes?.has(t)||n.error(`Unrecognized attribute: ${t}`),new GSt(t,e===HC?new YSt:n.maybeParam(e))}class GSt extends ri{constructor(e,n){super(mSt),this.name=e,this.value=n}instantiate(e){const{name:n,value:r}=this;return e.api[n](r.instantiate(e))}codegen(e){const{name:n,value:r}=this;return`${e.tab()}${e.ns()}${n}(${r.codegen(e)})`}toJSON(){const{name:e,value:n}=this;return{[e]:n.toJSON()}}}class YSt extends ri{constructor(){super(A4e),this.value=HC}instantiate(e){return e.api[HC]}codegen(e){return`${e.ns()}${HC}`}toJSON(){return this.value}}class XSt extends ri{constructor(e,n,r,i,s,o){super(iSt,[e]),this.root=e,this.meta=n,this.config=r,this.data=i,this.params=s,this.plotDefaults=o}toJSON(){const{root:e,meta:n,config:r,plotDefaults:i}=this,s=new Map(Object.entries(this.data)),o=new Map(Object.entries(this.params)),a={};if(n&&(a.meta={...n}),r&&(a.config={...r}),s?.size){const l=a.data={};for(const[u,c]of s)l[u]=c.toJSON()}if(o?.size){const l=a.params={};for(const[u,c]of o)l[u]=c.toJSON()}if(i?.length){const l=a.plotDefaults={};for(const u of i)Object.assign(l,u.toJSON())}return Object.assign(a,e.toJSON())}}function KSt(t,e){const n=t[K5].map(r=>e.parseComponent(r));return new QSt(n)}class QSt extends ri{constructor(e){super(K5,e)}instantiate(e){return e.api[K5](this.children.map(n=>n.instantiate(e)))}codegen(e){e.indent();const n=this.children.map(r=>r.codegen(e));return e.undent(),`${e.tab()}${e.ns()}${this.type}(
${n.join(`,
`)}
${e.tab()})`}toJSON(){return{[this.type]:this.children.map(e=>e.toJSON())}}}function JSt(t){return new ZSt(t[J5])}class ZSt extends ri{constructor(e){super(J5),this.value=e}instantiate(e){return e.api[J5](this.value)}codegen(e){return`${e.tab()}${e.ns()}${this.type}(${e.stringify(this.value)})`}toJSON(){return{[this.type]:this.value}}}function e4t(t,e){const{[mq]:n,...r}=t;return e.inputs?.has(n)||e.error(`Unrecognized input type: ${n}`,t),new t4t(n,zc(r,e))}class t4t extends ri{constructor(e,n){super(mq),this.name=e,this.options=n}instantiate(e){return e.api[this.name](this.options.instantiate(e))}codegen(e){const n=this.options.codegen(e);return`${e.tab()}${e.ns()}${this.name}(${n})`}toJSON(){const{type:e,name:n,options:r}=this;return{[e]:n,...r.toJSON()}}}function N4e(t,e){const{[yq]:n,...r}=t,i=`${n}Legend`;return e.plot?.legends?.has(i)||e.error(`Unrecognized legend type: ${n}`,t),new n4t(i,n,zc(r,e))}class n4t extends ri{constructor(e,n,r){super(yq),this.key=e,this.name=n,this.options=r}instantiate(e){return e.api[this.key](this.options.instantiate(e))}codegen(e){const n=this.options.codegen(e);return`${e.tab()}${e.ns()}${this.key}(${n})`}toJSON(){const{type:e,name:n,options:r}=this;return{[e]:n,...r.toJSON()}}}function r4t(t,e){const{[C4e]:n,...r}=t;return e.plot?.interactors?.has(n)||e.error(`Unrecognized interactor type: ${n}`,t),new i4t(n,zc(r,e))}class i4t extends ri{constructor(e,n){super(bSt),this.name=e,this.options=n}instantiate(e){return e.api[this.name](this.options.instantiate(e))}codegen(e){const n=this.options.codegen(e);return`${e.tab()}${e.ns()}${this.name}(${n})`}toJSON(){const{name:e,options:n}=this;return{[C4e]:e,...n.toJSON()}}}class s4t extends ri{constructor(e){super(lSt),this.param=e}instantiate(e){return e.api.column(this.param.instantiate(e))}codegen(e){return`${e.ns()}column(${this.param.codegen(e)})`}toJSON(){return`$${this.param.toJSON}`}}const o4t=/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\${1,2}\w+)/g;function a4t(t,e){const n=t[Qw],r=n.split(o4t),i=[""],s=[];for(let o=0,a=0;o<r.length;++o){const l=r[o];l.startsWith("$")?(s[a]=l.startsWith("$$")?new s4t(e.paramRef(l.slice(2))):e.maybeParam(l),i[++a]=""):i[a]+=l}return new l4t(n,i,s)}class l4t extends ri{constructor(e,n,r){super(gSt),this.value=e,this.spans=n,this.params=r}instantiate(e){const{spans:n,params:r}=this,i=e.api[Qw],s=r.map(o=>o.instantiate(e));return i(n,...s)}codegen(e){const{spans:n,params:r}=this;let i="";const s=r.length;for(let o=0;o<s;++o)i+=n[o]+"${"+r[o].codegen(e)+"}";return i+=n[s],`${e.ns()}${Qw}\`${i}\``}toJSON(){return{[Qw]:this.value}}}function u4t(t,e){if(!t)return null;if(Im(t))return new YL(t);const{from:n,...r}=t;return new c4t(e.maybeParam(n),zc(r,e))}class c4t extends ri{constructor(e,n){super(ute),this.table=e,this.options=n}instantiate(e){const{table:n,options:r}=this;return e.api[ute](n.instantiate(e),r.instantiate(e))}codegen(e){const n=this.table.codegen(e),r=this.options.codegen(e);return`${e.ns()}${this.type}(${n}${r?", "+r:""})`}toJSON(){const{type:e,table:n,options:r}=this;return{[e]:n.toJSON(),...r.toJSON()}}}function f4t(t,e){const n=t.rows?"ROWS":t.range?"RANGE":t.groups?"GROUPS":null;if(!n)return null;const r=t[n.toLowerCase()],i=t8(r),s=i?e.paramRef(i):r.map(o=>bq(o)?L4e(o,e):new pB(o));return new h4t(n,s,t.exclude)}class h4t extends ri{constructor(e,n,r){super(ySt),this.type=e,this.extent=n,this.exclude=r?.toUpperCase()}instantiate(e){const{type:n,extent:r,exclude:i}=this,s=Array.isArray(r)?r.map(o=>o.instantiate(e)):r.instantiate(e);return new F8(n,s,i?.toUpperCase())}codegen(e){const{type:n,extent:r,exclude:i}=this,s=`frame${n[0].toUpperCase()}${n.slice(1).toLowerCase()}`,o=Array.isArray(r)?`[${r.map(l=>l.codegen(e)).join(", ")}]`:r.codegen(e),a=i?`, '${i.toUpperCase()}'`:"";return`${e.ns()}${s}(${o}${a})`}toJSON(){const{type:e,extent:n,exclude:r}=this,i=e.toLowerCase(),s=Array.isArray(n)?n.map(o=>o.toJSON()):n.toJSON();return{[i]:s,exclude:r}}}function j6(t,e){return t==null?[]:[t].flat().map(n=>e.maybeParam(n))}function L4e(t,e){let n;for(const r in t)e.transforms.has(r)&&(n=r);if(n)if(n==="bin"){const{bin:r,...i}=t,[s]=j6(r,e);return new p4t(n,s,zc(i,e))}else{const r=n==="count"&&!t[n]?[]:j6(t[n],e),i={distinct:t.distinct,orderby:j6(t.orderby,e),partitionby:j6(t.partitionby,e),frame:f4t(t,e)};return new d4t(n,r,i)}}class d4t extends ri{constructor(e,n,r){super(D4e),this.name=e,this.args=n,this.options=r}instantiate(e){const{name:n,args:r,options:i}=this,{distinct:s,orderby:o,partitionby:a,frame:l}=i;let u=e.api[n](...r.map(c=>c.instantiate(e)));return s&&(u=u.distinct()),o.length&&(u=u.orderby(o.map(c=>c.instantiate(e)))),a.length&&(u=u.partitionby(a.map(c=>c.instantiate(e)))),l&&(u=u.frame(l.instantiate(e))),u}codegen(e){const{name:n,args:r,options:i}=this,{distinct:s,orderby:o,partitionby:a,frame:l}=i;let u=`${e.ns()}${n}(`+r.map(c=>c.codegen(e)).join(", ")+")";if(s&&(u+=".distinct()"),o.length){const c=o.map(f=>f.codegen(e));u+=`.orderby(${c.join(", ")})`}if(a.length){const c=a.map(f=>f.codegen(e));u+=`.partitionby(${c.join(", ")})`}return l&&(u+=`.frame(${l.codegen(e)})`),u}toJSON(){const{name:e,args:n,options:r}=this,{distinct:i,orderby:s,partitionby:o,frame:a}=r,l={[e]:SI(n.map(u=>u.toJSON()))};return i&&(l.distinct=!0),s.length&&(l.orderby=SI(s.map(u=>u.toJSON()))),o.length&&(l.partitionby=SI(o.map(u=>u.toJSON()))),a&&Object.assign(l,a.toJSON()),l}}class p4t extends ri{constructor(e,n,r){super(D4e),this.name=e,this.arg=n,this.options=r}instantiate(e){const{name:n,arg:r,options:i}=this;return e.api[n](r.instantiate(e),i.instantiate(e))}codegen(e){const{name:n,arg:r,options:i}=this,s=i.codegen(e);return`${e.ns()}${n}(`+r.codegen(e)+(s?`, ${s}`:"")+")"}toJSON(){const{name:e,arg:n,options:r}=this;return{[e]:n.toJSON(),...r.toJSON()}}}function SI(t){return t.length===0?"":t.length===1?t[0]:t}function g4t(t,e){if(bq(t))return t[Qw]?a4t(t,e):L4e(t,e)}function m4t(t,e){const{mark:n,data:r,...i}=t;e.plot?.marks?.has(n)||e.error(`Unrecognized mark type: ${n}`,t);const s=u4t(r,e),o={};for(const a in i){const l=i[a];o[a]=g4t(l,e)||e.maybeParam(l)}return new y4t(n,s,new s4(o))}class y4t extends ri{constructor(e,n,r){super(E4e),this.name=e,this.data=n,this.options=r}instantiate(e){const{name:n,data:r,options:i}=this,s=i.instantiate(e);return r?e.api[n](r.instantiate(e),s):e.api[n](s)}codegen(e){const{name:n,data:r,options:i}=this,s=r?r.codegen(e):"",o=i.codegen(e);let a;if(s&&o){e.indent();const l=i.codegen(e);a=`
${e.tab()}${s},
${e.tab()}${l}
`,e.undent(),a+=e.tab()}else a=`${s}${o}`;return`${e.tab()}${e.ns()}${n}(${a})`}toJSON(){const{type:e,name:n,data:r,options:i}=this;return{[e]:n,...r?{data:r.toJSON()}:{},...i.toJSON()}}}function b4t(t,e){return P4e({plot:[t]},e)}function P4e(t,e){const{[e8]:n,...r}=t,i=Object.entries(r).map(([o,a])=>F4e(o,a,e)),s=n.map(o=>GC(o.mark)?m4t(o,e):GC(o.legend)?N4e(o,e):GC(o.select)?r4t(o,e):e.error("Invalid plot entry.",o));return new v4t(s,i)}class v4t extends ri{constructor(e,n){super(e8,e),this.attributes=n}instantiate(e){const n=[...e.plotDefaults||[],...this.attributes||[]];return e.api[e8](this.children.map(r=>r.instantiate(e)),n.map(r=>r.instantiate(e)))}codegen(e){const{type:n,children:r,attributes:i}=this;e.indent();const s=[...r.map(o=>o.codegen(e)),...e.plotDefaults?.length?[`${e.tab()}...defaultAttributes`]:[],...i.map(o=>o.codegen(e))].join(`,
`);return e.undent(),`${e.tab()}${e.ns()}${n}(
${s}
${e.tab()})`}toJSON(){const{type:e,children:n,attributes:r}=this,i={[e]:n.map(s=>s.toJSON())};for(const s of r)Object.assign(i,s.toJSON());return i}}function x4t(t,e){const n=t[Q5].map(r=>e.parseComponent(r));return new w4t(n)}class w4t extends ri{constructor(e){super(Q5,e)}instantiate(e){return e.api[Q5](this.children.map(n=>n.instantiate(e)))}codegen(e){e.indent();const n=this.children.map(r=>r.codegen(e));return e.undent(),`${e.tab()}${e.ns()}${this.type}(
${n.join(`,
`)}
${e.tab()})`}toJSON(){return{[this.type]:this.children.map(e=>e.toJSON())}}}function _4t(t){return new S4t(t[Z5])}class S4t extends ri{constructor(e){super(Z5),this.value=e}instantiate(e){return e.api[Z5](this.value)}codegen(e){return`${e.tab()}${e.ns()}${this.type}(${e.stringify(this.value)})`}toJSON(){return{[this.type]:this.value}}}function A4t(t=[]){return new Map([[e8,P4e],[E4e,b4t],[yq,N4e],[mq,e4t],[K5,KSt],[Q5,x4t],[J5,JSt],[Z5,_4t],...t])}function C4t(t=[]){return new Set(["menu","search","slider","table",...t])}function k4t({attributes:t=E4t(),interactors:e=D4t(),legends:n=T4t(),marks:r=O4t()}={}){return{attributes:t,interactors:e,legends:n,marks:r}}function E4t(t=[]){return new Set([...Object.keys(K3t),...t])}function D4t(t=[]){return new Set([...Object.keys(eSt),...t])}function T4t(t=[]){return new Set([...Object.keys(tSt),...t])}function O4t(t=[]){return new Set([...Object.keys(Z3t),...t])}function M4t(t=[]){return new Set(["argmin","argmax","avg","bin","centroid","centroidX","centroidY","column","count","covariance","covarPop","dateMonth","dateMonthDay","dateDay","first","geomean","geojson","last","max","median","min","mode","product","quantile","stddev","stddevPop","sum","variance","varPop","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","years","months","days","hours","minutes","seconds","milliseconds","microseconds",...t])}function I4t(t,e){return new R4t(e).parse(t)}class R4t{constructor({components:e=A4t(),transforms:n=M4t(),inputs:r=C4t(),plot:i=k4t(),params:s=[],datasets:o=[]}={}){this.components=e,this.transforms=n,this.inputs=r,this.plot=i,this.params=new Map(s),this.datasets=new Map(o)}parse(e){const{meta:n,config:r,data:i={},params:s,plotDefaults:o={},...a}=e;for(const l in i)this.datasets.set(l,_St(l,i[l],this));this.plotDefaults=Object.entries(o).map(([l,u])=>F4e(l,u,this));for(const l in s)this.params.set(l,WSt(s[l],this));return new XSt(this.parseComponent(a),n?{...n}:void 0,r?{...r}:void 0,Object.fromEntries(this.datasets),Object.fromEntries(this.params),this.plotDefaults)}parseComponent(e){for(const[n,r]of this.components)if(e[n]!=null)return r(e,this);this.error("Invalid specification.",e)}maybeParam(e){const n=t8(e);return n?this.paramRef(n):new YL(e)}maybeSelection(e){const n=t8(e);return n?this.selectionRef(n):new YL(e)}paramRef(e,n=()=>new KL){const{params:r}=this;if(!e)return null;let i=r.get(e);return i||(i=n(),r.set(e,i)),new HSt(e)}selectionRef(e,n=!1){const r=this.params.get(e);return n&&r&&!(r instanceof XL)?null:this.paramRef(e,()=>new XL)}error(e,n){O4e(e,n)}}var F4t=xe('<div class="p-2 w-full"></div>');function N4t(t,e){ot(e,!0);let{coordinator:n,colorScheme:r}=e.context,i=De(void 0),s=De(mu(e.width??800));function o(c,f){if(!c)return!1;let h=f.mark?.plot?.element;return h==null?!1:c?.contains(h)??!1}async function a(c,f,h,d={}){try{const p=I4t(f),m=S4e({coordinator:c}),y=await USt(p,{params:new Map(Object.entries(d)),api:m});return h.innerHTML="",y.element&&h.appendChild(y.element),()=>{for(const b in d){const v=d[b];if(Ko(v))for(const w of v.clauses)o(h,w.source)&&(w.source?.reset?.(),v.update({...w,value:null,predicate:null}))}y.element?.remove()}}catch(p){return console.error("[MosaicSpec] Failed to render vgplot spec:",p),h.innerHTML=`<div style="padding: 1rem; color: #ef4444;">
        Failed to render chart: ${p instanceof Error?p.message:String(p)}
      </div>`,()=>{}}}Qv(()=>{Bt(()=>{let c=null;async function f(){k(i)&&e.spec.spec&&(c=await a(n,e.spec.spec,k(i),{filter:e.context.filter}))}return f(),()=>{c?.()}})}),Tl(()=>{e.width!=null&&ae(s,e.width,!0)});var l=F4t();let u;za(l,c=>ae(i,c),()=>k(i)),Ne(()=>u=Nt(l,"",u,{height:e.height!=null?`${e.height}px`:"100%"})),dc(l,"clientWidth",c=>ae(s,c)),te(t,l),at()}var L4t=xe('<div class="bg-slate-100 p-2 rounded-md w-full h-full overflow-y-scroll"><pre> </pre></div>');function AI(t,e){ot(e,!0);var n=L4t(),r=ne(n),i=ne(r,!0);Z(r),Z(n),Ne(s=>pt(i,s),[()=>JSON.stringify(e.spec,null,2)]),te(t,n),at()}var P4t=xe('<span class="mx-1"> </span>'),B4t=xe("<button><!> <!></button>");function md(t,e){ot(e,!0);let n=gt(e,"label",3,null),r=gt(e,"icon",3,null),i=gt(e,"title",3,""),s=gt(e,"order",3,null);var o=B4t();o.__click=()=>{e.onClick?.()};let a;var l=ne(o);{var u=h=>{const d=J(r);var p=kn(),m=Ye(p);m0(m,()=>k(d),(y,b)=>{b(y,{class:"w-5 h-5"})}),te(h,p)};Le(l,h=>{r()!=null&&h(u)})}var c=pe(l,2);{var f=h=>{var d=P4t(),p=ne(d,!0);Z(d),Ne(()=>pt(p,n())),te(h,d)};Le(c,h=>{n()!=null&&n()!=""&&h(f)})}Z(o),Ne(()=>{wr(o,1,`rounded-md flex select-none items-center px-1.5 py-1.5 h-[28px] border bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 dark:text-slate-400 focus-visible:outline-2 outline-blue-600 -outline-offset-1 ${e.class??""??""}`),ue(o,"title",i()),a=Nt(o,"",a,{order:s()})}),te(t,o),at()}ti(["click"]);var $4t=xe("<input/>");function B4e(t,e){ot(e,!0);let n=gt(e,"value",15),r=gt(e,"type",3,"text"),i=gt(e,"placeholder",3,""),s=gt(e,"className",3,"");function o(l){l.key=="Escape"&&l.stopPropagation()}var a=$4t();DP(a),a.__keydown=o,Ne(()=>{ue(a,"type",r()),ue(a,"placeholder",i()),wr(a,1,`form-input rounded-md py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 ${s()??""??""}`)}),JOe(a,n),te(t,a),at()}ti(["keydown"]);var U4t=xe('<div><button class="flex-1 overflow-hidden text-left"><div class="text-ellipsis overflow-hidden w-full"> </div> <div class="text-ellipsis overflow-hidden w-full"><code class="text-xs whitespace-nowrap"> </code></div></button> <div class="flex-none flex gap-1"><!> <!></div></div>'),z4t=xe('<div class="mt-4"><!> <div class="text-slate-500 dark:text-slate-400 text-sm mb-1">SQL Predicate</div> <div class="w-full !h-32 mb-2"><!></div> <div class="flex gap-2"><!> <!> <div class="flex-1"></div> <button class="text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200">Current Predicate</button></div></div>'),j4t=xe('<div class="flex flex-col gap-1"><!> <button class="text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden">+ Add Predicate</button></div> <!>',1);function q4t(t,e){ot(e,!0);const n=()=>Ds(s,"$colorScheme",r),[r,i]=aa();let{colorScheme:s}=e.context,o=J(()=>e.spec.items??[]),a=J(()=>e.state.selectedPredicates??[]),l=De(!1),u=De(null),c=De(""),f=De("");function h(){ae(l,!1),ae(u,null),ae(f,""),ae(c,"")}function d(m){e.onSpecChange({items:m}),e.onStateChange({selectedPredicates:(e.state.selectedPredicates??[]).filter(y=>m.find(b=>b.predicate==y)!=null)})}async function p(){let m=k(f).trim();m==""&&(m="Predicate");let y=k(c).trim();if(y=="")return null;try{await e.context.coordinator.query(Ue.from(e.context.table).select({count:ur()}).where(y))}catch(b){return alert(b.toString()),null}return{name:m,predicate:y}}Bt(()=>{let m=mh({coordinator:e.context.coordinator,selection:e.context.filter,query:()=>mt`SELECT 1`}),y={reset:()=>{e.onStateChange({selectedPredicates:[]})}};return Tl(()=>{if(k(a).length==0)e.context.filter.update({source:y,clients:new Set([m]),predicate:null,value:null});else{let b=k(a).map(v=>"("+v+")").join(" OR ");e.context.filter.update({source:y,clients:new Set([m]),predicate:Cw(b),value:b})}}),()=>{m.destroy()}}),tg(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,children:(m,y)=>{var b=j4t(),v=Ye(b),w=ne(v);hn(w,17,()=>k(o),Pn,(C,D)=>{const T=J(()=>k(a).indexOf(k(D).predicate)>=0);var M=U4t();let I;var N=ne(M);N.__click=W=>{W.shiftKey?ae(a,k(T)?k(a).filter(H=>H!=k(D).predicate):[...k(a),k(D).predicate]):k(T)?ae(a,[]):ae(a,[k(D).predicate])};var P=ne(N),O=ne(P,!0);Z(P);var R=pe(P,2),L=ne(R),B=ne(L,!0);Z(L),Z(R),Z(N);var z=pe(N,2),U=ne(z);md(U,{get icon(){return cde},onClick:()=>{ae(u,k(D)),ae(c,k(D).predicate,!0),ae(f,k(D).name,!0),ae(l,!0)}});var V=pe(U,2);md(V,{get icon(){return ID},onClick:()=>{d(k(o).filter(W=>W!==k(D)))}}),Z(z),Z(M),Ne(()=>{I=wr(M,1,"flex gap-4 w-full bg-white dark:bg-slate-800 p-2 rounded-md border border-slate-200 dark:border-slate-600 select-none",null,I,{"!bg-blue-100":k(T),"!border-blue-400":k(T),"dark:!bg-blue-800":k(T),"dark:!border-blue-600":k(T)}),pt(O,k(D).name),ue(L,"title",k(D).predicate),pt(B,k(D).predicate)}),te(C,M)});var _=pe(w,2);_.__click=()=>{ae(l,!0),ae(u,null)},Z(v);var S=pe(v,2);{var A=C=>{var D=z4t(),T=ne(D);B4e(T,{placeholder:"name",className:"w-full mb-2",get value(){return k(f)},set value(z){ae(f,z,!0)}});var M=pe(T,4),I=ne(M);{let z=J(()=>({table:e.context.table,columns:e.context.columns}));IU(I,{language:"sql",get sql(){return k(z)},class:"w-full h-full",get colorScheme(){return n()},get value(){return k(c)},onChange:U=>ae(c,U,!0)})}Z(M);var N=pe(M,2),P=ne(N);{var O=z=>{md(z,{label:"Update",onClick:async()=>{let U=await p();U&&(d(k(o).map(V=>V===k(u)?U:V)),h())}})},R=z=>{md(z,{label:"Add",onClick:async()=>{let U=await p();U&&(d([...k(o),U]),h())}})};Le(P,z=>{k(u)!=null?z(O):z(R,!1)})}var L=pe(P,2);md(L,{label:"Cancel",onClick:()=>{ae(u,null),ae(l,!1)}});var B=pe(L,4);B.__click=()=>ae(c,qge(e.context.filter.predicate(null))??"",!0),Z(N),Z(D),te(C,D)};Le(S,C=>{k(l)&&C(A)})}te(m,b)},$$slots:{default:!0}}),at(),i()}ti(["click"]);var V4t=xe("<option disabled selected> </option>"),W4t=xe("<hr/>"),H4t=xe("<option> </option>"),G4t=xe('<label class="select-none flex items-center gap-2"><span class="text-slate-500 dark:text-slate-400 whitespace-nowrap"> </span> <select><!><!></select></label>'),Y4t=xe("<option disabled selected> </option>"),X4t=xe("<hr/>"),K4t=xe("<option> </option>"),Q4t=xe("<select><!><!></select>");function gu(t,e){ot(e,!0);let n=gt(e,"label",3,void 0),r=gt(e,"disabled",3,!1),i=gt(e,"placeholder",3,null),s=gt(e,"options",19,()=>[]),o=gt(e,"onChange",3,void 0),a=De(void 0);const l=jge(),u=l+"_null",c=l+"_undefined",f=v=>v===null?u:v===void 0?c:v.toString(),h=v=>v===u?null:v===c?void 0:v;function d(v){!o()||!k(a)||o()(h(k(a).value))}var p=kn(),m=Ye(p);{var y=v=>{var w=G4t(),_=ne(w),S=ne(_,!0);Z(_);var A=pe(_,2);A.__change=d;var C=ne(A);{var D=I=>{var N=V4t(),P=ne(N,!0);Z(N),N.value=(N.__value=null)??"",Ne(()=>pt(P,i())),te(I,N)};Le(C,I=>{i()!=null&&I(D)})}var T=pe(C);hn(T,17,s,Pn,(I,N)=>{var P=kn(),O=Ye(P);{var R=B=>{var z=W4t();te(B,z)},L=B=>{var z=H4t(),U=ne(z,!0);Z(z);var V={};Ne(W=>{pt(U,k(N).label),V!==(V=W)&&(z.value=(z.__value=W)??"")},[()=>f(k(N).value)]),te(B,z)};Le(O,B=>{k(N)==="---"?B(R):B(L,!1)})}te(I,P)}),Z(A),za(A,I=>ae(a,I),()=>k(a));var M;ik(A),Z(w),Ne(I=>{pt(S,n()),wr(A,1,`form-select rounded-md py-1 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 dark:text-slate-400 text-ellipsis ${e.class??""??""}`),A.disabled=r(),M!==(M=I)&&(A.value=(A.__value=I)??"",jb(A,I))},[()=>f(e.value)]),te(v,w)},b=v=>{var w=Q4t();w.__change=d;var _=ne(w);{var S=D=>{var T=Y4t(),M=ne(T,!0);Z(T),T.value=(T.__value=null)??"",Ne(()=>pt(M,i())),te(D,T)};Le(_,D=>{i()!=null&&D(S)})}var A=pe(_);hn(A,17,s,Pn,(D,T)=>{var M=kn(),I=Ye(M);{var N=O=>{var R=X4t();te(O,R)},P=O=>{var R=K4t(),L=ne(R,!0);Z(R);var B={};Ne(z=>{pt(L,k(T).label),B!==(B=z)&&(R.value=(R.__value=z)??"")},[()=>f(k(T).value)]),te(O,R)};Le(I,O=>{k(T)==="---"?O(N):O(P,!1)})}te(D,M)}),Z(w),za(w,D=>ae(a,D),()=>k(a));var C;ik(w),Ne(D=>{wr(w,1,`form-select rounded-md py-1 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 dark:text-slate-400 select-none text-ellipsis ${e.class??""??""}`),w.disabled=r(),C!==(C=D)&&(w.value=(w.__value=D)??"",jb(w,D))},[()=>f(e.value)]),te(v,w)};Le(m,v=>{n()!=null?v(y):v(b,!1)})}te(t,p),at()}ti(["change"]);const J4t=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<line x1="15" y1="54" x2="15" y2="12" stroke="black" stroke-width="2"/>
<line x1="32" y1="53" x2="32" y2="10" stroke="black" stroke-width="2"/>
<line x1="49" y1="45" x2="49" y2="19" stroke="black" stroke-width="2"/>
<rect x="8" y="27" width="14" height="18" rx="3" fill="#007AFF"/>
<rect x="25" y="22" width="14" height="14" rx="3" fill="#007AFF"/>
<rect x="42" y="27" width="14" height="12" rx="3" fill="#007AFF"/>
</svg>
`,Z4t=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="32" cy="28" r="2" fill="#007AFF"/>
<circle cx="32" cy="24" r="2" fill="#007AFF"/>
<circle cx="32" cy="20" r="2" fill="#007AFF"/>
<circle cx="36" cy="32" r="2" fill="#007AFF"/>
<circle cx="36" cy="28" r="2" fill="#007AFF"/>
<circle cx="36" cy="24" r="2" fill="#007AFF"/>
<circle cx="28" cy="32" r="2" fill="#007AFF"/>
<circle cx="28" cy="28" r="2" fill="#007AFF"/>
<circle cx="28" cy="24" r="2" fill="#007AFF"/>
<circle cx="28" cy="20" r="2" fill="#007AFF"/>
<circle cx="28" cy="16" r="2" fill="#007AFF"/>
<circle cx="44" cy="24" r="2" fill="#A3CFFF"/>
<circle cx="44" cy="20" r="2" fill="#A3CFFF"/>
<circle cx="44" cy="16" r="2" fill="#A3CFFF"/>
<circle cx="40" cy="20" r="2" fill="#A3CFFF"/>
<circle cx="40" cy="16" r="2" fill="#A3CFFF"/>
<circle cx="20" cy="32" r="2" fill="#007AFF"/>
<circle cx="20" cy="28" r="2" fill="#007AFF"/>
<circle cx="20" cy="24" r="2" fill="#007AFF"/>
<circle cx="20" cy="20" r="2" fill="#3897FF"/>
<circle cx="20" cy="16" r="2" fill="#3897FF"/>
<circle cx="24" cy="32" r="2" fill="#007AFF"/>
<circle cx="24" cy="28" r="2" fill="#007AFF"/>
<circle cx="24" cy="24" r="2" fill="#007AFF"/>
<circle cx="24" cy="20" r="2" fill="#3897FF"/>
<circle cx="24" cy="16" r="2" fill="#3897FF"/>
<circle cx="16" cy="32" r="2" fill="#3897FF"/>
<circle cx="16" cy="28" r="2" fill="#3897FF"/>
<circle cx="16" cy="24" r="2" fill="#3897FF"/>
<circle cx="32" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="32" cy="36" r="2" fill="#007AFF"/>
<circle cx="36" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="36" cy="36" r="2" fill="#007AFF"/>
<circle cx="28" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="28" cy="36" r="2" fill="#007AFF"/>
<circle cx="44" cy="44" r="2" fill="#3897FF"/>
<circle cx="48" cy="44" r="2" fill="#3897FF"/>
<circle cx="48" cy="40" r="2" fill="#3897FF"/>
<circle cx="52" cy="32" r="2" fill="#A3CFFF"/>
<circle cx="52" cy="16" r="2" fill="#E0EFFF"/>
<circle cx="56" cy="32" r="2" fill="#A3CFFF"/>
<circle cx="56" cy="28" r="2" fill="#A3CFFF"/>
<circle cx="56" cy="16" r="2" fill="#E0EFFF"/>
<circle cx="52" cy="36" r="2" fill="#A3CFFF"/>
<circle cx="56" cy="36" r="2" fill="#A3CFFF"/>
<circle cx="8" cy="16" r="2" fill="#E0EFFF"/>
<circle cx="12" cy="32" r="2" fill="#3897FF"/>
<circle cx="12" cy="28" r="2" fill="#3897FF"/>
<circle cx="28" cy="8" r="2" fill="#A3CFFF"/>
<circle cx="48" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="48" cy="8" r="2" fill="#E0EFFF"/>
<circle cx="20" cy="12" r="2" fill="#A3CFFF"/>
<circle cx="24" cy="12" r="2" fill="#A3CFFF"/>
<circle cx="24" cy="8" r="2" fill="#A3CFFF"/>
<circle cx="52" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="56" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="56" cy="8" r="2" fill="#E0EFFF"/>
<circle cx="8" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="12" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="32" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="32" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="36" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="28" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="28" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="44" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="40" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="20" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="24" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="24" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="16" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="12" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="8" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="12" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="12" cy="44" r="2" fill="#3897FF"/>
<circle cx="40" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="20" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="20" cy="40" r="2" fill="#007AFF"/>
<circle cx="24" cy="36" r="2" fill="#007AFF"/>
<circle cx="16" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="16" cy="40" r="2" fill="#3897FF"/>
<circle cx="16" cy="36" r="2" fill="#3897FF"/>
</svg>
`,eAt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8" y="8" width="48" height="14" rx="3" fill="#007AFF"/>
<rect x="8" y="25" width="36" height="14" rx="3" fill="#007AFF"/>
<rect x="8" y="42" width="24" height="14" rx="3" fill="#007AFF"/>
</svg>
`,tAt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="48" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="48" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.78"/>
<rect x="48" y="28" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="48" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.5"/>
<rect x="48" y="8" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="38" y="48" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.96"/>
<rect x="38" y="38" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="38" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.63"/>
<rect x="38" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.36"/>
<rect x="38" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.64"/>
<rect x="28" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="28" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.45"/>
<rect x="28" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.28"/>
<rect x="28" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.8"/>
<rect x="28" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.7"/>
<rect x="18" y="48" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.27"/>
<rect x="18" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.46"/>
<rect x="18" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.74"/>
<rect x="18" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.96"/>
<rect x="18" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.82"/>
<rect x="8" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="8" y="38" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="8" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.33"/>
<rect x="8" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.12"/>
<rect x="8" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.4"/>
</svg>
`,nAt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.5966 37L26.2869 26.8182H29.7273C30.5227 26.8182 31.1508 26.9607 31.6115 27.2457C32.0755 27.5308 32.3887 27.9169 32.5511 28.4041C32.7169 28.8913 32.75 29.4366 32.6506 30.0398C32.5511 30.6364 32.3374 31.1799 32.0092 31.6705C31.6844 32.161 31.2436 32.5521 30.6868 32.8438C30.1333 33.1354 29.4621 33.2812 28.6733 33.2812H26.2074L26.3864 32.1875H28.8125C29.3561 32.1875 29.8101 32.093 30.1747 31.9041C30.5393 31.7152 30.8243 31.4583 31.0298 31.1335C31.2353 30.8087 31.3712 30.4441 31.4375 30.0398C31.5038 29.6288 31.4872 29.2642 31.3878 28.946C31.2917 28.6245 31.0911 28.3726 30.7862 28.1903C30.4846 28.0047 30.0587 27.9119 29.5085 27.9119H27.3409L25.8295 37H24.5966ZM33.3105 37L34.5833 29.3636H35.7168L35.5179 30.517H35.5975C35.7963 30.1392 36.0996 29.8326 36.5073 29.5973C36.915 29.362 37.3475 29.2443 37.8049 29.2443C37.8944 29.2443 38.0021 29.246 38.128 29.2493C38.254 29.2493 38.3517 29.2543 38.4213 29.2642L38.2225 30.4574C38.1827 30.4474 38.0932 30.4325 37.954 30.4126C37.8148 30.3894 37.6657 30.3778 37.5066 30.3778C37.1354 30.3778 36.7923 30.4557 36.4775 30.6115C36.1626 30.764 35.8991 30.9761 35.687 31.2479C35.4748 31.5163 35.339 31.8229 35.2793 32.1676L34.4838 37H33.3105ZM41.4963 37.1591C40.7638 37.1591 40.1589 36.9967 39.6816 36.6719C39.2044 36.3438 38.8713 35.8864 38.6824 35.2997C38.4934 34.7098 38.4636 34.0237 38.5929 33.2415C38.7221 32.4593 38.979 31.7699 39.3635 31.1733C39.7479 30.5734 40.2269 30.1061 40.8002 29.7713C41.3736 29.4332 42.0034 29.2642 42.6895 29.2642C43.0872 29.2642 43.47 29.3305 43.8379 29.4631C44.2058 29.5956 44.524 29.8111 44.7924 30.1094C45.0609 30.4044 45.2482 30.7955 45.3542 31.2827C45.4603 31.7699 45.4537 32.3698 45.3343 33.0824L45.2548 33.5795H39.3684L39.5275 32.5653H44.2207C44.2969 32.1345 44.277 31.75 44.161 31.4119C44.0484 31.0739 43.8511 30.8071 43.5694 30.6115C43.291 30.416 42.938 30.3182 42.5105 30.3182C42.0697 30.3182 41.6587 30.4375 41.2775 30.6761C40.8964 30.9115 40.5782 31.2098 40.323 31.571C40.0678 31.929 39.9087 32.2936 39.8457 32.6648L39.7065 33.5398C39.6071 34.1728 39.622 34.6766 39.7512 35.0511C39.8838 35.4257 40.1142 35.6958 40.4423 35.8615C40.7704 36.0239 41.1814 36.1051 41.6752 36.1051C41.9901 36.1051 42.2801 36.062 42.5453 35.9759C42.8104 35.8864 43.0474 35.7538 43.2562 35.5781C43.465 35.3991 43.6407 35.1771 43.7832 34.9119L44.8571 35.2301C44.6748 35.6146 44.4179 35.9527 44.0865 36.2443C43.7583 36.5327 43.3739 36.758 42.9331 36.9205C42.4956 37.0795 42.0166 37.1591 41.4963 37.1591ZM49.3638 37.1591C48.7241 37.1591 48.1872 36.9983 47.753 36.6768C47.3188 36.352 47.0123 35.8946 46.8333 35.3047C46.6576 34.7114 46.6361 34.0104 46.7686 33.2017C46.9045 32.3996 47.1581 31.7036 47.5293 31.1136C47.9038 30.5237 48.3629 30.0679 48.9064 29.7464C49.45 29.425 50.0433 29.2642 50.6863 29.2642C51.1834 29.2642 51.5629 29.3471 51.8248 29.5128C52.0899 29.6752 52.2821 29.8608 52.4015 30.0696C52.5208 30.2751 52.6119 30.4441 52.6749 30.5767H52.7743L53.4007 26.8182H54.574L52.8837 37H51.7502L51.949 35.8267H51.8098C51.7005 35.9659 51.548 36.1416 51.3525 36.3537C51.1569 36.5625 50.8984 36.7498 50.5769 36.9155C50.2587 37.0779 49.8543 37.1591 49.3638 37.1591ZM49.6522 36.1051C50.1228 36.1051 50.5437 35.9825 50.915 35.7372C51.2895 35.4886 51.601 35.1456 51.8496 34.7081C52.0982 34.2673 52.2705 33.7585 52.3667 33.1818C52.4628 32.6117 52.4595 32.1129 52.3567 31.6854C52.254 31.2545 52.0568 30.9197 51.7651 30.6811C51.4734 30.4392 51.0873 30.3182 50.6067 30.3182C50.1129 30.3182 49.6837 30.4458 49.3191 30.701C48.9545 30.9529 48.6578 31.2959 48.4292 31.7301C48.2005 32.161 48.0414 32.6449 47.9519 33.1818C47.8624 33.7254 47.8607 34.2192 47.9469 34.6634C48.0331 35.1042 48.2154 35.4555 48.4938 35.7173C48.7755 35.9759 49.1616 36.1051 49.6522 36.1051Z" fill="#007AFF"/>
<path d="M24.5966 20L26.2869 9.81818H29.7273C30.5227 9.81818 31.1508 9.9607 31.6115 10.2457C32.0755 10.5308 32.3887 10.9169 32.5511 11.4041C32.7169 11.8913 32.75 12.4366 32.6506 13.0398C32.5511 13.6364 32.3374 14.1799 32.0092 14.6705C31.6844 15.161 31.2436 15.5521 30.6868 15.8438C30.1333 16.1354 29.4621 16.2812 28.6733 16.2812H26.2074L26.3864 15.1875H28.8125C29.3561 15.1875 29.8101 15.093 30.1747 14.9041C30.5393 14.7152 30.8243 14.4583 31.0298 14.1335C31.2353 13.8087 31.3712 13.4441 31.4375 13.0398C31.5038 12.6288 31.4872 12.2642 31.3878 11.946C31.2917 11.6245 31.0911 11.3726 30.7862 11.1903C30.4846 11.0047 30.0587 10.9119 29.5085 10.9119H27.3409L25.8295 20H24.5966ZM33.3105 20L34.5833 12.3636H35.7168L35.5179 13.517H35.5975C35.7963 13.1392 36.0996 12.8326 36.5073 12.5973C36.915 12.362 37.3475 12.2443 37.8049 12.2443C37.8944 12.2443 38.0021 12.246 38.128 12.2493C38.254 12.2493 38.3517 12.2543 38.4213 12.2642L38.2225 13.4574C38.1827 13.4474 38.0932 13.4325 37.954 13.4126C37.8148 13.3894 37.6657 13.3778 37.5066 13.3778C37.1354 13.3778 36.7923 13.4557 36.4775 13.6115C36.1626 13.764 35.8991 13.9761 35.687 14.2479C35.4748 14.5163 35.339 14.8229 35.2793 15.1676L34.4838 20H33.3105ZM41.4963 20.1591C40.7638 20.1591 40.1589 19.9967 39.6816 19.6719C39.2044 19.3438 38.8713 18.8864 38.6824 18.2997C38.4934 17.7098 38.4636 17.0237 38.5929 16.2415C38.7221 15.4593 38.979 14.7699 39.3635 14.1733C39.7479 13.5734 40.2269 13.1061 40.8002 12.7713C41.3736 12.4332 42.0034 12.2642 42.6895 12.2642C43.0872 12.2642 43.47 12.3305 43.8379 12.4631C44.2058 12.5956 44.524 12.8111 44.7924 13.1094C45.0609 13.4044 45.2482 13.7955 45.3542 14.2827C45.4603 14.7699 45.4537 15.3698 45.3343 16.0824L45.2548 16.5795H39.3684L39.5275 15.5653H44.2207C44.2969 15.1345 44.277 14.75 44.161 14.4119C44.0484 14.0739 43.8511 13.8071 43.5694 13.6115C43.291 13.416 42.938 13.3182 42.5105 13.3182C42.0697 13.3182 41.6587 13.4375 41.2775 13.6761C40.8964 13.9115 40.5782 14.2098 40.323 14.571C40.0678 14.929 39.9087 15.2936 39.8457 15.6648L39.7065 16.5398C39.6071 17.1728 39.622 17.6766 39.7512 18.0511C39.8838 18.4257 40.1142 18.6958 40.4423 18.8615C40.7704 19.0239 41.1814 19.1051 41.6752 19.1051C41.9901 19.1051 42.2801 19.062 42.5453 18.9759C42.8104 18.8864 43.0474 18.7538 43.2562 18.5781C43.465 18.3991 43.6407 18.1771 43.7832 17.9119L44.8571 18.2301C44.6748 18.6146 44.4179 18.9527 44.0865 19.2443C43.7583 19.5327 43.3739 19.758 42.9331 19.9205C42.4956 20.0795 42.0166 20.1591 41.4963 20.1591ZM49.3638 20.1591C48.7241 20.1591 48.1872 19.9983 47.753 19.6768C47.3188 19.352 47.0123 18.8946 46.8333 18.3047C46.6576 17.7114 46.6361 17.0104 46.7686 16.2017C46.9045 15.3996 47.1581 14.7036 47.5293 14.1136C47.9038 13.5237 48.3629 13.0679 48.9064 12.7464C49.45 12.425 50.0433 12.2642 50.6863 12.2642C51.1834 12.2642 51.5629 12.3471 51.8248 12.5128C52.0899 12.6752 52.2821 12.8608 52.4015 13.0696C52.5208 13.2751 52.6119 13.4441 52.6749 13.5767H52.7743L53.4007 9.81818H54.574L52.8837 20H51.7502L51.949 18.8267H51.8098C51.7005 18.9659 51.548 19.1416 51.3525 19.3537C51.1569 19.5625 50.8984 19.7498 50.5769 19.9155C50.2587 20.0779 49.8543 20.1591 49.3638 20.1591ZM49.6522 19.1051C50.1228 19.1051 50.5437 18.9825 50.915 18.7372C51.2895 18.4886 51.601 18.1456 51.8496 17.7081C52.0982 17.2673 52.2705 16.7585 52.3667 16.1818C52.4628 15.6117 52.4595 15.1129 52.3567 14.6854C52.254 14.2545 52.0568 13.9197 51.7651 13.6811C51.4734 13.4392 51.0873 13.3182 50.6067 13.3182C50.1129 13.3182 49.6837 13.4458 49.3191 13.701C48.9545 13.9529 48.6578 14.2959 48.4292 14.7301C48.2005 15.161 48.0414 15.6449 47.9519 16.1818C47.8624 16.7254 47.8607 17.2192 47.9469 17.6634C48.0331 18.1042 48.2154 18.4555 48.4938 18.7173C48.7755 18.9759 49.1616 19.1051 49.6522 19.1051Z" fill="#007AFF" fill-opacity="0.25"/>
<path d="M24.5966 54L26.2869 43.8182H29.7273C30.5227 43.8182 31.1508 43.9607 31.6115 44.2457C32.0755 44.5308 32.3887 44.9169 32.5511 45.4041C32.7169 45.8913 32.75 46.4366 32.6506 47.0398C32.5511 47.6364 32.3374 48.1799 32.0092 48.6705C31.6844 49.161 31.2436 49.5521 30.6868 49.8438C30.1333 50.1354 29.4621 50.2812 28.6733 50.2812H26.2074L26.3864 49.1875H28.8125C29.3561 49.1875 29.8101 49.093 30.1747 48.9041C30.5393 48.7152 30.8243 48.4583 31.0298 48.1335C31.2353 47.8087 31.3712 47.4441 31.4375 47.0398C31.5038 46.6288 31.4872 46.2642 31.3878 45.946C31.2917 45.6245 31.0911 45.3726 30.7862 45.1903C30.4846 45.0047 30.0587 44.9119 29.5085 44.9119H27.3409L25.8295 54H24.5966ZM33.3105 54L34.5833 46.3636H35.7168L35.5179 47.517H35.5975C35.7963 47.1392 36.0996 46.8326 36.5073 46.5973C36.915 46.362 37.3475 46.2443 37.8049 46.2443C37.8944 46.2443 38.0021 46.246 38.128 46.2493C38.254 46.2493 38.3517 46.2543 38.4213 46.2642L38.2225 47.4574C38.1827 47.4474 38.0932 47.4325 37.954 47.4126C37.8148 47.3894 37.6657 47.3778 37.5066 47.3778C37.1354 47.3778 36.7923 47.4557 36.4775 47.6115C36.1626 47.764 35.8991 47.9761 35.687 48.2479C35.4748 48.5163 35.339 48.8229 35.2793 49.1676L34.4838 54H33.3105ZM41.4963 54.1591C40.7638 54.1591 40.1589 53.9967 39.6816 53.6719C39.2044 53.3438 38.8713 52.8864 38.6824 52.2997C38.4934 51.7098 38.4636 51.0237 38.5929 50.2415C38.7221 49.4593 38.979 48.7699 39.3635 48.1733C39.7479 47.5734 40.2269 47.1061 40.8002 46.7713C41.3736 46.4332 42.0034 46.2642 42.6895 46.2642C43.0872 46.2642 43.47 46.3305 43.8379 46.4631C44.2058 46.5956 44.524 46.8111 44.7924 47.1094C45.0609 47.4044 45.2482 47.7955 45.3542 48.2827C45.4603 48.7699 45.4537 49.3698 45.3343 50.0824L45.2548 50.5795H39.3684L39.5275 49.5653H44.2207C44.2969 49.1345 44.277 48.75 44.161 48.4119C44.0484 48.0739 43.8511 47.8071 43.5694 47.6115C43.291 47.416 42.938 47.3182 42.5105 47.3182C42.0697 47.3182 41.6587 47.4375 41.2775 47.6761C40.8964 47.9115 40.5782 48.2098 40.323 48.571C40.0678 48.929 39.9087 49.2936 39.8457 49.6648L39.7065 50.5398C39.6071 51.1728 39.622 51.6766 39.7512 52.0511C39.8838 52.4257 40.1142 52.6958 40.4423 52.8615C40.7704 53.0239 41.1814 53.1051 41.6752 53.1051C41.9901 53.1051 42.2801 53.062 42.5453 52.9759C42.8104 52.8864 43.0474 52.7538 43.2562 52.5781C43.465 52.3991 43.6407 52.1771 43.7832 51.9119L44.8571 52.2301C44.6748 52.6146 44.4179 52.9527 44.0865 53.2443C43.7583 53.5327 43.3739 53.758 42.9331 53.9205C42.4956 54.0795 42.0166 54.1591 41.4963 54.1591ZM49.3638 54.1591C48.7241 54.1591 48.1872 53.9983 47.753 53.6768C47.3188 53.352 47.0123 52.8946 46.8333 52.3047C46.6576 51.7114 46.6361 51.0104 46.7686 50.2017C46.9045 49.3996 47.1581 48.7036 47.5293 48.1136C47.9038 47.5237 48.3629 47.0679 48.9064 46.7464C49.45 46.425 50.0433 46.2642 50.6863 46.2642C51.1834 46.2642 51.5629 46.3471 51.8248 46.5128C52.0899 46.6752 52.2821 46.8608 52.4015 47.0696C52.5208 47.2751 52.6119 47.4441 52.6749 47.5767H52.7743L53.4007 43.8182H54.574L52.8837 54H51.7502L51.949 52.8267H51.8098C51.7005 52.9659 51.548 53.1416 51.3525 53.3537C51.1569 53.5625 50.8984 53.7498 50.5769 53.9155C50.2587 54.0779 49.8543 54.1591 49.3638 54.1591ZM49.6522 53.1051C50.1228 53.1051 50.5437 52.9825 50.915 52.7372C51.2895 52.4886 51.601 52.1456 51.8496 51.7081C52.0982 51.2673 52.2705 50.7585 52.3667 50.1818C52.4628 49.6117 52.4595 49.1129 52.3567 48.6854C52.254 48.2545 52.0568 47.9197 51.7651 47.6811C51.4734 47.4392 51.0873 47.3182 50.6067 47.3182C50.1129 47.3182 49.6837 47.4458 49.3191 47.701C48.9545 47.9529 48.6578 48.2959 48.4292 48.7301C48.2005 49.161 48.0414 49.6449 47.9519 50.1818C47.8624 50.7254 47.8607 51.2192 47.9469 51.6634C48.0331 52.1042 48.2154 52.4555 48.4938 52.7173C48.7755 52.9759 49.1616 53.1051 49.6522 53.1051Z" fill="#007AFF" fill-opacity="0.25"/>
<rect x="9" y="10" width="10" height="10" rx="3" fill="#007AFF" fill-opacity="0.25"/>
<rect x="9" y="27" width="10" height="10" rx="3" fill="#007AFF"/>
<rect x="9" y="44" width="10" height="10" rx="3" fill="#007AFF" fill-opacity="0.25"/>
</svg>
`,rAt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M28.1666 45.7042C28.9268 45.8901 29.611 45.5001 29.8329 44.7506L36.9814 20.6115C37.1728 19.9366 36.8385 19.2589 36.0783 19.0547C35.3333 18.8689 34.6979 19.1477 34.4425 20.0235L27.3365 44.0276C27.1175 44.7804 27.3579 45.5001 28.1666 45.7042Z" fill="black"/>
<path d="M12 32.3568C12 32.7499 12.1764 33.1396 12.5046 33.4216L22.0655 41.9466C22.6825 42.4776 23.4794 42.4744 23.9719 41.9287C24.4765 41.3647 24.3975 40.5639 23.829 40.0662L15.214 32.3568L23.829 24.6476C24.3975 24.1496 24.4765 23.3488 23.9719 22.7851C23.4794 22.2391 22.6825 22.2362 22.0655 22.7669L12.5046 31.2922C12.1764 31.5742 12 31.9639 12 32.3568ZM52.1638 32.3568C52.1638 31.9639 52.0027 31.5742 51.6742 31.2922L42.1015 22.7669C41.481 22.2362 40.6997 22.2391 40.1948 22.7851C39.6871 23.3488 39.7663 24.1496 40.3378 24.6476L48.968 32.3568L40.3378 40.0662C39.7663 40.5639 39.6871 41.3647 40.1948 41.9287C40.6997 42.4744 41.481 42.4776 42.1015 41.9466L51.6742 33.4216C52.0027 33.1396 52.1638 32.7499 52.1638 32.3568Z" fill="black"/>
</svg>
`,iAt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 33H22V53C22 54.6569 20.6569 56 19 56H11C9.34315 56 8 54.6569 8 53V33Z" fill="#34C759"/>
<path d="M8 19C8 17.3431 9.34315 16 11 16H19C20.6569 16 22 17.3431 22 19V34H8V19Z" fill="#007AFF"/>
<path d="M25 39H39V53C39 54.6569 37.6569 56 36 56H28C26.3431 56 25 54.6569 25 53V39Z" fill="#34C759"/>
<path d="M42 32H56V53C56 54.6569 54.6569 56 53 56H45C43.3431 56 42 54.6569 42 53V32Z" fill="#34C759"/>
<path d="M25 29C25 27.3431 26.3431 26 28 26H36C37.6569 26 39 27.3431 39 29V40H25V29Z" fill="#3C82F6"/>
<path d="M42 16C42 14.3431 43.3431 13 45 13H53C54.6569 13 56 14.3431 56 16V33H42V16Z" fill="#007AFF"/>
</svg>
`,sAt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8" y="32" width="14" height="24" rx="3" fill="#007AFF"/>
<rect x="25" y="12" width="14" height="44" rx="3" fill="#007AFF"/>
<rect x="42" y="24" width="14" height="32" rx="3" fill="#007AFF"/>
</svg>
`,oAt={"chart-boxplot":J4t,"chart-h-bar":eAt,"chart-heatmap":tAt,"chart-embedding":Z4t,"chart-stacked":iAt,"chart-v-histogram":sAt,"chart-spec":rAt,"chart-predicates":nAt};var aAt=xe('<div class="w-12 h-12"><!></div>');function lAt(t,e){ot(e,!0);function n(s,o){s=s.replace("xmlns",'style="width:100%;height:100%" xmlns');let a=o=="dark"?{black:Ku.slate[400]}:{black:Ku.slate[500]};for(let l in a)s=s.replaceAll(l,a[l]);return s}var r=aAt(),i=ne(r);UOe(i,()=>n(oAt[e.type]??"",e.colorScheme??"light")),Z(r),te(t,r),at()}var uAt=xe("<button><!></button>"),cAt=xe('<span class="text-slate-500 dark:text-slate-400"> </span> <!>',1),fAt=xe('<div class="w-full h-64"><!></div>'),hAt=xe("<!> <!>",1),dAt=xe('<div class="border-t border-b border-dotted border-slate-400 dark:border-slate-500 py-2 my-1"><div class="-m-2 rounded-md"><!></div></div>'),pAt=xe("<div> </div>"),gAt=xe('<div class="p-2 flex flex-col gap-2"><div class="flex flex-wrap gap-2"></div> <div> </div> <!> <!> <div><button>Confirm</button></div> <!></div>');function mAt(t,e){ot(e,!0);const n=()=>Ds(o,"$colorScheme",r),[r,i]=aa();let{columns:s,colorScheme:o}=e.context,a=a8t(),l=De(a[0]),u=De(mu({})),c=De(!1),f=De(null),h=De(null);Bt(()=>{k(l);let P=wo(()=>k(u)),O={};for(let R of k(l).ui)if("field"in R){let L=y(s,R.field.types),B=P[R.field.key];B!=null&&L.findIndex(({name:z})=>z==B)>=0&&(O[R.field.key]=B)}ae(u,O,!0)}),Bt(()=>{try{let P=p();if(P==null){ae(c,!1),ae(h,null),ae(f,null);return}let O=k(l).create(P,{table:e.context.table,id:e.context.id});ae(c,O!=null),ae(h,O),ae(f,null)}catch(P){ae(c,P.toString(),!0)}});function d(){k(h)!=null&&(e.onSpecChange(k(h),"replace"),e.onStateChange(k(f)??{},"replace"))}function p(){let P={...k(u)};for(let O of k(l).ui)if("field"in O){let R=m(P[O.field.key]);if(O.field.required&&R==null)return;P[O.field.key]=R}return P}function m(P){let O=s.find(R=>R.name==P);if(O==null||O.jsType==null)return null;switch(O.jsType){case"number":return{name:O.name,type:"continuous"};case"string":return{name:O.name,type:"discrete"};case"string[]":return{name:O.name,type:"discrete[]"};default:return null}}function y(P,O){return O==null?P.filter(R=>R.jsType!=null):P.filter(R=>R.jsType!=null&&O.indexOf(R.jsType)>=0)}var b=gAt(),v=ne(b);hn(v,21,()=>a,Pn,(P,O)=>{const R=J(()=>k(l)==k(O));var L=uAt();L.__click=()=>{ae(l,k(O))};let B;var z=ne(L);lAt(z,{get type(){return k(O).icon},get colorScheme(){return n()}}),Z(L),Ne(()=>{ue(L,"title",k(O).description),B=wr(L,1,"rounded-md border border-slate-200 dark:border-slate-700",null,B,{"!border-slate-600":k(R),"dark:!border-slate-400":k(R),"!bg-slate-100":k(R),"dark:!bg-slate-700":k(R)})}),te(P,L)}),Z(v);var w=pe(v,2),_=ne(w,!0);Z(w);var S=pe(w,2);hn(S,17,()=>k(l).ui,Pn,(P,O)=>{var R=hAt(),L=Ye(R);{var B=V=>{const W=J(()=>k(O).field.key);var H=cAt(),Y=Ye(H),se=ne(Y,!0);Z(Y);var he=pe(Y,2);{let be=J(()=>k(u)[k(W)]??null),fe=J(()=>y(s,k(O).field.types).map(me=>({value:me.name,label:`${me.name} (${me.type})`})));gu(he,{get value(){return k(be)},onChange:me=>k(u)[k(W)]=me,placeholder:"(select field)",class:"w-full",get options(){return k(fe)}})}Ne(()=>pt(se,k(O).field.label)),te(V,H)};Le(L,V=>{"field"in k(O)&&V(B)})}var z=pe(L,2);{var U=V=>{const W=J(()=>k(O).code.key);var H=fAt(),Y=ne(H);{let se=J(()=>k(O).code.language??"plain");IU(Y,{class:"w-full h-full",get value(){return k(u)[k(W)]},onChange:he=>k(u)[k(W)]=he,get colorScheme(){return n()},get language(){return k(se)}})}Z(H),te(V,H)};Le(z,V=>{"code"in k(O)&&V(U)})}te(P,R)});var A=pe(S,2);{var C=P=>{var O=kn(),R=Ye(O);yre(R,()=>k(h),L=>{var B=dAt(),z=ne(B),U=ne(z);{let V=J(()=>k(f)??{});g6e(U,{get context(){return e.context},get spec(){return k(h)},get state(){return k(V)},width:"container",onStateChange:(W,H="merge")=>{Qb(k(f)??{},W,H,Y=>ae(f,Y))},onSpecChange:(W,H="merge")=>{Qb(k(h)??{},W,H,Y=>ae(h,Y))}})}Z(z),Z(B),te(L,B)}),te(P,O)};Le(A,P=>{k(h)!=null&&k(l).preview!==!1&&P(C)})}var D=pe(A,2),T=ne(D);let M;T.__click=d,Z(D);var I=pe(D,2);{var N=P=>{var O=pAt(),R=ne(O,!0);Z(O),Ne(()=>pt(R,k(c))),te(P,O)};Le(I,P=>{typeof k(c)=="string"&&k(c).trim()!=""&&P(N)})}Z(b),Ne(()=>{pt(_,k(l).description),M=wr(T,1,"px-2 h-8 w-24 rounded-md text-white text-sm",null,M,{"bg-blue-500":k(c)===!0,"bg-gray-300":k(c)!==!0,"dark:text-gray-500":k(c)!==!0,"dark:bg-gray-700":k(c)!==!0}),T.disabled=k(c)!==!0}),te(t,b),at(),i()}ti(["click"]);var yAt=an('<line class="stroke-orange-500"></line>'),bAt=an('<circle class="fill-orange-500 stroke-orange-700 stroke-2"></circle>'),vAt=an("<svg><g><!><!></g></svg>");function xAt(t,e){ot(e,!0);var n=vAt(),r=ne(n),i=ne(r);{var s=a=>{const l=J(()=>e.proxy.location(e.center.x,e.center.y));var u=kn(),c=Ye(u);hn(c,17,()=>e.points??[],Pn,(f,h)=>{const d=J(()=>e.proxy.location(k(h).x,k(h).y));var p=yAt();Ne(()=>{ue(p,"x1",k(l).x),ue(p,"y1",k(l).y),ue(p,"x2",k(d).x),ue(p,"y2",k(d).y)}),te(f,p)}),te(a,u)};Le(i,a=>{e.center!=null&&a(s)})}var o=pe(i);hn(o,17,()=>e.points??[],Pn,(a,l)=>{const u=J(()=>e.proxy.location(k(l).x,k(l).y));var c=bAt();ue(c,"r",4),Ne(()=>{ue(c,"cx",k(u).x),ue(c,"cy",k(u).y)}),te(a,c)}),Z(r),Z(n),Ne(()=>{ue(n,"width",e.proxy.width),ue(n,"height",e.proxy.height)}),te(t,n),at()}function wAt(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function _At(t){const e=atob(t);return new Uint8Array([...e].map(n=>n.charCodeAt(0)))}function yy(t,e){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(t[n]!=e[n])return!1;return!0}function dte(t){return yy(t,[137,80,78,71,13,10,26,10])?"image/png":yy(t,[255,216,255])?"image/jpeg":yy(t,[73,73,42,0])?"image/tiff":yy(t,[66,77])?"image/bmp":yy(t,[71,73,70,56,55,97])||yy(t,[71,73,70,56,55,97])?"image/gif":"application/octet-stream"}function $4e(t){if(t==null)return null;if(typeof t=="string")return t.startsWith("data:")?t:`data:${dte(_At(t))};base64,`+t;{let e=null;if(t.bytes&&t.bytes instanceof Uint8Array&&(e=t.bytes),t instanceof Uint8Array&&(e=t),e!=null)return`data:${dte(e)};base64,`+wAt(e)}return null}class SAt{element;constructor(e,n){this.element=e,this.update(n)}update(e){if(e.value==null){this.element.innerText="(null)";return}let n=$4e(e.value);if(n!=null){let r=e.size??100,i=document.createElement("img");i.src=n,i.style.maxHeight=r+"px",i.style.maxWidth=r+"px",this.element.replaceChildren(i)}else this.element.innerText="(unknown)"}}function U4e(t,e){try{return JSON.stringify(t,(n,r)=>r instanceof Object&&ArrayBuffer.isView(r)?Array.from(r):r,e)}catch{return"(invalid)"}}class AAt{element;constructor(e,n){this.element=e,this.update(n)}update(e){let n=document.createElement("pre");n.className="text-sm",n.style.whiteSpace="pre-wrap",n.style.wordBreak="break-all",n.innerText=U4e(e.value,2),this.element.replaceChildren(n)}}function _q(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var F1=_q();function z4e(t){F1=t}var Jw={exec:()=>null};function Jn(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Jo.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}var CAt=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Jo={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},kAt=/^(?:[ \t]*(?:\n|$))+/,EAt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,DAt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,o4=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,TAt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Sq=/(?:[*+-]|\d{1,9}[.)])/,j4e=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,q4e=Jn(j4e).replace(/bull/g,Sq).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),OAt=Jn(j4e).replace(/bull/g,Sq).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Aq=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,MAt=/^[^\n]+/,Cq=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,IAt=Jn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Cq).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),RAt=Jn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Sq).getRegex(),rO="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kq=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,FAt=Jn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",kq).replace("tag",rO).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),V4e=Jn(Aq).replace("hr",o4).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rO).getRegex(),NAt=Jn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",V4e).getRegex(),Eq={blockquote:NAt,code:EAt,def:IAt,fences:DAt,heading:TAt,hr:o4,html:FAt,lheading:q4e,list:RAt,newline:kAt,paragraph:V4e,table:Jw,text:MAt},pte=Jn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",o4).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rO).getRegex(),LAt={...Eq,lheading:OAt,table:pte,paragraph:Jn(Aq).replace("hr",o4).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",pte).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rO).getRegex()},PAt={...Eq,html:Jn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kq).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Jw,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Jn(Aq).replace("hr",o4).replace("heading",` *#{1,6} *[^
]`).replace("lheading",q4e).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},BAt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$At=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,W4e=/^( {2,}|\\)\n(?!\s*$)/,UAt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,iO=/[\p{P}\p{S}]/u,Dq=/[\s\p{P}\p{S}]/u,H4e=/[^\s\p{P}\p{S}]/u,zAt=Jn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Dq).getRegex(),G4e=/(?!~)[\p{P}\p{S}]/u,jAt=/(?!~)[\s\p{P}\p{S}]/u,qAt=/(?:[^\s\p{P}\p{S}]|~)/u,VAt=Jn(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",CAt?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Y4e=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,WAt=Jn(Y4e,"u").replace(/punct/g,iO).getRegex(),HAt=Jn(Y4e,"u").replace(/punct/g,G4e).getRegex(),X4e="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",GAt=Jn(X4e,"gu").replace(/notPunctSpace/g,H4e).replace(/punctSpace/g,Dq).replace(/punct/g,iO).getRegex(),YAt=Jn(X4e,"gu").replace(/notPunctSpace/g,qAt).replace(/punctSpace/g,jAt).replace(/punct/g,G4e).getRegex(),XAt=Jn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,H4e).replace(/punctSpace/g,Dq).replace(/punct/g,iO).getRegex(),KAt=Jn(/\\(punct)/,"gu").replace(/punct/g,iO).getRegex(),QAt=Jn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),JAt=Jn(kq).replace("(?:-->|$)","-->").getRegex(),ZAt=Jn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",JAt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),n8=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,e6t=Jn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",n8).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),K4e=Jn(/^!?\[(label)\]\[(ref)\]/).replace("label",n8).replace("ref",Cq).getRegex(),Q4e=Jn(/^!?\[(ref)\](?:\[\])?/).replace("ref",Cq).getRegex(),t6t=Jn("reflink|nolink(?!\\()","g").replace("reflink",K4e).replace("nolink",Q4e).getRegex(),gte=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Tq={_backpedal:Jw,anyPunctuation:KAt,autolink:QAt,blockSkip:VAt,br:W4e,code:$At,del:Jw,emStrongLDelim:WAt,emStrongRDelimAst:GAt,emStrongRDelimUnd:XAt,escape:BAt,link:e6t,nolink:Q4e,punctuation:zAt,reflink:K4e,reflinkSearch:t6t,tag:ZAt,text:UAt,url:Jw},n6t={...Tq,link:Jn(/^!?\[(label)\]\((.*?)\)/).replace("label",n8).getRegex(),reflink:Jn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n8).getRegex()},QL={...Tq,emStrongRDelimAst:YAt,emStrongLDelim:HAt,url:Jn(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",gte).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Jn(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",gte).getRegex()},r6t={...QL,br:Jn(W4e).replace("{2,}","*").getRegex(),text:Jn(QL.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},q6={normal:Eq,gfm:LAt,pedantic:PAt},$x={normal:Tq,gfm:QL,breaks:r6t,pedantic:n6t},i6t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mte=t=>i6t[t];function ef(t,e){if(e){if(Jo.escapeTest.test(t))return t.replace(Jo.escapeReplace,mte)}else if(Jo.escapeTestNoEncode.test(t))return t.replace(Jo.escapeReplaceNoEncode,mte);return t}function yte(t){try{t=encodeURI(t).replace(Jo.percentDecode,"%")}catch{return null}return t}function bte(t,e){let n=t.replace(Jo.findPipe,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(Jo.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Jo.slashPipe,"|");return r}function Ux(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function s6t(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function vte(t,e,n,r,i){let s=e.href,o=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function o6t(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var r8=class{options;rules;lexer;constructor(t){this.options=t||F1}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Ux(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],r=o6t(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let r=Ux(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ux(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=Ux(e[0],`
`).split(`
`),r="",i="",s=[];for(;n.length>0;){let o=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);let u=a.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,i=i?`${i}
${c}`:c;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,s,!0),this.lexer.state.top=f,n.length===0)break;let h=s.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let d=h,p=d.raw+`
`+n.join(`
`),m=this.blockquote(p);s[s.length-1]=m,r=r.substring(0,r.length-d.raw.length)+m.raw,i=i.substring(0,i.length-d.text.length)+m.text;break}else if(h?.type==="list"){let d=h,p=d.raw+`
`+n.join(`
`),m=this.list(p);s[s.length-1]=m,r=r.substring(0,r.length-h.raw.length)+m.raw,i=i.substring(0,i.length-d.raw.length)+m.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let s=this.rules.other.listItemRegex(n),o=!1;for(;t;){let l=!1,u="",c="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),h=t.split(`
`,1)[0],d=!f.trim(),p=0;if(this.options.pedantic?(p=2,c=f.trimStart()):d?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,c=f.slice(p),p+=e[1].length),d&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,t=t.substring(h.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(p),v=this.rules.other.hrRegex(p),w=this.rules.other.fencesBeginRegex(p),_=this.rules.other.headingBeginRegex(p),S=this.rules.other.htmlBeginRegex(p);for(;t;){let A=t.split(`
`,1)[0],C;if(h=A,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),C=h):C=h.replace(this.rules.other.tabCharGlobal,"    "),w.test(h)||_.test(h)||S.test(h)||b.test(h)||v.test(h))break;if(C.search(this.rules.other.nonSpaceChar)>=p||!h.trim())c+=`
`+C.slice(p);else{if(d||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||w.test(f)||_.test(f)||v.test(f))break;c+=`
`+h}!d&&!h.trim()&&(d=!0),u+=A+`
`,t=t.substring(A.length+1),f=C.slice(p)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(c),m&&(y=m[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!m,checked:y,loose:!1,text:c,tokens:[]}),i.raw+=u}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let u=i.items[l].tokens.filter(f=>f.type==="space"),c=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=c}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=bte(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(let o of i)s.rows.push(bte(o,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Ux(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=s6t(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),vte(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return vte(n,i,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...r[0]].length-1,s,o,a=i,l=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*t.length+i);(r=u.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(o=[...s].length,r[3]||r[4]){a+=o;continue}else if((r[5]||r[6])&&i%3&&!((i+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let c=[...r[0]][0].length,f=t.slice(0,i+r.index+c+o);if(Math.min(i,o)%2){let d=f.slice(1,-1);return{type:"em",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}let h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},tc=class JL{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||F1,this.options.tokenizer=this.options.tokenizer||new r8,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Jo,block:q6.normal,inline:$x.normal};this.options.pedantic?(n.block=q6.pedantic,n.inline=$x.pedantic):this.options.gfm&&(n.block=q6.gfm,this.options.breaks?n.inline=$x.breaks:n.inline=$x.gfm),this.tokenizer.rules=n}static get rules(){return{block:q6,inline:$x}}static lex(e,n){return new JL(n).lex(e)}static lexInline(e,n){return new JL(n).inlineTokens(e)}lex(e){e=e.replace(Jo.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(Jo.tabCharGlobal,"    ").replace(Jo.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let o=n.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},n.push(i));continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){let o=n.at(-1);r&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,i=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=i[2]?i[2].length:0,r=r.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let o=!1,a="";for(;e;){o||(a=""),o=!1;let l;if(this.options.extensions?.inline?.some(c=>(l=c.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let c=n.at(-1);l.type==="text"&&c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,a)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let u=e;if(this.options.extensions?.startInline){let c=1/0,f=e.slice(1),h;this.options.extensions.startInline.forEach(d=>{h=d.call({lexer:this},f),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(u=e.substring(0,c+1))}if(l=this.tokenizer.inlineText(u)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),o=!0;let c=n.at(-1);c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):n.push(l);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}},i8=class{options;parser;constructor(t){this.options=t||F1}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(Jo.notSpaceStart)?.[0],i=t.replace(Jo.endingNewline,"")+`
`;return r?'<pre><code class="language-'+ef(r)+'">'+(n?i:ef(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:ef(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let o=0;o<t.items.length;o++){let a=t.items[o];r+=this.listitem(a)}let i=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(t){let e="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+ef(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){let s=t.rows[i];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ef(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),i=yte(t);if(i===null)return r;t=i;let s='<a href="'+t+'"';return e&&(s+=' title="'+ef(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=yte(t);if(i===null)return ef(n);t=i;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${ef(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ef(t.text)}},Oq=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},nc=class ZL{options;renderer;textRenderer;constructor(e){this.options=e||F1,this.options.renderer=this.options.renderer||new i8,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Oq}static parse(e,n){return new ZL(n).parse(e)}static parseInline(e,n){return new ZL(n).parseInline(e)}parse(e,n=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){r+=l||"";continue}}let o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"def":{r+=this.renderer.def(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,n=this.renderer){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}let o=s;switch(o.type){case"escape":{r+=n.text(o);break}case"html":{r+=n.html(o);break}case"link":{r+=n.link(o);break}case"image":{r+=n.image(o);break}case"strong":{r+=n.strong(o);break}case"em":{r+=n.em(o);break}case"codespan":{r+=n.codespan(o);break}case"br":{r+=n.br(o);break}case"del":{r+=n.del(o);break}case"text":{r+=n.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},xw=class{options;block;constructor(t){this.options=t||F1}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?tc.lex:tc.lexInline}provideParser(){return this.block?nc.parse:nc.parseInline}},a6t=class{defaults=_q();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=nc;Renderer=i8;TextRenderer=Oq;Lexer=tc;Tokenizer=r8;Hooks=xw;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let i=r;for(let s of i.header)n=n.concat(this.walkTokens(s.tokens,e));for(let s of i.rows)for(let o of s)n=n.concat(this.walkTokens(o.tokens,e));break}case"list":{let i=r;n=n.concat(this.walkTokens(i.items,e));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{let o=i[s].flat(1/0);n=n.concat(this.walkTokens(o,e))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){let i=this.defaults.renderer||new i8(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,a=n.renderer[o],l=i[o];i[o]=(...u)=>{let c=a.apply(i,u);return c===!1&&(c=l.apply(i,u)),c||""}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new r8(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,a=n.tokenizer[o],l=i[o];i[o]=(...u)=>{let c=a.apply(i,u);return c===!1&&(c=l.apply(i,u)),c}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new xw;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,a=n.hooks[o],l=i[o];xw.passThroughHooks.has(s)?i[o]=u=>{if(this.defaults.async&&xw.passThroughHooksRespectAsync.has(s))return(async()=>{let f=await a.call(i,u);return l.call(i,f)})();let c=a.call(i,u);return l.call(i,c)}:i[o]=(...u)=>{if(this.defaults.async)return(async()=>{let f=await a.apply(i,u);return f===!1&&(f=await l.apply(i,u)),f})();let c=a.apply(i,u);return c===!1&&(c=l.apply(i,u)),c}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return tc.lex(t,e??this.defaults)}parser(t,e){return nc.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},i={...this.defaults,...r},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let o=i.hooks?await i.hooks.preprocess(e):e,a=await(i.hooks?await i.hooks.provideLexer():t?tc.lex:tc.lexInline)(o,i),l=i.hooks?await i.hooks.processAllTokens(a):a;i.walkTokens&&await Promise.all(this.walkTokens(l,i.walkTokens));let u=await(i.hooks?await i.hooks.provideParser():t?nc.parse:nc.parseInline)(l,i);return i.hooks?await i.hooks.postprocess(u):u})().catch(s);try{i.hooks&&(e=i.hooks.preprocess(e));let o=(i.hooks?i.hooks.provideLexer():t?tc.lex:tc.lexInline)(e,i);i.hooks&&(o=i.hooks.processAllTokens(o)),i.walkTokens&&this.walkTokens(o,i.walkTokens);let a=(i.hooks?i.hooks.provideParser():t?nc.parse:nc.parseInline)(o,i);return i.hooks&&(a=i.hooks.postprocess(a)),a}catch(o){return s(o)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+ef(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},l1=new a6t;function vr(t,e){return l1.parse(t,e)}vr.options=vr.setOptions=function(t){return l1.setOptions(t),vr.defaults=l1.defaults,z4e(vr.defaults),vr};vr.getDefaults=_q;vr.defaults=F1;vr.use=function(...t){return l1.use(...t),vr.defaults=l1.defaults,z4e(vr.defaults),vr};vr.walkTokens=function(t,e){return l1.walkTokens(t,e)};vr.parseInline=l1.parseInline;vr.Parser=nc;vr.parser=nc.parse;vr.Renderer=i8;vr.TextRenderer=Oq;vr.Lexer=tc;vr.lexer=tc.lex;vr.Tokenizer=r8;vr.Hooks=xw;vr.parse=vr;vr.options;vr.setOptions;vr.use;vr.walkTokens;vr.parseInline;nc.parse;tc.lex;class l6t{element;constructor(e,n){this.element=e,this.update(n)}update(e){this.element.innerHTML='<div class="markdown-content">'+vr(e.value?.toString()??"(null)",{async:!1,gfm:!0})+"</div>"}}class u6t{element;constructor(e,n){this.element=e,this.update(n)}update(e){if(e.value!=null){let n=document.createElement("a");n.href=e.value,n.innerText=e.value,n.className="underline",n.target="_blank",this.element.replaceChildren(n)}else this.element.innerText="(null)"}}let J4e={markdown:l6t,image:SAt,url:u6t,json:AAt},c6t=[{renderer:"markdown",label:"Markdown"},{renderer:"image",label:"Image"},{renderer:"url",label:"Link"},{renderer:"json",label:"JSON"}];function xte(t){if(t!=null)return typeof t=="string"?J4e[t]:t}function f6t(t){return typeof t=="string"&&(t.startsWith("http://")||t.startsWith("https://"))}function h6t(t){return t==null?!1:!!(typeof t=="string"&&t.startsWith("data:image/")||t.bytes&&t.bytes instanceof Uint8Array)}function Mq(t){if(t==null)return"(null)";if(typeof t=="string")return t.toString();if(typeof t=="number")return t.toLocaleString();if(Array.isArray(t))return"["+t.map(e=>Mq(e)).join(", ")+"]";try{return U4e(t)}catch{return t.toString()}}var d6t=xe('<a class="underline" target="_blank"> </a>'),p6t=xe('<img alt="" class="max-w-24 max-h-24"/>'),g6t=xe("<div></div>");function wte(t,e){ot(e,!0);let n=gt(e,"value",3,""),r=gt(e,"rendererOptions",19,()=>({})),i=J(()=>e.renderer!=null?J4e[e.renderer]??null:null);function s(c,f){let h=new f.class(c,{value:f.value,...f.options});return{update(d){h.update?.({value:d.value,...d.options})},destroy(){h.destroy?.()}}}var o=kn(),a=Ye(o);{var l=c=>{var f=kn(),h=Ye(f);{var d=m=>{var y=d6t(),b=ne(y,!0);Z(y),Ne(()=>{ue(y,"href",n()),pt(b,n())}),te(m,y)},p=m=>{var y=kn(),b=Ye(y);{var v=_=>{var S=p6t();Ne(A=>ue(S,"src",A),[()=>$4e(n())]),te(_,S)},w=_=>{var S=Ca();Ne(A=>pt(S,A),[()=>Mq(n())]),te(_,S)};Le(b,_=>{h6t(n())?_(v):_(w,!1)},!0)}te(m,y)};Le(h,m=>{f6t(n())?m(d):m(p,!1)})}te(c,f)},u=c=>{var f=kn(),h=Ye(f);yre(h,()=>k(i),d=>{var p=g6t();dl(p,(m,y)=>s?.(m,y),()=>({class:k(i),value:n(),options:r()??{}})),te(d,p)}),te(c,f)};Le(a,c=>{k(i)==null?c(l):c(u,!1)})}te(t,o),at()}var m6t=xe('<div class="flex flex-col"><div class="text-slate-400 dark:text-slate-400 font-medium text-xs"> </div> <div><!></div></div>'),y6t=xe('<div class="px-2 flex items-center gap-2 border border-slate-200 dark:border-slate-700 bg-slate-100/25 dark:bg-slate-700/25 text-slate-700 dark:text-slate-300 rounded-md"><div class="text-slate-400 dark:text-slate-400 font-medium text-sm"> </div> <div class="text-ellipsis whitespace-nowrap overflow-hidden max-w-72"><!></div></div>'),b6t=xe('<div class="flex flex-col gap-2"><!> <div class="flex-none flex flex-row gap-1 flex-wrap items-start"></div></div>');function Z4e(t,e){ot(e,!0);let n=J(()=>Object.keys(e.columnStyles).filter(a=>e.columnStyles[a].display=="full")),r=J(()=>Object.keys(e.columnStyles).filter(a=>e.columnStyles[a].display=="badge"));var i=b6t(),s=ne(i);hn(s,17,()=>k(n),Pn,(a,l)=>{const u=J(()=>e.values[k(l)]);var c=m6t(),f=ne(c),h=ne(f,!0);Z(f);var d=pe(f,2),p=ne(d);wte(p,{get value(){return k(u)},get renderer(){return e.columnStyles[k(l)].renderer},get rendererOptions(){return e.columnStyles[k(l)].rendererOptions}}),Z(d),Z(c),Ne(()=>pt(h,k(l))),te(a,c)});var o=pe(s,2);hn(o,21,()=>k(r),Pn,(a,l)=>{const u=J(()=>e.values[k(l)]);var c=y6t(),f=ne(c),h=ne(f,!0);Z(f);var d=pe(f,2),p=ne(d);wte(p,{get value(){return k(u)}}),Z(d),Z(c),Ne(m=>{pt(h,k(l)),ue(d,"title",m)},[()=>Mq(k(u))]),te(a,c)}),Z(o),Z(i),te(t,i),at()}var v6t=xe('<div><button class="text-sm flex gap-0.5 items-center text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-300"><!> Nearest Neighbors</button></div>'),x6t=xe('<div class="embedding-atlas-root"><div><!> <!></div></div>');function w6t(t,e){ot(e,!0);var n=x6t(),r=ne(n);let i;Nt(r,"",{},{"max-width":"400px","max-height":"300px"});var s=ne(r);{let l=J(()=>e.tooltip.fields??{}),u=J(()=>e.columnStyles??{});Z4e(s,{get values(){return k(l)},get columnStyles(){return k(u)}})}var o=pe(s,2);{var a=l=>{var u=v6t(),c=ne(u);c.__click=()=>{e.onNearestNeighborSearch?.(e.tooltip.identifier)};var f=ne(c);jnt(f,{}),Bm(),Z(c),Z(u),te(l,u)};Le(o,l=>{e.onNearestNeighborSearch&&l(a)})}Z(r),Z(n),Ne(()=>i=wr(r,1,"p-2 border flex flex-col gap-2 border-slate-300 dark:border-slate-600 shadow-md text-slate-700 dark:text-slate-300 rounded-md text-ellipsis overflow-x-hidden overflow-y-scroll bg-white/75 dark:bg-slate-800/75 backdrop-blur-sm",null,i,{dark:e.colorScheme=="dark"})),te(t,n),at()}ti(["click"]);function eAe(t){return class{component;constructor(e,n){this.component=s7e({component:t,target:e,props:n})}update(e){this.component.$set(e)}destroy(){this.component.$destroy()}}}var _6t=xe("<div></div>");function S6t(t,e){ot(e,!0);let n=Ts(e,["$$slots","$$events","$$legacy"]),r;Qv(()=>{let s=new zut(r,n);Tl(()=>{s.update(n)}),FP(()=>{s.destroy()})});var i=_6t();Nt(i,"",{},{display:"flex"}),za(i,s=>r=s,()=>r),te(t,i),at()}const s8=Math.min,Rm=Math.max,o8=Math.round,V6=Math.floor,Hf=t=>({x:t,y:t});function _te(t,e,n){return Rm(t,s8(e,n))}function Iq(t,e){return typeof t=="function"?t(e):t}function sO(t){return t.split("-")[0]}function tAe(t){return t.split("-")[1]}function nAe(t){return t==="x"?"y":"x"}function A6t(t){return t==="y"?"height":"width"}const C6t=new Set(["top","bottom"]);function oO(t){return C6t.has(sO(t))?"y":"x"}function k6t(t){return nAe(oO(t))}function E6t(t){return{top:0,right:0,bottom:0,left:0,...t}}function D6t(t){return typeof t!="number"?E6t(t):{top:t,right:t,bottom:t,left:t}}function a8(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Ste(t,e,n){let{reference:r,floating:i}=t;const s=oO(e),o=k6t(e),a=A6t(o),l=sO(e),u=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let d;switch(l){case"top":d={x:c,y:r.y-i.height};break;case"bottom":d={x:c,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-i.width,y:f};break;default:d={x:r.x,y:r.y}}switch(tAe(e)){case"start":d[o]-=h*(n&&u?-1:1);break;case"end":d[o]+=h*(n&&u?-1:1);break}return d}const T6t=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=Ste(u,r,l),h=r,d={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:b}=a[m],{x:v,y:w,data:_,reset:S}=await b({x:c,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:d,rects:u,platform:o,elements:{reference:t,floating:e}});c=v??c,f=w??f,d={...d,[y]:{...d[y],..._}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:c,y:f}=Ste(u,h,l)),m=-1)}return{x:c,y:f,placement:h,strategy:i,middlewareData:d}};async function O6t(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=Iq(e,t),p=D6t(d),y=a[h?f==="floating"?"reference":"floating":f],b=a8(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=a8(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(b.top-S.top+p.top)/_.y,bottom:(S.bottom-b.bottom+p.bottom)/_.y,left:(b.left-S.left+p.left)/_.x,right:(S.right-b.right+p.right)/_.x}}const M6t=new Set(["left","top"]);async function I6t(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=sO(n),a=tAe(n),l=oO(n)==="y",u=M6t.has(o)?-1:1,c=s&&l?-1:1,f=Iq(e,t);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*c,y:h*u}:{x:h*u,y:d*c}}const R6t=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await I6t(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},F6t=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:b,y:v}=y;return{x:b,y:v}}},...l}=Iq(t,e),u={x:n,y:r},c=await O6t(e,l),f=oO(sO(i)),h=nAe(f);let d=u[h],p=u[f];if(s){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=d+c[y],w=d-c[b];d=_te(v,d,w)}if(o){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=p+c[y],w=p-c[b];p=_te(v,p,w)}const m=a.fn({...e,[h]:d,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[f]:o}}}}}};function aO(){return typeof window<"u"}function $2(t){return rAe(t)?(t.nodeName||"").toLowerCase():"#document"}function Il(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function kh(t){var e;return(e=(rAe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function rAe(t){return aO()?t instanceof Node||t instanceof Il(t).Node:!1}function Ac(t){return aO()?t instanceof Element||t instanceof Il(t).Element:!1}function ah(t){return aO()?t instanceof HTMLElement||t instanceof Il(t).HTMLElement:!1}function Ate(t){return!aO()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Il(t).ShadowRoot}const N6t=new Set(["inline","contents"]);function a4(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Cc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!N6t.has(i)}const L6t=new Set(["table","td","th"]);function P6t(t){return L6t.has($2(t))}const B6t=[":popover-open",":modal"];function lO(t){return B6t.some(e=>{try{return t.matches(e)}catch{return!1}})}const $6t=["transform","translate","scale","rotate","perspective"],U6t=["transform","translate","scale","rotate","perspective","filter"],z6t=["paint","layout","strict","content"];function Rq(t){const e=Fq(),n=Ac(t)?Cc(t):t;return $6t.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||U6t.some(r=>(n.willChange||"").includes(r))||z6t.some(r=>(n.contain||"").includes(r))}function j6t(t){let e=H0(t);for(;ah(e)&&!Bv(e);){if(Rq(e))return e;if(lO(e))return null;e=H0(e)}return null}function Fq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const q6t=new Set(["html","body","#document"]);function Bv(t){return q6t.has($2(t))}function Cc(t){return Il(t).getComputedStyle(t)}function uO(t){return Ac(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function H0(t){if($2(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ate(t)&&t.host||kh(t);return Ate(e)?e.host:e}function iAe(t){const e=H0(t);return Bv(e)?t.ownerDocument?t.ownerDocument.body:t.body:ah(e)&&a4(e)?e:iAe(e)}function M3(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=iAe(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Il(i);if(s){const a=eP(o);return e.concat(o,o.visualViewport||[],a4(i)?i:[],a&&n?M3(a):[])}return e.concat(i,M3(i,[],n))}function eP(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sAe(t){const e=Cc(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ah(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=o8(n)!==s||o8(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Nq(t){return Ac(t)?t:t.contextElement}function Fb(t){const e=Nq(t);if(!ah(e))return Hf(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=sAe(e);let o=(s?o8(n.width):n.width)/r,a=(s?o8(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const V6t=Hf(0);function oAe(t){const e=Il(t);return!Fq()||!e.visualViewport?V6t:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function W6t(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Il(t)?!1:e}function u1(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Nq(t);let o=Hf(1);e&&(r?Ac(r)&&(o=Fb(r)):o=Fb(t));const a=W6t(s,n,r)?oAe(s):Hf(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const h=Il(s),d=r&&Ac(r)?Il(r):r;let p=h,m=eP(p);for(;m&&r&&d!==p;){const y=Fb(m),b=m.getBoundingClientRect(),v=Cc(m),w=b.left+(m.clientLeft+parseFloat(v.paddingLeft))*y.x,_=b.top+(m.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,f*=y.y,l+=w,u+=_,p=Il(m),m=eP(p)}}return a8({width:c,height:f,x:l,y:u})}function cO(t,e){const n=uO(t).scrollLeft;return e?e.left+n:u1(kh(t)).left+n}function aAe(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-cO(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function H6t(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=kh(r),a=e?lO(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Hf(1);const c=Hf(0),f=ah(r);if((f||!f&&!s)&&(($2(r)!=="body"||a4(o))&&(l=uO(r)),ah(r))){const d=u1(r);u=Fb(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}const h=o&&!f&&!s?aAe(o,l):Hf(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function G6t(t){return Array.from(t.getClientRects())}function Y6t(t){const e=kh(t),n=uO(t),r=t.ownerDocument.body,i=Rm(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Rm(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cO(t);const a=-n.scrollTop;return Cc(r).direction==="rtl"&&(o+=Rm(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const Cte=25;function X6t(t,e){const n=Il(t),r=kh(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Fq();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const u=cO(r);if(u<=0){const c=r.ownerDocument,f=c.body,h=getComputedStyle(f),d=c.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,p=Math.abs(r.clientWidth-f.clientWidth-d);p<=Cte&&(s-=p)}else u<=Cte&&(s+=u);return{width:s,height:o,x:a,y:l}}const K6t=new Set(["absolute","fixed"]);function Q6t(t,e){const n=u1(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ah(t)?Fb(t):Hf(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function kte(t,e,n){let r;if(e==="viewport")r=X6t(t,n);else if(e==="document")r=Y6t(kh(t));else if(Ac(e))r=Q6t(e,n);else{const i=oAe(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return a8(r)}function lAe(t,e){const n=H0(t);return n===e||!Ac(n)||Bv(n)?!1:Cc(n).position==="fixed"||lAe(n,e)}function J6t(t,e){const n=e.get(t);if(n)return n;let r=M3(t,[],!1).filter(a=>Ac(a)&&$2(a)!=="body"),i=null;const s=Cc(t).position==="fixed";let o=s?H0(t):t;for(;Ac(o)&&!Bv(o);){const a=Cc(o),l=Rq(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&K6t.has(i.position)||a4(o)&&!l&&lAe(t,o))?r=r.filter(c=>c!==o):i=a,o=H0(o)}return e.set(t,r),r}function Z6t(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?lO(e)?[]:J6t(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const f=kte(e,c,i);return u.top=Rm(f.top,u.top),u.right=s8(f.right,u.right),u.bottom=s8(f.bottom,u.bottom),u.left=Rm(f.left,u.left),u},kte(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eCt(t){const{width:e,height:n}=sAe(t);return{width:e,height:n}}function tCt(t,e,n){const r=ah(e),i=kh(e),s=n==="fixed",o=u1(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Hf(0);function u(){l.x=cO(i)}if(r||!r&&!s)if(($2(e)!=="body"||a4(i))&&(a=uO(e)),r){const d=u1(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&u();s&&!r&&i&&u();const c=i&&!r&&!s?aAe(i,a):Hf(0),f=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function CI(t){return Cc(t).position==="static"}function Ete(t,e){if(!ah(t)||Cc(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return kh(t)===n&&(n=n.ownerDocument.body),n}function uAe(t,e){const n=Il(t);if(lO(t))return n;if(!ah(t)){let i=H0(t);for(;i&&!Bv(i);){if(Ac(i)&&!CI(i))return i;i=H0(i)}return n}let r=Ete(t,e);for(;r&&P6t(r)&&CI(r);)r=Ete(r,e);return r&&Bv(r)&&CI(r)&&!Rq(r)?n:r||j6t(t)||n}const nCt=async function(t){const e=this.getOffsetParent||uAe,n=this.getDimensions,r=await n(t.floating);return{reference:tCt(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rCt(t){return Cc(t).direction==="rtl"}const iCt={convertOffsetParentRelativeRectToViewportRelativeRect:H6t,getDocumentElement:kh,getClippingRect:Z6t,getOffsetParent:uAe,getElementRects:nCt,getClientRects:G6t,getDimensions:eCt,getScale:Fb,isElement:Ac,isRTL:rCt};function cAe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function sCt(t,e){let n=null,r;const i=kh(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:c,top:f,width:h,height:d}=u;if(a||e(),!h||!d)return;const p=V6(f),m=V6(i.clientWidth-(c+h)),y=V6(i.clientHeight-(f+d)),b=V6(c),w={rootMargin:-p+"px "+-m+"px "+-y+"px "+-b+"px",threshold:Rm(0,s8(1,l))||1};let _=!0;function S(A){const C=A[0].intersectionRatio;if(C!==l){if(!_)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!cAe(u,t.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(t)}return o(!0),s}function oCt(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Nq(t),c=i||s?[...u?M3(u):[],...M3(e)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=u&&a?sCt(u,n):null;let h=-1,d=null;o&&(d=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=d)==null||w.observe(e)})),n()}),u&&!l&&d.observe(u),d.observe(e));let p,m=l?u1(t):null;l&&y();function y(){const b=u1(t);m&&!cAe(m,b)&&n(),m=b,p=requestAnimationFrame(y)}return n(),()=>{var b;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f?.(),(b=d)==null||b.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const aCt=R6t,lCt=F6t,uCt=(t,e,n)=>{const r=new Map,i={platform:iCt,...n},s={...i.platform,_c:r};return T6t(t,e,{...i,platform:s})};var cCt=xe('<div class="relative"><!> <div class="absolute px-3 py-3 rounded-md z-20 bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 shadow-lg" popover=""><!></div></div>');function fAe(t,e){ot(e,!0);let n=gt(e,"title",3,""),r=gt(e,"label",3,null),i=gt(e,"icon",3,null);gt(e,"anchor",3,"right");let s=De(!1),o;function a(p){k(s)&&p.key=="Escape"&&(ae(s,!1),p.stopPropagation())}Tl(()=>{if(o!=null){let p=y=>{!k(s)||!o||y.target&&!o.contains(y.target)&&ae(s,!1)},m=o.getRootNode();return m.addEventListener("mousedown",p),()=>{m.removeEventListener("mousedown",p)}}});let l;Tl(()=>{k(s)&&Tl(()=>u())});function u(){l.showPopover();function p(){uCt(o,l,{placement:"bottom",middleware:[aCt(3),lCt()]}).then(({x:m,y})=>{l.style.left=m+"px",l.style.top=y+"px"})}return oCt(o,l,p)}var c=cCt();c.__keydown=a;var f=ne(c);LC(f,{get icon(){return i()},get title(){return n()},get label(){return r()},get checked(){return k(s)},set checked(p){ae(s,p,!0)}});var h=pe(f,2);Nt(h,"",{},{width:"max-content"});var d=ne(h);Bd(d,()=>e.children??An),Z(h),za(h,p=>l=p,()=>l),Z(c),za(c,p=>o=p,()=>o),te(t,c),at()}ti(["keydown"]);var fCt=xe('<div class="group relative" role="slider" tabindex="0"><div class="bg-slate-400 dark:bg-slate-500 rounded-full absolute"></div> <div class="bg-blue-500 rounded-full absolute group-hover:bg-blue-600 dark:group-hover:bg-blue-400"></div></div>');function tP(t,e){ot(e,!0);let n=gt(e,"value",15,0),r=gt(e,"min",3,0),i=gt(e,"max",3,100),s=gt(e,"step",3,void 0),o=gt(e,"width",3,100),a=15,l=J(()=>S=>(S-r())/(i()-r())*(o()-a)),u=J(()=>S=>S/(o()-a)*(i()-r())+r()),c=J(()=>k(l)(n())),f=De(void 0);function h(S){let A=k(u)(S-a/2);A=Math.max(r(),Math.min(i(),A)),s()!=null&&(A=Math.round(A/s())*s()),n(A)}function d(S){h(S.clientX-k(f).getBoundingClientRect().left);let A=D=>{h(D.clientX-k(f).getBoundingClientRect().left)},C=()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",A),window.addEventListener("mouseup",C)}function p(S){S.key=="ArrowLeft"?n(Math.max(n()-(s()??1),r())):S.key=="ArrowRight"&&n(Math.min(n()+(s()??1),i()))}var m=fCt();m.__mousedown=d,m.__keydown=p;let y;var b=ne(m);let v;var w=pe(b,2);let _;Z(m),za(m,S=>ae(f,S),()=>k(f)),Ne(()=>{ue(m,"aria-valuenow",n()),ue(m,"aria-valuemin",r()),ue(m,"aria-valuemax",i()),y=Nt(m,"",y,{width:`${o()??""}px`,height:"28px"}),v=Nt(b,"",v,{left:"0px",top:"12px",width:`${o()??""}px`,height:"4px"}),_=Nt(w,"",_,{left:`${k(c)??""}px`,top:"6.5px",width:"15px",height:"15px"})}),te(t,m),at()}ti(["mousedown","keydown"]);var hCt=xe('<tr><td class="first:rounded-tl-md first:rounded-bl-md"><div class="block w-4 h-4 mx-2 rounded-full"></div></td><td><div class="whitespace-nowrap nowrap max-w-72 text-ellipsis overflow-hidden"> </div></td><td class="text-slate-400 px-2 text-xs text-right last:rounded-tr-md last:rounded-br-md" title="Count"> </td></tr>'),dCt=xe("<table><tbody></tbody></table>");function pCt(t,e){ot(e,!0);let n=J(()=>{let l=new Set(e.state.selection??[]);return new Set(e.spec.items.filter(u=>l.has(u.label)))});class r extends y1{reset(){e.onStateChange({selection:void 0})}}const i=new r;function s(l,u){let c=new Set(e.state.selection??[]);u.shiftKey||u.metaKey?(c.has(l.label)?c.delete(l.label):c.add(l.label),e.onStateChange({selection:Array.from(c)})):c.has(l.label)&&c.size==1?e.onStateChange({selection:void 0}):e.onStateChange({selection:[l.label]})}Bt(()=>(Bt(()=>{let l=new Set(e.state.selection??[]),u=e.spec.items.filter(h=>l.has(h.label)),c=u.length!=0?lo(u.map(h=>h.predicate)):null,f={source:i,clients:new Set([i]),value:u.length==0?null:u,predicate:c};e.context.filter.update(f)}),()=>{e.context.filter.update({source:i,clients:new Set([i]),value:null,predicate:null})}));var o=dCt(),a=ne(o);hn(a,21,()=>e.spec.items,Pn,(l,u)=>{const c=J(()=>k(n).has(k(u))||k(n).size==0);var f=hCt();let h;f.__click=S=>{s(k(u),S)};var d=ne(f),p=ne(d);let m;Z(d);var y=pe(d),b=ne(y),v=ne(b,!0);Z(b),Z(y);var w=pe(y),_=ne(w,!0);Z(w),Z(f),Ne(S=>{h=wr(f,1,"hover:bg-slate-200 dark:hover:bg-slate-700 select-none leading-7",null,h,{"opacity-20":!k(c)}),m=Nt(p,"",m,{"background-color":k(u).color}),ue(b,"title",k(u).label),pt(v,k(u).label),pt(_,S)},[()=>k(u).count.toLocaleString()]),te(l,f)}),Z(a),Z(o),te(t,o),at()}ti(["click"]);function hAe(t){let e=0;function n(r){e+=1;try{r()}finally{e-=1}}return{set(r){n(()=>{t.set(r)})},update(r){n(()=>{t.update(r)})},subscribe(r){return t.subscribe(i=>{e==0&&r(i)})}}}async function gCt(t,e,n){if(n==null)return null;let[r]=Array.from(await t.query(Ue.describe(Ue.from(e).select(n))));if(r==null)return null;let i=h3(r.column_type);return i=="string"?await Dte(t,e,n,10):i=="number"?await Wge(t,e,n)<=10?await Dte(t,e,n,10):await mCt(t,e,n):null}async function Dte(t,e,n,r){let i=`_ev_${n}_id`,s=Array.from(await t.query(Ue.from(e).select({value:yi(_e(n),"TEXT"),count:ur()}).where(Vb(uc(yi(_e(n),"TEXT")))).groupby(yi(_e(n),"TEXT")).orderby(Zv(ur())).limit(r))),o=s.length,a=s.length+1;await t.exec(`
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${_e(i)} INTEGER DEFAULT 0;
    UPDATE ${e}
    SET ${_e(i)} = CASE ${_e(n)}::TEXT
          ${s.map(({value:p},m)=>mt`WHEN ${Ze(p)} THEN ${Ze(m)}`).join(" ")}
          ELSE (CASE WHEN ${_e(n)} IS NULL THEN ${Ze(a)} ELSE ${Ze(o)} END) END
  `);let l=Array.from(await t.query(Ue.from(e).select({index:_e(i),count:yi(ur(),"INT")}).groupby(_e(i)))),u=new Map;for(let p of l)u.set(p.index,p.count);let c=u.get(o)??0,f=u.get(a)??0,h=S2(s.length),d=s.map(({value:p},m)=>({label:p,color:h[m],predicate:ml(yi(_e(n),"TEXT"),Ze(p)),count:u.get(m)??0}));if(c>0){let{otherCategoryCount:p}=(await t.query(`
        SELECT COUNT(DISTINCT(${_e(n)}::TEXT)) AS otherCategoryCount
        FROM ${e}
        WHERE ${_e(i)} = ${Ze(o)} AND ${_e(n)} IS NOT NULL
    `)).get(0);d.push({label:`(other ${p.toLocaleString()})`,color:"#9eabc2",predicate:s.length>0?mt`${_e(n)} IS NOT NULL AND ${_e(n)}::TEXT NOT IN (${s.map(m=>Ze(m.value)).join(",")})`:mt`${_e(n)} IS NOT NULL`,count:c})}return f>0&&(c<=0&&(await t.exec(`
          UPDATE ${e}
          SET ${_e(i)} = ${_e(i)} - 1 WHERE ${_e(i)} = ${Ze(a)}
        `),a-=1),d.push({label:"(null)",color:"#aaaaaa",predicate:uc(_e(n)),count:f})),{indexColumn:i,legend:d}}async function mCt(t,e,n){let r=(await t.query(Ue.from(e).select({count:ur(),min:pc(_e(n)),max:Eu(_e(n)),mean:$8(_e(n)),median:U8(_e(n))}).where(r0(_e(n))))).get(0),i=Hge(r),s=`_ev_${n}_id`,o=yi(_e(n),"DOUBLE");o=i.scale.expr(o,i.scale.constant??0);let a=wa(r0(yi(_e(n),"DOUBLE")),ao(Xt(Yt(o,i.binStart),1/i.binSize)),Ze(null));await t.exec(`
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${_e(s)} INTEGER DEFAULT 0;
    UPDATE ${e}
    SET ${_e(s)} = ${a}
  `);let l=Array.from(await t.query(`
      SELECT ${_e(s)} AS index, COUNT(*)::INT AS count
      FROM ${e}
      GROUP BY ${_e(s)}
      ORDER BY ${_e(s)} ASC
    `)),u=null,c=null,f=new Map,h=m=>i.scale.reverse(m,i.scale.constant??0);for(let{index:m,count:y}of l)m!=null&&((u==null||m<u)&&(u=m),(c==null||m>c)&&(c=m)),f.set(m,y);let d=[],p=Lu(".6");if(u!=null&&c!=null){let m=$ge(c-u+1);for(let y=u;y<=c;y++){let b=h(y*i.binSize+i.binStart),v=h((y+1)*i.binSize+i.binStart);d.push({label:`[${p(b)}, ${p(v)})`,color:m[y-u],predicate:ml(a,Ze(y)),count:f.get(y)??0})}}if(f.has(null)){let m=d.length;await t.exec(`
        UPDATE ${e}
        SET ${_e(s)} = ${Ze(m)}
        WHERE ${_e(s)} IS NULL
      `),d.push({label:"(null / nan / inf)",color:"#aaaaaa",predicate:uc(a),count:f.get(null)??0})}return{indexColumn:s,legend:d}}function W6(t,e,n){return t+(e-t)*n}function yCt(t,e,n){let r=Math.log(t.scale),i=Math.log(e.scale);if(Math.abs(i-r)<1e-5)return{x:W6(t.x,e.x,n),y:W6(t.y,e.y,n),scale:W6(t.scale,e.scale,n)};let s=Math.exp(W6(r,i,n));return{x:(e.x*e.scale-t.x*t.scale+(t.x-e.x)*(t.scale*e.scale/s))/(e.scale-t.scale),y:(e.y*e.scale-t.y*t.scale+(t.y-e.y)*(t.scale*e.scale/s))/(e.scale-t.scale),scale:s}}async function bCt(t,e,n,r){let{stdX:i,stdY:s}=(await t.query(Ue.from(e).select({stdX:mt`STDDEV(${_e(n)})::FLOAT`,stdY:mt`STDDEV(${_e(r)})::FLOAT`}))).get(0);return 1/(Math.max(i,s,.001)*3)}const vCt=eAe(w6t),xCt=eAe(xAt);var wCt=xe('<div class="flex-none m-2 p-2 rounded-md bg-slate-100/75 dark:bg-slate-800/75 backdrop-blur-sm pointer-events-auto order-3"><!></div>'),_Ct=xe('<div class="flex flex-col gap-2 w-64"><div class="text-slate-500 dark:text-slate-400 select-none">Display Mode</div> <div class="flex gap-2 items-center"><!> <!></div> <div class="text-slate-500 dark:text-slate-400 select-none">Point Size</div> <div class="flex gap-2 items-center"><!> <!></div></div>'),SCt=xe('<div class="relative"><!> <div class="absolute top-0 left-0 right-0 flex flex-wrap justify-between items-start pointer-events-none"><!> <div class="flex-none p-2 rounded-ss-md rounded-ee-md bg-white/75 dark:bg-black/75 backdrop-blur-sm flex items-center gap-2 pointer-events-auto order-1"><!> <!></div></div></div>');function ACt(t,e){ot(e,!0);const n=()=>Ds(l,"$colorScheme",i),r=()=>Ds(u,"$columnStyles",i),[i,s]=aa(),o=Math.min(20,jut()),a=1/16;let{colorScheme:l,columnStyles:u,searchResult:c}=e.context,f=hAe(e.context.highlight),h=J(()=>e.spec.data.category),d=De(null),p=De(null),m=De(null),y=De(null);Bt(()=>{e.context.cache.value(`embedding/category/${k(h)}`,()=>gCt(e.context.coordinator,e.context.table,k(h))).then(L=>{ae(d,L),(k(d)?.legend.length??0)>o&&e.onSpecChange({mode:"points"})})}),Bt(()=>f.subscribe(R=>{R!==null&&b(R)})),Bt(()=>c.subscribe(async R=>{if(R==null||R.ids.length==0){ae(y,null);return}let L=null;R.mode=="neighbors"&&(L=R.query);let B=Array.from(await e.context.coordinator.query(Ue.from(e.context.table).select({identifier:_e(e.context.id),x:_e(e.spec.data.x),y:_e(e.spec.data.y)}).where(w0(e.context.id,R.ids.concat(L!=null?[L]:[]).map(z=>Ze(z))))));ae(y,{center:B.filter(z=>z.identifier===L)[0]??null,points:B.filter(z=>z.identifier!==L)})}));async function b(R){let B=await e.context.cache.value(`embedding/default-viewport-scale/${e.spec.data.x},${e.spec.data.y}`,()=>bCt(e.context.coordinator,e.context.table,e.spec.data.x,e.spec.data.y))*2,z=await e.context.coordinator.query(Ue.from(e.context.table).select({x:_e(e.spec.data.x),y:_e(e.spec.data.y)}).where(ml(_e(e.context.id),Ze(R)))),{x:U,y:V}=z.get(0);_({x:U,y:V,scale:B}),ae(m,[R]),ae(p,R)}let v,w=De(null);function _(R){ae(p,null);let L=k(w)??e.state.viewport;if(L==null){e.onStateChange({viewport:R});return}ae(w,L);let B=800,z=new Date().getTime(),U=()=>{let V=(new Date().getTime()-z)/B;V>1&&(V=1),ae(w,yCt(L,R,oae(V))),V<1?v=requestAnimationFrame(U):e.onStateChange({viewport:k(w)})};v&&cancelAnimationFrame(v),v=requestAnimationFrame(U)}var S={startViewportAnimation:_},A=SCt(),C=ne(A);{let R=J(()=>k(d)?.indexColumn),L=J(()=>k(d)?.legend.map(H=>H.color)),B=J(()=>({colorScheme:n(),...e.context.embeddingViewConfig,mode:e.spec.mode??"points",...e.spec.minimumDensity!=null?{minimumDensity:e.spec.minimumDensity}:{},...e.spec.pointSize!=null?{pointSize:e.spec.pointSize}:{}})),z=J(()=>Object.fromEntries(e.context.columns.map(H=>[H.name,H.name]))),U=J(()=>({class:vCt,props:{darkMode:n(),columnStyles:r(),onNearestNeighborSearch:(e.context.searchModes??[]).indexOf("neighbors")>=0?H=>e.context.search?.(H,"neighbors"):null}})),V=J(()=>({class:xCt,props:{...k(y)??{points:[],center:null}}})),W=J(()=>k(w)??e.state.viewport);S6t(C,{get width(){return e.width},get height(){return e.height},get coordinator(){return e.context.coordinator},get table(){return e.context.table},get filter(){return e.context.filter},get rangeSelection(){return e.context.filter},get identifier(){return e.context.id},get x(){return e.spec.data.x},get y(){return e.spec.data.y},get text(){return e.spec.data.text},get category(){return k(R)},get categoryColors(){return k(L)},get config(){return k(B)},get labels(){return e.context.embeddingViewLabels},get cache(){return e.context.persistentCache},get additionalFields(){return k(z)},get customTooltip(){return k(U)},get customOverlay(){return k(V)},get viewportState(){return k(W)},onViewportState:H=>e.onStateChange({viewport:H}),get rangeSelectionValue(){return e.state.brush},onRangeSelection:H=>e.onStateChange({brush:H}),get tooltip(){return k(p)},onTooltip:H=>{ae(p,H)},get selection(){return k(m)},onSelection:H=>{ae(m,H),H!=null&&H.length==1&&f.set(H[0].identifier)}})}var D=pe(C,2),T=ne(D);{var M=R=>{var L=wCt(),B=ne(L);{let z=J(()=>({items:k(d).legend})),U=J(()=>e.state.legend??{});pCt(B,{get context(){return e.context},get spec(){return k(z)},get state(){return k(U)},onSpecChange:()=>{},onStateChange:(V,W)=>{e.onStateChange({legend:V})}})}Z(L),te(R,L)};Le(T,R=>{k(d)!=null&&R(M)})}var I=pe(T,2),N=ne(I);{let R=J(()=>[{value:null,label:"(none)"},...e.context.columns.filter(L=>L.jsType=="string"||L.jsType=="number").map(L=>({value:L.name,label:`${L.name} (${L.type})`}))]);gu(N,{class:"max-w-64",label:"Color",get value(){return k(h)},onChange:L=>e.onSpecChange({data:{...e.spec.data,category:L}}),get options(){return k(R)}})}var P=pe(N,2);fAe(P,{get icon(){return fde},title:"Options",children:(R,L)=>{var B=_Ct(),z=pe(ne(B),2),U=ne(z);{let fe=J(()=>e.spec.mode??"points"),me=J(()=>k(d)!=null&&k(d).legend.length>o);gu(U,{get value(){return k(fe)},onChange:K=>e.onSpecChange({mode:K}),get disabled(){return k(me)},options:[{value:"points",label:"Points"},{value:"density",label:"Density"}]})}var V=pe(U,2);{var W=fe=>{var me=()=>Math.log((e.spec.minimumDensity??a)/a),K=de=>e.onSpecChange({minimumDensity:a*Math.exp(de)});tP(fe,{get value(){return me()},set value(de){K(de)},min:-4,max:4,step:.05})};Le(V,fe=>{(e.spec.mode??"points")=="density"&&fe(W)})}Z(z);var H=pe(z,4),Y=ne(H),se=()=>e.spec.pointSize??1,he=fe=>e.onSpecChange({pointSize:fe});tP(Y,{get value(){return se()},set value(fe){he(fe)},min:1,max:10,step:.05});var be=pe(Y,2);md(be,{label:"Auto",onClick:()=>e.onSpecChange({pointSize:void 0})}),Z(H),Z(B),te(R,B)},$$slots:{default:!0}}),Z(I),Z(D),Z(A),te(t,A);var O=at(S);return s(),O}const Eo=2,fO=4,Lq=8,cp=16,fp=32,N1=64,hO=128,kc=512,ho=1024,Ka=2048,hp=4096,Rl=8192,h0=16384,dO=32768,c1=65536,Tte=1<<17,dAe=1<<18,U2=1<<19,CCt=1<<20,I3=32768,nP=1<<21,Pq=1<<22,d0=1<<23,Fm=Symbol("$state"),pAe=Symbol("legacy props"),kCt=Symbol(""),Zy=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},Bq=3,z2=8,ECt=!1;var $q=Array.isArray,DCt=Array.prototype.indexOf,Uq=Array.from,gAe=Object.defineProperty,Nb=Object.getOwnPropertyDescriptor,mAe=Object.getOwnPropertyDescriptors,yAe=Object.prototype,TCt=Array.prototype,pO=Object.getPrototypeOf,Ote=Object.isExtensible;function OCt(t){for(var e=0;e<t.length;e++)t[e]()}function bAe(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function vAe(t){return t===this.v}function xAe(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function wAe(t){return!xAe(t,this.v)}function _Ae(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function MCt(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ICt(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function RCt(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function FCt(t){throw new Error("https://svelte.dev/e/effect_orphan")}function NCt(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function LCt(){throw new Error("https://svelte.dev/e/hydration_failed")}function PCt(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function BCt(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $Ct(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function UCt(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let l4=!1,zCt=!1;function jCt(){l4=!0}const zq=1,jq=2,SAe=4,qCt=8,VCt=16,WCt=1,HCt=2,AAe="[",gO="[!",qq="]",$v={},to=Symbol(),GCt="http://www.w3.org/1999/xhtml",YCt=[];function CAe(t,e=!1,n=!1){return YC(t,new Map,"",YCt,null,n)}function YC(t,e,n,r,i=null,s=!1){if(typeof t=="object"&&t!==null){var o=e.get(t);if(o!==void 0)return o;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if($q(t)){var a=Array(t.length);e.set(t,a),i!==null&&e.set(i,a);for(var l=0;l<t.length;l+=1){var u=t[l];l in t&&(a[l]=YC(u,e,n,r,null,s))}return a}if(pO(t)===yAe){a={},e.set(t,a),i!==null&&e.set(i,a);for(var c in t)a[c]=YC(t[c],e,n,r,null,s);return a}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return YC(t.toJSON(),e,n,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Si=null;function Uv(t){Si=t}function Sa(t){return kAe().get(t)}function lu(t,e){return kAe().set(t,e),e}function Mi(t,e=!1,n){Si={p:Si,i:!1,c:null,e:null,s:t,x:null,l:l4&&!e?{s:null,u:null,$:[]}:null}}function Ii(t){var e=Si,n=e.e;if(n!==null){e.e=null;for(var r of n)QAe(r)}return e.i=!0,Si=e.p,{}}function j2(){return!l4||Si!==null&&Si.l===null}function kAe(t){return Si===null&&_Ae(),Si.c??=new Map(XCt(Si)||void 0)}function XCt(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let hm=[];function EAe(){var t=hm;hm=[],OCt(t)}function L1(t){if(hm.length===0&&!Zw){var e=hm;queueMicrotask(()=>{e===hm&&EAe()})}hm.push(t)}function KCt(){for(;hm.length>0;)EAe()}function mO(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function QCt(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Tn=!1;function Cd(t){Tn=t}let ir;function $a(t){if(t===null)throw mO(),$v;return ir=t}function u4(){return $a(Eh(ir))}function rr(t){if(Tn){if(Eh(ir)!==null)throw mO(),$v;ir=t}}function JCt(t=1){if(Tn){for(var e=t,n=ir;e--;)n=Eh(n);ir=n}}function l8(t=!0){for(var e=0,n=ir;;){if(n.nodeType===z2){var r=n.data;if(r===qq){if(e===0)return n;e-=1}else(r===AAe||r===gO)&&(e+=1)}var i=Eh(n);t&&n.remove(),n=i}}function DAe(t){if(!t||t.nodeType!==z2)throw mO(),$v;return t.data}function po(t){if(typeof t!="object"||t===null||Fm in t)return t;const e=pO(t);if(e!==yAe&&e!==TCt)return t;var n=new Map,r=$q(t),i=nt(0),s=Lm,o=a=>{if(Lm===s)return a();var l=Un,u=Lm;Pa(null),Nte(s);var c=a();return Pa(l),Nte(u),c};return r&&n.set("length",nt(t.length)),new Proxy(t,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&PCt();var c=n.get(l);return c===void 0?c=o(()=>{var f=nt(u.value);return n.set(l,f),f}):Oe(c,u.value,!0),!0},deleteProperty(a,l){var u=n.get(l);if(u===void 0){if(l in a){const c=o(()=>nt(to));n.set(l,c),e_(i)}}else Oe(u,to),e_(i);return!0},get(a,l,u){if(l===Fm)return t;var c=n.get(l),f=l in a;if(c===void 0&&(!f||Nb(a,l)?.writable)&&(c=o(()=>{var d=po(f?a[l]:to),p=nt(d);return p}),n.set(l,c)),c!==void 0){var h=G(c);return h===to?void 0:h}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var c=n.get(l);c&&(u.value=G(c))}else if(u===void 0){var f=n.get(l),h=f?.v;if(f!==void 0&&h!==to)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(a,l){if(l===Fm)return!0;var u=n.get(l),c=u!==void 0&&u.v!==to||Reflect.has(a,l);if(u!==void 0||qn!==null&&(!c||Nb(a,l)?.writable)){u===void 0&&(u=o(()=>{var h=c?po(a[l]):to,d=nt(h);return d}),n.set(l,u));var f=G(u);if(f===to)return!1}return c},set(a,l,u,c){var f=n.get(l),h=l in a;if(r&&l==="length")for(var d=u;d<f.v;d+=1){var p=n.get(d+"");p!==void 0?Oe(p,to):d in a&&(p=o(()=>nt(to)),n.set(d+"",p))}if(f===void 0)(!h||Nb(a,l)?.writable)&&(f=o(()=>nt(void 0)),Oe(f,po(u)),n.set(l,f));else{h=f.v!==to;var m=o(()=>po(u));Oe(f,m)}var y=Reflect.getOwnPropertyDescriptor(a,l);if(y?.set&&y.set.call(c,u),!h){if(r&&typeof l=="string"){var b=n.get("length"),v=Number(l);Number.isInteger(v)&&v>=b.v&&Oe(b,v+1)}e_(i)}return!0},ownKeys(a){G(i);var l=Reflect.ownKeys(a).filter(f=>{var h=n.get(f);return h===void 0||h.v!==to});for(var[u,c]of n)c.v!==to&&!(u in a)&&l.push(u);return l},setPrototypeOf(){BCt()}})}var rP,TAe,OAe,MAe;function iP(){if(rP===void 0){rP=window,TAe=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;OAe=Nb(e,"firstChild").get,MAe=Nb(e,"nextSibling").get,Ote(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ote(n)&&(n.__t=void 0)}}function lh(t=""){return document.createTextNode(t)}function f1(t){return OAe.call(t)}function Eh(t){return MAe.call(t)}function cr(t,e){if(!Tn)return f1(t);var n=f1(ir);if(n===null)n=ir.appendChild(lh());else if(e&&n.nodeType!==Bq){var r=lh();return n?.before(r),$a(r),r}return $a(n),n}function _l(t,e=!1){if(!Tn){var n=f1(t);return n instanceof Comment&&n.data===""?Eh(n):n}if(e&&ir?.nodeType!==Bq){var r=lh();return ir?.before(r),$a(r),r}return ir}function _u(t,e=1,n=!1){let r=Tn?ir:t;for(var i;e--;)i=r,r=Eh(r);if(!Tn)return r;if(n&&r?.nodeType!==Bq){var s=lh();return r===null?i?.after(s):r.before(s),$a(s),s}return $a(r),r}function IAe(t){t.textContent=""}function ZCt(){return!1}function RAe(t){var e=qn;if(e===null)return Un.f|=d0,t;if((e.f&dO)===0){if((e.f&hO)===0)throw t;e.b.error(t)}else zv(t,e)}function zv(t,e){for(;e!==null;){if((e.f&hO)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const H6=new Set;let is=null,Sl=null,Sf=[],yO=null,sP=!1,Zw=!1;class Nf{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){Sf=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#u(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(is=null,Mte(n.render_effects),Mte(n.effects),this.#l?.resolve()),Sl=null}#s(e,n){e.f^=ho;for(var r=e.first;r!==null;){var i=r.f,s=(i&(fp|N1))!==0,o=s&&(i&ho)!==0,a=o||(i&Rl)!==0||this.skipped_effects.has(r);if((r.f&hO)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){s?r.f^=ho:(i&fO)!==0?n.effects.push(r):c4(r)&&((r.f&cp)!==0&&n.block_effects.push(r),F3(r));var l=r.first;if(l!==null){r=l;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(e){for(const n of e)((n.f&Ka)!==0?this.#a:this.#i).push(n),vo(n,ho)}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&d0)===0&&(this.current.set(e,e.v),Sl?.set(e,e.v))}activate(){is=this,this.apply()}deactivate(){is=null,Sl=null}flush(){if(this.activate(),Sf.length>0){if(FAe(),is!==null&&is!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#c()}#c(){if(H6.size>1){this.previous.clear();var e=Sl,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of H6){if(i===this){n=!1;continue}const s=[];for(const[a,l]of this.current){if(i.current.has(a))if(n&&l!==i.current.get(a))i.current.set(a,l);else continue;s.push(a)}if(s.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){const a=new Set,l=new Map;for(const u of s)NAe(u,o,a,l);if(Sf.length>0){is=i,i.apply();for(const u of Sf)i.#s(u,r);Sf=[],i.deactivate()}}}is=null,Sl=e}this.committed=!0,H6.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#a)vo(e,Ka),h1(e);for(const e of this.#i)vo(e,hp),h1(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=bAe()).promise}static ensure(){if(is===null){const e=is=new Nf;H6.add(is),Zw||Nf.enqueue(()=>{is===e&&e.flush()})}return is}static enqueue(e){L1(e)}apply(){}}function ekt(t){var e=Zw;Zw=!0;try{for(var n;;){if(KCt(),Sf.length===0&&(is?.flush(),Sf.length===0))return yO=null,n;FAe()}}finally{Zw=e}}function FAe(){var t=Nm;sP=!0;try{var e=0;for(Rte(!0);Sf.length>0;){var n=Nf.ensure();if(e++>1e3){var r,i;tkt()}n.process(Sf),p0.clear()}}finally{sP=!1,Rte(t),yO=null}}function tkt(){try{NCt()}catch(t){zv(t,yO)}}let rd=null;function Mte(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(h0|Rl))===0&&c4(r)&&(rd=new Set,F3(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?e6e(r):r.fn=null),rd?.size>0)){p0.clear();for(const i of rd){if((i.f&(h0|Rl))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)rd.has(o)&&(rd.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(h0|Rl))===0&&F3(l)}}rd.clear()}}rd=null}}function NAe(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Eo)!==0?NAe(i,e,n,r):(s&(Pq|cp))!==0&&(s&Ka)===0&&LAe(i,e,r)&&(vo(i,Ka),h1(i))}}function LAe(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Eo)!==0&&LAe(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function h1(t){for(var e=yO=t;e.parent!==null;){e=e.parent;var n=e.f;if(sP&&e===qn&&(n&cp)!==0&&(n&dAe)===0)return;if((n&(N1|fp))!==0){if((n&ho)===0)return;e.f^=ho}}Sf.push(e)}function nkt(t){let e=0,n=d1(0),r;return()=>{vO()&&(G(n),Hq(()=>(e===0&&(r=f4(()=>t(()=>e_(n)))),e+=1,()=>{L1(()=>{e-=1,e===0&&(r?.(),r=void 0,e_(n))})})))}}var rkt=c1|U2|hO;function ikt(t,e,n){new skt(t,e,n)}class skt{parent;#e=!1;#t;#n=Tn?ir:null;#r;#l;#a;#i=null;#s=null;#o=null;#u=null;#c=null;#d=0;#f=0;#p=!1;#h=null;#y=nkt(()=>(this.#h=d1(this.#d),()=>{this.#h=null}));constructor(e,n,r){this.#t=e,this.#r=n,this.#l=r,this.parent=qn.b,this.#e=!!this.#r.pending,this.#a=d4(()=>{if(qn.b=this,Tn){const s=this.#n;u4(),s.nodeType===z2&&s.data===gO?this.#v():this.#b()}else{var i=this.#x();try{this.#i=ec(()=>r(i))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},rkt),Tn&&(this.#t=ir)}#b(){try{this.#i=ec(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#v(){const e=this.#r.pending;e&&(this.#s=ec(()=>e(this.#t)),Nf.enqueue(()=>{var n=this.#x();this.#i=this.#g(()=>(Nf.ensure(),ec(()=>this.#l(n)))),this.#f>0?this.#m():(Lb(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#x(){var e=this.#t;return this.#e&&(this.#c=lh(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#g(e){var n=qn,r=Un,i=Si;uh(this.#a),Pa(this.#a),Uv(this.#a.ctx);try{return e()}catch(s){return RAe(s),null}finally{uh(n),Pa(r),Uv(i)}}#m(){const e=this.#r.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),r6e(this.#i,this.#u)),this.#s===null&&(this.#s=ec(()=>e(this.#t)))}#w(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(e);return}this.#f+=e,this.#f===0&&(this.#e=!1,this.#s&&Lb(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#w(e),this.#d+=e,this.#h&&jv(this.#h,this.#d)}get_effect_pending(){return this.#y(),G(this.#h)}error(e){var n=this.#r.onerror;let r=this.#r.failed;if(this.#p||!n&&!r)throw e;this.#i&&(na(this.#i),this.#i=null),this.#s&&(na(this.#s),this.#s=null),this.#o&&(na(this.#o),this.#o=null),Tn&&($a(this.#n),JCt(),$a(l8()));var i=!1,s=!1;const o=()=>{if(i){QCt();return}i=!0,s&&UCt(),Nf.ensure(),this.#d=0,this.#o!==null&&Lb(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#g(()=>(this.#p=!1,ec(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var a=Un;try{Pa(null),s=!0,n?.(e,o),s=!1}catch(l){zv(l,this.#a&&this.#a.parent)}finally{Pa(a)}r&&L1(()=>{this.#o=this.#g(()=>{Nf.ensure(),this.#p=!0;try{return ec(()=>{r(this.#t,()=>e,()=>o)})}catch(l){return zv(l,this.#a.parent),null}finally{this.#p=!1}})})}}function okt(t,e,n,r){const i=j2()?bO:PAe;if(n.length===0&&t.length===0){r(e.map(i));return}var s=is,o=qn,a=akt();function l(){Promise.all(n.map(u=>lkt(u))).then(u=>{a();try{r([...e.map(i),...u])}catch(c){(o.f&h0)===0&&zv(c,o)}s?.deactivate(),u8()}).catch(u=>{zv(u,o)})}t.length>0?Promise.all(t).then(()=>{a();try{return l()}finally{s?.deactivate(),u8()}}):l()}function akt(){var t=qn,e=Un,n=Si,r=is;return function(i=!0){uh(t),Pa(e),Uv(n),i&&r?.activate()}}function u8(){uh(null),Pa(null),Uv(null)}function bO(t){var e=Eo|Ka,n=Un!==null&&(Un.f&Eo)!==0?Un:null;return qn!==null&&(qn.f|=U2),{ctx:Si,deps:null,effects:null,equals:vAe,f:e,fn:t,reactions:null,rv:0,v:to,wv:0,parent:n??qn,ac:null}}function lkt(t,e){let n=qn;n===null&&MCt();var r=n.b,i=void 0,s=d1(to),o=!Un,a=new Map;return vkt(()=>{var l=bAe();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{u===is&&u.committed&&u.deactivate(),u8()})}catch(h){l.reject(h),u8()}var u=is;if(o){var c=!r.is_pending();r.update_pending_count(1),u.increment(c),a.get(u)?.reject(Zy),a.delete(u),a.set(u,l)}const f=(h,d=void 0)=>{if(u.activate(),d)d!==Zy&&(s.f|=d0,jv(s,d));else{(s.f&d0)!==0&&(s.f^=d0),jv(s,h);for(const[p,m]of a){if(a.delete(p),p===u)break;m.reject(Zy)}}o&&(r.update_pending_count(-1),u.decrement(c))};l.promise.then(f,h=>f(null,h||"unknown"))}),KAe(()=>{for(const l of a.values())l.reject(Zy)}),new Promise(l=>{function u(c){function f(){c===i?l(s):u(i)}c.then(f,f)}u(i)})}function Pe(t){const e=bO(t);return qAe(e),e}function PAe(t){const e=bO(t);return e.equals=wAe,e}function BAe(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)na(e[n])}}function ukt(t){for(var e=t.parent;e!==null;){if((e.f&Eo)===0)return e;e=e.parent}return null}function Vq(t){var e,n=qn;uh(ukt(t));try{t.f&=~I3,BAe(t),e=GAe(t)}finally{uh(n)}return e}function $Ae(t){var e=Vq(t);if(t.equals(e)||(t.v=e,t.wv=WAe()),!P1)if(Sl!==null)vO()&&Sl.set(t,t.v);else{var n=(t.f&kc)===0?hp:ho;vo(t,n)}}let oP=new Set;const p0=new Map;let UAe=!1;function d1(t,e){var n={f:0,v:t,reactions:null,equals:vAe,rv:0,wv:0};return n}function nt(t,e){const n=d1(t);return qAe(n),n}function zAe(t,e=!1,n=!0){const r=d1(t);return e||(r.equals=wAe),l4&&n&&Si!==null&&Si.l!==null&&(Si.l.s??=[]).push(r),r}function Oe(t,e,n=!1){Un!==null&&(!Lf||(Un.f&Tte)!==0)&&j2()&&(Un.f&(Eo|cp|Pq|Tte))!==0&&!Ld?.includes(t)&&$Ct();let r=n?po(e):e;return jv(t,r)}function jv(t,e){if(!t.equals(e)){var n=t.v;P1?p0.set(t,e):p0.set(t,n),t.v=e;var r=Nf.ensure();r.capture(t,n),(t.f&Eo)!==0&&((t.f&Ka)!==0&&Vq(t),vo(t,(t.f&kc)!==0?ho:hp)),t.wv=WAe(),jAe(t,Ka),j2()&&qn!==null&&(qn.f&ho)!==0&&(qn.f&(fp|N1))===0&&(iu===null?hkt([t]):iu.push(t)),!r.is_fork&&oP.size>0&&!UAe&&ckt()}return e}function ckt(){UAe=!1;const t=Array.from(oP);for(const e of t)(e.f&ho)!==0&&vo(e,hp),c4(e)&&F3(e);oP.clear()}function e_(t){Oe(t,t.v+1)}function jAe(t,e){var n=t.reactions;if(n!==null)for(var r=j2(),i=n.length,s=0;s<i;s++){var o=n[s],a=o.f;if(!(!r&&o===qn)){var l=(a&Ka)===0;if(l&&vo(o,e),(a&Eo)!==0){var u=o;Sl?.delete(u),(a&I3)===0&&(a&kc&&(o.f|=I3),jAe(u,hp))}else l&&((a&cp)!==0&&rd!==null&&rd.add(o),h1(o))}}}let Ite=!1;function fkt(){Ite||(Ite=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Wq(t){var e=Un,n=qn;Pa(null),uh(null);try{return t()}finally{Pa(e),uh(n)}}let Nm=!1;function Rte(t){Nm=t}let P1=!1;function Fte(t){P1=t}let Un=null,Lf=!1;function Pa(t){Un=t}let qn=null;function uh(t){qn=t}let Ld=null;function qAe(t){Un!==null&&(Ld===null?Ld=[t]:Ld.push(t))}let Bo=null,hl=0,iu=null;function hkt(t){iu=t}let VAe=1,R3=0,Lm=R3;function Nte(t){Lm=t}function WAe(){return++VAe}function c4(t){var e=t.f;if((e&Ka)!==0)return!0;if(e&Eo&&(t.f&=~I3),(e&hp)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(c4(s)&&$Ae(s),s.wv>t.wv)return!0}(e&kc)!==0&&Sl===null&&vo(t,ho)}return!1}function HAe(t,e,n=!0){var r=t.reactions;if(r!==null&&!Ld?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Eo)!==0?HAe(s,e,!1):e===s&&(n?vo(s,Ka):(s.f&ho)!==0&&vo(s,hp),h1(s))}}function GAe(t){var e=Bo,n=hl,r=iu,i=Un,s=Ld,o=Si,a=Lf,l=Lm,u=t.f;Bo=null,hl=0,iu=null,Un=(u&(fp|N1))===0?t:null,Ld=null,Uv(t.ctx),Lf=!1,Lm=++R3,t.ac!==null&&(Wq(()=>{t.ac.abort(Zy)}),t.ac=null);try{t.f|=nP;var c=t.fn,f=c(),h=t.deps;if(Bo!==null){var d;if(c8(t,hl),h!==null&&hl>0)for(h.length=hl+Bo.length,d=0;d<Bo.length;d++)h[hl+d]=Bo[d];else t.deps=h=Bo;if(Nm&&vO()&&(t.f&kc)!==0)for(d=hl;d<h.length;d++)(h[d].reactions??=[]).push(t)}else h!==null&&hl<h.length&&(c8(t,hl),h.length=hl);if(j2()&&iu!==null&&!Lf&&h!==null&&(t.f&(Eo|hp|Ka))===0)for(d=0;d<iu.length;d++)HAe(iu[d],t);return i!==null&&i!==t&&(R3++,iu!==null&&(r===null?r=iu:r.push(...iu))),(t.f&d0)!==0&&(t.f^=d0),f}catch(p){return RAe(p)}finally{t.f^=nP,Bo=e,hl=n,iu=r,Un=i,Ld=s,Uv(o),Lf=a,Lm=l}}function dkt(t,e){let n=e.reactions;if(n!==null){var r=DCt.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Eo)!==0&&(Bo===null||!Bo.includes(e))&&(vo(e,hp),(e.f&kc)!==0&&(e.f^=kc,e.f&=~I3),BAe(e),c8(e,0))}function c8(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)dkt(t,n[r])}function F3(t){var e=t.f;if((e&h0)===0){vo(t,ho);var n=qn,r=Nm;qn=t,Nm=!0;try{(e&cp)!==0?xkt(t):ZAe(t),JAe(t);var i=GAe(t);t.teardown=typeof i=="function"?i:null,t.wv=VAe;var s;ECt&&zCt&&(t.f&Ka)!==0&&t.deps}finally{Nm=r,qn=n}}}function G(t){var e=t.f,n=(e&Eo)!==0;if(Un!==null&&!Lf){var r=qn!==null&&(qn.f&h0)!==0;if(!r&&!Ld?.includes(t)){var i=Un.deps;if((Un.f&nP)!==0)t.rv<R3&&(t.rv=R3,Bo===null&&i!==null&&i[hl]===t?hl++:Bo===null?Bo=[t]:Bo.includes(t)||Bo.push(t));else{(Un.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[Un]:s.includes(Un)||s.push(Un)}}}if(P1){if(p0.has(t))return p0.get(t);if(n){var o=t,a=o.v;return((o.f&ho)===0&&o.reactions!==null||XAe(o))&&(a=Vq(o)),p0.set(o,a),a}}else if(n){if(o=t,Sl?.has(o))return Sl.get(o);c4(o)&&$Ae(o),Nm&&vO()&&(o.f&kc)===0&&YAe(o)}else if(Sl?.has(t))return Sl.get(t);if((t.f&d0)!==0)throw t.v;return t.v}function YAe(t){if(t.deps!==null){t.f^=kc;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Eo)!==0&&(e.f&kc)===0&&YAe(e)}}function XAe(t){if(t.v===to)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(p0.has(e)||(e.f&Eo)!==0&&XAe(e))return!0;return!1}function f4(t){var e=Lf;try{return Lf=!0,t()}finally{Lf=e}}const pkt=-7169;function vo(t,e){t.f=t.f&pkt|e}function gkt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Fm in t)aP(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Fm in n&&aP(n)}}}function aP(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{aP(t[r],e)}catch{}const n=pO(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=mAe(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function mkt(t){qn===null&&(Un===null&&FCt(),RCt()),P1&&ICt()}function ykt(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function dp(t,e,n,r=!0){var i=qn;i!==null&&(i.f&Rl)!==0&&(t|=Rl);var s={ctx:Si,deps:null,nodes_start:null,nodes_end:null,f:t|Ka|kc,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{F3(s),s.f|=dO}catch(l){throw na(s),l}else e!==null&&h1(s);if(r){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&U2)===0&&(o=o.first,(t&cp)!==0&&(t&c1)!==0&&o!==null&&(o.f|=c1)),o!==null&&(o.parent=i,i!==null&&ykt(o,i),Un!==null&&(Un.f&Eo)!==0&&(t&N1)===0)){var a=Un;(a.effects??=[]).push(o)}}return s}function vO(){return Un!==null&&!Lf}function KAe(t){const e=dp(Lq,null,!1);return vo(e,ho),e.teardown=t,e}function pi(t){mkt();var e=qn.f,n=!Un&&(e&fp)!==0&&(e&dO)===0;if(n){var r=Si;(r.e??=[]).push(t)}else return QAe(t)}function QAe(t){return dp(fO|CCt,t,!1)}function bkt(t){Nf.ensure();const e=dp(N1|U2,t,!0);return(n={})=>new Promise(r=>{n.outro?Lb(e,()=>{na(e),r(void 0)}):(na(e),r(void 0))})}function h4(t){return dp(fO,t,!1)}function vkt(t){return dp(Pq|U2,t,!0)}function Hq(t,e=0){return dp(Lq|e,t,!0)}function ji(t,e=[],n=[],r=[],i=!1){okt(r,e,n,s=>{dp(i?fO:Lq,()=>t(...s.map(G)),!0)})}function d4(t,e=0){var n=dp(cp|e,t,!0);return n}function ec(t,e=!0){return dp(fp|U2,t,!0,e)}function JAe(t){var e=t.teardown;if(e!==null){const n=P1,r=Un;Fte(!0),Pa(null);try{e.call(null)}finally{Fte(n),Pa(r)}}}function ZAe(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&Wq(()=>{i.abort(Zy)});var r=n.next;(n.f&N1)!==0?n.parent=null:na(n,e),n=r}}function xkt(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&fp)===0&&na(e),e=n}}function na(t,e=!0){var n=!1;(e||(t.f&dAe)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(wkt(t.nodes_start,t.nodes_end),n=!0),ZAe(t,e&&!n),c8(t,0),vo(t,h0);var r=t.transitions;if(r!==null)for(const s of r)s.stop();JAe(t);var i=t.parent;i!==null&&i.first!==null&&e6e(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function wkt(t,e){for(;t!==null;){var n=t===e?null:Eh(t);t.remove(),t=n}}function e6e(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Lb(t,e,n=!0){var r=[];Gq(t,r,!0),t6e(r,()=>{n&&na(t),e&&e()})}function t6e(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function Gq(t,e,n){if((t.f&Rl)===0){if(t.f^=Rl,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&c1)!==0||(r.f&fp)!==0&&(t.f&cp)!==0;Gq(r,e,s?n:!1),r=i}}}function Yq(t){n6e(t,!0)}function n6e(t,e){if((t.f&Rl)!==0){t.f^=Rl,(t.f&ho)===0&&(vo(t,Ka),h1(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&c1)!==0||(n.f&fp)!==0;n6e(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function r6e(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Eh(n);e.append(n),n=i}}const i6e=new Set,lP=new Set;function _kt(t){if(!Tn)return;t.removeAttribute("onload"),t.removeAttribute("onerror");const e=t.__e;e!==void 0&&(t.__e=void 0,queueMicrotask(()=>{t.isConnected&&t.dispatchEvent(e)}))}function Skt(t,e,n,r={}){function i(s){if(r.capture||ww.call(e,s),!s.cancelBubble)return Wq(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?L1(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function qv(t,e,n,r,i){var s={capture:r,passive:i},o=Skt(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&KAe(()=>{e.removeEventListener(t,o,s)})}function pp(t){for(var e=0;e<t.length;e++)i6e.add(t[e]);for(var n of lP)n(t)}let Lte=null;function ww(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Lte=t;var o=0,a=Lte===t&&t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(s=i[o]||t.target,s!==e){gAe(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=Un,f=qn;Pa(null),uh(null);try{for(var h,d=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];m!=null&&(!s.disabled||t.target===s)&&m.call(s,t)}catch(y){h?d.push(y):h=y}if(t.cancelBubble||p===e||p===null)break;s=p}if(h){for(let y of d)queueMicrotask(()=>{throw y});throw h}}finally{t.__root=e,delete t.currentTarget,Pa(c),uh(f)}}}function Akt(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Pb(t,e){var n=qn;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Zn(t,e){var n=(e&WCt)!==0,r=(e&HCt)!==0,i,s=!t.startsWith("<!>");return()=>{if(Tn)return Pb(ir,null),ir;i===void 0&&(i=Akt(s?t:"<!>"+t),n||(i=f1(i)));var o=r||TAe?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=f1(o),l=o.lastChild;Pb(a,l)}else Pb(o,o);return o}}function qg(){if(Tn)return Pb(ir,null),ir;var t=document.createDocumentFragment(),e=document.createComment(""),n=lh();return t.append(e,n),Pb(e,n),t}function gn(t,e){if(Tn){var n=qn;((n.f&dO)===0||n.nodes_end===null)&&(n.nodes_end=ir),u4();return}t!==null&&t.before(e)}const Ckt=["touchstart","touchmove"];function kkt(t){return Ckt.includes(t)}function Dh(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function s6e(t,e){return o6e(t,e)}function Ekt(t,e){iP(),e.intro=e.intro??!1;const n=e.target,r=Tn,i=ir;try{for(var s=f1(n);s&&(s.nodeType!==z2||s.data!==AAe);)s=Eh(s);if(!s)throw $v;Cd(!0),$a(s);const o=o6e(t,{...e,anchor:s});return Cd(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==$v&&console.warn("Failed to hydrate: ",o),e.recover===!1&&LCt(),iP(),IAe(n),Cd(!1),s6e(t,e)}finally{Cd(r),$a(i)}}const by=new Map;function o6e(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){iP();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var d=f[h];if(!a.has(d)){a.add(d);var p=kkt(d);e.addEventListener(d,ww,{passive:p});var m=by.get(d);m===void 0?(document.addEventListener(d,ww,{passive:p}),by.set(d,1)):by.set(d,m+1)}}};l(Uq(i6e)),lP.add(l);var u=void 0,c=bkt(()=>{var f=n??e.appendChild(lh());return ikt(f,{pending:()=>{}},h=>{if(s){Mi({});var d=Si;d.c=s}if(i&&(r.$$events=i),Tn&&Pb(h,null),u=t(h,r)||{},Tn&&(qn.nodes_end=ir,ir===null||ir.nodeType!==z2||ir.data!==qq))throw mO(),$v;s&&Ii()}),()=>{for(var h of a){e.removeEventListener(h,ww);var d=by.get(h);--d===0?(document.removeEventListener(h,ww),by.delete(h)):by.set(h,d)}lP.delete(l),f!==n&&f.parentNode?.removeChild(f)}});return uP.set(u,c),u}let uP=new WeakMap;function Dkt(t,e){const n=uP.get(t);return n?(uP.delete(t),n(e)):Promise.resolve()}function Tkt(t){return new Okt(t)}class Okt{#e;#t;constructor(e){var n=new Map,r=(s,o)=>{var a=zAe(o,!1,!1);return n.set(s,a),a};const i=new Proxy({...e.props||{},$$events:{}},{get(s,o){return G(n.get(o)??r(o,Reflect.get(s,o)))},has(s,o){return o===pAe?!0:(G(n.get(o)??r(o,Reflect.get(s,o))),Reflect.has(s,o))},set(s,o,a){return Oe(n.get(o)??r(o,a),a),Reflect.set(s,o,a)}});this.#t=(e.hydrate?Ekt:s6e)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&ekt(),this.#e=i.$$events;for(const s of Object.keys(this.#t))s==="$set"||s==="$destroy"||s==="$on"||gAe(this,s,{get(){return this.#t[s]},set(o){this.#t[s]=o},enumerable:!0});this.#t.$set=s=>{Object.assign(i,s)},this.#t.$destroy=()=>{Dkt(this.#t)}}$set(e){this.#t.$set(e)}$on(e,n){this.#e[e]=this.#e[e]||[];const r=(...i)=>n.call(this,...i);return this.#e[e].push(r),()=>{this.#e[e]=this.#e[e].filter(i=>i!==r)}}$destroy(){this.#t.$destroy()}}const Mkt="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mkt);class Xq{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(e,n=!0){this.anchor=e,this.#r=n}#l=()=>{var e=is;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)Yq(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(o);a&&(na(a.effect),this.#n.delete(o))}for(const[s,o]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var l=document.createDocumentFragment();r6e(o,l),l.append(lh()),this.#n.set(s,{effect:o,fragment:l})}else na(o);this.#t.delete(s)};this.#r||!r?Lb(o,a,!1):a()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#n)n.includes(r)||(na(i.effect),this.#n.delete(r))};ensure(e,n){var r=is,i=ZCt();n&&!this.#t.has(e)&&!this.#n.has(e)&&this.#t.set(e,ec(()=>n(this.anchor))),this.#e.set(r,e),i||(Tn&&(this.anchor=ir),this.#l())}}function Kq(t,e,...n){var r=new Xq(t);d4(()=>{const i=e()??null;r.ensure(i,i&&(s=>i(s,...n)))},c1)}function q2(t){Si===null&&_Ae(),l4&&Si.l!==null?Ikt(Si).m.push(t):pi(()=>{const e=f4(t);if(typeof e=="function")return e})}function Ikt(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}function Aa(t,e,n=!1){Tn&&u4();var r=new Xq(t),i=n?c1:0;function s(o,a){if(Tn){const u=DAe(t)===gO;if(o===u){var l=l8();$a(l),r.anchor=l,Cd(!1),r.ensure(o,a),Cd(!0);return}}r.ensure(o,a)}d4(()=>{var o=!1;e((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},i)}function Rkt(t,e,n){Tn&&u4();var r=new Xq(t),i=!j2();d4(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}function Fkt(t,e){return e}function Nkt(t,e,n){for(var r=t.items,i=[],s=e.length,o=0;o<s;o++)Gq(e[o].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;IAe(l),l.append(n),r.clear(),lf(t,e[0].prev,e[s-1].next)}t6e(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(r.delete(c.k),lf(t,c.prev,c.next)),na(c.e,!a)}})}function t_(t,e,n,r,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&SAe)!==0;if(l){var u=t;o=Tn?$a(f1(u)):u.appendChild(lh())}Tn&&u4();var c=null,f=!1,h=new Map,d=PAe(()=>{var b=n();return $q(b)?b:b==null?[]:Uq(b)}),p,m;function y(){Lkt(m,p,a,h,o,i,e,r,n),s!==null&&(p.length===0?c?Yq(c):c=ec(()=>s(o)):c!==null&&Lb(c,()=>{c=null}))}d4(()=>{m??=qn,p=G(d);var b=p.length;if(f&&b===0)return;f=b===0;let v=!1;if(Tn){var w=DAe(o)===gO;w!==(b===0)&&(o=l8(),$a(o),Cd(!1),v=!0)}if(Tn){for(var _=null,S,A=0;A<b;A++){if(ir.nodeType===z2&&ir.data===qq){o=ir,v=!0,Cd(!1);break}var C=p[A],D=r(C,A);S=a6e(ir,a,_,null,C,D,A,i,e,n),a.items.set(D,S),_=S}b>0&&$a(l8())}Tn?b===0&&s&&(c=ec(()=>s(o))):y(),v&&Cd(!0),G(d)}),Tn&&(o=ir)}function Lkt(t,e,n,r,i,s,o,a,l){var u=(o&qCt)!==0,c=(o&(zq|jq))!==0,f=e.length,h=n.items,d=n.first,p=d,m,y=null,b,v=[],w=[],_,S,A,C;if(u)for(C=0;C<f;C+=1)_=e[C],S=a(_,C),A=h.get(S),A!==void 0&&(A.a?.measure(),(b??=new Set).add(A));for(C=0;C<f;C+=1){if(_=e[C],S=a(_,C),A=h.get(S),A===void 0){var D=r.get(S);if(D!==void 0){r.delete(S),h.set(S,D);var T=y?y.next:p;lf(n,y,D),lf(n,D,T),kI(D,T,i),y=D}else{var M=p?p.e.nodes_start:i;y=a6e(M,n,y,y===null?n.first:y.next,_,S,C,s,o,l)}h.set(S,y),v=[],w=[],p=y.next;continue}if(c&&Pkt(A,_,C,o),(A.e.f&Rl)!==0&&(Yq(A.e),u&&(A.a?.unfix(),(b??=new Set).delete(A))),A!==p){if(m!==void 0&&m.has(A)){if(v.length<w.length){var I=w[0],N;y=I.prev;var P=v[0],O=v[v.length-1];for(N=0;N<v.length;N+=1)kI(v[N],I,i);for(N=0;N<w.length;N+=1)m.delete(w[N]);lf(n,P.prev,O.next),lf(n,y,P),lf(n,O,I),p=I,y=O,C-=1,v=[],w=[]}else m.delete(A),kI(A,p,i),lf(n,A.prev,A.next),lf(n,A,y===null?n.first:y.next),lf(n,y,A),y=A;continue}for(v=[],w=[];p!==null&&p.k!==S;)(p.e.f&Rl)===0&&(m??=new Set).add(p),w.push(p),p=p.next;if(p===null)continue;A=p}v.push(A),y=A,p=A.next}if(p!==null||m!==void 0){for(var R=m===void 0?[]:Uq(m);p!==null;)(p.e.f&Rl)===0&&R.push(p),p=p.next;var L=R.length;if(L>0){var B=(o&SAe)!==0&&f===0?i:null;if(u){for(C=0;C<L;C+=1)R[C].a?.measure();for(C=0;C<L;C+=1)R[C].a?.fix()}Nkt(n,R,B)}}u&&L1(()=>{if(b!==void 0)for(A of b)A.a?.apply()}),t.first=n.first&&n.first.e,t.last=y&&y.e;for(var z of r.values())na(z.e);r.clear()}function Pkt(t,e,n,r){(r&zq)!==0&&jv(t.v,e),(r&jq)!==0?jv(t.i,n):t.i=n}function a6e(t,e,n,r,i,s,o,a,l,u,c){var f=(l&zq)!==0,h=(l&VCt)===0,d=f?h?zAe(i,!1,!1):d1(i):i,p=(l&jq)===0?o:d1(o),m={i:p,v:d,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var y=document.createDocumentFragment();y.append(t=lh())}return m.e=ec(()=>a(t,d,p,u),Tn),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?c||(e.first=m):(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function kI(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var o=Eh(s);i.before(s),s=o}}function lf(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ri(t,e){h4(()=>{var n=t.getRootNode(),r=n.host?n:n.head??n.ownerDocument.head;if(!r.querySelector("#"+e.hash)){const i=document.createElement("style");i.id=e.hash,i.textContent=e.code,r.appendChild(i)}})}function Qq(t,e,n){h4(()=>{var r=f4(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};Hq(()=>{var o=n();gkt(o),i&&xAe(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function Bkt(t,e,n){var r=t==null?"":""+t;return e&&(r=r?r+" "+e:e),r===""?null:r}function Pte(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var s=t[i];s!=null&&s!==""&&(r+=" "+i+": "+s+n)}return r}function $kt(t,e){if(e){var n="",r,i;return Array.isArray(e)?(r=e[0],i=e[1]):r=e,r&&(n+=Pte(r)),i&&(n+=Pte(i,!0)),n=n.trim(),n===""?null:n}return String(t)}function G0(t,e,n,r,i,s){var o=t.__className;if(Tn||o!==n||o===void 0){var a=Bkt(n,r);(!Tn||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):t.className=a),t.__className=n}return s}function EI(t,e={},n,r){for(var i in n){var s=n[i];e[i]!==s&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,s,r))}}function Qa(t,e,n,r){var i=t.__style;if(Tn||i!==e){var s=$kt(e,r);(!Tn||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else r&&(Array.isArray(r)?(EI(t,n?.[0],r[0]),EI(t,n?.[1],r[1],"important")):EI(t,n,r));return r}const Ukt=Symbol("is custom element"),zkt=Symbol("is html");function jkt(t){if(Tn){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;N3(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;N3(t,"checked",null),t.checked=i}}};t.__on_r=n,L1(n),fkt()}}function qkt(t,e){var n=l6e(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function N3(t,e,n,r){var i=l6e(t);Tn&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[kCt]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Vkt(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function l6e(t){return t.__attributes??={[Ukt]:t.nodeName.includes("-"),[zkt]:t.namespaceURI===GCt}}var Bte=new Map;function Vkt(t){var e=t.getAttribute("is")||t.nodeName,n=Bte.get(e);if(n)return n;Bte.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=mAe(i);for(var o in r)r[o].set&&n.push(o);i=pO(i)}return n}class Jq{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var r=this.#e.get(e)||new Set;return r.add(n),this.#e.set(e,r),this.#r().observe(e,this.#n),()=>{var i=this.#e.get(e);i.delete(n),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){Jq.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var Wkt=new Jq({box:"border-box"});function Ec(t,e,n){var r=Wkt.observe(t,()=>n(t[e]));h4(()=>(f4(()=>n(t[e])),r))}function $te(t,e){return t===e||t?.[Fm]===e}function ra(t={},e,n,r){return h4(()=>{var i,s;return Hq(()=>{i=s,s=[],f4(()=>{t!==n(...s)&&(e(t,...s),i&&$te(n(...i),t)&&e(null,...i))})}),()=>{L1(()=>{s&&$te(n(...s),t)&&e(null,...s)})}}),t}let G6=!1;function Hkt(t){var e=G6;try{return G6=!1,[t(),G6]}finally{G6=e}}function V2(t,e,n,r){var i=r,s=!0,o=()=>(s&&(s=!1,i=r),i),a;{var l=Fm in t||pAe in t;a=Nb(t,e)?.set??(l&&e in t?y=>t[e]=y:void 0)}var u,c=!1;[u,c]=Hkt(()=>t[e]);var f;if(f=()=>{var y=t[e];return y===void 0?o():(s=!0,y)},a){var h=t.$$legacy;return(function(y,b){return arguments.length>0?((!b||h||c)&&a(b?f():y),y):f()})}var d=!1,p=bO(()=>(d=!1,f()));G(p);var m=qn;return(function(y,b){if(arguments.length>0){const v=b?G(p):po(y);return Oe(p,v),d=!0,i!==void 0&&(i=v),y}return P1&&d||(m.f&h0)!==0?p.v:G(p)})}var Jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zq(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XC={exports:{}},Gkt=XC.exports,Ute;function Ykt(){return Ute||(Ute=1,(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",f=1,h=2,d=4,p=1,m=2,y=1,b=2,v=4,w=8,_=16,S=32,A=64,C=128,D=256,T=512,M=30,I="...",N=800,P=16,O=1,R=2,L=3,B=1/0,z=9007199254740991,U=17976931348623157e292,V=NaN,W=4294967295,H=W-1,Y=W>>>1,se=[["ary",C],["bind",y],["bindKey",b],["curry",w],["curryRight",_],["flip",T],["partial",S],["partialRight",A],["rearg",D]],he="[object Arguments]",be="[object Array]",fe="[object AsyncFunction]",me="[object Boolean]",K="[object Date]",de="[object DOMException]",ge="[object Error]",oe="[object Function]",Fe="[object GeneratorFunction]",Ce="[object Map]",je="[object Number]",Ge="[object Null]",Ee="[object Object]",rt="[object Promise]",Vt="[object Proxy]",Xe="[object RegExp]",ht="[object Set]",ln="[object String]",er="[object Symbol]",ze="[object Undefined]",Be="[object WeakMap]",dt="[object WeakSet]",Ht="[object ArrayBuffer]",dn="[object DataView]",dr="[object Float32Array]",un="[object Float64Array]",ct="[object Int8Array]",Vn="[object Int16Array]",kr="[object Int32Array]",Br="[object Uint8Array]",es="[object Uint8ClampedArray]",$r="[object Uint16Array]",Is="[object Uint32Array]",Za=/\b__p \+= '';/g,jc=/\b(__p \+=) '' \+/g,Bu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$u=/&(?:amp|lt|gt|quot|#39);/g,pg=/[&<>"']/g,wO=RegExp($u.source),_O=RegExp(pg.source),qc=/<%-([\s\S]+?)%>/g,p4=/<%([\s\S]+?)%>/g,g4=/<%=([\s\S]+?)%>/g,m4=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SO=/^\w*$/,y4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W2=/[\\^$.*+?()[\]{}|]/g,AO=RegExp(W2.source),H2=/^\s+/,b4=/\s/,CO=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kO=/\{\n\/\* \[wrapped with (.+)\] \*/,EO=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qe=/[()=,{}\[\]\/\s]/,et=/\\(\\)?/g,ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,Ut=/^[-+]0x[0-9a-f]+$/i,In=/^0b[01]+$/i,or=/^\[object .+?Constructor\]$/,Er=/^0o[0-7]+$/i,Fi=/^(?:0|[1-9]\d*)$/,ql=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gs=/($^)/,el=/['\n\r\u2028\u2029\\]/g,Uu="\\ud800-\\udfff",G2="\\u0300-\\u036f",zu="\\ufe20-\\ufe2f",Th="\\u20d0-\\u20ff",Oh=G2+zu+Th,nV="\\u2700-\\u27bf",rV="a-z\\xdf-\\xf6\\xf8-\\xff",S6e="\\xac\\xb1\\xd7\\xf7",A6e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",C6e="\\u2000-\\u206f",k6e=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",iV="A-Z\\xc0-\\xd6\\xd8-\\xde",sV="\\ufe0e\\ufe0f",oV=S6e+A6e+C6e+k6e,DO="['â]",E6e="["+Uu+"]",aV="["+oV+"]",v4="["+Oh+"]",lV="\\d+",D6e="["+nV+"]",uV="["+rV+"]",cV="[^"+Uu+oV+lV+nV+rV+iV+"]",TO="\\ud83c[\\udffb-\\udfff]",T6e="(?:"+v4+"|"+TO+")",fV="[^"+Uu+"]",OO="(?:\\ud83c[\\udde6-\\uddff]){2}",MO="[\\ud800-\\udbff][\\udc00-\\udfff]",B1="["+iV+"]",hV="\\u200d",dV="(?:"+uV+"|"+cV+")",O6e="(?:"+B1+"|"+cV+")",pV="(?:"+DO+"(?:d|ll|m|re|s|t|ve))?",gV="(?:"+DO+"(?:D|LL|M|RE|S|T|VE))?",mV=T6e+"?",yV="["+sV+"]?",M6e="(?:"+hV+"(?:"+[fV,OO,MO].join("|")+")"+yV+mV+")*",I6e="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",R6e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bV=yV+mV+M6e,F6e="(?:"+[D6e,OO,MO].join("|")+")"+bV,N6e="(?:"+[fV+v4+"?",v4,OO,MO,E6e].join("|")+")",L6e=RegExp(DO,"g"),P6e=RegExp(v4,"g"),IO=RegExp(TO+"(?="+TO+")|"+N6e+bV,"g"),B6e=RegExp([B1+"?"+uV+"+"+pV+"(?="+[aV,B1,"$"].join("|")+")",O6e+"+"+gV+"(?="+[aV,B1+dV,"$"].join("|")+")",B1+"?"+dV+"+"+pV,B1+"+"+gV,R6e,I6e,lV,F6e].join("|"),"g"),$6e=RegExp("["+hV+Uu+Oh+sV+"]"),U6e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,z6e=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],j6e=-1,Wr={};Wr[dr]=Wr[un]=Wr[ct]=Wr[Vn]=Wr[kr]=Wr[Br]=Wr[es]=Wr[$r]=Wr[Is]=!0,Wr[he]=Wr[be]=Wr[Ht]=Wr[me]=Wr[dn]=Wr[K]=Wr[ge]=Wr[oe]=Wr[Ce]=Wr[je]=Wr[Ee]=Wr[Xe]=Wr[ht]=Wr[ln]=Wr[Be]=!1;var Ur={};Ur[he]=Ur[be]=Ur[Ht]=Ur[dn]=Ur[me]=Ur[K]=Ur[dr]=Ur[un]=Ur[ct]=Ur[Vn]=Ur[kr]=Ur[Ce]=Ur[je]=Ur[Ee]=Ur[Xe]=Ur[ht]=Ur[ln]=Ur[er]=Ur[Br]=Ur[es]=Ur[$r]=Ur[Is]=!0,Ur[ge]=Ur[oe]=Ur[Be]=!1;var q6e={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},V6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},W6e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},H6e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},G6e=parseFloat,Y6e=parseInt,vV=typeof Jp=="object"&&Jp&&Jp.Object===Object&&Jp,X6e=typeof self=="object"&&self&&self.Object===Object&&self,Rs=vV||X6e||Function("return this")(),RO=e&&!e.nodeType&&e,gg=RO&&!0&&t&&!t.nodeType&&t,xV=gg&&gg.exports===RO,FO=xV&&vV.process,Vl=(function(){try{var le=gg&&gg.require&&gg.require("util").types;return le||FO&&FO.binding&&FO.binding("util")}catch{}})(),wV=Vl&&Vl.isArrayBuffer,_V=Vl&&Vl.isDate,SV=Vl&&Vl.isMap,AV=Vl&&Vl.isRegExp,CV=Vl&&Vl.isSet,kV=Vl&&Vl.isTypedArray;function tl(le,we,ve){switch(ve.length){case 0:return le.call(we);case 1:return le.call(we,ve[0]);case 2:return le.call(we,ve[0],ve[1]);case 3:return le.call(we,ve[0],ve[1],ve[2])}return le.apply(we,ve)}function K6e(le,we,ve,Je){for(var Gt=-1,tr=le==null?0:le.length;++Gt<tr;){var ts=le[Gt];we(Je,ts,ve(ts),le)}return Je}function Wl(le,we){for(var ve=-1,Je=le==null?0:le.length;++ve<Je&&we(le[ve],ve,le)!==!1;);return le}function Q6e(le,we){for(var ve=le==null?0:le.length;ve--&&we(le[ve],ve,le)!==!1;);return le}function EV(le,we){for(var ve=-1,Je=le==null?0:le.length;++ve<Je;)if(!we(le[ve],ve,le))return!1;return!0}function mp(le,we){for(var ve=-1,Je=le==null?0:le.length,Gt=0,tr=[];++ve<Je;){var ts=le[ve];we(ts,ve,le)&&(tr[Gt++]=ts)}return tr}function x4(le,we){var ve=le==null?0:le.length;return!!ve&&$1(le,we,0)>-1}function NO(le,we,ve){for(var Je=-1,Gt=le==null?0:le.length;++Je<Gt;)if(ve(we,le[Je]))return!0;return!1}function ii(le,we){for(var ve=-1,Je=le==null?0:le.length,Gt=Array(Je);++ve<Je;)Gt[ve]=we(le[ve],ve,le);return Gt}function yp(le,we){for(var ve=-1,Je=we.length,Gt=le.length;++ve<Je;)le[Gt+ve]=we[ve];return le}function LO(le,we,ve,Je){var Gt=-1,tr=le==null?0:le.length;for(Je&&tr&&(ve=le[++Gt]);++Gt<tr;)ve=we(ve,le[Gt],Gt,le);return ve}function J6e(le,we,ve,Je){var Gt=le==null?0:le.length;for(Je&&Gt&&(ve=le[--Gt]);Gt--;)ve=we(ve,le[Gt],Gt,le);return ve}function PO(le,we){for(var ve=-1,Je=le==null?0:le.length;++ve<Je;)if(we(le[ve],ve,le))return!0;return!1}var Z6e=BO("length");function eCe(le){return le.split("")}function tCe(le){return le.match(Me)||[]}function DV(le,we,ve){var Je;return ve(le,function(Gt,tr,ts){if(we(Gt,tr,ts))return Je=tr,!1}),Je}function w4(le,we,ve,Je){for(var Gt=le.length,tr=ve+(Je?1:-1);Je?tr--:++tr<Gt;)if(we(le[tr],tr,le))return tr;return-1}function $1(le,we,ve){return we===we?dCe(le,we,ve):w4(le,TV,ve)}function nCe(le,we,ve,Je){for(var Gt=ve-1,tr=le.length;++Gt<tr;)if(Je(le[Gt],we))return Gt;return-1}function TV(le){return le!==le}function OV(le,we){var ve=le==null?0:le.length;return ve?UO(le,we)/ve:V}function BO(le){return function(we){return we==null?n:we[le]}}function $O(le){return function(we){return le==null?n:le[we]}}function MV(le,we,ve,Je,Gt){return Gt(le,function(tr,ts,Dr){ve=Je?(Je=!1,tr):we(ve,tr,ts,Dr)}),ve}function rCe(le,we){var ve=le.length;for(le.sort(we);ve--;)le[ve]=le[ve].value;return le}function UO(le,we){for(var ve,Je=-1,Gt=le.length;++Je<Gt;){var tr=we(le[Je]);tr!==n&&(ve=ve===n?tr:ve+tr)}return ve}function zO(le,we){for(var ve=-1,Je=Array(le);++ve<le;)Je[ve]=we(ve);return Je}function iCe(le,we){return ii(we,function(ve){return[ve,le[ve]]})}function IV(le){return le&&le.slice(0,LV(le)+1).replace(H2,"")}function nl(le){return function(we){return le(we)}}function jO(le,we){return ii(we,function(ve){return le[ve]})}function Y2(le,we){return le.has(we)}function RV(le,we){for(var ve=-1,Je=le.length;++ve<Je&&$1(we,le[ve],0)>-1;);return ve}function FV(le,we){for(var ve=le.length;ve--&&$1(we,le[ve],0)>-1;);return ve}function sCe(le,we){for(var ve=le.length,Je=0;ve--;)le[ve]===we&&++Je;return Je}var oCe=$O(q6e),aCe=$O(V6e);function lCe(le){return"\\"+H6e[le]}function uCe(le,we){return le==null?n:le[we]}function U1(le){return $6e.test(le)}function cCe(le){return U6e.test(le)}function fCe(le){for(var we,ve=[];!(we=le.next()).done;)ve.push(we.value);return ve}function qO(le){var we=-1,ve=Array(le.size);return le.forEach(function(Je,Gt){ve[++we]=[Gt,Je]}),ve}function NV(le,we){return function(ve){return le(we(ve))}}function bp(le,we){for(var ve=-1,Je=le.length,Gt=0,tr=[];++ve<Je;){var ts=le[ve];(ts===we||ts===c)&&(le[ve]=c,tr[Gt++]=ve)}return tr}function _4(le){var we=-1,ve=Array(le.size);return le.forEach(function(Je){ve[++we]=Je}),ve}function hCe(le){var we=-1,ve=Array(le.size);return le.forEach(function(Je){ve[++we]=[Je,Je]}),ve}function dCe(le,we,ve){for(var Je=ve-1,Gt=le.length;++Je<Gt;)if(le[Je]===we)return Je;return-1}function pCe(le,we,ve){for(var Je=ve+1;Je--;)if(le[Je]===we)return Je;return Je}function z1(le){return U1(le)?mCe(le):Z6e(le)}function ju(le){return U1(le)?yCe(le):eCe(le)}function LV(le){for(var we=le.length;we--&&b4.test(le.charAt(we)););return we}var gCe=$O(W6e);function mCe(le){for(var we=IO.lastIndex=0;IO.test(le);)++we;return we}function yCe(le){return le.match(IO)||[]}function bCe(le){return le.match(B6e)||[]}var vCe=(function le(we){we=we==null?Rs:j1.defaults(Rs.Object(),we,j1.pick(Rs,z6e));var ve=we.Array,Je=we.Date,Gt=we.Error,tr=we.Function,ts=we.Math,Dr=we.Object,VO=we.RegExp,xCe=we.String,Hl=we.TypeError,S4=ve.prototype,wCe=tr.prototype,q1=Dr.prototype,A4=we["__core-js_shared__"],C4=wCe.toString,pr=q1.hasOwnProperty,_Ce=0,PV=(function(){var g=/[^.]+$/.exec(A4&&A4.keys&&A4.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""})(),k4=q1.toString,SCe=C4.call(Dr),ACe=Rs._,CCe=VO("^"+C4.call(pr).replace(W2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E4=xV?we.Buffer:n,vp=we.Symbol,D4=we.Uint8Array,BV=E4?E4.allocUnsafe:n,T4=NV(Dr.getPrototypeOf,Dr),$V=Dr.create,UV=q1.propertyIsEnumerable,O4=S4.splice,zV=vp?vp.isConcatSpreadable:n,X2=vp?vp.iterator:n,mg=vp?vp.toStringTag:n,M4=(function(){try{var g=wg(Dr,"defineProperty");return g({},"",{}),g}catch{}})(),kCe=we.clearTimeout!==Rs.clearTimeout&&we.clearTimeout,ECe=Je&&Je.now!==Rs.Date.now&&Je.now,DCe=we.setTimeout!==Rs.setTimeout&&we.setTimeout,I4=ts.ceil,R4=ts.floor,WO=Dr.getOwnPropertySymbols,TCe=E4?E4.isBuffer:n,jV=we.isFinite,OCe=S4.join,MCe=NV(Dr.keys,Dr),ns=ts.max,Ys=ts.min,ICe=Je.now,RCe=we.parseInt,qV=ts.random,FCe=S4.reverse,HO=wg(we,"DataView"),K2=wg(we,"Map"),GO=wg(we,"Promise"),V1=wg(we,"Set"),Q2=wg(we,"WeakMap"),J2=wg(Dr,"create"),F4=Q2&&new Q2,W1={},NCe=_g(HO),LCe=_g(K2),PCe=_g(GO),BCe=_g(V1),$Ce=_g(Q2),N4=vp?vp.prototype:n,Z2=N4?N4.valueOf:n,VV=N4?N4.toString:n;function j(g){if(Ei(g)&&!Qt(g)&&!(g instanceof _n)){if(g instanceof Gl)return g;if(pr.call(g,"__wrapped__"))return WW(g)}return new Gl(g)}var H1=(function(){function g(){}return function(x){if(!hi(x))return{};if($V)return $V(x);g.prototype=x;var E=new g;return g.prototype=n,E}})();function L4(){}function Gl(g,x){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=n}j.templateSettings={escape:qc,evaluate:p4,interpolate:g4,variable:"",imports:{_:j}},j.prototype=L4.prototype,j.prototype.constructor=j,Gl.prototype=H1(L4.prototype),Gl.prototype.constructor=Gl;function _n(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function UCe(){var g=new _n(this.__wrapped__);return g.__actions__=ca(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=ca(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=ca(this.__views__),g}function zCe(){if(this.__filtered__){var g=new _n(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function jCe(){var g=this.__wrapped__.value(),x=this.__dir__,E=Qt(g),F=x<0,$=E?g.length:0,q=eEe(0,$,this.__views__),X=q.start,ie=q.end,ce=ie-X,Ae=F?ie:X-1,ke=this.__iteratees__,Re=ke.length,We=0,st=Ys(ce,this.__takeCount__);if(!E||!F&&$==ce&&st==ce)return pW(g,this.__actions__);var Dt=[];e:for(;ce--&&We<st;){Ae+=x;for(var cn=-1,Tt=g[Ae];++cn<Re;){var xn=ke[cn],En=xn.iteratee,sl=xn.type,Mo=En(Tt);if(sl==R)Tt=Mo;else if(!Mo){if(sl==O)continue e;break e}}Dt[We++]=Tt}return Dt}_n.prototype=H1(L4.prototype),_n.prototype.constructor=_n;function yg(g){var x=-1,E=g==null?0:g.length;for(this.clear();++x<E;){var F=g[x];this.set(F[0],F[1])}}function qCe(){this.__data__=J2?J2(null):{},this.size=0}function VCe(g){var x=this.has(g)&&delete this.__data__[g];return this.size-=x?1:0,x}function WCe(g){var x=this.__data__;if(J2){var E=x[g];return E===l?n:E}return pr.call(x,g)?x[g]:n}function HCe(g){var x=this.__data__;return J2?x[g]!==n:pr.call(x,g)}function GCe(g,x){var E=this.__data__;return this.size+=this.has(g)?0:1,E[g]=J2&&x===n?l:x,this}yg.prototype.clear=qCe,yg.prototype.delete=VCe,yg.prototype.get=WCe,yg.prototype.has=HCe,yg.prototype.set=GCe;function Mh(g){var x=-1,E=g==null?0:g.length;for(this.clear();++x<E;){var F=g[x];this.set(F[0],F[1])}}function YCe(){this.__data__=[],this.size=0}function XCe(g){var x=this.__data__,E=P4(x,g);if(E<0)return!1;var F=x.length-1;return E==F?x.pop():O4.call(x,E,1),--this.size,!0}function KCe(g){var x=this.__data__,E=P4(x,g);return E<0?n:x[E][1]}function QCe(g){return P4(this.__data__,g)>-1}function JCe(g,x){var E=this.__data__,F=P4(E,g);return F<0?(++this.size,E.push([g,x])):E[F][1]=x,this}Mh.prototype.clear=YCe,Mh.prototype.delete=XCe,Mh.prototype.get=KCe,Mh.prototype.has=QCe,Mh.prototype.set=JCe;function Ih(g){var x=-1,E=g==null?0:g.length;for(this.clear();++x<E;){var F=g[x];this.set(F[0],F[1])}}function ZCe(){this.size=0,this.__data__={hash:new yg,map:new(K2||Mh),string:new yg}}function eke(g){var x=X4(this,g).delete(g);return this.size-=x?1:0,x}function tke(g){return X4(this,g).get(g)}function nke(g){return X4(this,g).has(g)}function rke(g,x){var E=X4(this,g),F=E.size;return E.set(g,x),this.size+=E.size==F?0:1,this}Ih.prototype.clear=ZCe,Ih.prototype.delete=eke,Ih.prototype.get=tke,Ih.prototype.has=nke,Ih.prototype.set=rke;function bg(g){var x=-1,E=g==null?0:g.length;for(this.__data__=new Ih;++x<E;)this.add(g[x])}function ike(g){return this.__data__.set(g,l),this}function ske(g){return this.__data__.has(g)}bg.prototype.add=bg.prototype.push=ike,bg.prototype.has=ske;function qu(g){var x=this.__data__=new Mh(g);this.size=x.size}function oke(){this.__data__=new Mh,this.size=0}function ake(g){var x=this.__data__,E=x.delete(g);return this.size=x.size,E}function lke(g){return this.__data__.get(g)}function uke(g){return this.__data__.has(g)}function cke(g,x){var E=this.__data__;if(E instanceof Mh){var F=E.__data__;if(!K2||F.length<i-1)return F.push([g,x]),this.size=++E.size,this;E=this.__data__=new Ih(F)}return E.set(g,x),this.size=E.size,this}qu.prototype.clear=oke,qu.prototype.delete=ake,qu.prototype.get=lke,qu.prototype.has=uke,qu.prototype.set=cke;function WV(g,x){var E=Qt(g),F=!E&&Sg(g),$=!E&&!F&&Ap(g),q=!E&&!F&&!$&&K1(g),X=E||F||$||q,ie=X?zO(g.length,xCe):[],ce=ie.length;for(var Ae in g)(x||pr.call(g,Ae))&&!(X&&(Ae=="length"||$&&(Ae=="offset"||Ae=="parent")||q&&(Ae=="buffer"||Ae=="byteLength"||Ae=="byteOffset")||Lh(Ae,ce)))&&ie.push(Ae);return ie}function HV(g){var x=g.length;return x?g[i7(0,x-1)]:n}function fke(g,x){return K4(ca(g),vg(x,0,g.length))}function hke(g){return K4(ca(g))}function YO(g,x,E){(E!==n&&!Vu(g[x],E)||E===n&&!(x in g))&&Rh(g,x,E)}function ex(g,x,E){var F=g[x];(!(pr.call(g,x)&&Vu(F,E))||E===n&&!(x in g))&&Rh(g,x,E)}function P4(g,x){for(var E=g.length;E--;)if(Vu(g[E][0],x))return E;return-1}function dke(g,x,E,F){return xp(g,function($,q,X){x(F,$,E($),X)}),F}function GV(g,x){return g&&Wc(x,ms(x),g)}function pke(g,x){return g&&Wc(x,ha(x),g)}function Rh(g,x,E){x=="__proto__"&&M4?M4(g,x,{configurable:!0,enumerable:!0,value:E,writable:!0}):g[x]=E}function XO(g,x){for(var E=-1,F=x.length,$=ve(F),q=g==null;++E<F;)$[E]=q?n:T7(g,x[E]);return $}function vg(g,x,E){return g===g&&(E!==n&&(g=g<=E?g:E),x!==n&&(g=g>=x?g:x)),g}function Yl(g,x,E,F,$,q){var X,ie=x&f,ce=x&h,Ae=x&d;if(E&&(X=$?E(g,F,$,q):E(g)),X!==n)return X;if(!hi(g))return g;var ke=Qt(g);if(ke){if(X=nEe(g),!ie)return ca(g,X)}else{var Re=Xs(g),We=Re==oe||Re==Fe;if(Ap(g))return yW(g,ie);if(Re==Ee||Re==he||We&&!$){if(X=ce||We?{}:LW(g),!ie)return ce?Wke(g,pke(X,g)):Vke(g,GV(X,g))}else{if(!Ur[Re])return $?g:{};X=rEe(g,Re,ie)}}q||(q=new qu);var st=q.get(g);if(st)return st;q.set(g,X),fH(g)?g.forEach(function(Tt){X.add(Yl(Tt,x,E,Tt,g,q))}):uH(g)&&g.forEach(function(Tt,xn){X.set(xn,Yl(Tt,x,E,xn,g,q))});var Dt=Ae?ce?g7:p7:ce?ha:ms,cn=ke?n:Dt(g);return Wl(cn||g,function(Tt,xn){cn&&(xn=Tt,Tt=g[xn]),ex(X,xn,Yl(Tt,x,E,xn,g,q))}),X}function gke(g){var x=ms(g);return function(E){return YV(E,g,x)}}function YV(g,x,E){var F=E.length;if(g==null)return!F;for(g=Dr(g);F--;){var $=E[F],q=x[$],X=g[$];if(X===n&&!($ in g)||!q(X))return!1}return!0}function XV(g,x,E){if(typeof g!="function")throw new Hl(o);return ax(function(){g.apply(n,E)},x)}function tx(g,x,E,F){var $=-1,q=x4,X=!0,ie=g.length,ce=[],Ae=x.length;if(!ie)return ce;E&&(x=ii(x,nl(E))),F?(q=NO,X=!1):x.length>=i&&(q=Y2,X=!1,x=new bg(x));e:for(;++$<ie;){var ke=g[$],Re=E==null?ke:E(ke);if(ke=F||ke!==0?ke:0,X&&Re===Re){for(var We=Ae;We--;)if(x[We]===Re)continue e;ce.push(ke)}else q(x,Re,F)||ce.push(ke)}return ce}var xp=_W(Vc),KV=_W(QO,!0);function mke(g,x){var E=!0;return xp(g,function(F,$,q){return E=!!x(F,$,q),E}),E}function B4(g,x,E){for(var F=-1,$=g.length;++F<$;){var q=g[F],X=x(q);if(X!=null&&(ie===n?X===X&&!il(X):E(X,ie)))var ie=X,ce=q}return ce}function yke(g,x,E,F){var $=g.length;for(E=rn(E),E<0&&(E=-E>$?0:$+E),F=F===n||F>$?$:rn(F),F<0&&(F+=$),F=E>F?0:dH(F);E<F;)g[E++]=x;return g}function QV(g,x){var E=[];return xp(g,function(F,$,q){x(F,$,q)&&E.push(F)}),E}function Fs(g,x,E,F,$){var q=-1,X=g.length;for(E||(E=sEe),$||($=[]);++q<X;){var ie=g[q];x>0&&E(ie)?x>1?Fs(ie,x-1,E,F,$):yp($,ie):F||($[$.length]=ie)}return $}var KO=SW(),JV=SW(!0);function Vc(g,x){return g&&KO(g,x,ms)}function QO(g,x){return g&&JV(g,x,ms)}function $4(g,x){return mp(x,function(E){return Ph(g[E])})}function xg(g,x){x=_p(x,g);for(var E=0,F=x.length;g!=null&&E<F;)g=g[Hc(x[E++])];return E&&E==F?g:n}function ZV(g,x,E){var F=x(g);return Qt(g)?F:yp(F,E(g))}function To(g){return g==null?g===n?ze:Ge:mg&&mg in Dr(g)?Zke(g):hEe(g)}function JO(g,x){return g>x}function bke(g,x){return g!=null&&pr.call(g,x)}function vke(g,x){return g!=null&&x in Dr(g)}function xke(g,x,E){return g>=Ys(x,E)&&g<ns(x,E)}function ZO(g,x,E){for(var F=E?NO:x4,$=g[0].length,q=g.length,X=q,ie=ve(q),ce=1/0,Ae=[];X--;){var ke=g[X];X&&x&&(ke=ii(ke,nl(x))),ce=Ys(ke.length,ce),ie[X]=!E&&(x||$>=120&&ke.length>=120)?new bg(X&&ke):n}ke=g[0];var Re=-1,We=ie[0];e:for(;++Re<$&&Ae.length<ce;){var st=ke[Re],Dt=x?x(st):st;if(st=E||st!==0?st:0,!(We?Y2(We,Dt):F(Ae,Dt,E))){for(X=q;--X;){var cn=ie[X];if(!(cn?Y2(cn,Dt):F(g[X],Dt,E)))continue e}We&&We.push(Dt),Ae.push(st)}}return Ae}function wke(g,x,E,F){return Vc(g,function($,q,X){x(F,E($),q,X)}),F}function nx(g,x,E){x=_p(x,g),g=UW(g,x);var F=g==null?g:g[Hc(Kl(x))];return F==null?n:tl(F,g,E)}function eW(g){return Ei(g)&&To(g)==he}function _ke(g){return Ei(g)&&To(g)==Ht}function Ske(g){return Ei(g)&&To(g)==K}function rx(g,x,E,F,$){return g===x?!0:g==null||x==null||!Ei(g)&&!Ei(x)?g!==g&&x!==x:Ake(g,x,E,F,rx,$)}function Ake(g,x,E,F,$,q){var X=Qt(g),ie=Qt(x),ce=X?be:Xs(g),Ae=ie?be:Xs(x);ce=ce==he?Ee:ce,Ae=Ae==he?Ee:Ae;var ke=ce==Ee,Re=Ae==Ee,We=ce==Ae;if(We&&Ap(g)){if(!Ap(x))return!1;X=!0,ke=!1}if(We&&!ke)return q||(q=new qu),X||K1(g)?RW(g,x,E,F,$,q):Qke(g,x,ce,E,F,$,q);if(!(E&p)){var st=ke&&pr.call(g,"__wrapped__"),Dt=Re&&pr.call(x,"__wrapped__");if(st||Dt){var cn=st?g.value():g,Tt=Dt?x.value():x;return q||(q=new qu),$(cn,Tt,E,F,q)}}return We?(q||(q=new qu),Jke(g,x,E,F,$,q)):!1}function Cke(g){return Ei(g)&&Xs(g)==Ce}function e7(g,x,E,F){var $=E.length,q=$,X=!F;if(g==null)return!q;for(g=Dr(g);$--;){var ie=E[$];if(X&&ie[2]?ie[1]!==g[ie[0]]:!(ie[0]in g))return!1}for(;++$<q;){ie=E[$];var ce=ie[0],Ae=g[ce],ke=ie[1];if(X&&ie[2]){if(Ae===n&&!(ce in g))return!1}else{var Re=new qu;if(F)var We=F(Ae,ke,ce,g,x,Re);if(!(We===n?rx(ke,Ae,p|m,F,Re):We))return!1}}return!0}function tW(g){if(!hi(g)||aEe(g))return!1;var x=Ph(g)?CCe:or;return x.test(_g(g))}function kke(g){return Ei(g)&&To(g)==Xe}function Eke(g){return Ei(g)&&Xs(g)==ht}function Dke(g){return Ei(g)&&nA(g.length)&&!!Wr[To(g)]}function nW(g){return typeof g=="function"?g:g==null?da:typeof g=="object"?Qt(g)?sW(g[0],g[1]):iW(g):AH(g)}function t7(g){if(!ox(g))return MCe(g);var x=[];for(var E in Dr(g))pr.call(g,E)&&E!="constructor"&&x.push(E);return x}function Tke(g){if(!hi(g))return fEe(g);var x=ox(g),E=[];for(var F in g)F=="constructor"&&(x||!pr.call(g,F))||E.push(F);return E}function n7(g,x){return g<x}function rW(g,x){var E=-1,F=fa(g)?ve(g.length):[];return xp(g,function($,q,X){F[++E]=x($,q,X)}),F}function iW(g){var x=y7(g);return x.length==1&&x[0][2]?BW(x[0][0],x[0][1]):function(E){return E===g||e7(E,g,x)}}function sW(g,x){return v7(g)&&PW(x)?BW(Hc(g),x):function(E){var F=T7(E,g);return F===n&&F===x?O7(E,g):rx(x,F,p|m)}}function U4(g,x,E,F,$){g!==x&&KO(x,function(q,X){if($||($=new qu),hi(q))Oke(g,x,X,E,U4,F,$);else{var ie=F?F(w7(g,X),q,X+"",g,x,$):n;ie===n&&(ie=q),YO(g,X,ie)}},ha)}function Oke(g,x,E,F,$,q,X){var ie=w7(g,E),ce=w7(x,E),Ae=X.get(ce);if(Ae){YO(g,E,Ae);return}var ke=q?q(ie,ce,E+"",g,x,X):n,Re=ke===n;if(Re){var We=Qt(ce),st=!We&&Ap(ce),Dt=!We&&!st&&K1(ce);ke=ce,We||st||Dt?Qt(ie)?ke=ie:Ni(ie)?ke=ca(ie):st?(Re=!1,ke=yW(ce,!0)):Dt?(Re=!1,ke=bW(ce,!0)):ke=[]:lx(ce)||Sg(ce)?(ke=ie,Sg(ie)?ke=pH(ie):(!hi(ie)||Ph(ie))&&(ke=LW(ce))):Re=!1}Re&&(X.set(ce,ke),$(ke,ce,F,q,X),X.delete(ce)),YO(g,E,ke)}function oW(g,x){var E=g.length;if(E)return x+=x<0?E:0,Lh(x,E)?g[x]:n}function aW(g,x,E){x.length?x=ii(x,function(q){return Qt(q)?function(X){return xg(X,q.length===1?q[0]:q)}:q}):x=[da];var F=-1;x=ii(x,nl(_t()));var $=rW(g,function(q,X,ie){var ce=ii(x,function(Ae){return Ae(q)});return{criteria:ce,index:++F,value:q}});return rCe($,function(q,X){return qke(q,X,E)})}function Mke(g,x){return lW(g,x,function(E,F){return O7(g,F)})}function lW(g,x,E){for(var F=-1,$=x.length,q={};++F<$;){var X=x[F],ie=xg(g,X);E(ie,X)&&ix(q,_p(X,g),ie)}return q}function Ike(g){return function(x){return xg(x,g)}}function r7(g,x,E,F){var $=F?nCe:$1,q=-1,X=x.length,ie=g;for(g===x&&(x=ca(x)),E&&(ie=ii(g,nl(E)));++q<X;)for(var ce=0,Ae=x[q],ke=E?E(Ae):Ae;(ce=$(ie,ke,ce,F))>-1;)ie!==g&&O4.call(ie,ce,1),O4.call(g,ce,1);return g}function uW(g,x){for(var E=g?x.length:0,F=E-1;E--;){var $=x[E];if(E==F||$!==q){var q=$;Lh($)?O4.call(g,$,1):a7(g,$)}}return g}function i7(g,x){return g+R4(qV()*(x-g+1))}function Rke(g,x,E,F){for(var $=-1,q=ns(I4((x-g)/(E||1)),0),X=ve(q);q--;)X[F?q:++$]=g,g+=E;return X}function s7(g,x){var E="";if(!g||x<1||x>z)return E;do x%2&&(E+=g),x=R4(x/2),x&&(g+=g);while(x);return E}function pn(g,x){return _7($W(g,x,da),g+"")}function Fke(g){return HV(Q1(g))}function Nke(g,x){var E=Q1(g);return K4(E,vg(x,0,E.length))}function ix(g,x,E,F){if(!hi(g))return g;x=_p(x,g);for(var $=-1,q=x.length,X=q-1,ie=g;ie!=null&&++$<q;){var ce=Hc(x[$]),Ae=E;if(ce==="__proto__"||ce==="constructor"||ce==="prototype")return g;if($!=X){var ke=ie[ce];Ae=F?F(ke,ce,ie):n,Ae===n&&(Ae=hi(ke)?ke:Lh(x[$+1])?[]:{})}ex(ie,ce,Ae),ie=ie[ce]}return g}var cW=F4?function(g,x){return F4.set(g,x),g}:da,Lke=M4?function(g,x){return M4(g,"toString",{configurable:!0,enumerable:!1,value:I7(x),writable:!0})}:da;function Pke(g){return K4(Q1(g))}function Xl(g,x,E){var F=-1,$=g.length;x<0&&(x=-x>$?0:$+x),E=E>$?$:E,E<0&&(E+=$),$=x>E?0:E-x>>>0,x>>>=0;for(var q=ve($);++F<$;)q[F]=g[F+x];return q}function Bke(g,x){var E;return xp(g,function(F,$,q){return E=x(F,$,q),!E}),!!E}function z4(g,x,E){var F=0,$=g==null?F:g.length;if(typeof x=="number"&&x===x&&$<=Y){for(;F<$;){var q=F+$>>>1,X=g[q];X!==null&&!il(X)&&(E?X<=x:X<x)?F=q+1:$=q}return $}return o7(g,x,da,E)}function o7(g,x,E,F){var $=0,q=g==null?0:g.length;if(q===0)return 0;x=E(x);for(var X=x!==x,ie=x===null,ce=il(x),Ae=x===n;$<q;){var ke=R4(($+q)/2),Re=E(g[ke]),We=Re!==n,st=Re===null,Dt=Re===Re,cn=il(Re);if(X)var Tt=F||Dt;else Ae?Tt=Dt&&(F||We):ie?Tt=Dt&&We&&(F||!st):ce?Tt=Dt&&We&&!st&&(F||!cn):st||cn?Tt=!1:Tt=F?Re<=x:Re<x;Tt?$=ke+1:q=ke}return Ys(q,H)}function fW(g,x){for(var E=-1,F=g.length,$=0,q=[];++E<F;){var X=g[E],ie=x?x(X):X;if(!E||!Vu(ie,ce)){var ce=ie;q[$++]=X===0?0:X}}return q}function hW(g){return typeof g=="number"?g:il(g)?V:+g}function rl(g){if(typeof g=="string")return g;if(Qt(g))return ii(g,rl)+"";if(il(g))return VV?VV.call(g):"";var x=g+"";return x=="0"&&1/g==-B?"-0":x}function wp(g,x,E){var F=-1,$=x4,q=g.length,X=!0,ie=[],ce=ie;if(E)X=!1,$=NO;else if(q>=i){var Ae=x?null:Xke(g);if(Ae)return _4(Ae);X=!1,$=Y2,ce=new bg}else ce=x?[]:ie;e:for(;++F<q;){var ke=g[F],Re=x?x(ke):ke;if(ke=E||ke!==0?ke:0,X&&Re===Re){for(var We=ce.length;We--;)if(ce[We]===Re)continue e;x&&ce.push(Re),ie.push(ke)}else $(ce,Re,E)||(ce!==ie&&ce.push(Re),ie.push(ke))}return ie}function a7(g,x){return x=_p(x,g),g=UW(g,x),g==null||delete g[Hc(Kl(x))]}function dW(g,x,E,F){return ix(g,x,E(xg(g,x)),F)}function j4(g,x,E,F){for(var $=g.length,q=F?$:-1;(F?q--:++q<$)&&x(g[q],q,g););return E?Xl(g,F?0:q,F?q+1:$):Xl(g,F?q+1:0,F?$:q)}function pW(g,x){var E=g;return E instanceof _n&&(E=E.value()),LO(x,function(F,$){return $.func.apply($.thisArg,yp([F],$.args))},E)}function l7(g,x,E){var F=g.length;if(F<2)return F?wp(g[0]):[];for(var $=-1,q=ve(F);++$<F;)for(var X=g[$],ie=-1;++ie<F;)ie!=$&&(q[$]=tx(q[$]||X,g[ie],x,E));return wp(Fs(q,1),x,E)}function gW(g,x,E){for(var F=-1,$=g.length,q=x.length,X={};++F<$;){var ie=F<q?x[F]:n;E(X,g[F],ie)}return X}function u7(g){return Ni(g)?g:[]}function c7(g){return typeof g=="function"?g:da}function _p(g,x){return Qt(g)?g:v7(g,x)?[g]:VW(ar(g))}var $ke=pn;function Sp(g,x,E){var F=g.length;return E=E===n?F:E,!x&&E>=F?g:Xl(g,x,E)}var mW=kCe||function(g){return Rs.clearTimeout(g)};function yW(g,x){if(x)return g.slice();var E=g.length,F=BV?BV(E):new g.constructor(E);return g.copy(F),F}function f7(g){var x=new g.constructor(g.byteLength);return new D4(x).set(new D4(g)),x}function Uke(g,x){var E=x?f7(g.buffer):g.buffer;return new g.constructor(E,g.byteOffset,g.byteLength)}function zke(g){var x=new g.constructor(g.source,yt.exec(g));return x.lastIndex=g.lastIndex,x}function jke(g){return Z2?Dr(Z2.call(g)):{}}function bW(g,x){var E=x?f7(g.buffer):g.buffer;return new g.constructor(E,g.byteOffset,g.length)}function vW(g,x){if(g!==x){var E=g!==n,F=g===null,$=g===g,q=il(g),X=x!==n,ie=x===null,ce=x===x,Ae=il(x);if(!ie&&!Ae&&!q&&g>x||q&&X&&ce&&!ie&&!Ae||F&&X&&ce||!E&&ce||!$)return 1;if(!F&&!q&&!Ae&&g<x||Ae&&E&&$&&!F&&!q||ie&&E&&$||!X&&$||!ce)return-1}return 0}function qke(g,x,E){for(var F=-1,$=g.criteria,q=x.criteria,X=$.length,ie=E.length;++F<X;){var ce=vW($[F],q[F]);if(ce){if(F>=ie)return ce;var Ae=E[F];return ce*(Ae=="desc"?-1:1)}}return g.index-x.index}function xW(g,x,E,F){for(var $=-1,q=g.length,X=E.length,ie=-1,ce=x.length,Ae=ns(q-X,0),ke=ve(ce+Ae),Re=!F;++ie<ce;)ke[ie]=x[ie];for(;++$<X;)(Re||$<q)&&(ke[E[$]]=g[$]);for(;Ae--;)ke[ie++]=g[$++];return ke}function wW(g,x,E,F){for(var $=-1,q=g.length,X=-1,ie=E.length,ce=-1,Ae=x.length,ke=ns(q-ie,0),Re=ve(ke+Ae),We=!F;++$<ke;)Re[$]=g[$];for(var st=$;++ce<Ae;)Re[st+ce]=x[ce];for(;++X<ie;)(We||$<q)&&(Re[st+E[X]]=g[$++]);return Re}function ca(g,x){var E=-1,F=g.length;for(x||(x=ve(F));++E<F;)x[E]=g[E];return x}function Wc(g,x,E,F){var $=!E;E||(E={});for(var q=-1,X=x.length;++q<X;){var ie=x[q],ce=F?F(E[ie],g[ie],ie,E,g):n;ce===n&&(ce=g[ie]),$?Rh(E,ie,ce):ex(E,ie,ce)}return E}function Vke(g,x){return Wc(g,b7(g),x)}function Wke(g,x){return Wc(g,FW(g),x)}function q4(g,x){return function(E,F){var $=Qt(E)?K6e:dke,q=x?x():{};return $(E,g,_t(F,2),q)}}function G1(g){return pn(function(x,E){var F=-1,$=E.length,q=$>1?E[$-1]:n,X=$>2?E[2]:n;for(q=g.length>3&&typeof q=="function"?($--,q):n,X&&Oo(E[0],E[1],X)&&(q=$<3?n:q,$=1),x=Dr(x);++F<$;){var ie=E[F];ie&&g(x,ie,F,q)}return x})}function _W(g,x){return function(E,F){if(E==null)return E;if(!fa(E))return g(E,F);for(var $=E.length,q=x?$:-1,X=Dr(E);(x?q--:++q<$)&&F(X[q],q,X)!==!1;);return E}}function SW(g){return function(x,E,F){for(var $=-1,q=Dr(x),X=F(x),ie=X.length;ie--;){var ce=X[g?ie:++$];if(E(q[ce],ce,q)===!1)break}return x}}function Hke(g,x,E){var F=x&y,$=sx(g);function q(){var X=this&&this!==Rs&&this instanceof q?$:g;return X.apply(F?E:this,arguments)}return q}function AW(g){return function(x){x=ar(x);var E=U1(x)?ju(x):n,F=E?E[0]:x.charAt(0),$=E?Sp(E,1).join(""):x.slice(1);return F[g]()+$}}function Y1(g){return function(x){return LO(_H(wH(x).replace(L6e,"")),g,"")}}function sx(g){return function(){var x=arguments;switch(x.length){case 0:return new g;case 1:return new g(x[0]);case 2:return new g(x[0],x[1]);case 3:return new g(x[0],x[1],x[2]);case 4:return new g(x[0],x[1],x[2],x[3]);case 5:return new g(x[0],x[1],x[2],x[3],x[4]);case 6:return new g(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new g(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var E=H1(g.prototype),F=g.apply(E,x);return hi(F)?F:E}}function Gke(g,x,E){var F=sx(g);function $(){for(var q=arguments.length,X=ve(q),ie=q,ce=X1($);ie--;)X[ie]=arguments[ie];var Ae=q<3&&X[0]!==ce&&X[q-1]!==ce?[]:bp(X,ce);if(q-=Ae.length,q<E)return TW(g,x,V4,$.placeholder,n,X,Ae,n,n,E-q);var ke=this&&this!==Rs&&this instanceof $?F:g;return tl(ke,this,X)}return $}function CW(g){return function(x,E,F){var $=Dr(x);if(!fa(x)){var q=_t(E,3);x=ms(x),E=function(ie){return q($[ie],ie,$)}}var X=g(x,E,F);return X>-1?$[q?x[X]:X]:n}}function kW(g){return Nh(function(x){var E=x.length,F=E,$=Gl.prototype.thru;for(g&&x.reverse();F--;){var q=x[F];if(typeof q!="function")throw new Hl(o);if($&&!X&&Y4(q)=="wrapper")var X=new Gl([],!0)}for(F=X?F:E;++F<E;){q=x[F];var ie=Y4(q),ce=ie=="wrapper"?m7(q):n;ce&&x7(ce[0])&&ce[1]==(C|w|S|D)&&!ce[4].length&&ce[9]==1?X=X[Y4(ce[0])].apply(X,ce[3]):X=q.length==1&&x7(q)?X[ie]():X.thru(q)}return function(){var Ae=arguments,ke=Ae[0];if(X&&Ae.length==1&&Qt(ke))return X.plant(ke).value();for(var Re=0,We=E?x[Re].apply(this,Ae):ke;++Re<E;)We=x[Re].call(this,We);return We}})}function V4(g,x,E,F,$,q,X,ie,ce,Ae){var ke=x&C,Re=x&y,We=x&b,st=x&(w|_),Dt=x&T,cn=We?n:sx(g);function Tt(){for(var xn=arguments.length,En=ve(xn),sl=xn;sl--;)En[sl]=arguments[sl];if(st)var Mo=X1(Tt),ol=sCe(En,Mo);if(F&&(En=xW(En,F,$,st)),q&&(En=wW(En,q,X,st)),xn-=ol,st&&xn<Ae){var Li=bp(En,Mo);return TW(g,x,V4,Tt.placeholder,E,En,Li,ie,ce,Ae-xn)}var Wu=Re?E:this,$h=We?Wu[g]:g;return xn=En.length,ie?En=dEe(En,ie):Dt&&xn>1&&En.reverse(),ke&&ce<xn&&(En.length=ce),this&&this!==Rs&&this instanceof Tt&&($h=cn||sx($h)),$h.apply(Wu,En)}return Tt}function EW(g,x){return function(E,F){return wke(E,g,x(F),{})}}function W4(g,x){return function(E,F){var $;if(E===n&&F===n)return x;if(E!==n&&($=E),F!==n){if($===n)return F;typeof E=="string"||typeof F=="string"?(E=rl(E),F=rl(F)):(E=hW(E),F=hW(F)),$=g(E,F)}return $}}function h7(g){return Nh(function(x){return x=ii(x,nl(_t())),pn(function(E){var F=this;return g(x,function($){return tl($,F,E)})})})}function H4(g,x){x=x===n?" ":rl(x);var E=x.length;if(E<2)return E?s7(x,g):x;var F=s7(x,I4(g/z1(x)));return U1(x)?Sp(ju(F),0,g).join(""):F.slice(0,g)}function Yke(g,x,E,F){var $=x&y,q=sx(g);function X(){for(var ie=-1,ce=arguments.length,Ae=-1,ke=F.length,Re=ve(ke+ce),We=this&&this!==Rs&&this instanceof X?q:g;++Ae<ke;)Re[Ae]=F[Ae];for(;ce--;)Re[Ae++]=arguments[++ie];return tl(We,$?E:this,Re)}return X}function DW(g){return function(x,E,F){return F&&typeof F!="number"&&Oo(x,E,F)&&(E=F=n),x=Bh(x),E===n?(E=x,x=0):E=Bh(E),F=F===n?x<E?1:-1:Bh(F),Rke(x,E,F,g)}}function G4(g){return function(x,E){return typeof x=="string"&&typeof E=="string"||(x=Ql(x),E=Ql(E)),g(x,E)}}function TW(g,x,E,F,$,q,X,ie,ce,Ae){var ke=x&w,Re=ke?X:n,We=ke?n:X,st=ke?q:n,Dt=ke?n:q;x|=ke?S:A,x&=~(ke?A:S),x&v||(x&=-4);var cn=[g,x,$,st,Re,Dt,We,ie,ce,Ae],Tt=E.apply(n,cn);return x7(g)&&zW(Tt,cn),Tt.placeholder=F,jW(Tt,g,x)}function d7(g){var x=ts[g];return function(E,F){if(E=Ql(E),F=F==null?0:Ys(rn(F),292),F&&jV(E)){var $=(ar(E)+"e").split("e"),q=x($[0]+"e"+(+$[1]+F));return $=(ar(q)+"e").split("e"),+($[0]+"e"+(+$[1]-F))}return x(E)}}var Xke=V1&&1/_4(new V1([,-0]))[1]==B?function(g){return new V1(g)}:N7;function OW(g){return function(x){var E=Xs(x);return E==Ce?qO(x):E==ht?hCe(x):iCe(x,g(x))}}function Fh(g,x,E,F,$,q,X,ie){var ce=x&b;if(!ce&&typeof g!="function")throw new Hl(o);var Ae=F?F.length:0;if(Ae||(x&=-97,F=$=n),X=X===n?X:ns(rn(X),0),ie=ie===n?ie:rn(ie),Ae-=$?$.length:0,x&A){var ke=F,Re=$;F=$=n}var We=ce?n:m7(g),st=[g,x,E,F,$,ke,Re,q,X,ie];if(We&&cEe(st,We),g=st[0],x=st[1],E=st[2],F=st[3],$=st[4],ie=st[9]=st[9]===n?ce?0:g.length:ns(st[9]-Ae,0),!ie&&x&(w|_)&&(x&=-25),!x||x==y)var Dt=Hke(g,x,E);else x==w||x==_?Dt=Gke(g,x,ie):(x==S||x==(y|S))&&!$.length?Dt=Yke(g,x,E,F):Dt=V4.apply(n,st);var cn=We?cW:zW;return jW(cn(Dt,st),g,x)}function MW(g,x,E,F){return g===n||Vu(g,q1[E])&&!pr.call(F,E)?x:g}function IW(g,x,E,F,$,q){return hi(g)&&hi(x)&&(q.set(x,g),U4(g,x,n,IW,q),q.delete(x)),g}function Kke(g){return lx(g)?n:g}function RW(g,x,E,F,$,q){var X=E&p,ie=g.length,ce=x.length;if(ie!=ce&&!(X&&ce>ie))return!1;var Ae=q.get(g),ke=q.get(x);if(Ae&&ke)return Ae==x&&ke==g;var Re=-1,We=!0,st=E&m?new bg:n;for(q.set(g,x),q.set(x,g);++Re<ie;){var Dt=g[Re],cn=x[Re];if(F)var Tt=X?F(cn,Dt,Re,x,g,q):F(Dt,cn,Re,g,x,q);if(Tt!==n){if(Tt)continue;We=!1;break}if(st){if(!PO(x,function(xn,En){if(!Y2(st,En)&&(Dt===xn||$(Dt,xn,E,F,q)))return st.push(En)})){We=!1;break}}else if(!(Dt===cn||$(Dt,cn,E,F,q))){We=!1;break}}return q.delete(g),q.delete(x),We}function Qke(g,x,E,F,$,q,X){switch(E){case dn:if(g.byteLength!=x.byteLength||g.byteOffset!=x.byteOffset)return!1;g=g.buffer,x=x.buffer;case Ht:return!(g.byteLength!=x.byteLength||!q(new D4(g),new D4(x)));case me:case K:case je:return Vu(+g,+x);case ge:return g.name==x.name&&g.message==x.message;case Xe:case ln:return g==x+"";case Ce:var ie=qO;case ht:var ce=F&p;if(ie||(ie=_4),g.size!=x.size&&!ce)return!1;var Ae=X.get(g);if(Ae)return Ae==x;F|=m,X.set(g,x);var ke=RW(ie(g),ie(x),F,$,q,X);return X.delete(g),ke;case er:if(Z2)return Z2.call(g)==Z2.call(x)}return!1}function Jke(g,x,E,F,$,q){var X=E&p,ie=p7(g),ce=ie.length,Ae=p7(x),ke=Ae.length;if(ce!=ke&&!X)return!1;for(var Re=ce;Re--;){var We=ie[Re];if(!(X?We in x:pr.call(x,We)))return!1}var st=q.get(g),Dt=q.get(x);if(st&&Dt)return st==x&&Dt==g;var cn=!0;q.set(g,x),q.set(x,g);for(var Tt=X;++Re<ce;){We=ie[Re];var xn=g[We],En=x[We];if(F)var sl=X?F(En,xn,We,x,g,q):F(xn,En,We,g,x,q);if(!(sl===n?xn===En||$(xn,En,E,F,q):sl)){cn=!1;break}Tt||(Tt=We=="constructor")}if(cn&&!Tt){var Mo=g.constructor,ol=x.constructor;Mo!=ol&&"constructor"in g&&"constructor"in x&&!(typeof Mo=="function"&&Mo instanceof Mo&&typeof ol=="function"&&ol instanceof ol)&&(cn=!1)}return q.delete(g),q.delete(x),cn}function Nh(g){return _7($W(g,n,YW),g+"")}function p7(g){return ZV(g,ms,b7)}function g7(g){return ZV(g,ha,FW)}var m7=F4?function(g){return F4.get(g)}:N7;function Y4(g){for(var x=g.name+"",E=W1[x],F=pr.call(W1,x)?E.length:0;F--;){var $=E[F],q=$.func;if(q==null||q==g)return $.name}return x}function X1(g){var x=pr.call(j,"placeholder")?j:g;return x.placeholder}function _t(){var g=j.iteratee||R7;return g=g===R7?nW:g,arguments.length?g(arguments[0],arguments[1]):g}function X4(g,x){var E=g.__data__;return oEe(x)?E[typeof x=="string"?"string":"hash"]:E.map}function y7(g){for(var x=ms(g),E=x.length;E--;){var F=x[E],$=g[F];x[E]=[F,$,PW($)]}return x}function wg(g,x){var E=uCe(g,x);return tW(E)?E:n}function Zke(g){var x=pr.call(g,mg),E=g[mg];try{g[mg]=n;var F=!0}catch{}var $=k4.call(g);return F&&(x?g[mg]=E:delete g[mg]),$}var b7=WO?function(g){return g==null?[]:(g=Dr(g),mp(WO(g),function(x){return UV.call(g,x)}))}:L7,FW=WO?function(g){for(var x=[];g;)yp(x,b7(g)),g=T4(g);return x}:L7,Xs=To;(HO&&Xs(new HO(new ArrayBuffer(1)))!=dn||K2&&Xs(new K2)!=Ce||GO&&Xs(GO.resolve())!=rt||V1&&Xs(new V1)!=ht||Q2&&Xs(new Q2)!=Be)&&(Xs=function(g){var x=To(g),E=x==Ee?g.constructor:n,F=E?_g(E):"";if(F)switch(F){case NCe:return dn;case LCe:return Ce;case PCe:return rt;case BCe:return ht;case $Ce:return Be}return x});function eEe(g,x,E){for(var F=-1,$=E.length;++F<$;){var q=E[F],X=q.size;switch(q.type){case"drop":g+=X;break;case"dropRight":x-=X;break;case"take":x=Ys(x,g+X);break;case"takeRight":g=ns(g,x-X);break}}return{start:g,end:x}}function tEe(g){var x=g.match(kO);return x?x[1].split(EO):[]}function NW(g,x,E){x=_p(x,g);for(var F=-1,$=x.length,q=!1;++F<$;){var X=Hc(x[F]);if(!(q=g!=null&&E(g,X)))break;g=g[X]}return q||++F!=$?q:($=g==null?0:g.length,!!$&&nA($)&&Lh(X,$)&&(Qt(g)||Sg(g)))}function nEe(g){var x=g.length,E=new g.constructor(x);return x&&typeof g[0]=="string"&&pr.call(g,"index")&&(E.index=g.index,E.input=g.input),E}function LW(g){return typeof g.constructor=="function"&&!ox(g)?H1(T4(g)):{}}function rEe(g,x,E){var F=g.constructor;switch(x){case Ht:return f7(g);case me:case K:return new F(+g);case dn:return Uke(g,E);case dr:case un:case ct:case Vn:case kr:case Br:case es:case $r:case Is:return bW(g,E);case Ce:return new F;case je:case ln:return new F(g);case Xe:return zke(g);case ht:return new F;case er:return jke(g)}}function iEe(g,x){var E=x.length;if(!E)return g;var F=E-1;return x[F]=(E>1?"& ":"")+x[F],x=x.join(E>2?", ":" "),g.replace(CO,`{
/* [wrapped with `+x+`] */
`)}function sEe(g){return Qt(g)||Sg(g)||!!(zV&&g&&g[zV])}function Lh(g,x){var E=typeof g;return x=x??z,!!x&&(E=="number"||E!="symbol"&&Fi.test(g))&&g>-1&&g%1==0&&g<x}function Oo(g,x,E){if(!hi(E))return!1;var F=typeof x;return(F=="number"?fa(E)&&Lh(x,E.length):F=="string"&&x in E)?Vu(E[x],g):!1}function v7(g,x){if(Qt(g))return!1;var E=typeof g;return E=="number"||E=="symbol"||E=="boolean"||g==null||il(g)?!0:SO.test(g)||!m4.test(g)||x!=null&&g in Dr(x)}function oEe(g){var x=typeof g;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?g!=="__proto__":g===null}function x7(g){var x=Y4(g),E=j[x];if(typeof E!="function"||!(x in _n.prototype))return!1;if(g===E)return!0;var F=m7(E);return!!F&&g===F[0]}function aEe(g){return!!PV&&PV in g}var lEe=A4?Ph:P7;function ox(g){var x=g&&g.constructor,E=typeof x=="function"&&x.prototype||q1;return g===E}function PW(g){return g===g&&!hi(g)}function BW(g,x){return function(E){return E==null?!1:E[g]===x&&(x!==n||g in Dr(E))}}function uEe(g){var x=eA(g,function(F){return E.size===u&&E.clear(),F}),E=x.cache;return x}function cEe(g,x){var E=g[1],F=x[1],$=E|F,q=$<(y|b|C),X=F==C&&E==w||F==C&&E==D&&g[7].length<=x[8]||F==(C|D)&&x[7].length<=x[8]&&E==w;if(!(q||X))return g;F&y&&(g[2]=x[2],$|=E&y?0:v);var ie=x[3];if(ie){var ce=g[3];g[3]=ce?xW(ce,ie,x[4]):ie,g[4]=ce?bp(g[3],c):x[4]}return ie=x[5],ie&&(ce=g[5],g[5]=ce?wW(ce,ie,x[6]):ie,g[6]=ce?bp(g[5],c):x[6]),ie=x[7],ie&&(g[7]=ie),F&C&&(g[8]=g[8]==null?x[8]:Ys(g[8],x[8])),g[9]==null&&(g[9]=x[9]),g[0]=x[0],g[1]=$,g}function fEe(g){var x=[];if(g!=null)for(var E in Dr(g))x.push(E);return x}function hEe(g){return k4.call(g)}function $W(g,x,E){return x=ns(x===n?g.length-1:x,0),function(){for(var F=arguments,$=-1,q=ns(F.length-x,0),X=ve(q);++$<q;)X[$]=F[x+$];$=-1;for(var ie=ve(x+1);++$<x;)ie[$]=F[$];return ie[x]=E(X),tl(g,this,ie)}}function UW(g,x){return x.length<2?g:xg(g,Xl(x,0,-1))}function dEe(g,x){for(var E=g.length,F=Ys(x.length,E),$=ca(g);F--;){var q=x[F];g[F]=Lh(q,E)?$[q]:n}return g}function w7(g,x){if(!(x==="constructor"&&typeof g[x]=="function")&&x!="__proto__")return g[x]}var zW=qW(cW),ax=DCe||function(g,x){return Rs.setTimeout(g,x)},_7=qW(Lke);function jW(g,x,E){var F=x+"";return _7(g,iEe(F,pEe(tEe(F),E)))}function qW(g){var x=0,E=0;return function(){var F=ICe(),$=P-(F-E);if(E=F,$>0){if(++x>=N)return arguments[0]}else x=0;return g.apply(n,arguments)}}function K4(g,x){var E=-1,F=g.length,$=F-1;for(x=x===n?F:x;++E<x;){var q=i7(E,$),X=g[q];g[q]=g[E],g[E]=X}return g.length=x,g}var VW=uEe(function(g){var x=[];return g.charCodeAt(0)===46&&x.push(""),g.replace(y4,function(E,F,$,q){x.push($?q.replace(et,"$1"):F||E)}),x});function Hc(g){if(typeof g=="string"||il(g))return g;var x=g+"";return x=="0"&&1/g==-B?"-0":x}function _g(g){if(g!=null){try{return C4.call(g)}catch{}try{return g+""}catch{}}return""}function pEe(g,x){return Wl(se,function(E){var F="_."+E[0];x&E[1]&&!x4(g,F)&&g.push(F)}),g.sort()}function WW(g){if(g instanceof _n)return g.clone();var x=new Gl(g.__wrapped__,g.__chain__);return x.__actions__=ca(g.__actions__),x.__index__=g.__index__,x.__values__=g.__values__,x}function gEe(g,x,E){(E?Oo(g,x,E):x===n)?x=1:x=ns(rn(x),0);var F=g==null?0:g.length;if(!F||x<1)return[];for(var $=0,q=0,X=ve(I4(F/x));$<F;)X[q++]=Xl(g,$,$+=x);return X}function mEe(g){for(var x=-1,E=g==null?0:g.length,F=0,$=[];++x<E;){var q=g[x];q&&($[F++]=q)}return $}function yEe(){var g=arguments.length;if(!g)return[];for(var x=ve(g-1),E=arguments[0],F=g;F--;)x[F-1]=arguments[F];return yp(Qt(E)?ca(E):[E],Fs(x,1))}var bEe=pn(function(g,x){return Ni(g)?tx(g,Fs(x,1,Ni,!0)):[]}),vEe=pn(function(g,x){var E=Kl(x);return Ni(E)&&(E=n),Ni(g)?tx(g,Fs(x,1,Ni,!0),_t(E,2)):[]}),xEe=pn(function(g,x){var E=Kl(x);return Ni(E)&&(E=n),Ni(g)?tx(g,Fs(x,1,Ni,!0),n,E):[]});function wEe(g,x,E){var F=g==null?0:g.length;return F?(x=E||x===n?1:rn(x),Xl(g,x<0?0:x,F)):[]}function _Ee(g,x,E){var F=g==null?0:g.length;return F?(x=E||x===n?1:rn(x),x=F-x,Xl(g,0,x<0?0:x)):[]}function SEe(g,x){return g&&g.length?j4(g,_t(x,3),!0,!0):[]}function AEe(g,x){return g&&g.length?j4(g,_t(x,3),!0):[]}function CEe(g,x,E,F){var $=g==null?0:g.length;return $?(E&&typeof E!="number"&&Oo(g,x,E)&&(E=0,F=$),yke(g,x,E,F)):[]}function HW(g,x,E){var F=g==null?0:g.length;if(!F)return-1;var $=E==null?0:rn(E);return $<0&&($=ns(F+$,0)),w4(g,_t(x,3),$)}function GW(g,x,E){var F=g==null?0:g.length;if(!F)return-1;var $=F-1;return E!==n&&($=rn(E),$=E<0?ns(F+$,0):Ys($,F-1)),w4(g,_t(x,3),$,!0)}function YW(g){var x=g==null?0:g.length;return x?Fs(g,1):[]}function kEe(g){var x=g==null?0:g.length;return x?Fs(g,B):[]}function EEe(g,x){var E=g==null?0:g.length;return E?(x=x===n?1:rn(x),Fs(g,x)):[]}function DEe(g){for(var x=-1,E=g==null?0:g.length,F={};++x<E;){var $=g[x];F[$[0]]=$[1]}return F}function XW(g){return g&&g.length?g[0]:n}function TEe(g,x,E){var F=g==null?0:g.length;if(!F)return-1;var $=E==null?0:rn(E);return $<0&&($=ns(F+$,0)),$1(g,x,$)}function OEe(g){var x=g==null?0:g.length;return x?Xl(g,0,-1):[]}var MEe=pn(function(g){var x=ii(g,u7);return x.length&&x[0]===g[0]?ZO(x):[]}),IEe=pn(function(g){var x=Kl(g),E=ii(g,u7);return x===Kl(E)?x=n:E.pop(),E.length&&E[0]===g[0]?ZO(E,_t(x,2)):[]}),REe=pn(function(g){var x=Kl(g),E=ii(g,u7);return x=typeof x=="function"?x:n,x&&E.pop(),E.length&&E[0]===g[0]?ZO(E,n,x):[]});function FEe(g,x){return g==null?"":OCe.call(g,x)}function Kl(g){var x=g==null?0:g.length;return x?g[x-1]:n}function NEe(g,x,E){var F=g==null?0:g.length;if(!F)return-1;var $=F;return E!==n&&($=rn(E),$=$<0?ns(F+$,0):Ys($,F-1)),x===x?pCe(g,x,$):w4(g,TV,$,!0)}function LEe(g,x){return g&&g.length?oW(g,rn(x)):n}var PEe=pn(KW);function KW(g,x){return g&&g.length&&x&&x.length?r7(g,x):g}function BEe(g,x,E){return g&&g.length&&x&&x.length?r7(g,x,_t(E,2)):g}function $Ee(g,x,E){return g&&g.length&&x&&x.length?r7(g,x,n,E):g}var UEe=Nh(function(g,x){var E=g==null?0:g.length,F=XO(g,x);return uW(g,ii(x,function($){return Lh($,E)?+$:$}).sort(vW)),F});function zEe(g,x){var E=[];if(!(g&&g.length))return E;var F=-1,$=[],q=g.length;for(x=_t(x,3);++F<q;){var X=g[F];x(X,F,g)&&(E.push(X),$.push(F))}return uW(g,$),E}function S7(g){return g==null?g:FCe.call(g)}function jEe(g,x,E){var F=g==null?0:g.length;return F?(E&&typeof E!="number"&&Oo(g,x,E)?(x=0,E=F):(x=x==null?0:rn(x),E=E===n?F:rn(E)),Xl(g,x,E)):[]}function qEe(g,x){return z4(g,x)}function VEe(g,x,E){return o7(g,x,_t(E,2))}function WEe(g,x){var E=g==null?0:g.length;if(E){var F=z4(g,x);if(F<E&&Vu(g[F],x))return F}return-1}function HEe(g,x){return z4(g,x,!0)}function GEe(g,x,E){return o7(g,x,_t(E,2),!0)}function YEe(g,x){var E=g==null?0:g.length;if(E){var F=z4(g,x,!0)-1;if(Vu(g[F],x))return F}return-1}function XEe(g){return g&&g.length?fW(g):[]}function KEe(g,x){return g&&g.length?fW(g,_t(x,2)):[]}function QEe(g){var x=g==null?0:g.length;return x?Xl(g,1,x):[]}function JEe(g,x,E){return g&&g.length?(x=E||x===n?1:rn(x),Xl(g,0,x<0?0:x)):[]}function ZEe(g,x,E){var F=g==null?0:g.length;return F?(x=E||x===n?1:rn(x),x=F-x,Xl(g,x<0?0:x,F)):[]}function e5e(g,x){return g&&g.length?j4(g,_t(x,3),!1,!0):[]}function t5e(g,x){return g&&g.length?j4(g,_t(x,3)):[]}var n5e=pn(function(g){return wp(Fs(g,1,Ni,!0))}),r5e=pn(function(g){var x=Kl(g);return Ni(x)&&(x=n),wp(Fs(g,1,Ni,!0),_t(x,2))}),i5e=pn(function(g){var x=Kl(g);return x=typeof x=="function"?x:n,wp(Fs(g,1,Ni,!0),n,x)});function s5e(g){return g&&g.length?wp(g):[]}function o5e(g,x){return g&&g.length?wp(g,_t(x,2)):[]}function a5e(g,x){return x=typeof x=="function"?x:n,g&&g.length?wp(g,n,x):[]}function A7(g){if(!(g&&g.length))return[];var x=0;return g=mp(g,function(E){if(Ni(E))return x=ns(E.length,x),!0}),zO(x,function(E){return ii(g,BO(E))})}function QW(g,x){if(!(g&&g.length))return[];var E=A7(g);return x==null?E:ii(E,function(F){return tl(x,n,F)})}var l5e=pn(function(g,x){return Ni(g)?tx(g,x):[]}),u5e=pn(function(g){return l7(mp(g,Ni))}),c5e=pn(function(g){var x=Kl(g);return Ni(x)&&(x=n),l7(mp(g,Ni),_t(x,2))}),f5e=pn(function(g){var x=Kl(g);return x=typeof x=="function"?x:n,l7(mp(g,Ni),n,x)}),h5e=pn(A7);function d5e(g,x){return gW(g||[],x||[],ex)}function p5e(g,x){return gW(g||[],x||[],ix)}var g5e=pn(function(g){var x=g.length,E=x>1?g[x-1]:n;return E=typeof E=="function"?(g.pop(),E):n,QW(g,E)});function JW(g){var x=j(g);return x.__chain__=!0,x}function m5e(g,x){return x(g),g}function Q4(g,x){return x(g)}var y5e=Nh(function(g){var x=g.length,E=x?g[0]:0,F=this.__wrapped__,$=function(q){return XO(q,g)};return x>1||this.__actions__.length||!(F instanceof _n)||!Lh(E)?this.thru($):(F=F.slice(E,+E+(x?1:0)),F.__actions__.push({func:Q4,args:[$],thisArg:n}),new Gl(F,this.__chain__).thru(function(q){return x&&!q.length&&q.push(n),q}))});function b5e(){return JW(this)}function v5e(){return new Gl(this.value(),this.__chain__)}function x5e(){this.__values__===n&&(this.__values__=hH(this.value()));var g=this.__index__>=this.__values__.length,x=g?n:this.__values__[this.__index__++];return{done:g,value:x}}function w5e(){return this}function _5e(g){for(var x,E=this;E instanceof L4;){var F=WW(E);F.__index__=0,F.__values__=n,x?$.__wrapped__=F:x=F;var $=F;E=E.__wrapped__}return $.__wrapped__=g,x}function S5e(){var g=this.__wrapped__;if(g instanceof _n){var x=g;return this.__actions__.length&&(x=new _n(this)),x=x.reverse(),x.__actions__.push({func:Q4,args:[S7],thisArg:n}),new Gl(x,this.__chain__)}return this.thru(S7)}function A5e(){return pW(this.__wrapped__,this.__actions__)}var C5e=q4(function(g,x,E){pr.call(g,E)?++g[E]:Rh(g,E,1)});function k5e(g,x,E){var F=Qt(g)?EV:mke;return E&&Oo(g,x,E)&&(x=n),F(g,_t(x,3))}function E5e(g,x){var E=Qt(g)?mp:QV;return E(g,_t(x,3))}var D5e=CW(HW),T5e=CW(GW);function O5e(g,x){return Fs(J4(g,x),1)}function M5e(g,x){return Fs(J4(g,x),B)}function I5e(g,x,E){return E=E===n?1:rn(E),Fs(J4(g,x),E)}function ZW(g,x){var E=Qt(g)?Wl:xp;return E(g,_t(x,3))}function eH(g,x){var E=Qt(g)?Q6e:KV;return E(g,_t(x,3))}var R5e=q4(function(g,x,E){pr.call(g,E)?g[E].push(x):Rh(g,E,[x])});function F5e(g,x,E,F){g=fa(g)?g:Q1(g),E=E&&!F?rn(E):0;var $=g.length;return E<0&&(E=ns($+E,0)),rA(g)?E<=$&&g.indexOf(x,E)>-1:!!$&&$1(g,x,E)>-1}var N5e=pn(function(g,x,E){var F=-1,$=typeof x=="function",q=fa(g)?ve(g.length):[];return xp(g,function(X){q[++F]=$?tl(x,X,E):nx(X,x,E)}),q}),L5e=q4(function(g,x,E){Rh(g,E,x)});function J4(g,x){var E=Qt(g)?ii:rW;return E(g,_t(x,3))}function P5e(g,x,E,F){return g==null?[]:(Qt(x)||(x=x==null?[]:[x]),E=F?n:E,Qt(E)||(E=E==null?[]:[E]),aW(g,x,E))}var B5e=q4(function(g,x,E){g[E?0:1].push(x)},function(){return[[],[]]});function $5e(g,x,E){var F=Qt(g)?LO:MV,$=arguments.length<3;return F(g,_t(x,4),E,$,xp)}function U5e(g,x,E){var F=Qt(g)?J6e:MV,$=arguments.length<3;return F(g,_t(x,4),E,$,KV)}function z5e(g,x){var E=Qt(g)?mp:QV;return E(g,tA(_t(x,3)))}function j5e(g){var x=Qt(g)?HV:Fke;return x(g)}function q5e(g,x,E){(E?Oo(g,x,E):x===n)?x=1:x=rn(x);var F=Qt(g)?fke:Nke;return F(g,x)}function V5e(g){var x=Qt(g)?hke:Pke;return x(g)}function W5e(g){if(g==null)return 0;if(fa(g))return rA(g)?z1(g):g.length;var x=Xs(g);return x==Ce||x==ht?g.size:t7(g).length}function H5e(g,x,E){var F=Qt(g)?PO:Bke;return E&&Oo(g,x,E)&&(x=n),F(g,_t(x,3))}var G5e=pn(function(g,x){if(g==null)return[];var E=x.length;return E>1&&Oo(g,x[0],x[1])?x=[]:E>2&&Oo(x[0],x[1],x[2])&&(x=[x[0]]),aW(g,Fs(x,1),[])}),Z4=ECe||function(){return Rs.Date.now()};function Y5e(g,x){if(typeof x!="function")throw new Hl(o);return g=rn(g),function(){if(--g<1)return x.apply(this,arguments)}}function tH(g,x,E){return x=E?n:x,x=g&&x==null?g.length:x,Fh(g,C,n,n,n,n,x)}function nH(g,x){var E;if(typeof x!="function")throw new Hl(o);return g=rn(g),function(){return--g>0&&(E=x.apply(this,arguments)),g<=1&&(x=n),E}}var C7=pn(function(g,x,E){var F=y;if(E.length){var $=bp(E,X1(C7));F|=S}return Fh(g,F,x,E,$)}),rH=pn(function(g,x,E){var F=y|b;if(E.length){var $=bp(E,X1(rH));F|=S}return Fh(x,F,g,E,$)});function iH(g,x,E){x=E?n:x;var F=Fh(g,w,n,n,n,n,n,x);return F.placeholder=iH.placeholder,F}function sH(g,x,E){x=E?n:x;var F=Fh(g,_,n,n,n,n,n,x);return F.placeholder=sH.placeholder,F}function oH(g,x,E){var F,$,q,X,ie,ce,Ae=0,ke=!1,Re=!1,We=!0;if(typeof g!="function")throw new Hl(o);x=Ql(x)||0,hi(E)&&(ke=!!E.leading,Re="maxWait"in E,q=Re?ns(Ql(E.maxWait)||0,x):q,We="trailing"in E?!!E.trailing:We);function st(Li){var Wu=F,$h=$;return F=$=n,Ae=Li,X=g.apply($h,Wu),X}function Dt(Li){return Ae=Li,ie=ax(xn,x),ke?st(Li):X}function cn(Li){var Wu=Li-ce,$h=Li-Ae,CH=x-Wu;return Re?Ys(CH,q-$h):CH}function Tt(Li){var Wu=Li-ce,$h=Li-Ae;return ce===n||Wu>=x||Wu<0||Re&&$h>=q}function xn(){var Li=Z4();if(Tt(Li))return En(Li);ie=ax(xn,cn(Li))}function En(Li){return ie=n,We&&F?st(Li):(F=$=n,X)}function sl(){ie!==n&&mW(ie),Ae=0,F=ce=$=ie=n}function Mo(){return ie===n?X:En(Z4())}function ol(){var Li=Z4(),Wu=Tt(Li);if(F=arguments,$=this,ce=Li,Wu){if(ie===n)return Dt(ce);if(Re)return mW(ie),ie=ax(xn,x),st(ce)}return ie===n&&(ie=ax(xn,x)),X}return ol.cancel=sl,ol.flush=Mo,ol}var X5e=pn(function(g,x){return XV(g,1,x)}),K5e=pn(function(g,x,E){return XV(g,Ql(x)||0,E)});function Q5e(g){return Fh(g,T)}function eA(g,x){if(typeof g!="function"||x!=null&&typeof x!="function")throw new Hl(o);var E=function(){var F=arguments,$=x?x.apply(this,F):F[0],q=E.cache;if(q.has($))return q.get($);var X=g.apply(this,F);return E.cache=q.set($,X)||q,X};return E.cache=new(eA.Cache||Ih),E}eA.Cache=Ih;function tA(g){if(typeof g!="function")throw new Hl(o);return function(){var x=arguments;switch(x.length){case 0:return!g.call(this);case 1:return!g.call(this,x[0]);case 2:return!g.call(this,x[0],x[1]);case 3:return!g.call(this,x[0],x[1],x[2])}return!g.apply(this,x)}}function J5e(g){return nH(2,g)}var Z5e=$ke(function(g,x){x=x.length==1&&Qt(x[0])?ii(x[0],nl(_t())):ii(Fs(x,1),nl(_t()));var E=x.length;return pn(function(F){for(var $=-1,q=Ys(F.length,E);++$<q;)F[$]=x[$].call(this,F[$]);return tl(g,this,F)})}),k7=pn(function(g,x){var E=bp(x,X1(k7));return Fh(g,S,n,x,E)}),aH=pn(function(g,x){var E=bp(x,X1(aH));return Fh(g,A,n,x,E)}),e8e=Nh(function(g,x){return Fh(g,D,n,n,n,x)});function t8e(g,x){if(typeof g!="function")throw new Hl(o);return x=x===n?x:rn(x),pn(g,x)}function n8e(g,x){if(typeof g!="function")throw new Hl(o);return x=x==null?0:ns(rn(x),0),pn(function(E){var F=E[x],$=Sp(E,0,x);return F&&yp($,F),tl(g,this,$)})}function r8e(g,x,E){var F=!0,$=!0;if(typeof g!="function")throw new Hl(o);return hi(E)&&(F="leading"in E?!!E.leading:F,$="trailing"in E?!!E.trailing:$),oH(g,x,{leading:F,maxWait:x,trailing:$})}function i8e(g){return tH(g,1)}function s8e(g,x){return k7(c7(x),g)}function o8e(){if(!arguments.length)return[];var g=arguments[0];return Qt(g)?g:[g]}function a8e(g){return Yl(g,d)}function l8e(g,x){return x=typeof x=="function"?x:n,Yl(g,d,x)}function u8e(g){return Yl(g,f|d)}function c8e(g,x){return x=typeof x=="function"?x:n,Yl(g,f|d,x)}function f8e(g,x){return x==null||YV(g,x,ms(x))}function Vu(g,x){return g===x||g!==g&&x!==x}var h8e=G4(JO),d8e=G4(function(g,x){return g>=x}),Sg=eW((function(){return arguments})())?eW:function(g){return Ei(g)&&pr.call(g,"callee")&&!UV.call(g,"callee")},Qt=ve.isArray,p8e=wV?nl(wV):_ke;function fa(g){return g!=null&&nA(g.length)&&!Ph(g)}function Ni(g){return Ei(g)&&fa(g)}function g8e(g){return g===!0||g===!1||Ei(g)&&To(g)==me}var Ap=TCe||P7,m8e=_V?nl(_V):Ske;function y8e(g){return Ei(g)&&g.nodeType===1&&!lx(g)}function b8e(g){if(g==null)return!0;if(fa(g)&&(Qt(g)||typeof g=="string"||typeof g.splice=="function"||Ap(g)||K1(g)||Sg(g)))return!g.length;var x=Xs(g);if(x==Ce||x==ht)return!g.size;if(ox(g))return!t7(g).length;for(var E in g)if(pr.call(g,E))return!1;return!0}function v8e(g,x){return rx(g,x)}function x8e(g,x,E){E=typeof E=="function"?E:n;var F=E?E(g,x):n;return F===n?rx(g,x,n,E):!!F}function E7(g){if(!Ei(g))return!1;var x=To(g);return x==ge||x==de||typeof g.message=="string"&&typeof g.name=="string"&&!lx(g)}function w8e(g){return typeof g=="number"&&jV(g)}function Ph(g){if(!hi(g))return!1;var x=To(g);return x==oe||x==Fe||x==fe||x==Vt}function lH(g){return typeof g=="number"&&g==rn(g)}function nA(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=z}function hi(g){var x=typeof g;return g!=null&&(x=="object"||x=="function")}function Ei(g){return g!=null&&typeof g=="object"}var uH=SV?nl(SV):Cke;function _8e(g,x){return g===x||e7(g,x,y7(x))}function S8e(g,x,E){return E=typeof E=="function"?E:n,e7(g,x,y7(x),E)}function A8e(g){return cH(g)&&g!=+g}function C8e(g){if(lEe(g))throw new Gt(s);return tW(g)}function k8e(g){return g===null}function E8e(g){return g==null}function cH(g){return typeof g=="number"||Ei(g)&&To(g)==je}function lx(g){if(!Ei(g)||To(g)!=Ee)return!1;var x=T4(g);if(x===null)return!0;var E=pr.call(x,"constructor")&&x.constructor;return typeof E=="function"&&E instanceof E&&C4.call(E)==SCe}var D7=AV?nl(AV):kke;function D8e(g){return lH(g)&&g>=-z&&g<=z}var fH=CV?nl(CV):Eke;function rA(g){return typeof g=="string"||!Qt(g)&&Ei(g)&&To(g)==ln}function il(g){return typeof g=="symbol"||Ei(g)&&To(g)==er}var K1=kV?nl(kV):Dke;function T8e(g){return g===n}function O8e(g){return Ei(g)&&Xs(g)==Be}function M8e(g){return Ei(g)&&To(g)==dt}var I8e=G4(n7),R8e=G4(function(g,x){return g<=x});function hH(g){if(!g)return[];if(fa(g))return rA(g)?ju(g):ca(g);if(X2&&g[X2])return fCe(g[X2]());var x=Xs(g),E=x==Ce?qO:x==ht?_4:Q1;return E(g)}function Bh(g){if(!g)return g===0?g:0;if(g=Ql(g),g===B||g===-B){var x=g<0?-1:1;return x*U}return g===g?g:0}function rn(g){var x=Bh(g),E=x%1;return x===x?E?x-E:x:0}function dH(g){return g?vg(rn(g),0,W):0}function Ql(g){if(typeof g=="number")return g;if(il(g))return V;if(hi(g)){var x=typeof g.valueOf=="function"?g.valueOf():g;g=hi(x)?x+"":x}if(typeof g!="string")return g===0?g:+g;g=IV(g);var E=In.test(g);return E||Er.test(g)?Y6e(g.slice(2),E?2:8):Ut.test(g)?V:+g}function pH(g){return Wc(g,ha(g))}function F8e(g){return g?vg(rn(g),-z,z):g===0?g:0}function ar(g){return g==null?"":rl(g)}var N8e=G1(function(g,x){if(ox(x)||fa(x)){Wc(x,ms(x),g);return}for(var E in x)pr.call(x,E)&&ex(g,E,x[E])}),gH=G1(function(g,x){Wc(x,ha(x),g)}),iA=G1(function(g,x,E,F){Wc(x,ha(x),g,F)}),L8e=G1(function(g,x,E,F){Wc(x,ms(x),g,F)}),P8e=Nh(XO);function B8e(g,x){var E=H1(g);return x==null?E:GV(E,x)}var $8e=pn(function(g,x){g=Dr(g);var E=-1,F=x.length,$=F>2?x[2]:n;for($&&Oo(x[0],x[1],$)&&(F=1);++E<F;)for(var q=x[E],X=ha(q),ie=-1,ce=X.length;++ie<ce;){var Ae=X[ie],ke=g[Ae];(ke===n||Vu(ke,q1[Ae])&&!pr.call(g,Ae))&&(g[Ae]=q[Ae])}return g}),U8e=pn(function(g){return g.push(n,IW),tl(mH,n,g)});function z8e(g,x){return DV(g,_t(x,3),Vc)}function j8e(g,x){return DV(g,_t(x,3),QO)}function q8e(g,x){return g==null?g:KO(g,_t(x,3),ha)}function V8e(g,x){return g==null?g:JV(g,_t(x,3),ha)}function W8e(g,x){return g&&Vc(g,_t(x,3))}function H8e(g,x){return g&&QO(g,_t(x,3))}function G8e(g){return g==null?[]:$4(g,ms(g))}function Y8e(g){return g==null?[]:$4(g,ha(g))}function T7(g,x,E){var F=g==null?n:xg(g,x);return F===n?E:F}function X8e(g,x){return g!=null&&NW(g,x,bke)}function O7(g,x){return g!=null&&NW(g,x,vke)}var K8e=EW(function(g,x,E){x!=null&&typeof x.toString!="function"&&(x=k4.call(x)),g[x]=E},I7(da)),Q8e=EW(function(g,x,E){x!=null&&typeof x.toString!="function"&&(x=k4.call(x)),pr.call(g,x)?g[x].push(E):g[x]=[E]},_t),J8e=pn(nx);function ms(g){return fa(g)?WV(g):t7(g)}function ha(g){return fa(g)?WV(g,!0):Tke(g)}function Z8e(g,x){var E={};return x=_t(x,3),Vc(g,function(F,$,q){Rh(E,x(F,$,q),F)}),E}function eDe(g,x){var E={};return x=_t(x,3),Vc(g,function(F,$,q){Rh(E,$,x(F,$,q))}),E}var tDe=G1(function(g,x,E){U4(g,x,E)}),mH=G1(function(g,x,E,F){U4(g,x,E,F)}),nDe=Nh(function(g,x){var E={};if(g==null)return E;var F=!1;x=ii(x,function(q){return q=_p(q,g),F||(F=q.length>1),q}),Wc(g,g7(g),E),F&&(E=Yl(E,f|h|d,Kke));for(var $=x.length;$--;)a7(E,x[$]);return E});function rDe(g,x){return yH(g,tA(_t(x)))}var iDe=Nh(function(g,x){return g==null?{}:Mke(g,x)});function yH(g,x){if(g==null)return{};var E=ii(g7(g),function(F){return[F]});return x=_t(x),lW(g,E,function(F,$){return x(F,$[0])})}function sDe(g,x,E){x=_p(x,g);var F=-1,$=x.length;for($||($=1,g=n);++F<$;){var q=g==null?n:g[Hc(x[F])];q===n&&(F=$,q=E),g=Ph(q)?q.call(g):q}return g}function oDe(g,x,E){return g==null?g:ix(g,x,E)}function aDe(g,x,E,F){return F=typeof F=="function"?F:n,g==null?g:ix(g,x,E,F)}var bH=OW(ms),vH=OW(ha);function lDe(g,x,E){var F=Qt(g),$=F||Ap(g)||K1(g);if(x=_t(x,4),E==null){var q=g&&g.constructor;$?E=F?new q:[]:hi(g)?E=Ph(q)?H1(T4(g)):{}:E={}}return($?Wl:Vc)(g,function(X,ie,ce){return x(E,X,ie,ce)}),E}function uDe(g,x){return g==null?!0:a7(g,x)}function cDe(g,x,E){return g==null?g:dW(g,x,c7(E))}function fDe(g,x,E,F){return F=typeof F=="function"?F:n,g==null?g:dW(g,x,c7(E),F)}function Q1(g){return g==null?[]:jO(g,ms(g))}function hDe(g){return g==null?[]:jO(g,ha(g))}function dDe(g,x,E){return E===n&&(E=x,x=n),E!==n&&(E=Ql(E),E=E===E?E:0),x!==n&&(x=Ql(x),x=x===x?x:0),vg(Ql(g),x,E)}function pDe(g,x,E){return x=Bh(x),E===n?(E=x,x=0):E=Bh(E),g=Ql(g),xke(g,x,E)}function gDe(g,x,E){if(E&&typeof E!="boolean"&&Oo(g,x,E)&&(x=E=n),E===n&&(typeof x=="boolean"?(E=x,x=n):typeof g=="boolean"&&(E=g,g=n)),g===n&&x===n?(g=0,x=1):(g=Bh(g),x===n?(x=g,g=0):x=Bh(x)),g>x){var F=g;g=x,x=F}if(E||g%1||x%1){var $=qV();return Ys(g+$*(x-g+G6e("1e-"+(($+"").length-1))),x)}return i7(g,x)}var mDe=Y1(function(g,x,E){return x=x.toLowerCase(),g+(E?xH(x):x)});function xH(g){return M7(ar(g).toLowerCase())}function wH(g){return g=ar(g),g&&g.replace(ql,oCe).replace(P6e,"")}function yDe(g,x,E){g=ar(g),x=rl(x);var F=g.length;E=E===n?F:vg(rn(E),0,F);var $=E;return E-=x.length,E>=0&&g.slice(E,$)==x}function bDe(g){return g=ar(g),g&&_O.test(g)?g.replace(pg,aCe):g}function vDe(g){return g=ar(g),g&&AO.test(g)?g.replace(W2,"\\$&"):g}var xDe=Y1(function(g,x,E){return g+(E?"-":"")+x.toLowerCase()}),wDe=Y1(function(g,x,E){return g+(E?" ":"")+x.toLowerCase()}),_De=AW("toLowerCase");function SDe(g,x,E){g=ar(g),x=rn(x);var F=x?z1(g):0;if(!x||F>=x)return g;var $=(x-F)/2;return H4(R4($),E)+g+H4(I4($),E)}function ADe(g,x,E){g=ar(g),x=rn(x);var F=x?z1(g):0;return x&&F<x?g+H4(x-F,E):g}function CDe(g,x,E){g=ar(g),x=rn(x);var F=x?z1(g):0;return x&&F<x?H4(x-F,E)+g:g}function kDe(g,x,E){return E||x==null?x=0:x&&(x=+x),RCe(ar(g).replace(H2,""),x||0)}function EDe(g,x,E){return(E?Oo(g,x,E):x===n)?x=1:x=rn(x),s7(ar(g),x)}function DDe(){var g=arguments,x=ar(g[0]);return g.length<3?x:x.replace(g[1],g[2])}var TDe=Y1(function(g,x,E){return g+(E?"_":"")+x.toLowerCase()});function ODe(g,x,E){return E&&typeof E!="number"&&Oo(g,x,E)&&(x=E=n),E=E===n?W:E>>>0,E?(g=ar(g),g&&(typeof x=="string"||x!=null&&!D7(x))&&(x=rl(x),!x&&U1(g))?Sp(ju(g),0,E):g.split(x,E)):[]}var MDe=Y1(function(g,x,E){return g+(E?" ":"")+M7(x)});function IDe(g,x,E){return g=ar(g),E=E==null?0:vg(rn(E),0,g.length),x=rl(x),g.slice(E,E+x.length)==x}function RDe(g,x,E){var F=j.templateSettings;E&&Oo(g,x,E)&&(x=n),g=ar(g),x=iA({},x,F,MW);var $=iA({},x.imports,F.imports,MW),q=ms($),X=jO($,q),ie,ce,Ae=0,ke=x.interpolate||gs,Re="__p += '",We=VO((x.escape||gs).source+"|"+ke.source+"|"+(ke===g4?ut:gs).source+"|"+(x.evaluate||gs).source+"|$","g"),st="//# sourceURL="+(pr.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++j6e+"]")+`
`;g.replace(We,function(Tt,xn,En,sl,Mo,ol){return En||(En=sl),Re+=g.slice(Ae,ol).replace(el,lCe),xn&&(ie=!0,Re+=`' +
__e(`+xn+`) +
'`),Mo&&(ce=!0,Re+=`';
`+Mo+`;
__p += '`),En&&(Re+=`' +
((__t = (`+En+`)) == null ? '' : __t) +
'`),Ae=ol+Tt.length,Tt}),Re+=`';
`;var Dt=pr.call(x,"variable")&&x.variable;if(!Dt)Re=`with (obj) {
`+Re+`
}
`;else if(qe.test(Dt))throw new Gt(a);Re=(ce?Re.replace(Za,""):Re).replace(jc,"$1").replace(Bu,"$1;"),Re="function("+(Dt||"obj")+`) {
`+(Dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ie?", __e = _.escape":"")+(ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Re+`return __p
}`;var cn=SH(function(){return tr(q,st+"return "+Re).apply(n,X)});if(cn.source=Re,E7(cn))throw cn;return cn}function FDe(g){return ar(g).toLowerCase()}function NDe(g){return ar(g).toUpperCase()}function LDe(g,x,E){if(g=ar(g),g&&(E||x===n))return IV(g);if(!g||!(x=rl(x)))return g;var F=ju(g),$=ju(x),q=RV(F,$),X=FV(F,$)+1;return Sp(F,q,X).join("")}function PDe(g,x,E){if(g=ar(g),g&&(E||x===n))return g.slice(0,LV(g)+1);if(!g||!(x=rl(x)))return g;var F=ju(g),$=FV(F,ju(x))+1;return Sp(F,0,$).join("")}function BDe(g,x,E){if(g=ar(g),g&&(E||x===n))return g.replace(H2,"");if(!g||!(x=rl(x)))return g;var F=ju(g),$=RV(F,ju(x));return Sp(F,$).join("")}function $De(g,x){var E=M,F=I;if(hi(x)){var $="separator"in x?x.separator:$;E="length"in x?rn(x.length):E,F="omission"in x?rl(x.omission):F}g=ar(g);var q=g.length;if(U1(g)){var X=ju(g);q=X.length}if(E>=q)return g;var ie=E-z1(F);if(ie<1)return F;var ce=X?Sp(X,0,ie).join(""):g.slice(0,ie);if($===n)return ce+F;if(X&&(ie+=ce.length-ie),D7($)){if(g.slice(ie).search($)){var Ae,ke=ce;for($.global||($=VO($.source,ar(yt.exec($))+"g")),$.lastIndex=0;Ae=$.exec(ke);)var Re=Ae.index;ce=ce.slice(0,Re===n?ie:Re)}}else if(g.indexOf(rl($),ie)!=ie){var We=ce.lastIndexOf($);We>-1&&(ce=ce.slice(0,We))}return ce+F}function UDe(g){return g=ar(g),g&&wO.test(g)?g.replace($u,gCe):g}var zDe=Y1(function(g,x,E){return g+(E?" ":"")+x.toUpperCase()}),M7=AW("toUpperCase");function _H(g,x,E){return g=ar(g),x=E?n:x,x===n?cCe(g)?bCe(g):tCe(g):g.match(x)||[]}var SH=pn(function(g,x){try{return tl(g,n,x)}catch(E){return E7(E)?E:new Gt(E)}}),jDe=Nh(function(g,x){return Wl(x,function(E){E=Hc(E),Rh(g,E,C7(g[E],g))}),g});function qDe(g){var x=g==null?0:g.length,E=_t();return g=x?ii(g,function(F){if(typeof F[1]!="function")throw new Hl(o);return[E(F[0]),F[1]]}):[],pn(function(F){for(var $=-1;++$<x;){var q=g[$];if(tl(q[0],this,F))return tl(q[1],this,F)}})}function VDe(g){return gke(Yl(g,f))}function I7(g){return function(){return g}}function WDe(g,x){return g==null||g!==g?x:g}var HDe=kW(),GDe=kW(!0);function da(g){return g}function R7(g){return nW(typeof g=="function"?g:Yl(g,f))}function YDe(g){return iW(Yl(g,f))}function XDe(g,x){return sW(g,Yl(x,f))}var KDe=pn(function(g,x){return function(E){return nx(E,g,x)}}),QDe=pn(function(g,x){return function(E){return nx(g,E,x)}});function F7(g,x,E){var F=ms(x),$=$4(x,F);E==null&&!(hi(x)&&($.length||!F.length))&&(E=x,x=g,g=this,$=$4(x,ms(x)));var q=!(hi(E)&&"chain"in E)||!!E.chain,X=Ph(g);return Wl($,function(ie){var ce=x[ie];g[ie]=ce,X&&(g.prototype[ie]=function(){var Ae=this.__chain__;if(q||Ae){var ke=g(this.__wrapped__),Re=ke.__actions__=ca(this.__actions__);return Re.push({func:ce,args:arguments,thisArg:g}),ke.__chain__=Ae,ke}return ce.apply(g,yp([this.value()],arguments))})}),g}function JDe(){return Rs._===this&&(Rs._=ACe),this}function N7(){}function ZDe(g){return g=rn(g),pn(function(x){return oW(x,g)})}var eTe=h7(ii),tTe=h7(EV),nTe=h7(PO);function AH(g){return v7(g)?BO(Hc(g)):Ike(g)}function rTe(g){return function(x){return g==null?n:xg(g,x)}}var iTe=DW(),sTe=DW(!0);function L7(){return[]}function P7(){return!1}function oTe(){return{}}function aTe(){return""}function lTe(){return!0}function uTe(g,x){if(g=rn(g),g<1||g>z)return[];var E=W,F=Ys(g,W);x=_t(x),g-=W;for(var $=zO(F,x);++E<g;)x(E);return $}function cTe(g){return Qt(g)?ii(g,Hc):il(g)?[g]:ca(VW(ar(g)))}function fTe(g){var x=++_Ce;return ar(g)+x}var hTe=W4(function(g,x){return g+x},0),dTe=d7("ceil"),pTe=W4(function(g,x){return g/x},1),gTe=d7("floor");function mTe(g){return g&&g.length?B4(g,da,JO):n}function yTe(g,x){return g&&g.length?B4(g,_t(x,2),JO):n}function bTe(g){return OV(g,da)}function vTe(g,x){return OV(g,_t(x,2))}function xTe(g){return g&&g.length?B4(g,da,n7):n}function wTe(g,x){return g&&g.length?B4(g,_t(x,2),n7):n}var _Te=W4(function(g,x){return g*x},1),STe=d7("round"),ATe=W4(function(g,x){return g-x},0);function CTe(g){return g&&g.length?UO(g,da):0}function kTe(g,x){return g&&g.length?UO(g,_t(x,2)):0}return j.after=Y5e,j.ary=tH,j.assign=N8e,j.assignIn=gH,j.assignInWith=iA,j.assignWith=L8e,j.at=P8e,j.before=nH,j.bind=C7,j.bindAll=jDe,j.bindKey=rH,j.castArray=o8e,j.chain=JW,j.chunk=gEe,j.compact=mEe,j.concat=yEe,j.cond=qDe,j.conforms=VDe,j.constant=I7,j.countBy=C5e,j.create=B8e,j.curry=iH,j.curryRight=sH,j.debounce=oH,j.defaults=$8e,j.defaultsDeep=U8e,j.defer=X5e,j.delay=K5e,j.difference=bEe,j.differenceBy=vEe,j.differenceWith=xEe,j.drop=wEe,j.dropRight=_Ee,j.dropRightWhile=SEe,j.dropWhile=AEe,j.fill=CEe,j.filter=E5e,j.flatMap=O5e,j.flatMapDeep=M5e,j.flatMapDepth=I5e,j.flatten=YW,j.flattenDeep=kEe,j.flattenDepth=EEe,j.flip=Q5e,j.flow=HDe,j.flowRight=GDe,j.fromPairs=DEe,j.functions=G8e,j.functionsIn=Y8e,j.groupBy=R5e,j.initial=OEe,j.intersection=MEe,j.intersectionBy=IEe,j.intersectionWith=REe,j.invert=K8e,j.invertBy=Q8e,j.invokeMap=N5e,j.iteratee=R7,j.keyBy=L5e,j.keys=ms,j.keysIn=ha,j.map=J4,j.mapKeys=Z8e,j.mapValues=eDe,j.matches=YDe,j.matchesProperty=XDe,j.memoize=eA,j.merge=tDe,j.mergeWith=mH,j.method=KDe,j.methodOf=QDe,j.mixin=F7,j.negate=tA,j.nthArg=ZDe,j.omit=nDe,j.omitBy=rDe,j.once=J5e,j.orderBy=P5e,j.over=eTe,j.overArgs=Z5e,j.overEvery=tTe,j.overSome=nTe,j.partial=k7,j.partialRight=aH,j.partition=B5e,j.pick=iDe,j.pickBy=yH,j.property=AH,j.propertyOf=rTe,j.pull=PEe,j.pullAll=KW,j.pullAllBy=BEe,j.pullAllWith=$Ee,j.pullAt=UEe,j.range=iTe,j.rangeRight=sTe,j.rearg=e8e,j.reject=z5e,j.remove=zEe,j.rest=t8e,j.reverse=S7,j.sampleSize=q5e,j.set=oDe,j.setWith=aDe,j.shuffle=V5e,j.slice=jEe,j.sortBy=G5e,j.sortedUniq=XEe,j.sortedUniqBy=KEe,j.split=ODe,j.spread=n8e,j.tail=QEe,j.take=JEe,j.takeRight=ZEe,j.takeRightWhile=e5e,j.takeWhile=t5e,j.tap=m5e,j.throttle=r8e,j.thru=Q4,j.toArray=hH,j.toPairs=bH,j.toPairsIn=vH,j.toPath=cTe,j.toPlainObject=pH,j.transform=lDe,j.unary=i8e,j.union=n5e,j.unionBy=r5e,j.unionWith=i5e,j.uniq=s5e,j.uniqBy=o5e,j.uniqWith=a5e,j.unset=uDe,j.unzip=A7,j.unzipWith=QW,j.update=cDe,j.updateWith=fDe,j.values=Q1,j.valuesIn=hDe,j.without=l5e,j.words=_H,j.wrap=s8e,j.xor=u5e,j.xorBy=c5e,j.xorWith=f5e,j.zip=h5e,j.zipObject=d5e,j.zipObjectDeep=p5e,j.zipWith=g5e,j.entries=bH,j.entriesIn=vH,j.extend=gH,j.extendWith=iA,F7(j,j),j.add=hTe,j.attempt=SH,j.camelCase=mDe,j.capitalize=xH,j.ceil=dTe,j.clamp=dDe,j.clone=a8e,j.cloneDeep=u8e,j.cloneDeepWith=c8e,j.cloneWith=l8e,j.conformsTo=f8e,j.deburr=wH,j.defaultTo=WDe,j.divide=pTe,j.endsWith=yDe,j.eq=Vu,j.escape=bDe,j.escapeRegExp=vDe,j.every=k5e,j.find=D5e,j.findIndex=HW,j.findKey=z8e,j.findLast=T5e,j.findLastIndex=GW,j.findLastKey=j8e,j.floor=gTe,j.forEach=ZW,j.forEachRight=eH,j.forIn=q8e,j.forInRight=V8e,j.forOwn=W8e,j.forOwnRight=H8e,j.get=T7,j.gt=h8e,j.gte=d8e,j.has=X8e,j.hasIn=O7,j.head=XW,j.identity=da,j.includes=F5e,j.indexOf=TEe,j.inRange=pDe,j.invoke=J8e,j.isArguments=Sg,j.isArray=Qt,j.isArrayBuffer=p8e,j.isArrayLike=fa,j.isArrayLikeObject=Ni,j.isBoolean=g8e,j.isBuffer=Ap,j.isDate=m8e,j.isElement=y8e,j.isEmpty=b8e,j.isEqual=v8e,j.isEqualWith=x8e,j.isError=E7,j.isFinite=w8e,j.isFunction=Ph,j.isInteger=lH,j.isLength=nA,j.isMap=uH,j.isMatch=_8e,j.isMatchWith=S8e,j.isNaN=A8e,j.isNative=C8e,j.isNil=E8e,j.isNull=k8e,j.isNumber=cH,j.isObject=hi,j.isObjectLike=Ei,j.isPlainObject=lx,j.isRegExp=D7,j.isSafeInteger=D8e,j.isSet=fH,j.isString=rA,j.isSymbol=il,j.isTypedArray=K1,j.isUndefined=T8e,j.isWeakMap=O8e,j.isWeakSet=M8e,j.join=FEe,j.kebabCase=xDe,j.last=Kl,j.lastIndexOf=NEe,j.lowerCase=wDe,j.lowerFirst=_De,j.lt=I8e,j.lte=R8e,j.max=mTe,j.maxBy=yTe,j.mean=bTe,j.meanBy=vTe,j.min=xTe,j.minBy=wTe,j.stubArray=L7,j.stubFalse=P7,j.stubObject=oTe,j.stubString=aTe,j.stubTrue=lTe,j.multiply=_Te,j.nth=LEe,j.noConflict=JDe,j.noop=N7,j.now=Z4,j.pad=SDe,j.padEnd=ADe,j.padStart=CDe,j.parseInt=kDe,j.random=gDe,j.reduce=$5e,j.reduceRight=U5e,j.repeat=EDe,j.replace=DDe,j.result=sDe,j.round=STe,j.runInContext=le,j.sample=j5e,j.size=W5e,j.snakeCase=TDe,j.some=H5e,j.sortedIndex=qEe,j.sortedIndexBy=VEe,j.sortedIndexOf=WEe,j.sortedLastIndex=HEe,j.sortedLastIndexBy=GEe,j.sortedLastIndexOf=YEe,j.startCase=MDe,j.startsWith=IDe,j.subtract=ATe,j.sum=CTe,j.sumBy=kTe,j.template=RDe,j.times=uTe,j.toFinite=Bh,j.toInteger=rn,j.toLength=dH,j.toLower=FDe,j.toNumber=Ql,j.toSafeInteger=F8e,j.toString=ar,j.toUpper=NDe,j.trim=LDe,j.trimEnd=PDe,j.trimStart=BDe,j.truncate=$De,j.unescape=UDe,j.uniqueId=fTe,j.upperCase=zDe,j.upperFirst=M7,j.each=ZW,j.eachRight=eH,j.first=XW,F7(j,(function(){var g={};return Vc(j,function(x,E){pr.call(j.prototype,E)||(g[E]=x)}),g})(),{chain:!1}),j.VERSION=r,Wl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){j[g].placeholder=j}),Wl(["drop","take"],function(g,x){_n.prototype[g]=function(E){E=E===n?1:ns(rn(E),0);var F=this.__filtered__&&!x?new _n(this):this.clone();return F.__filtered__?F.__takeCount__=Ys(E,F.__takeCount__):F.__views__.push({size:Ys(E,W),type:g+(F.__dir__<0?"Right":"")}),F},_n.prototype[g+"Right"]=function(E){return this.reverse()[g](E).reverse()}}),Wl(["filter","map","takeWhile"],function(g,x){var E=x+1,F=E==O||E==L;_n.prototype[g]=function($){var q=this.clone();return q.__iteratees__.push({iteratee:_t($,3),type:E}),q.__filtered__=q.__filtered__||F,q}}),Wl(["head","last"],function(g,x){var E="take"+(x?"Right":"");_n.prototype[g]=function(){return this[E](1).value()[0]}}),Wl(["initial","tail"],function(g,x){var E="drop"+(x?"":"Right");_n.prototype[g]=function(){return this.__filtered__?new _n(this):this[E](1)}}),_n.prototype.compact=function(){return this.filter(da)},_n.prototype.find=function(g){return this.filter(g).head()},_n.prototype.findLast=function(g){return this.reverse().find(g)},_n.prototype.invokeMap=pn(function(g,x){return typeof g=="function"?new _n(this):this.map(function(E){return nx(E,g,x)})}),_n.prototype.reject=function(g){return this.filter(tA(_t(g)))},_n.prototype.slice=function(g,x){g=rn(g);var E=this;return E.__filtered__&&(g>0||x<0)?new _n(E):(g<0?E=E.takeRight(-g):g&&(E=E.drop(g)),x!==n&&(x=rn(x),E=x<0?E.dropRight(-x):E.take(x-g)),E)},_n.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},_n.prototype.toArray=function(){return this.take(W)},Vc(_n.prototype,function(g,x){var E=/^(?:filter|find|map|reject)|While$/.test(x),F=/^(?:head|last)$/.test(x),$=j[F?"take"+(x=="last"?"Right":""):x],q=F||/^find/.test(x);$&&(j.prototype[x]=function(){var X=this.__wrapped__,ie=F?[1]:arguments,ce=X instanceof _n,Ae=ie[0],ke=ce||Qt(X),Re=function(xn){var En=$.apply(j,yp([xn],ie));return F&&We?En[0]:En};ke&&E&&typeof Ae=="function"&&Ae.length!=1&&(ce=ke=!1);var We=this.__chain__,st=!!this.__actions__.length,Dt=q&&!We,cn=ce&&!st;if(!q&&ke){X=cn?X:new _n(this);var Tt=g.apply(X,ie);return Tt.__actions__.push({func:Q4,args:[Re],thisArg:n}),new Gl(Tt,We)}return Dt&&cn?g.apply(this,ie):(Tt=this.thru(Re),Dt?F?Tt.value()[0]:Tt.value():Tt)})}),Wl(["pop","push","shift","sort","splice","unshift"],function(g){var x=S4[g],E=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",F=/^(?:pop|shift)$/.test(g);j.prototype[g]=function(){var $=arguments;if(F&&!this.__chain__){var q=this.value();return x.apply(Qt(q)?q:[],$)}return this[E](function(X){return x.apply(Qt(X)?X:[],$)})}}),Vc(_n.prototype,function(g,x){var E=j[x];if(E){var F=E.name+"";pr.call(W1,F)||(W1[F]=[]),W1[F].push({name:x,func:E})}}),W1[V4(n,b).name]=[{name:"wrapper",func:n}],_n.prototype.clone=UCe,_n.prototype.reverse=zCe,_n.prototype.value=jCe,j.prototype.at=y5e,j.prototype.chain=b5e,j.prototype.commit=v5e,j.prototype.next=x5e,j.prototype.plant=_5e,j.prototype.reverse=S5e,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=A5e,j.prototype.first=j.prototype.head,X2&&(j.prototype[X2]=w5e),j}),j1=vCe();gg?((gg.exports=j1)._=j1,RO._=j1):Rs._=j1}).call(Gkt)})(XC,XC.exports)),XC.exports}var cP=Ykt();const u6e=Zq(cP),Xkt={headerHeight:null,columnConfigs:{},onColumnConfigsChange:()=>{},minColumnWidths:{},rowRenderBatchSize:4,minFetchSize:1,renderWindowOffset:400,verticalScrollbarPillHeight:4,verticalScrollbarWidth:24,horizontalScrollbarHeight:16,lineHeight:20,textMaxLines:3,betweenRowPadding:8,betweenColPadding:24,scrollOverflowValue:1e6,onRowClick:null,highlightedRows:null,firstColLeftPadding:8,showRowNumber:!0,onShowRowNumberChange:()=>{},highlightHoveredRow:!1,get rowHeight(){return this.textMaxLines*this.lineHeight+this.betweenRowPadding},DEFAULT_TEXT_MAX_LINES:3,DEFAULT_LINE_HEIGHT:20,DEFAULT_ROW_NUMBER_COL_WIDTH:60};class Kkt{#e=nt(po(Xkt));get config(){return G(this.#e)}set config(e){Oe(this.#e,e,!0)}}const zte=Symbol("config");class br{static initialize(){lu(zte,new Kkt)}static get config(){const e=Sa(zte);if(e==null)throw new Error("config context not yet set");return e.config}}class Qkt{tableModel;tableController;margin=2;isDragging=!1;lastDragX=0;#e=nt(0);get elementWidth(){return G(this.#e)}set elementWidth(e){Oe(this.#e,e,!0)}#t=Pe(()=>this.elementWidth-this.margin*2);get scrollbarWidth(){return G(this.#t)}set scrollbarWidth(e){Oe(this.#t,e)}#n=Pe(()=>this.tableController.viewWidth/this.tableModel.colsRightmostPosition*this.scrollbarWidth);get pillWidth(){return G(this.#n)}set pillWidth(e){Oe(this.#n,e)}#r=Pe(()=>-this.tableController.xScroll/this.tableModel.colsRightmostPosition*this.scrollbarWidth);get pillLeft(){return G(this.#r)}set pillLeft(e){Oe(this.#r,e)}constructor({tableModel:e,tableController:n}){this.tableModel=e,this.tableController=n}handlePointerDown=e=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),this.isDragging=!0,this.lastDragX=e.offsetX};handlePointerMove=e=>{this.isDragging&&this.lastDragX!==null&&this.tableController.scroll({deltaX:e.offsetX-this.lastDragX,deltaY:0})};handlePointerUp=e=>{e.target.releasePointerCapture(e.pointerId),this.isDragging=!1,this.lastDragX=null}}const jte=Symbol("mosaic-coordinator");class fP{static get coordinator(){return Sa(jte)??gh()}static set coordinator(e){lu(jte,e)}}const ba="__oid",Jkt=120;class Zkt{schema;#e=nt(po({}));get data(){return G(this.#e)}set data(e){Oe(this.#e,e,!0)}#t=nt(po({}));get defaultColWidths(){return G(this.#t)}set defaultColWidths(e){Oe(this.#t,e,!0)}#n=nt(po([]));get columns(){return G(this.#n)}set columns(e){Oe(this.#n,e,!0)}#r=nt(0);get numRows(){return G(this.#r)}set numRows(e){Oe(this.#r,e,!0)}#l=nt(0);get renderOffset(){return G(this.#l)}set renderOffset(e){Oe(this.#l,e,!0)}#a=nt(po({}));get rowHeightAddition(){return G(this.#a)}set rowHeightAddition(e){Oe(this.#a,e,!0)}#i=Pe(()=>this.columns.reduce((e,n)=>(br.config.columnConfigs[n]?.hidden&&e.add(n),n===ba&&br.config.showRowNumber===!1&&e.add(ba),e),new Set));get hiddenColumns(){return G(this.#i)}set hiddenColumns(e){Oe(this.#i,e)}rowKeyColumn=null;constructor(e){this.schema=e}#s=Pe(()=>Object.keys(this.data).sort((e,n)=>this.data[e][ba]-this.data[n][ba]));get renderableRows(){return G(this.#s)}set renderableRows(e){Oe(this.#s,e)}#o=Pe(()=>this.columns.filter(e=>!this.hiddenColumns.has(e)));get renderableCols(){return G(this.#o)}set renderableCols(e){Oe(this.#o,e)}#u=Pe(()=>this.renderableRows.length===0?this.zeroRowPosition:Math.min(...this.renderableRows.map(e=>this.rowPositions[e])));get minRowPosition(){return G(this.#u)}set minRowPosition(e){Oe(this.#u,e)}#c=Pe(()=>this.renderableRows.length===0?this.finalRowPosition:Math.max(...this.renderableRows.map(e=>this.rowPositions[e])));get maxRowPosition(){return G(this.#c)}set maxRowPosition(e){Oe(this.#c,e)}#d=Pe(()=>{const e=Math.min(...this.renderableRows.map(n=>this.data[n][ba]));return Number.isSafeInteger(e)?e:0});get minRowOID(){return G(this.#d)}set minRowOID(e){Oe(this.#d,e)}#f=Pe(()=>{const e=Math.max(...this.renderableRows.map(n=>this.data[n][ba]));return Number.isSafeInteger(e)?e:0});get maxRowOID(){return G(this.#f)}set maxRowOID(e){Oe(this.#f,e)}#p=Pe(()=>0);get zeroRowPosition(){return G(this.#p)}set zeroRowPosition(e){Oe(this.#p,e)}#h=Pe(()=>(this.numRows-1)*br.config.rowHeight+this.rowPositionOffsets.cumulative);get finalRowPosition(){return G(this.#h)}set finalRowPosition(e){Oe(this.#h,e)}colsLeftmostPosition=0;#y=Pe(()=>{const e=this.renderableCols[this.renderableCols.length-1];return this.colPositions[e]+this.colWidths[e]});get colsRightmostPosition(){return G(this.#y)}set colsRightmostPosition(e){Oe(this.#y,e)}#b=Pe(()=>this.renderableRows.reduce(({offsets:e,cumulative:n},r)=>{e[r]=n;const i=this.rowHeightAddition[r]??0;return{offsets:e,cumulative:n+i}},{offsets:{},cumulative:0}));get rowPositionOffsets(){return G(this.#b)}set rowPositionOffsets(e){Oe(this.#b,e)}#v=Pe(()=>this.renderableRows.reduce((e,n)=>{const r=(this.data[n][ba]-1)*br.config.rowHeight+this.rowPositionOffsets.offsets[n];return e[n]=r,e},{}));get rowPositions(){return G(this.#v)}set rowPositions(e){Oe(this.#v,e)}#x=Pe(()=>{let e=0;return this.columns.reduce((n,r,i)=>(this.hiddenColumns.has(r)||(n[r]=e,e+=this.colWidths[r]),n),{})});get colPositions(){return G(this.#x)}set colPositions(e){Oe(this.#x,e)}#g=Pe(()=>this.renderableRows.reduce((e,n)=>(e[n]=br.config.rowHeight+(this.rowHeightAddition[n]??0),e),{}));get rowHeights(){return G(this.#g)}set rowHeights(e){Oe(this.#g,e)}#m=Pe(()=>this.columns.reduce((e,n,r)=>(e[n]=Math.max(br.config.columnConfigs[n]?.width??this.defaultColWidths[n]??Jkt,br.config.minColumnWidths[n]??0),this.isFirstCol(n)&&(e[n]+=br.config.firstColLeftPadding),this.isLastCol(n)&&(e[n]+=br.config.verticalScrollbarWidth),e),{}));get colWidths(){return G(this.#m)}set colWidths(e){Oe(this.#m,e)}getContent({row:e,col:n}){return this.data[e]?this.data[e][n]:null}getRowData(e){return this.data[e]?this.data[e]:null}getPosition({row:e,col:n}){const r=this.colPositions[n],i=this.rowPositions[e];return{x:r,y:i}}getDimensions({row:e,col:n}){const r=this.colWidths[n],i=this.rowHeights[e];return{width:r,height:i}}getRowParity(e){return this.data[e]&&this.data[e][ba]%2===0?"even":"odd"}isFirstCol(e){return this.renderableCols.indexOf(e)===0}isLastCol(e){return this.renderableCols.indexOf(e)===this.renderableCols.length-1}deleteRow(e){delete this.data[e];const n=this.rowHeightAddition[e]??0;return delete this.rowHeightAddition[e],n}collapseRow(e){const n=this.rowHeightAddition[e]??0;return delete this.rowHeightAddition[e],n}reset(){this.data={},this.rowHeightAddition={}}teardown(){this.reset()}}class eEt extends y1{tableName;onResult;constructor(e,n,r){super(n??void 0),this.tableName=e,this.onResult=r}queryResult(e){const n=e.toArray()[0].count;return this.onResult(n),this}query(e=[]){return Ue.from(this.tableName).select({count:ur()}).where(e)}}const va="__oid";class tEt extends y1{tableName;columns;onResult;onColumnInfo;limit=20;offset=0;sort=null;info=null;columnInfo=null;isReady=!1;constructor(e,n,r,i,s){super(r??void 0),this.tableName=e,this.columns=n,this.onResult=i,this.onColumnInfo=s}async prepare(){if(this.coordinator==null)return;const e=(await e$(this.coordinator,[{table:this.tableName,column:"*"}])).reduce((n,r)=>(n[r.column]=r,n),{});this.columnInfo=e,this.onColumnInfo(e),this.isReady=!0}getSelect({includeRowNumber:e}={includeRowNumber:!0}){const n=this.columns.reduce((r,i)=>(this.columnInfo?.[i]?.sqlType==="BIGINT"?r[i]=yi(_e(i),"TEXT"):r[i]=_e(i),r),{});return e||delete n[va],n}queryResult(e){return this.onResult(e),this}query(e=[]){if(!this.isReady)return null;const n=this.columns.reduce((r,i)=>(this.columnInfo?.[i]?.sqlType==="BIGINT"?r[i]=yi(_e(i),"TEXT"):r[i]=_e(i),r),{});if(n[va]=Nie(),this.sort){const r=this.sort.direction==="ascending"?this.sort.column:Zv(this.sort.column);n[va]=n[va].orderby(r)}return Ue.from(this.tableName).select(n).where(e).limit(this.limit).offset(this.offset)}fetchRows(e,n){this.offset=e,this.limit=n,this.requestUpdate()}}class nEt{model;schema;config;#e=Pe(()=>fP.coordinator);get coordinator(){return G(this.#e)}set coordinator(e){Oe(this.#e,e)}filterBy=null;rowsClient=null;numRowsClient=null;rowKeyColumn=null;#t=nt(null);get element(){return G(this.#t)}set element(e){Oe(this.#t,e,!0)}#n=nt(0);get viewHeight(){return G(this.#n)}set viewHeight(e){Oe(this.#n,e,!0)}#r=nt(0);get viewWidth(){return G(this.#r)}set viewWidth(e){Oe(this.#r,e,!0)}#l=nt(0);get yScroll(){return G(this.#l)}set yScroll(e){Oe(this.#l,e,!0)}#a=nt(0);get xScroll(){return G(this.#a)}set xScroll(e){Oe(this.#a,e,!0)}#i=nt(!1);get isFetching(){return G(this.#i)}set isFetching(e){Oe(this.#i,e,!0)}#s=nt(!1);get isJumping(){return G(this.#s)}set isJumping(e){Oe(this.#s,e,!0)}#o=nt(null);get sort(){return G(this.#o)}set sort(e){Oe(this.#o,e,!0)}#u=nt(!1);get isReady(){return G(this.#u)}set isReady(e){Oe(this.#u,e,!0)}#c=nt(0);get updateKey(){return G(this.#c)}set updateKey(e){Oe(this.#c,e,!0)}#d=nt(!1);get isStale(){return G(this.#d)}set isStale(e){Oe(this.#d,e,!0)}#f=nt(null);get flashedRowId(){return G(this.#f)}set flashedRowId(e){Oe(this.#f,e,!0)}#p=nt(null);get hoveredRowId(){return G(this.#p)}set hoveredRowId(e){Oe(this.#p,e,!0)}#h=Pe(()=>Math.ceil(this.viewHeight/br.config.rowHeight));get rowsOnScreen(){return G(this.#h)}set rowsOnScreen(e){Oe(this.#h,e)}#y=Pe(()=>this.isJumping?0:br.config.renderWindowOffset);get renderWindowOffset(){return G(this.#y)}set renderWindowOffset(e){Oe(this.#y,e)}#b=Pe(()=>{if(this.model.renderableRows.length===0)return null;const e=this.model.renderableRows.filter(r=>{const i=this.model.rowPositions[r]+this.yScroll;return i+this.model.rowHeights[r]>0&&i<this.viewHeight});if(e.length===0)return null;const n=e[0];return this.model.data[n][va]});get firstVisibleRowOID(){return G(this.#b)}set firstVisibleRowOID(e){Oe(this.#b,e)}#v=Pe(()=>Math.max(0,Math.floor(-this.yScroll/br.config.rowHeight)));get offset(){return G(this.#v)}set offset(e){Oe(this.#v,e)}onFetchResolveBegin=null;onFetchResolveEnd=null;constructor(e,n){this.model=e,this.schema=n,this.config=br.config}handleFilterBy=()=>{this.rowsClient&&(this.rowsClient.offset=0,this.rowsClient.limit=this.rowsOnScreen,this.isJumping=!0,this.markStale())};updateData=e=>{if(!this.model||!this.rowKeyColumn)return;this.onFetchResolveBegin&&(this.onFetchResolveBegin(),this.onFetchResolveBegin=null);const n=e.toArray(),r={};for(const i of n){const s=i[this.rowKeyColumn];r[s]=i}this.model.data={...this.model.data,...r},this.onFetchResolveEnd&&(this.onFetchResolveEnd(),this.onFetchResolveEnd=null),this.isFetching=!1};initialize({tableName:e,rowKey:n,columns:r,filterBy:i}){if(this.model.columns=r,this.model.rowKeyColumn=n,this.rowKeyColumn=n,i&&(this.filterBy=i,this.filterBy.addEventListener("value",this.handleFilterBy)),!this.rowKeyColumn)throw new Error("rowkey cannot be null");let s=r.includes(this.rowKeyColumn)?r:[...r,this.rowKeyColumn];this.rowsClient=new tEt(e,s,i,o=>{this.updateData(o)},o=>{this.schema.columnInfo=o,this.computeColWidths(e,r),this.isReady=!0}),this.coordinator.connect(this.rowsClient),this.numRowsClient=new eEt(e,i,o=>{this.model&&(this.model.numRows=o)}),this.coordinator.connect(this.numRowsClient),pi(()=>{if(!this.rowsClient||this.isFetching||!this.isReady)return;const o=-this.renderWindowOffset,a=this.viewHeight+this.renderWindowOffset,l=this.model.maxRowPosition+this.yScroll+this.config.rowHeight,u=this.model.minRowPosition+this.yScroll;if(u<0&&l<0||u>this.viewHeight&&l>this.viewHeight){const m=this.rowsOnScreen;this.isFetching=!0,this.rowsClient.fetchRows(this.offset,m)}else{if(l<a){const y=cP.clamp(Math.ceil((a-l)/this.config.rowHeight),this.config.minFetchSize,this.rowsOnScreen);y>0&&this.model.maxRowOID!==this.model.numRows&&(this.isFetching=!0,this.rowsClient.fetchRows(this.model.maxRowOID,y))}const m=this.model.minRowPosition+this.yScroll;if(m>o&&this.model.minRowOID!==1){const y=cP.clamp(Math.ceil((m-o)/this.config.rowHeight),this.config.minFetchSize,this.rowsOnScreen);y>0&&(this.isFetching=!0,this.rowsClient.fetchRows(Math.max(0,this.model.minRowOID-1-y),y))}}const c=CAe(this.model.renderableRows);let f=0;for(;this.model.rowPositions[c[f]]+this.yScroll+this.model.rowHeights[c[f]]<0;)this.yScroll+=this.model.collapseRow(c[f]),f+=1;let h=c.length-1;for(;this.model.rowPositions[c[h]]+this.yScroll>this.viewHeight;)this.model.collapseRow(c[h]),h-=1;let d=0;for(;this.model.rowPositions[c[d]]+this.yScroll+this.model.rowHeights[c[d]]<o;)this.model.deleteRow(c[d]),d+=1;let p=c.length-1;for(;this.model.rowPositions[c[p]]+this.yScroll>a;)this.model.deleteRow(c[p]),p-=1})}teardown(){this.filterBy&&this.filterBy.removeEventListener("value",this.handleFilterBy)}cellIsVisible(e){const{x:n,y:r}=this.model.getPosition(e),{width:i,height:s}=this.model.getDimensions(e),o=n+this.xScroll,a=r+this.yScroll;return o+i>=0&&o<=this.viewWidth&&a+s>=0&&a<=this.viewHeight}rowIsVisible(e){const n=this.model.rowPositions[e],r=this.model.rowHeights[e],i=n+this.yScroll;return i+r>=0&&i<=this.viewHeight}rowStillExists(e){return this.model.data[e]!=null}colIsVisible(e){const n=this.model.colPositions[e],r=this.model.colWidths[e],i=n+this.xScroll;return i+r>=0&&i<=this.viewWidth}scroll({deltaX:e,deltaY:n}){if(Math.abs(n)>Math.abs(e)){const r=this.yScroll-n;this.model.zeroRowPosition+r>0?this.yScroll=-this.model.zeroRowPosition:this.model.finalRowPosition+r<0?this.yScroll=-this.model.finalRowPosition:this.yScroll=r}else{const r=this.xScroll-e;-r<0?this.xScroll=0:-r>Math.max(this.model.colsRightmostPosition,this.viewWidth)-this.viewWidth?this.xScroll=-Math.max(this.model.colsRightmostPosition,this.viewWidth)+this.viewWidth:this.xScroll=r}}handleWheel=e=>{e.preventDefault(),this.isJumping=!1,this.scroll({deltaX:e.deltaX,deltaY:e.deltaY})};jumpToOffset(e){if(!this.rowsClient)return;this.isFetching=!0;const n=this.rowsOnScreen,r=this.onFetchResolveEnd;this.onFetchResolveEnd=()=>{r&&r(),this.yScroll=-(e*this.config.rowHeight)},this.markStale(),this.rowsClient.fetchRows(e,n)}handleSort=e=>{this.rowsClient&&(this.sort=e,this.rowsClient.sort=e,this.resetRows())};resetRows(){this.model.reset(),this.yScroll=0}flashRow(e){this.flashedRowId=e,setTimeout(()=>{this.flashedRowId=null},400)}async scrollToRow(e,n=!0){if(!this.rowsClient)return;this.isFetching=!0;const r=Ue.with({original:this.rowsClient.query(this.rowsClient.filterBy?.predicate(this.rowsClient)).offset(0).limit(this.model.numRows)}).select([va]).from("original").where(ml(_e(this.rowKeyColumn),Ze(e))),i=(await this.coordinator.query(r)).toArray();if(i.length>0){const s=i[0][va]-1;this.onFetchResolveEnd=()=>{n&&this.flashRow(e)},this.jumpToOffset(s)}else this.isFetching=!1,console.error("no row",e,"found")}addHeightToRow(e,n){this.model.rowHeightAddition[e]=(this.model.rowHeightAddition[e]??0)+n}hideColumn(e){e===va?this.config.onShowRowNumberChange?this.config.onShowRowNumberChange(!1):this.config.showRowNumber=!1:(this.config.columnConfigs[e]||(this.config.columnConfigs[e]={}),this.config.columnConfigs[e].hidden=!0)}showColumn(e){e===va?this.config.onShowRowNumberChange?this.config.onShowRowNumberChange(!0):this.config.showRowNumber=!0:(this.config.columnConfigs[e]||(this.config.columnConfigs[e]={}),this.config.columnConfigs[e].hidden=!1)}markStale(){this.isStale=!0;const e=this.onFetchResolveBegin;this.onFetchResolveBegin=()=>{e&&e(),this.resetRows()};const n=this.onFetchResolveEnd;this.onFetchResolveEnd=()=>{n&&n(),this.updateKey+=1,this.isStale=!1}}async computeColWidths(e,n){const r=n.filter(l=>l!==va),i=this.rowsClient?.getSelect({includeRowNumber:!1}),s=r.reduce((l,u)=>(l[u]=0,l),{}),o=Ue.from(e).select(i).offset(0).limit(10),a=(await this.coordinator.query(o)).toArray();for(const l of a)for(const u of r)s[u]=Math.max(s[u],rEt(l[u]));n.includes(va)&&(s[va]=this.config.DEFAULT_ROW_NUMBER_COL_WIDTH),this.model.defaultColWidths=s}}function rEt(t){const e=String(t).length;return e>200?600:e>100?300:e>20?200:e>10?150:120}class iEt{tableController;#e=Pe(()=>this.tableController.element);get tableElement(){return G(this.#e)}set tableElement(e){Oe(this.#e,e)}constructor(e){this.tableController=e}mount(e,n,r,i,s){if(!this.tableElement)return;const o=n.getBoundingClientRect(),a=this.tableElement.getBoundingClientRect(),l=a.top,u=a.left;switch(r){case"inside":switch(s){case"top":e.style.top=o.top-l+"px";break;case"middle":case"bottom":throw new Error("not yet implemented"+r+s)}switch(i){case"left":e.style.left=o.left-u+"px";case"center":case"right":throw new Error("not yet implemented"+r+i)}break;case"outside":switch(s){case"top":e.style.top=o.bottom-l+"px";break;case"middle":case"bottom":throw new Error("not yet implemented"+r+s)}switch(i){case"left":e.style.left=o.left-u+"px";break;case"center":case"right":throw new Error("not yet implemented"+r+i)}break}this.tableElement.appendChild(e)}destroy(e){this.tableElement&&this.tableElement.contains(e)&&this.tableElement.removeChild(e)}}var DI,qte;function sEt(){if(qte)return DI;qte=1;function t(e,n,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),n!==void 0&&(e=e>=n?e:n)),e}return DI=t,DI}var TI,Vte;function oEt(){if(Vte)return TI;Vte=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return TI=e,TI}var OI,Wte;function aEt(){if(Wte)return OI;Wte=1;var t=oEt(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return OI=n,OI}var MI,Hte;function eV(){if(Hte)return MI;Hte=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return MI=t,MI}var II,Gte;function lEt(){if(Gte)return II;Gte=1;var t=typeof Jp=="object"&&Jp&&Jp.Object===Object&&Jp;return II=t,II}var RI,Yte;function c6e(){if(Yte)return RI;Yte=1;var t=lEt(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return RI=n,RI}var FI,Xte;function f6e(){if(Xte)return FI;Xte=1;var t=c6e(),e=t.Symbol;return FI=e,FI}var NI,Kte;function uEt(){if(Kte)return NI;Kte=1;var t=f6e(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var a=n.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var c=r.call(o);return u&&(a?o[i]=l:delete o[i]),c}return NI=s,NI}var LI,Qte;function cEt(){if(Qte)return LI;Qte=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return LI=n,LI}var PI,Jte;function fEt(){if(Jte)return PI;Jte=1;var t=f6e(),e=uEt(),n=cEt(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):n(a)}return PI=o,PI}var BI,Zte;function hEt(){if(Zte)return BI;Zte=1;function t(e){return e!=null&&typeof e=="object"}return BI=t,BI}var $I,ene;function dEt(){if(ene)return $I;ene=1;var t=fEt(),e=hEt(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return $I=r,$I}var UI,tne;function h6e(){if(tne)return UI;tne=1;var t=aEt(),e=eV(),n=dEt(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=s.test(u);return f||o.test(u)?a(u.slice(2),f?2:8):i.test(u)?r:+u}return UI=l,UI}var zI,nne;function pEt(){if(nne)return zI;nne=1;var t=sEt(),e=h6e();function n(r,i,s){return s===void 0&&(s=i,i=void 0),s!==void 0&&(s=e(s),s=s===s?s:0),i!==void 0&&(i=e(i),i=i===i?i:0),t(e(r),i,s)}return zI=n,zI}var gEt=pEt();const mEt=Zq(gEt);var jI,rne;function yEt(){if(rne)return jI;rne=1;var t=c6e(),e=function(){return t.Date.now()};return jI=e,jI}var qI,ine;function bEt(){if(ine)return qI;ine=1;var t=eV(),e=yEt(),n=h6e(),r="Expected a function",i=Math.max,s=Math.min;function o(a,l,u){var c,f,h,d,p,m,y=0,b=!1,v=!1,w=!0;if(typeof a!="function")throw new TypeError(r);l=n(l)||0,t(u)&&(b=!!u.leading,v="maxWait"in u,h=v?i(n(u.maxWait)||0,l):h,w="trailing"in u?!!u.trailing:w);function _(P){var O=c,R=f;return c=f=void 0,y=P,d=a.apply(R,O),d}function S(P){return y=P,p=setTimeout(D,l),b?_(P):d}function A(P){var O=P-m,R=P-y,L=l-O;return v?s(L,h-R):L}function C(P){var O=P-m,R=P-y;return m===void 0||O>=l||O<0||v&&R>=h}function D(){var P=e();if(C(P))return T(P);p=setTimeout(D,A(P))}function T(P){return p=void 0,w&&c?_(P):(c=f=void 0,d)}function M(){p!==void 0&&clearTimeout(p),y=0,c=m=f=p=void 0}function I(){return p===void 0?d:T(e())}function N(){var P=e(),O=C(P);if(c=arguments,f=this,m=P,O){if(p===void 0)return S(m);if(v)return clearTimeout(p),p=setTimeout(D,l),_(m)}return p===void 0&&(p=setTimeout(D,l)),d}return N.cancel=M,N.flush=I,N}return qI=o,qI}var VI,sne;function vEt(){if(sne)return VI;sne=1;var t=bEt(),e=eV(),n="Expected a function";function r(i,s,o){var a=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(a="leading"in o?!!o.leading:a,l="trailing"in o?!!o.trailing:l),t(i,s,{leading:a,maxWait:s,trailing:l})}return VI=r,VI}var xEt=vEt();const one=Zq(xEt);class wEt{tableModel;tableController;isDragging=!1;#e=nt(0);get elementHeight(){return G(this.#e)}set elementHeight(e){Oe(this.#e,e,!0)}#t=nt(0);get labelHeight(){return G(this.#t)}set labelHeight(e){Oe(this.#t,e,!0)}#n=Pe(()=>br.config.verticalScrollbarPillHeight);get pillHeight(){return G(this.#n)}set pillHeight(e){Oe(this.#n,e)}#r=Pe(()=>this.elementHeight-this.pillHeight);get scrollbarHeight(){return G(this.#r)}set scrollbarHeight(e){Oe(this.#r,e)}#l=Pe(()=>this.tableController.firstVisibleRowOID?this.tableController.firstVisibleRowOID:this.tableController.offset+1);get displayRow(){return G(this.#l)}set displayRow(e){Oe(this.#l,e)}#a=Pe(()=>(this.displayRow-1)/(this.tableModel.numRows-1)*this.scrollbarHeight);get pillPosition(){return G(this.#a)}set pillPosition(e){Oe(this.#a,e)}#i=Pe(()=>{if(this.pillPosition===null)return 0;const e=this.pillPosition+this.pillHeight/2-this.labelHeight/2;if(e<0)return e;const n=this.pillPosition+this.pillHeight/2+this.labelHeight/2;return n>this.elementHeight?n-this.elementHeight:0});get labelOffset(){return G(this.#i)}set labelOffset(e){Oe(this.#i,e)}constructor({tableModel:e,tableController:n}){this.tableModel=e,this.tableController=n}computeOffsetFromPointer=e=>{this.isDragging=!0;let n=Math.round(e.offsetY/this.scrollbarHeight*(this.tableModel.numRows-1));return mEt(n,0,this.tableModel.numRows-1)};pointerDown=e=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),this.isDragging=!0;const n=this.computeOffsetFromPointer(e);this.tableController.isJumping=!0,this.tableController.jumpToOffset(n)};handlePointerDown=one(this.pointerDown,50);pointerMove=e=>{if(this.isDragging){const n=this.computeOffsetFromPointer(e);this.tableController.jumpToOffset(n)}};handlePointerMove=one(this.pointerMove,50);handlePointerUp=e=>{e.target.releasePointerCapture(e.pointerId),this.isDragging=!1,this.tableController.isJumping=!1}}class _Et{#e=nt(null);get columnInfo(){return G(this.#e)}set columnInfo(e){Oe(this.#e,e,!0)}#t=Pe(()=>this.columnInfo?Object.keys(this.columnInfo).reduce((e,n)=>(e[n]=this.columnInfo[n].type,e),{}):{});get dataType(){return G(this.#t)}set dataType(e){Oe(this.#t,e)}#n=Pe(()=>this.columnInfo?Object.keys(this.columnInfo).reduce((e,n)=>(e[n]=this.columnInfo[n].sqlType,e),{}):{});get sqlType(){return G(this.#n)}set sqlType(e){Oe(this.#n,e)}}class SEt{tableController;#e=Pe(()=>Math.floor(-this.tableController.yScroll/br.config.scrollOverflowValue)*br.config.scrollOverflowValue);get offset(){return G(this.#e)}set offset(e){Oe(this.#e,e)}constructor(e){this.tableController=e}y(e){return e-this.offset}yScroll(e){return e+this.offset}}const ane=Symbol("schema"),lne=Symbol("model"),une=Symbol("controller"),cne=Symbol("vertical-scrollbar-controller"),fne=Symbol("horizontal-scrollbar-controller"),hne=Symbol("table-portal-controller"),dne=Symbol("overscroll-modifier");class xr{static initialize(){const e=new _Et,n=new Zkt(e),r=new nEt(n,e),i=new wEt({tableModel:n,tableController:r}),s=new Qkt({tableModel:n,tableController:r}),o=new iEt(r),a=new SEt(r);lu(ane,e),lu(lne,n),lu(une,r),lu(cne,i),lu(fne,s),lu(hne,o),lu(dne,a)}static get schema(){return Sa(ane)}static get model(){return Sa(lne)}static get controller(){return Sa(une)}static get verticalScrollbarController(){return Sa(cne)}static get horizontalScrollbarController(){return Sa(fne)}static get tablePortalController(){return Sa(hne)}static get overscrollModifier(){return Sa(dne)}}var AEt=Zn('<div class="horizontal-scrollbar svelte-csucem"><div class="pill svelte-csucem"></div></div>');const CEt={hash:"svelte-csucem",code:".horizontal-scrollbar.svelte-csucem {position:absolute;bottom:0;left:0;width:100%;height:var(--height);transition:opacity 200ms linear;background-color:var(--scrollbar-bg);}.horizontal-scrollbar.svelte-csucem:hover {opacity:1 !important;}.pill.svelte-csucem {width:var(--width);height:calc(var(--height) - var(--margin) * 2);margin:var(--margin);border-radius:2px;background-color:var(--scrollbar-pill-bg);}"};function kEt(t,e){Mi(e,!0),Ri(t,CEt);const n=xr.horizontalScrollbarController,r=xr.controller,i=br.config;let s=nt(0),o=nt(null),a=nt(null),l=0;q2(()=>(l=requestAnimationFrame(f),()=>{cancelAnimationFrame(l)}));function u(){G(o)&&(G(o).style.opacity="0")}const c=u6e.debounce(u,1e3);pi(()=>{G(o)&&(r.xScroll,G(o).style.opacity="1",c())});function f(){Oe(s,n.pillWidth,!0),G(a)&&(G(a).style.transform=`translate(${n.pillLeft}px, 0)`),l=requestAnimationFrame(f)}var h=AEt();let d;var p=cr(h);p.__pointerdown=function(...y){n.handlePointerDown?.apply(this,y)},p.__pointermove=function(...y){n.handlePointerMove?.apply(this,y)},p.__pointerup=function(...y){n.handlePointerUp?.apply(this,y)};let m;ra(p,y=>Oe(a,y),()=>G(a)),rr(h),ra(h,y=>Oe(o,y),()=>G(o)),ji(()=>{d=Qa(h,"",d,{"--height":i.horizontalScrollbarHeight+"px"}),m=Qa(p,"",m,{"--width":G(s)+"px","--margin":n.margin+"px"})}),Ec(h,"clientWidth",y=>n.elementWidth=y),gn(t,h),Ii()}pp(["pointerdown","pointermove","pointerup"]);var EEt=Zn('<div class="vertical-scrollbar svelte-d1fz7o"><div class="pill svelte-d1fz7o"><div class="label svelte-d1fz7o"> </div></div></div>');const DEt={hash:"svelte-d1fz7o",code:".vertical-scrollbar.svelte-d1fz7o {position:absolute;right:0;top:0;width:var(--width);height:calc(100% - var(--offset-bottom));contain:layout;cursor:row-resize;transition:opacity 200ms linear;user-select:none;background-color:var(--scrollbar-bg);}.vertical-scrollbar.svelte-d1fz7o:hover {opacity:1 !important;}.pill.svelte-d1fz7o {--pill-height: 4px;position:relative;pointer-events:none; /* let the container respond to pointer events */top:0;left:0;width:calc(var(--width) - 2px);margin-left:1px;margin-right:1px;height:var(--pill-height);border-radius:2px;will-change:transform;background-color:var(--scrollbar-pill-bg);}.label.svelte-d1fz7o {--offset: 0;position:absolute;pointer-events:none;top:0;left:-4px;font-family:var(--font-family);font-size:14px;white-space:nowrap;padding:2px 4px;box-shadow:var(--shadow);transform:translate(-100%, calc(-50% + var(--pill-height) / 2 - var(--offset)));border-radius:2px;color:var(--secondary-text-color);background-color:var(--scrollbar-label-bg);border:var(--outline);}"};function TEt(t,e){Mi(e,!0),Ri(t,DEt);const n=xr.verticalScrollbarController,r=xr.controller,i=br.config;let s=nt(0),o=nt(0),a=nt(null),l=nt(null),u=nt(null),c=Pe(()=>new Intl.NumberFormat().format(G(o))),f=0;q2(()=>(f=requestAnimationFrame(p),()=>{cancelAnimationFrame(f)}));function h(){G(a)&&(G(a).style.opacity="0")}const d=u6e.debounce(h,1e3);pi(()=>{G(a)&&(r.yScroll,G(a).style.opacity="1",d())});function p(){Oe(s,n.pillPosition??G(s),!0),Oe(o,n.displayRow??G(o),!0),G(l)&&(G(l).style.transform=`translate3d(0, ${G(s)}px, 0)`),G(u)&&G(u).style.setProperty("--offset",n.labelOffset-1+"px"),f=requestAnimationFrame(p)}var m=EEt();m.__pointerdown=function(...S){n.handlePointerDown?.apply(this,S)},m.__pointermove=function(...S){n.handlePointerMove?.apply(this,S)},m.__pointerup=function(...S){n.handlePointerUp?.apply(this,S)};let y;var b=cr(m);let v;var w=cr(b),_=cr(w,!0);rr(w),ra(w,S=>Oe(u,S),()=>G(u)),rr(b),ra(b,S=>Oe(l,S),()=>G(l)),rr(m),ra(m,S=>Oe(a,S),()=>G(a)),ji(()=>{y=Qa(m,"",y,{"--offset-bottom":i.horizontalScrollbarHeight+"px","--width":i.verticalScrollbarWidth+"px"}),v=Qa(b,"",v,{"--pill-height":n.pillHeight+"px"}),Dh(_,G(c))}),Ec(w,"clientHeight",S=>n.labelHeight=S),Ec(m,"clientHeight",S=>n.elementHeight=S),gn(t,m),Ii()}pp(["pointerdown","pointermove","pointerup"]);var OEt=Zn('<div class="bigint-content svelte-1x1osq0"> </div>');const MEt={hash:"svelte-1x1osq0",code:".bigint-content.svelte-1x1osq0 {text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function IEt(t,e){Mi(e,!0),Ri(t,MEt);let n=V2(e,"height");function r(o){return o===null?null:o.toLocaleString()}var i=OEt(),s=cr(i,!0);rr(i),ji(o=>Dh(s,o),[()=>r(e.bigint)]),Ec(i,"clientHeight",n),gn(t,i),Ii()}var REt=Zn("<div></div>");const FEt={hash:"svelte-ubqfz9",code:""};function NEt(t,e){Mi(e,!0),Ri(t,FEt);let n=V2(e,"height");const r=xr.model,i=u=>typeof u=="function"?(c,f)=>{let h=new u(c,f);return{...h.update?{update:h.update.bind(h)}:{},...h.destroy?{destroy:h.destroy.bind(h)}:{}}}:(c,f)=>{let h=new u.class(c,f);return{...h.update?{update:h.update.bind(h)}:{},...h.destroy?{destroy:h.destroy.bind(h)}:{}}};let s=Pe(()=>i(e.customCell)),o=Pe(()=>r.getContent({row:e.row,col:e.col})),a=Pe(()=>r.getRowData(e.row));var l=REt();Qq(l,(u,c)=>G(s)?.(u,c),()=>({value:G(o),rowData:G(a)})),h4(()=>Ec(l,"clientHeight",n)),gn(t,l),Ii()}var LEt=Zn('<img alt=""/>');function PEt(t,e){Mi(e,!0);let n=V2(e,"height");br.config;let r=nt(null);function i(c){let f="";for(let h=0;h<c.length;h++)f+=String.fromCharCode(c[h]);return btoa(f)}function s(c){const f=atob(c);return new Uint8Array([...f].map(h=>h.charCodeAt(0)))}function o(c,f){if(c.length<f.length)return!1;for(let h=0;h<f.length;h++)if(c[h]!=f[h])return!1;return!0}function a(c){return o(c,[137,80,78,71,13,10,26,10])?"image/png":o(c,[255,216,255])?"image/jpeg":o(c,[73,73,42,0])?"image/tiff":o(c,[66,77])?"image/bmp":o(c,[71,73,70,56,55,97])||o(c,[71,73,70,56,55,97])?"image/gif":"application/octet-stream"}function l(c){if(c==null)return null;if(typeof c=="string")return c.startsWith("data:")?c:`data:${a(s(c))};base64,`+c;{let f=null;if(c.bytes&&c.bytes instanceof Uint8Array&&(f=c.bytes),c instanceof Uint8Array&&(f=c),f!=null)return`data:${a(f)};base64,`+i(f)}return null}var u=LEt();ra(u,c=>Oe(r,c),()=>G(r)),ji(c=>N3(u,"src",c),[()=>l(e.image)]),qv("load",u,()=>{G(r)&&n(G(r).scrollHeight)}),_kt(u),gn(t,u),Ii()}var BEt=Zn('<a target="_blank"> </a>'),$Et=Zn('<div class="link-content"><!></div>');const UEt={hash:"svelte-1wimtwv",code:""};function zEt(t,e){Mi(e,!0),Ri(t,UEt);let n=V2(e,"height");var r=$Et(),i=cr(r);{var s=o=>{var a=BEt(),l=cr(a,!0);rr(a),ji(()=>{N3(a,"href",e.url),Dh(l,e.url)}),gn(o,a)};Aa(i,o=>{e.url&&o(s)})}rr(r),Ec(r,"clientHeight",n),gn(t,r),Ii()}var jEt=Zn('<div class="number-content svelte-1xfvszy"> </div>');const qEt={hash:"svelte-1xfvszy",code:".number-content.svelte-1xfvszy {text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function VEt(t,e){Mi(e,!0),Ri(t,qEt);let n=V2(e,"height");function r(o){return o===null?null:Number.isInteger(o)?o.toString():o.toPrecision(4).toString()}var i=jEt(),s=cr(i,!0);rr(i),ji(o=>Dh(s,o),[()=>r(e.number)]),Ec(i,"clientHeight",n),gn(t,i),Ii()}var WEt=Zn("<div> </div>");const HEt={hash:"svelte-1ngffx0",code:".clamped.svelte-1ngffx0 {display:-webkit-box;-webkit-box-orient:vertical;line-clamp:var(--lines, var(--num-lines)); /* fallback to numlines from parent */-webkit-line-clamp:var(--lines, var(--num-lines));overflow:hidden;text-overflow:ellipsis;}"};function pne(t,e){Mi(e,!0),Ri(t,HEt);let n=V2(e,"height");const r=br.config;let i=nt(null),s=nt(null);pi(()=>{G(i)&&(n(G(i).scrollHeight),Oe(s,Math.floor(e.parentHeight/r.lineHeight),!0))});var o=WEt();let a;var l=cr(o,!0);rr(o),ra(o,u=>Oe(i,u),()=>G(i)),ji(()=>{G0(o,1,`text-content ${(e.clamped?"clamped":null)??""}`,"svelte-1ngffx0"),a=Qa(o,"",a,{"--lines":G(s)}),Dh(l,e.text)}),gn(t,o),Ii()}class GEt{#e=nt(po({}));get config(){return G(this.#e)}set config(e){Oe(this.#e,e,!0)}}const WI=Symbol("custom-cells");class KC{static initialize(){lu(WI,new GEt)}static set config(e){const n=Sa(WI);n.config=e}static get config(){return Sa(WI).config}}var YEt=Zn("<button>â</button>"),XEt=Zn('<div class="cell-content clamp svelte-8bpcsh"><!> <!></div>');const KEt={hash:"svelte-8bpcsh",code:".cell-content.svelte-8bpcsh {position:relative;flex-grow:1;line-height:var(--lineHeight);overflow-wrap:anywhere;overflow:hidden;}.expand-button.svelte-8bpcsh {all:unset;visibility:hidden;position:absolute;bottom:0;right:0;cursor:pointer;font-size:12px;line-height:18px;padding-left:4px;padding-right:4px;border-radius:2px;color:var(--secondary-text-color);background-color:var(--background-color);border:var(--outline);}.expand-button.show.svelte-8bpcsh {visibility:visible;}"};function QEt(t,e){Mi(e,!0),Ri(t,KEt);const n=xr.model,r=xr.controller,i=xr.schema,s=br.config;let o=Pe(()=>KC.config),a=nt(0),l=nt(0),u=Pe(()=>G(l)>G(a));const c=n.getContent({row:e.row,col:e.col}),f=i.dataType[e.col]??"string",h=i.sqlType[e.col]??"TEXT";function d(A){return typeof A=="string"&&(A.startsWith("http://")||A.startsWith("https://"))}function p(A){return A==null?!1:!!(typeof A=="string"&&A.startsWith("data:image/")||A.bytes&&A.bytes instanceof Uint8Array)}var m=XEt();let y;var b=cr(m);{var v=A=>{NEt(A,{get row(){return e.row},get col(){return e.col},get customCell(){return G(o)[e.col]},get height(){return G(l)},set height(C){Oe(l,C,!0)}})},w=A=>{var C=qg(),D=_l(C);{var T=I=>{var N=qg(),P=_l(N);{var O=L=>{zEt(L,{get url(){return c},get height(){return G(l)},set height(B){Oe(l,B,!0)}})},R=L=>{pne(L,{get text(){return c},get clamped(){return G(u)},get parentHeight(){return G(a)},get height(){return G(l)},set height(B){Oe(l,B,!0)}})};Aa(P,L=>{c&&d(c)?L(O):L(R,!1)})}gn(I,N)},M=I=>{var N=qg(),P=_l(N);{var O=L=>{var B=qg(),z=_l(B);{var U=W=>{{let H=Pe(()=>BigInt(c??""));IEt(W,{get bigint(){return G(H)},get height(){return G(l)},set height(Y){Oe(l,Y,!0)}})}},V=W=>{VEt(W,{get number(){return c},get height(){return G(l)},set height(H){Oe(l,H,!0)}})};Aa(z,W=>{h==="BIGINT"?W(U):W(V,!1)})}gn(L,B)},R=L=>{var B=qg(),z=_l(B);{var U=W=>{PEt(W,{get image(){return c},get height(){return G(l)},set height(H){Oe(l,H,!0)}})},V=W=>{pne(W,{get text(){return c},get clamped(){return G(u)},get parentHeight(){return G(a)},get height(){return G(l)},set height(H){Oe(l,H,!0)}})};Aa(z,W=>{p(c)?W(U):W(V,!1)},!0)}gn(L,B)};Aa(P,L=>{f==="number"?L(O):L(R,!1)},!0)}gn(I,N)};Aa(D,I=>{f==="string"?I(T):I(M,!1)},!0)}gn(A,C)};Aa(b,A=>{G(o)[e.col]?A(v):A(w,!1)})}var _=_u(b,2);{var S=A=>{var C=YEt();C.__click=()=>{r.addHeightToRow(e.row,G(l)-G(a))},ji(()=>G0(C,1,`expand-button ${e.hovered?"show":"hide"}`,"svelte-8bpcsh")),gn(A,C)};Aa(_,A=>{G(u)&&A(S)})}rr(m),ji(()=>y=Qa(m,"",y,{"--lineHeight":s.lineHeight+"px","--num-lines":s.textMaxLines})),Ec(m,"clientHeight",A=>Oe(a,A)),gn(t,m),Ii()}pp(["click"]);var JEt=Zn('<div class="row-number svelte-1e2x749"> </div>');const ZEt={hash:"svelte-1e2x749",code:".row-number.svelte-1e2x749 {flex-grow:1;text-align:right;color:var(--secondary-text-color);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function e5t(t,e){Mi(e,!0),Ri(t,ZEt);const n=xr.model.getContent({row:e.row,col:e.col}),r=Pe(()=>new Intl.NumberFormat().format(n??0));var i=JEt(),s=cr(i,!0);rr(i),ji(()=>Dh(s,G(r))),gn(t,i),Ii()}var t5t=Zn('<div class="cell svelte-16dgxhm"><!></div>');const n5t={hash:"svelte-16dgxhm",code:".cell.svelte-16dgxhm {--x: 0px;--y: 0px;--width: 0px;--height: 0px;display:flex;box-sizing:border-box;padding-top:calc(var(--padding-y) / 2);padding-bottom:calc(var(--padding-y) / 2);padding-right:calc(calc(var(--padding-x) / 2) + var(--extra-right-padding));padding-left:calc(calc(var(--padding-x) / 2) + var(--extra-left-padding));position:absolute;left:0;top:0;width:var(--width);height:var(--height);transform:translate(var(--x), var(--y));contain:layout paint;color:var(--primary-text-color);font-family:var(--cell-font-family);font-size:var(--cell-font-size);}"};function r5t(t,e){Mi(e,!0),Ri(t,n5t);const n=xr.model,r=xr.controller,i=xr.overscrollModifier,s=br.config;let o=Pe(()=>n.getPosition({row:e.row,col:e.col})),a=Pe(()=>G(o).x),l=Pe(()=>G(o).y),u=Pe(()=>i.y(G(l))),c=Pe(()=>n.getDimensions({row:e.row,col:e.col})),f=Pe(()=>G(c).width),h=Pe(()=>G(c).height),d=Pe(()=>n.isFirstCol(e.col)),p=Pe(()=>n.isLastCol(e.col)),m=Pe(()=>n.getRowParity(e.row)==="even"?"var(--primary-bg)":"var(--secondary-bg)"),y=()=>{s.onRowClick&&s.onRowClick(e.row)},b=nt(!1);var v=t5t();v.__click=y,v.__keydown=C=>{C.key==="Enter"&&y()};let w;var _=cr(v);{var S=C=>{QEt(C,{get row(){return e.row},get col(){return e.col},get hovered(){return G(b)}})},A=C=>{e5t(C,{get row(){return e.row},get col(){return e.col}})};Aa(_,C=>{e.col!==ba?C(S):C(A,!1)})}rr(v),ji(()=>w=Qa(v,"",w,{"--x":G(a)+"px","--y":G(u)+"px","--width":G(f)+"px","--height":G(h)+"px","--padding-x":s.betweenColPadding+"px","--padding-y":s.betweenRowPadding+"px","--extra-right-padding":(G(p)?s.verticalScrollbarWidth:0)+"px","--extra-left-padding":(G(d)?s.firstColLeftPadding:0)+"px","--background-color":G(m)})),qv("pointerenter",v,()=>{Oe(b,!0),r.hoveredRowId=e.row}),qv("pointerleave",v,()=>{Oe(b,!1),r.hoveredRowId=null}),gn(t,v),Ii()}pp(["click","keydown"]);var i5t=Zn('<div class="header-title svelte-1si5830"> </div>');const s5t={hash:"svelte-1si5830",code:".header-title.svelte-1si5830 {flex-shrink:1;margin-right:2px;}"};function o5t(t,e){Mi(e,!0),Ri(t,s5t);const n=br.config;var r=i5t(),i=cr(r,!0);rr(r),ji(()=>Dh(i,n.columnConfigs[e.col]?.title??e.col)),gn(t,r),Ii()}jCt();var a5t=Zn('<div class="row-number-header svelte-v1uha2">#</div>');const l5t={hash:"svelte-v1uha2",code:".row-number-header.svelte-v1uha2 {flex-grow:1;text-align:right;margin-right:4px;box-sizing:border-box;color:var(--secondary-text-color);}"};function u5t(t){Ri(t,l5t);var e=a5t();gn(t,e)}var c5t=Zn('<button class="sort-buttons svelte-mgubjs"><div> </div></button>');const f5t={hash:"svelte-mgubjs",code:".sort-buttons.svelte-mgubjs {all:unset;flex-shrink:0;width:16px;cursor:pointer;display:flex;justify-content:center;flex-direction:row;margin-left:4px;border-radius:2px;padding-left:4px;padding-right:4px;color:var(--tertiary-text-color);}.sort-buttons.svelte-mgubjs:hover {--placeholder: 0;background-color:var(--hover-bg);}.sort-glyph.svelte-mgubjs {color:var(--tertiary-text-color);}.sort-buttons.svelte-mgubjs:hover .sort-glyph:where(.svelte-mgubjs) {color:var(--tertiary-text-color);}.selected.svelte-mgubjs {color:var(--primary-text-color) !important;}"};function h5t(t,e){Mi(e,!0),Ri(t,f5t);const n=xr.controller;let r=Pe(()=>n.sort?n.sort.column===e.col:!1),i=Pe(()=>n.sort?n.sort.direction:null),s=Pe(()=>G(r)?G(i)==="ascending"?"â":"â":"â");var o=c5t();o.__click=()=>{const u=G(r)?G(i)==="ascending"?"descending":null:"ascending";u?n.handleSort({column:e.col,direction:u}):n.handleSort(null)};var a=cr(o),l=cr(a,!0);rr(a),rr(o),ji(()=>{G0(a,1,`sort-button ${(G(r)?"selected":null)??""} sort-glyph`,"svelte-mgubjs"),Dh(l,G(s))}),gn(t,o),Ii()}pp(["click"]);class d5t{#e=nt(po({}));get config(){return G(this.#e)}set config(e){Oe(this.#e,e,!0)}}const HI=Symbol("custom-headers");class QC{static initialize(){lu(HI,new d5t)}static set config(e){const n=Sa(HI);n.config=e}static get config(){return Sa(HI).config}}var p5t=Zn("<div></div>");const g5t={hash:"svelte-v680az",code:""};function m5t(t,e){Mi(e,!0),Ri(t,g5t),xr.model;const n=s=>typeof s=="function"?(o,a)=>{let l=new s(o,a);return{...l.update?{update:l.update.bind(l)}:{},...l.destroy?{destroy:l.destroy.bind(l)}:{}}}:(o,a)=>{let l=new s.class(o,a);return{...l.update?{update:l.update.bind(l)}:{},...l.destroy?{destroy:l.destroy.bind(l)}:{}}};let r=Pe(()=>n(e.customHeader));var i=p5t();Qq(i,(s,o)=>G(r)?.(s,o),()=>({column:e.col})),gn(t,i),Ii()}var y5t=Zn("<!> <!>",1),b5t=Zn('<div><div class="header-content svelte-1vl6s3u"><!> <div class="header-title svelte-1vl6s3u"><!></div></div></div>');const v5t={hash:"svelte-1vl6s3u",code:".header-cell.svelte-1vl6s3u {position:relative;display:flex;flex-direction:row;align-items:end;width:var(--width);min-height:var(--height);flex-shrink:0;box-sizing:border-box;padding:0.25em;padding-right:calc(calc(var(--padding-x) / 2) + var(--extra-padding-right));padding-left:calc(calc(var(--padding-x) / 2) + var(--extra-padding-left));color:var(--secondary-text-color);font-family:var(--header-font-family);font-size:var(--header-font-size);}.header-cell.number.svelte-1vl6s3u {justify-content:end;}.header-content.svelte-1vl6s3u {display:flex;flex-direction:column;flex-shrink:0;}.header-title.svelte-1vl6s3u {height:1.5em;align-items:center;display:flex;flex-direction:row;flex-shrink:0;}"};function x5t(t,e){Mi(e,!0),Ri(t,v5t);const n=xr.model,r=xr.schema,i=br.config;let s=Pe(()=>QC.config),o=nt(null),a=nt(0);pi(()=>{i.minColumnWidths[e.col]=G(a)+i.betweenColPadding});const l=Pe(()=>n.colWidths[e.col]),u=Pe(()=>(r.dataType[e.col]??"string")==="number"),c=Pe(()=>G(u)||e.col===ba?"number":""),f=Pe(()=>n.isFirstCol(e.col)),h=Pe(()=>n.isLastCol(e.col));let d=Pe(()=>i.headerHeight?i.headerHeight+"px":"auto");var p=b5t();let m;var y=cr(p),b=cr(y);{var v=C=>{m5t(C,{get col(){return e.col},get customHeader(){return G(s)[e.col]}})};Aa(b,C=>{G(s)[e.col]&&C(v)})}var w=_u(b,2),_=cr(w);{var S=C=>{var D=y5t(),T=_l(D);o5t(T,{get col(){return e.col}});var M=_u(T,2);h5t(M,{get col(){return e.col}}),gn(C,D)},A=C=>{u5t(C)};Aa(_,C=>{e.col!==ba?C(S):C(A,!1)})}rr(w),rr(y),rr(p),ra(p,C=>Oe(o,C),()=>G(o)),ji(()=>{G0(p,1,`header-cell ${G(c)??""}`,"svelte-1vl6s3u"),m=Qa(p,"",m,{"--width":G(l)+"px","--height":G(d),"--padding-x":i.betweenColPadding+"px","--extra-padding-right":(G(h)?i.verticalScrollbarWidth:0)+"px","--extra-padding-left":(G(f)?i.firstColLeftPadding:0)+"px"})}),Ec(y,"clientWidth",C=>Oe(a,C)),gn(t,p),Ii()}class w5t{tableModel;tableController;col;config;isDragging=!1;startDragX=0;constructor({tableModel:e,tableController:n,col:r}){this.tableModel=e,this.tableController=n,this.col=r,this.config=br.config}handlePointerDown=e=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),this.isDragging=!0,this.startDragX=e.offsetX};handlePointerMove=e=>{if(this.isDragging&&this.startDragX!==null){const n=e.offsetX-this.startDragX,r=this.tableModel.colWidths[this.col],i=Math.max(0,Math.round(r+n));this.config.columnConfigs[this.col]||(this.config.columnConfigs[this.col]={}),this.config.columnConfigs[this.col].width=i,this.config.onColumnConfigsChange(this.col,CAe(this.config.columnConfigs))}};handlePointerUp=e=>{e.target.releasePointerCapture(e.pointerId),this.isDragging=!1,this.startDragX=null}}var _5t=Zn('<div class="header-resize-indicator svelte-1y4d3p9"><div class="pill svelte-1y4d3p9"></div></div>');const S5t={hash:"svelte-1y4d3p9",code:".header-resize-indicator.svelte-1y4d3p9 {position:absolute;z-index:2;box-sizing:border-box;width:12px;height:calc(100% - 0.25rem);margin:2px;cursor:col-resize;justify-content:center;display:flex;align-items:center;justify-content:center;transform:translateX(calc(var(--x) - 4px - 50%));}.pill.svelte-1y4d3p9 {width:2px;height:calc(100% - 4px);margin-top:2px;margin-bottom:2px;background-color:var(--secondary-text-color);opacity:0.2;border-radius:2px;}"};function A5t(t,e){Mi(e,!0),Ri(t,S5t);const n=xr.model;let r=new w5t({tableModel:n,tableController:xr.controller,col:e.col});const i=Pe(()=>n.colPositions[e.col]+n.colWidths[e.col]);var s=_5t();s.__pointerdown=function(...a){r.handlePointerDown?.apply(this,a)},s.__pointermove=function(...a){r.handlePointerMove?.apply(this,a)},s.__pointerup=function(...a){r.handlePointerUp?.apply(this,a)};let o;ji(()=>o=Qa(s,"",o,{"--x":G(i)+"px"})),gn(t,s),Ii()}pp(["pointerdown","pointermove","pointerup"]);var C5t=Zn('<div class="table-portal svelte-i8g41o" tabindex="-1"><!></div>');const k5t={hash:"svelte-i8g41o",code:".table-portal.svelte-i8g41o {position:absolute;}"};function E5t(t,e){Mi(e,!0),Ri(t,k5t);const n=xr.controller,r=xr.tablePortalController;let i=nt(null);const s=c=>{pi(()=>(r.mount(c,e.relativeTo,e.anchor,e.horizontalAlign,e.verticalAlign),c.focus(),()=>{r.destroy(c)}))};let o=0;q2(()=>{o=n.xScroll,requestAnimationFrame(a)});function a(){G(i)&&e.stickyX&&(G(i).style.transform=`translateX(${n.xScroll-o}px)`),requestAnimationFrame(a)}var l=C5t();l.__click=c=>{c.stopPropagation()};var u=cr(l);Kq(u,()=>e.children),rr(l),ra(l,c=>Oe(i,c),()=>G(i)),Qq(l,c=>s?.(c)),qv("wheel",l,c=>{c.stopPropagation()}),gn(t,l),Ii()}pp(["click"]);var D5t=Zn("<button> </button> <!>",1);const T5t={hash:"svelte-3t0u29",code:'.dropdown.svelte-3t0u29 {all:unset;padding-left:8px;padding-right:8px;border-radius:2px;cursor:pointer;color:var(--secondary-text-color);position:relative;user-select:none;}.dropdown.svelte-3t0u29::before {content:"";position:absolute;top:0;left:0;height:100%;width:100%;background-color:var(--primary-bg);z-index:-1;}.dropdown.svelte-3t0u29:hover {background-color:var(--hover-bg);}.unclickable.svelte-3t0u29 {pointer-events:none;}'};function O5t(t,e){Ri(t,T5t);let n=nt(!1),r=nt(null),i=nt(null);var s=D5t();qv("click",rP,c=>{G(n)&&c.target!==G(r)&&Oe(n,!1)});var o=_l(s);o.__click=c=>{Oe(n,!0)};var a=cr(o,!0);rr(o),ra(o,c=>Oe(r,c),()=>G(r));var l=_u(o,2);{var u=c=>{E5t(c,{get relativeTo(){return e.relativeTo},anchor:"outside",horizontalAlign:"left",verticalAlign:"top",stickyX:!1,get element(){return G(i)},set element(f){Oe(i,f,!0)},children:(f,h)=>{var d=qg(),p=_l(d);Kq(p,()=>e.children),gn(f,d)},$$slots:{default:!0}})};Aa(l,c=>{G(n)&&c(u)})}ji(()=>{G0(o,1,`dropdown ${G(n)?"unclickable":"clickable"}`,"svelte-3t0u29"),Dh(a,e.label)}),gn(t,s)}pp(["click"]);var M5t=Zn('<li class="column-entry svelte-bmvlb6"><label class="column-label svelte-bmvlb6"> <input type="checkbox"/></label></li>'),I5t=Zn('<ul class="column-toggle svelte-bmvlb6"></ul>'),R5t=Zn("<!> <!>",1),F5t=Zn('<div class="header-row svelte-bmvlb6"><div class="scroll-container svelte-bmvlb6"><div class="dropdown-label-container svelte-bmvlb6"><div class="dropdown-label svelte-bmvlb6"><!></div></div> <!></div></div>');const N5t={hash:"svelte-bmvlb6",code:".header-row.svelte-bmvlb6 {flex-shrink:0;border-bottom:1px solid var(--secondary-bg);background-color:var(--primary-bg);}.scroll-container.svelte-bmvlb6 {display:flex;flex-direction:row;}.dropdown-label-container.svelte-bmvlb6 {position:absolute;z-index:20;left:0px;box-sizing:border-box;height:100%;padding:0.25em;display:flex;flex-direction:row;align-items:end;}.dropdown-label.svelte-bmvlb6 {height:1.5em;align-items:center;display:flex;}.column-toggle.svelte-bmvlb6 {margin:0;margin-top:4px;margin-left:8px;padding:12px;background-color:var(--primary-bg);border-radius:4px;box-shadow:var(--shadow);border:var(--outline);max-height:var(--max-height);max-width:var(--max-width);overflow:scroll;}.column-entry.svelte-bmvlb6 {list-style-type:none;padding:4px;user-select:none;}.column-label.svelte-bmvlb6 {display:flex;align-items:center;justify-content:space-between;gap:16px;color:var(--secondary-text-color);}"};function L5t(t,e){Mi(e,!0),Ri(t,N5t);const n=xr.model,r=xr.controller,i=br.config;let s=nt(null),o=nt(null),a=nt(null),l=Pe(()=>n.renderableCols),u=0;q2(()=>(u=requestAnimationFrame(c),()=>{cancelAnimationFrame(u)}));function c(){G(o)&&(G(o).style.transform=`translate3d(${r.xScroll}px, 0, 0)`),G(a)&&(G(a).style.transform=`translate3d(${-r.xScroll}px, 0, 0)`),u=requestAnimationFrame(c)}var f=F5t(),h=cr(f),d=cr(h),p=cr(d),m=cr(p);O5t(m,{label:"â®",get relativeTo(){return G(s)},children:(b,v)=>{var w=I5t();let _;t_(w,21,()=>n.columns,Fkt,(S,A)=>{var C=M5t(),D=cr(C),T=cr(D),M=_u(T);jkt(M),M.__change=I=>{I.target.checked?r.showColumn(G(A)):r.hideColumn(G(A))},Qa(M,"",{},{float:"right"}),rr(D),rr(C),ji(()=>{Dh(T,`${(G(A)===ba?"row #":i.columnConfigs[G(A)]?.title??G(A))??""} `),N3(M,"id",`${G(A)??""}-checkbox`),qkt(M,G(A)===ba?i.showRowNumber!==!1:!i.columnConfigs[G(A)]?.hidden)}),gn(S,C)}),rr(w),ji(()=>_=Qa(w,"",_,{"--max-height":r.viewHeight-48+"px","--max-width":r.viewWidth-48+"px"})),gn(b,w)}}),rr(p),ra(p,b=>Oe(a,b),()=>G(a)),rr(d);var y=_u(d,2);t_(y,16,()=>G(l),b=>b,(b,v)=>{var w=R5t(),_=_l(w);x5t(_,{get col(){return v}});var S=_u(_,2);A5t(S,{get col(){return v}}),gn(b,w)}),rr(h),ra(h,b=>Oe(o,b),()=>G(o)),rr(f),ra(f,b=>Oe(s,b),()=>G(s)),gn(t,f),Ii()}pp(["change"]);class P5t{#e=nt(null);get colorScheme(){return G(this.#e)}set colorScheme(e){Oe(this.#e,e,!0)}#t=nt(po({}));get theme(){return G(this.#t)}set theme(e){Oe(this.#t,e,!0)}}const gne=Symbol("style");class hP{static initialize(){lu(gne,new P5t)}static get style(){return Sa(gne)}}function B5t(t,e){return{...t,...t[e]!=null?t[e]:{}}}var $5t=Zn("<div><!></div>");const U5t={hash:"svelte-c7n1rn",code:".table-defaults.light.svelte-c7n1rn {--default-primary-text-color: black;--default-secondary-text-color: gray;--default-tertiary-text-color: lightgray;--default-font-family: sans-serif;--default-font-size: 1rem;--default-primary-bg: white;--default-secondary-bg: rgb(246, 246, 247);--default-tertiary-bg: rgb(234, 234, 235);--default-hover-bg: rgba(0, 0, 0, 0.05);--default-scrollbar-bg: rgba(0, 0, 0, 0.05);--default-scrollbar-pill-bg: rgba(0, 0, 0, 0.5);--default-scrollbar-label-bg: rgba(255, 255, 255, 0.9);--default-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--default-outline-color: rgb(0 0 0 / 0.2);--default-dimmed-row-color: rgb(0 0 0 / 0.2);--default-row-scroll-to-color: rgb(202 225 255);--default-row-hover-color: rgb(220, 235, 255);}.table-defaults.dark.svelte-c7n1rn {--default-primary-text-color: lightgray;--default-secondary-text-color: gray;--default-tertiary-text-color: dimgray;--default-font-family: sans-serif;--default-font-size: 1rem;--default-primary-bg: #060607;--default-secondary-bg: #161617;--default-hover-bg: rgba(255, 255, 255, 0.05);--default-scrollbar-bg: rgba(255, 255, 255, 0.05);--default-scrollbar-pill-bg: rgba(255, 255, 255, 0.5);--default-scrollbar-label-bg: rgba(0, 0, 0, 0.9);--default-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--default-outline-color: rgb(255 255 255 / 0.2);--default-dimmed-row-color: rgb(0 0 0 / 0.6);--default-row-scroll-to-color: rgb(1, 24, 106);--default-row-hover-color: rgb(0, 6, 35);}.style-wrapper.svelte-c7n1rn {width:100%;height:100%;--primary-text-color: var(--user-primary-text-color, var(--default-primary-text-color));--secondary-text-color: var(--user-secondary-text-color, var(--default-secondary-text-color));--tertiary-text-color: var(--user-tertiary-text-color, var(--default-tertiary-text-color));--font-family: var(--user-font-family, var(--default-font-family));--font-size: var(--user-font-size, var(--default-font-size));--primary-bg: var(--user-primary-bg, var(--default-primary-bg));--secondary-bg: var(--user-secondary-bg, var(--default-secondary-bg));--tertiary-bg: var(--user-tertiarty-bg, var(--default-tertiary-bg));--hover-bg: var(--user-hover-bg, var(--default-hover-bg));--header-font-family: var(--user-header-font-family, var(--font-family));--header-font-size: var(--user-header-font-size, var(--font-size));--cell-font-family: var(--user-cell-font-family, var(--font-family));--cell-font-size: var(--user-cell-font-size, var(--font-size));--scrollbar-bg: var(--user-scrollbar-bg, var(--default-scrollbar-bg));--scrollbar-pill-bg: var(--user-scrollbar-pill-bg, var(--default-scrollbar-pill-bg));--scrollbar-label-bg: var(--user-scrollbar-label-bg, var(--default-scrollbar-label-bg));--shadow: var(--user-shadow, var(--default-shadow));--outline-color: var(--user-outline-color, var(--default-outline-color));--outline: 0.5px solid var(--outline-color);--dimmed-row-color: var(--user-dimmed-row-color, var(--default-dimmed-row-color));--row-scroll-to-color: var(--user-row-scroll-to-color, var(--default-row-scroll-to-color));--row-hover-color: var(--user-row-hover-color, var(--default-row-hover-color));}"};function z5t(t,e){Mi(e,!0),Ri(t,U5t);const n=hP.style;let r=Pe(()=>n.colorScheme),i=Pe(()=>n.theme),s=nt(null),o=Pe(()=>G(r)??G(s)??"light");const a=B=>{B.matches?Oe(s,"dark"):Oe(s,"light")},l="(prefers-color-scheme: dark";q2(()=>(Oe(s,window.matchMedia(l).matches?"dark":"light",!0),window.matchMedia(l).addEventListener("change",a),()=>{window.matchMedia(l).removeEventListener("change",a)}));let u=Pe(()=>B5t(G(i),G(o))),c=Pe(()=>G(u).primaryTextColor),f=Pe(()=>G(u).secondaryTextColor),h=Pe(()=>G(u).tertiaryTextColor),d=Pe(()=>G(u).fontFamily),p=Pe(()=>G(u).fontSize),m=Pe(()=>G(u).primaryBackgroundColor),y=Pe(()=>G(u).secondaryBackgroundColor),b=Pe(()=>G(u).hoverBackgroundColor),v=Pe(()=>G(u).headerFontFamily),w=Pe(()=>G(u).headerFontSize),_=Pe(()=>G(u).cellFontFamily),S=Pe(()=>G(u).cellFontSize),A=Pe(()=>G(u).scrollbarBackgroundColor),C=Pe(()=>G(u).scrollbarPillColor),D=Pe(()=>G(u).scrollbarLabelBackgroundColor),T=Pe(()=>G(u).shadow),M=Pe(()=>G(u).outlineColor),I=Pe(()=>G(u).dimmedRowColor),N=Pe(()=>G(u).rowScrollToColor),P=Pe(()=>G(u).rowHoverColor);pi(()=>{});var O=$5t();let R;var L=cr(O);Kq(L,()=>e.children),rr(O),ji(()=>{G0(O,1,`style-wrapper table-defaults ${G(o)??""}`,"svelte-c7n1rn"),R=Qa(O,"",R,{"--user-primary-text-color":G(c),"--user-secondary-text-color":G(f),"--user-tertiary-text-color":G(h),"--user-font-family":G(d),"--user-font-size":G(p),"--user-primary-bg":G(m),"--user-secondary-bg":G(y),"--user-hover-bg":G(b),"--user-header-font-family":G(v),"--user-header-font-size":G(w),"--user-cell-font-family":G(_),"--user-cell-font-size":G(S),"--user-scrollbar-bg":G(A),"--user-scrollbar-pill-bg":G(C),"--user-scrollbar-label-bg":G(D),"--user-shadow":G(T),"--user-outline-color":G(M),"--user-dimmed-row-color":G(I),"--user-row-scroll-to-color":G(N),"--user-row-hover-color":G(P)})}),gn(t,O),Ii()}function j5t(){return ba}function q5t(t,e){const n=new Set(t),r=new Set(e);return{left:t.filter(i=>!r.has(i)),right:e.filter(i=>!n.has(i))}}function V5t(t,e){const n=new Set(e);return t.filter(r=>!n.has(r))}function W5t(t,e){return t.concat(e)}var H5t=Zn("<div></div>"),G5t=Zn("<div></div> <!>",1);const Y5t={hash:"svelte-14dgpd0",code:".row-background.svelte-14dgpd0 {position:absolute;width:var(--width);height:var(--height);box-sizing:border-box;z-index:-1;transform:translate3d(0, var(--y), 0);transition:background-color 100ms linear;}.odd.svelte-14dgpd0 {background-color:var(--secondary-bg);}.even.svelte-14dgpd0 {background-color:var(--primary-bg);}.dimmer.svelte-14dgpd0 {background-color:var(--dimmed-row-color);z-index:10;pointer-events:none;}.flashed.svelte-14dgpd0 {background-color:var(--row-scroll-to-color);}.hovered.svelte-14dgpd0 {background-color:var(--row-hover-color);}"};function X5t(t,e){Mi(e,!0),Ri(t,Y5t);const n=xr.controller,r=xr.model,i=xr.overscrollModifier,s=br.config;let o=Pe(()=>r.rowHeights[e.row]),a=Pe(()=>Math.max(r.colsRightmostPosition,n.viewWidth)),l=Pe(()=>i.y(r.rowPositions[e.row])),u=Pe(()=>r.getRowParity(e.row)),c=Pe(()=>n.flashedRowId===e.row),f=Pe(()=>n.hoveredRowId===e.row),h=Pe(()=>s.highlightedRows?s.highlightedRows?.has(e.row):null);var d=G5t(),p=_l(d);let m;var y=_u(p,2);{var b=v=>{var w=H5t();let _;ji(()=>{G0(w,1,`row-background ${G(u)??""} dimmer`,"svelte-14dgpd0"),_=Qa(w,"",_,{"--width":G(a)+"px","--height":G(o)+"px","--y":G(l)+"px"})}),gn(v,w)};Aa(y,v=>{G(h)!==null&&!G(h)&&v(b)})}ji(()=>{G0(p,1,`row-background ${G(u)??""} ${(G(c)?"flashed":null)??""} ${(G(f)&&s.highlightHoveredRow?"hovered":null)??""}`,"svelte-14dgpd0"),m=Qa(p,"",m,{"--width":G(a)+"px","--height":G(o)+"px","--y":G(l)+"px"})}),gn(t,d),Ii()}var K5t=Zn("<!> <!>",1),Q5t=Zn('<div class="scroll-container svelte-1v3p82v"><!></div> <!> <!>',1),J5t=Zn('<div class="table svelte-1v3p82v"><!> <div class="table-contents svelte-1v3p82v"><!></div></div>');const Z5t={hash:"svelte-1v3p82v",code:".table.svelte-1v3p82v {width:100%;max-width:var(--max-width);height:100%;display:flex;flex-direction:column;position:relative;}.table-contents.svelte-1v3p82v {position:relative;overflow:hidden;flex-grow:1;}.scroll-container.svelte-1v3p82v {position:absolute;width:0;height:0;will-change:transform;contain:layout size;}"};function e8t(t,e){Mi(e,!0),Ri(t,Z5t),br.initialize(),KC.initialize(),QC.initialize(),hP.initialize(),xr.initialize();const n=xr.controller,r=xr.model,i=xr.overscrollModifier,s=br.config,o=hP.style;pi(()=>{e.scrollTo!=null&&n.scrollToRow(String(e.scrollTo))}),pi(()=>{e.highlightedRows&&e.highlightedRows.length>0?s.highlightedRows=new Set(e.highlightedRows.map(v=>String(v))):s.highlightedRows=null}),pi(()=>{e.onRowClick!=null?s.onRowClick=e.onRowClick:s.onRowClick=null}),pi(()=>{e.coordinator?fP.coordinator=e.coordinator:fP.coordinator=null}),pi(()=>{e.numLines!=null?s.textMaxLines=e.numLines:s.textMaxLines=s.DEFAULT_TEXT_MAX_LINES,e.lineHeight!=null?s.lineHeight=e.lineHeight:s.lineHeight=s.DEFAULT_LINE_HEIGHT}),pi(()=>{e.colorScheme!=null?o.colorScheme=e.colorScheme:o.colorScheme=null}),pi(()=>{e.theme!=null?o.theme=e.theme:o.theme={},e.colorScheme!=null?o.colorScheme=e.colorScheme:o.colorScheme=null}),pi(()=>{e.columnConfigs!=null?s.columnConfigs=e.columnConfigs:s.columnConfigs={},e.onColumnConfigsChange!=null?s.onColumnConfigsChange=e.onColumnConfigsChange:s.onColumnConfigsChange=()=>{}}),pi(()=>{s.showRowNumber=e.showRowNumber??null}),pi(()=>{s.onShowRowNumberChange=e.onShowRowNumberChange??null}),pi(()=>{n.initialize({tableName:e.table,rowKey:e.rowKey,columns:[j5t(),...e.columns],filterBy:e.filter??null})}),pi(()=>{e.customCells!=null?KC.config=e.customCells:KC.config={}}),pi(()=>{e.additionalHeaderContents!=null?QC.config=e.additionalHeaderContents:QC.config={}}),pi(()=>{e.headerHeight!=null?s.headerHeight=e.headerHeight:s.headerHeight=null}),pi(()=>{e.highlightHoveredRow!=null?s.highlightHoveredRow=e.highlightHoveredRow:s.highlightHoveredRow=!1});let a=nt([]),l=nt(0),u=nt(null),c=nt(po([])),f=nt(po([])),h=Pe(()=>G(c).filter(v=>n.rowStillExists(v))),d=Pe(()=>G(f)),p=0;q2(()=>(p=requestAnimationFrame(b),()=>{n.teardown(),r.teardown(),cancelAnimationFrame(p)}));function m(v,w){if(w.length>0){const _=w[w.length-1];return Math.abs(r.data[v][va]-r.data[_][va])}return 0}function y(){const{left:v,right:w}=q5t(G(a),r.renderableRows);v.length===0&&w.length===0||(Oe(a,V5t(G(a),v)),Oe(a,W5t(G(a),w.sort((_,S)=>m(_,G(a))-m(S,G(a))).slice(0,n.isJumping?n.rowsOnScreen:s.rowRenderBatchSize))))}function b(){y(),Oe(c,G(a).filter(_=>n.rowIsVisible(_)),!0),Oe(f,r.renderableCols.filter(_=>n.colIsVisible(_)),!0);const v=n.xScroll,w=i.yScroll(n.yScroll);G(u)&&(G(u).style.transform=`translate3d(${v}px, ${w}px, 0)`),Oe(l,n.updateKey,!0),p=requestAnimationFrame(b)}z5t(t,{children:(v,w)=>{var _=J5t(),S=cr(_);L5t(S,{});var A=_u(S,2),C=cr(A);{var D=T=>{var M=Q5t(),I=_l(M),N=cr(I);Rkt(N,()=>G(l),R=>{var L=K5t(),B=_l(L);t_(B,16,()=>G(h),U=>U,(U,V)=>{var W=qg(),H=_l(W);t_(H,16,()=>G(d),Y=>Y,(Y,se)=>{r5t(Y,{get row(){return V},get col(){return se}})}),gn(U,W)});var z=_u(B,2);t_(z,16,()=>r.renderableRows,U=>U,(U,V)=>{X5t(U,{get row(){return V}})}),gn(R,L)}),rr(I),ra(I,R=>Oe(u,R),()=>G(u));var P=_u(I,2);TEt(P,{});var O=_u(P,2);kEt(O,{}),gn(T,M)};Aa(C,T=>{n.isReady&&T(D)})}rr(A),rr(_),ra(_,T=>n.element=T,()=>n?.element),qv("wheel",_,function(...T){n.handleWheel?.apply(this,T)}),Ec(A,"clientHeight",T=>n.viewHeight=T),Ec(A,"clientWidth",T=>n.viewWidth=T),gn(v,_)},$$slots:{default:!0}}),Ii()}class t8t{component;currentProps;constructor(e,n){this.currentProps={...n},this.component=Tkt({component:e8t,target:e,props:n})}update(e){let n={};for(let r in e)e[r]!==this.currentProps[r]&&(n[r]=e[r],this.currentProps[r]=e[r]);this.component.$set(n)}destroy(){this.component.$destroy()}}var n8t=xe("<div></div>");function r8t(t,e){ot(e,!0);let n=Ts(e,["$$slots","$$events","$$legacy"]),r;Qv(()=>{let s=new t8t(r,n);Tl(()=>{s.update(n)}),FP(()=>{s.destroy()})});var i=n8t();Nt(i,"",{},{width:"100%",height:"100%"}),za(i,s=>r=s,()=>r),te(t,i),at()}const i8t={fontSize:"13px",fontFamily:"system-ui",light:{primaryBackgroundColor:"white",secondaryBackgroundColor:"var(--color-slate-100)",primaryTextColor:"var(--color-slate-500)",secondaryTextColor:"var(--color-slate-400)",tertiaryTextColor:"var(--color-slate-300)",scrollbarPillColor:"var(--color-slate-400)",scrollbarLabelBackgroundColor:"white",rowScrollToColor:"var(--color-blue-200)",rowHoverColor:"var(--color-blue-100)"},dark:{primaryBackgroundColor:"black",secondaryBackgroundColor:"var(--color-slate-900)",primaryTextColor:"var(--color-slate-400)",secondaryTextColor:"var(--color-slate-500)",tertiaryTextColor:"var(--color-slate-600)",scrollbarPillColor:"var(--color-slate-500)",scrollbarLabelBackgroundColor:"var(--color-slate-900)",rowScrollToColor:"var(--color-blue-900)",rowHoverColor:"var(--color-blue-950)"}};function s8t(t,e){ot(e,!0);const n=()=>Ds(a,"$columnStyles",i),r=()=>Ds(o,"$colorScheme",i),[i,s]=aa();let{colorScheme:o,columnStyles:a}=e.context,l=hAe(e.context.highlight),u=De(null);Bt(()=>l.subscribe(h=>{k(u)!==h&&ae(u,h,!0)}));function c(h,d,p){let m={};for(let y of h)p?.[y.name]!=null&&(m[y.name]=xte(p[y.name])),d[y.name]?.renderer!=null&&(m[y.name]=xte(d[y.name]?.renderer));return m}let f=J(()=>c(e.context.columns,n(),e.context.tableCellRenderers));r8t(t,{get coordinator(){return e.context.coordinator},get table(){return e.context.table},get rowKey(){return e.context.id},get columns(){return e.spec.columns},get filter(){return e.context.filter},get scrollTo(){return k(u)},onRowClick:async h=>{l.set(h)},numLines:3,get colorScheme(){return r()},get theme(){return i8t},highlightHoveredRow:!0,get customCells(){return k(f)}}),at(),s()}const d6e={},p6e=[];function Pu(t,e){d6e[t]=e}function gp(t){p6e.push(t)}function o8t(t){if(typeof t!="object")return AI;if(typeof t.type=="string"){let e=d6e[t.type];return e??AI}return AI}function a8t(){return p6e}Pu("builder",mAt);Pu("count-plot",Pct);Pu("count-plot-list",Gct);Pu("histogram",Zct);Pu("histogram-stack",hft);Pu("histogram-2d",sft);Pu("box-plot",Ect);Pu("mosaic-spec",N4t);Pu("line-plot",yft);Pu("embedding",ACt);Pu("predicates",q4t);Pu("table",s8t);gp({icon:"chart-h-bar",description:"Create a count plot of a categorical field",ui:[{field:{key:"x",label:"Field",types:["number","string","string[]"],required:!0}}],create:({x:t})=>t.type=="discrete[]"?{title:t.name,type:"count-plot-list",data:{field:t.name}}:{title:t.name,type:"count-plot",data:{field:t.name}}});gp({icon:"chart-v-histogram",description:"Create a histogram of a field",ui:[{field:{key:"x",label:"Field",types:["number","string"],required:!0}}],create:({x:t})=>({type:"histogram",title:t.name,data:{field:t.name},binCount:20})});gp({icon:"chart-line",description:"Create a line plot over time",ui:[{field:{key:"x",label:"Time Field",types:["number","string"],required:!0}}],create:({x:t},e)=>({type:"line-plot",title:`${t.name} over time`,data:{table:e.table,x:t.name}})});gp({icon:"chart-stacked",description:"Create a stacked histogram",ui:[{field:{key:"x",label:"X Field",types:["number","string"],required:!0}},{field:{key:"y",label:"Group Field",types:["number","string"]}}],create:({x:t,y:e})=>e==null?{type:"histogram",title:`${t.name}`,data:{field:t.name},binCount:20}:{type:"histogram-stack",title:`${t.name} by ${e.name}`,data:{x:t.name,group:e.name},xBinCount:20,groupBinCount:5}});gp({icon:"chart-heatmap",description:"Create a 2D heatmap of two fields",ui:[{field:{key:"x",label:"X Field",types:["number","string"],required:!0}},{field:{key:"y",label:"Y Field",types:["number","string"],required:!0}}],create:({x:t,y:e})=>({type:"histogram-2d",title:`${t.name}, ${e.name}`,data:{x:t.name,y:e.name},xBinCount:20,yBinCount:20})});gp({icon:"chart-boxplot",description:"Create a box plot",ui:[{field:{key:"x",label:"X Field",required:!0}},{field:{key:"y",label:"Y Field",types:["number"],required:!0}}],create:({x:t,y:e})=>({type:"box-plot",title:`${e.name} by ${t.name}`,data:{x:t.name,y:e.name},xBinCount:20})});gp({icon:"chart-embedding",description:"Create an embedding view",ui:[{field:{key:"x",label:"X Field",types:["number"],required:!0}},{field:{key:"y",label:"Y Field",types:["number"],required:!0}},{field:{key:"text",label:"Text Field",types:["string"]}},{field:{key:"category",label:"Category Field",types:["string","number"]}}],preview:!1,create:({x:t,y:e,text:n,category:r},i)=>({type:"embedding",title:"Embedding",data:{x:t.name,y:e.name,text:n?.name,category:r?.name}})});gp({icon:"chart-predicates",description:"Create a filter with custom SQL predicates",ui:[],create:()=>({type:"predicates",title:"SQL Predicates"})});gp({icon:"chart-spec",description:"Create a chart with custom spec",preview:!1,ui:[{code:{key:"spec",language:"json"}}],create:({spec:t})=>JSON.parse(t)});var l8t=xe("<button>An occured with this chart. Click to retry.</button>"),u8t=xe("<div><!></div>");function g6e(t,e){ot(e,!0);let n=Ts(e,["$$slots","$$events","$$legacy"]),r=J(()=>o8t(e.spec)),i=De(100),s=De(100);function o(c,f){console.trace("Error happened in chart with spec",f.spec,f.error)}var a=u8t();let l;var u=ne(a);$ne(u,{failed:(f,h=An,d=An)=>{var p=l8t();p.__click=function(...m){d()?.apply(this,m)},dl(p,(m,y)=>o?.(m,y),()=>({spec:e.spec,error:h()})),te(f,p)}},f=>{var h=kn(),d=Ye(h);{let p=J(()=>e.width=="container"?k(i):e.width),m=J(()=>e.height=="container"?k(s):e.height);m0(d,()=>k(r),(y,b)=>{b(y,aR(()=>n,{get width(){return k(p)},get height(){return k(m)}}))})}te(f,h)}),Z(a),Ne(()=>l=Nt(a,"",l,{width:e.width=="container"?"100%":e.width!=null?`${e.width}px`:"fit-content",height:e.height=="container"?"100%":e.height!=null?`${e.height}px`:"fit-content"})),dc(a,"clientWidth",c=>ae(i,c)),dc(a,"clientHeight",c=>ae(s,c)),te(t,a),at()}ti(["click"]);function c8t(t,e){ot(e,!0);let n=J(()=>prt(e.layout)),r=J(()=>e.layoutStates[e.layout]??{});function i(f,h,d="merge"){uC(e.charts,f,h,d,p=>e.onChartsChange?.(p))}function s(f,h,d="merge"){uC(e.chartStates,f,h,d,p=>e.onChartStatesChange?.(p))}function o(f,h="merge"){Qb(e.charts,f,h,d=>e.onChartsChange?.(d))}function a(f,h="merge"){Qb(e.chartStates,f,h,d=>e.onChartStatesChange?.(d))}function l(f,h,d="merge"){uC(e.layoutStates,f,h,d,p=>e.onLayoutStatesChange?.(p))}var u=kn(),c=Ye(u);{const f=(d,p)=>{let m=()=>p?.().id,y=()=>p?.().width,b=()=>p?.().height;{let v=J(()=>e.chartStates[m()]??{}),w=J(()=>i.bind(null,m())),_=J(()=>s.bind(null,m()));g6e(d,{get context(){return e.context},get width(){return y()},get height(){return b()},get spec(){return e.charts[m()]},get state(){return k(v)},get onSpecChange(){return k(w)},get onStateChange(){return k(_)}})}};let h=J(()=>l.bind(null,e.layout));m0(c,()=>k(n),(d,p)=>{p(d,{get context(){return e.context},get charts(){return e.charts},get state(){return k(r)},get onStateChange(){return k(h)},onChartsChange:o,onChartStatesChange:a,chartView:f,$$slots:{chartView:!0}})})}te(t,u),at()}var f8t=xe('<tr class="leading-10"><td class="w-full"><div class="max-w-80 whitespace-nowrap text-ellipsis overflow-x-hidden"> </div></td><td class="pr-2"><div class="flex items-center gap-2"><!> <!></div></td><td><div class="flex items-center gap-2"><!></div></td></tr>');function h8t(t,e){ot(e,!0);function n(m){e.onChange({...e.style,...m})}var r=f8t(),i=ne(r),s=ne(i),o=ne(s,!0);Z(s),Z(i);var a=pe(i),l=ne(a),u=ne(l);{let m=J(()=>e.style.renderer??null),y=J(()=>[{value:null,label:"(default)"},...c6t.map(b=>({value:b.renderer,label:b.label}))]);gu(u,{get value(){return k(m)},onChange:b=>n({renderer:b}),get options(){return k(y)}})}var c=pe(u,2);{var f=m=>{var y=()=>e.style.rendererOptions?.size??100,b=v=>{n({rendererOptions:{size:v}})};tP(m,{get value(){return y()},set value(v){b(v)},width:80,min:16,max:400,step:1})};Le(c,m=>{e.style.renderer=="image"&&m(f)})}Z(l),Z(a);var h=pe(a),d=ne(h),p=ne(d);{let m=J(()=>e.style.display??"badge");gu(p,{get value(){return k(m)},onChange:y=>{n({display:y})},options:[{value:"full",label:"Full"},{value:"badge",label:"Badge"},{value:"hidden",label:"Hidden"}]})}Z(d),Z(h),Z(r),Ne(()=>pt(o,e.column.name)),te(t,r),at()}var d8t=xe('<div class="max-h-60 overflow-x-hidden overflow-y-scroll border border-slate-300 dark:border-slate-700 p-2 rounded-md"><table><thead><tr class="select-none"><th class="pb-2 text-slate-500 dark:text-slate-400 text-left font-normal text-sm">Column</th><th class="pb-2 text-slate-500 dark:text-slate-400 text-left font-normal text-sm">Format</th><th class="pb-2 text-slate-500 dark:text-slate-400 text-left font-normal text-sm">Style</th></tr></thead><tbody></tbody></table></div>');function p8t(t,e){ot(e,!0);var n=d8t(),r=ne(n),i=pe(ne(r));hn(i,21,()=>e.columns,Pn,(s,o)=>{{let a=J(()=>e.styles[k(o).name]??{});h8t(s,{get column(){return k(o)},get style(){return k(a)},onChange:l=>{let u={...e.styles};u[k(o).name]=l,e.onStylesChange(u)}})}}),Z(i),Z(r),Z(n),te(t,n),at()}var g8t=xe('<div> <span class="text-slate-500"> </span></div>');function m8t(t,e){ot(e,!0);let n=De(null),r=De(null);Tl(()=>{ae(n,null),ae(r,null);let l=mh({coordinator:e.coordinator,selection:e.filter,prepare:async()=>{let u=await e.coordinator.query(Ue.from(e.table).select({count:mt`COUNT(*)::INT`}));ae(n,u.get(0).count,!0)},query:u=>Ue.from(e.table).select({count:mt`COUNT(*)::INT`}).where(u),queryResult:u=>{ae(r,u.getChild("count").get(0),!0)}});return()=>{l.destroy()}});var i=g8t(),s=ne(i),o=pe(s),a=ne(o);Z(o),Z(i),Ne((l,u)=>{pt(s,`${l??""} `),pt(a,`/ ${u??""} points`)},[()=>k(r)?.toLocaleString()??"",()=>k(n)?.toLocaleString()??""]),te(t,i),at()}var JC={exports:{}};var y8t=JC.exports,mne;function b8t(){return mne||(mne=1,(function(t,e){(function(n,r){t.exports=r()})(y8t,(function(){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},r=function(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")},i=(function(){function u(c,f){for(var h=0;h<f.length;h++){var d=f[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,f,h){return f&&u(c.prototype,f),h&&u(c,h),c}})(),s=Object.assign||function(u){for(var c=1;c<arguments.length;c++){var f=arguments[c];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])}return u},o=(function(){function u(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;r(this,u),this.ctx=c,this.iframes=f,this.exclude=h,this.iframesTimeout=d}return i(u,[{key:"getContexts",value:function(){var f=void 0,h=[];return typeof this.ctx>"u"||!this.ctx?f=[]:NodeList.prototype.isPrototypeOf(this.ctx)?f=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?f=this.ctx:typeof this.ctx=="string"?f=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):f=[this.ctx],f.forEach(function(d){var p=h.filter(function(m){return m.contains(d)}).length>0;h.indexOf(d)===-1&&!p&&h.push(d)}),h}},{key:"getIframeContents",value:function(f,h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},p=void 0;try{var m=f.contentWindow;if(p=m.document,!m||!p)throw new Error("iframe inaccessible")}catch{d()}p&&h(p)}},{key:"isIframeBlank",value:function(f){var h="about:blank",d=f.getAttribute("src").trim(),p=f.contentWindow.location.href;return p===h&&d!==h&&d}},{key:"observeIframeLoad",value:function(f,h,d){var p=this,m=!1,y=null,b=function v(){if(!m){m=!0,clearTimeout(y);try{p.isIframeBlank(f)||(f.removeEventListener("load",v),p.getIframeContents(f,h,d))}catch{d()}}};f.addEventListener("load",b),y=setTimeout(b,this.iframesTimeout)}},{key:"onIframeReady",value:function(f,h,d){try{f.contentWindow.document.readyState==="complete"?this.isIframeBlank(f)?this.observeIframeLoad(f,h,d):this.getIframeContents(f,h,d):this.observeIframeLoad(f,h,d)}catch{d()}}},{key:"waitForIframes",value:function(f,h){var d=this,p=0;this.forEachIframe(f,function(){return!0},function(m){p++,d.waitForIframes(m.querySelector("html"),function(){--p||h()})},function(m){m||h()})}},{key:"forEachIframe",value:function(f,h,d){var p=this,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},y=f.querySelectorAll("iframe"),b=y.length,v=0;y=Array.prototype.slice.call(y);var w=function(){--b<=0&&m(v)};b||w(),y.forEach(function(_){u.matches(_,p.exclude)?w():p.onIframeReady(_,function(S){h(_)&&(v++,d(S)),w()},w)})}},{key:"createIterator",value:function(f,h,d){return document.createNodeIterator(f,h,d,!1)}},{key:"createInstanceOnIframe",value:function(f){return new u(f.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(f,h,d){var p=f.compareDocumentPosition(d),m=Node.DOCUMENT_POSITION_PRECEDING;if(p&m)if(h!==null){var y=h.compareDocumentPosition(d),b=Node.DOCUMENT_POSITION_FOLLOWING;if(y&b)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(f){var h=f.previousNode(),d=void 0;return h===null?d=f.nextNode():d=f.nextNode()&&f.nextNode(),{prevNode:h,node:d}}},{key:"checkIframeFilter",value:function(f,h,d,p){var m=!1,y=!1;return p.forEach(function(b,v){b.val===d&&(m=v,y=b.handled)}),this.compareNodeIframe(f,h,d)?(m===!1&&!y?p.push({val:d,handled:!0}):m!==!1&&!y&&(p[m].handled=!0),!0):(m===!1&&p.push({val:d,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(f,h,d,p){var m=this;f.forEach(function(y){y.handled||m.getIframeContents(y.val,function(b){m.createInstanceOnIframe(b).forEachNode(h,d,p)})})}},{key:"iterateThroughNodes",value:function(f,h,d,p,m){for(var y=this,b=this.createIterator(h,f,p),v=[],w=[],_=void 0,S=void 0,A=function(){var D=y.getIteratorNode(b);return S=D.prevNode,_=D.node,_};A();)this.iframes&&this.forEachIframe(h,function(C){return y.checkIframeFilter(_,S,C,v)},function(C){y.createInstanceOnIframe(C).forEachNode(f,function(D){return w.push(D)},p)}),w.push(_);w.forEach(function(C){d(C)}),this.iframes&&this.handleOpenIframes(v,f,d,p),m()}},{key:"forEachNode",value:function(f,h,d){var p=this,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},y=this.getContexts(),b=y.length;b||m(),y.forEach(function(v){var w=function(){p.iterateThroughNodes(f,v,h,d,function(){--b<=0&&m()})};p.iframes?p.waitForIframes(v,w):w()})}}],[{key:"matches",value:function(f,h){var d=typeof h=="string"?[h]:h,p=f.matches||f.matchesSelector||f.msMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.webkitMatchesSelector;if(p){var m=!1;return d.every(function(y){return p.call(f,y)?(m=!0,!1):!0}),m}else return!1}}]),u})(),a=(function(){function u(c){r(this,u),this.ctx=c,this.ie=!1;var f=window.navigator.userAgent;(f.indexOf("MSIE")>-1||f.indexOf("Trident")>-1)&&(this.ie=!0)}return i(u,[{key:"log",value:function(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",d=this.opt.log;this.opt.debug&&(typeof d>"u"?"undefined":n(d))==="object"&&typeof d[h]=="function"&&d[h]("mark.js: "+f)}},{key:"escapeStr",value:function(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(f){return this.opt.wildcards!=="disabled"&&(f=this.setupWildcardsRegExp(f)),f=this.escapeStr(f),Object.keys(this.opt.synonyms).length&&(f=this.createSynonymsRegExp(f)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(f=this.setupIgnoreJoinersRegExp(f)),this.opt.diacritics&&(f=this.createDiacriticsRegExp(f)),f=this.createMergedBlanksRegExp(f),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(f=this.createJoinersRegExp(f)),this.opt.wildcards!=="disabled"&&(f=this.createWildcardsRegExp(f)),f=this.createAccuracyRegExp(f),f}},{key:"createSynonymsRegExp",value:function(f){var h=this.opt.synonyms,d=this.opt.caseSensitive?"":"i",p=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var m in h)if(h.hasOwnProperty(m)){var y=h[m],b=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(m):this.escapeStr(m),v=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(y):this.escapeStr(y);b!==""&&v!==""&&(f=f.replace(new RegExp("("+this.escapeStr(b)+"|"+this.escapeStr(v)+")","gm"+d),p+("("+this.processSynomyms(b)+"|")+(this.processSynomyms(v)+")")+p))}return f}},{key:"processSynomyms",value:function(f){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(f=this.setupIgnoreJoinersRegExp(f)),f}},{key:"setupWildcardsRegExp",value:function(f){return f=f.replace(/(?:\\)*\?/g,function(h){return h.charAt(0)==="\\"?"?":""}),f.replace(/(?:\\)*\*/g,function(h){return h.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(f){var h=this.opt.wildcards==="withSpaces";return f.replace(/\u0001/g,h?"[\\S\\s]?":"\\S?").replace(/\u0002/g,h?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(f){return f.replace(/[^(|)\\]/g,function(h,d,p){var m=p.charAt(d+1);return/[(|)\\]/.test(m)||m===""?h:h+"\0"})}},{key:"createJoinersRegExp",value:function(f){var h=[],d=this.opt.ignorePunctuation;return Array.isArray(d)&&d.length&&h.push(this.escapeStr(d.join(""))),this.opt.ignoreJoiners&&h.push("\\u00ad\\u200b\\u200c\\u200d"),h.length?f.split(/\u0000+/).join("["+h.join("")+"]*"):f}},{key:"createDiacriticsRegExp",value:function(f){var h=this.opt.caseSensitive?"":"i",d=this.opt.caseSensitive?["aÃ Ã¡áº£Ã£áº¡Äáº±áº¯áº³áºµáº·Ã¢áº§áº¥áº©áº«áº­Ã¤Ã¥ÄÄ","AÃÃáº¢Ãáº Äáº°áº®áº²áº´áº¶Ãáº¦áº¤áº¨áºªáº¬ÃÃÄÄ","cÃ§ÄÄ","CÃÄÄ","dÄÄ","DÄÄ","eÃ¨Ã©áº»áº½áº¹Ãªá»áº¿á»á»á»Ã«ÄÄÄ","EÃÃáººáº¼áº¸Ãá»áº¾á»á»á»ÃÄÄÄ","iÃ¬Ã­á»Ä©á»Ã®Ã¯Ä«","IÃÃá»Ä¨á»ÃÃÄª","lÅ","LÅ","nÃ±ÅÅ","NÃÅÅ","oÃ²Ã³á»Ãµá»Ã´á»á»á»á»á»Æ¡á»á»¡á»á»á»£Ã¶Ã¸Å","OÃÃá»Ãá»Ãá»á»á»á»á»Æ á»á» á»á»á»¢ÃÃÅ","rÅ","RÅ","sÅ¡ÅÈÅ","SÅ ÅÈÅ","tÅ¥ÈÅ£","TÅ¤ÈÅ¢","uÃ¹Ãºá»§Å©á»¥Æ°á»«á»©á»­á»¯á»±Ã»Ã¼Å¯Å«","UÃÃá»¦Å¨á»¤Æ¯á»ªá»¨á»¬á»®á»°ÃÃÅ®Åª","yÃ½á»³á»·á»¹á»µÃ¿","YÃá»²á»¶á»¸á»´Å¸","zÅ¾Å¼Åº","ZÅ½Å»Å¹"]:["aÃ Ã¡áº£Ã£áº¡Äáº±áº¯áº³áºµáº·Ã¢áº§áº¥áº©áº«áº­Ã¤Ã¥ÄÄAÃÃáº¢Ãáº Äáº°áº®áº²áº´áº¶Ãáº¦áº¤áº¨áºªáº¬ÃÃÄÄ","cÃ§ÄÄCÃÄÄ","dÄÄDÄÄ","eÃ¨Ã©áº»áº½áº¹Ãªá»áº¿á»á»á»Ã«ÄÄÄEÃÃáººáº¼áº¸Ãá»áº¾á»á»á»ÃÄÄÄ","iÃ¬Ã­á»Ä©á»Ã®Ã¯Ä«IÃÃá»Ä¨á»ÃÃÄª","lÅLÅ","nÃ±ÅÅNÃÅÅ","oÃ²Ã³á»Ãµá»Ã´á»á»á»á»á»Æ¡á»á»¡á»á»á»£Ã¶Ã¸ÅOÃÃá»Ãá»Ãá»á»á»á»á»Æ á»á» á»á»á»¢ÃÃÅ","rÅRÅ","sÅ¡ÅÈÅSÅ ÅÈÅ","tÅ¥ÈÅ£TÅ¤ÈÅ¢","uÃ¹Ãºá»§Å©á»¥Æ°á»«á»©á»­á»¯á»±Ã»Ã¼Å¯Å«UÃÃá»¦Å¨á»¤Æ¯á»ªá»¨á»¬á»®á»°ÃÃÅ®Åª","yÃ½á»³á»·á»¹á»µÃ¿YÃá»²á»¶á»¸á»´Å¸","zÅ¾Å¼ÅºZÅ½Å»Å¹"],p=[];return f.split("").forEach(function(m){d.every(function(y){if(y.indexOf(m)!==-1){if(p.indexOf(y)>-1)return!1;f=f.replace(new RegExp("["+y+"]","gm"+h),"["+y+"]"),p.push(y)}return!0})}),f}},{key:"createMergedBlanksRegExp",value:function(f){return f.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(f){var h=this,d="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~Â¡Â¿",p=this.opt.accuracy,m=typeof p=="string"?p:p.value,y=typeof p=="string"?[]:p.limiters,b="";switch(y.forEach(function(v){b+="|"+h.escapeStr(v)}),m){case"partially":default:return"()("+f+")";case"complementary":return b="\\s"+(b||this.escapeStr(d)),"()([^"+b+"]*"+f+"[^"+b+"]*)";case"exactly":return"(^|\\s"+b+")("+f+")(?=$|\\s"+b+")"}}},{key:"getSeparatedKeywords",value:function(f){var h=this,d=[];return f.forEach(function(p){h.opt.separateWordSearch?p.split(" ").forEach(function(m){m.trim()&&d.indexOf(m)===-1&&d.push(m)}):p.trim()&&d.indexOf(p)===-1&&d.push(p)}),{keywords:d.sort(function(p,m){return m.length-p.length}),length:d.length}}},{key:"isNumeric",value:function(f){return Number(parseFloat(f))==f}},{key:"checkRanges",value:function(f){var h=this;if(!Array.isArray(f)||Object.prototype.toString.call(f[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(f),[];var d=[],p=0;return f.sort(function(m,y){return m.start-y.start}).forEach(function(m){var y=h.callNoMatchOnInvalidRanges(m,p),b=y.start,v=y.end,w=y.valid;w&&(m.start=b,m.length=v-b,d.push(m),p=v)}),d}},{key:"callNoMatchOnInvalidRanges",value:function(f,h){var d=void 0,p=void 0,m=!1;return f&&typeof f.start<"u"?(d=parseInt(f.start,10),p=d+parseInt(f.length,10),this.isNumeric(f.start)&&this.isNumeric(f.length)&&p-h>0&&p-d>0?m=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(f))),this.opt.noMatch(f))):(this.log("Ignoring invalid range: "+JSON.stringify(f)),this.opt.noMatch(f)),{start:d,end:p,valid:m}}},{key:"checkWhitespaceRanges",value:function(f,h,d){var p=void 0,m=!0,y=d.length,b=h-y,v=parseInt(f.start,10)-b;return v=v>y?y:v,p=v+parseInt(f.length,10),p>y&&(p=y,this.log("End range automatically set to the max value of "+y)),v<0||p-v<0||v>y||p>y?(m=!1,this.log("Invalid range: "+JSON.stringify(f)),this.opt.noMatch(f)):d.substring(v,p).replace(/\s+/g,"")===""&&(m=!1,this.log("Skipping whitespace only range: "+JSON.stringify(f)),this.opt.noMatch(f)),{start:v,end:p,valid:m}}},{key:"getTextNodes",value:function(f){var h=this,d="",p=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(m){p.push({start:d.length,end:(d+=m.textContent).length,node:m})},function(m){return h.matchesExclude(m.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){f({value:d,nodes:p})})}},{key:"matchesExclude",value:function(f){return o.matches(f,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(f,h,d){var p=this.opt.element?this.opt.element:"mark",m=f.splitText(h),y=m.splitText(d-h),b=document.createElement(p);return b.setAttribute("data-markjs","true"),this.opt.className&&b.setAttribute("class",this.opt.className),b.textContent=m.textContent,m.parentNode.replaceChild(b,m),y}},{key:"wrapRangeInMappedTextNode",value:function(f,h,d,p,m){var y=this;f.nodes.every(function(b,v){var w=f.nodes[v+1];if(typeof w>"u"||w.start>h){if(!p(b.node))return!1;var _=h-b.start,S=(d>b.end?b.end:d)-b.start,A=f.value.substr(0,b.start),C=f.value.substr(S+b.start);if(b.node=y.wrapRangeInTextNode(b.node,_,S),f.value=A+C,f.nodes.forEach(function(D,T){T>=v&&(f.nodes[T].start>0&&T!==v&&(f.nodes[T].start-=S),f.nodes[T].end-=S)}),d-=S,m(b.node.previousSibling,b.start),d>b.end)h=b.end;else return!1}return!0})}},{key:"wrapMatches",value:function(f,h,d,p,m){var y=this,b=h===0?0:h+1;this.getTextNodes(function(v){v.nodes.forEach(function(w){w=w.node;for(var _=void 0;(_=f.exec(w.textContent))!==null&&_[b]!=="";)if(d(_[b],w)){var S=_.index;if(b!==0)for(var A=1;A<b;A++)S+=_[A].length;w=y.wrapRangeInTextNode(w,S,S+_[b].length),p(w.previousSibling),f.lastIndex=0}}),m()})}},{key:"wrapMatchesAcrossElements",value:function(f,h,d,p,m){var y=this,b=h===0?0:h+1;this.getTextNodes(function(v){for(var w=void 0;(w=f.exec(v.value))!==null&&w[b]!=="";){var _=w.index;if(b!==0)for(var S=1;S<b;S++)_+=w[S].length;var A=_+w[b].length;y.wrapRangeInMappedTextNode(v,_,A,function(C){return d(w[b],C)},function(C,D){f.lastIndex=D,p(C)})}m()})}},{key:"wrapRangeFromIndex",value:function(f,h,d,p){var m=this;this.getTextNodes(function(y){var b=y.value.length;f.forEach(function(v,w){var _=m.checkWhitespaceRanges(v,b,y.value),S=_.start,A=_.end,C=_.valid;C&&m.wrapRangeInMappedTextNode(y,S,A,function(D){return h(D,v,y.value.substring(S,A),w)},function(D){d(D,v)})}),p()})}},{key:"unwrapMatches",value:function(f){for(var h=f.parentNode,d=document.createDocumentFragment();f.firstChild;)d.appendChild(f.removeChild(f.firstChild));h.replaceChild(d,f),this.ie?this.normalizeTextNode(h):h.normalize()}},{key:"normalizeTextNode",value:function(f){if(f){if(f.nodeType===3)for(;f.nextSibling&&f.nextSibling.nodeType===3;)f.nodeValue+=f.nextSibling.nodeValue,f.parentNode.removeChild(f.nextSibling);else this.normalizeTextNode(f.firstChild);this.normalizeTextNode(f.nextSibling)}}},{key:"markRegExp",value:function(f,h){var d=this;this.opt=h,this.log('Searching with expression "'+f+'"');var p=0,m="wrapMatches",y=function(v){p++,d.opt.each(v)};this.opt.acrossElements&&(m="wrapMatchesAcrossElements"),this[m](f,this.opt.ignoreGroups,function(b,v){return d.opt.filter(v,b,p)},y,function(){p===0&&d.opt.noMatch(f),d.opt.done(p)})}},{key:"mark",value:function(f,h){var d=this;this.opt=h;var p=0,m="wrapMatches",y=this.getSeparatedKeywords(typeof f=="string"?[f]:f),b=y.keywords,v=y.length,w=this.opt.caseSensitive?"":"i",_=function S(A){var C=new RegExp(d.createRegExp(A),"gm"+w),D=0;d.log('Searching with expression "'+C+'"'),d[m](C,1,function(T,M){return d.opt.filter(M,A,p,D)},function(T){D++,p++,d.opt.each(T)},function(){D===0&&d.opt.noMatch(A),b[v-1]===A?d.opt.done(p):S(b[b.indexOf(A)+1])})};this.opt.acrossElements&&(m="wrapMatchesAcrossElements"),v===0?this.opt.done(p):_(b[0])}},{key:"markRanges",value:function(f,h){var d=this;this.opt=h;var p=0,m=this.checkRanges(f);m&&m.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(m)),this.wrapRangeFromIndex(m,function(y,b,v,w){return d.opt.filter(y,b,v,w)},function(y,b){p++,d.opt.each(y,b)},function(){d.opt.done(p)})):this.opt.done(p)}},{key:"unmark",value:function(f){var h=this;this.opt=f;var d=this.opt.element?this.opt.element:"*";d+="[data-markjs]",this.opt.className&&(d+="."+this.opt.className),this.log('Removal selector "'+d+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(p){h.unwrapMatches(p)},function(p){var m=o.matches(p,d),y=h.matchesExclude(p);return!m||y?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(f){this._opt=s({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},f)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),u})();function l(u){var c=this,f=new a(u);return this.mark=function(h,d){return f.mark(h,d),c},this.markRegExp=function(h,d){return f.markRegExp(h,d),c},this.markRanges=function(h,d){return f.markRanges(h,d),c},this.unmark=function(h){return f.unmark(h),c},this}return l}))})(JC)),JC.exports}var v8t=b8t();const x8t=Z0(v8t);var w8t=xe('<div class="flex pb-1 text-sm"><span class="px-2 flex gap-2 bg-slate-200 text-slate-500 dark:bg-slate-600 dark:text-slate-300 rounded-md"><div class="text-slate-400 dark:text-slate-400 font-medium">Distance</div> <div class="text-ellipsis whitespace-nowrap overflow-hidden max-w-72"> </div></span></div>'),_8t=xe('<button class="m-1 p-2 text-left rounded-md hover:outline outline-slate-500"><!> <div class="overflow-hidden text-ellipsis line-clamp-4 leading-5"><!></div></button> <hr class="border-slate-300 dark:border-slate-600"/>',1),S8t=xe('<div class="flex flex-col w-full h-full"><div class="ml-3 mr-2 my-1 flex items-center text-slate-400 dark:text-slate-500 items-start"><div class="flex-1"><div> </div> <div> </div></div> <div class="flex-none mt-1"><button class="block hover:text-slate-500 dark:hover:text-slate-400"><!></button></div></div> <hr class="border-slate-300 dark:border-slate-600"/> <div class="flex flex-col overflow-x-hidden overflow-y-scroll"></div></div>');function A8t(t,e){ot(e,!0);let n=gt(e,"limit",3,100);function r(y,b){new x8t(y).mark(b)}let i=J(()=>e.items.length==0?"No result found.":e.items.length==1?`${e.items.length.toLocaleString()} result.`:e.items.length>=n()?`More than ${e.items.length.toLocaleString()} results, showing top ${n().toLocaleString()}.`:`${e.items.length.toLocaleString()} results.`);var s=S8t(),o=ne(s),a=ne(o),l=ne(a),u=ne(l,!0);Z(l);var c=pe(l,2),f=ne(c,!0);Z(c),Z(a);var h=pe(a,2),d=ne(h);d.__click=()=>{e.onClose?.()};var p=ne(d);ID(p,{}),Z(d),Z(h),Z(o);var m=pe(o,4);hn(m,20,()=>e.items,y=>y,(y,b)=>{var v=_8t(),w=Ye(v);w.__click=()=>{e.onClick?.(b)};var _=ne(w);{var S=D=>{var T=w8t(),M=ne(T),I=pe(ne(M),2),N=ne(I,!0);Z(I),Z(M),Z(T),Ne(P=>pt(N,P),[()=>b.distance.toFixed(5)]),te(D,T)};Le(_,D=>{b.distance!=null&&D(S)})}var A=pe(_,2),C=ne(A);{let D=J(()=>e.columnStyles??{});Z4e(C,{get values(){return b.fields},get columnStyles(){return k(D)}})}Z(A),dl(A,(D,T)=>r?.(D,T),()=>e.highlight),Z(w),Bm(2),te(y,v)}),Z(m),Z(s),Ne(()=>{pt(u,e.label),pt(f,k(i))}),te(t,s),at()}ti(["click"]);var C8t=an('<svg><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path fill="currentColor" d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"><animateTransform attributeName="transform" dur="0.75s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></svg>');function m6e(t,e){const n=Ts(e,["$$slots","$$events","$$legacy"]);var r=C8t();Ul(r,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),te(t,r)}function yne(t,e){ot(e,!0);let n=gt(e,"label",3,null),r=gt(e,"icon",3,null),i=gt(e,"title",3,""),s=gt(e,"order",3,null),o=De("ready");async function a(){if(e.onClick){ae(o,"running");try{await e.onClick(),ae(o,"ready")}catch{ae(o,"error")}}}{let l=J(()=>k(o)=="ready"?r():k(o)=="running"?m6e:ID);md(t,{get label(){return n()},get icon(){return k(l)},get title(){return i()},get order(){return s()},get class(){return e.class},onClick:a})}at()}var k8t=xe('<span class="pl-2 text-slate-500 dark:text-slate-500"> </span>'),E8t=xe('<div role="status" class="flex flex-row items-center"><!> <!></div>');function tV(t,e){let n=gt(e,"status",3,"Loading...");var r=E8t(),i=ne(r);m6e(i,{class:"text-blue-500"});var s=pe(i,2);{var o=a=>{var l=k8t(),u=ne(l,!0);Z(l),Ne(()=>pt(u,n())),te(a,l)};Le(s,a=>{n()!=null&&a(o)})}Z(r),te(t,r)}class D8t{contents;constructor(){this.contents=new Map}get(e){return this.contents.get(e)??null}set(e,n){this.contents.set(e,n)}value(e,n){if(this.contents.has(e))return this.contents.get(e);const r=n();return this.contents.set(e,r),r}}async function T8t(t,e,n,r={}){let i=r.exclude??[],s=(await Vge(t,e)).filter(a=>!a.name.startsWith("__")),o=[];r?.projection!=null&&o.push({type:"embedding",title:"Embedding",data:{x:r.projection.x,y:r.projection.y,text:r.projection.text}}),o.push({type:"predicates",title:"SQL Predicates"}),o.push({type:"table",title:"Table",columns:s.map(a=>a.name)});for(let a of s){if(a.jsType==null||i.indexOf(a.name)>=0)continue;let l=await Wge(t,e,a.name);if(!(l<=1))switch(a.jsType){case"string":l<=1e3&&o.push({type:"count-plot",title:a.name,data:{field:a.name}});break;case"string[]":o.push({type:"count-plot-list",title:a.name,data:{field:a.name}});break;case"number":l<=10?o.push({type:"count-plot",title:a.name,data:{field:a.name}}):o.push({type:"histogram",title:a.name,data:{field:a.name},binCount:20});break}}return o}const bne="0.12.0";class O8t{worker;callbacks;constructor(){this.worker=new Worker(new URL(""+new URL("search.worker-DfzgshYX.js",import.meta.url).href,import.meta.url),{type:"module"}),this.callbacks=new Map,this.worker.onmessage=e=>{let n=this.callbacks.get(e.data.identifier);n!=null&&(this.callbacks.delete(e.data.identifier),n(e.data))}}rpc(e){return new Promise((n,r)=>{let i=new Date().getTime()+"-"+Math.random();this.callbacks.set(i,n),this.worker.postMessage({...e,identifier:i})})}async clear(){await this.rpc({type:"clear"})}async addPoints(e){await this.rpc({type:"points",points:e})}async query(e,n){return(await this.rpc({type:"query",query:e,limit:n})).result}}class M8t{coordinator;table;columns;backend;currentIndex=null;constructor(e,n,r){this.coordinator=e,this.table=n,this.columns=r,this.currentIndex=null,this.backend=new O8t}predicateString(e){return e!=null&&e.toString()!=""?e.toString():null}async buildIndexIfNeeded(e){let n=this.predicateString(e);if(this.currentIndex!=null&&this.currentIndex.predicate==n)return;let r;n!=null?r=await this.coordinator.query(`
        SELECT
          ${_e(this.columns.id)} AS id,
          ${_e(this.columns.text)} AS text
        FROM ${this.table}
        WHERE ${n}
      `):r=await this.coordinator.query(`
        SELECT
          ${_e(this.columns.id)} AS id,
          ${_e(this.columns.text)} AS text
        FROM ${this.table}
      `),await this.backend.clear(),await this.backend.addPoints(Array.from(r)),this.currentIndex={predicate:n}}async fullTextSearch(e,n={}){let r=n.limit??100,i=n.predicate;return await this.buildIndexIfNeeded(i),(await this.backend.query(e,r)).map(o=>({id:o}))}}async function I8t(t,e,n,r,i,s){let o=[`${_e(n.id,e)} AS id`];n.x&&o.push(`${_e(n.x,e)} AS x`),n.y&&o.push(`${_e(n.y,e)} AS y`),n.text&&o.push(`${_e(n.text,e)} AS text`);let a=r??{};for(let d in a){let p=a[d];typeof p=="string"?o.push(`${_e(p,e)} AS "field_${d}"`):o.push(`${mt(p.sql)} AS "field_${d}"`)}let l=s.map(d=>d.id),u=new Map,c=new Map;for(let d=0;d<l.length;d++)u.set(l[d],d),c.set(l[d],s[d]);let f=await t.query(`
    SELECT
      ${o.join(", ")}
    FROM (
      SELECT ${_e(n.id,e)} AS __search_result_id__
      FROM ${e}
      WHERE
        ${_e(n.id,e)} IN [${l.map(d=>Ze(d)).join(", ")}]
        ${i?`AND (${i})`:""}
    )
    LEFT JOIN ${e} ON ${_e(n.id,e)} = __search_result_id__
  `),h=Array.from(f).map(d=>{let p={id:d.id,distance:c.get(d.id)?.distance,fields:{}};for(let m in d)m.startsWith("field_")?p.fields[m.substring(6)]=d[m]:p[m]=d[m];return p});return h=h.sort((d,p)=>(u.get(d.id)??0)-(u.get(p.id)??0)),h}function R8t(t){let{coordinator:e,table:n,idColumn:r,searcher:i,textColumn:s,neighborsColumn:o}=t,a={};if(i!=null&&i.fullTextSearch!=null)a.fullTextSearch=i.fullTextSearch.bind(i);else if(s!=null){let l=new M8t(e,n,{id:r,text:s});a.fullTextSearch=l.fullTextSearch.bind(l)}return i!=null&&i.vectorSearch!=null&&(a.vectorSearch=i.vectorSearch.bind(i)),i!=null&&i.nearestNeighbors!=null?a.nearestNeighbors=i.nearestNeighbors.bind(i):o!=null&&(a.nearestNeighbors=async l=>{let u=Ue.from(n).select({knn:_e(o)}).where(ml(_e(r),Ze(l))),c=await e.query(u),f=Array.from(c);if(f.length!=1)return[];let{distances:h,ids:d}=f[0].knn;return Array.from(d).map((m,y)=>({id:m,distance:h[y]})).filter(m=>m.id!=l)}),a}let y6e=typeof window<"u"?window.matchMedia?.("(prefers-color-scheme: dark)"):null,xO=gm(y6e?.matches?"dark":"light");y6e?.addEventListener("change",t=>{xO.set(t.matches?"dark":"light")});function F8t(){let t=gm(null);return{colorScheme:RP([xO,t],([n,r])=>r??n),userColorScheme:t}}var N8t=xe('<div class="p-2"><!></div>'),L8t=xe('<div class="absolute w-96 left-0 top-[32px] rounded-md right-0 z-20 border border-slate-300 dark:border-slate-600 overflow-hidden resize shadow-lg bg-white/75 dark:bg-slate-800/75 backdrop-blur-sm"><!></div>'),P8t=xe('<div class="relative w-full"><!> <!> <!></div>'),B8t=xe('<div class="text-slate-500 dark:text-slate-400">Embedding Atlas</div>'),$8t=xe('<h4 class="text-slate-500 dark:text-slate-400 select-none">Column Styles</h4> <!>',1),U8t=xe('<div class="flex flex-row gap-2"><!> <!></div>'),z8t=xe('<div class="min-w-[420px] flex flex-col gap-2"><!> <h4 class="text-slate-500 dark:text-slate-400 select-none">Export</h4> <div class="flex flex-col gap-2"><!> <!></div> <h4 class="text-slate-500 dark:text-slate-400 select-none">About</h4> <div> </div></div>'),j8t=xe('<div class="embedding-atlas-root"><div><div class="m-2 flex flex-row items-center gap-2 flex-wrap"><div class="flex flex-row flex-1 justify-between min-w-[180px]"><!></div> <div class="flex flex-none gap-2 items-center"><!> <div class="flex flex-row gap-1 items-center"><button class="flex px-2.5 mr-1 select-none items-center justify-center text-slate-500 dark:text-slate-300 rounded-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 focus-visible:outline-2 outline-blue-600 -outline-offset-1" title="Clear filters">Clear</button></div></div> <div class="flex flex-none flex-row gap-0.5"><!> <!> <!></div></div> <div class="flex-1 overflow-hidden h-full ml-2 mr-2 mb-2"><!></div></div></div>');function b6e(t,e){ot(e,!0);const n=()=>Ds(u,"$colorScheme",i),r=()=>Ds(b,"$resolvedColumnStyles",i),[i,s]=aa(),o=500;let a=gt(e,"embeddingViewConfig",3,null),l=gt(e,"embeddingViewLabels",3,null);const{colorScheme:u,userColorScheme:c}=F8t();Bt(()=>{VH(c,e.colorScheme)});let f=De(!1),h=De("parquet");const d=Wb.crossfilter();function p(){return qge(d.predicate(null))}let m=De([]),y=De({}),b=gm({});Bt(()=>{let ze=v(k(m),k(y));b.set(ze)});function v(ze,Be){let dt={};for(let Ht of ze){let dn=Be[Ht.name];dn==null&&(dn={display:e.data.text==Ht.name?"full":"badge"}),dt[Ht.name]=dn}return dt}let w=R8t({coordinator:e.coordinator,table:e.data.table,idColumn:e.data.id,textColumn:e.data.text,neighborsColumn:e.data.neighbors,searcher:e.searcher}),_=[...w.fullTextSearch!=null?["full-text"]:[],...w.vectorSearch!=null?["vector"]:[],...w.nearestNeighbors!=null?["neighbors"]:[]];const S={"full-text":{value:"full-text",label:"Full Text"},vector:{value:"vector",label:"Vector"},neighbors:{value:"neighbors",label:"Neighbors"}};let A=De("full-text"),C=De(""),D=De(""),T=De(!1),M=De(null),I=gm(null);async function N(ze,Be){if(w==null||_.indexOf(Be)<0){O();return}ae(T,!0),ae(D,"Searching...");let dt=p(),Ht=[],dn="",dr=ze.toString();Be=="full-text"&&w.fullTextSearch!=null?(ze=ze.trim(),Ht=await w.fullTextSearch(ze,{limit:o,predicate:dt,onStatus:ct=>{ae(D,ct,!0)}}),dn=ze):Be=="vector"&&w.vectorSearch!=null?(ze=ze.trim(),Ht=await w.vectorSearch(ze,{limit:o,predicate:dt,onStatus:ct=>{ae(D,ct,!0)}}),dn=ze):Be=="neighbors"&&w.nearestNeighbors!=null&&(dr="Neighbors of #"+ze.toString(),Ht=await w.nearestNeighbors(ze,{limit:o,predicate:dt,onStatus:ct=>{ae(D,ct,!0)}}));let un=await I8t(e.coordinator,e.data.table,{id:e.data.id,x:e.data.projection?.x,y:e.data.projection?.y,text:e.data.text},Object.fromEntries(k(m).map(ct=>[ct.name,ct.name])),dt,Ht);ae(D,""),ae(M,{label:dr,highlight:dn,items:un}),I.set({query:ze,mode:Be,ids:un.map(ct=>ct.id)})}const P=sae(N,500);function O(){ae(M,null),I.set(null),ae(T,!1)}Bt(()=>{k(C)==""?O():P(k(C),k(A))});function R(){for(let ze of d.clauses)ze.source?.reset?.(),d.update({...ze,value:null,predicate:null})}function L(ze){typeof ze.version=="string"&&(ae(U,ze.charts??{}),ae(V,ze.chartStates??{}),ae(W,ze.layout??"list"),ae(H,ze.layoutStates??{}))}Tl(()=>{if(!k(f))return;let ze={version:bne,timestamp:new Date().getTime()/1e3,charts:k(U),chartStates:k(V),layout:k(W),layoutStates:k(H),predicate:p()};e.onStateChange?.(ze)}),Qv(async()=>{let ze=[e.data.projection?.x,e.data.projection?.y].filter(Be=>Be!=null);if(ae(m,(await Vge(e.coordinator,e.data.table)).filter(Be=>!Be.name.startsWith("__"))),z.columns=k(m),e.initialState&&L(e.initialState),Object.keys(k(U)).length==0){let Be=await T8t(e.coordinator,e.data.table,e.data.id,{exclude:ze,projection:e.data.projection?{...e.data.projection,text:e.data.text??void 0}:void 0});ae(U,Object.fromEntries(Be.map((dt,Ht)=>[`${Ht+1}`,dt])))}ae(f,!0)});function B(ze){if(ze.key=="Escape"){R(),ze.preventDefault();try{document.activeElement?.blur?.()}catch{}}}let z={coordinator:e.coordinator,filter:d,table:e.data.table,id:e.data.id,columns:[],colorScheme:u,columnStyles:b,cache:new D8t,persistentCache:e.cache??{get:async()=>null,set:async(ze,Be)=>{}},searchModes:_,search:N,searchResult:I,highlight:gm(null),embeddingViewConfig:a(),embeddingViewLabels:l(),tableCellRenderers:e.tableCellRenderers},U=De({}),V=De({}),W=De("list"),H=De({});var Y=j8t();nb("keydown",ZI,B),Nt(Y,"",{},{width:"100%",height:"100%"});var se=ne(Y);let he,be;var fe=ne(se),me=ne(fe),K=ne(me);{var de=ze=>{var Be=P8t(),dt=ne(Be);B4e(dt,{type:"search",placeholder:"Search...",className:"w-full max-w-[400px] ",get value(){return k(C)},set value(ct){ae(C,ct,!0)}});var Ht=pe(dt,2);{var dn=ct=>{{let Vn=J(()=>_.filter(kr=>kr!="neighbors").map(kr=>S[kr]));gu(ct,{get options(){return k(Vn)},get value(){return k(A)},onChange:kr=>ae(A,kr,!0)})}};Le(Ht,ct=>{_.filter(Vn=>Vn!="neighbors").length>1&&ct(dn)})}var dr=pe(Ht,2);{var un=ct=>{var Vn=L8t();Nt(Vn,"",{},{height:"48em"});var kr=ne(Vn);{var Br=$r=>{A8t($r,{get items(){return k(M).items},get label(){return k(M).label},get highlight(){return k(M).highlight},limit:o,onClick:async Is=>{z.highlight.set(Is.id)},onClose:O,get columnStyles(){return r()}})},es=$r=>{var Is=kn(),Za=Ye(Is);{var jc=Bu=>{var $u=N8t(),pg=ne($u);tV(pg,{get status(){return k(D)}}),Z($u),te(Bu,$u)};Le(Za,Bu=>{k(D)!=null&&Bu(jc)},!0)}te($r,Is)};Le(kr,$r=>{k(M)!=null?$r(Br):$r(es,!1)})}Z(Vn),te(ct,Vn)};Le(dr,ct=>{k(T)&&ct(un)})}Z(Be),te(ze,Be)},ge=ze=>{var Be=B8t();te(ze,Be)};Le(K,ze=>{w?ze(de):ze(ge,!1)})}Z(me);var oe=pe(me,2),Fe=ne(oe);m8t(Fe,{get coordinator(){return e.coordinator},get filter(){return d},get table(){return e.data.table}});var Ce=pe(Fe,2),je=ne(Ce);je.__click=R,Z(Ce),Z(oe);var Ge=pe(oe,2),Ee=ne(Ge);fAe(Ee,{get icon(){return fde},title:"Options",children:(ze,Be)=>{var dt=z8t(),Ht=ne(dt);{var dn=$r=>{var Is=$8t(),Za=pe(Ye(Is),2);p8t(Za,{get columns(){return k(m)},get styles(){return r()},onStylesChange:jc=>{ae(y,jc)}}),te($r,Is)};Le(Ht,$r=>{k(m).length>0&&$r(dn)})}var dr=pe(Ht,4),un=ne(dr);{var ct=$r=>{var Is=U8t(),Za=ne(Is);yne(Za,{get icon(){return EQ},label:"Export Selection",title:"Export the selected points",class:"w-48",onClick:()=>e.onExportSelection(p(),k(h))});var jc=pe(Za,2);gu(jc,{label:"Format",get value(){return k(h)},onChange:Bu=>ae(h,Bu,!0),options:[{value:"parquet",label:"Parquet"},{value:"jsonl",label:"JSONL"},{value:"json",label:"JSON"},{value:"csv",label:"CSV"}]}),Z(Is),te($r,Is)};Le(un,$r=>{e.onExportSelection&&$r(ct)})}var Vn=pe(un,2);{var kr=$r=>{yne($r,{get icon(){return EQ},label:"Export Application",title:"Download a self-contained static web application",class:"w-48",get onClick(){return e.onExportApplication}})};Le(Vn,$r=>{e.onExportApplication&&$r(kr)})}Z(dr);var Br=pe(dr,4),es=ne(Br);Z(Br),Z(dt),Ne(()=>pt(es,`Embedding Atlas, ${bne}`)),te(ze,dt)},$$slots:{default:!0}});var rt=pe(Ee,2);{var Vt=ze=>{{let Be=J(()=>n()=="dark"?Gnt:Wnt);md(ze,{get icon(){return k(Be)},title:"Toggle dark mode",onClick:()=>{VH(c,n()=="light"?"dark":"light")}})}};Le(rt,ze=>{e.colorScheme==null&&ze(Vt)})}var Xe=pe(rt,2);mrt(Xe,{get context(){return z},get charts(){return k(U)},get chartStates(){return k(V)},get layout(){return k(W)},get layoutStates(){return k(H)},onChartsChange:ze=>ae(U,ze),onChartStatesChange:ze=>ae(V,ze),onLayoutStatesChange:ze=>ae(H,ze)}),Z(Ge),Z(fe);var ht=pe(fe,2),ln=ne(ht);{var er=ze=>{c8t(ze,{get context(){return z},get layout(){return k(W)},get layoutStates(){return k(H)},get charts(){return k(U)},get chartStates(){return k(V)},onChartsChange:Be=>ae(U,Be),onChartStatesChange:Be=>ae(V,Be),onLayoutStatesChange:Be=>ae(H,Be)})};Le(ln,ze=>{k(f)&&ze(er)})}Z(ht),Z(se),Z(Y),Ne(()=>{he=wr(se,1,"w-full h-full flex flex-col text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,he,{dark:n()=="dark"}),be=Nt(se,"",be,{"color-scheme":n()})}),te(t,Y),at(),s()}ti(["click"]);var q8t=xe('<button class="px-2 py-1 text-left rounded-md text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"> </button>'),V8t=xe('<ul class="absolute mt-1 w-full rounded-md shadow-md p-1 z-10 flex flex-col bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700"></ul>'),W8t=xe('<div><input type="text" class="form-input rounded-md py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 w-full"/> <!></div>');function vne(t,e){ot(e,!0);let n=gt(e,"value",3,""),r=gt(e,"options",19,()=>[]),i,s,o=De(!1),a=J(()=>n()!=null&&r()!=null?r().filter(p=>p.toLowerCase().includes(n().toLowerCase())):r()??[]);function l(p){e.onChange?.(p)}function u(p){l(p),ae(o,!1)}var c=W8t(),f=ne(c);DP(f),f.__change=()=>l(i.value??""),f.__input=()=>l(i.value??""),za(f,p=>i=p,()=>i);var h=pe(f,2);{var d=p=>{var m=V8t();hn(m,20,()=>k(a),y=>y,(y,b)=>{var v=q8t();v.__click=()=>u(b);var w=ne(v,!0);Z(v),Ne(()=>pt(w,b)),te(y,v)}),Z(m),te(p,m)};Le(h,p=>{k(o)&&k(a).length>0&&p(d)})}Z(c),za(c,p=>s=p,()=>s),Ne(()=>{wr(c,1,`relative ${e.className??""??""}`),ue(f,"placeholder",e.placeholder),WOe(f,n())}),nb("focus",f,()=>ae(o,!0)),nb("blur",f,p=>{p.relatedTarget&&p.relatedTarget instanceof Node&&s.contains(p.relatedTarget)||ae(o,!1)}),te(t,c),at()}ti(["change","input","click"]);var H8t=xe("<button> </button>"),G8t=xe('<div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">X</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Y</div> <!></div>',1),Y8t=xe('<div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Text</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Model</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Computing the embedding and 2D projection in browser may take a while.</p>',1),X8t=xe('<div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Image</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Model</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Computing the embedding and 2D projection in browser may take a while.</p>',1),K8t=xe(`<div class="flex flex-col p-4 w-[40rem] border rounded-md bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"><div class="flex flex-col gap-2 pb-4"><h2 class="text-slate-500 dark:text-slate-500">Search and Tooltip (optional)</h2> <p class="text-sm text-slate-400 dark:text-slate-600">The selected column, if any, will be used for full-text search and tooltips. Choose a column with freeform text,
      such as a description, chat messages, or a summary.</p> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Text</div> <!></div> <div class="my-2"></div> <h2 class="text-slate-500 dark:text-slate-500">Embedding View (optional)</h2> <p class="text-sm text-slate-400 dark:text-slate-600">To enable the embedding view, you can either (a) pick a pair of pre-computed X and Y columns; or (b) pick a text
      column and compute the embedding projection in browser. For large data, it's recommended to pre-compute the
      embedding and its 2D projection.</p> <div class="flex rounded overflow-hidden size-fit gap-[1px] bg-slate-100 dark:bg-slate-800 mb-2"></div> <!></div> <div class="w-full flex flex-row items-center mt-4"><div class="flex-1"></div> <!></div></div>`);function Q8t(t,e){ot(e,!0);const n=["Xenova/all-MiniLM-L6-v2","Xenova/multilingual-e5-small","Xenova/multilingual-e5-base","Xenova/multilingual-e5-large"],r=["Xenova/dinov2-small","Xenova/dinov2-base","Xenova/dinov2-large","Xenova/dino-vitb8","Xenova/dino-vits8","Xenova/dino-vitb16","Xenova/dino-vits16"];let i=De("precomputed"),s=De(null),o=De(null),a=De(null),l=De(null),u=De(null),c=De(null),f=De(null),h=J(()=>e.columns.filter(T=>h3(T.column_type)=="number")),d=J(()=>e.columns.filter(T=>h3(T.column_type)=="string"));Bt(()=>{let T=k(f);wo(()=>k(a)==null)&&ae(a,T,!0)});function p(){let T={text:k(f),embedding:null};if(k(i)=="precomputed"&&k(s)!=null&&k(o)!=null&&(T.embedding={precomputed:{x:k(s),y:k(o)}}),k(i)=="from-text"&&k(a)!=null){let M=k(l)?.trim()??"";(M==null||M=="")&&(M=n[0]),T.embedding={compute:{column:k(a),type:"text",model:M}}}if(k(i)=="from-image"&&k(u)!=null){let M=k(c)?.trim()??"";(M==null||M=="")&&(M=r[0]),T.embedding={compute:{column:k(u),type:"image",model:M}}}e.onConfirm?.(T)}var m=K8t(),y=ne(m),b=pe(ne(y),4),v=pe(ne(b),2);{let T=J(()=>[{value:null,label:"(none)"},...k(d).map(M=>({value:M.column_name,label:`${M.column_name} (${M.column_type})`}))]);gu(v,{class:"flex-1",get value(){return k(f)},onChange:M=>ae(f,M,!0),get options(){return k(T)}})}Z(b);var w=pe(b,8);hn(w,20,()=>[["precomputed","Precomputed"],["from-text","From Text"],["from-image","From Image"],["none","Disabled"]],Pn,(T,M)=>{var I=J(()=>YI(M,2));let N=()=>k(I)[0],P=()=>k(I)[1];var O=H8t();let R;O.__click=()=>ae(i,N(),!0);var L=ne(O,!0);Z(O),Ne(()=>{R=wr(O,1,"bg-slate-200 dark:bg-slate-700 dark:text-slate-400 px-2 py-1",null,R,{"!bg-slate-500":N()==k(i),"!text-slate-100":N()==k(i)}),pt(L,P())}),te(T,O)}),Z(w);var _=pe(w,2);{var S=T=>{var M=G8t(),I=Ye(M),N=pe(ne(I),2);{let R=J(()=>[{value:null,label:"(none)"},...k(h).map(L=>({value:L.column_name,label:`${L.column_name} (${L.column_type})`}))]);gu(N,{class:"flex-1",get value(){return k(s)},onChange:L=>ae(s,L,!0),get options(){return k(R)}})}Z(I);var P=pe(I,2),O=pe(ne(P),2);{let R=J(()=>[{value:null,label:"(none)"},...k(h).map(L=>({value:L.column_name,label:`${L.column_name} (${L.column_type})`}))]);gu(O,{class:"flex-1",get value(){return k(o)},onChange:L=>ae(o,L,!0),get options(){return k(R)}})}Z(P),te(T,M)},A=T=>{var M=kn(),I=Ye(M);{var N=O=>{var R=Y8t(),L=Ye(R),B=pe(ne(L),2);{let V=J(()=>[{value:null,label:"(none)"},...k(d).map(W=>({value:W.column_name,label:`${W.column_name} (${W.column_type})`}))]);gu(B,{class:"flex-1",get value(){return k(a)},onChange:W=>ae(a,W,!0),get options(){return k(V)}})}Z(L);var z=pe(L,2),U=pe(ne(z),2);vne(U,{className:"flex-1",get value(){return k(l)},get placeholder(){return`(default ${n[0]??""})`},onChange:V=>ae(l,V,!0),get options(){return n}}),Z(z),Bm(2),te(O,R)},P=O=>{var R=kn(),L=Ye(R);{var B=z=>{var U=X8t(),V=Ye(U),W=pe(ne(V),2);{let se=J(()=>[{value:null,label:"(none)"},...e.columns.map(he=>({value:he.column_name,label:`${he.column_name} (${he.column_type})`}))]);gu(W,{class:"flex-1",get value(){return k(u)},onChange:he=>ae(u,he,!0),get options(){return k(se)}})}Z(V);var H=pe(V,2),Y=pe(ne(H),2);vne(Y,{className:"flex-1",get value(){return k(c)},get placeholder(){return`(default ${r[0]??""})`},onChange:se=>ae(c,se,!0),get options(){return r}}),Z(H),Bm(2),te(z,U)};Le(L,z=>{k(i)=="from-image"&&z(B)},!0)}te(O,R)};Le(I,O=>{k(i)=="from-text"?O(N):O(P,!1)},!0)}te(T,M)};Le(_,T=>{k(i)=="precomputed"?T(S):T(A,!1)})}Z(y);var C=pe(y,2),D=pe(ne(C),2);md(D,{label:"Confirm",class:"w-40 justify-center",onClick:()=>{p()}}),Z(C),Z(m),te(t,m),at()}ti(["click"]);var J8t=xe('<button><div class="text-center space-y-2"><p class="text-slate-500 dark:text-slate-500"> </p> <p class="text-sm text-slate-400 dark:text-slate-600">Accepted file types: JSON, CSV, Parquet</p></div> <input type="file" class="hidden"/></button>');function Z8t(t,e){ot(e,!0);let n=De(!1),r;function i(p){p.preventDefault(),ae(n,!0)}function s(){ae(n,!1)}function o(p){if(p.preventDefault(),ae(n,!1),p.dataTransfer.files&&p.dataTransfer.files.length==1){let m=p.dataTransfer.files[0];l(m)&&e.onUpload(m)}}function a(p){const m=Array.from(p.target.files);m.length==1&&l(m[0])&&e.onUpload(m[0])}function l(p){if(e.extensions==null)return!0;for(let m of e.extensions)if(p.name.toLowerCase().endsWith(m.toLowerCase()))return!0;return!1}var u=J8t();u.__click=()=>{r.click()};var c=ne(u),f=ne(c),h=ne(f,!0);Z(f),Bm(2),Z(c);var d=pe(c,2);d.__change=a,za(d,p=>r=p,()=>r),Z(u),Ne(p=>{wr(u,1,`flex flex-col items-center w-[40rem] justify-center py-20 border-2 border-dashed rounded-md transition-all
    ${k(n)?"bg-slate-50 border-slate-500 dark:bg-slate-900 dark:border-slate-500":"bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"}`),pt(h,k(n)?"Drop your files here":"Drag & drop files here or click to select"),ue(d,"accept",p)},[()=>e.extensions?.join(",")]),nb("dragover",u,i),nb("dragleave",u,s),nb("drop",u,o),te(t,u),at()}ti(["click","change"]);function xne(t,e){if(t.length>0&&t[t.length-1].text==e.text){let n=t.slice();return n[n.length-1]=e,n}else return[...t,e]}var eDt=xe('<div class="flex items-center text-slate-500 dark:text-slate-500"><div class="w-7 flex-none"><!></div> <div> </div> <div class="flex-none"><!></div></div>'),tDt=xe('<div class="flex flex-col p-4 w-[420px] border rounded-md bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"></div>');function nDt(t,e){ot(e,!0);let n=gt(e,"messages",19,()=>[]);var r=tDt();hn(r,21,n,Pn,(i,s,o)=>{const a=J(()=>o==n().length-1);var l=eDt(),u=ne(l),c=ne(u);{var f=v=>{tV(v,{status:null})};Le(c,v=>{k(a)&&v(f)})}Z(u);var h=pe(u,2);let d;var p=ne(h,!0);Z(h);var m=pe(h,2),y=ne(m);{var b=v=>{var w=Ca();Ne(_=>pt(w,`${_??""}%`),[()=>k(s).progress.toFixed(0)]),te(v,w)};Le(y,v=>{k(s).progress!=null&&k(a)&&v(b)})}Z(m),Z(l),Ne(()=>{d=wr(h,1,"flex-1",null,d,{"text-red-400":k(s).error}),pt(p,k(s).text)}),te(i,l)}),Z(r),te(t,r),at()}class rDt{static connect(e){return new Promise(n=>{let r=new Map,i=(s,...o)=>new Promise((a,l)=>{let u=new Date().getTime()+"-"+Math.random();r.set(u,[a,l]),e.postMessage({rpc:s,id:u,args:o})});e.postMessage({ready:!0}),e.onmessage=s=>{if(s.data.ready){n(i);return}let o=r.get(s.data.id);o!=null&&(r.delete(s.data.id),s.data.error?o[1](new Error(s.data.error)):o[0](s.data.result))}})}static runtime(){let e=new Map,n=async r=>{if(r.data.ready&&postMessage({ready:!0}),r.data.rpc){let s={id:r.data.id,result:null,error:null};try{s.result=await e.get(r.data.rpc)?.(...r.data.args)}catch(o){s.error=o.toString()}postMessage(s)}};return postMessage({ready:!0}),{handler:n,register:(r,i)=>{e.set(r,i)}}}}let GI=null;function iDt(){if(GI==null){let t=new Worker(new URL(""+new URL("embedding.worker-BXbr52e3.js",import.meta.url).href,import.meta.url),{type:"module"});GI=rDt.connect(t)}return GI}async function*sDt(t,e,n,r,i){let o=(await t.query(Ue.from(e).select({count:ur()}))).get(0).count,a=0;for(;a<o;){let l=a,u=a+i;u>o&&(u=o);let c=await t.query(Ue.from(e).select({id:_e(n),value:_e(r)}).offset(a).limit(u-l));yield{total:o,data:c},a=u}}async function oDt(t,e,n,r,i,s,o){let a=0;await t.exec(`
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${_e(r)} DOUBLE DEFAULT 0;
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${_e(i)} DOUBLE DEFAULT 0;
  `);for(let l of s){let u=o.subarray(a,a+l.length*2);await t.exec(`
        WITH t1 AS (
            SELECT
                UNNEST([${l.map(c=>Ze(c)).join(",")}]) AS id,
                UNNEST([${l.map((c,f)=>u[f*2]).join(",")}]) AS x,
                UNNEST([${l.map((c,f)=>u[f*2+1]).join(",")}]) AS y
        )
        UPDATE ${e}
            SET ${_e(r)} = t1.x, ${_e(i)} = t1.y
            FROM t1 WHERE ${_e(n,e)} = t1.id
    `),a+=l.length*2}}async function aDt(t){function e(a,l){t.callback?.(a,l)}e(`Loading ${t.model}...`);let n=await iDt(),r=await n("embedding.new",{type:t.type,model:t.model}),i=[],s=0;for await(const{total:a,data:l}of sDt(t.coordinator,t.table,t.idColumn,t.dataColumn,t.type=="text"?64:16)){e("Processing Batches...",s/a*100);let u=Array.from(l.getChild("id")),c=Array.from(l.getChild("value"));await n("embedding.batch",r,c),i.push(u),s+=u.length}e("UMAP Projection...");let o=await n("embedding.finalize",r);await oDt(t.coordinator,t.table,t.idColumn,t.xColumn,t.yColumn,i,o)}function ZC(t,e){let n=document.createElement("a");n.href=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})),n.download=e,n.click()}const dP={json:{query:"(FORMAT JSON, ARRAY true)",extension:"json"},jsonl:{query:"(FORMAT JSON)",extension:"jsonl"},csv:{query:"(FORMAT CSV)",extension:"csv"},parquet:{query:"(FORMAT parquet)",extension:"parquet"}};function lDt(t,e,n,r){return e==null||e.length==0?mt`COPY ${t} TO ${Ze(n)} ${dP[r].query}`:mt`COPY (SELECT * FROM ${t} WHERE ${e}) TO ${Ze(n)} ${dP[r].query}`}function v6e(t){return`selection-${Date.now()}.${dP[t].extension}`}async function x6e(t,e,n,r){let i=await t.databaseConnector()?.getDuckDB(),s=v6e(r);await i.registerEmptyFileBuffer(s);let o=lDt(e,n,s,r);await t.query(o.toString());let a=await i.copyFileToBuffer(s);return i.dropFile(s),[a,s]}var uDt=xe('<!> <p class="text-slate-400 dark:text-slate-500 mt-4">* All data remains confined to the browser and is not transmitted elsewhere.</p>',1),cDt=xe("<div><!></div>"),fDt=xe('<div class="fixed left-0 right-0 top-0 bottom-0"><!></div>');function wne(t,e){ot(e,!0);const n=()=>Ds(xO,"$systemColorScheme",r),[r,i]=aa(),s=gh(),o=bz(s,"wasm",null);let a=De("upload"),l=De([]),u=null,c=De(null),f=De(null),h=De([]);function d(A,C){ae(l,xne(k(l),{text:A,progress:C}))}function p(A){ae(l,xne(k(l),{text:A,error:!0}))}async function m(A){ae(a,"messages");try{d("Initializing database..."),await o,d("Loading data..."),await(await s.databaseConnector().getDuckDB()).registerFileBuffer(A.name,new Uint8Array(await A.arrayBuffer())),await s.exec(`CREATE TABLE dataset AS SELECT * FROM ${Ze(A.name)}`);let D=await s.query("DESCRIBE TABLE dataset");ae(h,Array.from(D)),await s.exec(`
        ALTER TABLE dataset DROP COLUMN IF EXISTS __row_index__;
        ALTER TABLE dataset ADD COLUMN __row_index__ INTEGER;
        CREATE SEQUENCE __row_index_sequence__;
        UPDATE dataset SET __row_index__ = nextval('__row_index_sequence__');
        DROP SEQUENCE __row_index_sequence__;
      `)}catch(C){ae(a,"messages"),p(C.message);return}ae(a,"columns")}async function y(A){ae(a,"messages");try{if(ae(c,A.text),A.embedding!=null&&"precomputed"in A.embedding&&ae(f,{x:A.embedding.precomputed.x,y:A.embedding.precomputed.y}),A.embedding!=null&&"compute"in A.embedding){let C=A.embedding.compute.column,D=A.embedding.compute.type,T=A.embedding.compute.model,M=C+"_proj_x",I=C+"_proj_y";await aDt({coordinator:s,table:"dataset",idColumn:"__row_index__",dataColumn:C,type:D,xColumn:M,yColumn:I,model:T,callback:(N,P)=>{d(`Embedding: ${N}`,P)}}),ae(f,{x:M,y:I})}}catch(C){p(C.message);return}ae(a,"ready")}async function b(A,C){let[D,T]=await x6e(s,"dataset",A,C);ZC(D,T)}var v=fDt(),w=ne(v);{var _=A=>{{let C=J(()=>({table:"dataset",id:"__row_index__",text:k(c),projection:k(f)}));b6e(A,{get coordinator(){return s},get data(){return k(C)},initialState:u,onExportSelection:b})}},S=A=>{var C=cDt();let D;var T=ne(C);{var M=N=>{var P=uDt(),O=Ye(P);Z8t(O,{extensions:[".csv",".parquet",".json",".jsonl"],onUpload:m}),Bm(2),te(N,P)},I=N=>{var P=kn(),O=Ye(P);{var R=B=>{Q8t(B,{get columns(){return k(h)},onConfirm:y})},L=B=>{var z=kn(),U=Ye(z);{var V=W=>{nDt(W,{get messages(){return k(l)}})};Le(U,W=>{k(a)=="messages"&&W(V)},!0)}te(B,z)};Le(O,B=>{k(a)=="columns"?B(R):B(L,!1)},!0)}te(N,P)};Le(T,N=>{k(a)=="upload"?N(M):N(I,!1)})}Z(C),Ne(()=>D=wr(C,1,"w-full h-full grid place-content-center select-none text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,D,{dark:n()=="dark"})),te(A,C)};Le(w,A=>{k(a)=="ready"?A(_):A(S,!1)})}Z(v),te(t,v),at(),i()}const w6e="deflate-raw";async function hDt(t){let n=new TextEncoder().encode(JSON.stringify(t)),r=await XPe(n,w6e);return QPe(r)}async function dDt(t){let e=JPe(t),n=await KPe(e,w6e),r=new TextDecoder;return JSON.parse(r.decode(n))}async function pDt(){try{let t=window.location.hash,e=t.lastIndexOf("?");return e<0?null:await dDt(t.slice(e+1))}catch{return null}}async function gDt(t){let n=window.location.hash.lastIndexOf("?"),r=await hDt(t);n<0?window.location.hash+="?"+r:window.location.hash=window.location.hash.slice(0,n)+"?"+r}var mDt=xe('<div class="text-red-600"> </div>'),yDt=xe('<div class="w-72"><!></div>'),bDt=xe("<div><!></div>"),vDt=xe('<div class="fixed left-0 right-0 top-0 bottom-0"><!></div>');function _6e(t,e){ot(e,!0);const n=()=>Ds(xO,"$systemColorScheme",r),[r,i]=aa(),s=gh();let o=De(!1),a=De(!1),l=De("Loading..."),u=De(null),c=De(null);Qv(async()=>{try{ae(u,await pDt()),ae(l,"Initializing database..."),ae(c,await e.dataSource.initializeCoordinator(s,"dataset",v=>{ae(l,v,!0)})),ae(o,!0)}catch(v){ae(a,!0),ae(l,v.message,!0);return}});async function f(v,w){e.dataSource.downloadSelection&&await e.dataSource.downloadSelection(v,w)}async function h(){e.dataSource.downloadArchive&&await e.dataSource.downloadArchive()}function d(v){gDt({...v,predicate:void 0})}var p=vDt(),m=ne(p);{var y=v=>{{let w=J(()=>({...k(c).data??{id:"id"},table:"dataset"})),_=J(()=>e.dataSource.downloadArchive?h:null),S=J(()=>e.dataSource.downloadSelection?f:null),A=J(()=>sae(d,200));b6e(v,{get coordinator(){return s},get data(){return k(w)},get embeddingViewConfig(){return k(c).embeddingViewConfig},get embeddingViewLabels(){return k(c).embeddingViewLabels},get initialState(){return k(u)},get onExportApplication(){return k(_)},get onExportSelection(){return k(S)},get onStateChange(){return k(A)},get cache(){return e.dataSource.cache}})}},b=v=>{var w=bDt();let _;var S=ne(w);{var A=D=>{var T=mDt();Nt(T,"",{},{"max-width":"36rem"});var M=ne(T,!0);Z(T),Ne(()=>pt(M,k(l))),te(D,T)},C=D=>{var T=yDt(),M=ne(T);tV(M,{get status(){return k(l)}}),Z(T),te(D,T)};Le(S,D=>{k(a)?D(A):D(C,!1)})}Z(w),Ne(()=>_=wr(w,1,"w-full h-full grid place-content-center select-none text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,_,{dark:n()=="dark"})),te(v,w)};Le(m,v=>{k(o)&&k(c)!=null?v(y):v(b,!1)})}Z(p),te(t,p),at(),i()}function Y6(t,e){return e.startsWith(".")&&(e=e.slice(1)),t.endsWith("/")&&e.startsWith("/")?t+e.slice(1):!t.endsWith("/")&&!e.startsWith("/")?t+"/"+e:t+e}class xDt{serverUrl;downloadArchive=void 0;downloadSelection=void 0;constructor(e){if(e.startsWith("http"))this.serverUrl=e;else{let n=window.location.origin+window.location.pathname;n=n.replace(/\/[^/]*$/,"/"),this.serverUrl=Y6(n,e)}}async initializeCoordinator(e,n,r){let i=await this.metadata();r("Initializing DuckDB...");let s=i.database?.type??"wasm";if(await bz(e,s,i.database?.uri??Y6(this.serverUrl,"query")),i.database?.load){r("Loading data...");let o=Y6(this.serverUrl,"dataset.parquet");await e.exec(`
        CREATE OR REPLACE TABLE ${n} AS (SELECT * FROM read_parquet(${Ze(o)}));
      `)}return i.isStatic||(this.downloadArchive=async()=>{let a=await(await this.fetchEndpoint("archive.zip")).arrayBuffer();ZC(a,"embedding-atlas.zip")}),s=="wasm"?this.downloadSelection=async(o,a)=>{let[l,u]=await x6e(e,n,o,a);ZC(l,u)}:i.isStatic||(this.downloadSelection=async(o,a)=>{let l=v6e(a),c=await(await this.fetchEndpoint("selection",{method:"POST",body:JSON.stringify({predicate:o,format:a})})).arrayBuffer();ZC(c,l)}),i.props}async fetchEndpoint(e,n){let r=await fetch(Y6(this.serverUrl,e),n);if(r.status!=200)throw new Error("ERROR FETCH");return r}async metadata(){try{return await this.fetchEndpoint("metadata.json").then(e=>e.json())}catch{throw new Error("Network Error: Failed to fetch dataset metadata")}}async cacheGet(e){try{return await this.fetchEndpoint("cache/"+e).then(n=>n.json())}catch{return null}}async cacheSet(e,n){try{await this.fetchEndpoint("cache/"+e,{method:"POST",body:JSON.stringify(n)})}catch{}}cache={get:e=>this.cacheGet(e),set:(e,n)=>this.cacheSet(e,n)}}function wDt(t,e){ot(e,!1);let n="./data/",r=new xDt(n);MP(),_6e(t,{get dataSource(){return r}}),at()}function _Dt(t,e){ot(e,!1);class n{count;constructor(o){this.count=o}async initializeCoordinator(o,a){return await bz(o,"wasm"),await o.exec(`
        SELECT setseed(0.42);

        CREATE OR REPLACE MACRO random_normal() AS (sqrt(-2 * LN(random())) * cos(2 * PI() * random()));
        CREATE OR REPLACE MACRO random_choice(list, f) AS list_element(list, 1 + floor(pow(random(), f) * len(list))::INT);
        CREATE OR REPLACE MACRO random_invalid(x) AS CASE WHEN random() < 0.02 THEN random_choice(['NaN','Inf','-Inf', Null], 2)::DOUBLE ELSE x END;
        CREATE OR REPLACE MACRO random_string(prefix) AS prefix || LPAD(FLOOR(POW(RANDOM(), 1.3) * 1000)::INT::VARCHAR, 3, '0');
        CREATE OR REPLACE MACRO shuffle_hash(x, v) AS x + hash(v) % 5;

        CREATE OR REPLACE TABLE ${a} AS (
          SELECT
            id,
            'sample text' AS text,
            random_choice(['Apple', 'Orange', 'Pink-flowered Native Raspberry', null], 2) AS var_category,
            concat('Category', (150 * abs(sin(20 * pow(random(), 5))))::INT::TEXT) AS var_many_category,
            list_distinct(list_transform(range(1, 4), (x) -> random_choice(['Apple', 'Orange', 'Banana', 'Raspberry', 'Pear'], 2))) AS var_multi_category,
            list_distinct(list_transform(range(1, 4), (x) -> random_string('Cat'))) AS var_multi_many_category,
            random() AS var_uniform,
            random_invalid(random_normal()) AS var_normal,
            random_invalid(exp(random_normal() + 1)) AS var_log_normal,
            random_invalid(random_normal() + 1000) AS var_normal_biased,
            random_invalid(random_normal() - 1000) AS var_normal_biased_negative,
            random_normal() AS x,
            random_normal() AS y
          FROM range(0, ${this.count}) t(id)
        );

        UPDATE ${a} SET var_normal = var_normal + 5 WHERE var_log_normal < exp(random());
        UPDATE ${a} SET var_normal_biased = var_normal_biased + random() * var_normal;
        UPDATE ${a} SET var_normal_biased_negative = var_normal_biased_negative + random() * var_normal;
        UPDATE ${a} SET
          x = sin(10 * shuffle_hash(var_uniform, var_category)) * x + cos(5 * shuffle_hash(var_uniform, var_category)) * y,
          y = sin(4 * shuffle_hash(var_uniform, var_category)) * x + cos(18 * shuffle_hash(var_uniform, var_category)) * y;
        UPDATE ${a} SET x = x + 5 * fmod(floor(var_uniform * 24 + random()), 5);
        UPDATE ${a} SET y = y + 5 * floor(floor(var_uniform * 24 + random()) / 5);
      `),{data:{table:a,id:"id",projection:{x:"x",y:"y"},text:"text"}}}}let r=new n(1e5);var i={get TestDataSource(){return n},set TestDataSource(s){n=s}};return MP(),_6e(t,{get dataSource(){return r}}),ZOe(e,"TestDataSource",n),at(i)}function SDt(t){const e={"/":window?.EMBEDDING_ATLAS_HOME=="upload"?wne:wDt,"/test":_Dt,"/upload":wne};d7e(t,{get routes(){return e}})}EP(SDt,{target:document.getElementById("app")});
